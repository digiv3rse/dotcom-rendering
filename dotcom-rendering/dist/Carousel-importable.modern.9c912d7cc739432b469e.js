(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[3875],{1374:(t,n,e)=>{t.exports={attributes:{width:"16",height:"16",viewBox:"0 0 16 16"},content:'<path d="M13 0l1 1v7l-1 1H7l-2 3H4V9H2L1 8V1l1-1h11z"></path>'};var o=e(5951);t.exports=o(t.exports)},5459:(t,n,e)=>{"use strict";e.r(n),e.d(n,{Carousel:()=>dt});var o=e(7800),r=e(43),i=e(1919),s=e(1810),c=e(4436),l=e(7357),a=e(3196),d=e(683),u=e(3198),f=e.n(u),p=e(3904),h=e(4180);const x=t=>(t=>t.replace(new RegExp("[;]","g"),""))((t=>t.replace(new RegExp(" ","g"),"-"))(t.replace(new RegExp("[^0-9a-z ]","gi"),";").toLowerCase()));var g=e(8263),m=e(9901),b=e(5737),v=e(3368),w=e(2082),k=e(2188),j=e(7295);function y(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function C(){const t=y(["\n\tdisplay: flex;\n\t/* Remove space-between where there is a single item, so that it is left-aligned */\n\t","\n\toverflow: hidden;\n\t"," {\n\t\tpadding-right: 40px;\n\t}\n"]);return C=function(){return t},t}function D(){const t=y(["\n\tmargin-top: 6px;\n\tmargin-bottom: 24px;\n\n\tmargin-left: 0px;\n\tmargin-right: 0px;\n\n\t"," {\n\t\t/* Shrink the container to remove the leading and\n       \t\t\t\t   trailing side margins from the list of cards */\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n\n\t"," {\n\t\tmargin-left: -1px;\n\t\tmargin-right: -10px;\n\t\tmargin-top: 6px;\n\t}\n"]);return D=function(){return t},t}function L(){const t=y(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\toverflow: hidden; /* Needed for scrolling to work */\n"]);return L=function(){return t},t}function T(){const t=y(["\n\tmin-height: 227px;\n\tposition: relative; /* must set position for offset(Left) calculations of children to be relative to this box */\n\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: stretch;\n\n\tscroll-snap-type: x mandatory;\n\tscroll-behavior: smooth;\n\toverflow-x: auto; /* Scrollbar is less intrusive visually on non-desktop devices typically */\n\toverflow-y: hidden; /*Fixes small problem with 1px vertical scroll on immersive due to top bar */\n\t"," {\n\t\t&::-webkit-scrollbar {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tscrollbar-width: none;\n\t}\n\n\t"," {\n\t\tmargin-left: -10px; /* Align firstcard on mobile devices */\n\t}\n"]);return T=function(){return t},t}function S(){const t=y(["\n\tmargin-bottom: ","px;\n"]);return S=function(){return t},t}function I(){const t=y(["\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: ","px;\n\twidth: ","px;\n\tbackground-color: ",";\n\tborder-radius: 100%;\n\tborder: 0 none;\n\tpadding: 0;\n\tmargin-right: ","px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ",";\n\t\toutline: none;\n\t}\n"]);return I=function(){return t},t}function M(){const t=y(["\n\tbackground-color: ",";\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ",";\n\t}\n"]);return M=function(){return t},t}function P(){const t=y(["\n\t\t"," {\n\t\t\tdisplay: ",";\n\t\t}\n\n\t\t"," {\n\t\t\tdisplay: ",";\n\t\t}\n\n\t\t"," {\n\t\t\tdisplay: ",";\n\t\t}\n\t"]);return P=function(){return t},t}function E(){const t=y(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tposition: absolute;\n\t","\n\theight: 100%;\n\tpadding-bottom: 36px; /* Align buttons centrally with cards */\n\n\t"," {\n\t\tdisplay: none;\n\t}\n"]);return E=function(){return t},t}function O(){const t=y(["\n\t\t\t\t"," {\n\t\t\t\t\tleft: 205px;\n\t\t\t\t}\n\t\t\t"]);return O=function(){return t},t}function $(){const t=y(["\n\t\t\t\t"," {\n\t\t\t\t\tleft: 120px;\n\t\t\t\t}\n\n\t\t\t\t"," {\n\t\t\t\t\tleft: 205px;\n\t\t\t\t}\n\t\t\t"]);return $=function(){return t},t}function F(){const t=y(["\n\tright: 10px;\n"]);return F=function(){return t},t}function z(){const t=y(["\n\tborder: 0 none;\n\tborder-radius: 100%;\n\theight: 34px;\n\twidth: 34px;\n\tcursor: pointer;\n\tmargin-top: 10px;\n\tpadding: 0;\n\tbackground-color: ",";\n\n\t&:active,\n\t&:hover {\n\t\toutline: none;\n\t\tbackground-color: ",";\n\t\tsvg {\n\t\t\tfill: ",";\n\t\t}\n\t}\n\n\t&:focus {\n\t\toutline: none;\n\t}\n\n\tsvg {\n\t\tfill: ",";\n\t\theight: 34px;\n\t}\n"]);return z=function(){return t},t}function A(){const t=y(["\n\tbackground-color: ",";\n\tcursor: ",";\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ",";\n\n\t\tsvg {\n\t\t\tfill: ",";\n\t\t}\n\t}\n"]);return A=function(){return t},t}function H(){const t=y(["\n\tpadding-left: 5px; /* Fix centering of SVG*/\n\tmargin-left: 10px;\n\tbackground-color: ",";\n\tcursor: ",";\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ",";\n\n\t\tsvg {\n\t\t\tfill: ",";\n\t\t}\n\t}\n"]);return H=function(){return t},t}function R(){const t=y(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\t"," {\n\t\tpadding-right: 10px;\n\t}\n\n\t"," {\n\t\tmargin-left: 10px;\n\t}\n"]);return R=function(){return t},t}function B(){const t=y(["\n\t",";\n\tcolor: ",";\n\t",";\n\tpadding-bottom: ","px;\n\tpadding-top: ","px;\n\tmargin-left: 0;\n"]);return B=function(){return t},t}function Y(){const t=y(["\n\tcolor: ",";\n"]);return Y=function(){return t},t}const _=()=>(0,o.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.4 4L8 14.4V15.45L18.4 25.8499L19.375 24.8999L11.05 14.925L19.375 4.95L18.4 4Z"})}),N=()=>(0,o.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.975 4L9 4.95L17.325 14.925L9 24.8999L9.975 25.8499L20.375 15.45V14.4L9.975 4Z"})}),V=(t,n)=>t>=n-4,U=(0,r.css)(D(),s.Dp.tablet,s.Dp.leftCol),W=(0,r.css)(L()),X=(0,r.css)(T(),s.Dp.tablet,s.C4.tablet),Z=(0,r.css)(S(),c.D[2]),q=(0,r.css)(I(),c.D[3],c.D[3],l.n$[93],c.D[1],l.n$[86]),K=t=>(0,r.css)(M(),t.background.carouselDot,t.background.carouselDotFocus),G=(t,n)=>(0,r.css)(P(),s.Dp.phablet,t>=n-1?"none":"auto",s.Dp.tablet,t>=n-2?"none":"auto",s.Dp.desktop,t>=n-3?"none":"auto"),J=(0,r.css)(E(),(0,m.K)("onwardsCarousel"),s.C4.leftCol),Q=t=>{switch(t.design){case i.Y.LiveBlog:case i.Y.DeadBlog:return(0,r.css)(O(),s.Dp.leftCol);default:return(0,r.css)($(),s.Dp.leftCol,s.Dp.wide)}},tt=(0,r.css)(F()),nt=(0,r.css)(z(),l.n$[0],l.A5[400],l.n$[7],l.n$[100]),et=t=>(0,r.css)(A(),0!==t?l.n$[0]:l.n$[60],0!==t?"pointer":"default",0!==t?l.A5[400]:l.n$[60],l.n$[100]),ot=(t,n)=>(0,r.css)(H(),V(t,n)?l.n$[60]:l.n$[0],V(t,n)?"default":"pointer",V(t,n)?l.n$[60]:l.A5[400],l.n$[100]),rt=(0,r.css)(R(),s.Dp.tablet,s.Dp.tablet),it=(0,r.css)(B(),a.Se.xsmall({fontWeight:"bold"}),d.fL.primary,a.Se.xsmall({fontWeight:"bold"}),c.D[2],c.D[1]),st=(t,n)=>(0,r.css)(Y(),n?t.text.carouselTitle:d.fL.primary),ct=t=>{let{title:n,palette:e,isCuratedContent:r}=t;return(0,o.jsxs)("h2",{css:it,children:[r?"More from ":"",(0,o.jsx)("span",{css:st(e,r),children:n})]})},lt=t=>{let{format:n,linkTo:e,imageUrl:r,headlineText:s,webPublicationDate:c,kickerText:l,isFirst:a,dataLinkName:d,discussionId:u,branding:f}=t;return(0,o.jsx)(v.LI,{percentage:"25%",showDivider:!a,padSides:!0,padSidesOnMobile:!0,snapAlignStart:!0,children:(0,o.jsx)(b.Z,{linkTo:e,format:n,headlineText:s,webPublicationDate:c,kickerText:l,imageUrl:r,imageSize:r?"carousel":void 0,showClock:!0,showAge:!0,imagePositionOnMobile:"top",minWidthInPixels:220,showQuotedHeadline:n.design===i.Y.Comment,dataLinkName:d,discussionId:u,branding:f,isExternalLink:!1})})},at=t=>{let{heading:n,trails:e,palette:r,index:i,isCuratedContent:s,goToIndex:c}=t;return(0,o.jsxs)("div",{children:[(0,o.jsx)(ct,{title:n,palette:r,isCuratedContent:s}),(0,o.jsx)("div",{css:Z,children:e.map(((t,n)=>(0,o.jsx)("span",{onClick:()=>c(n),"aria-hidden":"true",css:[q,n===i&&K(r),G(n,e.length)],"data-link-name":"carousel-small-nav-dot-".concat(n)},"dot-".concat(n))))})]})},dt=t=>{let{heading:n,trails:e,onwardsSource:c,format:l}=t;const a=(0,h.b)(l),d=(0,p.useRef)(null),[u,m]=(0,p.useState)(0),[b,v]=(0,p.useState)(0),y="carousel-small-arrow",D="curated-content"===c,L=t=>"presentation"!==t.getAttribute("role"),T=()=>{const{current:t}=d;return null===t?[]:Array.from(t.children)},S=()=>{m((()=>{const{current:t}=d,n=T().filter(L).map((t=>t.offsetLeft)),[e]=n;if(null===t||void 0===e)return 0;const o=t.scrollLeft+e,r=n.findIndex((t=>t>=o));return Math.max(0,r)})())},I=t=>{const{current:n}=d;if(null===n)return;const e=T().filter(L).map((t=>t.offsetLeft));n.scrollTo({left:e[t]}),S()},M=()=>{const{current:t}=d,n=T().filter(L).map((t=>{let{offsetLeft:n}=t;return n})),[e]=n;if(null===t||void 0===e)return;const o=t.scrollLeft+e,r=n.reverse().find((t=>t<o));void 0!==r&&0!==r?t.scrollTo({left:r}):t.scrollTo({left:0}),S()},P=()=>{const{current:t}=d,n=T().filter(L).map((t=>{let{offsetLeft:n}=t;return n})),[e]=n;if(null===t||void 0===e)return;const o=t.scrollLeft+e,r=n.find((t=>t>o));void 0!==r&&0!==r&&t.scrollTo({left:r}),S()};return(0,p.useEffect)((()=>{const t=d.current;if(t)return t.addEventListener("scroll",f()(S,100)),t.removeEventListener("scroll",f()(S,100))})),(0,p.useEffect)((()=>v((t=>Math.max(u,t)))),[u]),(0,o.jsxs)("div",{css:(E=e.length,(0,r.css)(C(),E>1&&"justify-content: space-between",s.Dp.desktop)),"data-link-name":x(n),children:[(0,o.jsx)(w.FetchCommentCounts,{}),(0,o.jsx)(j.E,{borderType:"partial",size:l.design===i.Y.LiveBlog||l.design===i.Y.DeadBlog?"wide":"compact",children:(0,o.jsx)(at,{heading:n,trails:e,palette:a,index:u,isCuratedContent:D,goToIndex:I})}),(0,o.jsx)("div",{css:[J,Q(l)],children:(0,o.jsx)("button",{type:"button",onClick:M,"aria-label":"Move carousel backwards",css:[nt,et(u)],"data-link-name":"".concat(y,"-prev"),children:(0,o.jsx)(_,{})})}),(0,o.jsx)("div",{css:[J,tt],children:(0,o.jsx)("button",{type:"button",onClick:P,"aria-label":"Move carousel forwards",css:[nt,ot(u,e.length)],"data-link-name":"".concat(y,"-next"),children:(0,o.jsx)(N,{})})}),(0,o.jsxs)("div",{css:[W,U],"data-component":c,"data-link":x(n),children:[(0,o.jsx)(k.c,{when:"above",breakpoint:"leftCol",children:(0,o.jsxs)("div",{css:rt,children:[(0,o.jsx)(at,{heading:n,trails:e,palette:a,index:u,isCuratedContent:D,goToIndex:I}),(0,o.jsxs)(k.c,{when:"below",breakpoint:"desktop",children:[(0,o.jsx)("button",{type:"button",onClick:M,"aria-label":"Move carousel backwards",css:[nt,et(u)],"data-link-name":"".concat(y,"-prev"),children:(0,o.jsx)(_,{})}),(0,o.jsx)("button",{type:"button",onClick:P,"aria-label":"Move carousel forwards",css:[nt,ot(u,e.length)],"data-link-name":"".concat(y,"-next"),children:(0,o.jsx)(N,{})})]})]})}),(0,o.jsx)("ul",{css:X,ref:d,"data-component":"carousel-small | maxIndex-".concat(b),children:e.map(((t,n)=>{const{url:e,headline:r,webPublicationDate:i,format:s,image:c,kickerText:l,branding:a,discussion:d}=t;if(!i)return null;const u=c&&(0,g.Y)(c);return(0,o.jsx)(lt,{isFirst:0===n,format:s,linkTo:e,headlineText:r,webPublicationDate:i,imageUrl:u,kickerText:l,dataLinkName:"carousel-small-card-position-".concat(n),discussionId:(null==d?void 0:d.isCommentable)?d.discussionId:void 0,branding:a},"".concat(t.url).concat(n))}))})]})]});var E}},2082:(t,n,e)=>{"use strict";e.r(n),e.d(n,{FetchCommentCounts:()=>S});var o=e(7800),r=e(2631),i=e(3904),s=e(5761),c=e(6328),l=e(4643),a=e(4466),d=e(43),u=e(3196),f=e(1810),p=e(1374),h=e.n(p),x=e(4180);function g(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function m(){const t=g(["\n\tdisplay: flex;\n\tflex-direction: row;\n\t",";\n\tmargin-top: -4px;\n\tpadding-left: 5px;\n\tpadding-right: 5px;\n\tcolor: ",";\n"]);return m=function(){return t},t}function b(){const t=g(["\n\tsvg {\n\t\tmargin-bottom: -5px;\n\t\theight: 14px;\n\t\twidth: 14px;\n\t\tmargin-right: 2px;\n\t\tfill: ",";\n\t}\n"]);return b=function(){return t},t}function v(){const t=g(["\n\tdisplay: block;\n\n\t"," {\n\t\tdisplay: none;\n\t}\n"]);return v=function(){return t},t}function w(){const t=g(["\n\tdisplay: none;\n\n\t"," {\n\t\tdisplay: block;\n\t}\n"]);return w=function(){return t},t}const k=(t,n)=>(0,d.css)(m(),u.OS.xxsmall({lineHeight:"tight"}),n?t.text.dynamoHeadline:t.text.cardFooter),j=(t,n)=>(0,d.css)(b(),n?t.text.dynamoHeadline:t.text.cardFooter),y=(0,d.css)(v(),f.vX.leftCol.and.wide),C=(0,d.css)(w(),f.vX.leftCol.and.wide),D=t=>{let{containerPalette:n,format:e,short:r,long:i,isDynamo:s}=t;const c=(0,x.b)(e,n);return(0,o.jsxs)("div",{css:k(c,s),children:[(0,o.jsx)("div",{css:j(c,s),children:(0,o.jsx)(h(),{})}),(0,o.jsx)("div",{css:y,"aria-hidden":"true",children:i}),(0,o.jsx)("div",{css:C,"aria-hidden":"true",children:r})]})};function L(){const t=[];return document.querySelectorAll("[data-discussion-id]").forEach((n=>{if(n instanceof HTMLElement)try{const{discussionId:e,format:o,isDynamo:r,containerPalette:i}=n.dataset;e&&o&&t.push({discussionId:e,format:JSON.parse(o),isDynamo:!!r||void 0,containerPalette:i})}catch(t){}})),t}function T(t){const n=t.flatMap((t=>t.discussionId));return"https://api.nextgen.guardianapps.co.uk/discussion/comment-counts.json?shortUrls=".concat(n.join(","))}const S=t=>{let{repeat:n}=t;const[e,d]=(0,i.useState)();return(0,i.useEffect)((()=>{const t=L();d(T(t))}),[]),(0,a.h)(e,{refreshInterval:n?15e3:0,refreshWhenHidden:!1,onSuccess:t=>{const n=L();if(null==t?void 0:t.counts)try{e=function(t,n){return t.map((t=>{let{count:e,id:o}=t;const{long:r,short:i}=(0,l.C)(e),s=n.find((t=>t.discussionId===o)),c=null==s?void 0:s.format,a=null==s?void 0:s.isDynamo,d=null==s?void 0:s.containerPalette;return{id:o,long:r,short:i,format:c,isDynamo:a,containerPalette:d}}))}(t.counts,n),e.forEach((t=>{const n=document.querySelector('[data-discussion-id="'.concat(t.id,'"]'));n&&((0,s.so)(n).render((0,o.jsx)(r.C,{value:(0,c.E)(),children:(0,o.jsx)(D,{format:t.format,short:t.short,long:t.long,isDynamo:t.isDynamo,containerPalette:t.containerPalette})})),n.setAttribute("aria-label","".concat(t.short," Comments")))}))}catch(t){}var e;d(T(n))}}),null}},7295:(t,n,e)=>{"use strict";e.d(n,{E:()=>v});var o=e(7800),r=e(43),i=e(1810),s=e(683),c=e(4436);function l(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function a(){const t=l(["\n\t\t\t\tpadding-right: 10px;\n\t\t\t\t"," {\n\t\t\t\t\t/* below 1140 */\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t"," {\n\t\t\t\t\t/* above 1140 */\n\t\t\t\t\tflex-basis: 230px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\t\t\t"]);return a=function(){return t},t}function d(){const t=l(["\n\t\t\t\tpadding-right: 10px;\n\t\t\t\t"," {\n\t\t\t\t\t/* below 1140 */\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t"," {\n\t\t\t\t\t/* above 1140, below 1300 */\n\t\t\t\t\tflex-basis: 151px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\n\t\t\t\t"," {\n\t\t\t\t\t/* above 1300 */\n\t\t\t\t\tflex-basis: 230px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\t\t\t"]);return d=function(){return t},t}function u(){const t=l(["\n\tposition: relative;\n"]);return u=function(){return t},t}function f(){const t=l(["\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\theight: 30px;\n\t\twidth: 1px;\n\t\tbackground: ",";\n\t}\n"]);return f=function(){return t},t}function p(){const t=l(["\n\tborder-right: 1px solid ",";\n"]);return p=function(){return t},t}function h(){const t=l(["\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tKeep spacing at the bottom of the container consistent at 36px, regardless of\n\t\t\t\t\t\t\tbreakpoint, based on chat with Harry Fisher\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tpadding-bottom: ","px;\n\t\t\t\t\t"]);return h=function(){return t},t}function x(){const t=l(["\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t"]);return x=function(){return t},t}const g=t=>"wide"===t?(0,r.css)(a(),i.C4.leftCol,i.Dp.leftCol):(0,r.css)(d(),i.C4.leftCol,i.vX.leftCol.and.wide,i.Dp.wide),m=(0,r.css)(u()),b=t=>(0,r.css)(f(),t),v=t=>{let{children:n,borderType:e,borderColour:i=s.Cg.secondary,size:l="compact",verticalMargins:a=!0}=t;return(0,o.jsx)("section",{css:[m,g(l),"full"===e&&(d=i,(0,r.css)(p(),d)),a&&(0,r.css)(h(),c.D[9])],children:(0,o.jsx)("div",{css:["partial"===e&&b(i),(0,r.css)(x())],children:n})});var d}},4643:(t,n,e)=>{"use strict";e.d(n,{C:()=>o});const o=t=>{if(void 0===t)return{short:"…",long:"…"};if(0===t)return{short:"0",long:"0"};const n=parseInt(t.toFixed(0),10),e=(t=>{const n=t.toFixed(0).split(""),e=n.length;for(let t=n.length-1;t>=1;t-=1)(e-t)%3==0&&n.splice(t,0,",");return n.join("")})(n);return{short:n>1e4?"".concat(Math.round(n/1e3),"k"):n.toString(),long:e}}}}]);
//# sourceMappingURL=Carousel-importable.modern.9c912d7cc739432b469e.js.map