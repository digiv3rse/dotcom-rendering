{"version":3,"file":"FetchOnwardsData-importable.legacy.8d5c4a6f0393a4f959bb.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/components/FetchOnwardsData.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/Placeholder.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/decideDesign.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideDisplay.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideTheme.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideFormat.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideTrail.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getDataLinkName.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/revealStyles.ts"],"sourcesContent":["import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { useEffect } from 'react';\nimport { decideTrail } from '../lib/decideTrail';\nimport { revealStyles } from '../lib/revealStyles';\nimport { useApi } from '../lib/useApi';\nimport { Carousel } from './Carousel.importable';\nimport { Placeholder } from './Placeholder';\nconst minHeight = css `\n\tmin-height: 300px;\n`;\nexport const FetchOnwardsData = ({ url, limit, onwardsSource, format, }) => {\n    const { data, loading, error } = useApi(url);\n    const buildTrails = (trails, trailLimit) => {\n        return trails.slice(0, trailLimit).map(decideTrail);\n    };\n    useEffect(() => {\n        if (data) {\n            const pendingElements = document.querySelectorAll('.onwards > .pending');\n            pendingElements.forEach((element) => {\n                element.classList.add('reveal');\n                element.classList.remove('pending');\n            });\n        }\n    });\n    if (error) {\n        // Send the error to Sentry and then prevent the element from rendering\n        window.guardian.modules.sentry.reportError(error, 'onwards-lower');\n        return null;\n    }\n    if (loading) {\n        return (_jsx(Placeholder\n        // 300 is a best guess\n        , { \n            // 300 is a best guess\n            height: 300, shouldShimmer: false, backgroundColor: \"white\" }));\n    }\n    if (data?.trails) {\n        return (_jsx(\"div\", { css: [minHeight, revealStyles], className: \"onwards\", children: _jsx(\"div\", { className: \"pending\", children: _jsx(Carousel, { heading: data.heading || data.displayname, trails: buildTrails(data.trails, limit), description: data.description, onwardsSource: onwardsSource, format: format }) }) }));\n    }\n    return null;\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css, keyframes } from '@emotion/react';\nimport { neutral, space } from '@guardian/source-foundations';\nconst BACKGROUND_COLOUR = neutral[93];\nconst shimmer = keyframes `\n  0% {\n    background-position: -1500px 0;\n  }\n  100% {\n    background-position: 1500px 0;\n  }\n`;\nconst shimmerStyles = (backgroundColor) => css `\n\tanimation: ${shimmer} 2s infinite linear;\n\tbackground: linear-gradient(\n\t\tto right,\n\t\t${backgroundColor} 4%,\n\t\twhite 25%,\n\t\t${backgroundColor} 36%\n\t);\n\tbackground-size: 1500px 100%;\n`;\nexport const Placeholder = ({ height, rootId, width, spaceBelow, spaceLeft, shouldShimmer = true, backgroundColor = BACKGROUND_COLOUR, }) => (_jsx(\"div\", { id: rootId, css: css `\n\t\t\tflex-grow: 1;\n\t\t`, \"data-name\": \"placeholder\", children: _jsx(\"div\", { css: css `\n\t\t\t\theight: ${height}px;\n\t\t\t\twidth: ${width !== undefined ? `${width}px` : '100%'};\n\t\t\t\tmargin-bottom: ${spaceBelow && space[spaceBelow]}px;\n\t\t\t\tmargin-left: ${spaceLeft && space[spaceLeft]}px;\n\t\t\t\tbackground-color: ${backgroundColor};\n\n\t\t\t\t${shouldShimmer && shimmerStyles(backgroundColor)}\n\t\t\t` }) }));\n","import { ArticleDesign } from '@guardian/libs';\n/**\n * NOTE: Immersive Opinion pieces are not supported,\n * i.e. when `CommentDesign` and `ImmersiveDisplay` are used jointly.\n */\nexport const decideDesign = ({ design, display, }) => {\n    switch (design) {\n        case 'ArticleDesign':\n            return ArticleDesign.Standard;\n        case 'GalleryDesign':\n            return ArticleDesign.Gallery;\n        case 'AudioDesign':\n            return ArticleDesign.Audio;\n        case 'VideoDesign':\n            return ArticleDesign.Video;\n        case 'ReviewDesign':\n            return ArticleDesign.Review;\n        case 'AnalysisDesign':\n            return ArticleDesign.Analysis;\n        case 'CommentDesign':\n            // Temporary hack until we can handle Immersive Opinion pieces\n            return display === 'ImmersiveDisplay'\n                ? ArticleDesign.Standard\n                : ArticleDesign.Comment;\n        case 'LetterDesign':\n            return ArticleDesign.Letter;\n        case 'FeatureDesign':\n            return ArticleDesign.Feature;\n        case 'LiveBlogDesign':\n            return ArticleDesign.LiveBlog;\n        case 'DeadBlogDesign':\n            return ArticleDesign.DeadBlog;\n        case 'RecipeDesign':\n            return ArticleDesign.Recipe;\n        case 'MatchReportDesign':\n            return ArticleDesign.MatchReport;\n        case 'InterviewDesign':\n            return ArticleDesign.Interview;\n        case 'EditorialDesign':\n            return ArticleDesign.Editorial;\n        case 'QuizDesign':\n            return ArticleDesign.Quiz;\n        case 'InteractiveDesign':\n            return ArticleDesign.Interactive;\n        case 'PhotoEssayDesign':\n            return ArticleDesign.PhotoEssay;\n        case 'PrintShopDesign':\n            return ArticleDesign.PrintShop;\n        case 'ObituaryDesign':\n            return ArticleDesign.Obituary;\n        case 'FullPageInteractiveDesign':\n            return ArticleDesign.FullPageInteractive;\n        case 'NewsletterSignupDesign':\n            return ArticleDesign.NewsletterSignup;\n        case 'ExplainerDesign':\n            return ArticleDesign.Explainer;\n        case 'TimelineDesign':\n            return ArticleDesign.Timeline;\n        case 'ProfileDesign':\n            return ArticleDesign.Profile;\n        default:\n            return ArticleDesign.Standard;\n    }\n};\n","import { ArticleDisplay } from '@guardian/libs';\nexport const decideDisplay = ({ display, }) => {\n    switch (display) {\n        case 'StandardDisplay':\n            return ArticleDisplay.Standard;\n        case 'ImmersiveDisplay':\n            return ArticleDisplay.Immersive;\n        case 'ShowcaseDisplay':\n            return ArticleDisplay.Showcase;\n        case 'NumberedListDisplay':\n            return ArticleDisplay.NumberedList;\n        default:\n            return ArticleDisplay.Standard;\n    }\n};\n","import { ArticlePillar, ArticleSpecial } from '@guardian/libs';\nexport const decideTheme = ({ theme }) => {\n    switch (theme) {\n        case 'NewsPillar':\n            return ArticlePillar.News;\n        case 'OpinionPillar':\n            return ArticlePillar.Opinion;\n        case 'SportPillar':\n            return ArticlePillar.Sport;\n        case 'CulturePillar':\n            return ArticlePillar.Culture;\n        case 'LifestylePillar':\n            return ArticlePillar.Lifestyle;\n        case 'SpecialReportTheme':\n            return ArticleSpecial.SpecialReport;\n        case 'SpecialReportAltTheme':\n            return ArticleSpecial.SpecialReportAlt;\n        case 'Labs':\n            return ArticleSpecial.Labs;\n        default:\n            return ArticlePillar.News;\n    }\n};\n","import { decideDesign } from './decideDesign';\nimport { decideDisplay } from './decideDisplay';\nimport { decideTheme } from './decideTheme';\nexport const decideFormat = (format) => ({\n    display: decideDisplay(format),\n    theme: decideTheme(format),\n    design: decideDesign(format),\n});\n","import { decideFormat } from './decideFormat';\nimport { getDataLinkNameCard } from './getDataLinkName';\nexport const decideTrail = (trail, index = 0) => {\n    const format = decideFormat(trail.format);\n    return {\n        ...trail,\n        format,\n        dataLinkName: getDataLinkNameCard(format, '0', index + 1),\n    };\n};\n","import { ArticleDesign, ArticleSpecial } from '@guardian/libs';\n/**\n * TODO: missing \"podcast\" and \"external\"\n */\nconst getLinkType = ({ theme, design }) => {\n    switch (theme) {\n        case ArticleSpecial.SpecialReport:\n            return 'special-report';\n        default:\n            switch (design) {\n                case ArticleDesign.Analysis:\n                    return 'analysis';\n                case ArticleDesign.LiveBlog:\n                    return 'live';\n                case ArticleDesign.DeadBlog:\n                    return 'dead';\n                case ArticleDesign.Feature:\n                    return 'feature';\n                case ArticleDesign.Editorial:\n                    return 'editorial';\n                case ArticleDesign.Comment:\n                    return 'comment';\n                case ArticleDesign.Gallery:\n                case ArticleDesign.Audio:\n                case ArticleDesign.Video:\n                    return 'media';\n                case ArticleDesign.Review:\n                    return 'review';\n                case ArticleDesign.Letter:\n                    return 'letters';\n                default:\n                    return 'news';\n            }\n    }\n};\n/**\n * Get the `data-link-name` attribute for a card.\n * Used by Ophan for understanding reader journeys. E.g:\n * - `feature | card-2+ | card-@1`\n * - `news | group-0 | card-@5`\n *\n * @see {JSX.IntrinsicAttributes}\n */\nexport const getDataLinkNameCard = (format, group, index) => [getLinkType(format), `group-${group}`, `card-@${index}`].join(' | ');\n","import { css, keyframes } from '@emotion/react';\n/**\n * Sometimes we want to animate in new content using plain\n * javascript. We use these classes to do that.\n */\nexport const revealStyles = css `\n\t/* We're using classnames here because we add and remove these classes\n\t   using plain javascript */\n\t.reveal {\n\t\tanimation: ${keyframes `\n\t\t\t0% { opacity: 0; }\n\t\t\t100% { opacity: 1; }\n\t\t`} 1s ease-out;\n\t}\n\t.reveal-slowly {\n\t\tanimation: ${keyframes `\n\t\t\t0% { opacity: 0; }\n\t\t\t100% { opacity: 1; }\n\t\t`} 4s ease-out;\n\t}\n\t.pending {\n\t\tdisplay: none;\n\t}\n`;\n"],"names":["minHeight","FetchOnwardsData","trails","trailLimit","url","limit","onwardsSource","format","useApi","data","loading","error","useEffect","document","querySelectorAll","forEach","element","classList","add","remove","window","guardian","modules","sentry","reportError","_jsx","Placeholder","height","shouldShimmer","backgroundColor","css","revealStyles","className","children","Carousel","heading","displayname","slice","map","decideTrail","description","BACKGROUND_COLOUR","neutral","shimmer","keyframes","shimmerStyles","rootId","width","spaceBelow","spaceLeft","id","undefined","space","decideDesign","design","display","ArticleDesign","decideDisplay","ArticleDisplay","decideTheme","theme","ArticlePillar","ArticleSpecial","decideFormat","trail","index","dataLinkName","getDataLinkNameCard","getLinkType","group","join"],"sourceRoot":""}