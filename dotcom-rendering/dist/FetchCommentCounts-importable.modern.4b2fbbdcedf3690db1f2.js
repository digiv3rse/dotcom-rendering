(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[9206],{5036:e=>{e.exports=function(e,t,n){n=n||{};var o=t.content,i=t.attributes;return function(t){return e("svg",Object.assign({dangerouslySetInnerHTML:{__html:o}},i,t),t&&t.children)}}},5951:(e,t,n)=>{var o=n(5036),i=n(3904);e.exports=o.bind(null,i.createElement.bind(i))},1374:(e,t,n)=>{e.exports={attributes:{width:"16",height:"16",viewBox:"0 0 16 16"},content:'<path d="M13 0l1 1v7l-1 1H7l-2 3H4V9H2L1 8V1l1-1h11z"></path>'};var o=n(5951);e.exports=o(e.exports)},2082:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FetchCommentCounts:()=>P});var o=n(7800),i=n(2631),a=n(3904),l=n(5761),r=n(6328),s=n(4643),d=n(4466),c=n(43),u=n(3196),p=n(1810),m=n(1374),b=n.n(m),A=n(4180);function h(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function f(){const e=h(["\n\tdisplay: flex;\n\tflex-direction: row;\n\t",";\n\tmargin-top: -4px;\n\tpadding-left: 5px;\n\tpadding-right: 5px;\n\tcolor: ",";\n"]);return f=function(){return e},e}function v(){const e=h(["\n\tsvg {\n\t\tmargin-bottom: -5px;\n\t\theight: 14px;\n\t\twidth: 14px;\n\t\tmargin-right: 2px;\n\t\tfill: ",";\n\t}\n"]);return v=function(){return e},e}function w(){const e=h(["\n\tdisplay: block;\n\n\t"," {\n\t\tdisplay: none;\n\t}\n"]);return w=function(){return e},e}function g(){const e=h(["\n\tdisplay: none;\n\n\t"," {\n\t\tdisplay: block;\n\t}\n"]);return g=function(){return e},e}const x=(e,t)=>(0,c.css)(f(),u.OS.xxsmall({lineHeight:"tight"}),t?e.text.dynamoHeadline:e.text.cardFooter),C=(e,t)=>(0,c.css)(v(),t?e.text.dynamoHeadline:e.text.cardFooter),y=(0,c.css)(w(),p.vX.leftCol.and.wide),L=(0,c.css)(g(),p.vX.leftCol.and.wide),k=e=>{let{containerPalette:t,format:n,short:i,long:a,isDynamo:l}=e;const r=(0,A.b)(n,t);return(0,o.jsxs)("div",{css:x(r,l),children:[(0,o.jsx)("div",{css:C(r,l),children:(0,o.jsx)(b(),{})}),(0,o.jsx)("div",{css:y,"aria-hidden":"true",children:a}),(0,o.jsx)("div",{css:L,"aria-hidden":"true",children:i})]})};function S(){const e=[];return document.querySelectorAll("[data-discussion-id]").forEach((t=>{if(t instanceof HTMLElement)try{const{discussionId:n,format:o,isDynamo:i,containerPalette:a}=t.dataset;n&&o&&e.push({discussionId:n,format:JSON.parse(o),isDynamo:!!i||void 0,containerPalette:a})}catch(e){}})),e}function M(e){const t=e.flatMap((e=>e.discussionId));return"https://api.nextgen.guardianapps.co.uk/discussion/comment-counts.json?shortUrls=".concat(t.join(","))}const P=e=>{let{repeat:t}=e;const[n,c]=(0,a.useState)();return(0,a.useEffect)((()=>{const e=S();c(M(e))}),[]),(0,d.h)(n,{refreshInterval:t?15e3:0,refreshWhenHidden:!1,onSuccess:e=>{const t=S();if(null==e?void 0:e.counts)try{n=function(e,t){return e.map((e=>{let{count:n,id:o}=e;const{long:i,short:a}=(0,s.C)(n),l=t.find((e=>e.discussionId===o)),r=null==l?void 0:l.format,d=null==l?void 0:l.isDynamo,c=null==l?void 0:l.containerPalette;return{id:o,long:i,short:a,format:r,isDynamo:d,containerPalette:c}}))}(e.counts,t),n.forEach((e=>{const t=document.querySelector('[data-discussion-id="'.concat(e.id,'"]'));t&&((0,l.so)(t).render((0,o.jsx)(i.C,{value:(0,r.E)(),children:(0,o.jsx)(k,{format:e.format,short:e.short,long:e.long,isDynamo:e.isDynamo,containerPalette:e.containerPalette})})),t.setAttribute("aria-label","".concat(e.short," Comments")))}))}catch(e){}var n;c(M(t))}}),null}},4643:(e,t,n)=>{"use strict";n.d(t,{C:()=>o});const o=e=>{if(void 0===e)return{short:"…",long:"…"};if(0===e)return{short:"0",long:"0"};const t=parseInt(e.toFixed(0),10),n=(e=>{const t=e.toFixed(0).split(""),n=t.length;for(let e=t.length-1;e>=1;e-=1)(n-e)%3==0&&t.splice(e,0,",");return t.join("")})(t);return{short:t>1e4?"".concat(Math.round(t/1e3),"k"):t.toString(),long:n}}},4466:(e,t,n)=>{"use strict";n.d(t,{h:()=>a});var o=n(6131);function i(e){if(!e.ok)throw Error(e.statusText||"useApi | An api call returned HTTP status ".concat(e.status));return e}const a=(e,t,n)=>{const{data:a,error:l}=(0,o.ZP)(e,(e=>t=>fetch(t,e).then(i).then((e=>e.json())))(n),t);return{data:a,error:l,loading:!!e&&!l&&!a}}},1919:(e,t,n)=>{"use strict";var o;n.d(t,{Y:()=>o}),function(e){e[e.Standard=0]="Standard",e[e.Gallery=1]="Gallery",e[e.Audio=2]="Audio",e[e.Video=3]="Video",e[e.Review=4]="Review",e[e.Analysis=5]="Analysis",e[e.Explainer=6]="Explainer",e[e.Comment=7]="Comment",e[e.Letter=8]="Letter",e[e.Feature=9]="Feature",e[e.LiveBlog=10]="LiveBlog",e[e.DeadBlog=11]="DeadBlog",e[e.Recipe=12]="Recipe",e[e.MatchReport=13]="MatchReport",e[e.Interview=14]="Interview",e[e.Editorial=15]="Editorial",e[e.Quiz=16]="Quiz",e[e.Interactive=17]="Interactive",e[e.PhotoEssay=18]="PhotoEssay",e[e.PrintShop=19]="PrintShop",e[e.Obituary=20]="Obituary",e[e.Correction=21]="Correction",e[e.FullPageInteractive=22]="FullPageInteractive",e[e.NewsletterSignup=23]="NewsletterSignup",e[e.Timeline=24]="Timeline",e[e.Profile=25]="Profile"}(o||(o={}))},4516:(e,t,n)=>{"use strict";var o;n.d(t,{D:()=>o}),function(e){e[e.Standard=0]="Standard",e[e.Immersive=1]="Immersive",e[e.Showcase=2]="Showcase",e[e.NumberedList=3]="NumberedList"}(o||(o={}))},5575:(e,t,n)=>{"use strict";var o;n.d(t,{D:()=>o}),function(e){e[e.News=0]="News",e[e.Opinion=1]="Opinion",e[e.Sport=2]="Sport",e[e.Culture=3]="Culture",e[e.Lifestyle=4]="Lifestyle"}(o||(o={}))},5364:(e,t,n)=>{"use strict";var o;n.d(t,{v:()=>o}),function(e){e[e.SpecialReport=5]="SpecialReport",e[e.Labs=6]="Labs",e[e.SpecialReportAlt=7]="SpecialReportAlt"}(o||(o={}))},863:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});const o={mobile:320,mobileMedium:375,mobileLandscape:480,phablet:660,tablet:740,desktop:980,leftCol:1140,wide:1300}},7357:(e,t,n)=>{"use strict";n.d(t,{A5:()=>a,Fp:()=>u,H5:()=>m,TG:()=>p,UQ:()=>i,VK:()=>c,Vp:()=>s,lh:()=>b,n$:()=>l,qD:()=>A,r:()=>d,vU:()=>r});var o=n(683);const{brand:i,brandAlt:a,neutral:l,error:r,success:s,news:d,opinion:c,sport:u,culture:p,lifestyle:m,labs:b,specialReport:A,focus:h}=o.DG},1810:(e,t,n)=>{"use strict";n.d(t,{C4:()=>s,Dp:()=>r,vX:()=>d});var o=n(863);const i=e=>"@media (min-width: ".concat("".concat(e,"px"),")"),a=e=>"@media (max-width: ".concat("".concat(e-1,"px"),")"),l=(e,t)=>"@media (min-width: ".concat("".concat(e,"px"),") and (max-width: ").concat("".concat(t-1,"px"),")"),r={mobile:i(o.A.mobile),mobileMedium:i(o.A.mobileMedium),mobileLandscape:i(o.A.mobileLandscape),phablet:i(o.A.phablet),tablet:i(o.A.tablet),desktop:i(o.A.desktop),leftCol:i(o.A.leftCol),wide:i(o.A.wide)},s={mobile:a(o.A.mobile),mobileMedium:a(o.A.mobileMedium),mobileLandscape:a(o.A.mobileLandscape),phablet:a(o.A.phablet),tablet:a(o.A.tablet),desktop:a(o.A.desktop),leftCol:a(o.A.leftCol),wide:a(o.A.wide)},d={mobile:{and:{mobileMedium:l(o.A.mobile,o.A.mobileMedium),mobileLandscape:l(o.A.mobile,o.A.mobileLandscape),phablet:l(o.A.mobile,o.A.phablet),tablet:l(o.A.mobile,o.A.tablet),desktop:l(o.A.mobile,o.A.desktop),leftCol:l(o.A.mobile,o.A.leftCol),wide:l(o.A.mobileMedium,o.A.wide)}},mobileMedium:{and:{mobileLandscape:l(o.A.mobileMedium,o.A.mobileLandscape),phablet:l(o.A.mobileMedium,o.A.phablet),tablet:l(o.A.mobileMedium,o.A.tablet),desktop:l(o.A.mobileMedium,o.A.desktop),leftCol:l(o.A.mobileMedium,o.A.leftCol),wide:l(o.A.mobileMedium,o.A.wide)}},mobileLandscape:{and:{phablet:l(o.A.mobileLandscape,o.A.phablet),tablet:l(o.A.mobileLandscape,o.A.tablet),desktop:l(o.A.mobileLandscape,o.A.desktop),leftCol:l(o.A.mobileLandscape,o.A.leftCol),wide:l(o.A.mobileLandscape,o.A.wide)}},phablet:{and:{tablet:l(o.A.phablet,o.A.tablet),desktop:l(o.A.phablet,o.A.desktop),leftCol:l(o.A.phablet,o.A.leftCol),wide:l(o.A.phablet,o.A.wide)}},tablet:{and:{desktop:l(o.A.tablet,o.A.desktop),leftCol:l(o.A.tablet,o.A.leftCol),wide:l(o.A.tablet,o.A.wide)}},desktop:{and:{leftCol:l(o.A.desktop,o.A.leftCol),wide:l(o.A.desktop,o.A.wide)}},leftCol:{and:{wide:l(o.A.leftCol,o.A.wide)}}}}}]);
//# sourceMappingURL=FetchCommentCounts-importable.modern.4b2fbbdcedf3690db1f2.js.map