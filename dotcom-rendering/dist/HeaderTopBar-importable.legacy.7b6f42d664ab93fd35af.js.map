{"version":3,"file":"HeaderTopBar-importable.legacy.7b6f42d664ab93fd35af.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/lib/identity-component-event.ts","webpack://@guardian/dotcom-rendering/./src/lib/querystring.ts","webpack://@guardian/dotcom-rendering/./src/web/components/Dropdown.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/linkNotificationCount.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/notification.ts","webpack://@guardian/dotcom-rendering/./src/web/components/HeaderTopBarMyAccount.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/HeaderTopBarEditionDropdown.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/HeaderTopBarPrintSubscriptions.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/HeaderTopBarSearch.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/HeaderTopBarSearchCapi.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/HeaderTopBarSearchJobs.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/HeaderTopBar.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/Hide.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/acquisitions.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/center.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getIdapiUserData.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getZIndex.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/useApi.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/hasCurrentBrazeUser.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getBrazeUuid.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/braze/checkBrazeDependencies.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/braze/initialiseAppboy.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/braze/hasRequiredConsents.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/braze/buildBrazeMessaging.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useBraze.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useIsInView.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useOnce.ts","webpack://@guardian/dotcom-rendering/./src/static/icons/arrow-right.svg","webpack://@guardian/dotcom-rendering/./src/static/icons/newspaper.svg","webpack://@guardian/dotcom-rendering/./src/static/icons/profile.svg","webpack://@guardian/dotcom-rendering/./src/static/icons/search.svg","webpack://@guardian/dotcom-rendering/./src/static/icons/x.svg"],"sourcesContent":["import { constructQuery } from './querystring';\nexport const createAuthenticationEventParams = (componentId, pageViewId) => {\n    const params = {\n        componentType: 'identityauthentication',\n        componentId,\n    };\n    if (pageViewId) {\n        params.viewId = pageViewId;\n    }\n    return `componentEventParams=${encodeURIComponent(constructQuery(params))}`;\n};\n","const constructQuery = (query) => Object.keys(query)\n    .map((param) => {\n    const value = query[param];\n    const queryValue = Array.isArray(value)\n        ? value.map((v) => encodeURIComponent(v)).join(',')\n        : encodeURIComponent(value);\n    return `${param}=${queryValue}`;\n})\n    .join('&');\nexport { constructQuery };\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { border, brandAlt, brandText, from, neutral, news, palette, text, textSans, until, visuallyHidden, } from '@guardian/source-foundations';\nimport { useEffect, useMemo, useState } from 'react';\nimport { submitComponentEvent } from '../browser/ophan/ophan';\nimport { getZIndex } from '../lib/getZIndex';\nimport { linkNotificationCount } from '../lib/linkNotificationCount';\nimport { useIsInView } from '../lib/useIsInView';\nimport { useOnce } from '../lib/useOnce';\nconst NOTIFICATION_COMPONENT_TYPE = 'RETENTION_HEADER';\nconst ulStyles = css `\n\t${getZIndex('dropdown')}\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tbackground-color: white;\n\tpadding: 6px 0;\n\tbox-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n\n\t${until.tablet} {\n\t\tposition: fixed;\n\t\tborder-radius: 0;\n\t\ttop: 32px;\n\t\tleft: 0;\n\t\tright: 0;\n\t\twidth: auto;\n\t\tmax-height: calc(100% - 50px);\n\t\toverflow: auto;\n\t}\n\n\t${from.tablet} {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\twidth: 200px;\n\t\tborder-radius: 3px;\n\t}\n`;\nconst liStyles = css `\n\tposition: relative;\n\tdisplay: flex;\n`;\nconst displayBlock = css `\n\tdisplay: block;\n`;\nconst displayNone = css `\n\tdisplay: none;\n`;\nconst linkStyles = css `\n\t${textSans.small()};\n\tcolor: ${text.anchorSecondary};\n\tposition: relative;\n\ttransition: color 80ms ease-out;\n\tmargin: -1px 0 0 0;\n\ttext-decoration: none;\n\tdisplay: block;\n\tpadding: 10px 18px 15px 30px;\n\n\t:hover {\n\t\tbackground-color: ${neutral[93]};\n\t\ttext-decoration: none;\n\t}\n\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\t:before {\n\t\tcontent: '';\n\t\tborder-top: 1px solid ${border.secondary};\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0px;\n\t\tleft: 30px;\n\t\tright: 0px;\n\t}\n`;\nconst linkActive = css `\n\tfont-weight: bold;\n\n\t:after {\n\t\tcontent: '';\n\t\tborder: 2px solid ${news[400]};\n\t\tborder-top: 0px;\n\t\tborder-right: 0px;\n\t\tposition: absolute;\n\t\ttop: 19px;\n\t\tleft: 12px;\n\t\twidth: 10px;\n\t\theight: 4px;\n\t\ttransform: rotate(-45deg);\n\t}\n`;\nconst linkFirst = css `\n\t:before {\n\t\tcontent: none;\n\t}\n`;\nconst buttonStyles = css `\n\t${textSans.medium()};\n\tdisplay: block;\n\tcursor: pointer;\n\tbackground: none;\n\tborder: none;\n\t/* Design System: The buttons should be components that handle their own layout using primitives  */\n\tline-height: 1.2;\n\tcolor: ${brandText.primary};\n\ttransition: color 80ms ease-out;\n\tpadding: 0px 10px 6px 5px;\n\tmargin: 1px 0 0;\n\ttext-decoration: none;\n\tposition: relative;\n\n\t:hover {\n\t\tcolor: ${brandAlt[400]};\n\n\t\t:after {\n\t\t\ttransform: translateY(0) rotate(45deg);\n\t\t}\n\t}\n\n\t:after {\n\t\tcontent: '';\n\t\tdisplay: inline-block;\n\t\twidth: 5px;\n\t\theight: 5px;\n\t\ttransform: translateY(-2px) rotate(45deg);\n\t\tborder: 1px solid currentColor;\n\t\tborder-left: transparent;\n\t\tborder-top: transparent;\n\t\tmargin-left: 5px;\n\t\tvertical-align: middle;\n\t\ttransition: transform 250ms ease-out;\n\t}\n`;\nconst buttonExpanded = css `\n\t:hover:after {\n\t\ttransform: translateY(-1px) rotate(-135deg);\n\t}\n\t:after {\n\t\ttransform: translateY(1px) rotate(-135deg);\n\t}\n`;\nconst notificationColor = palette.error[400];\nconst notificationBadgeStyles = (diameter) => css `\n\tbackground-color: ${notificationColor};\n\tcolor: ${palette.neutral[100]};\n\ttext-align: center;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\t${textSans.xsmall()};\n\tline-height: 1;\n\n\twidth: ${diameter}px;\n\theight: ${diameter}px;\n\tborder-radius: ${diameter}px;\n`;\nconst dropdownButtonNotificationBadgeStyles = css `\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tmargin-left: -10px;\n\tmargin-top: -3px;\n`;\nconst notificationTextStyles = css `\n\t${textSans.xxsmall()};\n`;\nconst buildOphanComponentWithNotifications = (link) => {\n    // Only track if it has notifications\n    if (link.notifications && link.notifications.length > 0) {\n        return {\n            componentType: NOTIFICATION_COMPONENT_TYPE,\n            id: link.id,\n            labels: link.notifications.map((notification) => notification.ophanLabel),\n        };\n    }\n    return undefined;\n};\nconst addTrackingToUrl = (url, ophanComponent) => {\n    // Use the acquisitionData query param to send tracking to the destination\n    const acquisitionData = encodeURIComponent(JSON.stringify({\n        source: 'GUARDIAN_WEB',\n        componentId: ophanComponent.id,\n        componentType: ophanComponent.componentType,\n        campaignCode: ophanComponent.id,\n        referrerPageviewId: window.guardian.config.ophan.pageViewId,\n        referrerUrl: window.location.origin + window.location.pathname,\n        labels: ophanComponent.labels,\n    }));\n    const prefix = url.includes('?') ? '&' : '?';\n    return `${url}${prefix}acquisitionData=${acquisitionData}`;\n};\nconst NotificationBadge = ({ diameter }) => {\n    return (_jsx(\"div\", { css: notificationBadgeStyles(diameter), children: _jsx(\"span\", { children: \"!\" }) }));\n};\nconst NotificationMessage = ({ notification }) => {\n    const { message } = notification;\n    return _jsx(\"div\", { css: notificationTextStyles, children: message });\n};\nconst DropdownLink = ({ link, index }) => {\n    const ophanComponent = useMemo(() => buildOphanComponentWithNotifications(link), [link]);\n    const [hasBeenSeen, setNode] = useIsInView({\n        debounce: true,\n    });\n    const [hasSentViewEvent, setHasSentViewEvent] = useState(false);\n    // The following hooks, which send INSERT and VIEW events to Ophan,\n    // intentionally only run when the link has notifications (which is why\n    // link.notifications is part of the dependency array for both). In future\n    // if we ever have notifications arriving from different sources at\n    // different times, we'll need to revisit this logic (currently they only\n    // come from Braze).\n    useEffect(() => {\n        if (hasBeenSeen &&\n            ophanComponent &&\n            link.notifications &&\n            link.notifications.length > 0 &&\n            !hasSentViewEvent) {\n            setHasSentViewEvent(true);\n            // For each notification for this link, log the impression back to\n            // Braze separately\n            link.notifications.forEach((notification) => {\n                notification.logImpression?.();\n            });\n            submitComponentEvent({\n                component: ophanComponent,\n                action: 'VIEW',\n            });\n        }\n    }, [\n        hasBeenSeen,\n        ophanComponent,\n        link.notifications,\n        hasSentViewEvent,\n        link.id,\n    ]);\n    useOnce(() => {\n        if (ophanComponent) {\n            submitComponentEvent({\n                component: ophanComponent,\n                action: 'INSERT',\n            });\n        }\n    }, [ophanComponent]);\n    const url = ophanComponent\n        ? addTrackingToUrl(link.url, ophanComponent)\n        : link.url;\n    const hasNotifications = link.notifications !== undefined && link.notifications.length > 0;\n    return (_jsxs(\"li\", { css: liStyles, ref: setNode, children: [_jsxs(\"a\", { href: url, css: [\n                    linkStyles,\n                    !!link.isActive && linkActive,\n                    index === 0 && linkFirst,\n                ], \"data-link-name\": link.dataLinkName, onClick: () => {\n                    if (ophanComponent) {\n                        submitComponentEvent({\n                            component: ophanComponent,\n                            action: 'CLICK',\n                        });\n                    }\n                }, children: [link.title, link.notifications?.map((notification) => (_jsx(NotificationMessage, { notification: notification }, notification.id)))] }), hasNotifications && (_jsx(\"div\", { css: css `\n\t\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t\t\tmargin-right: 8px;\n\t\t\t\t\t`, children: _jsx(NotificationBadge, { diameter: 22 }) }))] }, link.title));\n};\nexport const Dropdown = ({ id, label, links, dataLinkName, cssOverrides, children, }) => {\n    const [isExpanded, setIsExpanded] = useState(false);\n    const [noJS, setNoJS] = useState(true);\n    useEffect(() => {\n        // If hook runs we know client-side JS is enabled\n        setNoJS(false);\n    }, []);\n    useEffect(() => {\n        const dismissOnEsc = (event) => {\n            if (isExpanded && event.code === 'Escape') {\n                setIsExpanded(false);\n            }\n        };\n        document.addEventListener('keydown', dismissOnEsc, false);\n        // Remove listener on unmount\n        return () => document.removeEventListener('keydown', dismissOnEsc);\n    }, [isExpanded]);\n    useEffect(() => {\n        const dismissOnClick = (event) => {\n            if (isExpanded) {\n                event.stopPropagation();\n                setIsExpanded(false);\n            }\n        };\n        document.addEventListener('click', dismissOnClick, false);\n        // Remove listener on unmount\n        return () => document.removeEventListener('click', dismissOnClick);\n    }, [isExpanded]);\n    const handleToggle = () => setIsExpanded(!isExpanded);\n    // needs to be unique to allow multiple dropdowns on same page\n    const dropdownID = `dropbox-id-${id}`;\n    const checkboxID = `checkbox-id-${id}`;\n    const notificationCount = linkNotificationCount(links);\n    return (_jsx(_Fragment, { children: noJS ? (_jsxs(\"div\", { css: css `\n\t\t\t\t\t\t${`#${checkboxID}`} {\n\t\t\t\t\t\t\t/* Never show the input */\n\t\t\t\t\t\t\t${visuallyHidden}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t${`#${dropdownID}`} {\n\t\t\t\t\t\t\t/* Hide caption by default */\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* stylelint-disable-next-line selector-type-no-unknown */\n\t\t\t\t\t\t${`#${checkboxID}`}:checked + ${`#${dropdownID}`} {\n\t\t\t\t\t\t\t/* Show the caption if the input is checked */\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t`, children: [_jsx(\"label\", { htmlFor: checkboxID, css: [buttonStyles, cssOverrides], children: label }), _jsx(\"input\", { type: \"checkbox\", id: checkboxID, \"aria-checked\": \"false\", tabIndex: -1 }), _jsx(\"ul\", { id: dropdownID, css: [ulStyles, cssOverrides], children: links.map((l, index) => (_jsx(\"li\", { children: _jsx(\"a\", { href: l.url, css: [\n                                linkStyles,\n                                !!l.isActive && linkActive,\n                                index === 0 && linkFirst,\n                            ], \"data-link-name\": l.dataLinkName, children: l.title }) }, l.title))) })] })) : (_jsxs(_Fragment, { children: [_jsxs(\"button\", { onClick: handleToggle, css: [\n                        buttonStyles,\n                        cssOverrides,\n                        isExpanded && buttonExpanded,\n                    ], \"aria-expanded\": isExpanded ? 'true' : 'false', \"data-link-name\": dataLinkName, \"data-cy\": \"dropdown-button\", type: \"button\", children: [label, notificationCount > 0 && (_jsx(\"div\", { css: dropdownButtonNotificationBadgeStyles, children: _jsx(NotificationBadge, { diameter: 18 }) }))] }), _jsx(\"div\", { css: isExpanded ? displayBlock : displayNone, children: children ? (_jsx(_Fragment, { children: children })) : (_jsx(\"ul\", { css: [ulStyles, cssOverrides], \"data-cy\": \"dropdown-options\", children: links.map((link, index) => (_jsx(DropdownLink, { link: link, index: index }, link.id))) })) })] })) }));\n};\n","export const linkNotificationCount = (links) => {\n    return links.reduce((runningCount, link) => {\n        const thisLinkNotificationCount = link.notifications?.length ?? 0;\n        return runningCount + thisLinkNotificationCount;\n    }, 0);\n};\n","const hasTargetAndMessage = (card) => Boolean(card.extras.message) &&\n    Boolean(card.extras.target) &&\n    Boolean(card.extras.ophanLabel);\nexport const mapBrazeCardsToNotifications = (cards) => {\n    return cards.filter(hasTargetAndMessage).map((card) => {\n        return {\n            id: card.id,\n            target: card.extras.target,\n            message: card.extras.message,\n            ophanLabel: card.extras.ophanLabel,\n            logImpression: () => {\n                card.logImpression();\n            },\n        };\n    });\n};\nconst groupNotificationsByTarget = (notifications) => {\n    return notifications.reduce((groupings, notification) => {\n        groupings[notification.target] = (groupings[notification.target] ?? []).concat(notification);\n        return groupings;\n    }, {});\n};\nexport const addNotificationsToDropdownLinks = (links, notifications) => {\n    const notificationsByTarget = groupNotificationsByTarget(notifications);\n    const linksWithNotifications = links.map((link) => {\n        const newNotifications = (link.notifications ?? []).concat(notificationsByTarget[link.id] ?? []);\n        if (newNotifications.length === 0) {\n            return link;\n        }\n        return {\n            ...link,\n            notifications: newNotifications,\n        };\n    });\n    return linksWithNotifications;\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { joinUrl } from '@guardian/libs';\nimport { brand, from, neutral, textSans } from '@guardian/source-foundations';\nimport { useEffect, useState } from 'react';\nimport { createAuthenticationEventParams } from '../../lib/identity-component-event';\nimport ProfileIcon from '../../static/icons/profile.svg';\nimport { getZIndex } from '../lib/getZIndex';\nimport { addNotificationsToDropdownLinks, mapBrazeCardsToNotifications, } from '../lib/notification';\nimport { useApi } from '../lib/useApi';\nimport { useBraze } from '../lib/useBraze';\nimport { Dropdown } from './Dropdown';\nconst myAccountStyles = css `\n\tdisplay: flex;\n\talign-items: center;\n\t${from.tablet} {\n\t\talign-items: stretch;\n\t}\n\t${from.desktop} {\n\t\t:before {\n\t\t\tcontent: '';\n\t\t\tborder-left: 1px solid ${brand[600]};\n\t\t\theight: 24px;\n\t\t}\n\t}\n`;\nconst myAccountLinkStyles = css `\n\tdisplay: flex;\n\talign-items: center;\n\theight: fit-content;\n\tposition: relative;\n\t${textSans.medium()};\n\tfont-size: 1rem;\n\tline-height: 1;\n\tcolor: ${neutral[100]};\n\ttransition: color 80ms ease-out;\n\ttext-decoration: none;\n\tpadding: 0;\n\n\t${from.tablet} {\n\t\tpadding: 7px 10px 7px 6px;\n\t}\n\n\t${from.desktop} {\n\t\tfont-weight: bold;\n\t}\n\n\t:hover,\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tfloat: left;\n\t\theight: 18px;\n\t\twidth: 18px;\n\t\tmargin: 0 4px 0 0;\n\t}\n\t${getZIndex('myAccountDropdown')}\n`;\nexport const buildIdentityLinks = (mmaUrl, idUrl, userId) => {\n    /**\n     * Note: the IDs in here are used by Braze to target notifications so should\n     * be unique. Please check with Marketing Tools/TX before changing!\n     */\n    const links = [\n        {\n            id: 'account_overview',\n            url: `${mmaUrl}/`,\n            title: 'Account overview',\n            dataLinkName: 'nav3 : topbar : account overview',\n        },\n        {\n            id: 'edit_profile',\n            url: `${mmaUrl}/public-settings`,\n            title: 'Profile',\n            dataLinkName: 'nav3 : topbar : edit profile',\n        },\n        {\n            id: 'email_prefs',\n            url: `${mmaUrl}/email-prefs`,\n            title: 'Emails & marketing',\n            dataLinkName: 'nav3 : topbar : email prefs',\n        },\n        {\n            id: 'settings',\n            url: `${mmaUrl}/account-settings`,\n            title: 'Settings',\n            dataLinkName: 'nav3 : topbar : settings',\n        },\n        {\n            id: 'help',\n            url: `${mmaUrl}/help`,\n            title: 'Help',\n            dataLinkName: 'nav3 : topbar : help',\n        },\n        {\n            id: 'comment_activity',\n            url: `${idUrl}/user/id/${userId}`,\n            title: 'Comments & replies',\n            dataLinkName: 'nav3 : topbar : comment activity',\n        },\n        {\n            id: 'sign_out',\n            url: `${idUrl}/signout`,\n            title: 'Sign out',\n            dataLinkName: 'nav3 : topbar : sign out',\n        },\n    ];\n    return links;\n};\nconst SignIn = ({ idUrl }) => (_jsxs(\"a\", { css: myAccountLinkStyles, href: `${idUrl}/signin?INTCMP=DOTCOM_NEWHEADER_SIGNIN&ABCMP=ab-sign-in&${createAuthenticationEventParams('guardian_signin_header')}`, \"data-link-name\": \"nav3 : topbar : signin\", children: [_jsx(ProfileIcon, {}), \" Sign in\"] }));\nexport const dropDownOverrides = css `\n\tcolor: ${neutral[100]};\n\tpadding-right: 0;\n\tpadding-bottom: 0;\n\tmargin-top: 0;\n\n\tfont-size: 1rem;\n\n\t&:not(ul):hover {\n\t\tcolor: ${neutral[100]};\n\t\ttext-decoration: underline;\n\t}\n\n\t${from.tablet} {\n\t\tright: 0;\n\t}\n\n\t${from.desktop} {\n\t\tfont-weight: bold;\n\t}\n`;\nconst SignedInWithNotifications = ({ mmaUrl, idUrl, discussionApiUrl, notifications, }) => {\n    const { data, error } = useApi(joinUrl(discussionApiUrl, 'profile/me?strict_sanctions_check=false'), {}, {\n        credentials: 'include',\n    });\n    // If we encounter an error or don't have user data display sign in to the user.\n    // SWR will retry in the background if the request failed\n    if (error || !data?.userProfile.userId)\n        return _jsx(SignIn, { idUrl: idUrl });\n    const identityLinks = buildIdentityLinks(mmaUrl, idUrl, data.userProfile.userId);\n    const identityLinksWithNotifications = addNotificationsToDropdownLinks(identityLinks, notifications);\n    return (_jsxs(\"div\", { css: myAccountLinkStyles, children: [_jsx(ProfileIcon, {}), _jsx(Dropdown, { label: \"My account\", links: identityLinksWithNotifications, id: \"my-account\", dataLinkName: \"nav3 : topbar: my account\", cssOverrides: dropDownOverrides })] }));\n};\nconst SignedIn = ({ idApiUrl, ...props }) => {\n    const { brazeCards } = useBraze(idApiUrl);\n    const [brazeNotifications, setBrazeNotifications] = useState([]);\n    useEffect(() => {\n        if (brazeCards) {\n            const cards = brazeCards.getCardsForProfileBadge();\n            const cardsToNotifications = mapBrazeCardsToNotifications(cards);\n            if (cardsToNotifications.length) {\n                setBrazeNotifications(cardsToNotifications);\n            }\n        }\n    }, [brazeCards]);\n    return (_jsx(SignedInWithNotifications, { ...props, notifications: brazeNotifications }));\n};\nexport const MyAccount = ({ mmaUrl, idUrl, discussionApiUrl, idApiUrl, isSignedIn, }) => (_jsx(\"div\", { css: myAccountStyles, children: isSignedIn ? (_jsx(SignedIn, { mmaUrl: mmaUrl, idUrl: idUrl, discussionApiUrl: discussionApiUrl, idApiUrl: idApiUrl })) : (_jsx(SignIn, { idUrl: idUrl })) }));\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { brand } from '@guardian/source-foundations';\nimport { getZIndex } from '../lib/getZIndex';\nimport { Dropdown } from './Dropdown';\nimport { dropDownOverrides } from './HeaderTopBarMyAccount';\nconst editionDropdownStyles = css `\n\t${getZIndex('editionDropdown')};\n\tdisplay: flex;\n\tposition: relative;\n\t:before {\n\t\tcontent: '';\n\t\tborder-left: 1px solid ${brand[600]};\n\t\theight: 24px;\n\t}\n`;\nexport const HeaderTopBarEditionDropdown = ({ editionId, dataLinkName, isInEuropeTest, }) => {\n    const ukEdition = {\n        id: 'uk',\n        url: '/preference/edition/uk',\n        title: 'UK edition',\n        dataLinkName: 'nav3 : topbar : edition-picker: UK',\n    };\n    const links = [\n        ukEdition,\n        {\n            id: 'us',\n            url: '/preference/edition/us',\n            title: 'US edition',\n            dataLinkName: 'nav3 : topbar : edition-picker: US',\n        },\n        {\n            id: 'au',\n            url: '/preference/edition/au',\n            title: 'Australia edition',\n            dataLinkName: 'nav3 : topbar : edition-picker: AU',\n        },\n        {\n            id: 'int',\n            url: '/preference/edition/int',\n            title: 'International edition',\n            dataLinkName: 'nav3 : topbar : edition-picker: INT',\n        },\n        ...(isInEuropeTest\n            ? [\n                {\n                    id: 'eur',\n                    url: '/preference/edition/eur',\n                    title: 'Europe edition',\n                    dataLinkName: 'nav3 : topbar : edition-picker: EUR',\n                },\n            ]\n            : []),\n    ].map((link) => link.id.toUpperCase() === editionId\n        ? { ...link, isActive: true }\n        : link);\n    // Find active link, default to UK\n    const activeLink = links.find(({ isActive }) => isActive) ?? {\n        ...ukEdition,\n        isActive: true,\n    };\n    // Remove the active link and add it back to the top of the list\n    const linksToDisplay = [\n        activeLink,\n        ...links.filter(({ isActive }) => !isActive),\n    ];\n    return (_jsx(\"div\", { css: editionDropdownStyles, children: _jsx(Dropdown, { label: activeLink.title, links: linksToDisplay, id: \"edition\", dataLinkName: dataLinkName, cssOverrides: css `\n\t\t\t\t\t${dropDownOverrides};\n\t\t\t\t\tpadding-top: 6px;\n\t\t\t\t` }) }));\n};\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { brandAlt, from, textSans } from '@guardian/source-foundations';\nimport { useEffect, useState } from 'react';\nimport NewspaperIcon from '../../static/icons/newspaper.svg';\nimport { addTrackingCodesToUrl } from '../lib/acquisitions';\nconst printSubscriptionStyles = css `\n\tdisplay: none;\n\n\t${from.desktop} {\n\t\tdisplay: flex;\n\t}\n`;\nconst linkStyles = css `\n\tdisplay: flex;\n\talign-items: center;\n\t${textSans.medium({ fontWeight: 'bold' })};\n\tfont-size: 1rem;\n\theight: fit-content;\n\tline-height: 1;\n\tcolor: ${brandAlt[400]};\n\ttransition: color 80ms ease-out;\n\ttext-decoration: none;\n\tpadding: 7px 0;\n\n\t${from.tablet} {\n\t\tpadding: 7px 10px 7px 6px;\n\t}\n\n\t:hover,\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tfloat: left;\n\t\theight: 18px;\n\t\twidth: 18px;\n\t\tmargin: 0 4px 0 0;\n\t}\n`;\nexport const HeaderTopBarPrintSubscriptions = ({ editionId, }) => {\n    const [pageViewId, setPageViewId] = useState('');\n    const [referrerUrl, setReferrerUrl] = useState('');\n    useEffect(() => {\n        setPageViewId(window.guardian.config.ophan.pageViewId);\n        setReferrerUrl(window.location.origin + window.location.pathname);\n    }, []);\n    const href = addTrackingCodesToUrl({\n        base: `https://support.theguardian.com/subscribe${editionId === 'UK' ? '' : '/weekly'}`,\n        componentType: 'ACQUISITIONS_HEADER',\n        componentId: 'PrintSubscriptionsHeaderLink',\n        pageViewId,\n        referrerUrl,\n    });\n    return (_jsx(\"div\", { css: printSubscriptionStyles, children: _jsxs(\"a\", { href: href, css: linkStyles, \"data-link-name\": \"nav3 : topbar : printsubs\", children: [_jsx(NewspaperIcon, {}), _jsx(_Fragment, { children: \"Print subscriptions\" })] }) }));\n};\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { brand, from, neutral, textSans } from '@guardian/source-foundations';\nimport SearchIcon from '../../static/icons/search.svg';\nimport { getZIndex } from '../lib/getZIndex';\nconst searchLinkStyles = css `\n\tdisplay: flex;\n\talign-items: center;\n\t${textSans.medium({ fontWeight: 'bold' })};\n\tline-height: 1;\n\tfont-size: 1rem;\n\theight: fit-content;\n\tcolor: ${neutral[100]};\n\ttransition: color 80ms ease-out;\n\ttext-decoration: none;\n\tpadding: 7px 0;\n\n\t${from.tablet} {\n\t\tpadding: 7px 10px 7px 6px;\n\t}\n\n\t:hover,\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tfloat: left;\n\t\theight: 18px;\n\t\twidth: 18px;\n\t\tmargin: 0 4px 0 0;\n\t}\n\t${getZIndex('searchHeaderLink')}\n`;\nconst linkTablet = css `\n\tdisplay: none;\n\n\t:before {\n\t\tcontent: '';\n\t\tborder-left: 1px solid ${brand[600]};\n\t\theight: 24px;\n\t}\n\n\t${from.desktop} {\n\t\tdisplay: flex;\n\t}\n`;\nexport const Search = ({ href, dataLinkName }) => {\n    return (_jsx(\"div\", { css: linkTablet, children: _jsxs(\"a\", { href: href, css: searchLinkStyles, \"data-link-name\": dataLinkName, children: [_jsx(SearchIcon, {}), _jsx(_Fragment, { children: \"Search\" })] }) }));\n};\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { brand, brandAlt, from, headline, neutral, textSans, } from '@guardian/source-foundations';\nimport { useEffect, useRef, useState } from 'react';\nimport ArrowRightIcon from '../../static/icons/arrow-right.svg';\nimport SearchIcon from '../../static/icons/search.svg';\nimport XIcon from '../../static/icons/x.svg';\nimport { getZIndex } from '../lib/getZIndex';\nimport { useApi } from '../lib/useApi';\nconst searchLinkStyles = css `\n\tdisplay: flex;\n\talign-items: center;\n\t${textSans.medium({ fontWeight: 'bold' })};\n\tline-height: 1;\n\tfont-size: 1rem;\n\theight: fit-content;\n\tcolor: ${neutral[100]};\n\ttransition: color 80ms ease-out;\n\ttext-decoration: none;\n\tpadding: 7px 0;\n\n\t${from.tablet} {\n\t\tpadding: 7px 10px 7px 6px;\n\t}\n\n\t:hover,\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tfloat: left;\n\t\theight: 18px;\n\t\twidth: 18px;\n\t\tmargin: 0 4px 0 0;\n\t}\n\t${getZIndex('searchHeaderLink')}\n`;\nconst linkTablet = css `\n\tdisplay: none;\n\tposition: relative;\n\n\t:before {\n\t\tcontent: '';\n\t\tborder-left: 1px solid ${brand[600]};\n\t\theight: 24px;\n\t}\n\n\t${from.desktop} {\n\t\tdisplay: flex;\n\t}\n`;\nexport const HeaderTopBarSearchCapi = () => {\n    const [isSearchVisible, setIsSearchVisible] = useState(false);\n    const [q, setQ] = useState();\n    const qRef = useRef(null);\n    const { data } = useApi(q\n        ? `https://content.guardianapis.com/search?api-key=d1280925-708c-4940-9162-0952ac6e728f&q=${q}`\n        : undefined);\n    const formRef = useRef(null);\n    const searchContainerRef = useRef(null);\n    // Hide search if you click anywhere outside of search when it's shown\n    useEffect(() => {\n        function handleClickOutside(event) {\n            if (!searchContainerRef.current?.contains(event.target) &&\n                !formRef.current?.contains(event.target) &&\n                isSearchVisible) {\n                setQ(undefined);\n                setIsSearchVisible(false);\n            }\n        }\n        document.addEventListener('mousedown', handleClickOutside);\n        return () => {\n            document.removeEventListener('mousedown', handleClickOutside);\n        };\n    }, [formRef, isSearchVisible]);\n    // Hide search if you press escape and it's show\n    useEffect(() => {\n        const hideSearch = (event) => {\n            if (event.key === 'Escape') {\n                setQ(undefined);\n                setIsSearchVisible(false);\n            }\n        };\n        document.addEventListener('keydown', hideSearch, false);\n        return () => {\n            document.removeEventListener('keydown', hideSearch, false);\n        };\n    }, []);\n    // Focus the input element when we show search\n    useEffect(() => {\n        if (isSearchVisible) {\n            qRef.current?.focus();\n        }\n    }, [isSearchVisible]);\n    return (_jsxs(_Fragment, { children: [_jsx(\"div\", { css: linkTablet, ref: searchContainerRef, children: _jsxs(\"a\", { href: \"https://www.google.co.uk/advanced_search?q=site:www.theguardian.com\", type: \"button\", css: searchLinkStyles, \"data-link-name\": \"nav3 : search\", onClick: (event) => {\n                        event.preventDefault();\n                        // toggle search\n                        if (isSearchVisible) {\n                            setQ(undefined);\n                            setIsSearchVisible(false);\n                        }\n                        else {\n                            setIsSearchVisible(true);\n                        }\n                        return false;\n                    }, children: [!isSearchVisible ? _jsx(SearchIcon, {}) : _jsx(XIcon, {}), _jsx(_Fragment, { children: \"Search\" })] }) }), isSearchVisible && (_jsxs(\"form\", { css: css `\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tbackground: ${brand[400]};\n\t\t\t\t\t\tz-index: 1000;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\twidth: 50%;\n\t\t\t\t\t\ttop: 35px;\n\t\t\t\t\t`, onSubmit: (event) => {\n                    event.preventDefault();\n                    setQ(qRef.current?.value);\n                }, ref: formRef, children: [_jsxs(\"div\", { css: css `\n\t\t\t\t\t\t\tbackground: ${neutral[100]};\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t\t`, children: [_jsx(\"input\", { name: \"q\", type: \"text\", css: css `\n\t\t\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\t\t\t${textSans.small()}\n\t\t\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\t\t\tpadding: 0px 8px 0px 20px;\n\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\theight: 44px;\n\t\t\t\t\t\t\t`, ref: qRef, autoComplete: \"off\" }), _jsx(\"button\", { css: css `\n\t\t\t\t\t\t\t\tbackground: none;\n\t\t\t\t\t\t\t\tborder: 0;\n\n\t\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\t\ttransform: scale(1.2);\n\t\t\t\t\t\t\t\t\ttransition: all 0.3s ease;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t`, type: \"submit\", children: _jsx(ArrowRightIcon, {}) })] }), data && data.response.results.length == 0 && (_jsx(\"p\", { css: css `\n\t\t\t\t\t\t\t\t${textSans.medium()};\n\t\t\t\t\t\t\t\tpadding: 1rem 25px;\n\t\t\t\t\t\t\t\tcolor: ${neutral[100]};\n\n\t\t\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\t\t\tcolor: ${brandAlt[400]};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t`, children: \"There are no results\" })), data && data.response.results.length > 0 && (_jsx(\"ul\", { css: css `\n\t\t\t\t\t\t\t\tborder: 1px solid ${neutral[46]};\n\t\t\t\t\t\t\t\tborder-top: none;\n\t\t\t\t\t\t\t\tpadding-top: 8px;\n\t\t\t\t\t\t\t`, children: data.response.results.map((result) => {\n                            return (_jsx(\"li\", { children: _jsx(\"a\", { href: result.webUrl, css: css `\n\t\t\t\t\t\t\t\t\t\t\t\t${headline.xxxsmall()};\n\t\t\t\t\t\t\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${neutral[100]};\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t\tpadding-left: 20px;\n\n\t\t\t\t\t\t\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${brandAlt[400]};\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t`, children: _jsx(\"div\", { css: css `\n\t\t\t\t\t\t\t\t\t\t\t\t\tborder-top: 1px solid\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${neutral[46]};\n\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: 4px 50px 16px 0;\n\t\t\t\t\t\t\t\t\t\t\t\t`, children: result.webTitle }) }) }, result.webUrl));\n                        }) }))] }))] }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { brand, from, neutral, textSans } from '@guardian/source-foundations';\nconst searchLinkStyles = css `\n\t${textSans.medium({ fontWeight: 'bold' })};\n\tfont-size: 1rem;\n\tline-height: 1;\n\tcolor: ${neutral[100]};\n\ttransition: color 80ms ease-out;\n\ttext-decoration: none;\n\tpadding: 7px 0;\n\n\t${from.tablet} {\n\t\tpadding: 8px 10px 7px 6px;\n\t}\n\n\t:hover,\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n`;\nconst linkTablet = css `\n\tdisplay: none;\n\n\t:before {\n\t\tcontent: '';\n\t\tborder-left: 1px solid ${brand[600]};\n\t\theight: 24px;\n\t}\n\n\t${from.desktop} {\n\t\tdisplay: flex;\n\t}\n`;\nexport const SearchJobs = () => {\n    return (_jsx(\"div\", { css: linkTablet, children: _jsx(\"a\", { href: \"https://jobs.theguardian.com\", css: searchLinkStyles, \"data-link-name\": \"nav3 : job-cta\", children: \"Search jobs\" }) }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { getCookie } from '@guardian/libs';\nimport { brand, from, space } from '@guardian/source-foundations';\nimport { center } from '../lib/center';\nimport { HeaderTopBarEditionDropdown } from './HeaderTopBarEditionDropdown';\nimport { MyAccount } from './HeaderTopBarMyAccount';\nimport { HeaderTopBarPrintSubscriptions } from './HeaderTopBarPrintSubscriptions';\nimport { Search } from './HeaderTopBarSearch';\nimport { HeaderTopBarSearchCapi } from './HeaderTopBarSearchCapi';\nimport { SearchJobs } from './HeaderTopBarSearchJobs';\nimport { Hide } from './Hide';\nconst topBarStyles = css `\n\tdisplay: flex;\n\theight: 30px;\n\tbackground-color: ${brand[300]};\n\tbox-sizing: border-box;\n\tpadding-left: 10px;\n\t${from.mobileLandscape} {\n\t\tpadding-left: ${space[5]}px;\n\t}\n\t${from.tablet} {\n\t\tpadding-left: 15px;\n\t}\n\t${from.desktop} {\n\t\theight: 35px;\n\t\tjustify-content: flex-end;\n\t\tpadding-right: ${space[5]}px;\n\t}\n\t${from.wide} {\n\t\tpadding-right: 96px;\n\t}\n`;\n/**\n * # Header Top Bar\n *\n * The slim dark blue top bar at the very top of Guardian pages\n *\n * ## Why does this need to be an Island?\n *\n * - We need to check if a user is signed in to show them the right header.\n * - We track clicks on print subscription with a page view ID\n * - We (sometimes) have a dynamic search\n *\n * ---\n *\n * [`HeaderTopBar` on Chromatic](https://www.chromatic.com/component?appId=63e251470cfbe61776b0ef19&csfId=components-headertopbar)\n */\nexport const HeaderTopBar = ({ editionId, dataLinkName, idUrl, mmaUrl, discussionApiUrl, idApiUrl, headerTopBarSearchCapiSwitch, isInEuropeTest, }) => {\n    const isServer = typeof window === 'undefined';\n    const isSignedIn = !isServer && !!getCookie({ name: 'GU_U', shouldMemoize: true });\n    return (_jsx(\"div\", { css: css `\n\t\t\t\tbackground-color: ${brand[300]};\n\t\t\t`, children: _jsxs(\"div\", { css: [topBarStyles, center], children: [_jsx(HeaderTopBarPrintSubscriptions, { editionId: editionId }), _jsx(MyAccount, { mmaUrl: mmaUrl ?? 'https://manage.theguardian.com', idUrl: idUrl ?? 'https://profile.theguardian.com', discussionApiUrl: discussionApiUrl, idApiUrl: idApiUrl, isSignedIn: isSignedIn }), _jsx(SearchJobs, {}), !headerTopBarSearchCapiSwitch && (_jsx(Search, { href: \"https://www.google.co.uk/advanced_search?q=site:www.theguardian.com\", dataLinkName: \"nav3 : search\" })), headerTopBarSearchCapiSwitch && _jsx(HeaderTopBarSearchCapi, {}), _jsx(Hide, { when: \"below\", breakpoint: \"desktop\", children: _jsx(HeaderTopBarEditionDropdown, { editionId: editionId, dataLinkName: dataLinkName, isInEuropeTest: isInEuropeTest }) })] }) }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { from, until } from '@guardian/source-foundations';\nexport const Hide = ({ children, when, breakpoint, el, }) => {\n    let whenToHide;\n    if (when === 'below') {\n        whenToHide = css `\n\t\t\t${until[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n    }\n    else {\n        whenToHide = css `\n\t\t\t${from[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n    }\n    return el === 'li' ? (_jsx(\"li\", { css: whenToHide, children: children })) : (_jsx(\"span\", { css: whenToHide, children: children }));\n};\n","import { constructQuery } from '../../lib/querystring';\n// Adds acquisition tracking codes if it is a support url\nexport const addTrackingCodesToUrl = ({ base, componentType, componentId, campaignCode, abTest, pageViewId, referrerUrl, }) => {\n    const isSupportUrl = base.search(/(support.theguardian.com)(\\/[a-z]*)?\\/(contribute|subscribe)/) >= 0;\n    if (isSupportUrl) {\n        const acquisitionData = {\n            source: 'GUARDIAN_WEB',\n            componentId,\n            componentType,\n            campaignCode,\n            abTest,\n            referrerPageviewId: pageViewId,\n            referrerUrl,\n        };\n        const params = {\n            REFPVID: pageViewId,\n            INTCMP: campaignCode,\n            acquisitionData: JSON.stringify(acquisitionData),\n        };\n        return `${base}${base.includes('?') ? '&' : '?'}${constructQuery(params)}`;\n    }\n    return base;\n};\n","import { css } from '@emotion/react';\nimport { from } from '@guardian/source-foundations';\nexport const center = css `\n\tposition: relative;\n\tmargin: auto;\n\n\t${from.tablet} {\n\t\tmax-width: 740px;\n\t}\n\n\t${from.desktop} {\n\t\tmax-width: 980px;\n\t}\n\n\t${from.leftCol} {\n\t\tmax-width: 1140px;\n\t}\n\n\t${from.wide} {\n\t\tmax-width: 1300px;\n\t}\n`;\n","import { joinUrl } from '@guardian/libs';\nfunction checkForErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText ||\n            `getIdApiUserData | An api call returned HTTP status ${response.status}`);\n    }\n    return response;\n}\nconst callApi = (url) => {\n    return fetch(url, {\n        credentials: 'include',\n    })\n        .then(checkForErrors)\n        .then((response) => response.json());\n};\nconst cache = {};\nexport const getIdApiUserData = (ajaxUrl) => {\n    if (!cache.idapiUserMeResponse) {\n        const url = joinUrl(ajaxUrl, 'user/me');\n        cache.idapiUserMeResponse = callApi(url);\n    }\n    return cache.idapiUserMeResponse;\n};\nexport const getIdapiUserIdentifiers = (ajaxUrl) => {\n    if (!cache.idapiUserIdentifiersResponse) {\n        const url = joinUrl(ajaxUrl, 'user/me/identifiers');\n        cache.idapiUserIdentifiersResponse = callApi(url);\n    }\n    return cache.idapiUserIdentifiersResponse;\n};\n","/**\n * How do I get a z-index for my new item?\n *\n * Decide a meaningful name for your item and then insert it\n * in the indices array below. The higher up your item visually,\n * then the higher it will be in the z-index stack,\n * 'higher' means _earlier_ in the array.\n *\n * Eg. stickyAdWrapper will be given a higher z-index than bodyArea\n *\n * Once inserted in the array, use getZIndex() to return the css\n *\n * Eg.\n *\n * import { getZIndex } from './getZIndex';\n *\n * const myCss = css`\n *    color: blue;\n *    ${getZIndex('TheGuardian')}\n * `;\n *\n * As new items are added, all z-indexes are adjusted\n */\nconst indices = [\n    // Modals will go here at the top\n    // Sticky video and button need to be above everything\n    'sticky-video-button',\n    'sticky-video',\n    'banner',\n    'dropdown',\n    'burger',\n    'expanded-veggie-menu-wrapper',\n    'expanded-veggie-menu',\n    // Mobile sticky appears below banners\n    'mobileSticky',\n    // Headers with sticky ads\n    'stickyAdWrapperLabsHeader',\n    'stickyAdWrapper',\n    'stickyAdWrapperNav',\n    // Edition selector in nav - needs to be below stickyAdWrapper\n    'editionDropdown',\n    // Liveblog toast\n    'toast',\n    // Onwards Carousel (Related content etc)\n    'onwardsCarousel',\n    // Search link should be above The Guardian svg\n    'myAccountDropdown',\n    'searchHeaderLink',\n    'TheGuardian',\n    // Wrapper after nav stuff\n    'headerWrapper',\n    // Article headline (should be above main media)\n    'articleHeadline',\n    'immersiveBlackBox',\n    // Body\n    'bodyArea',\n    'rightColumnArea',\n    // Main media\n    'mainMedia',\n    // Nested links in cards should sit above the main card link\n    // See: https://www.sarasoueidan.com/blog/nested-links/\n    'card-nested-link',\n    'card-link',\n];\nconst decideIndex = (name) => {\n    const index = indices.indexOf(name);\n    if (index === -1)\n        return -1; // indexOf returns -1 if there is no match\n    return indices.length - index; // reverse the indices: last item gets 1\n};\nexport const getZIndex = (zIndex) => `z-index: ${decideIndex(zIndex)};`;\nexport const getZIndexImportant = (zIndex) => `z-index: ${decideIndex(zIndex)} !important;`;\n","import useSWR from 'swr';\nfunction checkForErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText ||\n            `useApi | An api call returned HTTP status ${response.status}`);\n    }\n    return response;\n}\nconst fetcher = (init) => (url) => fetch(url, init)\n    .then(checkForErrors)\n    .then((res) => res.json());\n/**\n * @description\n * A custom hook to make a GET request using the given url using the SWR lib (https://swr.vercel.app/)\n * returns { loading, error, data }\n * @param {String} url - The url to fetch\n * @param {SWRConfiguration} options - The SWR config object - https://swr.vercel.app/docs/options\n * @param {RequestInit} init - The fetch init object - https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n * */\nexport const useApi = (url, options, init) => {\n    const { data, error } = useSWR(url, fetcher(init), options);\n    return {\n        data,\n        error,\n        loading: !!url && !error && !data,\n    };\n};\n","const KEY = 'gu.brazeUserSet';\nconst hasCurrentBrazeUser = () => {\n    return localStorage.getItem(KEY) === 'true';\n};\nconst setHasCurrentBrazeUser = () => {\n    localStorage.setItem(KEY, 'true');\n};\nconst clearHasCurrentBrazeUser = () => {\n    localStorage.removeItem(KEY);\n};\nexport { hasCurrentBrazeUser, setHasCurrentBrazeUser, clearHasCurrentBrazeUser, };\n","import { getIdapiUserIdentifiers } from './getIdapiUserData';\nexport const getBrazeUuid = async (ajaxUrl) => {\n    return getIdapiUserIdentifiers(ajaxUrl)\n        .then((data) => data.brazeUuid)\n        .catch((error) => {\n        window.guardian.modules.sentry.reportError(error, 'getBrazeUuid');\n    });\n};\n","import { getBrazeUuid } from '../getBrazeUuid';\nimport { hasRequiredConsents } from './hasRequiredConsents';\nconst buildFailureResponse = (name, value, data) => ({\n    isSuccessful: false,\n    failure: {\n        field: name,\n        data: value,\n    },\n    data,\n});\nconst buildDependencies = (isSignedIn, idApiUrl) => {\n    return [\n        {\n            name: 'apiKey',\n            value: Promise.resolve(window.guardian.config.page.brazeApiKey),\n        },\n        {\n            name: 'brazeSwitch',\n            value: Promise.resolve(window.guardian.config.switches.brazeSwitch),\n        },\n        {\n            name: 'brazeUuid',\n            value: isSignedIn ? getBrazeUuid(idApiUrl) : Promise.resolve(null),\n        },\n        {\n            name: 'consent',\n            value: hasRequiredConsents(),\n        },\n        {\n            name: 'isNotPaidContent',\n            value: Promise.resolve(!window.guardian.config.page.isPaidContent),\n        },\n    ];\n};\nconst checkBrazeDependencies = async (isSignedIn, idApiUrl) => {\n    const dependencies = buildDependencies(isSignedIn, idApiUrl);\n    const data = {};\n    // I think we could possibly clean this up a bit when we can use\n    // Promise.allSettled reliably (it's not available in our current Node\n    // version and polyfill.io doesn't have a polyfill yet).\n    for (const { name, value } of dependencies) {\n        try {\n            const result = await value;\n            // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions -- TODO: Complex types, look into this further\n            if (result) {\n                data[name] = result;\n            }\n            else {\n                return buildFailureResponse(name, result, data);\n            }\n        }\n        catch (e) {\n            return buildFailureResponse(name, e instanceof Error ? e.message : e, data);\n        }\n    }\n    return {\n        isSuccessful: true,\n        data,\n    };\n};\nexport { checkBrazeDependencies };\n","import { log } from '@guardian/libs';\nconst SDK_OPTIONS = {\n    enableLogging: true,\n    noCookies: true,\n    baseUrl: 'https://sdk.fra-01.braze.eu/api/v3',\n    sessionTimeoutInSeconds: 1,\n    minimumIntervalBetweenTriggerActionsInSeconds: 0,\n    devicePropertyAllowlist: [],\n};\nconst initialiseAppboy = async (apiKey) => {\n    const importedAppboy = (await import(\n    /* webpackChunkName: \"braze-web-sdk-core\" */ '@braze/web-sdk-core'));\n    importedAppboy.setLogger((message) => log('tx', message));\n    importedAppboy.initialize(apiKey, SDK_OPTIONS);\n    return importedAppboy;\n};\nconst getInitialisedAppboy = (() => {\n    let cache;\n    return (apiKey) => {\n        if (cache === undefined) {\n            cache = initialiseAppboy(apiKey);\n        }\n        return cache;\n    };\n})();\nexport { getInitialisedAppboy };\n","import { getConsentFor, onConsentChange, } from '@guardian/consent-management-platform';\nconst hasRequiredConsents = () => new Promise((resolve, reject) => {\n    onConsentChange((state) => {\n        try {\n            resolve(getConsentFor('braze', state));\n        }\n        catch (e) {\n            reject(e);\n        }\n    });\n});\nexport { hasRequiredConsents };\n","import { BrazeCards, BrazeMessages, LocalMessageCache, NullBrazeCards, NullBrazeMessages, } from '@guardian/braze-components/logic';\nimport { getCookie, log, storage } from '@guardian/libs';\nimport { initPerf } from '../../browser/initPerf';\nimport { record } from '../../browser/ophan/ophan';\nimport { clearHasCurrentBrazeUser, hasCurrentBrazeUser, setHasCurrentBrazeUser, } from '../hasCurrentBrazeUser';\nimport { checkBrazeDependencies } from './checkBrazeDependencies';\nimport { getInitialisedAppboy } from './initialiseAppboy';\nconst maybeWipeUserData = async (apiKey, brazeUuid, consent, brazeSwitch) => {\n    const hasCurrentBrazeUserValue = hasCurrentBrazeUser();\n    const userHasLoggedOut = !brazeUuid && hasCurrentBrazeUserValue;\n    const userHasRemovedConsent = !consent && hasCurrentBrazeUserValue;\n    const brazeHasBeenDisabled = !brazeSwitch && hasCurrentBrazeUserValue;\n    if (userHasLoggedOut || userHasRemovedConsent || brazeHasBeenDisabled) {\n        try {\n            if (apiKey) {\n                const appboy = await getInitialisedAppboy(apiKey);\n                appboy.wipeData();\n            }\n            LocalMessageCache.clear();\n            clearHasCurrentBrazeUser();\n        }\n        catch (error) {\n            window.guardian.modules.sentry.reportError(\n            // @ts-expect-error\n            error, 'braze-maybeWipeUserData');\n        }\n    }\n};\nexport const buildBrazeMessaging = async (idApiUrl) => {\n    if (!storage.local.isAvailable()) {\n        // we require local storage for using any message channel so that we know\n        // when to clear up user data from the device on logout\n        return {\n            brazeMessages: new NullBrazeMessages(),\n            brazeCards: new NullBrazeCards(),\n        };\n    }\n    const isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n    const dependenciesResult = await checkBrazeDependencies(isSignedIn, idApiUrl);\n    if (!dependenciesResult.isSuccessful) {\n        const { failure, data } = dependenciesResult;\n        log('tx', `Not attempting to show Braze messages. Dependency ${failure.field} failed with ${String(failure.data)}.`);\n        await maybeWipeUserData(data.apiKey, data.brazeUuid, data.consent, data.brazeSwitch);\n        return {\n            brazeMessages: new NullBrazeMessages(),\n            brazeCards: new NullBrazeCards(),\n        };\n    }\n    try {\n        const sdkLoadTiming = initPerf('braze-sdk-load');\n        sdkLoadTiming.start();\n        const appboy = await getInitialisedAppboy(dependenciesResult.data.apiKey);\n        const sdkLoadTimeTaken = sdkLoadTiming.end();\n        record({\n            component: 'braze-sdk-load-timing',\n            value: sdkLoadTimeTaken,\n        });\n        const errorHandler = (error, desc) => {\n            window.guardian.modules.sentry.reportError(error, desc);\n        };\n        setHasCurrentBrazeUser();\n        appboy.changeUser(dependenciesResult.data.brazeUuid);\n        appboy.openSession();\n        const brazeCards = window.guardian.config.switches.brazeContentCards\n            ? new BrazeCards(appboy, errorHandler)\n            : new NullBrazeCards();\n        const brazeMessages = new BrazeMessages(appboy, LocalMessageCache, errorHandler);\n        return { brazeMessages, brazeCards };\n    }\n    catch {\n        return {\n            brazeMessages: new NullBrazeMessages(),\n            brazeCards: new NullBrazeCards(),\n        };\n    }\n};\n","import { NullBrazeCards, NullBrazeMessages, } from '@guardian/braze-components/logic';\nimport useSWRImmutable from 'swr/immutable';\nimport { buildBrazeMessaging } from './braze/buildBrazeMessaging';\n/**\n * Returns brazeMessaging as BrazeMessagesInterface and BrazeCardsInterface\n *\n * BrazeMessages is used to show single-impression messages (like ad impressions).\n * In contrast, BrazeCards can provide persistent user notifications.\n *\n * We're using useSWRImmutable to ensure this call is only made once\n * [doc]: https://swr.vercel.app/docs/revalidation#disable-automatic-revalidations\n */\nexport const useBraze = (idApiUrl) => {\n    const { data, error } = useSWRImmutable('braze-message', () => buildBrazeMessaging(idApiUrl));\n    if (error) {\n        return {\n            brazeMessages: new NullBrazeMessages(),\n            brazeCards: new NullBrazeCards(),\n        };\n    }\n    return {\n        brazeMessages: data?.brazeMessages,\n        brazeCards: data?.brazeCards,\n    };\n};\n","import libDebounce from 'lodash.debounce';\nimport { useEffect, useRef, useState } from 'react';\n/**\n * Custom hook around the `IntersectionObserver`.\n *\n * @param options\n * @param {boolean} [options.debouce] If `true`, debounce triggers by 200ms.\n * By default, trigger instantaneously. Enabling debouncing ensures the target\n * element intersects for at least 200ms before the callback is executed\n * @param {boolean} [options.repeat] If `true`, trigger the hook on\n * all intersections. By default, only trigger on the first intersection.\n * @param {boolean} [options.node] Set the initial node, if known.\n * @returns a tuple containing [isInView, setNode];\n */\nconst useIsInView = (options) => {\n    const [isInView, setIsInView] = useState(false);\n    const [node, setNode] = useState(options.node ?? null);\n    const observer = useRef(null);\n    const intersectionFn = ([entry]) => {\n        if (!entry)\n            return;\n        if (entry.isIntersecting) {\n            setIsInView(true);\n        }\n        else if (options.repeat) {\n            setIsInView(false);\n        }\n    };\n    const intersectionCallback = options.debounce\n        ? libDebounce(intersectionFn, 200)\n        : intersectionFn;\n    useEffect(() => {\n        // TODO: can we remove this? It’s now always cleaned up\n        if (observer.current) {\n            observer.current.disconnect();\n        }\n        // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions, @typescript-eslint/no-unnecessary-condition -- Safety for browser support\n        if (window.IntersectionObserver) {\n            observer.current = new window.IntersectionObserver(intersectionCallback, options);\n            if (node) {\n                observer.current.observe(node);\n            }\n        }\n        return () => observer.current?.disconnect();\n    }, [node, options, intersectionCallback]);\n    return [isInView, setNode];\n};\nexport { useIsInView };\n","import { useEffect, useState } from 'react';\n/**\n * Ensures that the given task is only run once and only after all items in waitFor are defined\n * @param {Function} task - The task to execute once\n * @param {Array} waitFor - An array of variables that must be defined before the task is executed\n * */\nexport const useOnce = (task, waitFor) => {\n    const [alreadyRun, setAlreadyRun] = useState(false);\n    const isReady = waitFor.every((dep) => dep !== undefined);\n    useEffect(() => {\n        if (!alreadyRun && isReady) {\n            task();\n            setAlreadyRun(true);\n        }\n    }, [alreadyRun, isReady, task]);\n};\n","\nmodule.exports = {\"attributes\":{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"30\",\"height\":\"30\",\"viewBox\":\"0 0 30 30\"},\"content\":\"<path d=\\\"M22.8 14.6l-7.6-7.6-.7.7 5.5 6.6h-14v1.5h14l-5.5 6.6.7.7 7.6-7.6v-.9\\\"/>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n","\nmodule.exports = {\"attributes\":{\"width\":\"18\",\"height\":\"18\",\"viewBox\":\"-4 -4 32 32\",\"xmlns\":\"http://www.w3.org/2000/svg\"},\"content\":\"<path d=\\\"M12,-4 a15,15 0,0,0 0,32 15,15 0,0,0 0,-32     M20 21L19 21H5L4 21V3L5 2H16L20 6V21Z     M18 8H6V9.5H18V8Z     M18 11H6V12.5H18V11Z     M13 14H6V15.5H13V14Z\\\" />\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n","\nmodule.exports = {\"attributes\":{\"width\":\"14\",\"height\":\"14\",\"viewBox\":\"0 0 14 14\"},\"content\":\"<path d=\\\"M7 0C3.1 0 0 3.1 0 7c0 2 .9 3.9 2.4 5.2C3.6 13.4 5.3 14 7 14c1.7 0 3.4-.6 4.7-1.8C13.2 10.9 14 9 14 7c0-3.9-3.1-7-7-7zm0 1.8c1.3 0 2.1.8 2.1 2.1S8 6.3 7 6.3c-.8 0-2-1.1-2-2.4 0-1.4.7-2.1 2-2.1zm0 11.6c-1.7 0-3.3-.7-4.5-1.8l.8-3.2.5-.5c1-.4 2.1-.5 3.1-.5 1.1 0 2.1.2 3.1.5l.5.5.9 3.2c-1.1 1.2-2.7 1.8-4.4 1.8z\\\"/>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n","\nmodule.exports = {\"attributes\":{\"width\":\"18\",\"height\":\"18\",\"viewBox\":\"0 0 18 18\"},\"content\":\"<path d=\\\"M6.5 1.6c2.7 0 4.9 2.2 4.9 4.9s-2.2 4.9-4.9 4.9-4.9-2.2-4.9-4.9 2.2-4.9 4.9-4.9m0-1.6c-3.6 0-6.5 2.9-6.5 6.5s2.9 6.5 6.5 6.5 6.5-2.9 6.5-6.5-2.9-6.5-6.5-6.5zm6.6 11.5l4.9 4.9-1.6 1.6-4.9-4.9v-.8l.8-.8h.8z\\\"/>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n","\nmodule.exports = {\"attributes\":{\"width\":\"18\",\"height\":\"18\",\"viewBox\":\"0 0 18 18\"},\"content\":\"<path d=\\\"M7.5 9L1 2l1-1 7 6.5L16 1l1 1-6.5 7 6.5 7-1 1-7-6.5L2 17l-1-1 6.5-7z\\\"></path>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n"],"names":["createAuthenticationEventParams","componentId","pageViewId","params","componentType","viewId","encodeURIComponent","constructQuery","query","Object","keys","map","param","value","queryValue","Array","isArray","v","join","ulStyles","css","getZIndex","until","from","liStyles","displayBlock","displayNone","linkStyles","textSans","text","neutral","border","linkActive","news","linkFirst","buttonStyles","brandText","brandAlt","buttonExpanded","notificationColor","palette","notificationBadgeStyles","diameter","dropdownButtonNotificationBadgeStyles","notificationTextStyles","NotificationBadge","_jsx","children","NotificationMessage","message","notification","DropdownLink","link","index","ophanComponent","useMemo","notifications","length","id","labels","ophanLabel","buildOphanComponentWithNotifications","useIsInView","debounce","hasBeenSeen","setNode","useState","hasSentViewEvent","setHasSentViewEvent","useEffect","forEach","logImpression","submitComponentEvent","component","action","useOnce","url","acquisitionData","JSON","stringify","source","campaignCode","referrerPageviewId","window","guardian","config","ophan","referrerUrl","location","origin","pathname","prefix","includes","addTrackingToUrl","hasNotifications","undefined","_jsxs","ref","href","isActive","dataLinkName","onClick","title","Dropdown","label","links","cssOverrides","isExpanded","setIsExpanded","noJS","setNoJS","dismissOnEsc","event","code","document","addEventListener","removeEventListener","dismissOnClick","stopPropagation","dropdownID","checkboxID","notificationCount","reduce","runningCount","linkNotificationCount","_Fragment","visuallyHidden","htmlFor","type","tabIndex","l","hasTargetAndMessage","card","Boolean","extras","target","myAccountStyles","brand","myAccountLinkStyles","SignIn","idUrl","ProfileIcon","dropDownOverrides","SignedInWithNotifications","mmaUrl","discussionApiUrl","useApi","joinUrl","credentials","data","error","userProfile","userId","identityLinks","buildIdentityLinks","identityLinksWithNotifications","notificationsByTarget","groupings","concat","groupNotificationsByTarget","newNotifications","addNotificationsToDropdownLinks","SignedIn","idApiUrl","props","brazeCards","useBraze","brazeNotifications","setBrazeNotifications","cardsToNotifications","getCardsForProfileBadge","filter","MyAccount","isSignedIn","editionDropdownStyles","HeaderTopBarEditionDropdown","editionId","isInEuropeTest","ukEdition","toUpperCase","activeLink","find","linksToDisplay","printSubscriptionStyles","fontWeight","HeaderTopBarPrintSubscriptions","setPageViewId","setReferrerUrl","addTrackingCodesToUrl","base","NewspaperIcon","searchLinkStyles","linkTablet","Search","SearchIcon","HeaderTopBarSearchCapi","isSearchVisible","setIsSearchVisible","q","setQ","qRef","useRef","formRef","searchContainerRef","handleClickOutside","current","contains","hideSearch","key","focus","preventDefault","XIcon","onSubmit","name","autoComplete","ArrowRightIcon","response","results","result","webUrl","headline","webTitle","SearchJobs","topBarStyles","space","HeaderTopBar","headerTopBarSearchCapiSwitch","getCookie","shouldMemoize","center","Hide","when","breakpoint","whenToHide","el","abTest","search","REFPVID","INTCMP","checkForErrors","ok","Error","statusText","status","callApi","fetch","then","json","cache","getIdApiUserData","ajaxUrl","idapiUserMeResponse","getIdapiUserIdentifiers","idapiUserIdentifiersResponse","indices","zIndex","indexOf","options","init","useSWR","res","fetcher","loading","KEY","getBrazeUuid","brazeUuid","catch","modules","sentry","reportError","buildFailureResponse","isSuccessful","failure","field","buildDependencies","Promise","resolve","page","brazeApiKey","switches","brazeSwitch","reject","onConsentChange","state","getConsentFor","e","isPaidContent","checkBrazeDependencies","dependencies","SDK_OPTIONS","enableLogging","noCookies","baseUrl","sessionTimeoutInSeconds","minimumIntervalBetweenTriggerActionsInSeconds","devicePropertyAllowlist","initialiseAppboy","apiKey","importedAppboy","setLogger","log","initialize","getInitialisedAppboy","maybeWipeUserData","consent","hasCurrentBrazeUserValue","localStorage","getItem","userHasRemovedConsent","brazeHasBeenDisabled","wipeData","LocalMessageCache","removeItem","buildBrazeMessaging","storage","brazeMessages","NullBrazeMessages","NullBrazeCards","dependenciesResult","String","sdkLoadTiming","initPerf","start","appboy","sdkLoadTimeTaken","end","record","errorHandler","desc","setItem","changeUser","openSession","brazeContentCards","BrazeCards","BrazeMessages","useSWRImmutable","isInView","setIsInView","node","observer","intersectionFn","entry","isIntersecting","repeat","intersectionCallback","libDebounce","disconnect","IntersectionObserver","observe","task","waitFor","alreadyRun","setAlreadyRun","isReady","every","dep","module","exports","desvg"],"sourceRoot":""}