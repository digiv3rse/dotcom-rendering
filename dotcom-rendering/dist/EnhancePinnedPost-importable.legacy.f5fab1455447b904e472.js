(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[9814],{6077:(e,n,t)=>{"use strict";t.r(n),t.d(n,{EnhancePinnedPost:()=>v});var o=t(5809),r=t(3904),i=t(7789),u=t(3203),c=t(9213),l="undefined"==typeof window,a=l?null:window.document.querySelector("[data-gu-marker=pinned-post]"),f=l?null:window.document.querySelector("input[name=pinned-post-checkbox]"),s=l?null:window.document.querySelector("#collapsible-body");var d=function(){var e;f instanceof HTMLInputElement&&(f.checked?(0,u.X4)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:null==a?void 0:a.id},action:"CLICK",value:"show-more"}):((0,u.X4)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:null==a?void 0:a.id},action:"CLICK",value:"show-less"}),(e=null==a?void 0:a.getBoundingClientRect())&&e.top<0&&(null==a||a.scrollIntoView({behavior:"smooth"}))))},v=function(){var e=(0,r.useState)(!1),n=(0,o.Z)(e,2),t=n[0],l=n[1],v=(0,c.O)({threshold:.1,repeat:!0,node:null!=a?a:void 0}),p=(0,o.Z)(v,1)[0],y=(0,r.useRef)(),m=function(){var e,n,t;s&&(e=!(s.scrollHeight<=s.clientHeight),n=document.querySelector("#pinned-post-button"),t=document.querySelector("#pinned-post-overlay"),n&&(e?n.style.removeProperty("display"):n.style.display="none"),t&&(e?t.style.removeProperty("display"):t.style.display="none"))};return(0,r.useEffect)((function(){if(a){m();var e=new MutationObserver(m);return e.observe(a,{childList:!0,subtree:!0}),function(){return e.disconnect()}}}),[]),(0,r.useEffect)((function(){return null==f||f.addEventListener("change",d),function(){null==f||f.removeEventListener("change",d)}}),[]),(0,r.useEffect)((function(){y.current=(0,i.i)("pinned-post-view-duration")}),[]),(0,r.useEffect)((function(){var e,n;if(a)if(p)l(!0),null===(e=y.current)||void 0===e||e.clear(),null===(n=y.current)||void 0===n||n.start();else if(t){var o,r=null===(o=y.current)||void 0===o?void 0:o.end();if(void 0!==r){var i=r/1e3;(0,u.X4)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:a.id},action:"VIEW",value:i.toString()})}}}),[p,t]),null}},9213:(e,n,t)=>{"use strict";t.d(n,{O:()=>c});var o=t(5809),r=t(3198),i=t.n(r),u=t(3904),c=function(e){var n,t=(0,u.useState)(!1),r=(0,o.Z)(t,2),c=r[0],l=r[1],a=(0,u.useState)(null!==(n=e.node)&&void 0!==n?n:null),f=(0,o.Z)(a,2),s=f[0],d=f[1],v=(0,u.useRef)(null),p=function(n){var t=(0,o.Z)(n,1)[0];t&&(t.isIntersecting?l(!0):e.repeat&&l(!1))},y=e.debounce?i()(p,200):p;return(0,u.useEffect)((function(){return v.current&&v.current.disconnect(),window.IntersectionObserver&&(v.current=new window.IntersectionObserver(y,e),s&&v.current.observe(s)),function(){var e;return null===(e=v.current)||void 0===e?void 0:e.disconnect()}}),[s,e,y]),[c,d]}},3198:(e,n,t)=>{var o=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,a=parseInt,f="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,s="object"==typeof self&&self&&self.Object===Object&&self,d=f||s||Function("return this")(),v=Object.prototype.toString,p=Math.max,y=Math.min,m=function(){return d.Date.now()};function b(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&v.call(e)==r}(e))return o;if(b(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=b(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var t=c.test(e);return t||l.test(e)?a(e.slice(2),t?2:8):u.test(e)?o:+e}e.exports=function(e,n,t){var o,r,i,u,c,l,a=0,f=!1,s=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(n){var t=o,i=r;return o=r=void 0,a=n,u=e.apply(i,t)}function h(e){var t=e-l;return void 0===l||t>=n||t<0||s&&e-a>=i}function w(){var e=m();if(h(e))return E(e);c=setTimeout(w,function(e){var t=n-(e-l);return s?y(t,i-(e-a)):t}(e))}function E(e){return c=void 0,d&&o?v(e):(o=r=void 0,u)}function O(){var e=m(),t=h(e);if(o=arguments,r=this,l=e,t){if(void 0===c)return function(e){return a=e,c=setTimeout(w,n),f?v(e):u}(l);if(s)return c=setTimeout(w,n),v(l)}return void 0===c&&(c=setTimeout(w,n)),u}return n=g(n)||0,b(t)&&(f=!!t.leading,i=(s="maxWait"in t)?p(g(t.maxWait)||0,n):i,d="trailing"in t?!!t.trailing:d),O.cancel=function(){void 0!==c&&clearTimeout(c),a=0,o=l=r=c=void 0},O.flush=function(){return void 0===c?u:E(m())},O}}}]);
//# sourceMappingURL=EnhancePinnedPost-importable.legacy.f5fab1455447b904e472.js.map