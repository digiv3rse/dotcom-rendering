"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[9876],{943:(t,e,n)=>{n.d(e,{W:()=>m});var r=n(7800),s=n(5237),o=n(2711),i=n(7001),a=n(7765),l=n(4416),c=n(3710),d=n(6575),u=n(8634),f=n(6074),p=n(3904);const m=t=>{let{formField:e,formData:n,setFieldInFormData:m,pageId:h,validationErrors:b}=t;const{type:g,label:v,hideLabel:x,description:y,required:j,id:w}=e,O="field_".concat(g,"_").concat(w),k=e.id in n?n[e.id]:"",S=b[e.id],P=(0,p.useRef)(!0);switch((0,p.useEffect)((()=>{P.current&&e.hidden&&"text"===e.type&&(m(e.id,h),P.current=!1)}),[e,h,m]),e.type){case"phone":case"email":case"text":return e.hidden?null:(0,r.jsx)(s.o,{name:O,label:v,hideLabel:x,supporting:y,optional:!j,value:k,error:S,"data-testid":"form-field-".concat(e.id),type:e.type,onChange:t=>m(e.id,t.target.value)});case"textarea":return(0,r.jsx)(o.K,{name:O,label:v,hideLabel:x,supporting:y,optional:!j,value:k,error:S,"data-testid":"form-field-".concat(e.id),onChange:t=>m(e.id,t.target.value)});case"file":return(0,r.jsx)(f.S,{label:v,hideLabel:x,supporting:y,optional:!j,error:S,"data-testid":"form-field-".concat(e.id),onUpload:t=>m(e.id,t)});case"select":return(0,r.jsx)(i.P,{name:O,label:v,hideLabel:x,supporting:y,optional:!j,value:k,error:S,"data-testid":"form-field-".concat(e.id),onChange:t=>m(e.id,t.target.value),children:[{value:"default",label:"Please choose an option"}].concat(e.options).map((t=>{let{value:e,label:n}=t;return(0,r.jsx)(a.W,{value:e,children:n},e)}))});case"checkbox":return(0,r.jsx)(l.c,{name:O,label:v,hideLabel:x,supporting:y,optional:!j,error:S||void 0,"data-testid":"form-field-".concat(e.id),children:e.options.map((t=>{var s;const o=null!==(s=n[e.id])&&void 0!==s?s:[],i=!!o.find((e=>e===t.value));return(0,r.jsx)(c.X,{name:O,label:t.label,value:t.value,checked:i,error:!!S,"data-testid":"form-field-".concat(t.value),onChange:()=>m(w,i?o.filter((e=>e!==t.value)):[...o,t.value])},t.value)}))});case"radio":return(0,r.jsx)(d.E,{label:e.label,supporting:e.description,error:b[e.id],name:e.name,orientation:e.options.length>2?"vertical":"horizontal",children:e.options.map(((t,s)=>(0,r.jsx)(u.Y,{"data-testid":"form-field-".concat(t.value),label:t.label,value:t.value,name:"".concat(e.id),checked:e.id in n&&n[e.id]===t.value,onChange:t=>m(e.id,t.target.value)},s)))});default:return null}}},1936:(t,e,n)=>{n.r(e),n.d(e,{SendAMessage:()=>et});var r=n(7800),s=n(43),o=n(1810),i=n(7357),a=n(4436),l=n(3196),c=n(683),d=n(8322),u=n(197),f=n(3220),p=n(4655),m=n(1083);function h(){const t=(e=["\n\t\t\t\t\t","\n\t\t\t\t"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return h=function(){return t},t}const b=t=>{let{size:e}=t;return(0,r.jsx)("svg",{width:e?p.EA[e]:void 0,height:void 0,viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg",focusable:!1,"aria-hidden":!0,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Zm3.336-14.444v1.27H7.558v-1.27h7.778Zm-2.699 2.54v1.27h-5.08v-1.27h5.08Zm3.81 2.539v1.27h-8.89v-1.27h8.89Zm-2.223 2.54v1.27H7.558v-1.27h6.666Z"})})},g=t=>{let{size:e,isAnnouncedByScreenReader:n=!1}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{size:e}),n?(0,r.jsx)("span",{css:(0,s.css)(h(),m.j),children:"Message"}):""]})};var v=n(4947),x=n(4532),y=n(4409),j=n(3904),w=n(4180),O=n(943);function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){k(t,e,n[e])}))}return t}function P(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function D(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function z(){const t=D(["\n\t"," {\n\t\tbackground-color: ",";\n\t\tcolor: ",";\n\t}\n\tbackground-color: ",";\n\tpadding: ","px;\n"]);return z=function(){return t},t}function C(){const t=D(["\n\t",";\n\tpadding-bottom: ","px;\n"]);return C=function(){return t},t}function $(){const t=D(["\n\t",";\n\t"," {\n\t\tcolor: ",";\n\t}\n"]);return $=function(){return t},t}function F(){const t=D(["\n\tfill: ",";\n\twidth: ","px;\n\tmargin-left: -","px;\n"]);return F=function(){return t},t}function I(){const t=D(["\n\tcolor: ",";\n\t",";\n\tdisplay: flex;\n\tpadding-bottom: ","px;\n"]);return I=function(){return t},t}function E(){const t=D(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n"]);return E=function(){return t},t}function L(){const t=D(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: ","px;\n\t"," {\n\t\tlabel > div,\n\t\tlabel > div > span {\n\t\t\tcolor: ",";\n\t\t}\n\t}\n"]);return L=function(){return t},t}function R(){const t=D(["\n\tbackground-color: ",";\n\tcolor: ",";\n\t:hover,\n\t:active {\n\t\tbackground-color: ",";\n\t}\n\t"," {\n\t\twidth: 100%;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t"," {\n\t\talign-self: flex-start;\n\t}\n\t"," {\n\t\tcolor: ",";\n\t\tbackground-color: ",";\n\t\talign-self: center;\n\t\t:hover,\n\t\t:active {\n\t\t\tbackground-color: ",";\n\t\t}\n\t}\n"]);return R=function(){return t},t}function _(){const t=D(["\n\tdisplay: flex;\n\tflex-direction: row;\n\t"," {\n\t\tjustify-content: flex-start;\n\t}\n\tjustify-content: space-around;\n\tpadding-bottom: ","px;\n"]);return _=function(){return t},t}function W(){const t=D(["\n\t",";\n\tcolor: ",";\n\tpadding-bottom: ","px;\n\t"," {\n\t\tcolor: ",";\n\t}\n"]);return W=function(){return t},t}function A(){const t=D(["\n\t\t\t\t\t\t\twidth: fit-content;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tmargin-bottom: ","px;\n\t\t\t\t\t\t"]);return A=function(){return t},t}function Z(){const t=D(["\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: -62.5rem;\n\t\t\t\t\t"]);return Z=function(){return t},t}function q(){const t=D(["\n\t&:not([open]) .is-open,\n\t&[open] .is-closed {\n\t\tdisplay: none;\n\t}\n\n\t&[open] summary {\n\t\ttext-decoration: underline;\n\t}\n\n\t/* removes toggle triangle from webkit browsers such as Safari */\n\tsummary::-webkit-details-marker {\n\t\tdisplay: none;\n\t}\n"]);return q=function(){return t},t}function B(){const t=D(["\n\tcursor: pointer;\n\t&:focus {\n\t\t",";\n\t}\n\t&:first-child {\n\t\tmargin-left: -4px;\n\t}\n\tpath {\n\t\t"," {\n\t\t\tfill: white;\n\t\t}\n\t}\n\t.is-open,\n\t.is-closed {\n\t\tsvg {\n\t\t\theight: ","px;\n\t\t}\n\t}\n\t",";\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: ","px;\n\t"," {\n\t\tcolor: white;\n\t}\n"]);return B=function(){return t},t}const T=t=>(0,s.css)(z(),o.C4.desktop,(0,w.b)(t).background.messageForm,i.n$[100],i.n$[86],a.D[3]),G=(0,s.css)(C(),l.OS.xsmall(),a.D[4]),M=(0,s.css)($(),l.OS.xsmall(),o.C4.desktop,i.n$[100]),H=(0,s.css)(F(),i.Vp[400],a.D[12],a.D[2]),N=(0,s.css)(I(),c.DG.error[400],l.OS.medium({fontWeight:"bold"}),a.D[2]),U=(0,s.css)(E()),X=(0,s.css)(L(),a.D[4],o.C4.desktop,i.n$[100]),V=(0,s.css)(R(),i.n$[100],i.n$[0],i.n$[86],o.C4.phablet,o.C4.desktop,o.Dp.desktop,i.n$[100],i.n$[7],i.n$[20]),Y=(0,s.css)(_(),o.C4.desktop,a.D[4]),J=(0,s.css)(W(),l.OS.xsmall(),i.n$[100],a.D[4],o.Dp.desktop,i.n$[0]),K=t=>{let{formFields:e,submissionURL:n,formId:o,format:i,pageId:l}=t;const[c,d]=(0,j.useState)({}),[p,m]=(0,j.useState)({}),[h,b]=(0,j.useState)(""),[g,v]=(0,j.useState)(!1),[x,w]=(0,j.useState)(""),k=(t,e)=>{const n=p;n[t]="",m(n),d(P(S({},c),{[t]:e}))};return g?(0,r.jsxs)("div",{css:T(i),children:[(0,r.jsx)("div",{css:H,children:(0,r.jsx)(u.X,{})}),(0,r.jsx)("div",{css:M,children:"Thank you for submitting your message."})]}):(0,r.jsxs)("div",{css:T(i),children:[(0,r.jsxs)("div",{css:J,children:[(0,r.jsx)("span",{css:{fontWeight:"bold"},children:"Please note: "}),"This is not a public comment â€“ only the Guardian can see your message. Our writers will monitor these messages and respond to some in this live blog, but unfortunately they will not be able to respond to every message."]}),(0,r.jsxs)("form",{css:U,noValidate:!0,onSubmit:t=>{t.preventDefault(),(()=>{const t={};let n=!0;return e.forEach((e=>(e.required&&!c[e.id]&&(t[e.id]="This field is required",n=!1),"email"===e.type&&c[e.id]&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c[e.id])||(t[e.id]="Please enter a valid email address",n=!1)),["number","phone"].includes(e.type)&&c[e.id]&&(/^[\d ()+-]+$/.test(c[e.id])||(t[e.id]="Please enter a valid number",n=!1),c[e.id].length<10&&(t[e.id]="Please include your dialling/area code",n=!1)),n))),m(t),0===Object.keys(t).length})()?(async t=>{if(b(""),c.twitterHandle)return void b("Sorry we think you are a robot.");const e=Object.keys(c).reduce(((e,n)=>P(S({},e),{["field_".concat(n)]:t[n]})),{});fetch(n,{method:"POST",body:JSON.stringify(S({formId:o},e)),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((t=>{201===t.status?v(!0):b("Sorry, there was a problem submitting your form. Please try again later.")})).catch((t=>{window.guardian.modules.sentry.reportError(t,"message-us-submission"),b("Sorry, there was a problem submitting your message. Please try again later.")}))})(c):document.querySelectorAll(":invalid")[1].focus()},children:[Object.values(p).filter((t=>""!==t)).length>0&&(0,r.jsx)(y.X,{message:"Some information is missing.",context:"Please complete all required fields.",cssOverrides:(0,s.css)(A(),a.D[4])}),e.map((t=>(0,r.jsx)("div",{css:X,children:(0,r.jsx)(O.W,{formField:t,formData:c,setFieldInFormData:k,validationErrors:p,pageId:l})},t.id))),(0,r.jsx)("div",{css:G,children:"You must be 18 or over to fill in this form. We will only use this data for the purpose of improving our live blogs. For more information please read our terms of service and privacy policy. If you have something sensitive to share with us, contact the Guardian securely. By submitting your message, you are agreeing to share your details with us, which we may use in this blog."}),(0,r.jsx)("div",{css:(0,s.css)(Z()),"aria-hidden":"true",children:(0,r.jsx)("input",{name:"twitter-handle",type:"text",id:"twitter-handle",tabIndex:-1,placeholder:"@mytwitterhandle",value:x,onChange:t=>w(t.target.value)})}),!!h&&(0,r.jsx)("div",{css:N,children:h}),(0,r.jsx)("div",{css:Y,children:(0,r.jsx)(f.z,{type:"submit",cssOverrides:V,children:"Send to the Guardian"})})]})]})},Q=(0,s.css)(q()),tt=(0,s.css)(B(),d.y,o.C4.desktop,a.D[3],l.OS.small({fontWeight:"bold"}),a.D[2],o.C4.desktop),et=t=>{let{formFields:e,formId:n,format:s,pageId:o}=t;return(0,r.jsxs)("details",{css:Q,children:[(0,r.jsxs)("summary",{css:tt,children:[(0,r.jsx)(g,{size:"medium"}),"Send us a message",(0,r.jsx)("span",{className:"is-open",children:(0,r.jsx)(v.v,{size:"xsmall"})}),(0,r.jsx)("span",{className:"is-closed",children:(0,r.jsx)(x.z,{size:"xsmall"})})]}),(0,r.jsx)(K,{formFields:e,submissionURL:"https://callouts.code.dev-guardianapis.com/formstack-campaign/submit",formId:n,format:s,pageId:o})]})}},4947:(t,e,n)=>{n.d(e,{v:()=>c});var r=n(7800),s=n(43),o=n(4655),i=n(1083);function a(){const t=(e=["\n\t\t\t\t\t","\n\t\t\t\t"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return a=function(){return t},t}const l=t=>{let{size:e}=t;return(0,r.jsx)("svg",{width:e?o.EA[e]:void 0,height:void 0,viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg",focusable:!1,"aria-hidden":!0,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 16.768 12.502 6.27h-1.004L1 16.768l.98.954L12 9.284l10.02 8.438.98-.954Z"})})},c=t=>{let{size:e,isAnnouncedByScreenReader:n=!1}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l,{size:e}),n?(0,r.jsx)("span",{css:(0,s.css)(a(),i.j),children:"Collapse to show less"}):""]})}}}]);
//# sourceMappingURL=SendAMessage-importable.modern.a07070970406df1acc95.js.map