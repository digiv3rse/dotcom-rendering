{"version":3,"file":"ShowMore-importable.modern.fa2b37a13eb41c331312.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/lib/byline.ts","webpack://@guardian/dotcom-rendering/./src/model/enhanceSnaps.ts","webpack://@guardian/dotcom-rendering/./src/model/enhanceCards.ts","webpack://@guardian/dotcom-rendering/./src/web/components/Card/components/UL.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/FrontCard.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/ShowMore.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/dynamicSlices.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/decideDesign.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideDisplay.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideTheme.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideFormat.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getDataLinkName.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useOnce.ts","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/src/button/Button.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/src/user-feedback/InlineError.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/src/user-feedback/styles.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/src/user-feedback/theme.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/vendor/icons/SvgAlertTriangle.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/vendor/icons/SvgCross.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/vendor/icons/SvgPlus.js"],"sourcesContent":["import type { TagType } from '../types/tag';\n\ninterface ContributorTag extends TagType {\n\ttype: 'Contributor';\n}\n\nexport const isContributor = (tag: TagType): tag is ContributorTag =>\n\ttag.type === 'Contributor';\n\n/**\n * Get the sole contributor on an article.\n *\n * This can be used to display more information about them,\n * such as their picture, bio or social media handle.\n *\n * An article has a sole contributor only if all of the following are true:\n * - there is a byline which is not an empty string\n * - the byline does not include the word “and”\n * - there is a `Contributor` tag whose title is included in the byline\n *\n * @returns A sole contributor if there is one, `undefined` otherwise.\n */\nexport const getSoleContributor = (\n\ttags: TagType[],\n\tbyline: string | undefined,\n): ContributorTag | undefined => {\n\tif (!byline) return undefined;\n\tif (byline.includes(' and ')) return undefined;\n\n\tconst [firstContributor, otherContributor] = tags\n\t\t.filter(isContributor)\n\t\t.filter(({ title }) => byline.includes(title));\n\n\t// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition -- we don’t have unchecked indexed access\n\tif (otherContributor) return undefined;\n\n\treturn firstContributor;\n};\n\nexport const getContributorTagsForToken = (\n\ttags: TagType[],\n\ttoken: string,\n): ContributorTag[] => {\n\treturn tags.filter(isContributor).filter((t) => t.title === token);\n};\n\ntype BylineComponent = { token: string; tag: TagType } | string;\n\nexport const getBylineComponentsFromTokens = (\n\ttokens: string[],\n\ttags: TagType[],\n): BylineComponent[] => {\n\tconst [bylineComponents] = tokens.reduce<[BylineComponent[], TagType[]]>(\n\t\t([bylines, remainingTags], token) => {\n\t\t\tconst [firstContributorTag] = getContributorTagsForToken(\n\t\t\t\tremainingTags,\n\t\t\t\ttoken,\n\t\t\t);\n\t\t\tif (!firstContributorTag) {\n\t\t\t\treturn [bylines.concat(token), remainingTags];\n\t\t\t}\n\n\t\t\t// We've used this tag, so remove it from the list of possible tags.\n\t\t\t// This ensures we don't use the same contributor tag when two identical\n\t\t\t// names with different contributor tags are used.\n\t\t\tconst newRemainingTags = remainingTags.filter(\n\t\t\t\t(tag) => !(tag.id === firstContributorTag.id),\n\t\t\t);\n\n\t\t\treturn [\n\t\t\t\tbylines.concat({ tag: firstContributorTag, token }),\n\t\t\t\tnewRemainingTags,\n\t\t\t];\n\t\t},\n\t\t[[], tags],\n\t);\n\n\treturn bylineComponents;\n};\n","import type { DCRSnapType, FESnapType } from '../types/front';\n\n/**\n *\n * This function takes a `FESnapType` and turns it into a `DCRSnapType`. It mutates\n * certain properties such as embedCss to work with Emotion.\n *\n * @returns the DCR snap with its properties mutated\n */\nexport const enhanceSnaps = (\n\tsnap: FESnapType | undefined,\n): DCRSnapType | undefined => {\n\tconst dcrSnap = snap;\n\n\t// Emotion doesn't parse this conditional CSS correctly which is used by some thrashers to check\n\t// if there’s a page skin. This regex fixes the vast majority of these cases should allow future snaps\n\t// to be built with DCR in mind.\n\tif (dcrSnap?.embedCss) {\n\t\tdcrSnap.embedCss = dcrSnap.embedCss.replace(\n\t\t\t/body:not\\(\\.has-active-pageskin\\)(?! &)/g,\n\t\t\t'body:not(.has-active-pageskin) &',\n\t\t);\n\t}\n\n\treturn dcrSnap;\n};\n","import { ArticleDesign, ArticlePillar, ArticleSpecial } from '@guardian/libs';\nimport { getSoleContributor } from '../lib/byline';\nimport type {\n\tDCRContainerPalette,\n\tDCRFrontCard,\n\tDCRSupportingContent,\n\tFEFrontCard,\n\tFESupportingContent,\n} from '../types/front';\nimport type { FETagType, TagType } from '../types/tag';\nimport { decideFormat } from '../web/lib/decideFormat';\nimport { getDataLinkNameCard } from '../web/lib/getDataLinkName';\nimport { enhanceSnaps } from './enhanceSnaps';\n\n/**\n *\n * This function makes the decision about when we use the parent's (the\n * container's) format property to override the styling of a sublink, and\n * when we allow the sublink to express its own styling.\n *\n * Eg. If you had a sublink to a lifestyle article, when should it use pink for\n * the kicker and when would that not look right\n *\n * @returns the format property that we will use to style the sublink\n */\nconst decidePresentationFormat = ({\n\tlinkFormat,\n\tcontainerFormat,\n\tcontainerPalette,\n}: {\n\tlinkFormat?: ArticleFormat;\n\tcontainerFormat: ArticleFormat;\n\tcontainerPalette?: DCRContainerPalette;\n}): ArticleFormat => {\n\t// Some sublinks are to fronts and so don't have a `format` property\n\tif (!linkFormat) return containerFormat;\n\t// If the container has a special palette, use the container format\n\tif (containerPalette) return containerFormat;\n\t// These types of article styles have background styles that sublinks\n\t// need to respect so we use the container format here\n\tif (\n\t\tcontainerFormat.design === ArticleDesign.LiveBlog ||\n\t\tcontainerFormat.design === ArticleDesign.Gallery ||\n\t\tcontainerFormat.design === ArticleDesign.Audio ||\n\t\tcontainerFormat.design === ArticleDesign.Video ||\n\t\tcontainerFormat.theme === ArticleSpecial.SpecialReport ||\n\t\tcontainerFormat.design === ArticleDesign.Analysis\n\t)\n\t\treturn containerFormat;\n\n\t// These types of link format designs mean the headline could render\n\t// poorly (e.g.: white) so we use the container format\n\tif (\n\t\tlinkFormat.design === ArticleDesign.LiveBlog ||\n\t\tlinkFormat.design === ArticleDesign.Gallery ||\n\t\tlinkFormat.design === ArticleDesign.Audio ||\n\t\tlinkFormat.theme === ArticleSpecial.SpecialReport ||\n\t\tlinkFormat.design === ArticleDesign.Video\n\t)\n\t\treturn { ...containerFormat, theme: ArticlePillar.News };\n\n\t// Otherwise, we can allow the sublink to express its own styling\n\treturn linkFormat;\n};\n\nconst enhanceSupportingContent = (\n\tsupportingContent: FESupportingContent[],\n\tformat: ArticleFormat,\n\tcontainerPalette?: DCRContainerPalette,\n): DCRSupportingContent[] => {\n\treturn supportingContent.map((subLink) => {\n\t\t// This is the actual DCR format for this sublink\n\t\tconst linkFormat = subLink.format\n\t\t\t? decideFormat(subLink.format)\n\t\t\t: undefined;\n\t\t// This is the format used to decide how the sublink looks (we vary this based\n\t\t// on the container background colour)\n\t\tconst presentationFormat = decidePresentationFormat({\n\t\t\tlinkFormat,\n\t\t\tcontainerFormat: format,\n\t\t\tcontainerPalette,\n\t\t});\n\n\t\tconst supportingContentIsLive =\n\t\t\tsubLink.format?.design === 'LiveBlogDesign';\n\n\t\treturn {\n\t\t\tformat: presentationFormat,\n\t\t\theadline: subLink.header?.headline ?? '',\n\t\t\turl: subLink.properties.href ?? subLink.header?.url,\n\t\t\tkickerText: supportingContentIsLive\n\t\t\t\t? 'Live'\n\t\t\t\t: subLink.header?.kicker?.item?.properties.kickerText,\n\t\t};\n\t});\n};\n\nconst decideAvatarUrl = (\n\ttags: TagType[] = [],\n\tbyline?: string,\n): string | undefined => {\n\tconst soleContributor = getSoleContributor(tags, byline);\n\treturn soleContributor?.bylineLargeImageUrl ?? undefined;\n};\n\nconst decideImage = (trail: FEFrontCard) => {\n\tif (\n\t\ttrail.type === 'LinkSnap' ||\n\t\ttrail.properties.image?.type === 'Replace'\n\t) {\n\t\treturn trail.properties.image?.item.imageSrc;\n\t}\n\n\tif (trail.display.imageHide) return undefined;\n\n\tif (trail.properties.isCrossword && trail.properties.maybeContentId) {\n\t\treturn `https://api.nextgen.guardianapps.co.uk/${trail.properties.maybeContentId}.svg`;\n\t}\n\n\treturn trail.properties.maybeContent?.trail.trailPicture?.allImages[0]?.url;\n};\n\nconst decideMediaType = (format: ArticleFormat): MediaType | undefined => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Gallery:\n\t\t\treturn 'Gallery';\n\t\tcase ArticleDesign.Video:\n\t\t\treturn 'Video';\n\t\tcase ArticleDesign.Audio:\n\t\t\treturn 'Audio';\n\t\tdefault:\n\t\t\treturn undefined;\n\t}\n};\n\nconst decideKicker = (trail: FEFrontCard) => {\n\treturn trail.properties.isBreaking\n\t\t? 'Breaking news'\n\t\t: trail.header.kicker?.item?.properties.kickerText;\n};\n\nconst enhanceTags = (tags: FETagType[]): TagType[] => {\n\treturn tags.map(({ properties }) => {\n\t\tconst {\n\t\t\tid,\n\t\t\ttagType,\n\t\t\twebTitle,\n\t\t\ttwitterHandle,\n\t\t\tbylineImageUrl,\n\t\t\tcontributorLargeImagePath,\n\t\t} = properties;\n\n\t\treturn {\n\t\t\tid,\n\t\t\ttype: tagType,\n\t\t\ttitle: webTitle,\n\t\t\ttwitterHandle,\n\t\t\tbylineImageUrl,\n\t\t\tbylineLargeImageUrl: contributorLargeImagePath,\n\t\t};\n\t});\n};\n\nexport const enhanceCards = (\n\tcollections: FEFrontCard[],\n\tcontainerPalette?: DCRContainerPalette,\n): DCRFrontCard[] =>\n\tcollections.map((faciaCard, index) => {\n\t\t// Snap cards may not have a format, default to a standard format if that's the case.\n\t\tconst format = decideFormat(\n\t\t\tfaciaCard.format ?? {\n\t\t\t\tdesign: 'ArticleDesign',\n\t\t\t\ttheme: 'NewsPillar',\n\t\t\t\tdisplay: 'StandardDisplay',\n\t\t\t},\n\t\t);\n\t\tconst group = `${faciaCard.card.group}${\n\t\t\tfaciaCard.display.isBoosted ? '+' : ''\n\t\t}`;\n\t\tconst dataLinkName = getDataLinkNameCard(format, group, index + 1);\n\n\t\tconst tags = faciaCard.properties.maybeContent?.tags.tags\n\t\t\t? enhanceTags(faciaCard.properties.maybeContent.tags.tags)\n\t\t\t: [];\n\n\t\t/**\n\t\t * The URL parameter on a Snap header will be a link to the Snap itself, there is a second href\n\t\t * property which contains what the snap is actually linking to. This is commonly used in the\n\t\t * NavList container for linking to non-article pages.\n\t\t * @see NavList\n\t\t */\n\t\tconst url =\n\t\t\tfaciaCard.type === 'LinkSnap' && faciaCard.properties.href\n\t\t\t\t? faciaCard.properties.href\n\t\t\t\t: faciaCard.header.url;\n\n\t\treturn {\n\t\t\tformat,\n\t\t\tdataLinkName,\n\t\t\turl,\n\t\t\theadline: faciaCard.header.headline,\n\t\t\ttrailText: faciaCard.card.trailText,\n\t\t\tstarRating: faciaCard.card.starRating,\n\t\t\twebPublicationDate:\n\t\t\t\tfaciaCard.card.webPublicationDateOption !== undefined\n\t\t\t\t\t? new Date(\n\t\t\t\t\t\t\tfaciaCard.card.webPublicationDateOption,\n\t\t\t\t\t  ).toISOString()\n\t\t\t\t\t: undefined,\n\t\t\timage: decideImage(faciaCard),\n\t\t\tkickerText: decideKicker(faciaCard),\n\t\t\tsupportingContent: faciaCard.supportingContent\n\t\t\t\t? enhanceSupportingContent(\n\t\t\t\t\t\tfaciaCard.supportingContent,\n\t\t\t\t\t\tformat,\n\t\t\t\t\t\tcontainerPalette,\n\t\t\t\t  )\n\t\t\t\t: undefined,\n\t\t\tdiscussionId: faciaCard.discussion.isCommentable\n\t\t\t\t? faciaCard.discussion.discussionId\n\t\t\t\t: undefined,\n\t\t\t// nb. there is a distinct 'byline' property on FEFrontCard, at\n\t\t\t// card.properties.byline\n\t\t\tbyline:\n\t\t\t\tfaciaCard.properties.maybeContent?.trail.byline ?? undefined,\n\t\t\tshowByline: faciaCard.properties.showByline,\n\t\t\tsnapData: enhanceSnaps(faciaCard.enriched),\n\t\t\tisBoosted: faciaCard.display.isBoosted,\n\t\t\tisCrossword: faciaCard.properties.isCrossword,\n\t\t\tshowQuotedHeadline: faciaCard.display.showQuotedHeadline,\n\t\t\tavatarUrl:\n\t\t\t\tfaciaCard.properties.maybeContent?.tags.tags &&\n\t\t\t\tfaciaCard.properties.image?.type === 'Cutout'\n\t\t\t\t\t? decideAvatarUrl(\n\t\t\t\t\t\t\ttags,\n\t\t\t\t\t\t\tfaciaCard.properties.maybeContent.trail.byline,\n\t\t\t\t\t  )\n\t\t\t\t\t: undefined,\n\t\t\tmediaType: decideMediaType(format),\n\t\t\tmediaDuration:\n\t\t\t\tfaciaCard.properties.maybeContent?.elements.mediaAtoms[0]\n\t\t\t\t\t?.duration,\n\t\t\tshowMainVideo: faciaCard.properties.showMainVideo,\n\t\t\tisExternalLink: faciaCard.card.cardStyle.type === 'ExternalLink',\n\t\t};\n\t});\n","import { css } from '@emotion/react';\nimport { from, space, until } from '@guardian/source-foundations';\nimport type { DCRContainerPalette } from '../../../../types/front';\nimport { verticalDivider } from '../../../lib/verticalDivider';\n\ntype Direction = 'row' | 'column' | 'row-reverse';\n\nconst ulStyles = (direction: Direction) => css`\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: ${direction};\n\trow-gap: 12px;\n\t${until.tablet} {\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t}\n`;\n\nconst wrapStyles = css`\n\t${from.tablet} {\n\t\tflex-wrap: wrap;\n\t}\n`;\n\nconst marginBottomStyles = css`\n\tmargin-bottom: ${space[3]}px;\n`;\n\ntype Props = {\n\tchildren: React.ReactNode;\n\t/** Passed to flex-direction */\n\tdirection?: Direction;\n\t/** If this UL is a column and not the left most column */\n\tshowDivider?: boolean;\n\t/** If this UL is a row, add spacing below */\n\tpadBottom?: boolean;\n\t/** Used to keep cards aligned in adjacent columns */\n\twrapCards?: boolean;\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nexport const UL = ({\n\tchildren,\n\tdirection = 'column',\n\tshowDivider = false,\n\tpadBottom = false,\n\twrapCards = false,\n\tcontainerPalette,\n}: Props) => {\n\treturn (\n\t\t<ul\n\t\t\tcss={[\n\t\t\t\tulStyles(direction),\n\t\t\t\tshowDivider && verticalDivider(containerPalette),\n\t\t\t\tpadBottom && marginBottomStyles,\n\t\t\t\twrapCards && wrapStyles,\n\t\t\t]}\n\t\t>\n\t\t\t{children}\n\t\t</ul>\n\t);\n};\n","import { ArticleDesign } from '@guardian/libs';\nimport type { DCRFrontCard } from '../../types/front';\nimport type { Props as CardProps } from './Card/Card';\nimport { Card } from './Card/Card';\n\ntype Props = {\n\ttrail: DCRFrontCard;\n} & Partial<CardProps>;\n\n/**\n * A wrapper around the normal Card component providing sensible defaults for Cards on front containers.\n *\n * Any prop used by the original Card can be used in FrontCard to override the defaults.\n *\n * Note: Below parameters are not an exhaustive list of params used by FrontCard, rather they are a list of\n * commonly overridden params to make it easier for a developer to know if they actually need to override these values.\n *\n * @param props\n * @param [props.headlineSize] - Defaults to \"medium\"\n * @param [props.imagePosition] - Defaults to \"top\"\n * @param [props.imagePositionOnMobile] - Defaults to \"left\"\n * @param [props.imageSize] - Defaults to \"small\"\n * @param [props.supportingContent] - Defaults to undefined, set to trail.supportingContent if you want this card to show sublinks.\n * @param [props.trailText] - Defaults to undefined, set to `trail.trailText` if you want this card to show trail text.\n */\nexport const FrontCard = (props: Props) => {\n\tconst { trail, ...cardProps } = props;\n\tconst defaultProps: CardProps = {\n\t\tlinkTo: trail.url,\n\t\tformat: trail.format,\n\t\theadlineText: trail.headline,\n\t\tbyline: trail.byline,\n\t\tshowByline: trail.showByline,\n\t\tshowQuotedHeadline: trail.showQuotedHeadline,\n\t\twebPublicationDate: trail.webPublicationDate,\n\t\tkickerText: trail.kickerText,\n\t\tshowPulsingDot: trail.format.design === ArticleDesign.LiveBlog,\n\t\tshowClock: false,\n\t\timageUrl: trail.image,\n\t\tisCrossword: trail.isCrossword,\n\t\tmediaType: trail.mediaType,\n\t\tmediaDuration: trail.mediaDuration,\n\t\tstarRating: trail.starRating,\n\t\tdataLinkName: trail.dataLinkName,\n\t\tsnapData: trail.snapData,\n\t\tdiscussionId: trail.discussionId,\n\t\tavatarUrl: trail.avatarUrl,\n\t\tshowMainVideo: trail.showMainVideo,\n\t\tisExternalLink: trail.isExternalLink,\n\t};\n\n\treturn Card({ ...defaultProps, ...cardProps });\n};\n","import { css } from '@emotion/react';\nimport {\n\tfrom,\n\tneutral,\n\tspace,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport {\n\tButton,\n\tInlineError,\n\tSvgCross,\n\tSvgPlus,\n} from '@guardian/source-react-components';\nimport { useEffect, useState } from 'react';\nimport { enhanceCards } from '../../model/enhanceCards';\nimport type { DCRContainerPalette, FEFrontCard } from '../../types/front';\nimport { shouldPadWrappableRows } from '../lib/dynamicSlices';\nimport { useApi } from '../lib/useApi';\nimport { useOnce } from '../lib/useOnce';\nimport { LI } from './Card/components/LI';\nimport { UL } from './Card/components/UL';\nimport { FrontCard } from './FrontCard';\n\nfunction decideButtonText({\n\tisOpen,\n\tloading,\n\ttitle,\n}: {\n\tisOpen: boolean;\n\tloading: boolean;\n\ttitle: string;\n}) {\n\tif (isOpen && loading) return 'Loading';\n\tif (isOpen) return `Less ${title}`;\n\treturn `More ${title}`;\n}\n\ntype Props = {\n\ttitle: string;\n\tpageId: string;\n\t/**\n\t * `collectionId` is the id of the collection as it figures in the fronts\n\t * config. It is used to generate the URL for the show-more API endpoint.\n\t */\n\tcollectionId: string;\n\t/**\n\t * The value of the `id` attribute on the container element that this 'show more'\n\t * button sits beneath. The main container is server-side rendered, so this show more\n\t * button needs to access its contents on the client side so that we can check whether\n\t * any of the stories received from the `show-more` endpoint are already being displayed\n\t * in the main container. (This can happen due to a lag between when the page is SSRd\n\t * and when the user clicks the 'show more' button.)\n\t */\n\tsectionId: string;\n\tshowAge: boolean;\n\tajaxUrl: string;\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nexport const ShowMore = ({\n\ttitle,\n\tpageId,\n\tsectionId,\n\tcollectionId,\n\tshowAge,\n\tajaxUrl,\n\tcontainerPalette,\n}: Props) => {\n\tconst [existingCardLinks, setExistingCardLinks] = useState<string[]>([]);\n\tconst [isOpen, setIsOpen] = useState(false);\n\n\t/**\n\t * Store the URLs of the cards in the main container for this button, to\n\t * allow us to filter out duplicated stories when we load them from the\n\t * 'show-more' endpoint.\n\t */\n\tuseOnce(() => {\n\t\tconst container = document.getElementById(`container-${sectionId}`);\n\t\tconst containerLinks = Array.from(\n\t\t\tcontainer?.querySelectorAll('a') ?? [],\n\t\t)\n\t\t\t.map((element) => element.attributes.getNamedItem('href')?.value)\n\t\t\t// Remove values that are not strings and coerce the type to a string[]\n\t\t\t.filter((item): item is string => !!item);\n\n\t\tsetExistingCardLinks(containerLinks);\n\t}, []);\n\n\t/** We only pass an actual URL to SWR when 'showMore' is true.\n\t * Toggling 'isOpen' will trigger a re-render\n\t *   @see https://swr.vercel.app/docs/conditional-fetching#conditional\n\t */\n\tconst url = isOpen\n\t\t? `${ajaxUrl}/${pageId}/show-more/${collectionId}.json?dcr=true`\n\t\t: undefined;\n\tconst { data, error, loading } = useApi<FEFrontCard[]>(url);\n\n\tconst cards =\n\t\tdata &&\n\t\tenhanceCards(data).filter(\n\t\t\t(card) => !existingCardLinks.includes(card.url),\n\t\t);\n\n\tconst showMoreContainerId = `show-more-${collectionId}`;\n\n\tuseEffect(() => {\n\t\t/**\n\t\t * Focus the first of the new cards when they're loaded in.\n\t\t * There's no need to check `isOpen` here because if `isOpen` is\n\t\t * `false` then `filteredData` will be `undefined`.\n\t\t * */\n\n\t\tconst [card] = cards ?? [];\n\t\tif (card) {\n\t\t\tconst maybeFirstCard = document.querySelector(\n\t\t\t\t`#${showMoreContainerId} [data-link-name=\"${card.dataLinkName}\"]`,\n\t\t\t);\n\t\t\tif (maybeFirstCard instanceof HTMLElement) {\n\t\t\t\tmaybeFirstCard.focus();\n\t\t\t}\n\t\t}\n\t}, [cards, showMoreContainerId]);\n\n\treturn (\n\t\t<>\n\t\t\t<div id={showMoreContainerId} aria-live=\"polite\">\n\t\t\t\t{cards && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tpadding-top: ${space[2]}px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<UL direction=\"row\" wrapCards={true}>\n\t\t\t\t\t\t\t{cards.map((card, cardIndex) => {\n\t\t\t\t\t\t\t\tconst columns = 3;\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<LI\n\t\t\t\t\t\t\t\t\t\tkey={card.url}\n\t\t\t\t\t\t\t\t\t\tpercentage=\"33.333%\"\n\t\t\t\t\t\t\t\t\t\tstretch={cards.length % columns !== 1}\n\t\t\t\t\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\t\t\t\t\tshowDivider={cardIndex % columns !== 0}\n\t\t\t\t\t\t\t\t\t\toffsetBottomPaddingOnDivider={shouldPadWrappableRows(\n\t\t\t\t\t\t\t\t\t\t\tcardIndex,\n\t\t\t\t\t\t\t\t\t\t\tcards.length -\n\t\t\t\t\t\t\t\t\t\t\t\t(cards.length % columns),\n\t\t\t\t\t\t\t\t\t\t\tcolumns,\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FrontCard\n\t\t\t\t\t\t\t\t\t\t\ttrail={card}\n\t\t\t\t\t\t\t\t\t\t\timageUrl={undefined}\n\t\t\t\t\t\t\t\t\t\t\tavatarUrl={undefined}\n\t\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\t\t\t\t\t\theadlineSize=\"small\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</LI>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</UL>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tcss={[\n\t\t\t\t\tcss`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t`,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\ticon={isOpen ? <SvgCross /> : <SvgPlus />}\n\t\t\t\t\tisLoading={loading}\n\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\tonClick={() => setIsOpen(!isOpen)}\n\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\tmargin-top: ${space[4]}px;\n\t\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\t\tcolor: ${neutral[100]};\n\t\t\t\t\t\tbackground-color: ${neutral[7]};\n\t\t\t\t\t\tborder-color: ${neutral[7]};\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\tbackground-color: ${neutral[46]};\n\t\t\t\t\t\t\tborder-color: ${neutral[46]};\n\t\t\t\t\t\t}\n\t\t\t\t\t\t${from.tablet} {\n\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t\taria-controls={showMoreContainerId}\n\t\t\t\t\taria-expanded={isOpen && !loading}\n\t\t\t\t\taria-describedby={`show-more-button-${collectionId}-description`}\n\t\t\t\t>\n\t\t\t\t\t{decideButtonText({\n\t\t\t\t\t\tisOpen,\n\t\t\t\t\t\tloading,\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t})}\n\t\t\t\t</Button>\n\t\t\t\t<span\n\t\t\t\t\tid={`show-more-button-${collectionId}-description`}\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${visuallyHidden}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\tLoads more stories and moves focus to first new story.\n\t\t\t\t</span>\n\t\t\t\t{error && (\n\t\t\t\t\t<InlineError\n\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\tpadding-top: 18px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\tSorry, failed to load more stories. Retrying in a few\n\t\t\t\t\t\tseconds.\n\t\t\t\t\t</InlineError>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n};\n","import type {\n\tDCRContainerPalette,\n\tDCRFrontCard,\n\tDCRGroupedTrails,\n} from '../../types/front';\nimport type { TrailType } from '../../types/trails';\nimport { LI } from '../components/Card/components/LI';\nimport { UL } from '../components/Card/components/UL';\nimport {\n\tCard100Media100,\n\tCard100Media75,\n\tCard25Media25,\n\tCard25Media25Tall,\n\tCard50Media50,\n\tCard50Media50Tall,\n\tCard75Media50Left,\n\tCard75Media50Right,\n} from './cardWrappers';\n\n/**\n * A place for shared slices which are used across multiple dynamic/ containers\n *\n * ASCII Art Guide:\n * '#'            => Image\n * ' ' | '_'      => text / trail / supporting content\n */\n\n/* ._________________._________________.\n * |#################|#################|\n * |#################|#################|\n * |_________________|_________________|\n */\nexport const Card50_Card50 = ({\n\tcards,\n\tcontainerPalette,\n\tshowAge,\n}: {\n\tcards: DCRFrontCard[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n}) => {\n\tconst cards50 = cards.slice(0, 2);\n\n\treturn (\n\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t{cards50.map((trail, index) => (\n\t\t\t\t<LI\n\t\t\t\t\tkey={trail.url}\n\t\t\t\t\tpercentage=\"50%\"\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={index !== 0}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t>\n\t\t\t\t\t<Card50Media50Tall\n\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\t\t</UL>\n\t);\n};\n\n/* ._________________________._________.\n * |         ################|#########|\n * |         ################|#########|\n * |_________################|_________|\n */\nexport const Card75_Card25 = ({\n\tcards,\n\tcontainerPalette,\n\tshowAge,\n}: {\n\tcards: DCRFrontCard[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n}) => {\n\tconst card75 = cards.slice(0, 1);\n\tconst card25 = cards.slice(1, 2);\n\n\treturn (\n\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t{card75.map((trail) => (\n\t\t\t\t<LI key={trail.url} percentage=\"75%\" padSides={true}>\n\t\t\t\t\t<Card75Media50Right\n\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\t\t\t{card25.map((trail) => (\n\t\t\t\t<LI\n\t\t\t\t\tkey={trail.url}\n\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t>\n\t\t\t\t\t<Card25Media25\n\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\t\t</UL>\n\t);\n};\n\n/* ._________________________._________.\n * |#########|###############          |\n * |#########|###############          |\n * |_________|###############__________|\n */\nexport const Card25_Card75 = ({\n\tcards,\n\tcontainerPalette,\n\tshowAge,\n}: {\n\tcards: DCRFrontCard[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n}) => {\n\tconst card25 = cards.slice(0, 1);\n\tconst card75 = cards.slice(1, 2);\n\n\treturn (\n\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t{card25.map((trail) => (\n\t\t\t\t<LI key={trail.url} percentage=\"25%\" padSides={true}>\n\t\t\t\t\t<Card25Media25\n\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\t\t\t{card75.map((trail) => (\n\t\t\t\t<LI\n\t\t\t\t\tkey={trail.url}\n\t\t\t\t\tpercentage=\"75%\"\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t>\n\t\t\t\t\t<Card75Media50Left\n\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\t\t</UL>\n\t);\n};\n\n/* ._________________.________.________.\n * |#################|########|########|\n * |                 |        |        |\n * |_________________|________|________|\n */\nexport const Card50_Card25_Card25 = ({\n\tcards,\n\tcontainerPalette,\n\tshowAge,\n}: {\n\tcards: DCRFrontCard[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n}) => {\n\tconst card50 = cards.slice(0, 1);\n\tconst cards25 = cards.slice(1, 3);\n\n\treturn (\n\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t{card50.map((trail) => (\n\t\t\t\t<LI key={trail.url} percentage=\"50%\" padSides={true}>\n\t\t\t\t\t<Card50Media50\n\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\n\t\t\t{cards25.map((trail) => (\n\t\t\t\t<LI\n\t\t\t\t\tkey={trail.url}\n\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t>\n\t\t\t\t\t<Card25Media25Tall\n\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\t\t</UL>\n\t);\n};\n\n/* ._________________.\n * |#################|\n * |#################|\n * |#################|\n * |_________________|\n */\nexport const Card100PictureTop = ({\n\tcards,\n\tshowAge,\n\tcontainerPalette,\n}: {\n\tcards: DCRFrontCard[];\n\tshowAge?: boolean;\n\tcontainerPalette?: DCRContainerPalette;\n}) => {\n\tconst card100 = cards.slice(0, 1);\n\n\treturn (\n\t\t<UL padBottom={true}>\n\t\t\t{card100.map((card) => (\n\t\t\t\t<LI key={card.url} percentage=\"100%\" padSides={true}>\n\t\t\t\t\t<Card100Media100\n\t\t\t\t\t\ttrail={card}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\t\t</UL>\n\t);\n};\n\n/* .___________________________________.\n * |       ############################|\n * |       ############################|\n * |       ############################|\n * |_______############################|\n */\nexport const Card100PictureRight = ({\n\tcards,\n\tshowAge,\n\tcontainerPalette,\n}: {\n\tcards: DCRFrontCard[];\n\tshowAge?: boolean;\n\tcontainerPalette?: DCRContainerPalette;\n}) => {\n\tconst card100 = cards.slice(0, 1);\n\n\treturn (\n\t\t<UL padBottom={true}>\n\t\t\t{card100.map((card) => (\n\t\t\t\t<LI key={card.url} percentage=\"100%\" padSides={true}>\n\t\t\t\t\t<Card100Media75\n\t\t\t\t\t\ttrail={card}\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t))}\n\t\t</UL>\n\t);\n};\n\n/**\n * Abstraction to decide whether to show padding on wrapped rows of cards.\n *\n * For three columns, We have different results with 5 or 9 cards\n *\n * @example - All but last 2\n * ```\n * ┌───┐ ┌───┐ ┌───┐\n * │Pad│ │Pad│ │Pad│\n * └───┘ └───┘ └───┘\n * ┌───┐ ┌───┐\n * │No!│ │No!│\n * └───┘ └───┘\n * ```\n * - All but last 3\n * ```\n * ┌───┐ ┌───┐ ┌───┐\n * │Pad│ │Pad│ │Pad│\n * └───┘ └───┘ └───┘\n * ┌───┐ ┌───┐ ┌───┐\n * │Pad│ │Pad│ │Pad│\n * └───┘ └───┘ └───┘\n * ┌───┐ ┌───┐ ┌───┐\n * │No!│ │No!│ │No!│\n * └───┘ └───┘ └───┘\n * ```\n *\n * @param index - Index of the current card\n * @param totalCards - Total number of cards being shown\n * @param cardsPerRow - No. of cards in each row (if full)\n */\nexport const shouldPadWrappableRows = (\n\tindex: number,\n\ttotalCards: number,\n\tcardsPerRow: number,\n): boolean => index < totalCards - (totalCards % cardsPerRow || cardsPerRow);\n\n/**\n * Filter trails an object of grouped trails, removing any trails included in the\n * 'filter' array\n *\n * @param opts.groupedTrails Object of grouped trails we want to filter cards from\n * @param opts.filter Array of cards we want to filter against\n * @returns grouped trails object filtered against the 'filter' array\n */\nexport const filterGroupedTrails = ({\n\tgroupedTrails,\n\tfilter,\n}: {\n\tgroupedTrails: DCRGroupedTrails;\n\tfilter: TrailType[];\n}): DCRGroupedTrails => {\n\tconst shouldFilterCard = (card: TrailType) =>\n\t\tfilter.findIndex((filterCard) => filterCard.url === card.url) === -1;\n\treturn {\n\t\tsnap: groupedTrails.snap.filter(shouldFilterCard),\n\t\thuge: groupedTrails.huge.filter(shouldFilterCard),\n\t\tveryBig: groupedTrails.veryBig.filter(shouldFilterCard),\n\t\tbig: groupedTrails.big.filter(shouldFilterCard),\n\t\tstandard: groupedTrails.standard.filter(shouldFilterCard),\n\t};\n};\n","import { ArticleDesign } from '@guardian/libs';\n\n/**\n * NOTE: Immersive Opinion pieces are not supported,\n * i.e. when `CommentDesign` and `ImmersiveDisplay` are used jointly.\n */\nexport const decideDesign = ({\n\tdesign,\n\tdisplay,\n}: Partial<FEFormat>): ArticleDesign => {\n\tswitch (design) {\n\t\tcase 'ArticleDesign':\n\t\t\treturn ArticleDesign.Standard;\n\t\tcase 'GalleryDesign':\n\t\t\treturn ArticleDesign.Gallery;\n\t\tcase 'AudioDesign':\n\t\t\treturn ArticleDesign.Audio;\n\t\tcase 'VideoDesign':\n\t\t\treturn ArticleDesign.Video;\n\t\tcase 'ReviewDesign':\n\t\t\treturn ArticleDesign.Review;\n\t\tcase 'AnalysisDesign':\n\t\t\treturn ArticleDesign.Analysis;\n\t\tcase 'CommentDesign':\n\t\t\t// Temporary hack until we can handle Immersive Opinion pieces\n\t\t\treturn display === 'ImmersiveDisplay'\n\t\t\t\t? ArticleDesign.Standard\n\t\t\t\t: ArticleDesign.Comment;\n\t\tcase 'LetterDesign':\n\t\t\treturn ArticleDesign.Letter;\n\t\tcase 'FeatureDesign':\n\t\t\treturn ArticleDesign.Feature;\n\t\tcase 'LiveBlogDesign':\n\t\t\treturn ArticleDesign.LiveBlog;\n\t\tcase 'DeadBlogDesign':\n\t\t\treturn ArticleDesign.DeadBlog;\n\t\tcase 'RecipeDesign':\n\t\t\treturn ArticleDesign.Recipe;\n\t\tcase 'MatchReportDesign':\n\t\t\treturn ArticleDesign.MatchReport;\n\t\tcase 'InterviewDesign':\n\t\t\treturn ArticleDesign.Interview;\n\t\tcase 'EditorialDesign':\n\t\t\treturn ArticleDesign.Editorial;\n\t\tcase 'QuizDesign':\n\t\t\treturn ArticleDesign.Quiz;\n\t\tcase 'InteractiveDesign':\n\t\t\treturn ArticleDesign.Interactive;\n\t\tcase 'PhotoEssayDesign':\n\t\t\treturn ArticleDesign.PhotoEssay;\n\t\tcase 'PrintShopDesign':\n\t\t\treturn ArticleDesign.PrintShop;\n\t\tcase 'ObituaryDesign':\n\t\t\treturn ArticleDesign.Obituary;\n\t\tcase 'FullPageInteractiveDesign':\n\t\t\treturn ArticleDesign.FullPageInteractive;\n\t\tcase 'NewsletterSignupDesign':\n\t\t\treturn ArticleDesign.NewsletterSignup;\n\t\tcase 'ExplainerDesign':\n\t\t\treturn ArticleDesign.Explainer;\n\t\tcase 'TimelineDesign':\n\t\t\treturn ArticleDesign.Timeline;\n\t\tcase 'ProfileDesign':\n\t\t\treturn ArticleDesign.Profile;\n\t\tdefault:\n\t\t\treturn ArticleDesign.Standard;\n\t}\n};\n","import { ArticleDisplay } from '@guardian/libs';\n\nexport const decideDisplay = ({\n\tdisplay,\n}: Partial<FEFormat>): ArticleDisplay => {\n\tswitch (display) {\n\t\tcase 'StandardDisplay':\n\t\t\treturn ArticleDisplay.Standard;\n\t\tcase 'ImmersiveDisplay':\n\t\t\treturn ArticleDisplay.Immersive;\n\t\tcase 'ShowcaseDisplay':\n\t\t\treturn ArticleDisplay.Showcase;\n\t\tcase 'NumberedListDisplay':\n\t\t\treturn ArticleDisplay.NumberedList;\n\t\tdefault:\n\t\t\treturn ArticleDisplay.Standard;\n\t}\n};\n","import { ArticlePillar, ArticleSpecial } from '@guardian/libs';\n\nexport const decideTheme = ({ theme }: Partial<FEFormat>): ArticleTheme => {\n\tswitch (theme) {\n\t\tcase 'NewsPillar':\n\t\t\treturn ArticlePillar.News;\n\t\tcase 'OpinionPillar':\n\t\t\treturn ArticlePillar.Opinion;\n\t\tcase 'SportPillar':\n\t\t\treturn ArticlePillar.Sport;\n\t\tcase 'CulturePillar':\n\t\t\treturn ArticlePillar.Culture;\n\t\tcase 'LifestylePillar':\n\t\t\treturn ArticlePillar.Lifestyle;\n\t\tcase 'SpecialReportTheme':\n\t\t\treturn ArticleSpecial.SpecialReport;\n\t\tcase 'SpecialReportAltTheme':\n\t\t\treturn ArticleSpecial.SpecialReportAlt;\n\t\tcase 'Labs':\n\t\t\treturn ArticleSpecial.Labs;\n\t\tdefault:\n\t\t\treturn ArticlePillar.News;\n\t}\n};\n","import { decideDesign } from './decideDesign';\nimport { decideDisplay } from './decideDisplay';\nimport { decideTheme } from './decideTheme';\n\nexport const decideFormat = (format: Partial<FEFormat>): ArticleFormat => ({\n\tdisplay: decideDisplay(format),\n\ttheme: decideTheme(format),\n\tdesign: decideDesign(format),\n});\n","import { ArticleDesign, ArticleSpecial } from '@guardian/libs';\n\n/**\n * TODO: missing \"podcast\" and \"external\"\n */\nconst getLinkType = ({ theme, design }: ArticleFormat): RichLinkCardType => {\n\tswitch (theme) {\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn 'special-report';\n\t\tdefault:\n\t\t\tswitch (design) {\n\t\t\t\tcase ArticleDesign.Analysis:\n\t\t\t\t\treturn 'analysis';\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\t\treturn 'live';\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\treturn 'dead';\n\t\t\t\tcase ArticleDesign.Feature:\n\t\t\t\t\treturn 'feature';\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\t\treturn 'editorial';\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\t\treturn 'comment';\n\t\t\t\tcase ArticleDesign.Gallery:\n\t\t\t\tcase ArticleDesign.Audio:\n\t\t\t\tcase ArticleDesign.Video:\n\t\t\t\t\treturn 'media';\n\t\t\t\tcase ArticleDesign.Review:\n\t\t\t\t\treturn 'review';\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\t\treturn 'letters';\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'news';\n\t\t\t}\n\t}\n};\n\n/**\n * Get the `data-link-name` attribute for a card.\n * Used by Ophan for understanding reader journeys. E.g:\n * - `feature | card-2+ | card-@1`\n * - `news | group-0 | card-@5`\n *\n * @see {JSX.IntrinsicAttributes}\n */\nexport const getDataLinkNameCard = (\n\tformat: ArticleFormat,\n\tgroup: string | number,\n\tindex: number,\n): string =>\n\t[getLinkType(format), `group-${group}`, `card-@${index}`].join(' | ');\n","import { useEffect, useState } from 'react';\n\n/**\n * Ensures that the given task is only run once and only after all items in waitFor are defined\n * @param {Function} task - The task to execute once\n * @param {Array} waitFor - An array of variables that must be defined before the task is executed\n * */\nexport const useOnce = (task: () => void, waitFor: unknown[]): void => {\n\tconst [alreadyRun, setAlreadyRun] = useState(false);\n\tconst isReady = waitFor.every((dep) => dep !== undefined);\n\tuseEffect(() => {\n\t\tif (!alreadyRun && isReady) {\n\t\t\ttask();\n\t\t\tsetAlreadyRun(true);\n\t\t}\n\t}, [alreadyRun, isReady, task]);\n};\n","import { jsx } from '@emotion/react/jsx-runtime';\nimport { buttonContents } from './shared.js';\nimport { buttonStyles } from './styles.js';\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_button--primary-priority-default-theme) •\n * [Design System](https://theguardian.design/2a1e5182b/p/435225-button) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/button/Button.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components)\n *\n * Buttons enable users to make choices or perform actions.\n *\n */\nconst Button = ({ priority, size, icon: iconSvg, iconSide, hideLabel, nudgeIcon, type = 'button', isLoading = false, loadingAnnouncement = 'Loading', cssOverrides, children, ...props }) => (jsx(\"button\", { css: buttonStyles({\n        size,\n        priority,\n        icon: iconSvg,\n        hideLabel,\n        iconSide,\n        nudgeIcon,\n        cssOverrides,\n        isLoading,\n    }), type: type, \"aria-live\": \"polite\", \"aria-label\": isLoading ? loadingAnnouncement : undefined, ...props, children: buttonContents({\n        hideLabel,\n        iconSvg,\n        isLoading,\n        children,\n    }) }));\n\nexport { Button };\n//# sourceMappingURL=Button.js.map\n","import { jsxs, jsx } from '@emotion/react/jsx-runtime';\nimport { SvgAlertTriangle } from '../../vendor/icons/SvgAlertTriangle.js';\nimport { inlineError } from './styles.js';\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_inlineerror--inline-error-default-theme) •\n * [Design System](https://theguardian.design/2a1e5182b/p/108ed3-user-feedback/b/3803b4) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/user-feedback/InlineError.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components-feedback)\n *\n * Used to inform the user when a validation has failed or user error has occurred. These messages indicate what went wrong and how to fix it.\n *\n * The following themes are supported: `default`, `brand`\n */\nconst InlineError = ({ children, cssOverrides, ...props }) => (jsxs(\"span\", { css: (theme) => [inlineError(theme.userFeedback), cssOverrides], role: \"alert\", ...props, children: [jsx(SvgAlertTriangle, {}), children] }));\n\nexport { InlineError };\n//# sourceMappingURL=InlineError.js.map\n","import { css } from '@emotion/react';\nimport { textSans, remWidth, remHeight } from '@guardian/source-foundations';\nimport { userFeedbackThemeDefault } from './theme.js';\n\nconst inlineMessage = css `\n\tdisplay: flex;\n\talign-items: flex-start;\n\t${textSans.medium()};\n\n\tsvg {\n\t\tfill: currentColor;\n\t\t/* we don't want the SVG to change size depending on available space */\n\t\tflex: none;\n\t\twidth: ${remWidth.iconMedium}rem;\n\t\theight: ${remHeight.iconMedium}rem;\n\n\t\t/*\n\t\ta visual kick to vertically align the icon with the top row of text\n\t\tand horizontally pull it to the beginning of the row\n\t\t */\n\t\ttransform: translate(-4px, -3px);\n\t}\n`;\nconst inlineError = (userFeedback = userFeedbackThemeDefault.userFeedback) => css `\n\t${inlineMessage};\n\tcolor: ${userFeedback.textError};\n`;\nconst inlineSuccess = (userFeedback = userFeedbackThemeDefault.userFeedback) => css `\n\t${inlineMessage};\n\tcolor: ${userFeedback.textSuccess};\n`;\n\nexport { inlineError, inlineSuccess };\n//# sourceMappingURL=styles.js.map\n","import { palette } from '@guardian/source-foundations';\n\nconst userFeedbackThemeDefault = {\n    userFeedback: {\n        textSuccess: palette.success[400],\n        textError: palette.error[400],\n    },\n};\nconst userFeedbackThemeBrand = {\n    userFeedback: {\n        textSuccess: palette.success[500],\n        textError: palette.error[500],\n    },\n};\n\nexport { userFeedbackThemeBrand, userFeedbackThemeDefault };\n//# sourceMappingURL=theme.js.map\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden, iconSize } from '@guardian/source-foundations';\n\nconst Svg = ({ size }) => (jsx(\"svg\", { width: size ? iconSize[size] : undefined, height: undefined, viewBox: \"-3 -3 30 30\", xmlns: \"http://www.w3.org/2000/svg\", focusable: false, \"aria-hidden\": true, children: jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M11.41 2 1 19.057l.668.943h20.664l.668-.943L12.59 2h-1.18Zm-.063 12.178h1.306l.621-6.917-.856-.728h-.835l-.857.728.62 6.917ZM12 15.452c.7 0 1.274.573 1.274 1.274 0 .7-.573 1.274-1.274 1.274-.7 0-1.274-.573-1.274-1.274 0-.7.573-1.274 1.274-1.274Z\" }) }));\nconst SvgAlertTriangle = ({ size, isAnnouncedByScreenReader = false, }) => (jsxs(Fragment, { children: [jsx(Svg, { size: size }), isAnnouncedByScreenReader ? (jsx(\"span\", { css: css `\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`, children: \"Warning\" })) : ('')] }));\n\nexport { SvgAlertTriangle };\n//# sourceMappingURL=SvgAlertTriangle.js.map\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden, iconSize } from '@guardian/source-foundations';\n\nconst Svg = ({ size }) => (jsx(\"svg\", { width: size ? iconSize[size] : undefined, height: undefined, viewBox: \"-3 -3 30 30\", xmlns: \"http://www.w3.org/2000/svg\", focusable: false, \"aria-hidden\": true, children: jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M12.015 14.042 20.707 22 22 20.709 14.06 12 22 3.291 20.707 2l-8.692 7.958L3.293 2.03 2 3.321 9.97 12 2 20.679l1.293 1.291 8.722-7.928Z\" }) }));\nconst SvgCross = ({ size, isAnnouncedByScreenReader = false, }) => (jsxs(Fragment, { children: [jsx(Svg, { size: size }), isAnnouncedByScreenReader ? (jsx(\"span\", { css: css `\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`, children: \"Close\" })) : ('')] }));\n\nexport { SvgCross };\n//# sourceMappingURL=SvgCross.js.map\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden, iconSize } from '@guardian/source-foundations';\n\nconst Svg = ({ size }) => (jsx(\"svg\", { width: size ? iconSize[size] : undefined, height: undefined, viewBox: \"-3 -3 30 30\", xmlns: \"http://www.w3.org/2000/svg\", focusable: false, \"aria-hidden\": true, children: jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"m10.8 13.2.425 9.8h1.525l.45-9.8 9.8-.45v-1.525l-9.8-.425-.45-9.8h-1.525l-.425 9.8-9.8.425v1.525l9.8.45Z\" }) }));\nconst SvgPlus = ({ size, isAnnouncedByScreenReader = false, }) => (jsxs(Fragment, { children: [jsx(Svg, { size: size }), isAnnouncedByScreenReader ? (jsx(\"span\", { css: css `\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`, children: \"Plus sign\" })) : ('')] }));\n\nexport { SvgPlus };\n//# sourceMappingURL=SvgPlus.js.map\n"],"names":["isContributor","tag","type","getSoleContributor","tags","byline","includes","firstContributor","otherContributor","filter","title","getBylineComponentsFromTokens","tokens","bylineComponents","reduce","token","bylines","remainingTags","firstContributorTag","t","getContributorTagsForToken","concat","newRemainingTags","id","enhanceSnaps","snap","dcrSnap","embedCss","replace","decidePresentationFormat","linkFormat","containerFormat","containerPalette","design","ArticleDesign","theme","ArticleSpecial","ArticlePillar","enhanceSupportingContent","supportingContent","format","map","subLink","decideFormat","undefined","presentationFormat","supportingContentIsLive","headline","header","url","properties","href","kickerText","kicker","item","decideAvatarUrl","soleContributor","bylineLargeImageUrl","decideMediaType","decideKicker","trail","isBreaking","ulStyles","direction","css","until","wrapStyles","from","marginBottomStyles","space","UL","children","showDivider","padBottom","wrapCards","ul","verticalDivider","FrontCard","props","cardProps","defaultProps","linkTo","headlineText","showByline","showQuotedHeadline","webPublicationDate","showPulsingDot","showClock","imageUrl","image","isCrossword","mediaType","mediaDuration","starRating","dataLinkName","snapData","discussionId","avatarUrl","showMainVideo","isExternalLink","Card","decideButtonText","isOpen","loading","ShowMore","pageId","sectionId","collectionId","showAge","ajaxUrl","existingCardLinks","setExistingCardLinks","useState","setIsOpen","useOnce","container","document","getElementById","containerLinks","Array","querySelectorAll","element","attributes","getNamedItem","value","data","error","useApi","cards","collections","faciaCard","index","display","group","card","isBoosted","getDataLinkNameCard","maybeContent","tagType","webTitle","twitterHandle","bylineImageUrl","contributorLargeImagePath","enhanceTags","trailText","webPublicationDateOption","Date","toISOString","imageSrc","imageHide","maybeContentId","trailPicture","allImages","enhanceCards","discussion","isCommentable","enriched","elements","mediaAtoms","duration","cardStyle","showMoreContainerId","useEffect","maybeFirstCard","querySelector","HTMLElement","focus","div","aria-live","cardIndex","LI","percentage","stretch","length","padSides","offsetBottomPaddingOnDivider","totalCards","headlineSize","Button","size","icon","SvgCross","SvgPlus","isLoading","iconSide","onClick","cssOverrides","neutral","aria-controls","aria-expanded","aria-describedby","span","visuallyHidden","InlineError","decideDesign","decideDisplay","ArticleDisplay","decideTheme","getLinkType","join","task","waitFor","alreadyRun","setAlreadyRun","isReady","every","dep","priority","iconSvg","hideLabel","nudgeIcon","loadingAnnouncement","jsx","buttonStyles","buttonContents","jsxs","inlineError","userFeedback","role","SvgAlertTriangle","inlineMessage","textSans","remWidth","remHeight","userFeedbackThemeDefault","textError","inlineSuccess","textSuccess","palette","userFeedbackThemeBrand","Svg","width","iconSize","height","viewBox","xmlns","focusable","fillRule","clipRule","d","isAnnouncedByScreenReader","Fragment"],"sourceRoot":""}