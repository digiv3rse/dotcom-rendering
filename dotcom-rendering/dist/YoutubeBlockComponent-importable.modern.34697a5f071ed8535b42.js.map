{"version":3,"file":"YoutubeBlockComponent-importable.modern.34697a5f071ed8535b42.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/../node_modules/@kossnocorp/desvg/index.js","webpack://@guardian/dotcom-rendering/../node_modules/@kossnocorp/desvg/react.js","webpack://@guardian/dotcom-rendering/./src/static/icons/camera.svg","webpack://@guardian/dotcom-rendering/./src/static/icons/video-icon.svg","webpack://@guardian/dotcom-rendering/./src/web/components/Caption.tsx","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/vendor/icons/SvgAlertRound.js","webpack://@guardian/dotcom-rendering/./src/web/components/YoutubeBlockComponent.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/useAB.ts","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/libs/esm/format/ArticleDisplay.js"],"sourcesContent":["module.exports = desvg\n\nfunction desvg (h, svg, props) {\n  props = props || {}\n\n  var content = svg.content\n  var attributes = svg.attributes\n\n  return function (props) {\n    return h(\n      'svg',\n      Object.assign(\n        { dangerouslySetInnerHTML: { __html: content } },\n        attributes,\n        props\n      ),\n      props && props.children\n    )\n  }\n}\n","var desvg = require('.')\nvar React = require('react')\n\nmodule.exports = desvg.bind(null, React.createElement.bind(React))\n","\nmodule.exports = {\"attributes\":{\"width\":\"18\",\"height\":\"13\",\"viewBox\":\"0 0 18 13\"},\"content\":\"<path d=\\\"M18 3.5v8l-1.5 1.5h-15l-1.5-1.5v-8l1.5-1.5h3.5l2-2h4l2 2h3.5l1.5 1.5zm-9 7.5c1.9 0 3.5-1.6 3.5-3.5s-1.6-3.5-3.5-3.5-3.5 1.6-3.5 3.5 1.6 3.5 3.5 3.5z\\\"/>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n","\nmodule.exports = {\"attributes\":{\"width\":\"36\",\"height\":\"23\",\"viewBox\":\"0 0 36 23\"},\"content\":\"<path d=\\\"M3.2 0l-3.2 3.3v16.4l3.3 3.3h18.7v-23h-18.8m30.4 1l-8.6 8v5l8.6 8h2.4v-21h-2.4\\\"/>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n","import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tbetween,\n\tfrom,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport CameraSvg from '../../static/icons/camera.svg';\nimport VideoSvg from '../../static/icons/video-icon.svg';\nimport type { Palette } from '../../types/palette';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tcaptionText?: string;\n\tformat: ArticleFormat;\n\tpadCaption?: boolean;\n\tcredit?: string;\n\tdisplayCredit?: boolean;\n\tshouldLimitWidth?: boolean;\n\tisOverlaid?: boolean;\n\tisLeftCol?: boolean;\n\tmediaType?: MediaType;\n\tisMainMedia?: boolean;\n};\n\ntype IconProps = {\n\tpalette: Palette;\n\tformat: ArticleFormat;\n};\n\nconst captionStyle = (palette: Palette) => css`\n\t${textSans.xsmall()};\n\tline-height: 135%;\n\tpadding-top: 6px;\n\tword-wrap: break-all;\n\tcolor: ${palette.text.caption};\n`;\n\nconst bottomMarginStyles = css`\n\tmargin-bottom: 6px;\n`;\n\nconst overlaidBottomPadding = (format: ArticleFormat) => {\n\tif (\n\t\tformat.display === ArticleDisplay.Showcase &&\n\t\tformat.design === ArticleDesign.Review\n\t) {\n\t\treturn css`\n\t\t\tpadding-bottom: 2.5rem;\n\t\t`;\n\t}\n\treturn css`\n\t\tpadding-bottom: 0.375rem;\n\t`;\n};\n\nconst overlaidStyles = (palette: Palette, format: ArticleFormat) => css`\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(18, 18, 18, 0.8);\n\n\tspan {\n\t\tcolor: ${palette.text.overlaidCaption};\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\tsvg {\n\t\tfill: ${palette.text.overlaidCaption};\n\t}\n\tcolor: ${palette.text.overlaidCaption};\n\tfont-size: 0.75rem;\n\tline-height: 1rem;\n\tpadding-top: 0.375rem;\n\tpadding-right: 2.5rem;\n\tpadding-left: 0.75rem;\n\t${overlaidBottomPadding(format)};\n\n\tflex-grow: 1;\n\tmin-height: 2.25rem;\n`;\n\nconst limitedWidth = css`\n\t${from.leftCol} {\n\t\twidth: 140px;\n\t\t/* use absolute position here to allow the article text to push up alongside\n           the caption when it is limited in width */\n\t\tposition: absolute;\n\t}\n\t${from.wide} {\n\t\twidth: 220px;\n\t}\n`;\n\nconst veryLimitedWidth = css`\n\t${from.leftCol} {\n\t\twidth: 120px;\n\t\t/* use absolute position here to allow the article text to push up alongside\n           the caption when it is limited in width */\n\t\tposition: absolute;\n\t}\n\t${from.wide} {\n\t\twidth: 184px;\n\t}\n`;\n\nconst captionPadding = css`\n\tpadding-left: 8px;\n\tpadding-right: 8px;\n`;\n\nconst tabletCaptionPadding = css`\n\t${until.desktop} {\n\t\t${captionPadding}\n\t}\n`;\n\nconst videoPadding = css`\n\t${until.mobileLandscape} {\n\t\tmargin-left: 10px;\n\t}\n\t${between.mobileLandscape.and.phablet} {\n\t\tmargin-left: ${space[5]}px;\n\t}\n`;\n\nconst bigLeftMargin = css`\n\twidth: inherit;\n\tmargin-left: ${space[9]}px;\n\t${until.wide} {\n\t\tmargin-left: 20px;\n\t\tmargin-right: 20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: 10px;\n\t\tmargin-right: 10px;\n\t}\n`;\n\nconst hideIconBelowLeftCol = css`\n\t${until.leftCol} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst pictureRatio = (13 / 18) * 100;\nconst videoRatio = (23 / 36) * 100;\n\nconst iconStyle = (palette: Palette) => css`\n\tfill: ${palette.fill.cameraCaptionIcon};\n\tmargin-right: ${space[1]}px;\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 1em;\n\tvertical-align: baseline;\n\t::before {\n\t\tcontent: ' ';\n\t\tdisplay: block;\n\t\tpadding-top: ${pictureRatio}%;\n\t}\n\tsvg {\n\t\ttop: 0px;\n\t\tright: 0px;\n\t\tbottom: 0px;\n\t\tleft: 0px;\n\t\twidth: 100%;\n\t\tposition: absolute;\n\t\theight: 100%;\n\t}\n`;\n\nconst videoIconStyle = css`\n\twidth: 1.1em;\n\t::before {\n\t\tpadding-top: ${videoRatio}%;\n\t}\n`;\n\nconst captionLink = (palette: Palette) => css`\n\ta {\n\t\tcolor: ${palette.text.captionLink};\n\t\ttext-decoration: none;\n\t}\n\ta:hover {\n\t\ttext-decoration: underline;\n\t}\n\tstrong {\n\t\tfont-weight: bold;\n\t}\n`;\n\nconst CameraIcon = ({ palette, format }: IconProps) => {\n\treturn (\n\t\t<span\n\t\t\tcss={[\n\t\t\t\ticonStyle(palette),\n\t\t\t\tformat.display === ArticleDisplay.Immersive &&\n\t\t\t\t\thideIconBelowLeftCol,\n\t\t\t]}\n\t\t>\n\t\t\t<CameraSvg />\n\t\t</span>\n\t);\n};\n\nconst VideoIcon = ({ palette, format }: IconProps) => {\n\treturn (\n\t\t<span\n\t\t\tcss={[\n\t\t\t\ticonStyle(palette),\n\t\t\t\tformat.display === ArticleDisplay.Immersive &&\n\t\t\t\t\thideIconBelowLeftCol,\n\t\t\t\tvideoIconStyle,\n\t\t\t]}\n\t\t>\n\t\t\t<VideoSvg />\n\t\t</span>\n\t);\n};\n\nexport const Caption = ({\n\tcaptionText,\n\tformat,\n\tpadCaption = false,\n\tcredit,\n\tdisplayCredit = true,\n\tshouldLimitWidth = false,\n\tisOverlaid,\n\tisLeftCol,\n\tmediaType = 'Gallery',\n\tisMainMedia = false,\n}: Props) => {\n\t// Sometimes captions come thorough as a single blank space, so we trim here to ignore those\n\tconst noCaption = !captionText?.trim();\n\tconst noCredit = !credit;\n\tconst hideCredit = !displayCredit;\n\tif (noCaption && (noCredit || hideCredit)) return null;\n\n\tconst palette = decidePalette(format);\n\tconst isBlog =\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog;\n\n\tconst defaultCaption = (\n\t\t<figcaption\n\t\t\tcss={[\n\t\t\t\tcaptionStyle(palette),\n\t\t\t\tshouldLimitWidth && limitedWidth,\n\t\t\t\tisOverlaid\n\t\t\t\t\t? overlaidStyles(palette, format)\n\t\t\t\t\t: bottomMarginStyles,\n\t\t\t\tisMainMedia && isBlog && tabletCaptionPadding,\n\t\t\t\tpadCaption && captionPadding,\n\t\t\t\tmediaType === 'Video' && videoPadding,\n\t\t\t]}\n\t\t>\n\t\t\t{mediaType === 'Video' ? (\n\t\t\t\t<VideoIcon palette={palette} format={format} />\n\t\t\t) : (\n\t\t\t\t<CameraIcon palette={palette} format={format} />\n\t\t\t)}\n\t\t\t{!!captionText && (\n\t\t\t\t<span\n\t\t\t\t\tcss={captionLink(palette)}\n\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t__html: captionText || '',\n\t\t\t\t\t}}\n\t\t\t\t\tkey=\"caption\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{!!credit && displayCredit && ` ${credit}`}\n\t\t</figcaption>\n\t);\n\n\tswitch (format.design) {\n\t\tcase ArticleDesign.PhotoEssay:\n\t\t\tif (format.theme === ArticleSpecial.Labs && isLeftCol) {\n\t\t\t\treturn defaultCaption;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<figcaption\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t${textSans.xxsmall({ lineHeight: 'tight' })};\n\t\t\t\t\t\t\tcolor: ${palette.text.caption};\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t\t\t\t\tli:not(:first-child) {\n\t\t\t\t\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tli {\n\t\t\t\t\t\t\t\tpadding-top: ${space[2]}px;\n\t\t\t\t\t\t\t\tborder-top: 1px solid ${palette.text.caption};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`,\n\t\t\t\t\t\tbottomMarginStyles,\n\t\t\t\t\t\tpadCaption && captionPadding,\n\t\t\t\t\t\tshouldLimitWidth && veryLimitedWidth,\n\t\t\t\t\t\tshouldLimitWidth && bigLeftMargin,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t{!!captionText && (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={captionLink(palette)}\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: captionText || '',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey=\"caption\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{!!credit && displayCredit && ` ${credit}`}\n\t\t\t\t</figcaption>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn defaultCaption;\n\t}\n};\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden, iconSize } from '@guardian/source-foundations';\n\nconst Svg = ({ size }) => (jsx(\"svg\", { width: size ? iconSize[size] : undefined, height: undefined, viewBox: \"-3 -3 30 30\", xmlns: \"http://www.w3.org/2000/svg\", focusable: false, \"aria-hidden\": true, children: jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-10.704 1.818h1.386l.659-8.636-.91-.91h-.885l-.91.91.66 8.636Zm2.068 3.637c0-.75-.614-1.364-1.364-1.364-.75 0-1.364.614-1.364 1.364 0 .75.614 1.363 1.364 1.363.75 0 1.364-.613 1.364-1.363Z\" }) }));\nconst SvgAlertRound = ({ size, isAnnouncedByScreenReader = false, }) => (jsxs(Fragment, { children: [jsx(Svg, { size: size }), isAnnouncedByScreenReader ? (jsx(\"span\", { css: css `\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`, children: \"Warning\" })) : ('')] }));\n\nexport { SvgAlertRound };\n//# sourceMappingURL=SvgAlertRound.js.map\n","import { css } from '@emotion/react';\nimport { YoutubeAtom } from '@guardian/atoms-rendering';\nimport type { ConsentState } from '@guardian/consent-management-platform/dist/types';\nimport { body, neutral, space } from '@guardian/source-foundations';\nimport { SvgAlertRound } from '@guardian/source-react-components';\nimport { useEffect, useState } from 'react';\nimport type { RoleType } from '../../types/content';\nimport { trackVideoInteraction } from '../browser/ga/ga';\nimport { record } from '../browser/ophan/ophan';\nimport { useAB } from '../lib/useAB';\nimport { Caption } from './Caption';\n\ntype Props = {\n\tid: string;\n\telementId: string;\n\tmediaTitle?: string;\n\taltText?: string;\n\tassetId: string;\n\texpired: boolean;\n\tformat: ArticleFormat;\n\trole: RoleType;\n\thideCaption?: boolean;\n\toverrideImage?: string;\n\tposterImage?: {\n\t\turl: string;\n\t\twidth: number;\n\t}[];\n\tadTargeting?: AdTargeting;\n\tisMainMedia?: boolean;\n\theight?: number;\n\twidth?: number;\n\tduration?: number; // in seconds\n\torigin?: string;\n\tstickyVideos: boolean;\n};\n\nconst expiredOverlayStyles = (overrideImage?: string) =>\n\toverrideImage\n\t\t? css`\n\t\t\t\theight: 0px;\n\t\t\t\tposition: relative;\n\t\t\t\tbackground-image: url(${overrideImage});\n\t\t\t\tbackground-size: cover;\n\t\t\t\tbackground-position: 49% 49%;\n\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\tpadding-bottom: 56%;\n\t\t\t\tcolor: ${neutral[100]};\n\t\t\t\tbackground-color: ${neutral[20]};\n\t\t  `\n\t\t: undefined;\n\nconst expiredTextWrapperStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\n\tpadding-top: ${space[4]}px;\n\tpadding-bottom: ${space[4]}px;\n\tpadding-left: ${space[1]}px;\n\tpadding-right: ${space[12]}px;\n\tcolor: ${neutral[100]};\n\tbackground-color: ${neutral[20]};\n`;\n\nconst expiredSVGWrapperStyles = css`\n\tpadding-right: ${space[1]}px;\n\tsvg {\n\t\twidth: ${space[12]}px;\n\t\theight: ${space[12]}px;\n\t\tfill: ${neutral[100]};\n\t}\n`;\n\nexport const YoutubeBlockComponent = ({\n\tid,\n\telementId,\n\tassetId,\n\tmediaTitle,\n\taltText,\n\tformat,\n\thideCaption,\n\toverrideImage,\n\tposterImage,\n\texpired,\n\trole,\n\tadTargeting,\n\tisMainMedia,\n\theight = 259,\n\twidth = 460,\n\tduration,\n\torigin,\n\tstickyVideos,\n}: Props) => {\n\tconst [consentState, setConsentState] = useState<ConsentState | undefined>(\n\t\tundefined,\n\t);\n\n\tconst abTests = useAB();\n\tconst abTestsApi = abTests?.api;\n\tconst imaEnabled =\n\t\tabTestsApi?.isUserInVariant('IntegrateIma', 'variant') ?? false;\n\tconst abTestParticipations = abTests?.participations ?? {};\n\n\tuseEffect(() => {\n\t\tconst defineConsentState = async () => {\n\t\t\tconst { onConsentChange } = await import(\n\t\t\t\t'@guardian/consent-management-platform'\n\t\t\t);\n\t\t\tonConsentChange((newConsent: ConsentState) => {\n\t\t\t\tsetConsentState(newConsent);\n\t\t\t});\n\t\t};\n\n\t\tdefineConsentState().catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\terror instanceof Error ? error : new Error(`Error: unknown`),\n\t\t\t\t'youtube-consent',\n\t\t\t);\n\t\t});\n\t}, []);\n\n\tconst shouldLimitWidth =\n\t\t!isMainMedia &&\n\t\t(role === 'showcase' || role === 'supporting' || role === 'immersive');\n\n\tif (expired) {\n\t\treturn (\n\t\t\t<figure\n\t\t\t\tcss={css`\n\t\t\t\t\tmargin-top: 16px;\n\t\t\t\t\tmargin-bottom: 16px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<div css={expiredOverlayStyles(overrideImage)}>\n\t\t\t\t\t<div css={expiredTextWrapperStyles}>\n\t\t\t\t\t\t<div css={expiredSVGWrapperStyles}>\n\t\t\t\t\t\t\t<SvgAlertRound />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t${body.medium({\n\t\t\t\t\t\t\t\t\tlineHeight: 'tight',\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tThis video has been removed. This could be because\n\t\t\t\t\t\t\tit launched early, our rights have expired, there\n\t\t\t\t\t\t\twas a legal issue, or for another reason.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{!hideCaption && (\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tcaptionText={mediaTitle ?? ''}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tdisplayCredit={false}\n\t\t\t\t\t\tshouldLimitWidth={shouldLimitWidth}\n\t\t\t\t\t\tmediaType=\"Video\"\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</figure>\n\t\t);\n\t}\n\n\tconst ophanTracking = (trackingEvent: string) => {\n\t\tif (!id) return;\n\t\trecord({\n\t\t\tvideo: {\n\t\t\t\tid: `gu-video-youtube-${id}`,\n\t\t\t\teventType: `video:content:${trackingEvent}`,\n\t\t\t},\n\t\t});\n\t};\n\n\tconst gaTracking = (trackingEvent: string) => {\n\t\tif (!id) return;\n\t\ttrackVideoInteraction({\n\t\t\ttrackingEvent,\n\t\t\telementId: id,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div data-chromatic=\"ignore\" data-component=\"youtube-atom\">\n\t\t\t<YoutubeAtom\n\t\t\t\telementId={elementId}\n\t\t\t\tvideoId={assetId}\n\t\t\t\toverrideImage={\n\t\t\t\t\toverrideImage\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsrcSet: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tsrc: overrideImage,\n\t\t\t\t\t\t\t\t\t\t\twidth: 500, // we do not have width for overlayImage so set a random number\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\tposterImage={\n\t\t\t\t\tposterImage\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsrcSet: posterImage.map((img) => ({\n\t\t\t\t\t\t\t\t\t\tsrc: img.url,\n\t\t\t\t\t\t\t\t\t\twidth: img.width,\n\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\trole={role}\n\t\t\t\talt={altText ?? mediaTitle ?? ''}\n\t\t\t\tadTargeting={adTargeting}\n\t\t\t\tconsentState={consentState}\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t\ttitle={mediaTitle}\n\t\t\t\tduration={duration}\n\t\t\t\teventEmitters={[ophanTracking, gaTracking]}\n\t\t\t\tpillar={format.theme}\n\t\t\t\torigin={process.env.NODE_ENV === 'development' ? '' : origin}\n\t\t\t\tshouldStick={stickyVideos}\n\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\timaEnabled={imaEnabled}\n\t\t\t\tabTestParticipations={abTestParticipations}\n\t\t\t/>\n\t\t\t{!hideCaption && (\n\t\t\t\t<Caption\n\t\t\t\t\tcaptionText={mediaTitle ?? ''}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tdisplayCredit={false}\n\t\t\t\t\tshouldLimitWidth={shouldLimitWidth}\n\t\t\t\t\tmediaType=\"Video\"\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","import type { ABTestAPI, Participations } from '@guardian/ab-core';\nimport { mutate } from 'swr';\nimport useSWRImmutable from 'swr/immutable';\n\ntype ABTests = {\n\tapi: ABTestAPI;\n\tparticipations: Participations;\n};\n\nconst apiPromise = new Promise<ABTests>(() => {});\nconst key = 'ab-tests';\n\n/**\n * A hook which returns the AB Test Api when available,\n * or undefined otherwise.\n *\n * Leverages an immutable SWR to satisfy all requests to the\n * AB Core. As soon as the tests are available, all instances of\n * the useAB hook will render.\n */\nexport const useAB = (): ABTests | undefined => {\n\tconst { data } = useSWRImmutable(key, () => apiPromise);\n\treturn data;\n};\n\nexport const setABTests = ({ api, participations }: ABTests): void => {\n\tvoid mutate(key, { api, participations }, false);\n};\n","var ArticleDisplay;\n(function (ArticleDisplay) {\n    ArticleDisplay[ArticleDisplay[\"Standard\"] = 0] = \"Standard\";\n    ArticleDisplay[ArticleDisplay[\"Immersive\"] = 1] = \"Immersive\";\n    ArticleDisplay[ArticleDisplay[\"Showcase\"] = 2] = \"Showcase\";\n    ArticleDisplay[ArticleDisplay[\"NumberedList\"] = 3] = \"NumberedList\";\n})(ArticleDisplay || (ArticleDisplay = {}));\n\nexport { ArticleDisplay };\n//# sourceMappingURL=ArticleDisplay.js.map\n"],"names":["module","exports","h","svg","props","content","attributes","Object","assign","dangerouslySetInnerHTML","__html","children","desvg","React","bind","createElement","captionStyle","palette","css","textSans","text","caption","bottomMarginStyles","overlaidStyles","format","overlaidCaption","display","ArticleDisplay","design","ArticleDesign","overlaidBottomPadding","limitedWidth","from","veryLimitedWidth","captionPadding","tabletCaptionPadding","until","videoPadding","between","space","bigLeftMargin","hideIconBelowLeftCol","iconStyle","fill","cameraCaptionIcon","videoIconStyle","captionLink","CameraIcon","span","CameraSvg","VideoIcon","VideoSvg","Caption","captionText","padCaption","credit","displayCredit","shouldLimitWidth","isOverlaid","isLeftCol","mediaType","isMainMedia","trim","decidePalette","isBlog","defaultCaption","figcaption","theme","ArticleSpecial","lineHeight","Svg","size","jsx","width","iconSize","undefined","height","viewBox","xmlns","focusable","fillRule","clipRule","d","SvgAlertRound","isAnnouncedByScreenReader","jsxs","Fragment","visuallyHidden","expiredOverlayStyles","overrideImage","neutral","expiredTextWrapperStyles","expiredSVGWrapperStyles","YoutubeBlockComponent","id","elementId","assetId","mediaTitle","altText","hideCaption","posterImage","expired","role","adTargeting","duration","origin","stickyVideos","consentState","setConsentState","useState","abTests","useAB","abTestsApi","api","imaEnabled","isUserInVariant","abTestParticipations","participations","useEffect","async","onConsentChange","newConsent","defineConsentState","catch","error","window","guardian","modules","sentry","reportError","Error","figure","div","p","body","data-chromatic","data-component","YoutubeAtom","videoId","srcSet","src","map","img","url","alt","title","eventEmitters","trackingEvent","record","video","eventType","trackVideoInteraction","pillar","shouldStick","apiPromise","Promise","key","data","useSWRImmutable","setABTests","mutate"],"sourceRoot":""}