{"version":3,"file":"CalloutBlockComponent-importable.modern.a0c8568622f9034c2445.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/components/Callout/FormField.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/Callout/CalloutComponents.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/Callout/Form.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/Callout/MessageUs.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/Callout/Callout.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/Callout/Deadline.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/CalloutBlockComponent.importable.tsx"],"sourcesContent":["import {\n\tCheckbox,\n\tCheckboxGroup,\n\tOption,\n\tRadio,\n\tRadioGroup,\n\tSelect,\n\tTextArea,\n\tTextInput,\n} from '@guardian/source-react-components';\nimport { FileInput } from '@guardian/source-react-components-development-kitchen';\nimport { useEffect, useRef } from 'react';\nimport type {\n\tCampaignFieldType,\n\tMessageUsFieldType,\n} from '../../../types/content';\n\ntype FormDataType = { [key in string]: any };\n\ntype FormFieldProp = {\n\tvalidationErrors: { [key in string]: string };\n\tformField: CampaignFieldType | MessageUsFieldType;\n\tformData: FormDataType;\n\tpageId: string;\n\tsetFieldInFormData: (\n\t\tid: string,\n\t\tdata: string | string[] | undefined,\n\t) => void;\n};\n\nexport const FormField = ({\n\tformField,\n\tformData,\n\tsetFieldInFormData,\n\tpageId,\n\tvalidationErrors,\n}: FormFieldProp) => {\n\tconst { type, label, hideLabel, description, required, id } = formField;\n\n\tconst name = `field_${type}_${id}`;\n\tconst fieldValue =\n\t\tformField.id in formData ? (formData[formField.id] as string) : '';\n\tconst fieldError = validationErrors[formField.id];\n\n\tconst firstUpdate = useRef(true);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tfirstUpdate.current &&\n\t\t\tformField.hidden &&\n\t\t\tformField.type === 'text'\n\t\t) {\n\t\t\tsetFieldInFormData(formField.id, pageId);\n\t\t\tfirstUpdate.current = false;\n\t\t}\n\t}, [formField, pageId, setFieldInFormData]);\n\n\tswitch (formField.type) {\n\t\tcase 'phone':\n\t\tcase 'email':\n\t\tcase 'text': {\n\t\t\tif (formField.hidden) return null;\n\t\t\treturn (\n\t\t\t\t<TextInput\n\t\t\t\t\tname={name}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\tvalue={fieldValue}\n\t\t\t\t\terror={fieldError}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t\ttype={formField.type}\n\t\t\t\t\tonChange={(e): void =>\n\t\t\t\t\t\tsetFieldInFormData(formField.id, e.target.value)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tcase 'textarea':\n\t\t\treturn (\n\t\t\t\t<TextArea\n\t\t\t\t\tname={name}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\tvalue={fieldValue}\n\t\t\t\t\terror={fieldError}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t\tonChange={(e): void =>\n\t\t\t\t\t\tsetFieldInFormData(formField.id, e.target.value)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'file':\n\t\t\treturn (\n\t\t\t\t<FileInput\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\terror={fieldError}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t\tonUpload={(file: string | undefined): void =>\n\t\t\t\t\t\tsetFieldInFormData(formField.id, file)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'select':\n\t\t\treturn (\n\t\t\t\t<Select\n\t\t\t\t\tname={name}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\tvalue={fieldValue}\n\t\t\t\t\terror={fieldError}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t\tonChange={(e): void =>\n\t\t\t\t\t\tsetFieldInFormData(formField.id, e.target.value)\n\t\t\t\t\t}\n\t\t\t\t\tchildren={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'default',\n\t\t\t\t\t\t\tlabel: 'Please choose an option',\n\t\t\t\t\t\t},\n\t\t\t\t\t]\n\t\t\t\t\t\t.concat(formField.options)\n\t\t\t\t\t\t.map(({ value, label: formLabel }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Option key={value} value={value}>\n\t\t\t\t\t\t\t\t\t{formLabel}\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'checkbox':\n\t\t\treturn (\n\t\t\t\t<CheckboxGroup\n\t\t\t\t\tname={name}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\terror={fieldError ? fieldError : undefined}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t>\n\t\t\t\t\t{formField.options.map((option) => {\n\t\t\t\t\t\tconst selectedCheckboxesArray: string[] =\n\t\t\t\t\t\t\tformData[formField.id] ?? [];\n\n\t\t\t\t\t\tconst isCheckboxChecked =\n\t\t\t\t\t\t\t!!selectedCheckboxesArray.find(\n\t\t\t\t\t\t\t\t(ele: string) => ele === option.value,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst filterOutCheckboxFromArray = () =>\n\t\t\t\t\t\t\tselectedCheckboxesArray.filter(\n\t\t\t\t\t\t\t\t(ele: string) => ele !== option.value,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst addCheckboxToArray = () => [\n\t\t\t\t\t\t\t...selectedCheckboxesArray,\n\t\t\t\t\t\t\toption.value,\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\tkey={option.value}\n\t\t\t\t\t\t\t\tlabel={option.label}\n\t\t\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\t\t\tchecked={isCheckboxChecked}\n\t\t\t\t\t\t\t\terror={fieldError ? true : false}\n\t\t\t\t\t\t\t\tdata-testid={`form-field-${option.value}`}\n\t\t\t\t\t\t\t\tonChange={(): void =>\n\t\t\t\t\t\t\t\t\tsetFieldInFormData(\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tisCheckboxChecked\n\t\t\t\t\t\t\t\t\t\t\t? filterOutCheckboxFromArray()\n\t\t\t\t\t\t\t\t\t\t\t: addCheckboxToArray(),\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</CheckboxGroup>\n\t\t\t);\n\t\tcase 'radio':\n\t\t\treturn (\n\t\t\t\t<RadioGroup\n\t\t\t\t\tlabel={formField.label}\n\t\t\t\t\tsupporting={formField.description}\n\t\t\t\t\terror={validationErrors[formField.id]}\n\t\t\t\t\tname={formField.name}\n\t\t\t\t\torientation={\n\t\t\t\t\t\tformField.options.length > 2 ? 'vertical' : 'horizontal'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{formField.options.map((option, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Radio\n\t\t\t\t\t\t\t\tdata-testid={`form-field-${option.value}`}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tlabel={option.label}\n\t\t\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\t\t\tname={`${formField.id}`}\n\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\tformField.id in formData &&\n\t\t\t\t\t\t\t\t\tformData[formField.id] === option.value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={(e): void =>\n\t\t\t\t\t\t\t\t\tsetFieldInFormData(\n\t\t\t\t\t\t\t\t\t\tformField.id,\n\t\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</RadioGroup>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n","import { css } from '@emotion/react';\nimport {\n\tbody,\n\tbrand,\n\tneutral,\n\tpalette,\n\tspace,\n\tsuccess,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport {\n\tButton,\n\tSvgShare,\n\tSvgTickRound,\n} from '@guardian/source-react-components';\nimport { useState } from 'react';\nimport type { Palette } from '../../../types/palette';\nimport { decidePalette } from '../../lib/decidePalette';\n\n/* stylelint-disable-next-line color-no-hex */\nconst linkDecorationColour = '#12121240';\n\nexport const calloutLinkStyles = css`\n\ta {\n\t\tcolor: ${brand[500]};\n\t\ttext-decoration: none;\n\t\tborder-bottom: 1px solid ${linkDecorationColour};\n\t}\n\ta:hover,\n\ta:active {\n\t\tborder-bottom: 1px solid ${brand[500]};\n\t}\n`;\n\nconst descriptionStyles = (useBrandColour: boolean) => css`\n\t${!useBrandColour && calloutLinkStyles}\n\tpadding-bottom: ${space[4]}px;\n\t${body.medium()}\n\n\tp {\n\t\tmargin-bottom: ${space[3]}px;\n\t}\n`;\n\nexport const CalloutDescription = ({\n\tdescription,\n\tuseBrandColour,\n}: {\n\tdescription: string;\n\tuseBrandColour: boolean;\n}) => {\n\t// this data-ignore attribute ensures correct formatting for links when the callout is collapsible\n\tconst htmlSplit = description.split('href');\n\tconst withDataIgnore = htmlSplit.join(\n\t\t'data-ignore=\"global-link-styling\" href',\n\t);\n\treturn (\n\t\t<div css={descriptionStyles(useBrandColour)}>\n\t\t\t<div\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: useBrandColour ? description : withDataIgnore,\n\t\t\t\t}}\n\t\t\t></div>\n\t\t\t<div>\n\t\t\t\tPlease share your story if you are 18 or over, anonymously if\n\t\t\t\tyou wish. For more information please see our{' '}\n\t\t\t\t<a\n\t\t\t\t\tdata-ignore={!useBrandColour && 'global-link-styling'}\n\t\t\t\t\thref=\"https://www.theguardian.com/help/terms-of-service\"\n\t\t\t\t>\n\t\t\t\t\tterms of service\n\t\t\t\t</a>{' '}\n\t\t\t\tand{' '}\n\t\t\t\t<a\n\t\t\t\t\tdata-ignore={!useBrandColour && 'global-link-styling'}\n\t\t\t\t\thref=\"https://www.theguardian.com/help/privacy-policy\"\n\t\t\t\t>\n\t\t\t\t\tprivacy policy\n\t\t\t\t</a>\n\t\t\t\t.\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst expiredStyles = css`\n\t${textSans.small()};\n\tcolor: ${palette.brand};\n\tbackground-color: ${palette.brandAlt[400]};\n\twidth: fit-content;\n`;\n\nexport const CalloutExpired = () => {\n\treturn (\n\t\t<div css={expiredStyles}>\n\t\t\t<p>This callout is now closed to any further submissions.</p>\n\t\t\t<p>\n\t\t\t\tYou can see{' '}\n\t\t\t\t<a href=\"https://www.theguardian.com/profile/guardian-community-team\">\n\t\t\t\t\tother Guardian community callouts here\n\t\t\t\t</a>{' '}\n\t\t\t\tor{' '}\n\t\t\t\t<a href=\"https://www.theguardian.com/community/2015/sep/02/guardianwitness-send-us-a-story\">\n\t\t\t\t\ttell us about a story here.\n\t\t\t\t</a>\n\t\t\t</p>\n\t\t</div>\n\t);\n};\n\nconst shareCalloutStyles = css`\n\tdisplay: flex;\n\talign-items: center;\n\tposition: relative;\n`;\n\nconst shareCalloutTextStyles = css`\n\t${textSans.xsmall()}\n`;\n\nconst shareCalloutLinkStyles = (\n\tuseBrandColour: boolean,\n\tbrandPalette: Palette,\n) => css`\n\t${textSans.xsmall()}\n\tcolor: ${useBrandColour ? brandPalette.text.articleLink : brand[500]};\n\tborder-bottom: 1px solid ${linkDecorationColour};\n\ttext-decoration: none;\n\ttransition: none;\n\t:hover,\n\t:active {\n\t\tborder-bottom: 1px solid\n\t\t\t${useBrandColour\n\t\t\t\t? brandPalette.border.articleLinkHover\n\t\t\t\t: brand[500]};\n\t}\n`;\n\nconst sharePopupStyles = css`\n\t${textSans.xsmall()};\n\tposition: absolute;\n\tdisplay: flex;\n\talign-items: center;\n\tmin-width: 180px;\n\ttransform: translate(100%, 0);\n\tbackground-color: ${neutral[100]};\n\tcolor: ${neutral[7]};\n\tfont-weight: normal;\n\tborder-radius: ${space[1]}px;\n\tz-index: 1;\n\tpadding: 0 ${space[1]}px 0 0;\n\tbox-shadow: 0px 2px ${space[2]}px rgba(0, 0, 0, 0.5);\n\n\t> svg {\n\t\tfill: ${success[400]};\n\t}\n`;\nconst shareIconStyles = (useBrandColour: boolean, brandPalette: Palette) => css`\n\tdisplay: inline-flex;\n\tmargin-right: ${space[2]}px;\n\tborder-radius: 50%;\n\tborder: 1px solid\n\t\t${useBrandColour ? brandPalette.text.articleLink : brand[500]};\n\tbox-sizing: border-box;\n\tfill: ${useBrandColour ? brandPalette.text.articleLink : brand[500]};\n\tpadding: 0.5px 0;\n`;\n\nexport const CalloutShare = ({\n\ttitle,\n\turlAnchor,\n\tuseBrandColour,\n\tformat,\n}: {\n\ttitle?: string;\n\turlAnchor: string;\n\tuseBrandColour: boolean;\n\tformat: ArticleFormat;\n}) => {\n\tconst [isCopied, setIsCopied] = useState(false);\n\tconst brandPalette = decidePalette(format);\n\n\tconst onShare = async () => {\n\t\tconst url = window.location.href;\n\t\tif (\n\t\t\t'share' in navigator &&\n\t\t\t/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n\t\t\t\tnavigator.userAgent,\n\t\t\t)\n\t\t) {\n\t\t\tlet shareTitle = `Share your experience`;\n\t\t\tif (title) shareTitle += `: ${title}`;\n\n\t\t\tconst shareText = `\n\t\t\tI saw this callout in an article: ${url}#${urlAnchor}\n\t\t\tYou can share your story by using the form on this article, or by contacting the Guardian on WhatsApp, Signal or Telegram.`;\n\n\t\t\tawait navigator.share({\n\t\t\t\ttitle: shareTitle,\n\t\t\t\ttext: shareText,\n\t\t\t});\n\t\t\tsetIsCopied(true);\n\t\t\tsetTimeout(() => setIsCopied(false), 3000);\n\t\t} else if ('clipboard' in navigator) {\n\t\t\tawait navigator.clipboard.writeText(`${url}#${urlAnchor}`);\n\t\t\tsetIsCopied(true);\n\t\t\tsetTimeout(() => setIsCopied(false), 3000);\n\t\t}\n\t};\n\n\tif (typeof window === 'undefined' || typeof navigator === 'undefined')\n\t\treturn <></>;\n\n\treturn (\n\t\t<>\n\t\t\t<div css={shareCalloutStyles}>\n\t\t\t\t<span css={shareIconStyles(useBrandColour, brandPalette)}>\n\t\t\t\t\t<SvgShare size=\"small\" />\n\t\t\t\t</span>\n\t\t\t\t<div css={shareCalloutTextStyles}>\n\t\t\t\t\tKnow others who are affected?{' '}\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\t\tonClick={onShare}\n\t\t\t\t\t\tcssOverrides={shareCalloutLinkStyles(\n\t\t\t\t\t\t\tuseBrandColour,\n\t\t\t\t\t\t\tbrandPalette,\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\tPlease share this callout.\n\t\t\t\t\t</Button>\n\t\t\t\t\t{isCopied && (\n\t\t\t\t\t\t<span css={sharePopupStyles} role=\"alert\">\n\t\t\t\t\t\t\t<SvgTickRound size=\"medium\" />\n\t\t\t\t\t\t\tLink copied to clipboard\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nconst termsAndConditionsStyles = css`\n\t${calloutLinkStyles}\n\t${textSans.small()}\n\tpadding-bottom: ${space[4]}px;\n`;\n\nexport const CalloutTermsAndConditions = () => (\n\t<div css={termsAndConditionsStyles}>\n\t\tYour responses, which can be anonymous, are secure as the form is\n\t\tencrypted and only the Guardian has access to your contributions. We\n\t\twill only use the data you provide us for the purpose of the feature and\n\t\twe will delete any personal data when we no longer require it for this\n\t\tpurpose. For true anonymity please use our{' '}\n\t\t<a\n\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\thref=\"https://www.theguardian.com/securedrop\"\n\t\t>\n\t\t\tSecureDrop\n\t\t</a>{' '}\n\t\tservice instead.\n\t</div>\n);\n","import { css } from '@emotion/react';\nimport {\n\theadline,\n\tpalette,\n\tspace,\n\tsuccess,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { Button, SvgTickRound } from '@guardian/source-react-components';\nimport { ErrorSummary } from '@guardian/source-react-components-development-kitchen';\nimport { useState } from 'react';\nimport type { CampaignFieldType } from '../../../types/content';\nimport { CalloutTermsAndConditions } from './CalloutComponents';\nimport { FormField } from './FormField';\n\nconst textStyles = css`\n\t${textSans.xsmall()};\n\tpadding-bottom: 16px;\n`;\n\nconst successStyles = css`\n\t${textSans.xsmall()};\n\tpadding-bottom: 44px;\n`;\n\nconst tickBoxStyles = css`\n\tfill: ${success[400]};\n\twidth: 48px;\n`;\nconst errorTextStyles = css`\n\tcolor: ${palette.error[400]};\n\t${textSans.medium({ fontWeight: 'bold' })};\n\tdisplay: flex;\n`;\n\nconst formStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n`;\n\nconst formFieldWrapperStyles = (hidden: boolean) => css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: ${hidden ? 0 : space[4]}px;\n`;\nconst submitButtonStyles = css`\n\tmargin: 20px 0px;\n\twidth: 100%;\n\tdisplay: block;\n`;\n\nconst footerPaddingStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tpadding-bottom: ${space[4]}px;\n`;\n\ntype FormDataType = { [key in string]: any };\n\ntype FormProps = {\n\tformFields: CampaignFieldType[];\n\tsubmissionURL: string;\n\tformID: string;\n\tpageId: string;\n};\n\nexport const Form = ({\n\tformFields,\n\tsubmissionURL,\n\tformID,\n\tpageId,\n}: FormProps) => {\n\tconst [formData, setFormData] = useState<FormDataType>({});\n\tconst [validationErrors, setValidationErrors] = useState<{\n\t\t[key in string]: string;\n\t}>({});\n\n\tconst [networkError, setNetworkError] = useState('');\n\tconst [submissionSuccess, setSubmissionSuccess] = useState(false);\n\tconst [twitterHandle, setTwitterHandle] = useState('');\n\n\tconst setFieldInFormData = (\n\t\tid: string,\n\t\tdata: string | string[] | undefined,\n\t): void => {\n\t\tconst currentErrors = validationErrors;\n\t\tcurrentErrors[id] = '';\n\t\tsetValidationErrors(currentErrors);\n\n\t\tsetFormData({\n\t\t\t...formData,\n\t\t\t[id]: data,\n\t\t});\n\t};\n\n\tconst validateForm = (): boolean => {\n\t\tconst errors: { [key in string]: string } = {};\n\t\tlet isValid = true;\n\t\tformFields.forEach((field: CampaignFieldType) => {\n\t\t\tif (field.required && !formData[field.id]) {\n\t\t\t\terrors[field.id] = 'This field is required';\n\t\t\t\tisValid = false;\n\t\t\t}\n\t\t\tif (field.type === 'select' && field.required) {\n\t\t\t\tif (formData[field.id] === 'Please choose an option') {\n\t\t\t\t\terrors[field.id] =\n\t\t\t\t\t\t'Please choose an option from the dropdown menu';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (field.id === 'email' && formData[field.id]) {\n\t\t\t\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\t\t\t\tif (!emailRegex.test(formData[field.id] as string)) {\n\t\t\t\t\terrors[field.id] = 'Please enter a valid email address';\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (\n\t\t\t\t['number', 'phone'].includes(field.type) &&\n\t\t\t\tformData[field.id]\n\t\t\t) {\n\t\t\t\tconst numberRegex = /^[\\d ()+-]+$/;\n\t\t\t\tif (!numberRegex.test(formData[field.id] as string)) {\n\t\t\t\t\terrors[field.id] = 'Please enter a valid number';\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t\tconst noWhiteSpace = formData[field.id] as string;\n\t\t\t\tif (noWhiteSpace.length < 10) {\n\t\t\t\t\terrors[field.id] = 'Please include your dialling/area code';\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn isValid;\n\t\t});\n\t\tsetValidationErrors(errors);\n\t\treturn Object.keys(errors).length === 0;\n\t};\n\n\tconst cleanFormData = (data: undefined | string | string[]) => {\n\t\tif (Array.isArray(data)) {\n\t\t\treturn data.join('\\n');\n\t\t}\n\n\t\treturn data;\n\t};\n\n\tconst submitForm = async (form: FormDataType) => {\n\t\tsetNetworkError('');\n\n\t\tif (formData.twitterHandle) {\n\t\t\tsetNetworkError('Sorry we think you are a robot.');\n\t\t\treturn;\n\t\t}\n\t\t// need to add prefix `field_` to all keys in form, required by formstack\n\t\tconst formDataWithFieldPrefix = Object.keys(formData).reduce(\n\t\t\t(acc, cur) => ({\n\t\t\t\t...acc,\n\t\t\t\t[`field_${cur}`]: cleanFormData(form[cur]),\n\t\t\t}),\n\t\t\t{},\n\t\t);\n\t\treturn fetch(submissionURL, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({\n\t\t\t\tformId: formID,\n\t\t\t\t...formDataWithFieldPrefix,\n\t\t\t}),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t},\n\t\t})\n\t\t\t.then((resp) => {\n\t\t\t\tif (resp.status === 201) {\n\t\t\t\t\tsetSubmissionSuccess(true);\n\t\t\t\t} else {\n\t\t\t\t\tsetNetworkError(\n\t\t\t\t\t\t'Sorry, there was a problem submitting your form. Please try again later.',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((respError) => {\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\trespError,\n\t\t\t\t\t'callout-embed-submission',\n\t\t\t\t);\n\n\t\t\t\tsetNetworkError(\n\t\t\t\t\t'Sorry, there was a problem submitting your form. Please try again later.',\n\t\t\t\t);\n\t\t\t});\n\t};\n\n\tif (submissionSuccess) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div css={tickBoxStyles}>\n\t\t\t\t\t<SvgTickRound />\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${headline.xxsmall({ fontWeight: 'bold' })}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\tThank you!\n\t\t\t\t</div>\n\t\t\t\t<div css={successStyles}>\n\t\t\t\t\tYour story has been submitted successfully. One of our\n\t\t\t\t\tjournalists will be in touch if we wish to take your\n\t\t\t\t\tsubmission further.\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<CalloutTermsAndConditions />\n\t\t\t<form\n\t\t\t\taction=\"/formstack-campaign/submit\"\n\t\t\t\tmethod=\"post\"\n\t\t\t\tcss={formStyles}\n\t\t\t\tnoValidate={true}\n\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tconst isValid = validateForm();\n\t\t\t\t\tif (!isValid) {\n\t\t\t\t\t\tconst firstInvalidFormElement: HTMLInputElement =\n\t\t\t\t\t\t\tdocument.querySelectorAll(\n\t\t\t\t\t\t\t\t':invalid',\n\t\t\t\t\t\t\t)[1] as HTMLInputElement;\n\t\t\t\t\t\tfirstInvalidFormElement.focus();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvoid submitForm(formData);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{Object.values(validationErrors).filter((err) => err !== '')\n\t\t\t\t\t.length > 0 && (\n\t\t\t\t\t<ErrorSummary\n\t\t\t\t\t\tmessage=\"Some information is missing.\"\n\t\t\t\t\t\tcontext=\"Please complete all required fields.\"\n\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\twidth: fit-content;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tmargin-bottom: ${space[4]}px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{formFields.map((formField) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={formFieldWrapperStyles(!!formField.hidden)}\n\t\t\t\t\t\t\tkey={formField.id}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\t\tformField={formField}\n\t\t\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\t\t\tsetFieldInFormData={setFieldInFormData}\n\t\t\t\t\t\t\t\tvalidationErrors={validationErrors}\n\t\t\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t<div css={textStyles}>\n\t\t\t\t\tBy submitting your response, you are agreeing to share your\n\t\t\t\t\tdetails with us for this feature.\n\t\t\t\t</div>\n\t\t\t\t{/* this element is a H O N £ Y - P 0 T */}\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: -62.5rem;\n\t\t\t\t\t`}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"twitter-handle\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tid=\"twitter-handle\"\n\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\tplaceholder=\"@mytwitterhandle\"\n\t\t\t\t\t\tvalue={twitterHandle}\n\t\t\t\t\t\tonChange={(e) => setTwitterHandle(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{!!networkError && (\n\t\t\t\t\t<div css={errorTextStyles}>{networkError}</div>\n\t\t\t\t)}\n\t\t\t\t<div css={footerPaddingStyles}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tcssOverrides={submitButtonStyles}\n\t\t\t\t\t>\n\t\t\t\t\t\tSubmit\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { space, textSans } from '@guardian/source-foundations';\nimport {\n\tLinkButton,\n\tSvgSignalBrand,\n\tSvgTelegramBrand,\n\tSvgWhatsAppBrand,\n} from '@guardian/source-react-components';\nimport type { FC, ReactElement } from 'react';\nimport type { CalloutContactType } from '../../../types/content';\nimport { calloutLinkStyles } from './CalloutComponents';\n\nconst calloutPrimaryButtonStyles = css`\n\twidth: 100%;\n\tjustify-content: center;\n\tmargin-top: ${space[4]}px;\n\n\t:last-of-type {\n\t\tmargin-bottom: ${space[6]}px;\n\t}\n`;\n\nconst infoStyles = css`\n\t${calloutLinkStyles}\n\tmargin-bottom: ${space[2]}px;\n\t${textSans.xsmall()};\n`;\n\nexport const formatContactType = (s: string): string =>\n\ts.toLowerCase() === 'whatsapp'\n\t\t? 'WhatsApp'\n\t\t: s.charAt(0).toUpperCase() + s.slice(1);\n\nexport const conditionallyRenderContactIcon = (name: string): ReactElement => {\n\tswitch (name.toLowerCase()) {\n\t\tcase 'whatsapp':\n\t\t\treturn <SvgWhatsAppBrand size=\"small\" />;\n\t\tcase 'signal':\n\t\t\treturn <SvgSignalBrand size=\"small\" />;\n\t\tcase 'telegram':\n\t\t\treturn <SvgTelegramBrand size=\"small\" />;\n\t\tdefault:\n\t\t\treturn <></>;\n\t}\n};\n\nexport const formatContactNumbers = (\n\tcontacts: CalloutContactType[],\n): string => {\n\tconst contactNumbers = new Map<string, string[]>();\n\n\t// Group each contact by its value, so we can display multiple names for the same number.\n\tcontacts.forEach(({ name, value }) => {\n\t\tif (!contactNumbers.has(value)) contactNumbers.set(value, []);\n\t\tcontactNumbers.get(value)?.push(name);\n\t});\n\n\t// Join the names for each number together,\n\t// and then join all the numbers together into a readable string.\n\treturn [...contactNumbers.entries()].reduce(\n\t\t(acc, [value, names], index) => {\n\t\t\tconst namesString = names\n\t\t\t\t.map((name) => formatContactType(name))\n\t\t\t\t.join(' or ');\n\t\t\treturn (\n\t\t\t\tacc + (index === 0 ? '' : ' or ') + `${namesString} at ${value}`\n\t\t\t);\n\t\t},\n\t\t'Contact us on ',\n\t);\n};\n\nconst Disclaimer: FC<{ contacts: CalloutContactType[] }> = ({ contacts }) => {\n\tconst contactText = (\n\t\t<p css={infoStyles}>{formatContactNumbers(contacts)}.</p>\n\t);\n\n\t// If any of the contacts have guidance, display it in a readable string.\n\tconst guidanceText = (\n\t\t<span>\n\t\t\tFor more information, please see our guidance on{' '}\n\t\t\t{contacts.map(\n\t\t\t\t(contact, i) =>\n\t\t\t\t\tcontact.guidance && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\thref={contact.guidance}\n\t\t\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tcontacting us via{' '}\n\t\t\t\t\t\t\t\t{formatContactType(contact.name)}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t{i === contacts.length - 1 ? '.' : ', '}\n\t\t\t\t\t\t</>\n\t\t\t\t\t),\n\t\t\t)}\n\t\t</span>\n\t);\n\n\tconst secureDropText = (\n\t\t<span>\n\t\t\tFor true anonymity please use our{' '}\n\t\t\t<a\n\t\t\t\thref=\"https://www.theguardian.com/securedrop\"\n\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t>\n\t\t\t\tSecureDrop\n\t\t\t</a>{' '}\n\t\t\tservice instead.\n\t\t</span>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{contactText}\n\t\t\t<p css={infoStyles}>\n\t\t\t\t{contacts.some((c) => !!c.guidance) && guidanceText}{' '}\n\t\t\t\t{secureDropText}\n\t\t\t</p>\n\t\t</>\n\t);\n};\n\nconst MessageUs: FC<{ contacts: CalloutContactType[] }> = ({ contacts }) => {\n\treturn (\n\t\t<div className=\"js-message-us-tab\">\n\t\t\t<Disclaimer contacts={contacts} />\n\n\t\t\t{contacts.map((contact, i) =>\n\t\t\t\t!!contact.urlPrefix && !!contact.value ? (\n\t\t\t\t\t<LinkButton\n\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tcss={calloutPrimaryButtonStyles}\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\thref={`${contact.urlPrefix}${contact.value}`}\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\ticon={conditionallyRenderContactIcon(contact.name)}\n\t\t\t\t\t>\n\t\t\t\t\t\tMessage us on {formatContactType(contact.name)}\n\t\t\t\t\t</LinkButton>\n\t\t\t\t) : (\n\t\t\t\t\t<></>\n\t\t\t\t),\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport { MessageUs };\n","import { css } from '@emotion/react';\nimport { brand, headline, neutral, space } from '@guardian/source-foundations';\nimport { Tabs } from '@guardian/source-react-components-development-kitchen';\nimport { useState } from 'react';\nimport type {\n\tCalloutContactType,\n\tCampaignFieldType,\n} from '../../../types/content';\nimport { CalloutDescription, CalloutShare } from './CalloutComponents';\nimport { Form } from './Form';\nimport { conditionallyRenderContactIcon, MessageUs } from './MessageUs';\n\nconst summaryContentWrapper = (isNonCollapsible: boolean) => css`\n\tvisibility: visible;\n\tpadding-top: 2px;\n\tpadding-bottom: ${space[6]}px;\n\tpadding-left: ${isNonCollapsible ? 0 : space[2]}px;\n\tpadding-right: ${isNonCollapsible ? 0 : space[2]}px;\n`;\n\nconst promptStyles = (isNonCollapsible: boolean) => css`\n\t${headline.xxsmall({ fontWeight: 'bold' })};\n\tcolor: ${isNonCollapsible ? neutral[7] : brand[500]};\n`;\n\nconst subtitleTextHeaderStyles = css`\n\t${headline.xxsmall()}\n\tpadding-bottom: ${space[3]}px;\n`;\n\nconst tabTitle = css`\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n\tjustify-content: center;\n`;\n\nconst tabIcons = css`\n\tpadding-left: ${space[1]}px;\n\tdisplay: flex;\n\talign-items: center;\n`;\n\nexport interface CalloutBlockProps {\n\tprompt: string;\n\theading: string;\n\tdescription: string;\n\tformFields: CampaignFieldType[];\n\tformId: string;\n\tsubmissionURL: string;\n\tisExpired: boolean;\n\tisNonCollapsible: boolean;\n\tcontacts?: CalloutContactType[];\n\tpageId: string;\n\tformat: ArticleFormat;\n}\n\nexport const CalloutBlock = ({\n\tprompt,\n\theading,\n\tdescription,\n\tformFields,\n\tformId,\n\tsubmissionURL,\n\tisNonCollapsible,\n\tcontacts,\n\tpageId,\n\tformat,\n}: CalloutBlockProps) => {\n\tconst [selectedTab, setSelectedTab] = useState('form');\n\tconst shouldShowContacts = contacts && contacts.length > 0;\n\tconst shouldShowHeading = !!heading && !isNonCollapsible;\n\tconst tabsContent = [\n\t\t{\n\t\t\tid: 'form',\n\t\t\ttext: <div>Tell us here</div>,\n\t\t\tcontent: (\n\t\t\t\t<Form\n\t\t\t\t\tformFields={formFields}\n\t\t\t\t\tsubmissionURL={submissionURL}\n\t\t\t\t\tformID={formId}\n\t\t\t\t\tpageId={pageId}\n\t\t\t\t/>\n\t\t\t),\n\t\t},\n\t];\n\n\tif (shouldShowContacts) {\n\t\tconst tabsText = (\n\t\t\t<div css={tabTitle}>\n\t\t\t\t<div>Message us</div>\n\t\t\t\t<div css={tabIcons}>\n\t\t\t\t\t{contacts.map((c) =>\n\t\t\t\t\t\tconditionallyRenderContactIcon(c.name),\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t\ttabsContent.push({\n\t\t\tid: 'contact',\n\t\t\ttext: tabsText,\n\t\t\tcontent: <MessageUs contacts={contacts} />,\n\t\t});\n\t}\n\n\treturn (\n\t\t<div id={formId}>\n\t\t\t<div css={summaryContentWrapper(isNonCollapsible)}>\n\t\t\t\t{!!prompt && (\n\t\t\t\t\t<div css={promptStyles(isNonCollapsible)}>{prompt}</div>\n\t\t\t\t)}\n\t\t\t\t{shouldShowHeading && (\n\t\t\t\t\t<h4 css={subtitleTextHeaderStyles}>{heading}</h4>\n\t\t\t\t)}\n\t\t\t\t{!!description && (\n\t\t\t\t\t<CalloutDescription\n\t\t\t\t\t\tdescription={description}\n\t\t\t\t\t\tuseBrandColour={isNonCollapsible}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<CalloutShare\n\t\t\t\t\ttitle={heading}\n\t\t\t\t\turlAnchor={formId}\n\t\t\t\t\tuseBrandColour={isNonCollapsible}\n\t\t\t\t\tformat={format}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<Tabs\n\t\t\t\ttabsLabel=\"Tell us via online form or message us using your phone\"\n\t\t\t\ttabElement=\"button\"\n\t\t\t\ttabs={tabsContent}\n\t\t\t\tselectedTab={selectedTab}\n\t\t\t\tonTabChange={(tabName: string): void => {\n\t\t\t\t\tsetSelectedTab(tabName);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { palette, textSans, space } from '@guardian/source-foundations';\nimport { SvgClock } from '@guardian/source-react-components';\n\ntype Props = {\n\tuntil?: number;\n};\n\nconst deadlineStyles = css`\n\t${textSans.xxsmall()};\n\tbackground-color: ${palette.brandAlt[400]};\n\tright: 0;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding-right: ${space[1]}px;\n`;\n\nfunction getDaysBetween(first: Date, second: Date): number {\n\tconst ONE_DAY = 1000 * 3600 * 24;\n\treturn (second.getTime() - first.getTime()) / ONE_DAY;\n}\n\nconst getDeadlineText = (date1: Date, date2: Date): string | undefined => {\n\tconst maxDays = 7;\n\tconst daysBetween = getDaysBetween(date1, date2);\n\tif (daysBetween <= 0 || daysBetween > maxDays) return;\n\tif (daysBetween <= 1) return 'Closing today';\n\tif (Math.round(daysBetween) === 1) return 'Open for 1 more day';\n\treturn `Open for ${Math.round(daysBetween)} more days`;\n};\n\nfunction formatOptionalDate(date: number | undefined): Date | undefined {\n\tif (date === undefined) return undefined;\n\treturn new Date(date * 1000);\n}\n\nexport const Deadline = ({ until }: Props) => {\n\tconst untilDate = formatOptionalDate(until);\n\tif (!untilDate) return null;\n\tconst now = new Date();\n\tconst deadlineText = getDeadlineText(now, untilDate);\n\tif (!deadlineText) return null;\n\n\treturn (\n\t\t<span css={deadlineStyles}>\n\t\t\t<SvgClock size=\"xsmall\" />\n\t\t\t{deadlineText}\n\t\t</span>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { palette } from '@guardian/source-foundations';\nimport { ExpandingWrapper } from '@guardian/source-react-components-development-kitchen';\nimport type { CalloutBlockElementV2 } from '../../types/content';\nimport { CalloutBlock } from './Callout/Callout';\nimport { CalloutExpired } from './Callout/CalloutComponents';\nimport { Deadline } from './Callout/Deadline';\n\nconst collapsibleCalloutStyle = css`\n\tbackground-color: ${palette.neutral[97]};\n`;\n\n/**\n * # Callout Block Component\n *\n * A callout to readers to share their stories.\n * This is the updated version of the CalloutEmbedBlockComponent.\n *\n * ## Why does this need to be an Island?\n *\n * We are responding to user interactions on the page,\n * and submitting a form.\n *\n */\n\nexport const CalloutBlockComponent = ({\n\tcallout,\n\tpageId,\n\tformat,\n}: {\n\tcallout: CalloutBlockElementV2;\n\tpageId: string;\n\tformat: ArticleFormat;\n}) => {\n\tconst {\n\t\tprompt,\n\t\ttitle,\n\t\tdescription,\n\t\tformFields,\n\t\tactiveUntil,\n\t\tcalloutsUrl,\n\t\tformId,\n\t\tisNonCollapsible,\n\t\tcontacts,\n\t} = callout;\n\n\tconst isExpired = (date: number | undefined): boolean => {\n\t\tif (date !== undefined) {\n\t\t\treturn Math.floor(new Date().getTime() / 1000) > date;\n\t\t}\n\t\treturn false;\n\t};\n\n\tif (!isNonCollapsible && isExpired(activeUntil)) {\n\t\treturn null;\n\t}\n\n\tif (isNonCollapsible && isExpired(activeUntil)) {\n\t\treturn <CalloutExpired />;\n\t}\n\n\tconst id = formId.toString();\n\n\treturn (\n\t\t<>\n\t\t\t{!isNonCollapsible ? (\n\t\t\t\t<aside>\n\t\t\t\t\t<ExpandingWrapper\n\t\t\t\t\t\tname={`${callout.formId} form`}\n\t\t\t\t\t\trenderExtra={() => <Deadline until={activeUntil} />}\n\t\t\t\t\t\tcollapsedHeight={'160px'}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div css={collapsibleCalloutStyle}>\n\t\t\t\t\t\t\t<CalloutBlock\n\t\t\t\t\t\t\t\tformId={id}\n\t\t\t\t\t\t\t\tprompt={prompt}\n\t\t\t\t\t\t\t\theading={title}\n\t\t\t\t\t\t\t\tdescription={description}\n\t\t\t\t\t\t\t\tformFields={formFields}\n\t\t\t\t\t\t\t\tsubmissionURL={calloutsUrl}\n\t\t\t\t\t\t\t\tisExpired={isExpired(activeUntil)}\n\t\t\t\t\t\t\t\tisNonCollapsible={isNonCollapsible}\n\t\t\t\t\t\t\t\tcontacts={contacts}\n\t\t\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</ExpandingWrapper>\n\t\t\t\t</aside>\n\t\t\t) : (\n\t\t\t\t<CalloutBlock\n\t\t\t\t\tformId={id}\n\t\t\t\t\tprompt={prompt}\n\t\t\t\t\theading={title}\n\t\t\t\t\tdescription={description}\n\t\t\t\t\tformFields={formFields}\n\t\t\t\t\tsubmissionURL={calloutsUrl}\n\t\t\t\t\tisExpired={isExpired(activeUntil)}\n\t\t\t\t\tisNonCollapsible={isNonCollapsible}\n\t\t\t\t\tcontacts={contacts}\n\t\t\t\t\tpageId={pageId}\n\t\t\t\t\tformat={format}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n"],"names":["FormField","formField","formData","setFieldInFormData","pageId","validationErrors","type","label","hideLabel","description","required","id","name","fieldValue","fieldError","firstUpdate","useRef","useEffect","current","hidden","TextInput","supporting","optional","value","error","data-testid","onChange","e","target","TextArea","FileInput","onUpload","file","Select","children","concat","options","map","formLabel","Option","CheckboxGroup","undefined","option","selectedCheckboxesArray","isCheckboxChecked","find","ele","Checkbox","checked","filter","RadioGroup","orientation","length","index","Radio","linkDecorationColour","calloutLinkStyles","css","brand","descriptionStyles","useBrandColour","space","body","CalloutDescription","withDataIgnore","split","join","div","dangerouslySetInnerHTML","__html","a","data-ignore","href","expiredStyles","textSans","palette","CalloutExpired","p","shareCalloutStyles","shareCalloutTextStyles","shareCalloutLinkStyles","brandPalette","text","articleLink","border","articleLinkHover","sharePopupStyles","neutral","success","shareIconStyles","CalloutShare","title","urlAnchor","format","isCopied","setIsCopied","useState","decidePalette","window","navigator","span","SvgShare","size","Button","priority","onClick","async","url","location","test","userAgent","shareTitle","shareText","share","setTimeout","clipboard","writeText","cssOverrides","role","SvgTickRound","termsAndConditionsStyles","CalloutTermsAndConditions","textStyles","successStyles","tickBoxStyles","errorTextStyles","fontWeight","formStyles","submitButtonStyles","footerPaddingStyles","Form","formFields","submissionURL","formID","setFormData","setValidationErrors","networkError","setNetworkError","submissionSuccess","setSubmissionSuccess","twitterHandle","setTwitterHandle","data","currentErrors","headline","form","action","method","noValidate","onSubmit","preventDefault","errors","isValid","forEach","field","includes","Object","keys","validateForm","formDataWithFieldPrefix","reduce","acc","cur","Array","isArray","fetch","JSON","stringify","formId","headers","then","resp","status","catch","respError","guardian","modules","sentry","reportError","submitForm","document","querySelectorAll","focus","values","err","ErrorSummary","message","context","aria-hidden","input","tabIndex","placeholder","calloutPrimaryButtonStyles","infoStyles","formatContactType","s","toLowerCase","charAt","toUpperCase","slice","conditionallyRenderContactIcon","SvgWhatsAppBrand","SvgSignalBrand","SvgTelegramBrand","formatContactNumbers","contacts","contactNumbers","Map","has","set","get","push","entries","names","namesString","Disclaimer","contactText","guidanceText","contact","i","guidance","secureDropText","some","c","MessageUs","className","urlPrefix","LinkButton","rel","icon","summaryContentWrapper","isNonCollapsible","promptStyles","subtitleTextHeaderStyles","tabTitle","tabIcons","CalloutBlock","prompt","heading","selectedTab","setSelectedTab","shouldShowContacts","shouldShowHeading","tabsContent","content","tabsText","h4","Tabs","tabsLabel","tabElement","tabs","onTabChange","tabName","deadlineStyles","Deadline","until","untilDate","date","Date","formatOptionalDate","deadlineText","date1","date2","daysBetween","first","getTime","Math","round","getDeadlineText","SvgClock","collapsibleCalloutStyle","CalloutBlockComponent","callout","activeUntil","calloutsUrl","isExpired","floor","toString","aside","ExpandingWrapper","renderExtra","collapsedHeight"],"sourceRoot":""}