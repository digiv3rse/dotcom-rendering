{"version":3,"file":"SupportTheG-importable.modern.f2eb0b41ed527a286c48.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/static/icons/arrow-right.svg","webpack://@guardian/dotcom-rendering/./src/lib/querystring.ts","webpack://@guardian/dotcom-rendering/./src/web/components/SupportTheG.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/acquisitions.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/contributions.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getIdapiUserData.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/setAutomat.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useIsInView.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useOnce.ts","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/support-dotcom-components/dist/index.esm.js"],"sourcesContent":["\nmodule.exports = {\"attributes\":{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"30\",\"height\":\"30\",\"viewBox\":\"0 0 30 30\"},\"content\":\"<path d=\\\"M22.8 14.6l-7.6-7.6-.7.7 5.5 6.6h-14v1.5h14l-5.5 6.6.7.7 7.6-7.6v-.9\\\"/>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n","const constructQuery = (query: { [key: string]: any }): string =>\n\tObject.keys(query)\n\t\t.map((param: string) => {\n\t\t\tconst value = query[param];\n\t\t\tconst queryValue = Array.isArray(value)\n\t\t\t\t? value.map((v) => encodeURIComponent(v)).join(',')\n\t\t\t\t: encodeURIComponent(value);\n\t\t\treturn `${param}=${queryValue}`;\n\t\t})\n\t\t.join('&');\n\nexport { constructQuery };\n","import { css } from '@emotion/react';\nimport type { OphanABTestMeta, OphanComponentEvent } from '@guardian/libs';\nimport { getCookie } from '@guardian/libs';\nimport {\n\tbrandAlt,\n\tbrandText,\n\tfrom,\n\theadline,\n\tneutral,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { getHeader } from '@guardian/support-dotcom-components';\nimport type {\n\tHeaderPayload,\n\tModuleData,\n\tModuleDataResponse,\n} from '@guardian/support-dotcom-components/dist/dotcom/src/types';\nimport { useEffect, useState } from 'react';\nimport ArrowRightIcon from '../../static/icons/arrow-right.svg';\nimport type { OphanRecordFunction } from '../browser/ophan/ophan';\nimport {\n\tgetOphanRecordFunction,\n\tsendOphanComponentEvent,\n\tsubmitComponentEvent,\n} from '../browser/ophan/ophan';\nimport { addTrackingCodesToUrl } from '../lib/acquisitions';\nimport {\n\tgetLastOneOffContributionDate,\n\tgetPurchaseInfo,\n\tMODULES_VERSION,\n\tshouldHideSupportMessaging,\n} from '../lib/contributions';\nimport type { EditionId } from '../lib/edition';\nimport { getLocaleCode } from '../lib/getCountryCode';\nimport { setAutomat } from '../lib/setAutomat';\nimport { useIsInView } from '../lib/useIsInView';\nimport { useOnce } from '../lib/useOnce';\n\ntype Props = {\n\teditionId: EditionId;\n\tdataLinkNamePrefix: string;\n\tinHeader: boolean;\n\tremoteHeader: boolean;\n\tcontributionsServiceUrl: string;\n\turls: {\n\t\tsubscribe: string;\n\t\tsupport: string;\n\t\tcontribute: string;\n\t};\n};\n\nconst headerStyles = css`\n\tpadding-top: 39px;\n\tpadding-left: 10px;\n\tmax-width: 310px;\n\n\t${from.mobileMedium} {\n\t\tpadding-top: 44px;\n\t}\n\n\t${from.mobileLandscape} {\n\t\tpadding-left: ${space[5]}px;\n\t}\n\n\t${from.tablet} {\n\t\tpadding-top: ${space[1]}px;\n\t\tpadding-bottom: ${space[3]}px;\n\t\tpadding-left: ${space[5]}px;\n\t\tmax-width: 340px;\n\t}\n\n\t${from.desktop} {\n\t\tmax-width: none;\n\t}\n`;\n\nconst messageStyles = (isThankYouMessage: boolean) => css`\n\tcolor: ${brandAlt[400]};\n\t${headline.xxsmall({ fontWeight: 'bold' })}\n\tpadding-top: 3px;\n\tmargin-bottom: 3px;\n\n\t${from.desktop} {\n\t\t${headline.xsmall({ fontWeight: 'bold' })}\n\t}\n\n\t${from.leftCol} {\n\t\t${isThankYouMessage\n\t\t\t? headline.small({ fontWeight: 'bold' })\n\t\t\t: headline.medium({ fontWeight: 'bold' })}\n\t}\n`;\n\nconst linkStyles = css`\n\tbackground: ${brandAlt[400]};\n\tborder-radius: 16px;\n\tbox-sizing: border-box;\n\tcolor: ${neutral[7]};\n\tfloat: left;\n\t${textSans.small()};\n\tfont-weight: 700;\n\theight: 32px;\n\ttext-decoration: none;\n\tpadding: 6px 12px 0 12px;\n\tline-height: 18px;\n\tposition: relative;\n\tmargin-right: 10px;\n\tmargin-bottom: 6px;\n\n\t${from.mobileMedium} {\n\t\tpadding-right: 34px;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tposition: absolute;\n\t\tright: 3px;\n\t\ttop: 50%;\n\t\theight: 32px;\n\t\twidth: 32px;\n\t\ttransform: translate(0, -50%);\n\t\ttransition: transform 0.3s ease-in-out;\n\n\t\t${until.mobileMedium} {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\t:hover svg {\n\t\ttransform: translate(3px, -50%);\n\t}\n`;\n\nconst hidden = css`\n\tdisplay: none;\n`;\n\nconst hiddenUntilTablet = css`\n\t${until.tablet} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst hiddenFromTablet = css`\n\t${from.tablet} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst subMessageStyles = css`\n\tcolor: ${brandText.primary};\n\t${textSans.medium()};\n\tmargin: 5px 0;\n`;\n\ntype ReaderRevenueLinksRemoteProps = {\n\tcountryCode: string;\n\tpageViewId: string;\n\tcontributionsServiceUrl: string;\n\tophanRecord: OphanRecordFunction;\n};\n\nconst ReaderRevenueLinksRemote = ({\n\tcountryCode,\n\tpageViewId,\n\tcontributionsServiceUrl,\n\tophanRecord,\n}: ReaderRevenueLinksRemoteProps) => {\n\tconst [supportHeaderResponse, setSupportHeaderResponse] =\n\t\tuseState<ModuleData | null>(null);\n\tconst [SupportHeader, setSupportHeader] =\n\t\tuseState<React.ElementType | null>(null);\n\n\tuseOnce((): void => {\n\t\tsetAutomat();\n\n\t\tconst isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\t\tconst requestData: HeaderPayload = {\n\t\t\ttracking: {\n\t\t\t\tophanPageId: pageViewId,\n\t\t\t\tplatformId: 'GUARDIAN_WEB',\n\t\t\t\treferrerUrl: window.location.origin + window.location.pathname,\n\t\t\t\tclientName: 'dcr',\n\t\t\t},\n\t\t\ttargeting: {\n\t\t\t\tshowSupportMessaging: !shouldHideSupportMessaging(),\n\t\t\t\tcountryCode,\n\t\t\t\tmodulesVersion: MODULES_VERSION,\n\t\t\t\tmvtId: Number(\n\t\t\t\t\tgetCookie({ name: 'GU_mvt_id', shouldMemoize: true }),\n\t\t\t\t),\n\t\t\t\tlastOneOffContributionDate: getLastOneOffContributionDate(),\n\t\t\t\tpurchaseInfo: getPurchaseInfo(),\n\t\t\t\tisSignedIn,\n\t\t\t},\n\t\t};\n\t\tgetHeader(contributionsServiceUrl, requestData)\n\t\t\t.then((response: ModuleDataResponse) => {\n\t\t\t\tif (!response.data) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tconst { module } = response.data;\n\t\t\t\tsetSupportHeaderResponse(module);\n\n\t\t\t\treturn window\n\t\t\t\t\t.guardianPolyfilledImport(module.url)\n\t\t\t\t\t.then(\n\t\t\t\t\t\t(headerModule: {\n\t\t\t\t\t\t\t[key: string]: React.ElementType;\n\t\t\t\t\t\t}) => {\n\t\t\t\t\t\t\tsetSupportHeader(\n\t\t\t\t\t\t\t\t() => headerModule[module.name] ?? null,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst msg = `Error importing RR header links: ${String(error)}`;\n\n\t\t\t\tconsole.log(msg);\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\tnew Error(msg),\n\t\t\t\t\t'rr-header-links',\n\t\t\t\t);\n\t\t\t});\n\t}, [countryCode]);\n\n\tif (SupportHeader !== null && supportHeaderResponse) {\n\t\treturn (\n\t\t\t<div css={headerStyles}>\n\t\t\t\t{}\n\t\t\t\t<SupportHeader\n\t\t\t\t\tsubmitComponentEvent={(\n\t\t\t\t\t\tcomponentEvent: OphanComponentEvent,\n\t\t\t\t\t) => submitComponentEvent(componentEvent, ophanRecord)}\n\t\t\t\t\t{...supportHeaderResponse.props}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n\ntype ReaderRevenueLinksNativeProps = {\n\teditionId: EditionId;\n\tdataLinkNamePrefix: string;\n\tinHeader: boolean;\n\turls: {\n\t\tsubscribe: string;\n\t\tsupport: string;\n\t\tcontribute: string;\n\t};\n\tophanRecord: OphanRecordFunction;\n\tpageViewId: string;\n};\n\nconst ReaderRevenueLinksNative = ({\n\teditionId,\n\tdataLinkNamePrefix,\n\tinHeader,\n\turls,\n\tophanRecord,\n\tpageViewId,\n}: ReaderRevenueLinksNativeProps) => {\n\tconst hideSupportMessaging = shouldHideSupportMessaging();\n\n\t// Only the header component is in the AB test\n\tconst testName = inHeader ? 'RRHeaderLinks' : 'RRFooterLinks';\n\tconst campaignCode = `${testName}_control`;\n\tconst tracking: OphanABTestMeta = {\n\t\tabTestName: testName,\n\t\tabTestVariant: 'control',\n\t\tcomponentType: inHeader ? 'ACQUISITIONS_HEADER' : 'ACQUISITIONS_FOOTER',\n\t\tcampaignCode,\n\t};\n\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\tthreshold: 0,\n\t\tdebounce: true,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!hideSupportMessaging && inHeader) {\n\t\t\tsendOphanComponentEvent('INSERT', tracking, ophanRecord);\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen && inHeader) {\n\t\t\tsendOphanComponentEvent('VIEW', tracking, ophanRecord);\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [hasBeenSeen]);\n\n\tconst getUrl = (rrType: 'contribute' | 'subscribe'): string => {\n\t\tif (inHeader) {\n\t\t\treturn addTrackingCodesToUrl({\n\t\t\t\tbase: `https://support.theguardian.com/${rrType}`,\n\t\t\t\tcomponentType: 'ACQUISITIONS_HEADER',\n\t\t\t\tcomponentId: campaignCode,\n\t\t\t\tcampaignCode,\n\t\t\t\tabTest: {\n\t\t\t\t\tname: testName,\n\t\t\t\t\tvariant: 'control',\n\t\t\t\t},\n\t\t\t\tpageViewId,\n\t\t\t\treferrerUrl: window.location.origin + window.location.pathname,\n\t\t\t});\n\t\t}\n\t\treturn urls[rrType];\n\t};\n\n\tif (hideSupportMessaging) {\n\t\treturn (\n\t\t\t<div css={inHeader && headerStyles}>\n\t\t\t\t<div css={inHeader && hiddenUntilTablet}>\n\t\t\t\t\t<div css={messageStyles(true)}> Thank you </div>\n\t\t\t\t\t<div css={subMessageStyles}>\n\t\t\t\t\t\tYour support powers our independent journalism\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst ContributeButton = () => (\n\t\t<a\n\t\t\tcss={linkStyles}\n\t\t\thref={getUrl('contribute')}\n\t\t\tdata-link-name={`${dataLinkNamePrefix}contribute-cta`}\n\t\t>\n\t\t\tContribute <ArrowRightIcon />\n\t\t</a>\n\t);\n\tconst SubscribeButton = () => (\n\t\t<a\n\t\t\tcss={linkStyles}\n\t\t\thref={getUrl('subscribe')}\n\t\t\tdata-link-name={`${dataLinkNamePrefix}subscribe-cta`}\n\t\t>\n\t\t\tSubscribe <ArrowRightIcon />\n\t\t</a>\n\t);\n\tconst PrimaryButton =\n\t\teditionId === 'UK' ? SubscribeButton : ContributeButton;\n\tconst SecondaryButton =\n\t\teditionId === 'UK' ? ContributeButton : SubscribeButton;\n\n\treturn (\n\t\t<div ref={setNode} css={inHeader && headerStyles}>\n\t\t\t<div css={inHeader && hiddenUntilTablet}>\n\t\t\t\t<div css={messageStyles(false)}>\n\t\t\t\t\t<span>Support the&nbsp;Guardian</span>\n\t\t\t\t</div>\n\t\t\t\t<div css={subMessageStyles}>\n\t\t\t\t\t<div>Available for everyone, funded by readers</div>\n\t\t\t\t</div>\n\t\t\t\t<PrimaryButton />\n\t\t\t\t<SecondaryButton />\n\t\t\t</div>\n\n\t\t\t<div css={inHeader ? hiddenFromTablet : hidden}>\n\t\t\t\t<PrimaryButton />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport const SupportTheG = ({\n\teditionId,\n\tdataLinkNamePrefix,\n\tinHeader,\n\tremoteHeader,\n\turls,\n\tcontributionsServiceUrl,\n}: Props) => {\n\tconst [countryCode, setCountryCode] = useState<string>();\n\tconst pageViewId = window.guardian.config.ophan.pageViewId;\n\tconst ophanRecord = getOphanRecordFunction();\n\n\tuseEffect(() => {\n\t\tconst callFetch = () => {\n\t\t\tgetLocaleCode()\n\t\t\t\t.then((cc) => {\n\t\t\t\t\tsetCountryCode(cc ?? '');\n\t\t\t\t})\n\t\t\t\t.catch((e) =>\n\t\t\t\t\tconsole.error(`countryCodePromise - error: ${String(e)}`),\n\t\t\t\t);\n\t\t};\n\t\tcallFetch();\n\t}, []);\n\n\tif (countryCode) {\n\t\tif (inHeader && remoteHeader) {\n\t\t\treturn (\n\t\t\t\t<ReaderRevenueLinksRemote\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tpageViewId={pageViewId}\n\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\tophanRecord={ophanRecord}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<ReaderRevenueLinksNative\n\t\t\t\teditionId={editionId}\n\t\t\t\tdataLinkNamePrefix={dataLinkNamePrefix}\n\t\t\t\tinHeader={inHeader}\n\t\t\t\turls={urls}\n\t\t\t\tophanRecord={ophanRecord}\n\t\t\t\tpageViewId={pageViewId}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n};\n","import type { OphanComponentType } from '@guardian/libs';\nimport { constructQuery } from '../../lib/querystring';\n\ntype AcquisitionLinkParams = {\n\tbase: string;\n\tcomponentType: OphanComponentType;\n\tcomponentId: string;\n\tcampaignCode?: string;\n\tabTest?: { name: string; variant: string };\n\tpageViewId: string;\n\treferrerUrl: string;\n};\n\n// Adds acquisition tracking codes if it is a support url\nexport const addTrackingCodesToUrl = ({\n\tbase,\n\tcomponentType,\n\tcomponentId,\n\tcampaignCode,\n\tabTest,\n\tpageViewId,\n\treferrerUrl,\n}: AcquisitionLinkParams): string => {\n\tconst isSupportUrl =\n\t\tbase.search(\n\t\t\t/(support.theguardian.com)(\\/[a-z]*)?\\/(contribute|subscribe)/,\n\t\t) >= 0;\n\n\tif (isSupportUrl) {\n\t\tconst acquisitionData = {\n\t\t\tsource: 'GUARDIAN_WEB',\n\t\t\tcomponentId,\n\t\t\tcomponentType,\n\t\t\tcampaignCode,\n\t\t\tabTest,\n\t\t\treferrerPageviewId: pageViewId,\n\t\t\treferrerUrl,\n\t\t};\n\n\t\tconst params = {\n\t\t\tREFPVID: pageViewId,\n\t\t\tINTCMP: campaignCode,\n\t\t\tacquisitionData: JSON.stringify(acquisitionData),\n\t\t};\n\n\t\treturn `${base}${base.includes('?') ? '&' : '?'}${constructQuery(\n\t\t\tparams,\n\t\t)}`;\n\t}\n\n\treturn base;\n};\n","import { onConsentChange } from '@guardian/consent-management-platform';\nimport { getCookie } from '@guardian/libs';\nimport type { HeaderPayload } from '@guardian/support-dotcom-components/dist/dotcom/src/types';\nimport { useState } from 'react';\nimport type { FEArticleType } from '../../types/frontend';\nimport type { IdApiUserData } from './getIdapiUserData';\nimport { getIdApiUserData } from './getIdapiUserData';\nimport { useOnce } from './useOnce';\n\n// User Atributes API cookies (dropped on sign-in)\nexport const HIDE_SUPPORT_MESSAGING_COOKIE = 'gu_hide_support_messaging';\nexport const RECURRING_CONTRIBUTOR_COOKIE = 'gu_recurring_contributor';\nexport const ONE_OFF_CONTRIBUTION_DATE_COOKIE = 'gu_one_off_contribution_date';\nexport const OPT_OUT_OF_ARTICLE_COUNT_COOKIE = 'gu_article_count_opt_out';\n\n// Support Frontend cookies (dropped when contribution is made)\nexport const SUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE =\n\t'gu.contributions.recurring.contrib-timestamp.Monthly';\nexport const SUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE =\n\t'gu.contributions.recurring.contrib-timestamp.Annual';\nexport const SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE =\n\t'gu.contributions.contrib-timestamp';\n\n//  Local storage keys\nconst DAILY_ARTICLE_COUNT_KEY = 'gu.history.dailyArticleCount';\nconst WEEKLY_ARTICLE_COUNT_KEY = 'gu.history.weeklyArticleCount';\nexport const NO_RR_BANNER_TIMESTAMP_KEY = 'gu.noRRBannerTimestamp'; // timestamp of when we were last told not to show a RR banner\n\n// See https://github.com/guardian/support-dotcom-components/blob/main/module-versions.md\nexport const MODULES_VERSION = 'v3';\n\n// Cookie set by the User Attributes API upon signing in.\n// Value computed server-side and looks at all of the user's active products,\n// including but not limited to recurring & one-off contributions,\n// paper & digital subscriptions, as well as user tiers (GU supporters/staff/partners/patrons).\n// https://github.com/guardian/members-data-api/blob/3a72dc00b9389968d91e5930686aaf34d8040c52/membership-attribute-service/app/models/Attributes.scala\nconst shouldShowSupportMessaging = (): boolean => {\n\tconst hideSupportMessaging =\n\t\tgetCookie({ name: HIDE_SUPPORT_MESSAGING_COOKIE }) === 'true';\n\n\treturn !hideSupportMessaging;\n};\n\n// Determine if user is a recurring contributor by checking if they are signed in\n// AND have at least one of the relevant cookies.\n// We need to look at both User Attributes and Frontend Support cookies\n// as the former might not reflect the latest contributor status, since it's set upon signing in.\n// Frontend Support cookies are set when a contribution is made.\nexport const isRecurringContributor = (isSignedIn: boolean): boolean => {\n\t// Attributes cookie - we want this to have a specific value\n\tconst isRecurringContributorFromAttrs =\n\t\tgetCookie({ name: RECURRING_CONTRIBUTOR_COOKIE }) === 'true';\n\n\t// Support cookies - we only care whether these exist\n\tconst hasMonthlyContributionCookie =\n\t\tgetCookie({\n\t\t\tname: SUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE,\n\t\t\tshouldMemoize: true,\n\t\t}) !== null;\n\tconst hasAnnualContributionCookie =\n\t\tgetCookie({\n\t\t\tname: SUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE,\n\t\t\tshouldMemoize: true,\n\t\t}) !== null;\n\n\treturn (\n\t\tisSignedIn &&\n\t\t(isRecurringContributorFromAttrs ||\n\t\t\thasMonthlyContributionCookie ||\n\t\t\thasAnnualContributionCookie)\n\t);\n};\n\n// looks at attribute and support cookies\n// ONE_OFF_CONTRIBUTION_DATE_COOKIE (attributes cookie, when loggin in)\n// SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE (support cookie, when making one-off contribution)\n// Get the date of the latest one-off contribution by looking at the two relevant cookies\n// and returning a Unix epoch string of the latest date found.\nexport const getLastOneOffContributionTimestamp = (): number | undefined => {\n\t// Attributes cookie - expects YYYY-MM-DD\n\tconst contributionDateFromAttributes = getCookie({\n\t\tname: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\t});\n\n\t// Support cookies - expects Unix epoch\n\tconst contributionDateFromSupport = getCookie({\n\t\tname: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n\t});\n\n\tif (!contributionDateFromAttributes && !contributionDateFromSupport) {\n\t\treturn undefined;\n\t}\n\n\t// Parse dates into common format so they can be compared\n\tconst parsedDateFromAttributes = contributionDateFromAttributes\n\t\t? Date.parse(contributionDateFromAttributes)\n\t\t: 0;\n\tconst parsedDateFromSupport = contributionDateFromSupport\n\t\t? parseInt(contributionDateFromSupport, 10)\n\t\t: 0;\n\n\t// Return most recent date\n\t// Condition only passed if 'parsedDateFromAttributes' is NOT NaN\n\tif (parsedDateFromAttributes > parsedDateFromSupport) {\n\t\treturn parsedDateFromAttributes;\n\t}\n\n\treturn parsedDateFromSupport || undefined; // This guards against 'parsedDateFromSupport' being NaN\n};\n\nexport const getLastOneOffContributionDate = (): string | undefined => {\n\tconst timestamp = getLastOneOffContributionTimestamp();\n\n\tif (timestamp === undefined) {\n\t\treturn undefined;\n\t}\n\n\tconst date = new Date(timestamp);\n\tconst year = date.getFullYear();\n\tconst month = (date.getMonth() + 1).toString().padStart(2, '0');\n\tconst day = date.getDate().toString().padStart(2, '0');\n\n\treturn `${year}-${month}-${day}`;\n};\n\nconst dateDiffDays = (from: number, to: number): number => {\n\tconst oneDayMs = 1000 * 60 * 60 * 24;\n\tconst diffMs = to - from;\n\treturn Math.floor(diffMs / oneDayMs);\n};\n\nconst AskPauseDays = 90;\n\nexport const isRecentOneOffContributor = (): boolean => {\n\tconst lastContributionDate = getLastOneOffContributionTimestamp();\n\tif (lastContributionDate !== undefined) {\n\t\tconst now = Date.now();\n\t\treturn dateDiffDays(lastContributionDate, now) <= AskPauseDays;\n\t}\n\n\treturn false;\n};\n\nexport const shouldHideSupportMessaging = (isSignedIn = false): boolean =>\n\t!shouldShowSupportMessaging() ||\n\tisRecurringContributor(isSignedIn) ||\n\tisRecentOneOffContributor();\n\nexport const REQUIRED_CONSENTS_FOR_ARTICLE_COUNT = [1, 3, 7];\nconst REQUIRED_CONSENTS_FOR_BROWSER_ID = [1, 3, 5, 7];\n\nexport const hasArticleCountOptOutCookie = (): boolean =>\n\tgetCookie({ name: OPT_OUT_OF_ARTICLE_COUNT_COOKIE }) !== null;\n\nconst removeArticleCountsFromLocalStorage = () => {\n\twindow.localStorage.removeItem(DAILY_ARTICLE_COUNT_KEY);\n\twindow.localStorage.removeItem(WEEKLY_ARTICLE_COUNT_KEY);\n};\n\nexport const hasCmpConsentForArticleCount = (): Promise<boolean> => {\n\treturn new Promise((resolve) => {\n\t\tif (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n\t\t\tresolve(true);\n\t\t}\n\t\tonConsentChange(({ ccpa, tcfv2, aus }) => {\n\t\t\tif (ccpa || aus) {\n\t\t\t\tresolve(true);\n\t\t\t} else if (tcfv2) {\n\t\t\t\tconst hasRequiredConsents =\n\t\t\t\t\tREQUIRED_CONSENTS_FOR_ARTICLE_COUNT.every(\n\t\t\t\t\t\t(consent) => tcfv2.consents[consent],\n\t\t\t\t\t);\n\n\t\t\t\tif (!hasRequiredConsents) {\n\t\t\t\t\tremoveArticleCountsFromLocalStorage();\n\t\t\t\t}\n\t\t\t\tresolve(hasRequiredConsents);\n\t\t\t}\n\t\t});\n\t});\n};\n\nexport const hasOptedOutOfArticleCount = async (): Promise<boolean> => {\n\tconst hasCmpConsent = await hasCmpConsentForArticleCount();\n\treturn !hasCmpConsent || hasArticleCountOptOutCookie();\n};\n\n// A hook to find out if a user has opted out of article counting\nexport const useHasOptedOutOfArticleCount = (): boolean | 'Pending' => {\n\tconst [hasOptedOut, setHasOptedOut] = useState<boolean | 'Pending'>(\n\t\t'Pending',\n\t);\n\n\tuseOnce(() => {\n\t\thasOptedOutOfArticleCount()\n\t\t\t.then(setHasOptedOut)\n\t\t\t.catch(() => setHasOptedOut(true));\n\t}, []);\n\n\treturn hasOptedOut;\n};\n\nexport const hasCmpConsentForBrowserId = (): Promise<boolean> =>\n\tnew Promise((resolve) => {\n\t\tif (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n\t\t\tresolve(true);\n\t\t}\n\t\tonConsentChange(({ ccpa, tcfv2, aus }) => {\n\t\t\tif (ccpa || aus) {\n\t\t\t\tresolve(true);\n\t\t\t} else if (tcfv2) {\n\t\t\t\tconst hasRequiredConsents =\n\t\t\t\t\tREQUIRED_CONSENTS_FOR_BROWSER_ID.every(\n\t\t\t\t\t\t(consent) => tcfv2.consents[consent],\n\t\t\t\t\t);\n\t\t\t\tresolve(hasRequiredConsents);\n\t\t\t}\n\t\t});\n\t});\n\nconst twentyMins = 20 * 60000;\nexport const withinLocalNoBannerCachePeriod = (): boolean => {\n\tconst item = window.localStorage.getItem(NO_RR_BANNER_TIMESTAMP_KEY);\n\tif (item && !Number.isNaN(parseInt(item, 10))) {\n\t\tconst withinCachePeriod = parseInt(item, 10) + twentyMins > Date.now();\n\t\tif (!withinCachePeriod) {\n\t\t\t// Expired\n\t\t\twindow.localStorage.removeItem(NO_RR_BANNER_TIMESTAMP_KEY);\n\t\t}\n\t\treturn withinCachePeriod;\n\t}\n\treturn false;\n};\n\nexport const setLocalNoBannerCachePeriod = (): void =>\n\twindow.localStorage.setItem(NO_RR_BANNER_TIMESTAMP_KEY, `${Date.now()}`);\n\nconst getEmail = (ajaxUrl: string): Promise<string | undefined> => {\n\treturn getIdApiUserData(ajaxUrl)\n\t\t.then((data: IdApiUserData) => data.user?.primaryEmailAddress)\n\t\t.catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(error, 'getEmail');\n\t\t\treturn undefined;\n\t\t});\n};\n\nexport const lazyFetchEmailWithTimeout =\n\t(idapiUrl: string): (() => Promise<string | null>) =>\n\t() => {\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(() => resolve(null), 1000);\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\t\tgetEmail(idapiUrl).then((email) => {\n\t\t\t\tif (email) {\n\t\t\t\t\tresolve(email);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(null);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\nexport const getContributionsServiceUrl = (article: FEArticleType): string =>\n\tprocess.env.SDC_URL ?? article.contributionsServiceUrl;\n\ntype PurchaseInfo = HeaderPayload['targeting']['purchaseInfo'];\nexport const getPurchaseInfo = (): PurchaseInfo => {\n\tconst purchaseInfoRaw = getCookie({\n\t\tname: 'GU_CO_COMPLETE',\n\t\tshouldMemoize: true,\n\t});\n\n\tif (!purchaseInfoRaw) {\n\t\treturn undefined;\n\t}\n\n\tlet purchaseInfo: PurchaseInfo;\n\n\ttry {\n\t\tpurchaseInfo = JSON.parse(decodeURIComponent(purchaseInfoRaw));\n\t} catch {} // eslint-disable-line no-empty -- silently handle error\n\n\treturn purchaseInfo;\n};\n","import { joinUrl } from '@guardian/libs';\n\nexport interface IdApiUserData {\n\tuser?: {\n\t\tprimaryEmailAddress?: string;\n\t\tprivateFields?: {\n\t\t\tbrazeUuid?: string;\n\t\t};\n\t};\n}\n\nexport interface IdApiUserIdentifiers {\n\tid: string;\n\tbrazeUuid: string;\n\tpuzzleId: string;\n\tgoogleTagId: string;\n}\n\nfunction checkForErrors(response: Response) {\n\tif (!response.ok) {\n\t\tthrow Error(\n\t\t\tresponse.statusText ||\n\t\t\t\t`getIdApiUserData | An api call returned HTTP status ${response.status}`,\n\t\t);\n\t}\n\treturn response;\n}\n\nconst callApi = (url: string) => {\n\treturn fetch(url, {\n\t\tcredentials: 'include',\n\t})\n\t\t.then(checkForErrors)\n\t\t.then((response) => response.json());\n};\n\nconst cache: {\n\tidapiUserMeResponse?: Promise<IdApiUserData>;\n\tidapiUserIdentifiersResponse?: Promise<IdApiUserIdentifiers>;\n} = {};\n\nexport const getIdApiUserData = (ajaxUrl: string): Promise<IdApiUserData> => {\n\tif (!cache.idapiUserMeResponse) {\n\t\tconst url = joinUrl(ajaxUrl, 'user/me');\n\t\tcache.idapiUserMeResponse = callApi(url);\n\t}\n\treturn cache.idapiUserMeResponse;\n};\n\nexport const getIdapiUserIdentifiers = (\n\tajaxUrl: string,\n): Promise<IdApiUserIdentifiers> => {\n\tif (!cache.idapiUserIdentifiersResponse) {\n\t\tconst url = joinUrl(ajaxUrl, 'user/me/identifiers');\n\t\tcache.idapiUserIdentifiersResponse = callApi(url);\n\t}\n\treturn cache.idapiUserIdentifiersResponse;\n};\n","import * as emotionReact from '@emotion/react';\nimport * as emotionReactJsxRuntime from '@emotion/react/jsx-runtime';\nimport React from 'react';\n\nlet hasAutomatBeenSet = false;\n\nexport const setAutomat = (): void => {\n\tif (!hasAutomatBeenSet) {\n\t\twindow.guardian.automat = {\n\t\t\temotionReact,\n\t\t\temotionReactJsxRuntime,\n\t\t\treact: React,\n\t\t};\n\t\thasAutomatBeenSet = true;\n\t}\n};\n","import libDebounce from 'lodash.debounce';\nimport { useEffect, useRef, useState } from 'react';\n\n/**\n * Custom hook around the `IntersectionObserver`.\n *\n * @param options\n * @param {boolean} [options.debouce] If `true`, debounce triggers by 200ms.\n * By default, trigger instantaneously. Enabling debouncing ensures the target\n * element intersects for at least 200ms before the callback is executed\n * @param {boolean} [options.repeat] If `true`, trigger the hook on\n * all intersections. By default, only trigger on the first intersection.\n * @param {boolean} [options.node] Set the initial node, if known.\n * @returns a tuple containing [isInView, setNode];\n */\nconst useIsInView = (\n\toptions: IntersectionObserverInit & {\n\t\tdebounce?: true;\n\t\trepeat?: true;\n\t\tnode?: HTMLElement;\n\t},\n): [boolean, React.Dispatch<React.SetStateAction<HTMLElement | null>>] => {\n\tconst [isInView, setIsInView] = useState<boolean>(false);\n\tconst [node, setNode] = useState<HTMLElement | null>(options.node ?? null);\n\n\tconst observer = useRef<IntersectionObserver | null>(null);\n\n\tconst intersectionFn: IntersectionObserverCallback = ([entry]) => {\n\t\tif (!entry) return;\n\n\t\tif (entry.isIntersecting) {\n\t\t\tsetIsInView(true);\n\t\t} else if (options.repeat) {\n\t\t\tsetIsInView(false);\n\t\t}\n\t};\n\tconst intersectionCallback = options.debounce\n\t\t? libDebounce(intersectionFn, 200)\n\t\t: intersectionFn;\n\n\tuseEffect(() => {\n\t\t// TODO: can we remove this? Itâ€™s now always cleaned up\n\t\tif (observer.current) {\n\t\t\tobserver.current.disconnect();\n\t\t}\n\n\t\t// eslint-disable-next-line @typescript-eslint/strict-boolean-expressions, @typescript-eslint/no-unnecessary-condition -- Safety for browser support\n\t\tif (window.IntersectionObserver) {\n\t\t\tobserver.current = new window.IntersectionObserver(\n\t\t\t\tintersectionCallback,\n\t\t\t\toptions,\n\t\t\t);\n\n\t\t\tif (node) {\n\t\t\t\tobserver.current.observe(node);\n\t\t\t}\n\t\t}\n\n\t\treturn () => observer.current?.disconnect();\n\t}, [node, options, intersectionCallback]);\n\n\treturn [isInView, setNode];\n};\n\nexport { useIsInView };\n","import { useEffect, useState } from 'react';\n\n/**\n * Ensures that the given task is only run once and only after all items in waitFor are defined\n * @param {Function} task - The task to execute once\n * @param {Array} waitFor - An array of variables that must be defined before the task is executed\n * */\nexport const useOnce = (task: () => void, waitFor: unknown[]): void => {\n\tconst [alreadyRun, setAlreadyRun] = useState(false);\n\tconst isReady = waitFor.every((dep) => dep !== undefined);\n\tuseEffect(() => {\n\t\tif (!alreadyRun && isReady) {\n\t\t\ttask();\n\t\t\tsetAlreadyRun(true);\n\t\t}\n\t}, [alreadyRun, isReady, task]);\n};\n","const e=e=>e.get(\"gu.contributions.views\")||void 0,t=e=>{const t=e.getDay()||7;return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()-(t-1))/864e5},s=e=>e.get(\"gu.history.weeklyArticleCount\")||void 0,r=new Set([\"environment/climate-change\",\"environment/climate-crisis\",\"environment/environment\",\"science/science\",\"politics/politics\",\"us-news/us-politics\",\"australia-news/australian-politics\",\"world/world\",\"world/europe-news\",\"world/russia\",\"books/books\",\"culture/culture\",\"world/coronavirus-outbreak\",\"world/race\",\"inequality/inequality\",\"technology/technology\",\"business/business\"]),o=(e,t={})=>(e.forEach(e=>{r.has(e)&&(t[e]=(t[e]??0)+1)}),t),n=(e,s,r)=>{if(!((e,s)=>{const r=t(new Date),o=e.get(\"gu.history.articleCountsThisWeek\");if(o&&o.week===r){const t=o.articles[s]||0;return e.set(\"gu.history.articleCountsThisWeek\",{week:r,articles:{...o.articles,[s]:t+1}}),t>0}return e.set(\"gu.history.articleCountsThisWeek\",{week:r,articles:{[s]:1}}),!1})(e,s)){const s=t(new Date),n=e.get(\"gu.history.weeklyArticleCount\")||[],i=n[0];if(i&&i.week&&i.week===s)i.count+=1,i.tags=o(r,i.tags),e.set(\"gu.history.weeklyArticleCount\",n);else{n.unshift({week:s,count:1,tags:o(r,{})});const t=s-365,i=n.filter(e=>e.week>=t);e.set(\"gu.history.weeklyArticleCount\",i)}}},i=(e,t,s)=>{const r=(e=>{if(URLSearchParams){const t=new URLSearchParams(window.location.search).get(\"force-\"+e);if(t)return t}return null})(e);return fetch(`${t}/${e}${r?\"?force=\"+r:\"\"}`,{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(s)}).then(t=>{if(!t.ok)throw Error(t.statusText||`Supporter Revenue ${e} | Api call returned HTTP status ${t.status}`);return t}).then(e=>e.json())},c=(e,t)=>i(\"epic\",e,t),u=(e,t)=>i(\"liveblog-epic\",e,t),a=(e,t)=>i(\"banner\",e,t),l=(e,t)=>i(\"puzzles\",e,t),w=(e,t)=>i(\"header\",e,t);export{a as getBanner,c as getEpic,e as getEpicViewLog,w as getHeader,u as getLiveblogEpic,l as getPuzzlesBanner,s as getWeeklyArticleHistory,n as incrementWeeklyArticleCount};\n"],"names":["module","exports","desvg","constructQuery","query","Object","keys","map","param","value","queryValue","Array","isArray","v","encodeURIComponent","join","headerStyles","css","from","space","messageStyles","isThankYouMessage","brandAlt","headline","fontWeight","linkStyles","neutral","textSans","until","hidden","hiddenUntilTablet","hiddenFromTablet","subMessageStyles","brandText","ReaderRevenueLinksRemote","countryCode","pageViewId","contributionsServiceUrl","ophanRecord","supportHeaderResponse","setSupportHeaderResponse","useState","SupportHeader","setSupportHeader","useOnce","setAutomat","isSignedIn","getCookie","name","shouldMemoize","requestData","tracking","ophanPageId","platformId","referrerUrl","window","location","origin","pathname","clientName","targeting","showSupportMessaging","shouldHideSupportMessaging","modulesVersion","MODULES_VERSION","mvtId","Number","lastOneOffContributionDate","getLastOneOffContributionDate","purchaseInfo","getPurchaseInfo","getHeader","then","response","data","guardianPolyfilledImport","url","headerModule","catch","error","msg","String","console","log","guardian","modules","sentry","reportError","Error","div","submitComponentEvent","componentEvent","props","ReaderRevenueLinksNative","editionId","dataLinkNamePrefix","inHeader","urls","hideSupportMessaging","testName","campaignCode","abTestName","abTestVariant","componentType","hasBeenSeen","setNode","useIsInView","threshold","debounce","useEffect","sendOphanComponentEvent","getUrl","rrType","addTrackingCodesToUrl","base","componentId","abTest","variant","ContributeButton","a","href","data-link-name","ArrowRightIcon","SubscribeButton","PrimaryButton","SecondaryButton","ref","span","SupportTheG","remoteHeader","setCountryCode","config","ophan","getOphanRecordFunction","getLocaleCode","cc","e","search","acquisitionData","source","referrerPageviewId","params","REFPVID","INTCMP","JSON","stringify","includes","HIDE_SUPPORT_MESSAGING_COOKIE","RECURRING_CONTRIBUTOR_COOKIE","SUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE","SUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE","SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE","NO_RR_BANNER_TIMESTAMP_KEY","shouldShowSupportMessaging","isRecurringContributor","isRecurringContributorFromAttrs","hasMonthlyContributionCookie","hasAnnualContributionCookie","getLastOneOffContributionTimestamp","contributionDateFromAttributes","contributionDateFromSupport","parsedDateFromAttributes","Date","parse","parsedDateFromSupport","parseInt","undefined","timestamp","date","year","getFullYear","month","getMonth","toString","padStart","day","getDate","isRecentOneOffContributor","lastContributionDate","to","diffMs","now","Math","floor","dateDiffDays","REQUIRED_CONSENTS_FOR_ARTICLE_COUNT","REQUIRED_CONSENTS_FOR_BROWSER_ID","hasCmpConsentForArticleCount","Promise","resolve","onConsentChange","ccpa","tcfv2","aus","hasRequiredConsents","every","consent","consents","localStorage","removeItem","hasOptedOutOfArticleCount","async","useHasOptedOutOfArticleCount","hasOptedOut","setHasOptedOut","hasCmpConsentForBrowserId","withinLocalNoBannerCachePeriod","item","getItem","isNaN","withinCachePeriod","setLocalNoBannerCachePeriod","setItem","lazyFetchEmailWithTimeout","idapiUrl","ajaxUrl","setTimeout","getIdApiUserData","user","primaryEmailAddress","email","purchaseInfoRaw","decodeURIComponent","checkForErrors","ok","statusText","status","callApi","fetch","credentials","json","cache","idapiUserMeResponse","joinUrl","getIdapiUserIdentifiers","idapiUserIdentifiersResponse","hasAutomatBeenSet","automat","emotionReact","emotionReactJsxRuntime","react","React","options","isInView","setIsInView","node","observer","useRef","intersectionFn","entry","isIntersecting","repeat","intersectionCallback","libDebounce","current","disconnect","IntersectionObserver","observe","task","waitFor","alreadyRun","setAlreadyRun","isReady","dep","get","t","getDay","UTC","s","r","Set","o","forEach","has","n","week","articles","set","i","count","tags","unshift","filter","URLSearchParams","method","headers","body","c","u","l","w"],"sourceRoot":""}