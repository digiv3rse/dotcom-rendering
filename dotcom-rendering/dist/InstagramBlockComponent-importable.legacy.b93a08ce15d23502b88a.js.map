{"version":3,"file":"InstagramBlockComponent-importable.legacy.b93a08ce15d23502b88a.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/browser/updateIframeHeight.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/ClickToView.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/InstagramBlockComponent.importable.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/src/button/Button.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgCheckmark.tsx"],"sourcesContent":["export const updateIframeHeight = (queryString) => {\n    const iframes = [].slice.call(document.querySelectorAll(queryString));\n    window.addEventListener('message', (event) => {\n        const iframe = iframes.find((i) => {\n            try {\n                return i.name === event.source.name;\n            }\n            catch (e) {\n                return false;\n            }\n        });\n        if (iframe) {\n            try {\n                const message = JSON.parse(event.data);\n                switch (message.type) {\n                    case 'set-height':\n                        iframe.height = message.value;\n                        break;\n                    default:\n                }\n                // eslint-disable-next-line no-empty\n            }\n            catch (e) { }\n        }\n    });\n    iframes.forEach((iframe) => {\n        const src = (iframe.getAttribute('srcdoc') ?? '')\n            .replace(/<gu-script>/g, '<script>')\n            .replace(/<\\/gu-script>/g, '<' + '/script>');\n        iframe.setAttribute('srcdoc', src);\n    });\n    return Promise.resolve();\n};\n","import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { background, border, space, textSans, } from '@guardian/source-foundations';\nimport { Button, SvgCheckmark } from '@guardian/source-react-components';\nimport { useState } from 'react';\nconst roleTextSize = (role) => {\n    switch (role) {\n        case 'immersive':\n        case 'inline':\n        case 'showcase': {\n            return textSans.medium({ lineHeight: 'regular' });\n        }\n        case 'halfWidth':\n        case 'supporting':\n        case 'thumbnail': {\n            return textSans.small({ lineHeight: 'regular' });\n        }\n    }\n};\nconst roleHeadlineSize = (role) => {\n    switch (role) {\n        case 'immersive':\n        case 'inline':\n        case 'showcase': {\n            return textSans.large({\n                fontWeight: 'bold',\n                lineHeight: 'regular',\n            });\n        }\n        case 'halfWidth':\n        case 'supporting':\n        case 'thumbnail': {\n            return textSans.medium({\n                fontWeight: 'bold',\n                lineHeight: 'regular',\n            });\n        }\n    }\n};\nconst roleButtonSize = (role) => {\n    switch (role) {\n        case 'immersive':\n        case 'inline':\n        case 'showcase': {\n            return 'default';\n        }\n        case 'halfWidth':\n        case 'supporting':\n            return 'small';\n        case 'thumbnail': {\n            return 'xsmall';\n        }\n    }\n};\nconst roleButtonText = (role) => {\n    switch (role) {\n        case 'immersive':\n        case 'inline':\n        case 'showcase':\n        case 'halfWidth':\n        case 'supporting': {\n            return 'Allow and continue';\n        }\n        case 'thumbnail': {\n            return 'Allow';\n        }\n    }\n};\nconst shouldDisplayOverlay = ({ isTracking, isOverlayClicked, isMainMedia, }) => {\n    if (isMainMedia || !isTracking) {\n        return false;\n    }\n    if (isOverlayClicked) {\n        return false;\n    }\n    return true;\n};\nexport const ClickToView = ({ children, role = 'inline', onAccept, isTracking, isMainMedia, source, sourceDomain = 'unknown', }) => {\n    const [isOverlayClicked, setIsOverlayClicked] = useState(false);\n    const handleClick = () => {\n        setIsOverlayClicked(true);\n        if (onAccept) {\n            setTimeout(() => onAccept());\n        }\n    };\n    const textSize = roleTextSize(role);\n    if (shouldDisplayOverlay({\n        isTracking,\n        isOverlayClicked,\n        isMainMedia,\n    })) {\n        return (_jsxs(\"div\", { css: css `\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tbackground: ${background.secondary};\n\t\t\t\t\tborder: 1px solid ${border.secondary};\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tpadding: ${space[1]}px ${space[6]}px ${space[3]}px;\n\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t`, \"data-component\": `click-to-view:${sourceDomain}`, children: [_jsx(\"div\", { css: css `\n\t\t\t\t\t\t${roleHeadlineSize(role)}\n\t\t\t\t\t\tmargin-bottom: ${space[1]}px;\n\t\t\t\t\t`, children: source\n                        ? `Allow ${source} content?`\n                        : 'Allow content provided by a third party?' }), _jsx(\"p\", { css: css `\n\t\t\t\t\t\t${textSize}\n\t\t\t\t\t`, children: source ? (_jsxs(_Fragment, { children: [\"This article includes content provided by \", source, \". We ask for your permission before anything is loaded, as they may be using cookies and other technologies. To view this content,\", ' ', _jsx(\"strong\", { children: \"click 'Allow and continue'\" }), \".\"] })) : (_jsxs(_Fragment, { children: [\"This article includes content hosted on\", ' ', sourceDomain, \". We ask for your permission before anything is loaded, as the provider may be using cookies and other technologies. To view this content,\", ' ', _jsx(\"strong\", { children: \"click 'Allow and continue'\" }), \".\"] })) }), _jsx(\"div\", { css: css `\n\t\t\t\t\t\tmargin-top: ${space[5]}px;\n\t\t\t\t\t`, children: _jsx(Button, { priority: \"primary\", size: roleButtonSize(role), icon: _jsx(SvgCheckmark, {}), iconSide: \"left\", onClick: () => handleClick(), \"data-cy\": \"click-to-view-button\", \"data-link-name\": \"allow-button\", children: roleButtonText(role) }) })] }));\n    }\n    return _jsx(_Fragment, { children: children });\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { updateIframeHeight } from '../browser/updateIframeHeight';\nimport { ClickToView } from './ClickToView';\nconst fullWidthStyles = css `\n\twidth: 100%;\n`;\nexport const InstagramBlockComponent = ({ element, index, isMainMedia, }) => {\n    return (_jsx(ClickToView, { role: element.role, isTracking: element.isThirdPartyTracking, isMainMedia: isMainMedia, source: element.source, sourceDomain: element.sourceDomain, onAccept: () => updateIframeHeight(`iframe[name=\"instagram-embed-${index}\"]`), children: _jsx(\"iframe\", { css: fullWidthStyles, className: \"js-embed__iframe\", name: `instagram-embed-${index}`, \"data-cy\": \"instagram-embed\", title: `Instagram Post ${index}`, srcDoc: `${element.html}\n\t\t\t<script src=\"https://interactive.guim.co.uk/libs/iframe-messenger/iframeMessenger.js\"></script>\n\t\t\t<gu-script>iframeMessenger.enableAutoResize();</gu-script>` }) }));\n};\n","import type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport type { ButtonHTMLAttributes } from 'react';\nimport { buttonContents } from './shared';\nimport { buttonStyles } from './styles';\nimport type { SharedButtonProps } from './types';\n\nexport interface ButtonProps\n\textends SharedButtonProps,\n\t\tButtonHTMLAttributes<HTMLButtonElement> {}\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_button--primary-priority-default-theme) •\n * [Design System](https://theguardian.design/2a1e5182b/p/435225-button) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/button/Button.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components)\n *\n * Buttons enable users to make choices or perform actions.\n *\n */\nexport const Button = ({\n\tpriority,\n\tsize,\n\ticon: iconSvg,\n\ticonSide,\n\thideLabel,\n\tnudgeIcon,\n\ttype = 'button',\n\tisLoading = false,\n\tloadingAnnouncement = 'Loading',\n\tcssOverrides,\n\tchildren,\n\t...props\n}: ButtonProps): EmotionJSX.Element => (\n\t<button\n\t\tcss={buttonStyles({\n\t\t\tsize,\n\t\t\tpriority,\n\t\t\ticon: iconSvg,\n\t\t\thideLabel,\n\t\t\ticonSide,\n\t\t\tnudgeIcon,\n\t\t\tcssOverrides,\n\t\t\tisLoading,\n\t\t})}\n\t\ttype={type}\n\t\taria-live=\"polite\"\n\t\taria-label={isLoading ? loadingAnnouncement : undefined}\n\t\t{...props}\n\t>\n\t\t{buttonContents({\n\t\t\thideLabel,\n\t\t\ticonSvg,\n\t\t\tisLoading,\n\t\t\tchildren,\n\t\t})}\n\t</button>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M3.011 11.883 2 12.896l5.057 7.08h.48L22 5.005l-1.011-.986L7.537 16.207l-4.526-4.324Z\"\n\t\t/>\n\t</svg>\n);\n\nexport const SvgCheckmark = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tCheckmark\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n"],"names":["updateIframeHeight","queryString","iframes","slice","call","document","querySelectorAll","window","addEventListener","event","iframe","find","i","name","source","e","message","JSON","parse","data","type","height","value","forEach","src","getAttribute","replace","setAttribute","Promise","resolve","roleHeadlineSize","role","textSans","fontWeight","lineHeight","roleButtonSize","roleButtonText","ClickToView","children","onAccept","isTracking","isMainMedia","sourceDomain","useState","isOverlayClicked","setIsOverlayClicked","textSize","roleTextSize","_jsx","_Fragment","_jsxs","css","background","border","space","Button","priority","size","icon","SvgCheckmark","iconSide","onClick","setTimeout","fullWidthStyles","InstagramBlockComponent","element","index","isThirdPartyTracking","className","title","srcDoc","html","hideLabel","nudgeIcon","cssOverrides","isLoading","iconSvg","isAnnouncedByScreenReader","jsxs","visuallyHidden"],"sourceRoot":""}