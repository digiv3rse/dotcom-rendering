{"version":3,"file":"ReaderRevenueLinks-importable.legacy.33541eae4aa9874a789d.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/lib/querystring.ts","webpack://@guardian/dotcom-rendering/./src/web/components/ReaderRevenueLinks.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/acquisitions.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/contributions.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getIdapiUserData.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/setAutomat.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useIsInView.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useOnce.ts","webpack://@guardian/dotcom-rendering/./src/static/icons/arrow-right.svg"],"sourcesContent":["const constructQuery = (query) => Object.keys(query)\n    .map((param) => {\n    const value = query[param];\n    const queryValue = Array.isArray(value)\n        ? value.map((v) => encodeURIComponent(v)).join(',')\n        : encodeURIComponent(value);\n    return `${param}=${queryValue}`;\n})\n    .join('&');\nexport { constructQuery };\n","import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { getCookie } from '@guardian/libs';\nimport { brandAlt, brandText, from, headline, neutral, space, textSans, until, } from '@guardian/source-foundations';\nimport { getHeader } from '@guardian/support-dotcom-components';\nimport { useEffect, useState } from 'react';\nimport ArrowRightIcon from '../../static/icons/arrow-right.svg';\nimport { getOphanRecordFunction, sendOphanComponentEvent, submitComponentEvent, } from '../browser/ophan/ophan';\nimport { addTrackingCodesToUrl } from '../lib/acquisitions';\nimport { getLastOneOffContributionDate, getPurchaseInfo, MODULES_VERSION, shouldHideSupportMessaging, } from '../lib/contributions';\nimport { getLocaleCode } from '../lib/getCountryCode';\nimport { setAutomat } from '../lib/setAutomat';\nimport { useIsInView } from '../lib/useIsInView';\nimport { useOnce } from '../lib/useOnce';\nconst headerStyles = css `\n\tpadding-top: 39px;\n\tpadding-left: 10px;\n\tmax-width: 310px;\n\n\t${from.mobileMedium} {\n\t\tpadding-top: 44px;\n\t}\n\n\t${from.mobileLandscape} {\n\t\tpadding-left: ${space[5]}px;\n\t}\n\n\t${from.tablet} {\n\t\tpadding-top: ${space[1]}px;\n\t\tpadding-bottom: ${space[5]}px;\n\t\tpadding-left: ${space[5]}px;\n\t\tmax-width: 340px;\n\t}\n\n\t${from.desktop} {\n\t\tmax-width: none;\n\t}\n`;\nconst messageStyles = (isThankYouMessage) => css `\n\tcolor: ${brandAlt[400]};\n\t${headline.xxsmall({ fontWeight: 'bold' })};\n\tpadding-top: 3px;\n\tmargin-bottom: 3px;\n\n\t${from.desktop} {\n\t\t${headline.xsmall({ fontWeight: 'bold' })}\n\t}\n\n\t${from.leftCol} {\n\t\t${isThankYouMessage\n    ? headline.small({ fontWeight: 'bold' })\n    : headline.medium({ fontWeight: 'bold' })}\n\t}\n`;\nconst linkStyles = css `\n\tbackground: ${brandAlt[400]};\n\tborder-radius: 16px;\n\tbox-sizing: border-box;\n\tcolor: ${neutral[7]};\n\tfloat: left;\n\t${textSans.small()};\n\tfont-weight: 700;\n\theight: 32px;\n\ttext-decoration: none;\n\tpadding: 6px 12px 0 12px;\n\tline-height: 18px;\n\tposition: relative;\n\tmargin-right: 10px;\n\tmargin-bottom: 6px;\n\n\t${from.mobileMedium} {\n\t\tpadding-right: 34px;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tposition: absolute;\n\t\tright: 3px;\n\t\ttop: 50%;\n\t\theight: 32px;\n\t\twidth: 32px;\n\t\ttransform: translate(0, -50%);\n\t\ttransition: transform 0.3s ease-in-out;\n\n\t\t${until.mobileMedium} {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\t:hover svg {\n\t\ttransform: translate(3px, -50%);\n\t}\n`;\nconst hidden = css `\n\tdisplay: none;\n`;\nconst hiddenUntilTablet = css `\n\t${until.tablet} {\n\t\tdisplay: none;\n\t}\n`;\nconst hiddenFromTablet = css `\n\t${from.tablet} {\n\t\tdisplay: none;\n\t}\n`;\nconst subMessageStyles = css `\n\tcolor: ${brandText.primary};\n\t${textSans.medium()};\n\tmargin: 5px 0;\n`;\nconst ReaderRevenueLinksRemote = ({ countryCode, pageViewId, contributionsServiceUrl, ophanRecord, }) => {\n    const [supportHeaderResponse, setSupportHeaderResponse] = useState(null);\n    const [SupportHeader, setSupportHeader] = useState(null);\n    useOnce(() => {\n        setAutomat();\n        const isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n        const requestData = {\n            tracking: {\n                ophanPageId: pageViewId,\n                platformId: 'GUARDIAN_WEB',\n                referrerUrl: window.location.origin + window.location.pathname,\n                clientName: 'dcr',\n            },\n            targeting: {\n                showSupportMessaging: !shouldHideSupportMessaging(),\n                countryCode,\n                modulesVersion: MODULES_VERSION,\n                mvtId: Number(getCookie({ name: 'GU_mvt_id', shouldMemoize: true })),\n                lastOneOffContributionDate: getLastOneOffContributionDate(),\n                purchaseInfo: getPurchaseInfo(),\n                isSignedIn,\n            },\n        };\n        getHeader(contributionsServiceUrl, requestData)\n            .then((response) => {\n            if (!response.data) {\n                return null;\n            }\n            const { module } = response.data;\n            setSupportHeaderResponse(module);\n            return window\n                .guardianPolyfilledImport(module.url)\n                .then((headerModule) => {\n                setSupportHeader(() => headerModule[module.name] ?? null);\n            });\n        })\n            .catch((error) => {\n            const msg = `Error importing RR header links: ${String(error)}`;\n            console.log(msg);\n            window.guardian.modules.sentry.reportError(new Error(msg), 'rr-header-links');\n        });\n    }, [countryCode]);\n    if (SupportHeader !== null && supportHeaderResponse) {\n        return (_jsx(\"div\", { css: headerStyles, children: _jsx(SupportHeader, { submitComponentEvent: (componentEvent) => submitComponentEvent(componentEvent, ophanRecord), ...supportHeaderResponse.props }) }));\n    }\n    return null;\n};\nconst ReaderRevenueLinksNative = ({ editionId, dataLinkNamePrefix, inHeader, urls, ophanRecord, pageViewId, }) => {\n    const hideSupportMessaging = shouldHideSupportMessaging();\n    // Only the header component is in the AB test\n    const testName = inHeader ? 'RRHeaderLinks' : 'RRFooterLinks';\n    const campaignCode = `${testName}_control`;\n    const tracking = {\n        abTestName: testName,\n        abTestVariant: 'control',\n        componentType: inHeader ? 'ACQUISITIONS_HEADER' : 'ACQUISITIONS_FOOTER',\n        campaignCode,\n    };\n    const [hasBeenSeen, setNode] = useIsInView({\n        threshold: 0,\n        debounce: true,\n    });\n    useEffect(() => {\n        if (!hideSupportMessaging && inHeader) {\n            sendOphanComponentEvent('INSERT', tracking, ophanRecord);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    useEffect(() => {\n        if (hasBeenSeen && inHeader) {\n            sendOphanComponentEvent('VIEW', tracking, ophanRecord);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [hasBeenSeen]);\n    const getUrl = (rrType) => {\n        if (inHeader) {\n            return addTrackingCodesToUrl({\n                base: `https://support.theguardian.com/${rrType}`,\n                componentType: 'ACQUISITIONS_HEADER',\n                componentId: campaignCode,\n                campaignCode,\n                abTest: {\n                    name: testName,\n                    variant: 'control',\n                },\n                pageViewId,\n                referrerUrl: window.location.origin + window.location.pathname,\n            });\n        }\n        return urls[rrType];\n    };\n    if (hideSupportMessaging) {\n        return (_jsx(\"div\", { css: inHeader && headerStyles, children: _jsxs(\"div\", { css: inHeader && hiddenUntilTablet, children: [_jsx(\"div\", { css: messageStyles(true), children: \" Thank you \" }), _jsx(\"div\", { css: subMessageStyles, children: \"Your support powers our independent journalism\" })] }) }));\n    }\n    const ContributeButton = () => (_jsxs(\"a\", { css: linkStyles, href: getUrl('contribute'), \"data-link-name\": `${dataLinkNamePrefix}contribute-cta`, children: [\"Contribute \", _jsx(ArrowRightIcon, {})] }));\n    const SubscribeButton = () => (_jsxs(\"a\", { css: linkStyles, href: getUrl('subscribe'), \"data-link-name\": `${dataLinkNamePrefix}subscribe-cta`, children: [\"Subscribe \", _jsx(ArrowRightIcon, {})] }));\n    const SupportButton = () => (_jsxs(\"a\", { css: linkStyles, href: getUrl('contribute'), \"data-link-name\": `${dataLinkNamePrefix}subscribe-cta`, children: [\"Support us \", _jsx(ArrowRightIcon, {})] }));\n    const PrimaryButton = editionId === 'UK' ? SubscribeButton : ContributeButton;\n    const SecondaryButton = editionId === 'UK' ? ContributeButton : SubscribeButton;\n    return (_jsxs(\"div\", { ref: setNode, css: inHeader && headerStyles, children: [_jsxs(\"div\", { css: inHeader && hiddenUntilTablet, children: [_jsx(\"div\", { css: messageStyles(false), children: _jsx(\"span\", { children: \"Support the\\u00A0Guardian\" }) }), _jsx(\"div\", { css: subMessageStyles, children: _jsx(\"div\", { children: \"Available for everyone, funded by readers\" }) }), inHeader ? (_jsxs(_Fragment, { children: [_jsx(PrimaryButton, {}), _jsx(SecondaryButton, {})] })) : (_jsx(SupportButton, {}))] }), _jsx(\"div\", { css: inHeader ? hiddenFromTablet : hidden, children: _jsx(PrimaryButton, {}) })] }));\n};\nexport const ReaderRevenueLinks = ({ editionId, dataLinkNamePrefix, inHeader, remoteHeader, urls, contributionsServiceUrl, }) => {\n    const [countryCode, setCountryCode] = useState();\n    const pageViewId = window.guardian.config.ophan.pageViewId;\n    const ophanRecord = getOphanRecordFunction();\n    useEffect(() => {\n        const callFetch = () => {\n            getLocaleCode()\n                .then((cc) => {\n                setCountryCode(cc ?? '');\n            })\n                .catch((e) => console.error(`countryCodePromise - error: ${String(e)}`));\n        };\n        callFetch();\n    }, []);\n    if (countryCode) {\n        if (inHeader && remoteHeader) {\n            return (_jsx(ReaderRevenueLinksRemote, { countryCode: countryCode, pageViewId: pageViewId, contributionsServiceUrl: contributionsServiceUrl, ophanRecord: ophanRecord }));\n        }\n        return (_jsx(ReaderRevenueLinksNative, { editionId: editionId, dataLinkNamePrefix: dataLinkNamePrefix, inHeader: inHeader, urls: urls, ophanRecord: ophanRecord, pageViewId: pageViewId }));\n    }\n    return null;\n};\n","import { constructQuery } from '../../lib/querystring';\n// Adds acquisition tracking codes if it is a support url\nexport const addTrackingCodesToUrl = ({ base, componentType, componentId, campaignCode, abTest, pageViewId, referrerUrl, }) => {\n    const isSupportUrl = base.search(/(support.theguardian.com)(\\/[a-z]*)?\\/(contribute|subscribe)/) >= 0;\n    if (isSupportUrl) {\n        const acquisitionData = {\n            source: 'GUARDIAN_WEB',\n            componentId,\n            componentType,\n            campaignCode,\n            abTest,\n            referrerPageviewId: pageViewId,\n            referrerUrl,\n        };\n        const params = {\n            REFPVID: pageViewId,\n            INTCMP: campaignCode,\n            acquisitionData: JSON.stringify(acquisitionData),\n        };\n        return `${base}${base.includes('?') ? '&' : '?'}${constructQuery(params)}`;\n    }\n    return base;\n};\n","import { onConsentChange } from '@guardian/consent-management-platform';\nimport { getCookie } from '@guardian/libs';\nimport { useState } from 'react';\nimport { getIdApiUserData } from './getIdapiUserData';\nimport { useOnce } from './useOnce';\n// User Atributes API cookies (dropped on sign-in)\nexport const HIDE_SUPPORT_MESSAGING_COOKIE = 'gu_hide_support_messaging';\nexport const RECURRING_CONTRIBUTOR_COOKIE = 'gu_recurring_contributor';\nexport const ONE_OFF_CONTRIBUTION_DATE_COOKIE = 'gu_one_off_contribution_date';\nexport const OPT_OUT_OF_ARTICLE_COUNT_COOKIE = 'gu_article_count_opt_out';\n// Support Frontend cookies (dropped when contribution is made)\nexport const SUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE = 'gu.contributions.recurring.contrib-timestamp.Monthly';\nexport const SUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE = 'gu.contributions.recurring.contrib-timestamp.Annual';\nexport const SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE = 'gu.contributions.contrib-timestamp';\n//  Local storage keys\nconst DAILY_ARTICLE_COUNT_KEY = 'gu.history.dailyArticleCount';\nconst WEEKLY_ARTICLE_COUNT_KEY = 'gu.history.weeklyArticleCount';\nexport const NO_RR_BANNER_TIMESTAMP_KEY = 'gu.noRRBannerTimestamp'; // timestamp of when we were last told not to show a RR banner\n// See https://github.com/guardian/support-dotcom-components/blob/main/module-versions.md\nexport const MODULES_VERSION = 'v3';\n// Cookie set by the User Attributes API upon signing in.\n// Value computed server-side and looks at all of the user's active products,\n// including but not limited to recurring & one-off contributions,\n// paper & digital subscriptions, as well as user tiers (GU supporters/staff/partners/patrons).\n// https://github.com/guardian/members-data-api/blob/3a72dc00b9389968d91e5930686aaf34d8040c52/membership-attribute-service/app/models/Attributes.scala\nconst shouldShowSupportMessaging = () => {\n    const hideSupportMessaging = getCookie({ name: HIDE_SUPPORT_MESSAGING_COOKIE }) === 'true';\n    return !hideSupportMessaging;\n};\n// Determine if user is a recurring contributor by checking if they are signed in\n// AND have at least one of the relevant cookies.\n// We need to look at both User Attributes and Frontend Support cookies\n// as the former might not reflect the latest contributor status, since it's set upon signing in.\n// Frontend Support cookies are set when a contribution is made.\nexport const isRecurringContributor = (isSignedIn) => {\n    // Attributes cookie - we want this to have a specific value\n    const isRecurringContributorFromAttrs = getCookie({ name: RECURRING_CONTRIBUTOR_COOKIE }) === 'true';\n    // Support cookies - we only care whether these exist\n    const hasMonthlyContributionCookie = getCookie({\n        name: SUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE,\n        shouldMemoize: true,\n    }) !== null;\n    const hasAnnualContributionCookie = getCookie({\n        name: SUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE,\n        shouldMemoize: true,\n    }) !== null;\n    return (isSignedIn &&\n        (isRecurringContributorFromAttrs ||\n            hasMonthlyContributionCookie ||\n            hasAnnualContributionCookie));\n};\n// looks at attribute and support cookies\n// ONE_OFF_CONTRIBUTION_DATE_COOKIE (attributes cookie, when loggin in)\n// SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE (support cookie, when making one-off contribution)\n// Get the date of the latest one-off contribution by looking at the two relevant cookies\n// and returning a Unix epoch string of the latest date found.\nexport const getLastOneOffContributionTimestamp = () => {\n    // Attributes cookie - expects YYYY-MM-DD\n    const contributionDateFromAttributes = getCookie({\n        name: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n    });\n    // Support cookies - expects Unix epoch\n    const contributionDateFromSupport = getCookie({\n        name: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n    });\n    if (!contributionDateFromAttributes && !contributionDateFromSupport) {\n        return undefined;\n    }\n    // Parse dates into common format so they can be compared\n    const parsedDateFromAttributes = contributionDateFromAttributes\n        ? Date.parse(contributionDateFromAttributes)\n        : 0;\n    const parsedDateFromSupport = contributionDateFromSupport\n        ? parseInt(contributionDateFromSupport, 10)\n        : 0;\n    // Return most recent date\n    // Condition only passed if 'parsedDateFromAttributes' is NOT NaN\n    if (parsedDateFromAttributes > parsedDateFromSupport) {\n        return parsedDateFromAttributes;\n    }\n    return parsedDateFromSupport || undefined; // This guards against 'parsedDateFromSupport' being NaN\n};\nexport const getLastOneOffContributionDate = () => {\n    const timestamp = getLastOneOffContributionTimestamp();\n    if (timestamp === undefined) {\n        return undefined;\n    }\n    const date = new Date(timestamp);\n    const year = date.getFullYear();\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const day = date.getDate().toString().padStart(2, '0');\n    return `${year}-${month}-${day}`;\n};\nconst dateDiffDays = (from, to) => {\n    const oneDayMs = 1000 * 60 * 60 * 24;\n    const diffMs = to - from;\n    return Math.floor(diffMs / oneDayMs);\n};\nconst AskPauseDays = 90;\nexport const isRecentOneOffContributor = () => {\n    const lastContributionDate = getLastOneOffContributionTimestamp();\n    if (lastContributionDate !== undefined) {\n        const now = Date.now();\n        return dateDiffDays(lastContributionDate, now) <= AskPauseDays;\n    }\n    return false;\n};\nexport const shouldHideSupportMessaging = (isSignedIn = false) => !shouldShowSupportMessaging() ||\n    isRecurringContributor(isSignedIn) ||\n    isRecentOneOffContributor();\nexport const REQUIRED_CONSENTS_FOR_ARTICLE_COUNT = [1, 3, 7];\nconst REQUIRED_CONSENTS_FOR_BROWSER_ID = [1, 3, 5, 7];\nexport const hasArticleCountOptOutCookie = () => getCookie({ name: OPT_OUT_OF_ARTICLE_COUNT_COOKIE }) !== null;\nconst removeArticleCountsFromLocalStorage = () => {\n    window.localStorage.removeItem(DAILY_ARTICLE_COUNT_KEY);\n    window.localStorage.removeItem(WEEKLY_ARTICLE_COUNT_KEY);\n};\nexport const hasCmpConsentForArticleCount = () => {\n    return new Promise((resolve) => {\n        if (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n            resolve(true);\n        }\n        onConsentChange(({ ccpa, tcfv2, aus }) => {\n            if (ccpa || aus) {\n                resolve(true);\n            }\n            else if (tcfv2) {\n                const hasRequiredConsents = REQUIRED_CONSENTS_FOR_ARTICLE_COUNT.every((consent) => tcfv2.consents[consent]);\n                if (!hasRequiredConsents) {\n                    removeArticleCountsFromLocalStorage();\n                }\n                resolve(hasRequiredConsents);\n            }\n        });\n    });\n};\nexport const hasOptedOutOfArticleCount = async () => {\n    const hasCmpConsent = await hasCmpConsentForArticleCount();\n    return !hasCmpConsent || hasArticleCountOptOutCookie();\n};\n// A hook to find out if a user has opted out of article counting\nexport const useHasOptedOutOfArticleCount = () => {\n    const [hasOptedOut, setHasOptedOut] = useState('Pending');\n    useOnce(() => {\n        hasOptedOutOfArticleCount()\n            .then(setHasOptedOut)\n            .catch(() => setHasOptedOut(true));\n    }, []);\n    return hasOptedOut;\n};\nexport const hasCmpConsentForBrowserId = () => new Promise((resolve) => {\n    if (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n        resolve(true);\n    }\n    onConsentChange(({ ccpa, tcfv2, aus }) => {\n        if (ccpa || aus) {\n            resolve(true);\n        }\n        else if (tcfv2) {\n            const hasRequiredConsents = REQUIRED_CONSENTS_FOR_BROWSER_ID.every((consent) => tcfv2.consents[consent]);\n            resolve(hasRequiredConsents);\n        }\n    });\n});\nconst twentyMins = 20 * 60000;\nexport const withinLocalNoBannerCachePeriod = () => {\n    const item = window.localStorage.getItem(NO_RR_BANNER_TIMESTAMP_KEY);\n    if (item && !Number.isNaN(parseInt(item, 10))) {\n        const withinCachePeriod = parseInt(item, 10) + twentyMins > Date.now();\n        if (!withinCachePeriod) {\n            // Expired\n            window.localStorage.removeItem(NO_RR_BANNER_TIMESTAMP_KEY);\n        }\n        return withinCachePeriod;\n    }\n    return false;\n};\nexport const setLocalNoBannerCachePeriod = () => window.localStorage.setItem(NO_RR_BANNER_TIMESTAMP_KEY, `${Date.now()}`);\nconst getEmail = (ajaxUrl) => {\n    return getIdApiUserData(ajaxUrl)\n        .then((data) => data.user?.primaryEmailAddress)\n        .catch((error) => {\n        window.guardian.modules.sentry.reportError(error, 'getEmail');\n        return undefined;\n    });\n};\nexport const lazyFetchEmailWithTimeout = (idapiUrl) => () => {\n    return new Promise((resolve) => {\n        setTimeout(() => resolve(null), 1000);\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        getEmail(idapiUrl).then((email) => {\n            if (email) {\n                resolve(email);\n            }\n            else {\n                resolve(null);\n            }\n        });\n    });\n};\nexport const getContributionsServiceUrl = (article) => process.env.SDC_URL ?? article.contributionsServiceUrl;\nexport const getPurchaseInfo = () => {\n    const purchaseInfoRaw = getCookie({\n        name: 'GU_CO_COMPLETE',\n        shouldMemoize: true,\n    });\n    if (!purchaseInfoRaw) {\n        return undefined;\n    }\n    let purchaseInfo;\n    try {\n        purchaseInfo = JSON.parse(decodeURIComponent(purchaseInfoRaw));\n    }\n    catch { } // eslint-disable-line no-empty -- silently handle error\n    return purchaseInfo;\n};\n","import { joinUrl } from '@guardian/libs';\nfunction checkForErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText ||\n            `getIdApiUserData | An api call returned HTTP status ${response.status}`);\n    }\n    return response;\n}\nconst callApi = (url) => {\n    return fetch(url, {\n        credentials: 'include',\n    })\n        .then(checkForErrors)\n        .then((response) => response.json());\n};\nconst cache = {};\nexport const getIdApiUserData = (ajaxUrl) => {\n    if (!cache.idapiUserMeResponse) {\n        const url = joinUrl(ajaxUrl, 'user/me');\n        cache.idapiUserMeResponse = callApi(url);\n    }\n    return cache.idapiUserMeResponse;\n};\nexport const getIdapiUserIdentifiers = (ajaxUrl) => {\n    if (!cache.idapiUserIdentifiersResponse) {\n        const url = joinUrl(ajaxUrl, 'user/me/identifiers');\n        cache.idapiUserIdentifiersResponse = callApi(url);\n    }\n    return cache.idapiUserIdentifiersResponse;\n};\n","import * as emotionReact from '@emotion/react';\nimport * as emotionReactJsxRuntime from '@emotion/react/jsx-runtime';\nimport React from 'react';\nlet hasAutomatBeenSet = false;\nexport const setAutomat = () => {\n    if (!hasAutomatBeenSet) {\n        window.guardian.automat = {\n            emotionReact,\n            emotionReactJsxRuntime,\n            react: React,\n        };\n        hasAutomatBeenSet = true;\n    }\n};\n","import libDebounce from 'lodash.debounce';\nimport { useEffect, useRef, useState } from 'react';\n/**\n * Custom hook around the `IntersectionObserver`.\n *\n * @param options\n * @param {boolean} [options.debouce] If `true`, debounce triggers by 200ms.\n * By default, trigger instantaneously. Enabling debouncing ensures the target\n * element intersects for at least 200ms before the callback is executed\n * @param {boolean} [options.repeat] If `true`, trigger the hook on\n * all intersections. By default, only trigger on the first intersection.\n * @param {boolean} [options.node] Set the initial node, if known.\n * @returns a tuple containing [isInView, setNode];\n */\nconst useIsInView = (options) => {\n    const [isInView, setIsInView] = useState(false);\n    const [node, setNode] = useState(options.node ?? null);\n    const observer = useRef(null);\n    const intersectionFn = ([entry]) => {\n        if (!entry)\n            return;\n        if (entry.isIntersecting) {\n            setIsInView(true);\n        }\n        else if (options.repeat) {\n            setIsInView(false);\n        }\n    };\n    const intersectionCallback = options.debounce\n        ? libDebounce(intersectionFn, 200)\n        : intersectionFn;\n    useEffect(() => {\n        // TODO: can we remove this? It’s now always cleaned up\n        if (observer.current) {\n            observer.current.disconnect();\n        }\n        // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions, @typescript-eslint/no-unnecessary-condition -- Safety for browser support\n        if (window.IntersectionObserver) {\n            observer.current = new window.IntersectionObserver(intersectionCallback, options);\n            if (node) {\n                observer.current.observe(node);\n            }\n        }\n        return () => observer.current?.disconnect();\n    }, [node, options, intersectionCallback]);\n    return [isInView, setNode];\n};\nexport { useIsInView };\n","import { useEffect, useState } from 'react';\n/**\n * Ensures that the given task is only run once and only after all items in waitFor are defined\n * @param {Function} task - The task to execute once\n * @param {Array} waitFor - An array of variables that must be defined before the task is executed\n * */\nexport const useOnce = (task, waitFor) => {\n    const [alreadyRun, setAlreadyRun] = useState(false);\n    const isReady = waitFor.every((dep) => dep !== undefined);\n    useEffect(() => {\n        if (!alreadyRun && isReady) {\n            task();\n            setAlreadyRun(true);\n        }\n    }, [alreadyRun, isReady, task]);\n};\n","\nmodule.exports = {\"attributes\":{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"30\",\"height\":\"30\",\"viewBox\":\"0 0 30 30\"},\"content\":\"<path d=\\\"M22.8 14.6l-7.6-7.6-.7.7 5.5 6.6h-14v1.5h14l-5.5 6.6.7.7 7.6-7.6v-.9\\\"/>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n"],"names":["constructQuery","query","Object","keys","map","param","value","queryValue","Array","isArray","v","encodeURIComponent","join","headerStyles","css","from","space","messageStyles","isThankYouMessage","brandAlt","headline","fontWeight","linkStyles","neutral","textSans","until","hidden","hiddenUntilTablet","hiddenFromTablet","subMessageStyles","brandText","ReaderRevenueLinksRemote","countryCode","pageViewId","contributionsServiceUrl","ophanRecord","useState","supportHeaderResponse","setSupportHeaderResponse","SupportHeader","setSupportHeader","useOnce","setAutomat","isSignedIn","getCookie","name","shouldMemoize","requestData","tracking","ophanPageId","platformId","referrerUrl","window","location","origin","pathname","clientName","targeting","showSupportMessaging","shouldHideSupportMessaging","modulesVersion","MODULES_VERSION","mvtId","Number","lastOneOffContributionDate","getLastOneOffContributionDate","purchaseInfo","getPurchaseInfo","getHeader","then","response","data","module","guardianPolyfilledImport","url","headerModule","catch","error","msg","String","console","log","guardian","modules","sentry","reportError","Error","_jsx","children","submitComponentEvent","componentEvent","props","ReaderRevenueLinksNative","editionId","dataLinkNamePrefix","inHeader","urls","hideSupportMessaging","testName","campaignCode","abTestName","abTestVariant","componentType","useIsInView","threshold","debounce","hasBeenSeen","setNode","useEffect","sendOphanComponentEvent","getUrl","rrType","addTrackingCodesToUrl","base","componentId","abTest","variant","_jsxs","ContributeButton","href","ArrowRightIcon","SubscribeButton","PrimaryButton","SecondaryButton","ref","_Fragment","ReaderRevenueLinks","remoteHeader","setCountryCode","config","ophan","getOphanRecordFunction","getLocaleCode","cc","e","search","acquisitionData","source","referrerPageviewId","params","REFPVID","INTCMP","JSON","stringify","includes","HIDE_SUPPORT_MESSAGING_COOKIE","RECURRING_CONTRIBUTOR_COOKIE","SUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE","SUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE","SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE","NO_RR_BANNER_TIMESTAMP_KEY","shouldShowSupportMessaging","isRecurringContributor","isRecurringContributorFromAttrs","hasMonthlyContributionCookie","hasAnnualContributionCookie","getLastOneOffContributionTimestamp","contributionDateFromAttributes","contributionDateFromSupport","parsedDateFromAttributes","Date","parse","parsedDateFromSupport","parseInt","undefined","timestamp","date","year","getFullYear","month","getMonth","toString","padStart","day","getDate","isRecentOneOffContributor","diffMs","lastContributionDate","now","Math","floor","REQUIRED_CONSENTS_FOR_ARTICLE_COUNT","REQUIRED_CONSENTS_FOR_BROWSER_ID","hasCmpConsentForArticleCount","Promise","resolve","onConsentChange","ccpa","tcfv2","aus","hasRequiredConsents","every","consent","consents","localStorage","removeItem","hasOptedOutOfArticleCount","hasCmpConsent","useHasOptedOutOfArticleCount","hasOptedOut","setHasOptedOut","hasCmpConsentForBrowserId","withinLocalNoBannerCachePeriod","item","getItem","isNaN","withinCachePeriod","setLocalNoBannerCachePeriod","setItem","lazyFetchEmailWithTimeout","idapiUrl","ajaxUrl","setTimeout","getIdApiUserData","user","primaryEmailAddress","email","purchaseInfoRaw","decodeURIComponent","checkForErrors","ok","statusText","status","callApi","fetch","credentials","json","cache","idapiUserMeResponse","joinUrl","getIdapiUserIdentifiers","idapiUserIdentifiersResponse","hasAutomatBeenSet","automat","emotionReact","emotionReactJsxRuntime","react","React","options","isInView","setIsInView","node","observer","useRef","intersectionFn","entry","isIntersecting","repeat","intersectionCallback","libDebounce","current","disconnect","IntersectionObserver","observe","task","waitFor","alreadyRun","setAlreadyRun","isReady","dep","exports","desvg"],"sourceRoot":""}