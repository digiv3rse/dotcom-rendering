(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[1242],{3698:(e,t,n)=>{e.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 30 30"},content:'<path d="M22.8 14.6l-7.6-7.6-.7.7 5.5 6.6h-14v1.5h14l-5.5 6.6.7.7 7.6-7.6v-.9"/>'};var r=n(5951);e.exports=r(e.exports)},828:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=e=>Object.keys(e).map((t=>{const n=e[t],r=Array.isArray(n)?n.map((e=>encodeURIComponent(e))).join(","):encodeURIComponent(n);return"".concat(t,"=").concat(r)})).join("&")},7271:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SupportTheG:()=>H});var r=n(7800),o=n(43),i=n(1614),s=n(1810),c=n(4436),a=n(7357),u=n(3196),l=n(683),d=n(1279),p=n(3904),g=n(3698),m=n.n(g),f=n(9038),h=n(3424),b=n(4914),w=n(6134),v=n(6354),y=n(4463),x=n(7410);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}function O(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function j(){const e=O(["\n\tpadding-top: 39px;\n\tpadding-left: 10px;\n\tmax-width: 310px;\n\n\t"," {\n\t\tpadding-top: 44px;\n\t}\n\n\t"," {\n\t\tpadding-left: ","px;\n\t}\n\n\t"," {\n\t\tpadding-top: ","px;\n\t\tpadding-bottom: ","px;\n\t\tpadding-left: ","px;\n\t\tmax-width: 340px;\n\t}\n\n\t"," {\n\t\tmax-width: none;\n\t}\n"]);return j=function(){return e},e}function C(){const e=O(["\n\tcolor: ",";\n\t","\n\tpadding-top: 3px;\n\tmargin-bottom: 3px;\n\n\t"," {\n\t\t","\n\t}\n\n\t"," {\n\t\t","\n\t}\n"]);return C=function(){return e},e}function k(){const e=O(["\n\tbackground: ",";\n\tborder-radius: 16px;\n\tbox-sizing: border-box;\n\tcolor: ",";\n\tfloat: left;\n\t",";\n\tfont-weight: 700;\n\theight: 32px;\n\ttext-decoration: none;\n\tpadding: 6px 12px 0 12px;\n\tline-height: 18px;\n\tposition: relative;\n\tmargin-right: 10px;\n\tmargin-bottom: 6px;\n\n\t"," {\n\t\tpadding-right: 34px;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tposition: absolute;\n\t\tright: 3px;\n\t\ttop: 50%;\n\t\theight: 32px;\n\t\twidth: 32px;\n\t\ttransform: translate(0, -50%);\n\t\ttransition: transform 0.3s ease-in-out;\n\n\t\t"," {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\t:hover svg {\n\t\ttransform: translate(3px, -50%);\n\t}\n"]);return k=function(){return e},e}function D(){const e=O(["\n\tdisplay: none;\n"]);return D=function(){return e},e}function P(){const e=O(["\n\t"," {\n\t\tdisplay: none;\n\t}\n"]);return P=function(){return e},e}function R(){const e=O(["\n\t"," {\n\t\tdisplay: none;\n\t}\n"]);return R=function(){return e},e}function T(){const e=O(["\n\tcolor: ",";\n\t",";\n\tmargin: 5px 0;\n"]);return T=function(){return e},e}const E=(0,o.css)(j(),s.Dp.mobileMedium,s.Dp.mobileLandscape,c.D[5],s.Dp.tablet,c.D[1],c.D[3],c.D[5],s.Dp.desktop),_=e=>(0,o.css)(C(),a.A5[400],u.Se.xxsmall({fontWeight:"bold"}),s.Dp.desktop,u.Se.xsmall({fontWeight:"bold"}),s.Dp.leftCol,e?u.Se.small({fontWeight:"bold"}):u.Se.medium({fontWeight:"bold"})),U=(0,o.css)(k(),a.A5[400],a.n$[7],u.OS.small(),s.Dp.mobileMedium,s.C4.mobileMedium),A=(0,o.css)(D()),M=(0,o.css)(P(),s.C4.tablet),N=(0,o.css)(R(),s.Dp.tablet),z=(0,o.css)(T(),l.zb.primary,u.OS.medium()),L=e=>{let{countryCode:t,pageViewId:n,contributionsServiceUrl:o,ophanRecord:s}=e;const[c,a]=(0,p.useState)(null),[u,l]=(0,p.useState)(null);return(0,x.t)((()=>{(0,v.R)();const e=!!(0,i.e)({name:"GU_U",shouldMemoize:!0}),r={tracking:{ophanPageId:n,platformId:"GUARDIAN_WEB",referrerUrl:window.location.origin+window.location.pathname,clientName:"dcr"},targeting:{showSupportMessaging:!(0,b.S9)(),countryCode:t,modulesVersion:b.BQ,mvtId:Number((0,i.e)({name:"GU_mvt_id",shouldMemoize:!0})),lastOneOffContributionDate:(0,b.tq)(),purchaseInfo:(0,b.cs)(),isSignedIn:e}};(0,d.Pg)(o,r).then((e=>{if(!e.data)return null;const{module:t}=e.data;return a(t),window.guardianPolyfilledImport(t.url).then((e=>{var n;l((()=>null!==(n=e[t.name])&&void 0!==n?n:null))}))})).catch((e=>{const t="Error importing RR header links: ".concat(String(e));console.log(t),window.guardian.modules.sentry.reportError(new Error(t),"rr-header-links")}))}),[t]),null!==u&&c?(0,r.jsx)("div",{css:E,children:(0,r.jsx)(u,I({submitComponentEvent:e=>(0,f.X4)(e,s)},c.props))}):null},V=e=>{let{editionId:t,dataLinkNamePrefix:n,inHeader:o,urls:i,ophanRecord:s,pageViewId:c}=e;const a=(0,b.S9)(),u=o?"RRHeaderLinks":"RRFooterLinks",l="".concat(u,"_control"),d={abTestName:u,abTestVariant:"control",componentType:o?"ACQUISITIONS_HEADER":"ACQUISITIONS_FOOTER",campaignCode:l},[g,w]=(0,y.O)({threshold:0,debounce:!0});(0,p.useEffect)((()=>{!a&&o&&(0,f.n2)("INSERT",d,s)}),[]),(0,p.useEffect)((()=>{g&&o&&(0,f.n2)("VIEW",d,s)}),[g]);const v=e=>o?(0,h.y)({base:"https://support.theguardian.com/".concat(e),componentType:"ACQUISITIONS_HEADER",componentId:l,campaignCode:l,abTest:{name:u,variant:"control"},pageViewId:c,referrerUrl:window.location.origin+window.location.pathname}):i[e];if(a)return(0,r.jsx)("div",{css:o&&E,children:(0,r.jsxs)("div",{css:o&&M,children:[(0,r.jsx)("div",{css:_(!0),children:" Thank you "}),(0,r.jsx)("div",{css:z,children:"Your support powers our independent journalism"})]})});const x=()=>(0,r.jsxs)("a",{css:U,href:v("contribute"),"data-link-name":"".concat(n,"contribute-cta"),children:["Contribute ",(0,r.jsx)(m(),{})]}),S=()=>(0,r.jsxs)("a",{css:U,href:v("subscribe"),"data-link-name":"".concat(n,"subscribe-cta"),children:["Subscribe ",(0,r.jsx)(m(),{})]}),I="UK"===t?S:x,O="UK"===t?x:S;return(0,r.jsxs)("div",{ref:w,css:o&&E,children:[(0,r.jsxs)("div",{css:o&&M,children:[(0,r.jsx)("div",{css:_(!1),children:(0,r.jsx)("span",{children:"Support theÂ Guardian"})}),(0,r.jsx)("div",{css:z,children:(0,r.jsx)("div",{children:"Available for everyone, funded by readers"})}),(0,r.jsx)(I,{}),(0,r.jsx)(O,{})]}),(0,r.jsx)("div",{css:o?N:A,children:(0,r.jsx)(I,{})})]})},H=e=>{let{editionId:t,dataLinkNamePrefix:n,inHeader:o,remoteHeader:i,urls:s,contributionsServiceUrl:c}=e;const[a,u]=(0,p.useState)(),l=window.guardian.config.ophan.pageViewId,d=(0,f.ZL)();return(0,p.useEffect)((()=>{(0,w.A)().then((e=>{u(null!=e?e:"")})).catch((e=>console.error("countryCodePromise - error: ".concat(String(e)))))}),[]),a?o&&i?(0,r.jsx)(L,{countryCode:a,pageViewId:l,contributionsServiceUrl:c,ophanRecord:d}):(0,r.jsx)(V,{editionId:t,dataLinkNamePrefix:n,inHeader:o,urls:s,ophanRecord:d,pageViewId:l}):null}},3424:(e,t,n)=>{"use strict";n.d(t,{y:()=>o});var r=n(828);const o=e=>{let{base:t,componentType:n,componentId:o,campaignCode:i,abTest:s,pageViewId:c,referrerUrl:a}=e;if(t.search(/(support.theguardian.com)(\/[a-z]*)?\/(contribute|subscribe)/)>=0){const e={source:"GUARDIAN_WEB",componentId:o,componentType:n,campaignCode:i,abTest:s,referrerPageviewId:c,referrerUrl:a},u={REFPVID:c,INTCMP:i,acquisitionData:JSON.stringify(e)};return"".concat(t).concat(t.includes("?")?"&":"?").concat((0,r.A)(u))}return t}},4914:(e,t,n)=>{"use strict";n.d(t,{Am:()=>O,BQ:()=>m,C6:()=>a,CC:()=>p,G9:()=>I,H2:()=>C,K3:()=>l,Pl:()=>k,S9:()=>y,T0:()=>h,Ty:()=>u,ZD:()=>D,cs:()=>R,nh:()=>P,qQ:()=>b,qw:()=>j,tq:()=>w,y0:()=>d});var r=n(8706),o=n(1614),i=n(3904),s=n(3179),c=n(7410);const a="gu_hide_support_messaging",u="gu_recurring_contributor",l="gu.contributions.recurring.contrib-timestamp.Monthly",d="gu.contributions.recurring.contrib-timestamp.Annual",p="gu.contributions.contrib-timestamp",g="gu.noRRBannerTimestamp",m="v3",f=()=>!("true"===(0,o.e)({name:a})),h=e=>{const t="true"===(0,o.e)({name:u}),n=null!==(0,o.e)({name:l,shouldMemoize:!0}),r=null!==(0,o.e)({name:d,shouldMemoize:!0});return e&&(t||n||r)},b=()=>{const e=(0,o.e)({name:"gu_one_off_contribution_date"}),t=(0,o.e)({name:p});if(!e&&!t)return;const n=e?Date.parse(e):0,r=t?parseInt(t,10):0;return n>r?n:r||void 0},w=()=>{const e=b();if(void 0===e)return;const t=new Date(e),n=t.getFullYear(),r=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(o)},v=()=>{const e=b();return void 0!==e&&((e,t)=>{const n=Date.now()-e;return Math.floor(n/864e5)})(e)<=90},y=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!f()||h(e)||v()},x=[1,3,7],S=[1,3,5,7],I=()=>new Promise((e=>{(0,o.e)({name:"gu-cmp-disabled",shouldMemoize:!0})&&e(!0),(0,r.onConsentChange)((t=>{let{ccpa:n,tcfv2:r,aus:o}=t;if(n||o)e(!0);else if(r){const t=x.every((e=>r.consents[e]));t||(window.localStorage.removeItem("gu.history.dailyArticleCount"),window.localStorage.removeItem("gu.history.weeklyArticleCount")),e(t)}}))})),O=async()=>!await I()||null!==(0,o.e)({name:"gu_article_count_opt_out"}),j=()=>{const[e,t]=(0,i.useState)("Pending");return(0,c.t)((()=>{O().then(t).catch((()=>t(!0)))}),[]),e},C=()=>new Promise((e=>{(0,o.e)({name:"gu-cmp-disabled",shouldMemoize:!0})&&e(!0),(0,r.onConsentChange)((t=>{let{ccpa:n,tcfv2:r,aus:o}=t;if(n||o)e(!0);else if(r){const t=S.every((e=>r.consents[e]));e(t)}}))})),k=()=>{const e=window.localStorage.getItem(g);if(e&&!Number.isNaN(parseInt(e,10))){const t=parseInt(e,10)+12e5>Date.now();return t||window.localStorage.removeItem(g),t}return!1},D=()=>window.localStorage.setItem(g,"".concat(Date.now())),P=e=>()=>new Promise((t=>{var n;setTimeout((()=>t(null)),1e3),(n=e,(0,s._)(n).then((e=>{var t;return null===(t=e.user)||void 0===t?void 0:t.primaryEmailAddress})).catch((e=>{window.guardian.modules.sentry.reportError(e,"getEmail")}))).then((e=>{t(e||null)}))})),R=()=>{const e=(0,o.e)({name:"GU_CO_COMPLETE",shouldMemoize:!0});if(!e)return;let t;try{t=JSON.parse(decodeURIComponent(e))}catch(e){}return t}},3179:(e,t,n)=>{"use strict";n.d(t,{T:()=>a,_:()=>c});var r=n(5726);function o(e){if(!e.ok)throw Error(e.statusText||"getIdApiUserData | An api call returned HTTP status ".concat(e.status));return e}const i=e=>fetch(e,{credentials:"include"}).then(o).then((e=>e.json())),s={},c=e=>{if(!s.idapiUserMeResponse){const t=(0,r.p)(e,"user/me");s.idapiUserMeResponse=i(t)}return s.idapiUserMeResponse},a=e=>{if(!s.idapiUserIdentifiersResponse){const t=(0,r.p)(e,"user/me/identifiers");s.idapiUserIdentifiersResponse=i(t)}return s.idapiUserIdentifiersResponse}},6354:(e,t,n)=>{"use strict";n.d(t,{R:()=>c});var r=n(43),o=n(7800),i=n(3904);let s=!1;const c=()=>{s||(window.guardian.automat={emotionReact:r,emotionReactJsxRuntime:o,react:i.default},s=!0)}},4463:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var r=n(3198),o=n.n(r),i=n(3904);const s=e=>{const[t,n]=(0,i.useState)(!1);var r;const[s,c]=(0,i.useState)(null!==(r=e.node)&&void 0!==r?r:null),a=(0,i.useRef)(null),u=t=>{let[r]=t;r&&(r.isIntersecting?n(!0):e.repeat&&n(!1))},l=e.debounce?o()(u,200):u;return(0,i.useEffect)((()=>(a.current&&a.current.disconnect(),window.IntersectionObserver&&(a.current=new window.IntersectionObserver(l,e),s&&a.current.observe(s)),()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.disconnect()})),[s,e,l]),[t,c]}},7410:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});var r=n(3904);const o=(e,t)=>{const[n,o]=(0,r.useState)(!1),i=t.every((e=>void 0!==e));(0,r.useEffect)((()=>{!n&&i&&(e(),o(!0))}),[n,i,e])}},1279:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){r(e,t,n[t])}))}return e}n.d(t,{DF:()=>l,Ec:()=>g,Eg:()=>m,Es:()=>i,Nh:()=>f,Pg:()=>h,bv:()=>p,lL:()=>c});const i=e=>e.get("gu.contributions.views")||void 0,s=e=>{const t=e.getDay()||7;return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()-(t-1))/864e5},c=e=>e.get("gu.history.weeklyArticleCount")||void 0,a=new Set(["environment/climate-change","environment/climate-crisis","environment/environment","science/science","politics/politics","us-news/us-politics","australia-news/australian-politics","world/world","world/europe-news","world/russia","books/books","culture/culture","world/coronavirus-outbreak","world/race","inequality/inequality","technology/technology","business/business"]),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.forEach((e=>{var n;a.has(e)&&(t[e]=(null!==(n=t[e])&&void 0!==n?n:0)+1)})),t},l=(e,t,n)=>{if(!((e,t)=>{const n=s(new Date),r=e.get("gu.history.articleCountsThisWeek");if(r&&r.week===n){const s=r.articles[t]||0;return e.set("gu.history.articleCountsThisWeek",{week:n,articles:(i=o({},r.articles),c={[t]:s+1},c=null!=c?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(c)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(c)).forEach((function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(c,e))})),i)}),s>0}var i,c;return e.set("gu.history.articleCountsThisWeek",{week:n,articles:{[t]:1}}),!1})(e,t)){const t=s(new Date),r=e.get("gu.history.weeklyArticleCount")||[],o=r[0];if(o&&o.week&&o.week===t)o.count+=1,o.tags=u(n,o.tags),e.set("gu.history.weeklyArticleCount",r);else{r.unshift({week:t,count:1,tags:u(n,{})});const o=t-365,i=r.filter((e=>e.week>=o));e.set("gu.history.weeklyArticleCount",i)}}},d=(e,t,n)=>{const r=(e=>{if(URLSearchParams){const t=new URLSearchParams(window.location.search).get("force-"+e);if(t)return t}return null})(e);return fetch("".concat(t,"/").concat(e).concat(r?"?force="+r:""),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>{if(!t.ok)throw Error(t.statusText||"Supporter Revenue ".concat(e," | Api call returned HTTP status ").concat(t.status));return t})).then((e=>e.json()))},p=(e,t)=>d("epic",e,t),g=(e,t)=>d("liveblog-epic",e,t),m=(e,t)=>d("banner",e,t),f=(e,t)=>d("puzzles",e,t),h=(e,t)=>d("header",e,t)}}]);
//# sourceMappingURL=SupportTheG-importable.modern.f2eb0b41ed527a286c48.js.map