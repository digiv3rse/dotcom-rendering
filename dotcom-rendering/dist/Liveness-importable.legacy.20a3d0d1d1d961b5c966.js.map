{"version":3,"file":"Liveness-importable.legacy.20a3d0d1d1d961b5c966.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/browser/relativeTime/updateTimeElements.ts","webpack://@guardian/dotcom-rendering/./src/web/components/Toast.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/Liveness.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/useApi.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/libs/src/datetime/timeAgo.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/libs/src/format/ArticleDesign.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/libs/src/format/ArticleDisplay.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/libs/src/format/ArticlePillar.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/libs/src/format/ArticleSpecial.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-foundations/src/breakpoints/breakpoints.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-foundations/src/mq/mq.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components-development-kitchen/src/editorial-button/styles.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components-development-kitchen/src/editorial-button/EditorialButton.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/src/button/Button.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/src/hide/Hide.tsx"],"sourcesContent":["import { timeAgo } from '@guardian/libs';\nexport const updateTimeElement = (element) => {\n    if (element instanceof HTMLElement) {\n        // Get required values\n        const { relativeformat: relativeFormat } = element.dataset;\n        const absoluteTime = element.getAttribute('datetime');\n        if (!absoluteTime || !relativeFormat)\n            return;\n        let newTime = false;\n        switch (relativeFormat) {\n            case 'short':\n            case 'med':\n                newTime = timeAgo(new Date(absoluteTime).getTime(), {\n                    verbose: false,\n                });\n                break;\n            case 'long':\n                newTime = timeAgo(new Date(absoluteTime).getTime(), {\n                    verbose: true,\n                });\n                break;\n        }\n        const oldTime = element.innerText;\n        if (newTime !== false && newTime !== oldTime)\n            element.innerHTML = newTime;\n    }\n};\nexport const updateTimeElements = () => {\n    document\n        .querySelectorAll('time[data-relativeformat]')\n        .forEach(updateTimeElement);\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { space } from '@guardian/source-foundations';\nimport { Hide } from '@guardian/source-react-components';\nimport { EditorialButton } from '@guardian/source-react-components-development-kitchen';\n/** This icon will be added to Source at a subsequent time */\nconst SvgReload = ({ size }) => {\n    const tight = size <= 24;\n    const padding = tight ? 0 : (size - 24) / 2;\n    return (_jsx(\"svg\", { viewBox: tight ? '0 0 24 24' : `-${padding} -${padding} ${size} ${size}`, width: size, height: size, children: _jsx(\"path\", { d: \"M11.588 1a10.928 10.928 0 0 0-9.046 4.786l.126.676.877.527.676-.176C5.85 4.508 8.506 2.98 11.588 2.98c4.936 0 8.995 4.059 8.995 9.045 0 4.961-4.059 8.995-8.995 8.995-2.832 0-5.262-1.252-6.94-3.257l3.632-.601v-1.253H1.866l-.476.476V23h1.227l.627-3.784C5.248 21.546 8.205 23 11.588 23c6.089 0 11.025-4.911 11.025-10.975A11.01 11.01 0 0 0 11.588 1Z\" }) }));\n};\n/**\n * A button to scroll to the top when new content exists.\n *\n * This element is rendered using a Portal into the `toast-root` div. This\n * root div has position: sticky\n */\nexport const Toast = ({ count, onClick, format }) => {\n    return (_jsxs(\"div\", { css: css `\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: ${space[2]}px;\n\t\t\t`, \"data-cy\": \"toast\", children: [_jsx(Hide, { above: \"phablet\", children: _jsx(EditorialButton, { size: \"xsmall\" // <-- Mobile version is xsmall\n                    , onClick: onClick, format: format, icon: _jsx(SvgReload, { size: 30 }), children: `${count} new update${count === 1 ? '' : 's'}` }) }), _jsx(Hide, { below: \"phablet\", children: _jsx(EditorialButton, { size: \"small\" // <-- Desktop version is small\n                    , onClick: onClick, format: format, icon: _jsx(SvgReload, { size: 30 }), children: `${count} new update${count === 1 ? '' : 's'}` }) })] }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { useCallback, useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { initHydration } from '../browser/islands/initHydration';\nimport { updateTimeElement } from '../browser/relativeTime/updateTimeElements';\nimport { useApi } from '../lib/useApi';\nimport { Toast } from './Toast';\nconst isServer = typeof window === 'undefined';\nconst topOfBlog = !isServer\n    ? window.document.getElementById('top-of-blog')\n    : null;\nconst lastUpdated = !isServer\n    ? window.document.querySelector('[data-gu-marker=liveblog-last-updated]')\n    : null;\nconst toastRoot = !isServer\n    ? window.document.getElementById('toast-root')\n    : null;\n/**\n * insert\n *\n * Takes html, parses and hydrates it, inserts the resulting blocks\n * at the top of the liveblog, and then enhances any tweets\n *\n * @param {string} html The block html to be inserted\n * @returns void\n */\nfunction insert(html, enhanceTweetsSwitch) {\n    // Create\n    // ------\n    const template = document.createElement('template');\n    template.innerHTML = html;\n    const fragment = template.content;\n    // Hydrate\n    // -------\n    const islands = fragment.querySelectorAll('gu-island');\n    initHydration(islands);\n    // Insert\n    // ------\n    // Shouldn't we sanitise this html?\n    // We're being sent this string by our own backend, not reader input, so we\n    // trust that the tags and attributes it contains are safe and intentional\n    const blogBody = document.querySelector('#liveblog-body');\n    if (!blogBody || !topOfBlog)\n        return;\n    // nextSibling? See: https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore#example_2\n    blogBody.insertBefore(fragment, topOfBlog.nextSibling);\n    // Enhance\n    // -----------\n    if (enhanceTweetsSwitch) {\n        const pendingBlocks = blogBody.querySelectorAll('.pending.block');\n        // https://developer.twitter.com/en/docs/twitter-for-websites/javascript-api/guides/scripting-loading-and-initialization\n        if (typeof twttr !== 'undefined') {\n            twttr.ready((twitter) => {\n                twitter.widgets.load(Array.from(pendingBlocks));\n            });\n        }\n    }\n}\n/**\n * reveal any blocks that have been inserted but are still hidden\n */\nfunction revealPendingBlocks() {\n    const blogBody = document.querySelector('#liveblog-body');\n    const pendingBlocks = blogBody?.querySelectorAll('.pending.block');\n    pendingBlocks?.forEach((block) => {\n        block.classList.add('reveal-slowly');\n        block.classList.remove('pending');\n    });\n    if (pendingBlocks !== undefined && pendingBlocks.length > 0)\n        // Notify commercial that new blocks are available and they can re-run spacefinder\n        document.dispatchEvent(new CustomEvent('liveblog:blocks-updated'));\n}\n/**\n * This abstracts the code to construct the url we use for polling. Of note is the fact\n * we have put `latestBlockId` in react state; by doing this we are able to change the url\n * that SWR uses for the request whilst still benefitting from the polling logic\n *\n * @returns string\n */\nfunction getKey(pageId, ajaxUrl, latestBlockId, filterKeyEvents, selectedTopics) {\n    try {\n        // Construct the url to poll\n        const url = new URL(`${pageId}.json`, ajaxUrl);\n        url.searchParams.set('lastUpdate', latestBlockId);\n        url.searchParams.set('isLivePage', 'true');\n        url.searchParams.set('dcr', 'true');\n        url.searchParams.set('filterKeyEvents', filterKeyEvents ? 'true' : 'false');\n        const [topic] = selectedTopics ?? [];\n        if (topic) {\n            url.searchParams.set('topics', `${topic.type}:${topic.value}`);\n        }\n        return url.href;\n    }\n    catch {\n        window.guardian.modules.sentry.reportError(new Error(`An error was thrown trying to construct a URL using pageId: ${pageId} and ajaxUrl: ${ajaxUrl}`), 'liveness-getkey');\n        // Returning undefined here means the request is never made\n        // See: https://swr.vercel.app/docs/conditional-fetching#conditional\n        return undefined;\n    }\n}\n/**\n * # Liveness\n *\n * Allow new blocks on live blogs to be added without page reload.\n * Polls the content API inserts news blocks if the user\n * is at the top of the article.\n * If they have scrolled down, show them a toast to scroll back up.\n *\n * This component insert HTML directly, which is generated from @see LiveBlock\n * and received from the `blocksToHtml` handler.\n */\nexport const Liveness = ({ pageId, webTitle, ajaxUrl, filterKeyEvents, format, enhanceTweetsSwitch, onFirstPage, webURL, mostRecentBlockId, hasPinnedPost, selectedTopics, }) => {\n    const [showToast, setShowToast] = useState(false);\n    const [topOfBlogVisible, setTopOfBlogVisible] = useState();\n    const [numHiddenBlocks, setNumHiddenBlocks] = useState(0);\n    const [latestBlockId, setLatestBlockId] = useState(mostRecentBlockId);\n    /**\n     * This function runs (once) after every successful useApi call. This is useful because it\n     * allows us to avoid the problems of imperative code being executed multiple times\n     * inside react's declarative structure (things get re-rendered when any state changes)\n     */\n    const onSuccess = useCallback((data) => {\n        if (data.numNewBlocks && data.numNewBlocks > 0) {\n            // Insert the new blocks in the dom (but hidden)\n            if (onFirstPage) {\n                try {\n                    insert(data.html, enhanceTweetsSwitch);\n                }\n                catch (e) {\n                    console.log('>> failed >>', e);\n                }\n            }\n            if (lastUpdated) {\n                lastUpdated.setAttribute('dateTime', new Date().toString());\n                updateTimeElement(lastUpdated);\n            }\n            if (onFirstPage &&\n                topOfBlogVisible &&\n                document.visibilityState === 'visible') {\n                revealPendingBlocks();\n                setNumHiddenBlocks(0);\n            }\n            else {\n                setShowToast(true);\n                // Increment the count of new posts\n                setNumHiddenBlocks(numHiddenBlocks + data.numNewBlocks);\n            }\n        }\n        // Update the block id we use for polling\n        if (data.mostRecentBlockId) {\n            setLatestBlockId(data.mostRecentBlockId);\n        }\n    }, [onFirstPage, topOfBlogVisible, numHiddenBlocks, enhanceTweetsSwitch]);\n    /**\n     * This is a utility used by our Cypress end to end tests\n     *\n     * Rather than expect these scripts to depend on polling, we\n     * expose this function to allow Cypress to manually trigger\n     * updates with whatever html and properties it wants\n     *\n     */\n    window.mockLiveUpdate = onSuccess;\n    // useApi returns { data, loading, error } but we're not using them here\n    useApi(getKey(pageId, ajaxUrl, latestBlockId, filterKeyEvents, selectedTopics), {\n        refreshInterval: 10_000,\n        refreshWhenHidden: true,\n        onSuccess,\n    });\n    useEffect(() => {\n        document.title =\n            numHiddenBlocks > 0 ? `(${numHiddenBlocks}) ${webTitle}` : webTitle;\n    }, [numHiddenBlocks, webTitle]);\n    useEffect(() => {\n        if (!topOfBlog)\n            return;\n        const observer = new window.IntersectionObserver(([entry]) => {\n            if (!entry)\n                return;\n            setTopOfBlogVisible(entry.isIntersecting);\n            if (entry.isIntersecting && onFirstPage) {\n                // If on first page, reveal blocks\n                revealPendingBlocks();\n                setNumHiddenBlocks(0);\n                setShowToast(false);\n            }\n        });\n        observer.observe(topOfBlog);\n        return () => {\n            observer.disconnect();\n        };\n    }, [onFirstPage]);\n    /**\n     * This useEffect sets up a listener for when the page is backgrounded or restored. We\n     * do this so that any new blocks that were fetched while the blog was in the\n     * background are animated in at the point when focus is restored\n     */\n    useEffect(() => {\n        const handleVisibilityChange = () => {\n            // The blog was either hidden or has become visible\n            if (\n            // If we're returning to a blog that has pending blocks and the reader\n            // is at the top of the first page then...\n            document.visibilityState === 'visible' &&\n                numHiddenBlocks > 0 &&\n                topOfBlogVisible &&\n                onFirstPage) {\n                revealPendingBlocks();\n                setNumHiddenBlocks(0);\n                setShowToast(false);\n            }\n        };\n        window.addEventListener('visibilitychange', handleVisibilityChange);\n        return () => {\n            window.removeEventListener('visibilitychange', handleVisibilityChange);\n        };\n    }, [numHiddenBlocks, onFirstPage, topOfBlogVisible]);\n    const handleToastClick = useCallback(() => {\n        // We adjust the position we scroll readers to based on if there is a pinned\n        // post or not. If there is we want to scroll them to a position below it, if\n        // there is then we want to scroll them to a position that ensures they still\n        // see the key events filter\n        const placeToScrollTo = hasPinnedPost ? 'top-of-blog' : 'maincontent';\n        if (onFirstPage) {\n            setShowToast(false);\n            document.getElementById(placeToScrollTo)?.scrollIntoView({\n                behavior: 'smooth',\n            });\n            window.history.replaceState({}, '', `#${placeToScrollTo}`);\n            revealPendingBlocks();\n            setNumHiddenBlocks(0);\n        }\n        else {\n            window.location.href = `${webURL}#${placeToScrollTo}`;\n        }\n    }, [hasPinnedPost, onFirstPage, webURL]);\n    if (toastRoot && showToast) {\n        /**\n         * Why `createPortal`?\n         *\n         * We use a Portal because of a the way different browsers implement `position: sticky`.\n         * A [stickily positioned element][] depends on its [containing block][] to determine\n         * when to become stuck.\n         *\n         * In Safari the containing block is set to the immediate parent\n         * whereas Chrome, Firefox and other browser are more forgiving.\n         *\n         * By using a Portal we can insert the Toast as a sibling to the Island, which works around\n         * Safari's behaviour.\n         *\n         * [stickily positioned element]: https://developer.mozilla.org/en-US/docs/Web/CSS/position#types_of_positioning\n         * [containing block]: https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n         */\n        return ReactDOM.createPortal(_jsx(Toast, { onClick: handleToastClick, count: numHiddenBlocks, format: format }), toastRoot);\n    }\n    return null;\n};\n","import useSWR from 'swr';\nfunction checkForErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText ||\n            `useApi | An api call returned HTTP status ${response.status}`);\n    }\n    return response;\n}\nconst fetcher = (init) => (url) => fetch(url, init)\n    .then(checkForErrors)\n    .then((res) => res.json());\n/**\n * @description\n * A custom hook to make a GET request using the given url using the SWR lib (https://swr.vercel.app/)\n * returns { loading, error, data }\n * @param {String} url - The url to fetch\n * @param {SWRConfiguration} options - The SWR config object - https://swr.vercel.app/docs/options\n * @param {RequestInit} init - The fetch init object - https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n * */\nexport const useApi = (url, options, init) => {\n    const { data, error } = useSWR(url, fetcher(init), options);\n    return {\n        data,\n        error,\n        loading: !!url && !error && !data,\n    };\n};\n","type Unit = 's' | 'm' | 'h' | 'd';\n\nconst pad = (n: number): number | string => n.toString().padStart(2, '0');\n\nconst isWithin24Hours = (date: Date): boolean => {\n\tconst today = new Date();\n\treturn date.getTime() > today.getTime() - 24 * 60 * 60 * 1000;\n};\n\nconst isYesterday = (relative: Date): boolean => {\n\tconst today = new Date();\n\tconst yesterday = new Date();\n\tyesterday.setDate(today.getDate() - 1);\n\treturn relative.toDateString() === yesterday.toDateString();\n};\n\nconst getSuffix = (type: Unit, value: number, verbose?: boolean): string => {\n\tconst shouldPluralise = value !== 1;\n\tswitch (type) {\n\t\tcase 's': {\n\t\t\t// Always pluralised, as less than 15 seconds returns “now”\n\t\t\tif (verbose) return ' seconds ago';\n\t\t\treturn 's ago';\n\t\t}\n\t\tcase 'm': {\n\t\t\tif (verbose && shouldPluralise) return ' minutes ago';\n\t\t\tif (verbose) return ' minute ago';\n\t\t\treturn 'm ago';\n\t\t}\n\t\tcase 'h': {\n\t\t\tif (verbose && shouldPluralise) return ' hours ago';\n\t\t\tif (verbose) return ' hour ago';\n\t\t\treturn 'h ago';\n\t\t}\n\t\tcase 'd': {\n\t\t\t// Always pluralised, as less than 2 days returns “Yesterday HH.MM”\n\t\t\tif (verbose) return ' days ago';\n\t\t\treturn 'd ago';\n\t\t}\n\t}\n};\n\nconst withTime = (date: Date): string =>\n\t` ${date.getHours()}.${pad(date.getMinutes())}`;\n\n/**\n * Takes an absolute date in [epoch format] and returns a string representing\n * relative time ago.\n *\n * Time is formatted according to [the Guardian and Observer Style Guide (T)][T]\n *\n * @param {number} epoch The date when an event happened in epoch format\n * @param {Object} [options] Options to control the formatting\n * @returns {string | false} A formatted relative time string, or `false` if the epoch is in the future\n *\n * [epoch format]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date#description\n * [T]: https://www.theguardian.com/guardian-observer-style-guide-t\n */\nexport const timeAgo = (\n\tepoch: number,\n\toptions?: {\n\t\tverbose?: boolean;\n\t\tdaysUntilAbsolute?: number;\n\t},\n): false | string => {\n\tconst then = new Date(epoch);\n\tconst now = new Date();\n\n\tconst verbose = options?.verbose;\n\tconst daysUntilAbsolute = options?.daysUntilAbsolute ?? 7;\n\n\tconst secondsAgo = Math.floor((now.getTime() - then.getTime()) / 1000);\n\tconst veryClose = secondsAgo < 15;\n\tconst within55Seconds = secondsAgo < 55;\n\tconst withinTheHour = secondsAgo < 55 * 60;\n\tconst within24hrs = isWithin24Hours(then);\n\tconst wasYesterday = isYesterday(then);\n\tconst withinAbsoluteCutoff = secondsAgo < daysUntilAbsolute * 24 * 60 * 60;\n\n\tif (secondsAgo < 0) {\n\t\t// Dates in the future are not supported\n\t\treturn false;\n\t} else if (veryClose) {\n\t\t// Now\n\t\treturn 'now';\n\t} else if (within55Seconds) {\n\t\t// Seconds\n\t\treturn `${secondsAgo}${getSuffix('s', secondsAgo, verbose)}`;\n\t} else if (withinTheHour) {\n\t\t// Minutes\n\t\tconst minutes = Math.round(secondsAgo / 60);\n\t\treturn `${minutes}${getSuffix('m', minutes, verbose)}`;\n\t} else if (within24hrs) {\n\t\t// Hours\n\t\tconst hours = Math.round(secondsAgo / 3600);\n\t\treturn `${hours}${getSuffix('h', hours, verbose)}`;\n\t} else if (wasYesterday && verbose) {\n\t\t// Yesterday\n\t\treturn `Yesterday${withTime(then)}`;\n\t} else if (withinAbsoluteCutoff) {\n\t\t// Days\n\t\tconst days = Math.round(secondsAgo / 3600 / 24);\n\t\treturn `${days}${getSuffix('d', days, verbose)}`;\n\t} else {\n\t\t// Simple date - \"9 Nov 2019\"\n\t\treturn [\n\t\t\tthen.getDate(),\n\t\t\tverbose\n\t\t\t\t? then.toLocaleString('en-GB', { month: 'long' })\n\t\t\t\t: then.toLocaleString('en-GB', { month: 'short' }),\n\t\t\tthen.getFullYear(),\n\t\t].join(' ');\n\t}\n};\n","export enum ArticleDesign {\n\tStandard,\n\tGallery,\n\tAudio,\n\tVideo,\n\tReview,\n\tAnalysis,\n\tExplainer,\n\tComment,\n\tLetter,\n\tFeature,\n\tLiveBlog,\n\tDeadBlog,\n\tRecipe,\n\tMatchReport,\n\tInterview,\n\tEditorial,\n\tQuiz,\n\tInteractive,\n\tPhotoEssay,\n\tPrintShop,\n\tObituary,\n\tCorrection,\n\tFullPageInteractive,\n\tNewsletterSignup,\n\tTimeline,\n\tProfile,\n}\n","export enum ArticleDisplay {\n\tStandard,\n\tImmersive,\n\tShowcase,\n\tNumberedList,\n}\n","export enum ArticlePillar {\n\tNews = 0,\n\tOpinion = 1,\n\tSport = 2,\n\tCulture = 3,\n\tLifestyle = 4,\n}\n","export enum ArticleSpecial {\n\tSpecialReport = 5,\n\tLabs = 6,\n\tSpecialReportAlt = 7,\n}\n","export type Breakpoint =\n\t| 'mobile'\n\t| 'mobileMedium'\n\t| 'mobileLandscape'\n\t| 'phablet'\n\t| 'tablet'\n\t| 'desktop'\n\t| 'leftCol'\n\t| 'wide';\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page) •\n * [Design System](https://theguardian.design/2a1e5182b/p/41be19-grids)\n */\nexport const breakpoints = {\n\tmobile: 320,\n\tmobileMedium: 375,\n\tmobileLandscape: 480,\n\tphablet: 660,\n\ttablet: 740,\n\tdesktop: 980,\n\tleftCol: 1140,\n\twide: 1300,\n} as const;\n","import { breakpoints } from '../breakpoints/breakpoints';\nimport type { Breakpoint } from '../breakpoints/breakpoints';\n\nexport type BreakpointMap = {\n\t[key in Breakpoint]: string;\n};\n\nconst minWidth = (from: number): string => `@media (min-width: ${`${from}px`})`;\n\nconst maxWidth = (until: number): string =>\n\t`@media (max-width: ${`${until - 1}px`})`;\n\nconst minWidthMaxWidth = (from: number, until: number): string =>\n\t`@media (min-width: ${`${from}px`}) and (max-width: ${`${until - 1}px`})`;\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#from)\n *\n * @example\n *\tconst styles = css`\n *\t\t${from.mobileLandscape} {\n *\t\t\tpadding: 0 20px;\n *\t\t}\n * `;\n */\nexport const from: BreakpointMap = {\n\tmobile: minWidth(breakpoints.mobile),\n\tmobileMedium: minWidth(breakpoints.mobileMedium),\n\tmobileLandscape: minWidth(breakpoints.mobileLandscape),\n\tphablet: minWidth(breakpoints.phablet),\n\ttablet: minWidth(breakpoints.tablet),\n\tdesktop: minWidth(breakpoints.desktop),\n\tleftCol: minWidth(breakpoints.leftCol),\n\twide: minWidth(breakpoints.wide),\n};\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#until)\n *\n * @example\n *\tconst styles = css`\n *\t\t${until.wide} {\n *\t\t\tpadding: 0 40px;\n *\t\t}\n * `;\n */\nexport const until: BreakpointMap = {\n\tmobile: maxWidth(breakpoints.mobile),\n\tmobileMedium: maxWidth(breakpoints.mobileMedium),\n\tmobileLandscape: maxWidth(breakpoints.mobileLandscape),\n\tphablet: maxWidth(breakpoints.phablet),\n\ttablet: maxWidth(breakpoints.tablet),\n\tdesktop: maxWidth(breakpoints.desktop),\n\tleftCol: maxWidth(breakpoints.leftCol),\n\twide: maxWidth(breakpoints.wide),\n};\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#betweenand)\n *\n * @example\n *\tconst styles = css`\n *\t\t${between.phablet.and.desktop} {\n *\t\t\tpadding: 0 32px;\n *\t\t}\n * `;\n */\nexport const between = {\n\tmobile: {\n\t\tand: {\n\t\t\tmobileMedium: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t),\n\t\t\tmobileLandscape: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t),\n\t\t\tphablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.phablet),\n\t\t\ttablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.tablet),\n\t\t\tdesktop: minWidthMaxWidth(breakpoints.mobile, breakpoints.desktop),\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.mobile, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide),\n\t\t},\n\t},\n\tmobileMedium: {\n\t\tand: {\n\t\t\tmobileLandscape: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t),\n\t\t\tphablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.phablet),\n\t\t\ttablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.tablet),\n\t\t\tdesktop: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.desktop),\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide),\n\t\t},\n\t},\n\tmobileLandscape: {\n\t\tand: {\n\t\t\tphablet: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t),\n\t\t\ttablet: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.tablet),\n\t\t\tdesktop: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t),\n\t\t\tleftCol: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.leftCol,\n\t\t\t),\n\t\t\twide: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.wide),\n\t\t},\n\t},\n\tphablet: {\n\t\tand: {\n\t\t\ttablet: minWidthMaxWidth(breakpoints.phablet, breakpoints.tablet),\n\t\t\tdesktop: minWidthMaxWidth(breakpoints.phablet, breakpoints.desktop),\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.phablet, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.phablet, breakpoints.wide),\n\t\t},\n\t},\n\ttablet: {\n\t\tand: {\n\t\t\tdesktop: minWidthMaxWidth(breakpoints.tablet, breakpoints.desktop),\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.tablet, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.tablet, breakpoints.wide),\n\t\t},\n\t},\n\tdesktop: {\n\t\tand: {\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.desktop, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.desktop, breakpoints.wide),\n\t\t},\n\t},\n\tleftCol: {\n\t\tand: {\n\t\t\twide: minWidthMaxWidth(breakpoints.leftCol, breakpoints.wide),\n\t\t},\n\t},\n};\n","import type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport {\n\tculture,\n\tlabs,\n\tlifestyle,\n\tneutral,\n\tnews,\n\topinion,\n\tpalette,\n\tspecialReport,\n\tsport,\n} from '@guardian/source-foundations';\nimport type { ButtonPriority } from '@guardian/source-react-components';\n\nexport const defaultFormat = {\n\tdisplay: ArticleDisplay.Standard,\n\tdesign: ArticleDesign.Standard,\n\ttheme: ArticlePillar.News,\n};\n\nconst WHITE = neutral[100];\n\nexport const decideBackground = (\n\tformat: ArticleFormat,\n\tpriority: ButtonPriority,\n): SerializedStyles => {\n\tswitch (priority) {\n\t\tcase 'primary':\n\t\tcase 'secondary':\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tbackground-color: ${news[300]};\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ${news[400]};\n\t\t\t\t\t\t\tborder: 1px solid ${news[400]};\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tbackground-color: ${culture[300]};\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ${culture[400]};\n\t\t\t\t\t\t\tborder: 1px solid ${culture[400]};\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tbackground-color: ${lifestyle[300]};\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ${lifestyle[400]};\n\t\t\t\t\t\t\tborder: 1px solid ${lifestyle[400]};\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tbackground-color: ${sport[300]};\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ${sport[400]};\n\t\t\t\t\t\t\tborder: 1px solid ${sport[400]};\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tbackground-color: ${opinion[300]};\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ${opinion[400]};\n\t\t\t\t\t\t\tborder: 1px solid ${opinion[400]};\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tbackground-color: ${labs[300]};\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ${labs[400]};\n\t\t\t\t\t\t\tborder: 1px solid ${labs[400]};\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tbackground-color: ${specialReport[300]};\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ${specialReport[400]};\n\t\t\t\t\t\t\tborder: 1px solid ${specialReport[400]};\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t}\n\t\t// falls through\n\t\tcase 'subdued':\n\t\tcase 'tertiary':\n\t\t\treturn css`\n\t\t\t\tbackground-color: transparent;\n\t\t\t`;\n\t}\n};\n\nexport const decideBorder = (\n\tformat: ArticleFormat,\n\tpriority: ButtonPriority,\n): SerializedStyles => {\n\tswitch (priority) {\n\t\tcase 'primary':\n\t\tcase 'secondary':\n\t\tcase 'tertiary':\n\t\t\treturn css`\n\t\t\t\tborder: 1px solid currentColor;\n\t\t\t`;\n\t\tcase 'subdued':\n\t\t\treturn css`\n\t\t\t\tborder: none;\n\t\t\t`;\n\t}\n};\n\nexport const decideFont = (\n\tformat: ArticleFormat,\n\tpriority: ButtonPriority,\n): SerializedStyles => {\n\tswitch (priority) {\n\t\tcase 'primary':\n\t\tcase 'secondary':\n\t\t\treturn css`\n\t\t\t\tcolor: ${WHITE};\n\t\t\t`;\n\t\tcase 'subdued':\n\t\tcase 'tertiary':\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tcolor: ${news[400]};\n\t\t\t\t\t`;\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tcolor: ${culture[400]};\n\t\t\t\t\t`;\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tcolor: ${lifestyle[400]};\n\t\t\t\t\t`;\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tcolor: ${sport[400]};\n\t\t\t\t\t`;\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tcolor: ${opinion[400]};\n\t\t\t\t\t`;\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tcolor: ${labs[400]};\n\t\t\t\t\t`;\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tcolor: ${specialReport[400]};\n\t\t\t\t\t`;\n\t\t\t\tcase ArticleSpecial.SpecialReportAlt:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tcolor: ${palette.specialReportAlt[200]};\n\t\t\t\t\t`;\n\t\t\t}\n\t}\n};\n","import type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport type { ButtonProps as CoreButtonProps } from '@guardian/source-react-components';\nimport { Button as CoreButton } from '@guardian/source-react-components';\nimport {\n\tdecideBackground,\n\tdecideBorder,\n\tdecideFont,\n\tdefaultFormat,\n} from './styles';\nimport type { SharedEditorialButtonProps } from './types';\n\nexport interface EditorialButtonProps\n\textends CoreButtonProps,\n\t\tSharedEditorialButtonProps {}\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-react-components-development-kitchen_editorialbutton--when-primary) •\n * [Design System](https://theguardian.design/2a1e5182b/p/435225-button) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components-development-kitchen/src/editorial-button/EditorialButton.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components-development-kitchen)\n *\n * This is the editorial version of the core Button component.\n * This editorial version requires the format prop and uses that to override Button styles based on `format.theme`\n *\n */\nexport const EditorialButton = ({\n\tformat = defaultFormat,\n\tchildren,\n\tpriority = 'primary',\n\t...props\n}: EditorialButtonProps): EmotionJSX.Element => {\n\tconst backgroundOverrides = decideBackground(format, priority);\n\tconst borderOverrides = decideBorder(format, priority);\n\tconst fontOverrides = decideFont(format, priority);\n\n\treturn (\n\t\t<CoreButton\n\t\t\tpriority={priority}\n\t\t\tcssOverrides={[backgroundOverrides, borderOverrides, fontOverrides]}\n\t\t\t{...props}\n\t\t>\n\t\t\t{children}\n\t\t</CoreButton>\n\t);\n};\n","import type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport type { ButtonHTMLAttributes } from 'react';\nimport { buttonContents } from './shared';\nimport { buttonStyles } from './styles';\nimport type { SharedButtonProps } from './types';\n\nexport interface ButtonProps\n\textends SharedButtonProps,\n\t\tButtonHTMLAttributes<HTMLButtonElement> {}\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_button--primary-priority-default-theme) •\n * [Design System](https://theguardian.design/2a1e5182b/p/435225-button) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/button/Button.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components)\n *\n * Buttons enable users to make choices or perform actions.\n *\n */\nexport const Button = ({\n\tpriority,\n\tsize,\n\ticon: iconSvg,\n\ticonSide,\n\thideLabel,\n\tnudgeIcon,\n\ttype = 'button',\n\tisLoading = false,\n\tloadingAnnouncement = 'Loading',\n\tcssOverrides,\n\tchildren,\n\t...props\n}: ButtonProps): EmotionJSX.Element => (\n\t<button\n\t\tcss={buttonStyles({\n\t\t\tsize,\n\t\t\tpriority,\n\t\t\ticon: iconSvg,\n\t\t\thideLabel,\n\t\t\ticonSide,\n\t\t\tnudgeIcon,\n\t\t\tcssOverrides,\n\t\t\tisLoading,\n\t\t})}\n\t\ttype={type}\n\t\taria-live=\"polite\"\n\t\taria-label={isLoading ? loadingAnnouncement : undefined}\n\t\t{...props}\n\t>\n\t\t{buttonContents({\n\t\t\thideLabel,\n\t\t\ticonSvg,\n\t\t\tisLoading,\n\t\t\tchildren,\n\t\t})}\n\t</button>\n);\n","import { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { from as fromMq, until as untilMq } from '@guardian/source-foundations';\nimport type { Breakpoint } from '@guardian/source-foundations';\nimport type { HTMLAttributes } from 'react';\nimport type { Props } from '../@types/Props';\n\nexport interface HideProps extends HTMLAttributes<HTMLDivElement>, Props {\n\t/**\n\t * Hide child content if the viewport is narrower than the specified breakpoint.\n\t */\n\tuntil?: Breakpoint;\n\t/**\n\t * Hide child content if the viewport is as wide, or wider than, the specified breakpoint.\n\t */\n\tfrom?: Breakpoint;\n\t/**\n\t * **Deprecated**\n\t *\n\t * Use `from` instead.\n\t *\n\t * @deprecated Use `from` instead.\n\t */\n\tabove?: Breakpoint;\n\t/**\n\t * **Deprecated**\n\t *\n\t * Use `until` instead.\n\t *\n\t * @deprecated Use `until` instead.\n\t */\n\tbelow?: Breakpoint;\n}\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_hide--hidden-from-tablet-at-mobile) •\n * [Design System](https://theguardian.design/2a1e5182b/p/78cb73-hide) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/hide/Hide.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components)\n *\n * Hides child content `until` and/or `from` a given breakpoint.\n */\nexport const Hide = ({\n\tchildren,\n\tabove, // deprecated\n\tbelow, // deprecated\n\tfrom = above,\n\tuntil = below,\n}: HideProps): EmotionJSX.Element => {\n\tlet whenToHide;\n\tif (until) {\n\t\twhenToHide = css`\n\t\t\t${untilMq[until]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n\t}\n\tif (from) {\n\t\twhenToHide = css`\n\t\t\t${whenToHide}\n\t\t\t${fromMq[from]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n\t}\n\n\treturn <span css={whenToHide}>{children}</span>;\n};\n"],"names":["updateTimeElement","element","HTMLElement","relativeFormat","dataset","relativeformat","absoluteTime","getAttribute","newTime","timeAgo","Date","getTime","verbose","oldTime","innerText","innerHTML","updateTimeElements","document","querySelectorAll","forEach","SvgReload","size","tight","padding","_jsx","viewBox","width","height","children","d","Toast","count","onClick","format","_jsxs","css","space","Hide","above","EditorialButton","icon","below","isServer","window","topOfBlog","getElementById","lastUpdated","querySelector","toastRoot","revealPendingBlocks","blogBody","pendingBlocks","block","classList","add","remove","undefined","length","dispatchEvent","CustomEvent","Liveness","pageId","webTitle","ajaxUrl","filterKeyEvents","enhanceTweetsSwitch","onFirstPage","webURL","mostRecentBlockId","hasPinnedPost","selectedTopics","useState","showToast","setShowToast","topOfBlogVisible","setTopOfBlogVisible","numHiddenBlocks","setNumHiddenBlocks","latestBlockId","setLatestBlockId","onSuccess","useCallback","data","numNewBlocks","html","template","createElement","fragment","content","islands","initHydration","insertBefore","nextSibling","twttr","ready","twitter","widgets","load","Array","from","insert","e","console","log","setAttribute","toString","visibilityState","mockLiveUpdate","useApi","url","URL","searchParams","set","topic","type","value","href","guardian","modules","sentry","reportError","Error","getKey","refreshInterval","refreshWhenHidden","useEffect","title","observer","IntersectionObserver","entry","isIntersecting","observe","disconnect","handleVisibilityChange","addEventListener","removeEventListener","handleToastClick","placeToScrollTo","scrollIntoView","behavior","history","replaceState","location","ReactDOM","checkForErrors","response","ok","statusText","status","options","init","useSWR","fetch","then","res","json","fetcher","error","loading","getSuffix","shouldPluralise","epoch","date","today","now","daysUntilAbsolute","secondsAgo","Math","floor","veryClose","within55Seconds","withinTheHour","within24hrs","wasYesterday","relative","yesterday","setDate","getDate","toDateString","isYesterday","withinAbsoluteCutoff","minutes","round","hours","getHours","getMinutes","padStart","withTime","days","toLocaleString","month","getFullYear","join","ArticleDesign","ArticleDisplay","ArticlePillar","ArticleSpecial","breakpoints","mobile","mobileMedium","mobileLandscape","phablet","tablet","desktop","leftCol","wide","maxWidth","until","minWidthMaxWidth","minWidth","and","display","design","theme","WHITE","decideBorder","priority","backgroundOverrides","news","culture","lifestyle","sport","opinion","labs","specialReport","borderOverrides","fontOverrides","decideFont","palette","jsx","cssOverrides","hideLabel","iconSide","nudgeIcon","isLoading","iconSvg","from$1","until$1"],"sourceRoot":""}