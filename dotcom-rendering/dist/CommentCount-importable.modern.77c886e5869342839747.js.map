{"version":3,"file":"CommentCount-importable.modern.77c886e5869342839747.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/../node_modules/@kossnocorp/desvg/index.js","webpack://@guardian/dotcom-rendering/../node_modules/@kossnocorp/desvg/react.js","webpack://@guardian/dotcom-rendering/./src/static/icons/comment.svg","webpack://@guardian/dotcom-rendering/./src/web/components/CommentCount.importable.tsx","webpack://@guardian/dotcom-rendering/./src/lib/formatters.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/formatCount.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useApi.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/useDiscussion.ts","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/libs/esm/format/ArticleDesign.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/libs/esm/format/ArticleDisplay.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/libs/esm/format/ArticlePillar.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/libs/esm/format/ArticleSpecial.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/libs/esm/joinUrl/joinUrl.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-foundations/esm/breakpoints/breakpoints.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-foundations/esm/index.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-foundations/esm/mq/mq.js"],"sourcesContent":["module.exports = desvg\n\nfunction desvg (h, svg, props) {\n  props = props || {}\n\n  var content = svg.content\n  var attributes = svg.attributes\n\n  return function (props) {\n    return h(\n      'svg',\n      Object.assign(\n        { dangerouslySetInnerHTML: { __html: content } },\n        attributes,\n        props\n      ),\n      props && props.children\n    )\n  }\n}\n","var desvg = require('.')\nvar React = require('react')\n\nmodule.exports = desvg.bind(null, React.createElement.bind(React))\n","\nmodule.exports = {\"attributes\":{\"width\":\"16\",\"height\":\"16\",\"viewBox\":\"0 0 16 16\"},\"content\":\"<path d=\\\"M13 0l1 1v7l-1 1H7l-2 3H4V9H2L1 8V1l1-1h11z\\\"></path>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n","import { css } from '@emotion/react';\nimport { joinUrl } from '@guardian/libs';\nimport { between, textSans, until } from '@guardian/source-foundations';\nimport CommentIcon from '../../static/icons/comment.svg';\nimport type { Palette } from '../../types/palette';\nimport { decidePalette } from '../lib/decidePalette';\nimport { formatCount } from '../lib/formatCount';\nimport { useDiscussion } from '../lib/useDiscussion';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tdiscussionApiUrl: string;\n\tshortUrlId: string;\n};\n\nconst containerStyles = (palette: Palette) => css`\n\tdisplay: flex;\n\talign-self: flex-end;\n\tflex-direction: column;\n\t${textSans.medium()};\n\tfont-weight: bold;\n\tcolor: ${palette.fill.commentCount};\n\tpadding-top: 5px;\n\n\t${until.desktop} {\n\t\tcolor: ${palette.fill.commentCountUntilDesktop};\n\t}\n`;\n\nconst iconContainerStyles = css`\n\theight: 15px;\n\tmargin: 0;\n\ttext-align: right;\n\tmargin-bottom: -2px;\n\tsvg {\n\t\theight: 18px;\n\t\twidth: 18px;\n\t}\n`;\n\nconst iconStyles = (palette: Palette) => css`\n\tfill: ${palette.fill.commentCount};\n\t${until.desktop} {\n\t\tfill: ${palette.fill.commentCountUntilDesktop};\n\t}\n`;\n\nconst longStyles = css`\n\tdisplay: block;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst shortStyles = css`\n\tdisplay: none;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst linkStyles = css`\n\tcolor: inherit;\n\ttext-decoration: none;\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n\t:visited {\n\t\tcolor: inherit;\n\t}\n`;\n\n/**\n * # CommentCount\n *\n * Shows the number of comments at the top of an article.\n * Fetches the count from the discussion API.\n *\n * [Storybook `Count`](https://637e40d1bc73bf3f604394b9-rzazjyrwhc.chromatic.com/?path=/story/components-counts)\n */\nexport const CommentCount = ({\n\tformat,\n\tdiscussionApiUrl,\n\tshortUrlId,\n}: Props) => {\n\tconst { commentCount } = useDiscussion(\n\t\tjoinUrl(discussionApiUrl, 'discussion', shortUrlId),\n\t);\n\n\t// If the comment count is 0 we still want to display it\n\tif (commentCount === undefined) return null;\n\n\tconst { short, long } = formatCount(commentCount);\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<data\n\t\t\tcss={containerStyles(palette)}\n\t\t\tdata-cy=\"comment-counts\"\n\t\t\tvalue={`${long} comments on this article`}\n\t\t>\n\t\t\t<a\n\t\t\t\thref=\"#comments\"\n\t\t\t\tcss={linkStyles}\n\t\t\t\taria-label={`${short} Comments`}\n\t\t\t>\n\t\t\t\t<div css={iconContainerStyles}>\n\t\t\t\t\t<CommentIcon css={iconStyles(palette)} />\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-testid=\"long-comment-count\"\n\t\t\t\t\tcss={longStyles}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t>\n\t\t\t\t\t{long}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-testid=\"short-comment-count\"\n\t\t\t\t\tcss={shortStyles}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t>\n\t\t\t\t\t{short}\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</data>\n\t);\n};\n","const integerCommas = (val: number): string => {\n\tconst digits = val.toFixed(0).split('');\n\tconst len = digits.length;\n\n\tfor (let i = digits.length - 1; i >= 1; i -= 1) {\n\t\tif ((len - i) % 3 === 0) {\n\t\t\tdigits.splice(i, 0, ',');\n\t\t}\n\t}\n\n\treturn digits.join('');\n};\n\nexport { integerCommas };\n","import { integerCommas } from '../../lib/formatters';\n\nexport const formatCount = (\n\tcount?: number,\n): { short: string; long: string } => {\n\tif (count === undefined) return { short: '…', long: '…' };\n\tif (count === 0) return { short: '0', long: '0' };\n\n\tconst countAsInteger = parseInt(count.toFixed(0), 10);\n\tconst displayCountLong = integerCommas(countAsInteger);\n\tconst displayCountShort =\n\t\tcountAsInteger > 10000\n\t\t\t? `${Math.round(countAsInteger / 1000)}k`\n\t\t\t: countAsInteger.toString();\n\n\treturn {\n\t\tshort: displayCountShort,\n\t\tlong: displayCountLong,\n\t};\n};\n","import type { SWRConfiguration } from 'swr';\nimport useSWR from 'swr';\n\nfunction checkForErrors(response: Response) {\n\tif (!response.ok) {\n\t\tthrow Error(\n\t\t\tresponse.statusText ||\n\t\t\t\t`useApi | An api call returned HTTP status ${response.status}`,\n\t\t);\n\t}\n\treturn response;\n}\n\nconst fetcher = (init?: RequestInit) => (url: string) =>\n\tfetch(url, init)\n\t\t.then(checkForErrors)\n\t\t.then((res) => res.json());\n\ninterface ApiResponse<T> {\n\tloading: boolean;\n\tdata?: T;\n\terror?: Error;\n}\n\n/**\n * @description\n * A custom hook to make a GET request using the given url using the SWR lib (https://swr.vercel.app/)\n * returns { loading, error, data }\n * @param {String} url - The url to fetch\n * @param {SWRConfiguration} options - The SWR config object - https://swr.vercel.app/docs/options\n * @param {RequestInit} init - The fetch init object - https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n * */\nexport const useApi = <T,>(\n\turl?: string,\n\toptions?: SWRConfiguration,\n\tinit?: RequestInit,\n): ApiResponse<T> => {\n\tconst { data, error } = useSWR(url, fetcher(init), options);\n\n\treturn {\n\t\tdata,\n\t\terror,\n\t\tloading: !!url && !error && !data,\n\t};\n};\n","import { useApi } from './useApi';\n\ntype DiscussionResponse = {\n\tstatus: string;\n\tpage: number;\n\tpages: number;\n\tpageSize: number;\n\torderBy: string;\n\tdiscussion: {\n\t\tkey: string;\n\t\twebUrl: string;\n\t\tapiUrl: string;\n\t\tcommentCount: number;\n\t\ttopLevelCommentCount: number;\n\t\tisClosedForComments: boolean;\n\t\tisClosedForRecommendation: boolean;\n\t\tisThreaded: boolean;\n\t\ttitle: string;\n\t\tcomments: CommentType[];\n\t};\n};\n\ntype CommentType = {\n\tid: number;\n\tbody: string;\n\tdate: string;\n\tisoDateTime: string;\n\tstatus: string;\n\twebUrl: string;\n\tapiUrl: string;\n\tnumResponses?: number;\n\tnumRecommends: number;\n\tisHighlighted: boolean;\n\tuserProfile: UserProfile;\n\tresponseTo?: {\n\t\tdisplayName: string;\n\t\tcommentApiUrl: string;\n\t\tisoDateTime: string;\n\t\tdate: string;\n\t\tcommentId: number;\n\t\tcommentWebUrl: string;\n\t};\n\tresponses?: CommentType[];\n\tmetaData?: {\n\t\tcommentCount: number;\n\t\tstaffCommenterCount: number;\n\t\teditorsPickCount: number;\n\t\tblockedCount: number;\n\t\tresponseCount: number;\n\t};\n};\n\nexport const useDiscussion = (\n\turl: string,\n): { commentCount?: number; isClosedForComments?: boolean } => {\n\tconst { data } = useApi<DiscussionResponse>(url, {\n\t\t// The default for dedupingInterval is 2 seconds but we want to wait longer here because the cache time\n\t\t// for a discussion is at least 15 seconds\n\t\tdedupingInterval: 8000,\n\t});\n\n\treturn {\n\t\tcommentCount: data?.discussion.commentCount,\n\t\tisClosedForComments: data?.discussion.isClosedForComments,\n\t};\n};\n","var ArticleDesign;\n(function (ArticleDesign) {\n    ArticleDesign[ArticleDesign[\"Standard\"] = 0] = \"Standard\";\n    ArticleDesign[ArticleDesign[\"Gallery\"] = 1] = \"Gallery\";\n    ArticleDesign[ArticleDesign[\"Audio\"] = 2] = \"Audio\";\n    ArticleDesign[ArticleDesign[\"Video\"] = 3] = \"Video\";\n    ArticleDesign[ArticleDesign[\"Review\"] = 4] = \"Review\";\n    ArticleDesign[ArticleDesign[\"Analysis\"] = 5] = \"Analysis\";\n    ArticleDesign[ArticleDesign[\"Explainer\"] = 6] = \"Explainer\";\n    ArticleDesign[ArticleDesign[\"Comment\"] = 7] = \"Comment\";\n    ArticleDesign[ArticleDesign[\"Letter\"] = 8] = \"Letter\";\n    ArticleDesign[ArticleDesign[\"Feature\"] = 9] = \"Feature\";\n    ArticleDesign[ArticleDesign[\"LiveBlog\"] = 10] = \"LiveBlog\";\n    ArticleDesign[ArticleDesign[\"DeadBlog\"] = 11] = \"DeadBlog\";\n    ArticleDesign[ArticleDesign[\"Recipe\"] = 12] = \"Recipe\";\n    ArticleDesign[ArticleDesign[\"MatchReport\"] = 13] = \"MatchReport\";\n    ArticleDesign[ArticleDesign[\"Interview\"] = 14] = \"Interview\";\n    ArticleDesign[ArticleDesign[\"Editorial\"] = 15] = \"Editorial\";\n    ArticleDesign[ArticleDesign[\"Quiz\"] = 16] = \"Quiz\";\n    ArticleDesign[ArticleDesign[\"Interactive\"] = 17] = \"Interactive\";\n    ArticleDesign[ArticleDesign[\"PhotoEssay\"] = 18] = \"PhotoEssay\";\n    ArticleDesign[ArticleDesign[\"PrintShop\"] = 19] = \"PrintShop\";\n    ArticleDesign[ArticleDesign[\"Obituary\"] = 20] = \"Obituary\";\n    ArticleDesign[ArticleDesign[\"Correction\"] = 21] = \"Correction\";\n    ArticleDesign[ArticleDesign[\"FullPageInteractive\"] = 22] = \"FullPageInteractive\";\n    ArticleDesign[ArticleDesign[\"NewsletterSignup\"] = 23] = \"NewsletterSignup\";\n    ArticleDesign[ArticleDesign[\"Timeline\"] = 24] = \"Timeline\";\n    ArticleDesign[ArticleDesign[\"Profile\"] = 25] = \"Profile\";\n})(ArticleDesign || (ArticleDesign = {}));\n\nexport { ArticleDesign };\n//# sourceMappingURL=ArticleDesign.js.map\n","var ArticleDisplay;\n(function (ArticleDisplay) {\n    ArticleDisplay[ArticleDisplay[\"Standard\"] = 0] = \"Standard\";\n    ArticleDisplay[ArticleDisplay[\"Immersive\"] = 1] = \"Immersive\";\n    ArticleDisplay[ArticleDisplay[\"Showcase\"] = 2] = \"Showcase\";\n    ArticleDisplay[ArticleDisplay[\"NumberedList\"] = 3] = \"NumberedList\";\n})(ArticleDisplay || (ArticleDisplay = {}));\n\nexport { ArticleDisplay };\n//# sourceMappingURL=ArticleDisplay.js.map\n","var ArticlePillar;\n(function (ArticlePillar) {\n    ArticlePillar[ArticlePillar[\"News\"] = 0] = \"News\";\n    ArticlePillar[ArticlePillar[\"Opinion\"] = 1] = \"Opinion\";\n    ArticlePillar[ArticlePillar[\"Sport\"] = 2] = \"Sport\";\n    ArticlePillar[ArticlePillar[\"Culture\"] = 3] = \"Culture\";\n    ArticlePillar[ArticlePillar[\"Lifestyle\"] = 4] = \"Lifestyle\";\n})(ArticlePillar || (ArticlePillar = {}));\n\nexport { ArticlePillar };\n//# sourceMappingURL=ArticlePillar.js.map\n","var ArticleSpecial;\n(function (ArticleSpecial) {\n    ArticleSpecial[ArticleSpecial[\"SpecialReport\"] = 5] = \"SpecialReport\";\n    ArticleSpecial[ArticleSpecial[\"Labs\"] = 6] = \"Labs\";\n    ArticleSpecial[ArticleSpecial[\"SpecialReportAlt\"] = 7] = \"SpecialReportAlt\";\n})(ArticleSpecial || (ArticleSpecial = {}));\n\nexport { ArticleSpecial };\n//# sourceMappingURL=ArticleSpecial.js.map\n","// detect two or more `/` chars after a word boundary\nconst multipleSlashesInRoute = /\\b\\/{2,}/g;\nconst joinUrl = (...args) => args.join('/').replace(multipleSlashesInRoute, '/');\n\nexport { joinUrl };\n//# sourceMappingURL=joinUrl.js.map\n","/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page) •\n * [Design System](https://theguardian.design/2a1e5182b/p/41be19-grids)\n */\nconst breakpoints = {\n    mobile: 320,\n    mobileMedium: 375,\n    mobileLandscape: 480,\n    phablet: 660,\n    tablet: 740,\n    desktop: 980,\n    leftCol: 1140,\n    wide: 1300,\n};\n\nexport { breakpoints };\n//# sourceMappingURL=breakpoints.js.map\n","import { palette } from './colour/palette.js';\nexport { background, border, brandAltBackground, brandAltBorder, brandAltLine, brandAltText, brandBackground, brandBorder, brandLine, brandText, line, palette, text } from './colour/palette.js';\nexport { descriptionId } from './accessibility/description-id.js';\nexport { focusHalo, focusHaloSpaced } from './accessibility/focus-halo.js';\nexport { generateSourceId } from './accessibility/generate-source-id.js';\nexport { visuallyHidden } from './accessibility/visually-hidden.js';\nexport { transitions } from './animation/transitions.js';\nexport { breakpoints } from './breakpoints/breakpoints.js';\nexport { between, from, until } from './mq/mq.js';\nexport { height, iconSize, remHeight, remWidth, size, width } from './size/size.js';\nexport { remSpace, space } from './space/space.js';\nexport { body, headline, textSans, titlepiece } from './typography/index.js';\nexport { body as bodyObjectStyles, headline as headlineObjectStyles, textSans as textSansObjectStyles, titlepiece as titlepieceObjectStyles } from './typography/api.js';\nexport { bodySizes, fontWeights, fonts, headlineSizes, lineHeights, remBodySizes, remHeadlineSizes, remTextSansSizes, remTitlepieceSizes, textSansSizes, titlepieceSizes } from './typography/data.js';\nexport { appearance } from './utils/supports-queries.js';\nexport { FocusStyleManager } from './accessibility/focus-style-manager.js';\nexport { pxToRem, rootPixelFontSize } from './utils/px-to-rem.js';\nexport { resets } from './utils/resets.js';\nexport { svgBackgroundImage } from './utils/svg-background-image.js';\n\n/**\n * @deprecated exports - to be removed in a future major version.\n * Colours should now be imported from the `palette` object.\n */\nconst { brand, brandAlt, neutral, error, success, news, opinion, sport, culture, lifestyle, labs, specialReport, focus, } = palette;\n\nexport { brand, brandAlt, culture, error, focus, labs, lifestyle, neutral, news, opinion, specialReport, sport, success };\n//# sourceMappingURL=index.js.map\n","import { breakpoints } from '../breakpoints/breakpoints.js';\n\nconst minWidth = (from) => `@media (min-width: ${`${from}px`})`;\nconst maxWidth = (until) => `@media (max-width: ${`${until - 1}px`})`;\nconst minWidthMaxWidth = (from, until) => `@media (min-width: ${`${from}px`}) and (max-width: ${`${until - 1}px`})`;\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#from)\n *\n * @example\n *\tconst styles = css`\n *\t\t${from.mobileLandscape} {\n *\t\t\tpadding: 0 20px;\n *\t\t}\n * `;\n */\nconst from = {\n    mobile: minWidth(breakpoints.mobile),\n    mobileMedium: minWidth(breakpoints.mobileMedium),\n    mobileLandscape: minWidth(breakpoints.mobileLandscape),\n    phablet: minWidth(breakpoints.phablet),\n    tablet: minWidth(breakpoints.tablet),\n    desktop: minWidth(breakpoints.desktop),\n    leftCol: minWidth(breakpoints.leftCol),\n    wide: minWidth(breakpoints.wide),\n};\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#until)\n *\n * @example\n *\tconst styles = css`\n *\t\t${until.wide} {\n *\t\t\tpadding: 0 40px;\n *\t\t}\n * `;\n */\nconst until = {\n    mobile: maxWidth(breakpoints.mobile),\n    mobileMedium: maxWidth(breakpoints.mobileMedium),\n    mobileLandscape: maxWidth(breakpoints.mobileLandscape),\n    phablet: maxWidth(breakpoints.phablet),\n    tablet: maxWidth(breakpoints.tablet),\n    desktop: maxWidth(breakpoints.desktop),\n    leftCol: maxWidth(breakpoints.leftCol),\n    wide: maxWidth(breakpoints.wide),\n};\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#betweenand)\n *\n * @example\n *\tconst styles = css`\n *\t\t${between.phablet.and.desktop} {\n *\t\t\tpadding: 0 32px;\n *\t\t}\n * `;\n */\nconst between = {\n    mobile: {\n        and: {\n            mobileMedium: minWidthMaxWidth(breakpoints.mobile, breakpoints.mobileMedium),\n            mobileLandscape: minWidthMaxWidth(breakpoints.mobile, breakpoints.mobileLandscape),\n            phablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.phablet),\n            tablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.tablet),\n            desktop: minWidthMaxWidth(breakpoints.mobile, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.mobile, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide),\n        },\n    },\n    mobileMedium: {\n        and: {\n            mobileLandscape: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.mobileLandscape),\n            phablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.phablet),\n            tablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.tablet),\n            desktop: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide),\n        },\n    },\n    mobileLandscape: {\n        and: {\n            phablet: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.phablet),\n            tablet: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.tablet),\n            desktop: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.wide),\n        },\n    },\n    phablet: {\n        and: {\n            tablet: minWidthMaxWidth(breakpoints.phablet, breakpoints.tablet),\n            desktop: minWidthMaxWidth(breakpoints.phablet, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.phablet, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.phablet, breakpoints.wide),\n        },\n    },\n    tablet: {\n        and: {\n            desktop: minWidthMaxWidth(breakpoints.tablet, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.tablet, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.tablet, breakpoints.wide),\n        },\n    },\n    desktop: {\n        and: {\n            leftCol: minWidthMaxWidth(breakpoints.desktop, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.desktop, breakpoints.wide),\n        },\n    },\n    leftCol: {\n        and: {\n            wide: minWidthMaxWidth(breakpoints.leftCol, breakpoints.wide),\n        },\n    },\n};\n\nexport { between, from, until };\n//# sourceMappingURL=mq.js.map\n"],"names":["module","exports","h","svg","props","content","attributes","Object","assign","dangerouslySetInnerHTML","__html","children","desvg","React","bind","createElement","containerStyles","palette","css","textSans","fill","commentCount","until","commentCountUntilDesktop","iconContainerStyles","iconStyles","longStyles","between","shortStyles","linkStyles","CommentCount","format","discussionApiUrl","shortUrlId","useDiscussion","joinUrl","undefined","short","long","formatCount","decidePalette","data","data-cy","value","a","href","aria-label","div","CommentIcon","data-testid","aria-hidden","count","countAsInteger","parseInt","toFixed","displayCountLong","val","digits","split","len","length","i","splice","join","integerCommas","Math","round","toString","checkForErrors","response","ok","Error","statusText","status","useApi","url","options","init","error","useSWR","fetch","then","res","json","fetcher","loading","dedupingInterval","discussion","isClosedForComments","ArticleDesign","ArticleDisplay","ArticlePillar","ArticleSpecial","multipleSlashesInRoute","args","replace","breakpoints","mobile","mobileMedium","mobileLandscape","phablet","tablet","desktop","leftCol","wide","brand","brandAlt","neutral","success","news","opinion","sport","culture","lifestyle","labs","specialReport","focus","minWidth","from","maxWidth","minWidthMaxWidth","and"],"sourceRoot":""}