(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[3875],{4850:(e,n,t)=>{"use strict";t.r(n),t.d(n,{Carousel:()=>U});var r=t(5809),o=t(7800),i=t(43),s=t(1539),a=t(5246),l=t(2933),c=t(9525),d=t(7162),u=t(2522),f=t(3198),p=t.n(f),x=t(3904),h=t(5578),g=function(e){return function(e){return e.replace(new RegExp("[;]","g"),"")}(function(e){return e.replace(new RegExp(" ","g"),"-")}(e.replace(new RegExp("[^0-9a-z ]","gi"),";").toLowerCase()))},m=t(9e3),v=t(2290),b=t(5443),w=t(4954),k=t(2949),y=t(4026),j=t(9991),C=function(){return(0,o.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.4 4L8 14.4V15.45L18.4 25.8499L19.375 24.8999L11.05 14.925L19.375 4.95L18.4 4Z"})})},D=function(){return(0,o.jsx)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.975 4L9 4.95L17.325 14.925L9 24.8999L9.975 25.8499L20.375 15.45V14.4L9.975 4Z"})})},L=function(e,n){return e>=n-4},T=(0,i.css)("margin-top:6px;margin-bottom:24px;margin-left:0px;margin-right:0px;",a.Dp.tablet,"{margin-left:-10px;margin-right:-10px;}",a.Dp.leftCol,"{margin-left:-1px;margin-right:-10px;margin-top:6px;}"),I={name:"19qa1nl",styles:"display:flex;flex-direction:column;position:relative;overflow:hidden"},M=(0,i.css)("min-height:227px;position:relative;display:flex;flex-direction:row;align-items:stretch;scroll-snap-type:x mandatory;scroll-behavior:smooth;overflow-x:auto;overflow-y:hidden;",a.Dp.tablet,"{scrollbar-width:none;&::-webkit-scrollbar{display:none;}}",a.C4.tablet,"{margin-left:-10px;}"),S=(0,i.css)("margin-bottom:",l.D[2],"px;"),E=(0,i.css)("cursor:pointer;display:inline-block;height:",l.D[3],"px;width:",l.D[3],"px;background-color:",c.n$[93],";border-radius:100%;border:0 none;padding:0;margin-right:",l.D[1],"px;&:hover,&:focus{background-color:",c.n$[86],";outline:none;}"),P=function(e){return(0,i.css)("background-color:",e.background.carouselDot,";&:hover,&:focus{background-color:",e.background.carouselDotFocus,";}")},$=function(e,n){return(0,i.css)(a.Dp.phablet,"{display:",e>=n-1?"none":"auto",";}",a.Dp.tablet,"{display:",e>=n-2?"none":"auto",";}",a.Dp.desktop,"{display:",e>=n-3?"none":"auto",";}")},A=(0,i.css)("display:flex;flex-direction:column;justify-content:center;position:absolute;",(0,v.K)("onwardsCarousel")," height:100%;padding-bottom:36px;",a.C4.leftCol,"{display:none;}"),F=function(e){switch(e.design){case s.Y.LiveBlog:case s.Y.DeadBlog:return(0,i.css)(a.Dp.leftCol,"{left:205px;}");default:return(0,i.css)(a.Dp.leftCol,"{left:120px;}",a.Dp.wide,"{left:205px;}")}},H={name:"9q1moj",styles:"right:10px"},Z=(0,i.css)("border:0 none;border-radius:100%;height:34px;width:34px;cursor:pointer;margin-top:10px;padding:0;background-color:",c.n$[0],";&:active,&:hover{outline:none;background-color:",c.A5[400],";svg{fill:",c.n$[7],";}}&:focus{outline:none;}svg{fill:",c.n$[100],";height:34px;}"),R=function(e){return(0,i.css)("background-color:",0!==e?c.n$[0]:c.n$[60],";cursor:",0!==e?"pointer":"default",";&:hover,&:focus{background-color:",0!==e?c.A5[400]:c.n$[60],";svg{fill:",c.n$[100],";}}")},B=function(e,n){return(0,i.css)("padding-left:5px;margin-left:10px;background-color:",L(e,n)?c.n$[60]:c.n$[0],";cursor:",L(e,n)?"default":"pointer",";&:hover,&:focus{background-color:",L(e,n)?c.n$[60]:c.A5[400],";svg{fill:",c.n$[100],";}}")},Y=(0,i.css)("display:flex;flex-direction:row;justify-content:space-between;",a.Dp.tablet,"{padding-right:10px;}",a.Dp.tablet,"{margin-left:10px;}"),_=(0,i.css)(d.Se.xsmall({fontWeight:"bold"}),";color:",u.fL.primary,";",d.Se.xsmall({fontWeight:"bold"}),";padding-bottom:",l.D[2],"px;padding-top:",l.D[1],"px;margin-left:0;"),z=function(e,n){return(0,i.css)("color:",n?e.text.carouselTitle:u.fL.primary,";")},q=function(e){var n=e.title,t=e.palette,r=e.isCuratedContent;return(0,o.jsxs)("h2",{css:_,children:[r?"More from ":"",(0,o.jsx)("span",{css:z(t,r),children:n})]})},N=function(e){var n=e.format,t=e.linkTo,r=e.imageUrl,i=e.headlineText,a=e.webPublicationDate,l=e.kickerText,c=e.isFirst,d=e.dataLinkName,u=e.discussionId,f=e.branding;return(0,o.jsx)(w.LI,{percentage:"25%",showDivider:!c,padSides:!0,padSidesOnMobile:!0,snapAlignStart:!0,children:(0,o.jsx)(b.Z,{linkTo:t,format:n,headlineText:i,webPublicationDate:a,kickerText:l,imageUrl:r,imageSize:r?"carousel":void 0,showClock:!0,showAge:!0,imagePositionOnMobile:"top",minWidthInPixels:220,showQuotedHeadline:n.design===s.Y.Comment,dataLinkName:d,discussionId:u,branding:f,isExternalLink:!1})})},O=function(e){var n=e.heading,t=e.trails,r=e.palette,i=e.index,s=e.isCuratedContent,a=e.goToIndex;return(0,o.jsxs)("div",{children:[(0,o.jsx)(q,{title:n,palette:r,isCuratedContent:s}),(0,o.jsx)("div",{css:S,children:t.map((function(e,n){return(0,o.jsx)("span",{onClick:function(){return a(n)},"aria-hidden":"true",css:[E,n===i&&P(r),$(n,t.length)],"data-link-name":"carousel-small-nav-dot-".concat(n)},"dot-".concat(n))}))})]})},U=function(e){var n,t=e.heading,l=e.trails,c=e.onwardsSource,d=e.format,u=(0,h.b)(d),f=(0,x.useRef)(null),v=(0,x.useState)(0),b=(0,r.Z)(v,2),w=b[0],L=b[1],S=(0,x.useState)(0),E=(0,r.Z)(S,2),P=E[0],$=E[1],_="carousel-small-arrow",z="curated-content"===c,q=function(e){return"presentation"!==e.getAttribute("role")},U=function(){var e=f.current;return null===e?[]:Array.from(e.children)},V=function(){L(function(){var e=f.current,n=U().filter(q).map((function(e){return e.offsetLeft})),t=(0,r.Z)(n,1)[0];if(null===e||void 0===t)return 0;var o=e.scrollLeft+t,i=n.findIndex((function(e){return e>=o}));return Math.max(0,i)}())},W=function(e){var n=f.current;if(null!==n){var t=U().filter(q).map((function(e){return e.offsetLeft}));n.scrollTo({left:t[e]}),V()}},X=function(){var e=f.current,n=U().filter(q).map((function(e){return e.offsetLeft})),t=(0,r.Z)(n,1)[0];if(null!==e&&void 0!==t){var o=e.scrollLeft+t,i=n.reverse().find((function(e){return e<o}));void 0!==i&&0!==i?e.scrollTo({left:i}):e.scrollTo({left:0}),V()}},J=function(){var e=f.current,n=U().filter(q).map((function(e){return e.offsetLeft})),t=(0,r.Z)(n,1)[0];if(null!==e&&void 0!==t){var o=e.scrollLeft+t,i=n.find((function(e){return e>o}));void 0!==i&&0!==i&&e.scrollTo({left:i}),V()}};return(0,x.useEffect)((function(){var e=f.current;if(e)return e.addEventListener("scroll",p()(V,100)),e.removeEventListener("scroll",p()(V,100))})),(0,x.useEffect)((function(){return $((function(e){return Math.max(w,e)}))}),[w]),(0,o.jsxs)("div",{css:(n=l.length,(0,i.css)("display:flex;",n>1&&"justify-content: space-between"," overflow:hidden;",a.Dp.desktop,"{padding-right:40px;}")),"data-link-name":g(t),children:[(0,o.jsx)(k.FetchCommentCounts,{}),(0,o.jsx)(j.E,{borderType:"partial",size:d.design===s.Y.LiveBlog||d.design===s.Y.DeadBlog?"wide":"compact",children:(0,o.jsx)(O,{heading:t,trails:l,palette:u,index:w,isCuratedContent:z,goToIndex:W})}),(0,o.jsx)("div",{css:[A,F(d)],children:(0,o.jsx)("button",{type:"button",onClick:X,"aria-label":"Move carousel backwards",css:[Z,R(w)],"data-link-name":"".concat(_,"-prev"),children:(0,o.jsx)(C,{})})}),(0,o.jsx)("div",{css:[A,H],children:(0,o.jsx)("button",{type:"button",onClick:J,"aria-label":"Move carousel forwards",css:[Z,B(w,l.length)],"data-link-name":"".concat(_,"-next"),children:(0,o.jsx)(D,{})})}),(0,o.jsxs)("div",{css:[I,T],"data-component":c,"data-link":g(t),children:[(0,o.jsx)(y.c,{when:"above",breakpoint:"leftCol",children:(0,o.jsxs)("div",{css:Y,children:[(0,o.jsx)(O,{heading:t,trails:l,palette:u,index:w,isCuratedContent:z,goToIndex:W}),(0,o.jsxs)(y.c,{when:"below",breakpoint:"desktop",children:[(0,o.jsx)("button",{type:"button",onClick:X,"aria-label":"Move carousel backwards",css:[Z,R(w)],"data-link-name":"".concat(_,"-prev"),children:(0,o.jsx)(C,{})}),(0,o.jsx)("button",{type:"button",onClick:J,"aria-label":"Move carousel forwards",css:[Z,B(w,l.length)],"data-link-name":"".concat(_,"-next"),children:(0,o.jsx)(D,{})})]})]})}),(0,o.jsx)("ul",{css:M,ref:f,"data-component":"carousel-small | maxIndex-".concat(P),children:l.map((function(e,n){var t=e.url,r=e.headline,i=e.webPublicationDate,s=e.format,a=e.image,l=e.kickerText,c=e.branding,d=e.discussion;if(!i)return null;var u=a&&(0,m.Y)(a);return(0,o.jsx)(N,{isFirst:0===n,format:s,linkTo:t,headlineText:r,webPublicationDate:i,imageUrl:u,kickerText:l,dataLinkName:"carousel-small-card-position-".concat(n),discussionId:null!=d&&d.isCommentable?d.discussionId:void 0,branding:c},"".concat(e.url).concat(n))}))})]})]})}},2949:(e,n,t)=>{"use strict";t.r(n),t.d(n,{FetchCommentCounts:()=>C});var r=t(5809),o=t(7800),i=t(2631),s=t(3904),a=t(5761),l=t(8678),c=t(5953),d=t(6325),u=t(43),f=t(7162),p=t(5246),x=t(1374),h=t.n(x),g=t(5578),m=function(e,n){return(0,u.css)("display:flex;flex-direction:row;",f.OS.xxsmall({lineHeight:"tight"}),";margin-top:-4px;padding-left:5px;padding-right:5px;color:",n?e.text.dynamoHeadline:e.text.cardFooter,";")},v=function(e,n){return(0,u.css)("svg{margin-bottom:-5px;height:14px;width:14px;margin-right:2px;fill:",n?e.text.dynamoHeadline:e.text.cardFooter,";}")},b=(0,u.css)("display:block;",p.vX.leftCol.and.wide,"{display:none;}"),w=(0,u.css)("display:none;",p.vX.leftCol.and.wide,"{display:block;}"),k=function(e){var n=e.containerPalette,t=e.format,r=e.short,i=e.long,s=e.isDynamo,a=(0,g.b)(t,n);return(0,o.jsxs)("div",{css:m(a,s),children:[(0,o.jsx)("div",{css:v(a,s),children:(0,o.jsx)(h(),{})}),(0,o.jsx)("div",{css:b,"aria-hidden":"true",children:i}),(0,o.jsx)("div",{css:w,"aria-hidden":"true",children:r})]})};function y(){var e=[];return document.querySelectorAll("[data-discussion-id]").forEach((function(n){if(n instanceof HTMLElement)try{var t=n.dataset,r=t.discussionId,o=t.format,i=t.isDynamo,s=t.containerPalette;r&&o&&e.push({discussionId:r,format:JSON.parse(o),isDynamo:!!i||void 0,containerPalette:s})}catch(e){}})),e}function j(e){var n=e.flatMap((function(e){return e.discussionId}));return"https://api.nextgen.guardianapps.co.uk/discussion/comment-counts.json?shortUrls=".concat(n.join(","))}var C=function(e){var n=e.repeat,t=(0,s.useState)(),u=(0,r.Z)(t,2),f=u[0],p=u[1];return(0,s.useEffect)((function(){var e=y();p(j(e))}),[]),(0,d.h)(f,{refreshInterval:n?15e3:0,refreshWhenHidden:!1,onSuccess:function(e){var n,t=y();if(null!=e&&e.counts)try{n=function(e,n){return e.map((function(e){var t=e.count,r=e.id,o=(0,c.C)(t),i=o.long,s=o.short,a=n.find((function(e){return e.discussionId===r})),l=null==a?void 0:a.format,d=null==a?void 0:a.isDynamo,u=null==a?void 0:a.containerPalette;return{id:r,long:i,short:s,format:l,isDynamo:d,containerPalette:u}}))}(e.counts,t),n.forEach((function(e){var n=document.querySelector('[data-discussion-id="'.concat(e.id,'"]'));n&&((0,a.so)(n).render((0,o.jsx)(i.C,{value:(0,l.E)(),children:(0,o.jsx)(k,{format:e.format,short:e.short,long:e.long,isDynamo:e.isDynamo,containerPalette:e.containerPalette})})),n.setAttribute("aria-label","".concat(e.short," Comments")))}))}catch(e){}p(j(t))}}),null}},9991:(e,n,t)=>{"use strict";t.d(n,{E:()=>f});var r=t(7800),o=t(43),i=t(5246),s=t(2522),a=t(2933),l=function(e){return"wide"===e?(0,o.css)("padding-right:10px;",i.C4.leftCol,"{display:none;}",i.Dp.leftCol,"{flex-basis:230px;flex-grow:0;flex-shrink:0;}"):(0,o.css)("padding-right:10px;",i.C4.leftCol,"{display:none;}",i.vX.leftCol.and.wide,"{flex-basis:151px;flex-grow:0;flex-shrink:0;}",i.Dp.wide,"{flex-basis:230px;flex-grow:0;flex-shrink:0;}")},c={name:"bjn8wh",styles:"position:relative"},d=function(e){return(0,o.css)(":before{content:'';position:absolute;top:0;bottom:0;right:0;height:30px;width:1px;background:",e,";}")},u={name:"13udsys",styles:"height:100%"},f=function(e){var n,t=e.children,i=e.borderType,f=e.borderColour,p=void 0===f?s.Cg.secondary:f,x=e.size,h=void 0===x?"compact":x,g=e.verticalMargins,m=void 0===g||g;return(0,r.jsx)("section",{css:[c,l(h),"full"===i&&(n=p,(0,o.css)("border-right:1px solid ",n,";")),m&&(0,o.css)("padding-bottom:",a.D[9],"px;")],children:(0,r.jsx)("div",{css:["partial"===i&&d(p),u],children:t})})}},5953:(e,n,t)=>{"use strict";t.d(n,{C:()=>r});var r=function(e){if(void 0===e)return{short:"…",long:"…"};if(0===e)return{short:"0",long:"0"};var n=parseInt(e.toFixed(0),10),t=function(e){for(var n=e.toFixed(0).split(""),t=n.length,r=n.length-1;r>=1;r-=1)(t-r)%3==0&&n.splice(r,0,",");return n.join("")}(n);return{short:n>1e4?"".concat(Math.round(n/1e3),"k"):n.toString(),long:t}}},1374:(e,n,t)=>{e.exports={attributes:{width:"16",height:"16",viewBox:"0 0 16 16"},content:'<path d="M13 0l1 1v7l-1 1H7l-2 3H4V9H2L1 8V1l1-1h11z"></path>'};var r=t(5951);e.exports=r(e.exports)}}]);
//# sourceMappingURL=Carousel-importable.legacy.40a8d298ad52f98d6ecc.js.map