"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[516],{5999:(e,t,n)=>{n.d(t,{g:()=>Yn});var s=n(43),r=n(3904),o=n(7357),i=n(3196),a=n(4436),l=n(683),c=n(1810),d=n(3220),u=n(5237),m=n(5706),p=n(7800),g=n(4655),x=n(1083);function h(){const e=(t=["\n\t\t\t\t\t","\n\t\t\t\t"],n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}})));var t,n;return h=function(){return e},e}const f=e=>{let{size:t}=e;return(0,p.jsx)("svg",{width:t?g.EA[t]:void 0,height:void 0,viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg",focusable:!1,"aria-hidden":!0,children:(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.956 23V4.726l8.575 7.167.932-.932L12.478 1h-.956l-9.984 9.96.931.932 8.576-7.166V23h1.91Z"})})},b=e=>{let{size:t,isAnnouncedByScreenReader:n=!1}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(f,{size:t}),n?(0,p.jsx)("span",{css:(0,s.css)(h(),x.j),children:"Arrow up"}):""]})};var y=n(7555);function j(){const e=(t=["\n\t\t\t\t\t","\n\t\t\t\t"],n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}})));var t,n;return j=function(){return e},e}const v=e=>{let{size:t}=e;return(0,p.jsx)("svg",{width:t?g.EA[t]:void 0,height:void 0,viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg",focusable:!1,"aria-hidden":!0,children:(0,p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.025 11.5V7H3v5.45l1.025 1.025H17.75L15 17.05l.85.9L21 12.825v-.675l-5.1-5.125-.9.875 2.75 3.6H5.025Z"})})},w=e=>{let{size:t,isAnnouncedByScreenReader:n=!1}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(v,{size:t}),n?(0,p.jsx)("span",{css:(0,s.css)(j(),x.j),children:"Indent"}):""]})};var S=n(5158),k=n(2903),C=n(7608),P=n(5575),D=n(5364),O=n(4857);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){I(e,t,n[t])}))}return e}function z(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n.push.apply(n,s)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function T(){const e=(t=["\n  0% {\n    background-position: -1500px 0;\n  }\n  100% {\n    background-position: 1500px 0;\n  }\n"],n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}})));var t,n;return T=function(){return e},e}const E=e=>e.filter((e=>e)).map((e=>"/"===e.substr(0,1)?e.slice(1):e)).map((e=>"/"===e.substr(e.length-1,1)?e.slice(0,-1):e)).join("/");let U={baseUrl:"https://discussion.theguardian.com/discussion-api",apiKey:"discussion-rendering",headers:{},idApiUrl:"https://idapi.theguardian.com"},L={"api-key":U.apiKey};const A=e=>"?"+Object.keys(e).map((t=>"".concat(t,"=").concat(e[t]))).join("&"),F=(e,t)=>{const n=R({},L,{orderBy:"recommendations"===t.orderBy?"mostRecommended":t.orderBy,pageSize:t.pageSize,displayThreaded:"unthreaded"!==t.threads,maxResponses:"collapsed"===t.threads?3:100,page:t.page}),s=A(n),r=E([U.baseUrl,"discussion",e])+s;return fetch(r,{headers:R({},U.headers)}).then((e=>e.json())).then((n=>"DISCUSSION_ONLY_AVAILABLE_IN_LINEAR_FORMAT"===n.errorCode?F(e,R({},t,{threads:"unthreaded"})):n)).catch((e=>console.error("Error fetching ".concat(r),e)))},B=e=>{const t=E([U.baseUrl,"comment/preview"])+A(L),n=new URLSearchParams;return n.append("body",e),fetch(t,{method:"POST",body:n.toString(),headers:R({"Content-Type":"application/x-www-form-urlencoded"},U.headers)}).then((e=>e.json())).then((e=>e.commentBody)).catch((e=>console.error("Error fetching ".concat(t),e)))},N=(e,t)=>{const n=E([U.baseUrl,"discussion",e,"comment"])+A(L),s=new URLSearchParams;return s.append("body",t),fetch(n,{method:"POST",body:s.toString(),headers:R({"Content-Type":"application/x-www-form-urlencoded"},U.headers),credentials:"include"}).then((e=>e.json()))},M=(e,t,n)=>{const s=E([U.baseUrl,"discussion",e,"comment",n.toString(),"reply"])+A(L),r=new URLSearchParams;return r.append("body",t),fetch(s,{method:"POST",body:r.toString(),headers:R({"Content-Type":"application/x-www-form-urlencoded"},U.headers),credentials:"include"}).then((e=>e.json()))},$=e=>{const t=E([U.baseUrl,"comment",e.toString(),"recommend"])+A(L);return fetch(t,{method:"POST",credentials:"include",headers:R({},U.headers)}).then((e=>e.ok))};var _={name:"ho1qnd",styles:"display:flex;flex-direction:row"};const H=e=>{let{children:t}=e;return(0,s.jsx)("div",{css:_},t)},q=e=>{switch(e){case P.D.News:return"news";case P.D.Opinion:return"opinion";case P.D.Culture:return"culture";case P.D.Sport:return"sport";case P.D.Lifestyle:return"lifestyle";case D.v.Labs:return"labs";default:return"news"}},V={news:o.r,opinion:o.VK,culture:o.TG,sport:o.Fp,lifestyle:o.H5,labs:o.lh},W=(e,t)=>{switch(t){case"primary":return(0,s.css)("button{",i.OS.small({fontWeight:"bold"})," background-color:",V[q(e)][300],";color:",o.n$[100],";:hover{background-color:",V[q(e)][400],";}}");case"secondary":return(0,s.css)("button{",i.OS.small({fontWeight:"bold"})," background-color:transparent;border:1px solid ",V[q(e)][400],";color:",V[q(e)][400],";:hover{background-color:",(e=>{switch(e){case P.D.Culture:return"#FBF6EF";case P.D.Opinion:return"#FEF9F5";case P.D.Lifestyle:return"#FEEEF7";case P.D.Sport:return"#F1F8FC";case P.D.News:case D.v.SpecialReport:case D.v.Labs:default:return"#FFF4F2"}})(e),";}}");case"subdued":return(0,s.css)("button{",i.OS.small({fontWeight:"bold"})," background-color:transparent;color:",V[q(e)][400],";border-radius:0;}")}},K=e=>{let{pillar:t,onClick:n,type:r,priority:o="primary",children:i,icon:a,iconSide:l,linkName:c,size:u="default"}=e;return(0,s.jsx)("div",{css:W(t,o)},(0,s.jsx)(d.z,{priority:o,size:u,onClick:n,type:r,icon:a,iconSide:l,"data-link-name":c},i))},Y=(0,s.css)("padding:",a.D[2],"px;background-color:",o.n$[93],";margin-bottom:",a.D[5],"px;position:relative;min-height:",a.D[9],"px;p{padding-left:",a.D[2],"px;}"),J=(0,s.css)(i.OS.small(),";"),G=e=>{let{children:t}=e;return(0,s.jsx)("p",{css:J},t)},Q=e=>{let{body:t,pillar:n,error:o="",submitForm:l,cancelSubmit:c,onPreview:d}=e;const[p,g]=(0,r.useState)(""),[x,h]=(0,r.useState)("");return(0,r.useEffect)((()=>{(async()=>{try{const e=d||B,n=await e(t);g(n)}catch(e){g("")}})()}),[t,d]),(0,s.jsx)("div",{css:(0,s.css)("padding:",a.D[2],"px;")},(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),l(x)}},(0,s.jsx)("h3",{css:(0,s.css)(i.Se.xxsmall({fontWeight:"bold"}),";")},"Welcome, you’re about to make your first comment!"),(0,s.jsx)(G,null,"Before you post, we’d like to thank you for joining the debate - we’re glad you’ve chosen to participate and we value your opinions and experiences."),(0,s.jsx)(G,null,"Please choose your username under which you would like all your comments to show up. You can only set your username once."),(0,s.jsx)(u.o,{label:"Username:",supporting:"Must be 6-20 characters, letters and/or numbers only, no spaces.",value:x,onChange:e=>h(e.target.value),width:30,error:o}),(0,s.jsx)(G,null,(0,s.jsx)(r.default.Fragment,null,"Please keep your posts respectful and abide by the"," ",(0,s.jsx)(m.r,{href:"/community-standards",priority:"primary",subdued:!0,rel:"nofollow"},(0,s.jsx)("span",{css:J},"community guidelines"))," -"," and if you spot a comment you think doesn’t adhere to the guidelines, please use the ‘Report’ link next to it to let us know.")),(0,s.jsx)(G,null,"Please preview your comment below and click ‘post’ when you’re happy with it."),(0,s.jsx)("div",{css:[Y,J,""],dangerouslySetInnerHTML:{__html:p||""}}),(0,s.jsx)(H,null,(0,s.jsx)(K,{pillar:n,onClick:()=>l(x),linkName:"post comment",size:"small"},"Post your comment"),(0,s.jsx)("div",{css:(0,s.css)("width:",a.D[3],"px;")}),(0,s.jsx)(K,{pillar:n,priority:"subdued",onClick:c,linkName:"cancel-post-comment",size:"small"},"Cancel"))))},Z=(0,s.css)(i.OS.small()," padding:",a.D[2],"px ",a.D[4],"px;background-color:",o.n$[93],";border-radius:5px;margin-top:0;margin-bottom:",20,"px;word-break:break-word;blockquote{margin-top:",a.D[3],"px;margin-bottom:",a.D[3],"px;margin-left:",a.D[5],"px;margin-right:",a.D[5],"px;padding-left:",a.D[2],"px;color:",o.n$[46],";}i{font-style:italic;}b{font-weight:bold;}code{font-family:monospace;font-size:1em;}p{margin-top:0;margin-bottom:",a.D[3],"px;}"),X=(0,s.css)("display:block;left:0;width:0;height:0;border-right:1rem solid transparent;border-bottom:1rem solid ",o.n$[93],";margin-left:12.5rem;border-right-style:inset;"),ee=e=>{let{previewHtml:t}=e;return(0,s.jsx)(r.default.Fragment,null,(0,s.jsx)("div",{css:X}),(0,s.jsx)("div",{css:Z,dangerouslySetInnerHTML:{__html:t||""}}))},te=e=>"<b>".concat(e,"</b>"),ne=e=>"<i>".concat(e,"</i>"),se=e=>"<del>".concat(e,"</del>"),re=e=>"<code>".concat(e,"</code>"),oe=e=>"<blockquote>".concat(e,"</blockquote>"),ie=(0,s.css)("display:flex;flex-wrap:wrap;margin-bottom:",a.D[5],"px;"),ae=(0,s.css)("width:100%;margin-bottom:",a.D[3],"px;padding:8px 10px 10px 8px;",i.OS.small(),";border-color:",o.n$[86],";:focus{border-color:",o.n$[46],";outline:none;}"),le=(0,s.css)("::placeholder{color:",o.n$[46],";}"),ce=(0,s.css)("::placeholder{font-weight:bold;opacity:1;color:",o.n$[0],";}"),de=(0,s.css)("margin:0;",i.OS.xxsmall(),";"),ue=(0,s.css)("margin:0;",i.OS.xxsmall(),";color:",l.fL.error,";"),me=(0,s.css)("margin:0;",i.OS.xxsmall(),";color:",l.fL.supporting,";"),pe={name:"hkh81z",styles:"margin-top:8px"},ge=(0,s.css)("a{color:",l.fL.anchorPrimary,";text-decoration:none;:hover,:focus{text-decoration:underline;}}"),xe=(0,s.css)("background-color:",o.n$[97],";padding:8px 10px 10px 8px;width:100%;margin-top:8px;margin-bottom:2px;"),he=(0,s.css)("height:22px;font-size:13px;line-height:17px;border:1px solid ",o.n$[100],";color:",o.n$[46],";text-align:center;cursor:pointer;margin-left:4px;padding:2px 5px 0px 5px;min-width:11px;line-height:17px;list-style-type:none;"),fe={name:"1xnavr4",styles:"width:100%;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-between;align-items:stretch;align-content:space-between"},be=e=>{let{amount:t}=e;return(0,s.jsx)("div",{css:(0,s.css)("width:",a.D[t],"px;")})},ye=e=>{let{shortUrl:t,pillar:n,onAddComment:o,user:i,setCommentBeingRepliedTo:a,commentBeingRepliedTo:l,onComment:c,onReply:d,onPreview:u}=e;const[m,p]=(0,r.useState)(!!l),[g,x]=(0,r.useState)(!1),[h,f]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[j,v]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[k,C]=(0,r.useState)(!1),P=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e,t;l&&(null==(e=document.getElementById("comment-".concat(l.id)))||e.scrollIntoView(),null==(t=document.querySelector("#comment-reply-form-".concat(l.id," textarea")))||t.focus())}),[l]);const D=()=>{if(!P||!P.current)return;const e=P.current.selectionStart,t=P.current.selectionEnd,n=P.current.value;return{startString:n.substring(0,e),highlightedString:n.substring(e,t),endString:n.substring(t,n.length)}},O=e=>{const t=D();if(!t)return;const{startString:n,highlightedString:s,endString:r}=t;f(n.concat(e(s),r))},I=()=>{v(""),S(""),f(""),C(!1),p(!1),a&&a()},z=async()=>{if(v(""),S(""),h){const e=c||N,n=d||M,s=l?await n(t,h,l.id):await e(t,h);"USERNAME_MISSING"===s.errorCode?x(!0):"EMPTY_COMMENT_BODY"===s.errorCode?v("Please write a comment."):"COMMENT_TOO_LONG"===s.errorCode?v("Your comment must be fewer than 5000 characters long."):"USER_BANNED"===s.errorCode?v('Commenting has been disabled for this account (<a href="/community-faqs#321a">why?</a>).'):"IP_THROTTLED"===s.errorCode?v('Commenting has been temporarily blocked for this IP address (<a href="/community-faqs">why?</a>).'):"DISCUSSION_CLOSED"===s.errorCode?v("Sorry your comment can not be published as the discussion is now closed for comments."):"PARENT_COMMENT_MODERATED"===s.errorCode?v("Sorry the comment can not be published as the comment you replied to has been moderated since."):"COMMENT_RATE_LIMIT_EXCEEDED"===s.errorCode?v("You can only post one comment every minute. Please try again in a moment."):"INVALID_PROTOCOL"===s.errorCode?v("Sorry your comment can not be published as it was not sent over\n                  a secure channel. Please report us this issue using the technical issue link\n                  in the page footer."):"AUTH_COOKIE_INVALID"===s.errorCode?v("Sorry, your comment was not published as you are no longer signed in. Please sign in and try again."):"READ-ONLY-MODE"===s.errorCode?v("Sorry your comment can not currently be published as\n                  commenting is undergoing maintenance but will be back shortly. Please try\n                  again in a moment."):"API_CORS_BLOCKED"===s.errorCode?v("Could not post due to your internet settings, which might be\n                 controlled by your provider. Please contact your administrator\n                 or disable any proxy servers or VPNs and try again."):"API_ERROR"===s.errorCode?v("Sorry, there was a problem posting your comment. Please try\n                  another browser or network connection.  Reference code "):"EMAIL_VERIFIED"===s.errorCode?S("Sent. Please check your email to verify your email address. Once verified post your comment."):"EMAIL_VERIFIED_FAIL"===s.errorCode?v('We are having technical difficulties. Please try again later or\n            <a href="#">\n            <strong>resend the verification</strong></a>.'):"EMAIL_NOT_VALIDATED"===s.errorCode?v('Please confirm your email address to comment.<br />\n            If you can\'t find the email, we can\n            <a href="#">\n            <strong>resend the verification email</strong></a> to your email\n            address.'):"ok"===s.status?(o(((e,t,n,s)=>R({id:e,body:t,date:Date(),isoDateTime:(new Date).toISOString(),status:"visible",webUrl:"https://discussion.theguardian.com/comment-permalink/".concat(e),apiUrl:"https://discussion.guardianapis.com/discussion-api/comment/".concat(e),numRecommends:0,isHighlighted:!1,userProfile:{userId:n.userId,displayName:n.displayName,webUrl:n.webUrl,apiUrl:n.apiUrl,avatar:n.avatar,secureAvatarUrl:n.secureAvatarUrl,badge:n.badge}},s?{responseTo:{displayName:s.userProfile.displayName,commentApiUrl:"https://discussion.guardianapis.com/discussion-api/comment/".concat(s.id),isoDateTime:s.isoDateTime,date:s.date,commentId:String(s.id),commentWebUrl:"https://discussion.theguardian.com/comment-permalink/".concat(s.id)}}:{responses:[]}))(parseInt(s.message),h,i,l)),I()):v("Sorry, there was a problem posting your comment.")}};return g&&h?(0,s.jsx)(Q,{pillar:n,body:h,error:j,submitForm:async e=>{var t,n;if(v(""),!e)return void v("Username field cannot be empty");const s=await(e=>{const t=U.idApiUrl+"/user/me"+A(L);return fetch(t,{method:"POST",credentials:"include",body:JSON.stringify({publicFields:{username:e,displayName:e}}),headers:{"Content-Type":"application/json"}}).then((e=>e.json())).catch((e=>console.error("Error fetching ".concat(t),e)))})(e);"ok"===s.status?(z(),x(!1)):s.errors&&v(null!=(n=null==(t=s.errors[0])?void 0:t.message)?n:"unknown error")},cancelSubmit:()=>x(!1),onPreview:u}):(0,s.jsx)(r.default.Fragment,null,(0,s.jsx)("form",{css:ie,onSubmit:e=>{e.preventDefault(),z()}},j&&(0,s.jsx)("div",{css:pe},(0,s.jsx)("p",{css:[ue,ge,""],dangerouslySetInnerHTML:{__html:j}})),w&&(0,s.jsx)("div",{css:pe},(0,s.jsx)("p",{css:[me,ge,""]},w)),m&&(0,s.jsx)("div",{css:xe},(0,s.jsx)("p",{css:[de,ge,""]},"Please keep comments respectful and abide by the"," ",(0,s.jsx)("a",{href:"/community-standards"},"community guidelines"),"."),i.privateFields&&i.privateFields.isPremoderated&&(0,s.jsx)("p",{css:[ue,ge,""]},"Your comments are currently being pre-moderated (",(0,s.jsx)("a",{href:"/community-faqs#311",target:"_blank",rel:"nofollow"},"why?"),")")),(0,s.jsx)("textarea",{"data-testid":"comment-input",placeholder:l||!m?"Join the discussion":"",css:[ae,l&&m&&le,!l&&!m&&ce,""],ref:P,style:{height:m?"132px":"50px"},onChange:e=>{f(e.target.value||"")},value:h,onFocus:()=>p(!0)}),(0,s.jsx)("div",{css:fe},(0,s.jsx)(H,null,(0,s.jsx)(r.default.Fragment,null,(0,s.jsx)(K,{pillar:n,type:"submit",linkName:"post comment",size:"small"},"Post your comment"),(m||h)&&(0,s.jsx)(r.default.Fragment,null,(0,s.jsx)(be,{amount:3}),(0,s.jsx)(K,{pillar:n,onClick:async()=>{if(h)try{const e=u||B,t=await e(h);y(t),C(!0)}catch(e){v("Preview request failed, please try again"),y(""),C(!1)}},priority:"secondary",linkName:"preview-comment",size:"small"},"Preview"),(0,s.jsx)(be,{amount:3}),(0,s.jsx)(K,{pillar:n,onClick:I,priority:"subdued",linkName:"cancel-post-comment",size:"small"},"Cancel")))),m&&(0,s.jsx)(H,null,(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),O(te)},css:he,"data-link-name":"formatting-controls-bold"},"B"),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),O(ne)},css:he,"data-link-name":"formatting-controls-italic"},"i"),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),O(se)},css:he,"data-link-name":"formatting-controls-strikethrough"},"S̶"),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),O(re)},css:he,"data-link-name":"formatting-controls-code"},"<>"),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),O(oe)},css:he,"data-link-name":"formatting-controls-quote"},'"'),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),(()=>{const e=prompt("Your URL:","http://www.");if(null===e)return;const t=D();if(!t)return;const{startString:n,highlightedString:s,endString:r}=t;f(n.concat(((e,t)=>'<a href="'.concat(e,'" rel="nofollow">').concat(t||e,"</a>"))(e,s),r))})()},css:he,"data-link-name":"formatting-controls-link"},"Link")))),k&&(0,s.jsx)(ee,{previewHtml:b}))},je={name:"fhxb3m",styles:"display:flex;flex-direction:row;align-items:center"},ve={name:"1g57i33",styles:"display:inline-block;width:15px;height:15px"},we=(0,s.css)("display:inline-block;line-height:15px;margin:0 0 0 ",a.D[1],"px;",i.OS.xxsmall({fontWeight:"bold"}),";"),Se=(0,s.css)("fill:",o.UQ[400],";"),ke=(0,s.css)("color:",o.UQ[400],";"),Ce=(0,s.css)("color:",o.n$[7],";"),Pe=()=>(0,s.jsx)("div",{css:je},(0,s.jsx)("svg",{width:"36",height:"36",viewBox:"0 0 36 36",css:[ve,Se,""]},(0,s.jsx)("path",{d:"M18 0a18 18 0 1 0 0 36 18 18 0 0 0 0-36"}),(0,s.jsx)("path",{fill:o.n$[100],d:"M21.2 4.4c2.3.4 5.3 2 6.3 3.1v5.2H27L21.2 5v-.6zm-2.2.4c-4 0-6.3 5.6-6.3 13.2 0 7.7 2.2 13.3 6.3 13.3v.6c-6 .4-14.4-4.2-14-13.8A13.3 13.3 0 0 1 19 4v.7zm10.4 14.4l-1.9.9v8.6c-1 1-3.8 2.6-6.3 3.1V19.9l-2.2-.7v-.6h10.4v.6z"})),(0,s.jsx)("p",{css:[we,ke,""]},"Staff")),De=()=>(0,s.jsx)("div",{css:je},(0,s.jsx)("svg",{width:"36",height:"36",viewBox:"0 0 36 36",css:[ve,Se,""]},(0,s.jsx)("path",{d:"M18 0a18 18 0 1 0 0 36 18 18 0 0 0 0-36"}),(0,s.jsx)("path",{fill:o.n$[100],d:"M21.2 4.4c2.3.4 5.3 2 6.3 3.1v5.2H27L21.2 5v-.6zm-2.2.4c-4 0-6.3 5.6-6.3 13.2 0 7.7 2.2 13.3 6.3 13.3v.6c-6 .4-14.4-4.2-14-13.8A13.3 13.3 0 0 1 19 4v.7zm10.4 14.4l-1.9.9v8.6c-1 1-3.8 2.6-6.3 3.1V19.9l-2.2-.7v-.6h10.4v.6z"})),(0,s.jsx)("p",{css:[we,ke,""]},"Contributor")),Oe=()=>(0,s.jsx)("div",{css:je},(0,s.jsx)("svg",{width:"36",height:"36",viewBox:"0 0 36 36",css:ve},(0,s.jsx)("path",{d:"M18 0a18 18 0 1 0 0 36 18 18 0 0 0 0-36"}),(0,s.jsx)("path",{fill:o.n$[100],d:"M21.2 4.4c2.3.4 5.3 2 6.3 3.1v5.2H27L21.2 5v-.6zm-2.2.4c-4 0-6.3 5.6-6.3 13.2 0 7.7 2.2 13.3 6.3 13.3v.6c-6 .4-14.4-4.2-14-13.8A13.3 13.3 0 0 1 19 4v.7zm10.4 14.4l-1.9.9v8.6c-1 1-3.8 2.6-6.3 3.1V19.9l-2.2-.7v-.6h10.4v.6z"})),(0,s.jsx)("p",{css:[we,Ce,""]},"Guardian Pick")),Ie=(0,s.css)(i.OS.xxsmall({fontWeight:"light"})," min-width:0.75rem;color:",o.n$[46],";margin-right:0.3125rem;"),Re=(e,t)=>(0,s.css)("cursor:",e||!t?"default":"pointer",";width:1.1875rem;height:1.1875rem;background-color:",e?o.UQ[400]:o.n$[97],";border-radius:62.5rem;border:none;"),ze=e=>(0,s.css)("display:flex;flex-direction:column;align-items:center;svg{fill:",e?o.n$[100]:o.n$[46],";height:15px;width:15px;}"),Te=e=>{let{commentId:t,initialCount:n,alreadyRecommended:o,isSignedIn:i,userMadeComment:a,onRecommend:l}=e;const[c,d]=(0,r.useState)(n),[u,m]=(0,r.useState)(o);return(0,s.jsx)(H,null,(0,s.jsx)("div",{css:Ie},c),(0,s.jsx)("button",{css:Re(u,i),onClick:()=>(()=>{const e=c+1;d(e),m(!0),(l||$)(t).then((t=>{t||(d(e-1),m(o))}))})(),disabled:u||!i||a,"data-link-name":"Recommend comment","aria-label":"Recommend comment"},(0,s.jsx)("div",{css:ze(u)},(0,s.jsx)(b,null))))},Ee=(0,s.css)("z-index:1;border:1px solid ",o.n$[86],";position:absolute;width:300px;top:0;right:0;display:flex;flex-direction:column;padding:",a.D[3],"px;background-color:white;",i.OS.xxsmall(),";"),Ue=(0,s.css)("display:flex;flex-direction:column;margin-bottom:",a.D[2],"px;label{display:block;}select,input,textarea{min-height:",a.D[5],"px;width:75%;border:1px solid ",o.n$[86],";}"),Le={name:"hwfcu5",styles:"color:red"};var Ae={name:"114fqm7",styles:"color:green;margin-left:1em"},Fe={name:"1mwkkc",styles:"margin-left:1em"};const Be=e=>{let{commentId:t,toggleSetShowForm:n,pillar:o}=e;const l=(0,r.useRef)(null);let c=null,u=null;(0,r.useEffect)((()=>{l.current&&(c=l.current.querySelector('select[name="category"]'),u=l.current.querySelector('button[custom-guardian="close-modal"]'))}),[l]),(0,r.useEffect)((()=>{c&&c.focus()}),[c]),(0,r.useEffect)((()=>{document.addEventListener("mousedown",(e=>{l.current&&!l.current.contains(e.target)&&n()}))}),[l,n]),(0,r.useEffect)((()=>{const e=e=>{if(27===e.keyCode)n();else if(9===e.keyCode){if(!c||!u)return;e.shiftKey||document.activeElement!==u||(c&&c.focus(),e.preventDefault()),e.shiftKey&&document.activeElement===c&&(u&&u.focus(),e.preventDefault())}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}));const[m,p]=(0,r.useState)({categoryId:0,reason:"",email:""}),g={categoryId:"",reason:"",email:"",response:""},[x,h]=(0,r.useState)(g),[f,b]=(0,r.useState)(),j=(e=>(0,s.css)("color:",V[q(e)][400],";",i.OS.small({fontWeight:"bold"}),";"))(o);return(0,s.jsx)("div",{"aria-modal":"true",ref:l},(0,s.jsx)("form",{css:Ee,onSubmit:async e=>{e.preventDefault();const{categoryId:n,reason:s,email:r}=m;if(h(g),!n)return void h(z(R({},x),{categoryId:"You must select a category before submitting"}));const o=await(e=>{let{commentId:t,categoryId:n,email:s,reason:r}=e;const o=E([U.baseUrl,"comment",t.toString(),"reportAbuse"])+A(L),i=new URLSearchParams;return i.append("categoryId",n.toString()),s&&i.append("email",s.toString()),r&&i.append("reason",r),fetch(o,{method:"POST",body:i.toString(),headers:R({"Content-Type":"application/x-www-form-urlencoded"},U.headers)}).then((e=>e.json()))})({categoryId:n,reason:s,email:r,commentId:t});"ok"!==o.status?h(z(R({},x),{response:o.message})):b("Report submitted")}},(0,s.jsx)("div",{css:Ue},(0,s.jsx)("label",{css:j,htmlFor:"category"},"Category"),(0,s.jsx)("select",{name:"category",id:"category",onChange:e=>p(z(R({},m),{categoryId:Number(e.target.value)})),value:m.categoryId},(0,s.jsx)("option",{value:"0"},"Please select"),(0,s.jsx)("option",{value:"1"},"Personal abuse"),(0,s.jsx)("option",{value:"2"},"Off topic"),(0,s.jsx)("option",{value:"3"},"Legal issue"),(0,s.jsx)("option",{value:"4"},"Trolling"),(0,s.jsx)("option",{value:"5"},"Hate speech"),(0,s.jsx)("option",{value:"6"},"Offensive/Threatening language"),(0,s.jsx)("option",{value:"7"},"Copyright"),(0,s.jsx)("option",{value:"8"},"Spam"),(0,s.jsx)("option",{value:"9"},"Other")),x.categoryId&&(0,s.jsx)("span",{css:Le},x.categoryId)),(0,s.jsx)("div",{css:Ue},(0,s.jsx)("label",{css:j,htmlFor:"reason"},"Reason (optional)"),(0,s.jsx)("textarea",{name:"reason",id:"reason",onChange:e=>p(z(R({},m),{reason:e.target.value})),value:m.reason}),x.reason&&(0,s.jsx)("span",{css:Le},x.reason)),(0,s.jsx)("div",{css:Ue},(0,s.jsx)("label",{css:j,htmlFor:"email"},"Email (optional)"),(0,s.jsx)("input",{type:"email",name:"email",id:"email",onChange:e=>p(z(R({},m),{email:e.target.value})),value:m.email}),x.email&&(0,s.jsx)("span",{css:Le},x.email)),(0,s.jsx)("div",null,(0,s.jsx)(d.z,{type:"submit",size:"small","data-link-name":"Post report abuse"},"Report"),x.response&&(0,s.jsx)("span",{css:[Le,Fe,""]},x.response),f&&(0,s.jsx)("span",{css:Ae},f)),(0,s.jsx)("div",{css:(0,s.css)("position:absolute;right:",a.D[3],"px;top:",a.D[3],"px;")},(0,s.jsx)(d.z,{"custom-guardian":"close-modal",size:"small",iconSide:"right",icon:(0,s.jsx)(y.D,null),onClick:n,"data-link-name":"cancel-report-abuse",hideLabel:!0},"close report abuse modal"))))},Ne={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},Me=e=>{const t=new Date(e);return(e=>{const t=Math.round((new Date).getTime()/1e3)-86400;return e.getTime()>=new Date(1e3*t).getTime()})(t)?(0,O.S)(t.getTime(),{verbose:!0,daysUntilAbsolute:1}):"".concat(t.getDate()," ").concat(Ne[t.getMonth()]," ").concat(t.getFullYear()," ").concat(t.getHours(),".").concat(String(t.getMinutes()).padStart(2,"0"))},$e=(0,s.css)("color:",o.n$[46],";text-decoration:none;:hover,:focus{text-decoration:underline;}"),_e=(0,s.css)(i.OS.xxsmall({fontWeight:"light"})," min-width:0.75rem;margin-right:0.3125rem;white-space:nowrap;"),He=e=>{let{isoDateTime:t,webUrl:n,commentId:o,onPermalinkClick:i}=e;const[a,l]=(0,r.useState)(Me(t));return((e,t)=>{const n=(0,r.useRef)();(0,r.useEffect)((()=>{n.current=e}),[e]),(0,r.useEffect)((()=>{{let e=setInterval((function(){(0,n.current)()}),t);return()=>clearInterval(e)}}),[t])})((()=>{l(Me(t))}),15e3),(0,s.jsx)("a",{href:n,css:$e,"data-link-name":"jump-to-comment-timestamp",onClick:e=>{i(o),e.preventDefault()},rel:"nofollow"},(0,s.jsx)("time",{dateTime:t.toString(),css:_e},a))},qe=e=>(0,s.css)("border-radius:",e+10,"px;width:",e,"px;height:",e,"px;"),Ve=e=>{let{imageUrl:t="https://avatar.guim.co.uk/no-user-image.gif",displayName:n,size:r}=e;switch(r){case"small":return(0,s.jsx)("img",{src:t,alt:n,css:qe(36)});case"large":return(0,s.jsx)("img",{src:t,alt:n,css:qe(60)});default:return(0,s.jsx)("img",{src:t,alt:n,css:qe(48)})}};var We={name:"1fttcpj",styles:"display:flex;flex-direction:column"};const Ke=e=>{let{children:t}=e;return(0,s.jsx)("div",{css:We},t)},Ye=e=>{const t="componentType=identityauthentication&componentId=".concat(e);return"componentEventParams=".concat(encodeURIComponent(t))},Je=e=>(0,s.css)("margin-top:-2px;a{",i.OS.small({fontWeight:"bold"})," margin-right:",a.D[2],"px;color:",V[q(e)][400],";:hover{text-decoration:none;text-decoration-color:none;span{color:",V[q(e)][400],";text-decoration:underline;text-decoration-color:",V[q(e)][400],";}}}"),Ge={name:"1eoy87d",styles:"display:flex;justify-content:space-between"},Qe=(0,s.css)("display:block;clear:left;",i.OS.small()," margin-top:",a.K[2],";margin-bottom:",a.K[3],";word-break:break-word;p{margin-top:0;margin-bottom:",a.D[3],"px;}blockquote{margin-top:",a.D[3],"px;margin-bottom:",a.D[3],"px;margin-left:",a.D[5],"px;margin-right:",a.D[5],"px;padding-left:",a.D[2],"px;color:",o.n$[46],";}i{font-style:italic;}b{font-weight:bold;}code{font-family:monospace;font-size:1em;}"),Ze=(0,s.css)("color:",o.n$[46],";",i.OS.xxsmall(),";"),Xe=(0,s.css)("a{color:",o.UQ[500],";text-decoration:none;:hover{text-decoration:underline;}}"),et=(0,s.css)("border-top:1px solid ",l.Cg.secondary,";display:flex;padding:",a.D[2],"px 0;"),tt=(0,s.css)("background-color:",o.n$[97],";margin-left:-",a.D[2],"px;padding-left:",a.D[2],"px;margin-right:-",a.D[2],"px;padding-right:",a.D[2],"px;"),nt=(0,s.css)("margin-right:",a.D[2],"px;",c.C4.mobileLandscape,"{display:none;}"),st=e=>(0,s.css)("a{color:",V[q(e)][400],";text-decoration-color:",V[q(e)][400],";:hover{color:",V[q(e)][400],";text-decoration-color:",V[q(e)][400],";}}"),rt=(0,s.css)("a{",i.OS.small({fontWeight:"bold"}),";}"),ot=(0,s.css)("a{",i.OS.small(),";}"),it=(0,s.css)("svg{fill:",o.n$[46],"!important;}"),at={name:"yr9n6z",styles:"flex-grow:1;width:100%"},lt={name:"4c6dm7",styles:"display:flex;flex-direction:row;justify-content:space-between"},ct={name:"n6f5a6",styles:"padding:2px;white-space:nowrap"},dt=(0,s.css)("margin-left:",a.D[2],"px;margin-bottom:-2px;display:flex;flex-direction:column;justify-content:center;"),ut=(0,s.css)(c.C4.mobileLandscape,"{display:none;}"),mt=(0,s.css)(c.Dp.mobileLandscape,"{display:none;}"),pt={name:"w1bd1c",styles:"margin-top:0px;margin-bottom:-6px"},gt={name:"1h52dri",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap"},xt=(0,s.css)(c.C4.mobileLandscape,"{padding-right:10px;width:calc(100% - 35px);box-sizing:border-box;}"),ht=e=>(0,s.css)("button{color:",V[q(e)][400],";background-color:transparent;height:18px;min-height:18px;border-radius:0;:hover{text-decoration:underline;text-decoration-color:",V[q(e)][400],";}}"),ft=(0,s.css)("button{color:",o.n$[46],";background-color:transparent;height:18px;min-height:18px;border-radius:0;:hover{text-decoration:underline;text-decoration-color:",o.n$[46],";}}"),bt={name:"g65o95",styles:"text-decoration:none"},yt=(0,s.css)(c.C4.mobileLandscape,"{",gt," width:100%;max-width:fit-content;}"),jt=(0,s.css)(c.C4.mobileLandscape,"{",gt," min-width:40%;flex-grow:1;}"),vt=e=>{let{amount:t}=e;return(0,s.jsx)("div",{css:(0,s.css)("width:",a.D[t],"px;")})};var wt={name:"bjn8wh",styles:"position:relative"},St={name:"hwfcu5",styles:"color:red"};const kt=e=>{let{comment:t,pillar:n,isClosedForComments:o,setCommentBeingRepliedTo:l,user:c,isReply:u,wasScrolledTo:p,isMuted:g,toggleMuteStatus:x,onPermalinkClick:h,onRecommend:f}=e;const[b,y]=(0,r.useState)(t.isHighlighted),[j,v]=(0,r.useState)(),[S,k]=(0,r.useState)(!1),C=()=>k(!S),P=t.userProfile.badge.find((e=>"Staff"===e.name)),D="blocked"!==t.status&&b,O=t.userProfile.badge.find((e=>"Contributor"===e.name));return(0,s.jsx)(r.default.Fragment,null,j&&(0,s.jsx)("span",{css:St},j),(0,s.jsx)("div",{id:"comment-".concat(t.id),"data-testid":t.id,css:[et,p&&tt,""]},(0,s.jsx)("div",{css:nt},(0,s.jsx)(Ve,{imageUrl:t.userProfile.avatar,displayName:t.userProfile.displayName,size:u?"small":"medium"})),(0,s.jsx)("div",{css:at},(0,s.jsx)("header",{css:lt},(0,s.jsx)("div",{css:xt},(0,s.jsx)(Ke,null,(0,s.jsx)("div",{css:[t.responseTo&&ut,mt,""]},(0,s.jsx)(H,null,(0,s.jsx)("div",{css:(0,s.css)("margin-right:",a.D[2],"px;")},(0,s.jsx)(Ve,{imageUrl:t.userProfile.avatar,displayName:"",size:"small"})),(0,s.jsx)(Ke,null,(0,s.jsx)("div",{css:[st(n),rt,pt,""]},(0,s.jsx)(m.r,{href:t.userProfile.webUrl,cssOverrides:bt,rel:"nofollow"},t.userProfile.displayName)),(0,s.jsx)(He,{isoDateTime:t.isoDateTime,webUrl:t.webUrl,commentId:t.id,onPermalinkClick:h})))),(0,s.jsx)("div",{css:[!t.responseTo&&ut,""]},(0,s.jsx)(H,null,(0,s.jsx)("div",{css:[st(n),rt,yt,""]},(0,s.jsx)(m.r,{href:t.userProfile.webUrl,cssOverrides:bt,rel:"nofollow"},t.userProfile.displayName)),t.responseTo?(0,s.jsx)("div",{css:[st(n),ot,it,jt,""]},(0,s.jsx)(m.r,{href:"#comment-".concat(t.responseTo.commentId),cssOverrides:bt,icon:(0,s.jsx)(w,null),iconSide:"left",rel:"nofollow"},t.responseTo.displayName)):(0,s.jsx)(r.default.Fragment,null),(0,s.jsx)("div",{css:[dt,t.responseTo&&ut,""]},(0,s.jsx)(He,{isoDateTime:t.isoDateTime,webUrl:t.webUrl,commentId:t.id,onPermalinkClick:h}))),(0,s.jsx)(H,null,P&&(0,s.jsx)("div",{css:ct},(0,s.jsx)(Pe,null)),O&&!P&&(0,s.jsx)("div",{css:ct},(0,s.jsx)(De,null)),D&&(0,s.jsx)("div",{css:ct},(0,s.jsx)(Oe,null)))))),"blocked"!==t.status&&(0,s.jsx)(Te,{commentId:t.id,initialCount:t.numRecommends,alreadyRecommended:!1,isSignedIn:!!c,onRecommend:f,userMadeComment:!!c&&c.userId===t.userProfile.userId})),(0,s.jsx)("div",{css:[t.responseTo&&ut,mt,""]},(0,s.jsx)(H,null,P&&(0,s.jsx)("div",{css:ct},(0,s.jsx)(Pe,null)),O&&!P&&(0,s.jsx)("div",{css:ct},(0,s.jsx)(De,null)),D&&(0,s.jsx)("div",{css:ct},(0,s.jsx)(Oe,null)))),g&&(0,s.jsx)("p",{css:Ze},(0,s.jsx)(H,null,(0,s.jsx)(r.default.Fragment,null,"All posts from this user have been muted on this device."),(0,s.jsx)(vt,{amount:1}),(0,s.jsx)("div",{css:[ft,(0,s.css)("button{",i.OS.xxsmall({fontWeight:"bold"}),";}"),""]},(0,s.jsx)(d.z,{priority:"subdued",size:"xsmall",onClick:()=>x(t.userProfile.userId),"data-link-name":"unmute-user"},"Unmute?")))),!g&&"blocked"===t.status&&(0,s.jsx)("p",{css:[Ze,Xe,""],dangerouslySetInnerHTML:{__html:t.body}}),!g&&"blocked"!==t.status&&(0,s.jsx)(r.default.Fragment,null,(0,s.jsx)("div",{css:[Qe,Xe,""],dangerouslySetInnerHTML:{__html:t.body}}),(0,s.jsx)("div",{css:Ge},(0,s.jsx)(H,null,!o&&(0,s.jsx)(r.default.Fragment,null,c?(0,s.jsx)("div",{css:[it,ht(n),(0,s.css)("button{",i.OS.small({fontWeight:"bold"}),";}"),""]},(0,s.jsx)(d.z,{priority:"subdued",onClick:()=>l(t),icon:(0,s.jsx)(w,null),iconSide:"left","data-link-name":"reply to comment"},"Reply")):(0,s.jsx)("div",{css:[it,Je(n),""]},(0,s.jsx)(m.r,{href:"https://profile.theguardian.com/signin?returnUrl=".concat(t.webUrl,"&").concat(Ye("signin_to_reply_comment")),cssOverrides:bt,icon:(0,s.jsx)(w,null),iconSide:"left",rel:"nofollow"},(0,s.jsx)("span",{"data-link-name":"reply to comment"},"Reply"))),(0,s.jsx)(vt,{amount:4})),(0,s.jsx)(vt,{amount:4}),c&&c.badge.some((e=>"Staff"===e.name))&&c.userId!==t.userProfile.userId&&(0,s.jsx)("div",{css:[ht(n),(0,s.css)("button{",i.OS.small({fontWeight:"bold"}),";}"),""]},(0,s.jsx)(d.z,{priority:"subdued",onClick:b?async()=>{v("");const e=await(e=>{const t=E([U.baseUrl,"comment",e.toString(),"unhighlight"])+A(L);return fetch(t,{method:"POST",headers:R({"Content-Type":"application/x-www-form-urlencoded"},U.headers),credentials:"include"}).then((e=>e.json())).catch((e=>console.error("Error fetching ".concat(t),e)))})(t.id);"error"===e.status?v(e.message):y(!1)}:async()=>{v("");const e=await(e=>{const t=E([U.baseUrl,"comment",e.toString(),"highlight"])+A(L);return fetch(t,{method:"POST",headers:R({"Content-Type":"application/x-www-form-urlencoded"},U.headers),credentials:"include"}).then((e=>e.json())).catch((e=>console.error("Error fetching ".concat(t),e)))})(t.id);"error"===e.status?v(e.message):y(!0)},"data-link-name":b?"unpick-comment":"pick-comment"},b?"Unpick":"Pick"))),(0,s.jsx)(H,null,c&&t.userProfile.userId!==c.userId?(0,s.jsx)("div",{css:[ft,(0,s.css)("button{",i.OS.xxsmall(),";}"),""]},(0,s.jsx)(d.z,{priority:"subdued",size:"small",onClick:()=>x(t.userProfile.userId),"data-link-name":"mute-user"},"Mute")):(0,s.jsx)(r.default.Fragment,null),(0,s.jsx)(vt,{amount:4}),(0,s.jsx)("div",{css:[ft,(0,s.css)("button{",i.OS.xxsmall(),";}"),""]},(0,s.jsx)(d.z,{priority:"subdued",size:"small",onClick:C,"data-link-name":"Open report abuse"},"Report")),S&&(0,s.jsx)("div",{css:wt},(0,s.jsx)(Be,{toggleSetShowForm:C,pillar:n,commentId:t.id}))))))))},Ct=e=>{let{amount:t}=e;return(0,s.jsx)("div",{css:(0,s.css)("width:",a.D[t],"px;")})},Pt=(0,s.css)("width:18px;svg{fill:",o.n$[46],"!important;}"),Dt=(0,s.css)(i.OS.small(),";line-height:19px;"),Ot=(0,s.css)(i.OS.small({fontWeight:"bold"}),";margin-top:0px;margin-bottom:",a.D[2],"px;"),It=o.n$[93],Rt=(0,s.css)("padding-top:",a.D[3],"px;padding-bottom:",a.D[3],"px;padding-left:",a.D[5],"px;padding-right:",a.D[5],"px;background-color:",It,";margin-top:",15,"px;margin-bottom:",20,"px;position:relative;display:flex;flex-direction:column;:before{content:'';position:absolute;border-left:",15,"px solid ",It,";border-top:",15,"px solid transparent;top:-",14,"px;margin-left:",a.D[9],"px;}"),zt=(0,s.css)("p{",i.OS.small(),";margin-top:0px;margin-bottom:",a.D[3],"px;}"),Tt=(0,s.css)("color:",l.fL.anchorPrimary,";"),Et=e=>(0,s.css)("button{color:",V[q(e)][400],";background-color:transparent;height:18px;min-height:18px;border-radius:0;:hover{text-decoration:underline;text-decoration-color:",V[q(e)][400],";}}"),Ut=(0,s.css)("button{color:",o.n$[46],";background-color:transparent;height:18px;min-height:18px;border-radius:0;:hover{text-decoration:underline;text-decoration-color:",o.n$[46],";}}"),Lt=e=>{let{pillar:t,commentBeingRepliedTo:n}=e;const[o,a]=(0,r.useState)(!1);return(0,s.jsx)(r.default.Fragment,null,(0,s.jsx)(H,null,(0,s.jsx)("div",{css:Pt},(0,s.jsx)(w,null)),(0,s.jsx)(Ct,{amount:1}),(0,s.jsx)("div",{css:Dt},n.userProfile.displayName),(0,s.jsx)(Ct,{amount:3}),(0,s.jsx)("div",{css:[Et(t),(0,s.css)("button{",i.OS.small({fontWeight:"bold"}),";}"),""]},(0,s.jsx)(d.z,{priority:"subdued",onClick:()=>a(!o),"data-link-name":o?"reply-comment-hide":"reply-comment-show"},o?"Hide Comment":"Show comment"))),o&&(0,s.jsx)(At,{commentBeingRepliedTo:n,setDisplayReplyComment:a,displayReplyComment:o}))},At=e=>{let{commentBeingRepliedTo:t,setDisplayReplyComment:n,displayReplyComment:r}=e;return(0,s.jsx)("div",{css:Rt},(0,s.jsx)("p",{css:Ot},t.userProfile.displayName," @"," ",t.date," said:"),(0,s.jsx)("div",{css:zt,dangerouslySetInnerHTML:{__html:t.body||""}}),(0,s.jsx)("div",{css:[Ut,(0,s.css)("button{",i.OS.small(),";}"),""]},(0,s.jsx)(d.z,{priority:"subdued",onClick:()=>n(!r),"data-link-name":"hide-comment"},(0,s.jsx)("span",{css:Tt},"Hide Comment"))))},Ft=(0,s.css)("list-style-type:none;padding-left:",a.D[2],"px;margin-left:",a.D[12],"px;"),Bt=(0,s.css)("border-top:1px solid ",l.Cg.secondary,";"),Nt={name:"1nr1hck",styles:"list-style-type:none;padding-left:0"},Mt=(0,s.css)("background-color:",o.n$[97],";margin-left:-",a.D[2],"px;padding-left:",a.D[2],"px;margin-right:-",a.D[2],"px;padding-right:",a.D[2],"px;"),$t={name:"cfjpzu",styles:"margin:0px"},_t=e=>{let{comment:t,pillar:n,isClosedForComments:o,user:i,shortUrl:l,threads:c,commentBeingRepliedTo:d,setCommentBeingRepliedTo:u,commentToScrollTo:m,mutes:p,toggleMuteStatus:g,onPermalinkClick:x,onRecommend:h,onComment:f,onReply:b,onPreview:y}=e;const[j,v]=(0,r.useState)("expanded"===c),[w,k]=(0,r.useState)(t.responses||[]),[C,P]=(0,r.useState)(!1),D="unthreaded"!==c;(0,r.useEffect)((()=>{k(t.responses||[])}),[t]);return(0,s.jsx)("div",{css:[m===t.id&&Mt,""]},(0,s.jsx)(kt,{comment:t,pillar:n,isClosedForComments:o,setCommentBeingRepliedTo:u,user:i,isReply:!1,isMuted:p.includes(t.userProfile.userId),toggleMuteStatus:g,onPermalinkClick:x,onRecommend:h}),(0,s.jsx)(r.default.Fragment,null,D&&w&&(0,s.jsx)("div",{css:Ft},(0,s.jsx)("ul",{css:[Nt,$t,""]},w.map((e=>(0,s.jsx)("li",{key:e.id},(0,s.jsx)(kt,{comment:e,pillar:n,isClosedForComments:o,setCommentBeingRepliedTo:u,user:i,isReply:!0,wasScrolledTo:m===e.id,isMuted:p.includes(e.userProfile.userId),toggleMuteStatus:g,onPermalinkClick:x}))))),!j&&t.metaData&&t.metaData.responseCount&&t.metaData.responseCount>3&&(0,s.jsx)("div",{css:[Bt,(0,s.css)("padding-top:",a.D[3],"px;padding-bottom:",a.D[3],"px;"),""]},(0,s.jsx)(K,{priority:"secondary",icon:(0,s.jsx)(S.G,null),iconSide:"left",linkName:"Show more replies",onClick:()=>{return e=t.id,P(!0),void(e=>{const t=E([U.baseUrl,"comment",e.toString()])+A(R({},L,{displayThreaded:!0,displayResponses:!0}));return fetch(t,{headers:R({},U.headers)}).then((e=>e.json())).catch((e=>console.error("Error fetching ".concat(t),e)))})(e).then((e=>{v(!0),k(e.comment.responses||[])})).finally((()=>{P(!1)}));var e},pillar:n,size:"xsmall"},C?"loading...":(()=>{const e=t.metaData&&t.metaData.responseCount&&t.metaData.responseCount-3;return 1===e?"Show 1 more reply":"Show ".concat(e," more replies")})()))),d&&(d.id===t.id||w.find((e=>e.id===d.id)))&&i&&(0,s.jsx)("div",{id:"comment-reply-form-".concat(d.id),css:Ft},(0,s.jsx)(Lt,{pillar:n,commentBeingRepliedTo:d}),(0,s.jsx)(ye,{shortUrl:l,pillar:n,onAddComment:e=>k([...w,e]),user:i,setCommentBeingRepliedTo:u,commentBeingRepliedTo:d,onComment:f,onReply:b,onPreview:y}))))},Ht=(0,s.css)("display:flex;flex-direction:column;width:100%;min-width:250px;margin-bottom:",a.D[5],"px;",i.OS.small(),";blockquote{margin-top:",a.D[3],"px;margin-bottom:",a.D[3],"px;margin-left:",a.D[5],"px;margin-right:",a.D[5],"px;padding-left:",a.D[2],"px;color:",o.n$[46],";}"),qt=o.n$[93],Vt=e=>(0,s.css)("margin-top:3px;margin-bottom:-6px;font-weight:bold;color:",V[q(e)][400],";"),Wt=(0,s.css)("margin-right:",a.D[2],"px;"),Kt=(0,s.css)("a{",i.OS.small(),";}"),Yt={name:"icokh",styles:"text-decoration:none;:hover{text-decoration:underline;}"},Jt=(0,s.css)("a{color:",o.UQ[500],";text-decoration:none;:hover{text-decoration:underline;}}"),Gt=(0,s.css)(i.OS.small(),";font-weight:bold;margin:0px;margin-bottom:",a.D[1],"px;"),Qt={name:"opde7s",styles:"color:inherit"},Zt={name:"1sdjnkx",styles:"word-break:break-word"},Xt=e=>{let{children:t}=e;return(0,s.jsx)("div",{css:(0,s.css)("display:flex;flex-direction:column;justify-content:space-between;padding:",a.D[3],"px;background-color:",qt,";border-radius:15px;margin-bottom:",30,"px;position:relative;",c.Dp.tablet,"{min-height:150px;}:before{content:'';margin-left:",a.D[6],"px;position:absolute;border-right:",25,"px solid transparent;border-top:",25,"px solid ",qt,";bottom:-",24,"px;}p{margin-top:0;margin-bottom:",a.D[3],"px;}")},t)},en=e=>{let{children:t}=e;return(0,s.jsx)("div",null,t)},tn=e=>{let{children:t}=e;return(0,s.jsx)("div",null,t)},nn=e=>{let{children:t}=e;return(0,s.jsx)("div",{css:(0,s.css)("display:flex;justify-content:space-between;padding-top:",a.D[1],"px;")},t)},sn=e=>{let{pillar:t,comment:n,isSignedIn:r,userMadeComment:o,onPermalinkClick:i,onRecommend:a}=e;const l=n.userProfile.badge.find((e=>"Staff"===e.name)),c=n.userProfile.badge.find((e=>"Contributor"===e.name));return(0,s.jsx)("div",{css:Ht},(0,s.jsx)(Xt,null,(0,s.jsx)(en,null,(0,s.jsx)("h3",{css:Gt},"Guardian Pick"),(0,s.jsx)("p",{css:[Zt,Jt,""],dangerouslySetInnerHTML:{__html:(d=n.body,450,d.length>450?d.substr(0,450)+"&#8230;":d)}})),(0,s.jsx)(tn,null,(0,s.jsx)("div",{css:Kt},(0,s.jsx)(m.r,{priority:"primary",href:n.webUrl,onClick:e=>{i(n.id),e.preventDefault()},rel:"nofollow"},"Jump to comment")))),(0,s.jsx)(nn,null,(0,s.jsx)(H,null,(0,s.jsx)("div",{css:Wt},(0,s.jsx)(Ve,{imageUrl:n.userProfile.avatar,displayName:"",size:"medium"})),(0,s.jsx)(Ke,null,(0,s.jsx)("span",{css:Vt(t)},(0,s.jsx)("a",{href:n.userProfile.webUrl,css:[Yt,Qt,""],rel:"nofollow"},n.userProfile.displayName)),(0,s.jsx)(He,{isoDateTime:n.isoDateTime,webUrl:n.webUrl,commentId:n.id,onPermalinkClick:i}),l&&(0,s.jsx)(Pe,null),c&&!l&&(0,s.jsx)(De,null))),(0,s.jsx)(Te,{commentId:n.id,initialCount:n.numRecommends,alreadyRecommended:!1,isSignedIn:r,userMadeComment:o,onRecommend:a})));var d},rn={name:"1vpe7s3",styles:"width:50%;display:flex;flex-direction:column"},on={name:"qzmnd2",styles:"padding-right:10px"},an={name:"vnst0l",styles:"padding-left:10px"},ln={name:"798ujy",styles:"width:100%;display:flex;flex-wrap:wrap"},cn=(0,s.css)("width:100%;display:flex;flex-direction:row;",c.C4.tablet,"{display:none;}"),dn=(0,s.css)("width:100%;",c.Dp.tablet,"{display:none;}"),un=e=>{let{pillar:t,user:n,comments:r,isSignedIn:o,onPermalinkClick:i,onRecommend:a}=e;const l=[],c=[];return r.forEach(((e,t)=>t%2==0?l.push(e):c.push(e))),(0,s.jsx)("div",{css:ln},(0,s.jsx)("div",{css:cn},(0,s.jsx)("div",{css:[rn,on,""]},l.map((e=>(0,s.jsx)(sn,{key:e.id,pillar:t,comment:e,isSignedIn:o,userMadeComment:!!n&&n.userId===e.userProfile.userId,onPermalinkClick:i,onRecommend:a})))),(0,s.jsx)("div",{css:[rn,an,""]},c.map((e=>(0,s.jsx)(sn,{key:e.id,pillar:t,comment:e,isSignedIn:o,userMadeComment:!!n&&n.userId===e.userProfile.userId,onPermalinkClick:i,onRecommend:a}))))),(0,s.jsx)("div",{css:dn},r.map((e=>(0,s.jsx)(sn,{key:e.id,pillar:t,comment:e,isSignedIn:o,userMadeComment:!!n&&n.userId===e.userProfile.userId,onPermalinkClick:i,onRecommend:a})))))},mn={name:"bjn8wh",styles:"position:relative"},pn=(0,s.css)("z-index:2;list-style:none;border:1px solid ",l.Cg.secondary,";margin-left:-8px;padding:0px;display:none;background-color:",l.Oq.primary,";position:absolute;",c.C4.tablet,"{margin-top:4px;border-radius:0;overflow:auto;}",c.Dp.tablet,"{margin-top:12px;border-radius:3px;}"),gn={name:"4zleql",styles:"display:block"},xn={name:"1i9vogi",styles:"margin-top:0"},hn=e=>(0,s.css)("font-weight:bold;:after{content:'';border:2px solid ",V[q(e)][400],";border-top:0px;border-right:0px;position:absolute;top:12px;right:12px;width:8px;height:4px;transform:rotate(-45deg);}"),fn=(0,s.css)(i.OS.small({fontWeight:"medium"}),";display:block;cursor:pointer;background:none;border:none;line-height:1.2;color:",o.n$[46],";transition:color 80ms ease-out;padding:0px 10px 6px 0px;margin:1px 0 0;text-decoration:none;:hover{:after{transform:translateY(0) rotate(45deg);}}:after{content:'';display:inline-block;width:5px;height:5px;transform:translateY(-2px) rotate(45deg);border:1px solid currentColor;border-left:transparent;border-top:transparent;margin-left:5px;vertical-align:middle;transition:transform 250ms ease-out;}"),bn={name:"1baa2f8",styles:":hover:after{transform:translateY(-1px) rotate(-135deg);}:after{transform:translateY(1px) rotate(-135deg);}"},yn=(0,s.css)(i.OS.small({fontWeight:"bold"}),";color:",o.n$[46],";"),jn=e=>{let{id:t,label:n,options:a,pillar:l,onSelect:c}=e;const[d,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=e=>{d&&"Escape"===e.code&&u(!1)};return document.addEventListener("keydown",e,!1),()=>document.removeEventListener("keydown",e)}),[d]),(0,r.useEffect)((()=>{const e=e=>{d&&(e.stopPropagation(),u(!1))};return document.addEventListener("click",e,!1),()=>document.removeEventListener("click",e)}),[d]);const m="dropbox-id-".concat(t),p=a.find((e=>e.isActive));return(0,s.jsx)("div",{css:mn},(0,s.jsx)("div",{css:yn},n,(0,s.jsx)("button",{onClick:()=>u(!d),css:[fn,d&&bn,""],"aria-controls":m,"aria-expanded":d?"true":"false"},p?p.title:"Please select")),(0,s.jsx)("ul",{id:m,css:[pn,d&&gn,""]},a.map(((e,t)=>{return(0,s.jsx)("li",{key:e.title},(0,s.jsx)("button",{onClick:()=>c(e.value),css:[(n=!!e.disabled,(0,s.css)(i.OS.small(),";text-align:left;color:",n?o.n$[86]:o.n$[46],";position:relative;text-decoration:none;margin-top:1px;padding-top:8px;padding-right:30px;padding-bottom:8px;padding-left:8px;width:100%;cursor:",n?"default":"pointer",";background-color:white;border:none;",!n&&"\n    :hover {\n      background-color: ".concat(o.n$[93],";\n      text-decoration: underline;\n    }\n\n    :focus {\n      text-decoration: underline;\n    }\n  "),";")),e.isActive&&hn(l),0===t&&xn,""],disabled:e.isActive||e.disabled},e.title));var n}))))},vn=(0,s.css)("padding-top:",a.D[1],"px;padding-bottom:",a.D[2],"px;border-top:1px solid ",l.Cg.secondary,";display:flex;flex-direction:row;"),wn=(0,s.css)("position:relative;margin-left:",a.D[2],"px;:after{content:'';display:block;width:1px;background-color:",l.Cg.secondary,";position:absolute;top:-",a.D[1],"px;bottom:",a.D[1],"px;left:-",a.D[2],"px;}"),Sn=(0,s.css)("padding-right:",a.D[3],"px;"),kn=e=>{let{filters:t,pillar:n,onFilterChange:r,totalPages:o,commentCount:i}=e;return(0,s.jsx)("div",{id:"comment-filters",css:vn},(0,s.jsx)("div",{css:Sn},(0,s.jsx)(jn,{id:"order-by-dropdown",label:"Sort by",pillar:n,options:[{title:"Newest",value:"newest",isActive:"newest"===t.orderBy},{title:"Oldest",value:"oldest",isActive:"oldest"===t.orderBy},{title:"Recommendations",value:"recommendations",isActive:"recommendations"===t.orderBy}],onSelect:e=>r(z(R({},t),{orderBy:e}))})),(0,s.jsx)("div",{css:wn}),(0,s.jsx)("div",{css:Sn},(0,s.jsx)(jn,{id:"page-size-dropdown",label:"Per page",pillar:n,options:[{title:"25",value:"25",disabled:i<=25,isActive:25===t.pageSize},{title:"50",value:"50",disabled:i<=50,isActive:50===t.pageSize},{title:"100",value:"100",disabled:i<=100,isActive:100===t.pageSize}],onSelect:e=>r(z(R({},t),{pageSize:parseInt(e)}))})),(0,s.jsx)("div",{css:wn}),(0,s.jsx)("div",{css:Sn},(0,s.jsx)(jn,{id:"threads-dropdown",label:"Display threads",pillar:n,options:[{title:"Collapsed",value:"collapsed",isActive:"collapsed"===t.threads},{title:"Expanded",value:"expanded",isActive:"expanded"===t.threads},{title:"Unthreaded",value:"unthreaded",isActive:"unthreaded"===t.threads}],onSelect:e=>r(z(R({},t),{threads:e}))})))},Cn=e=>(0,s.css)("cursor:pointer;",i.OS.small({fontWeight:"bold"})," text-decoration:none;border-radius:62.5rem;box-sizing:border-box;color:",e?o.n$[100]:o.n$[46],";background-color:",e?o.n$[46]:"transparent",";border:none;:hover{border-width:0.0625rem;border-style:solid;border-color:",o.n$[46],";}margin-right:5px;padding:0 0.125rem;min-width:1.5rem;text-align:center;height:1.5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"),Pn=e=>{let{isSelected:t}=e;return(0,s.css)("margin-right:",a.D[1],"px;border-radius:62.5rem;border-width:1px;border-style:solid;border-color:",o.n$[86],";background-color:",t?o.n$[46]:o.n$[100],";height:22px;min-height:22px;width:22px;>button{height:22px;min-height:22px;width:22px;}:hover{border-color:",o.n$[60],";}& svg{fill:",o.n$[46],"!important;width:22px;height:22px;}")},Dn={name:"a7i01j",styles:"& svg{margin-left:2px;}"},On={name:"q66sc6",styles:"line-height:26px;margin-right:5px"},In=(0,s.css)(i.OS.small(),";color:",o.n$[46],";display:flex;flex-direction:row;justify-content:space-between;width:100%;padding-top:",a.D[2],"px;padding-bottom:",a.D[2],"px;border-top:1px solid ",l.Cg.secondary,";",c.C4.mobileLandscape,"{flex-direction:column;}"),Rn={name:"kkia9m",styles:"display:flex;flex-direction:row;height:25px"},zn=(0,s.css)(i.OS.small(),";margin-left:5px;",c.C4.mobileLandscape,"{padding-top:10px;}"),Tn=e=>{let{currentPage:t,setCurrentPage:n}=e;return(0,s.jsx)("div",{css:[Pn({isSelected:!1}),Dn,""]},(0,s.jsx)(d.z,{onClick:()=>n(t+1),"aria-label":"Previous discussion page","data-link-name":"Pagination view page ".concat(t+1),size:"xsmall",priority:"subdued"},(0,s.jsx)(k.p,null)))},En=e=>{let{currentPage:t,setCurrentPage:n}=e;const r=Math.max(0,t-1);return(0,s.jsx)("div",{css:Pn({isSelected:!1})},(0,s.jsx)(d.z,{onClick:()=>n(r),"aria-label":"Previous discussion page","data-link-name":"Pagination view page ".concat(r),size:"xsmall",priority:"subdued"},(0,s.jsx)(C.S,null)))},Un=e=>{let{currentPage:t,setCurrentPage:n,isSelected:r}=e;return(0,s.jsx)("button",{key:t,css:Cn(r),onClick:()=>n(t),"data-link-name":"Pagination view page ".concat(t)},t)},Ln=e=>{let{totalPages:t,currentPage:n,setCurrentPage:r,commentCount:o,filters:i}=e;const a=t>4&&n>1,l=t>4&&n>3,c=(e=>{let{currentPage:t,totalPages:n}=e;return t<4?2:t>n-2?n-2:t-1})({currentPage:n,totalPages:t}),d=(e=>{let{currentPage:t,totalPages:n}=e;return t<4?3:t>n-2?n-1:t})({currentPage:n,totalPages:t}),u=(e=>{let{currentPage:t,totalPages:n}=e;return t<4?4:t>n-2?n:t+1})({currentPage:n,totalPages:t}),m=t>2,p=t>3,g=t>4&&n<t-1,x=t,h=t>4&&n<t-2,f=t>4&&n!==t;let{pageSize:b}=i,y=b*n,j=y-(b-1);return y>o&&(y=o),(0,s.jsx)("div",{css:In},(0,s.jsx)("div",{css:Rn},a&&(0,s.jsx)(En,{currentPage:n,setCurrentPage:r}),(0,s.jsx)(Un,{currentPage:1,setCurrentPage:r,isSelected:1===n}),l&&(0,s.jsx)("div",{css:On},"…"),(0,s.jsx)(Un,{currentPage:c,setCurrentPage:r,isSelected:n===c}),m&&(0,s.jsx)(Un,{currentPage:d,setCurrentPage:r,isSelected:n===d}),p&&(0,s.jsx)(Un,{currentPage:u,setCurrentPage:r,isSelected:n===u}),h&&(0,s.jsx)("div",{css:On},"…"),g&&(0,s.jsx)(Un,{currentPage:x,setCurrentPage:r,isSelected:n===x}),f&&(0,s.jsx)(Tn,{currentPage:n,setCurrentPage:r})),o&&(0,s.jsx)("div",{css:zn},"Displaying ".concat("unthreaded"===i.threads?"comments":"threads"," ").concat(j," to ").concat(y," of ").concat(o)))},An=o.n$[93],Fn=(0,s.keyframes)(T()),Bn=(0,s.css)("animation:",Fn," 2s infinite linear;background:linear-gradient(\n\t\tto right,\n\t\t",An," 4%,\n\t\t",o.n$[86]," 25%,\n\t\t",An," 36%\n\t);background-size:1500px 100%;"),Nn=(0,s.css)("border-bottom:1px solid ",o.n$[86],";width:620px;display:flex;padding:",a.D[2],"px 0;"),Mn=e=>{let{height:t,width:n,spaceBelow:r,spaceLeft:o}=e;return(0,s.jsx)("div",{css:(0,s.css)("height:",t,"px;width:",n?"".concat(n,"px"):"100%",";margin-bottom:",r&&a.D[r],"px;margin-left:",o&&a.D[o],"px;background-color:",An,";",Bn,";")})},$n=()=>(0,s.jsx)("div",{css:Nn,"data-testid":"loading-comments"},(0,s.jsx)("div",{css:(48,(0,s.css)("border-radius:",58,"px;width:",48,"px;height:",48,"px;background-color:",An,";margin-right:",a.D[2],"px;",Bn,";"))}),(0,s.jsx)(Ke,null,(0,s.jsx)(H,null,(0,s.jsx)(Mn,{height:20,width:140,spaceBelow:9}),(0,s.jsx)(Mn,{height:15,width:100,spaceBelow:9,spaceLeft:2})),(0,s.jsx)(Mn,{height:20,spaceBelow:1}),(0,s.jsx)(Mn,{height:20,spaceBelow:1}),(0,s.jsx)(Mn,{height:20,width:200,spaceBelow:5}),(0,s.jsx)(H,null,(0,s.jsx)(Mn,{height:15,width:40}),(0,s.jsx)(Mn,{height:15,width:40,spaceLeft:6})))),_n={name:"skgbeu",styles:"display:flex;justify-content:flex-end"},Hn={name:"x3a67h",styles:"display:flex;flex-direction:column;max-width:100%"},qn={name:"fexp4f",styles:"display:flex;flex-direction:column;list-style-type:none;padding-left:0;margin:0"},Vn={name:"1f3egm3",styles:"display:flex;flex-wrap:wrap;justify-content:space-between"},Wn={orderBy:"newest",pageSize:100,threads:"collapsed"},Kn=()=>(0,s.jsx)("div",{css:(0,s.css)("color:",o.n$[46],";",i.OS.small()," padding-top:",a.D[5],"px;padding-left:",a.D[1],"px;padding-bottom:",a.D[9],"px;")},"No comments found"),Yn=e=>{let{baseUrl:t,shortUrl:n,pillar:o,isClosedForComments:i,initialPage:a,commentToScrollTo:l,pageSizeOverride:c,orderByOverride:d,user:u,additionalHeaders:m,expanded:p,onPermalinkClick:g,apiKey:x,onRecommend:h,onComment:f,onReply:b,onPreview:y,onExpand:j,idApiUrl:v}=e;const[w,S]=(0,r.useState)((e=>{let{pageSizeOverride:t,orderByOverride:n,permalinkBeingUsed:s,isClosedForComments:r}=e;const o=(e=>{let t,n,s,{isClosedForComments:r}=e;try{s=localStorage.getItem("gu.prefs.discussion.order"),t=localStorage.getItem("gu.prefs.discussion.threading"),n=localStorage.getItem("gu.prefs.discussion.pagesize")}catch(e){return z(R({},Wn),{orderBy:o()})}function o(e){return r?"oldest":"newest"}return{orderBy:s?JSON.parse(s).value:o(),threads:t?JSON.parse(t).value:Wn.threads,pageSize:n?(i=JSON.parse(n).value,i?"All"===i?Wn.pageSize:[25,50,100].includes(i)?i:Wn.pageSize:Wn.pageSize):Wn.pageSize};var i})({isClosedForComments:r});return z(R({},o),{pageSize:t||o.pageSize,orderBy:n||o.orderBy,threads:"collapsed"===o.threads&&s?"expanded":o.threads})})({pageSizeOverride:c,orderByOverride:d,permalinkBeingUsed:!!l,isClosedForComments:i})),[k,C]=(0,r.useState)(p||"#comments"===window.location.hash),[P,D]=(0,r.useState)(!0),[O,I]=(0,r.useState)(!1),[T,B]=(0,r.useState)(0),[N,M]=(0,r.useState)(a||1),[$,_]=(0,r.useState)([]),[H,q]=(0,r.useState)(),[V,W]=(0,r.useState)([]),[K,Y]=(0,r.useState)(10),[J,G]=(0,r.useState)(0),[Q,Z]=(0,r.useState)((()=>{let e;try{e=localStorage.getItem("gu.prefs.discussion.mutes")}catch(e){return[]}return e?JSON.parse(e).value:[]})());(0,r.useEffect)((()=>{if(k){const e=setTimeout((()=>{Y(V.length),I(!1)}),0);return()=>clearTimeout(e)}}),[k,V.length]),(0,r.useEffect)((()=>{C(p)}),[p]),(0,r.useEffect)((()=>{D(!0),F(n,z(R({},w),{page:N})).then((e=>{D(!1),I(!0),e&&"error"!==e.status&&(W(e&&e.discussion&&e.discussion.comments),G(e&&e.discussion&&e.discussion.topLevelCommentCount)),B(e&&e.pages)}))}),[w,N,n]),(0,r.useEffect)((()=>{(async()=>{const e=await(e=>{const t=E([U.baseUrl,"discussion",e,"topcomments"])+A(L);return fetch(t,{headers:R({},U.headers)}).then((e=>e.json())).then((e=>e.discussion.comments)).catch((e=>console.error("Error fetching ".concat(t),e)))})(n);_(e)})()}),[n]),(0,r.useEffect)((()=>{S((e=>z(R({},e),{orderBy:d||e.orderBy,pageSize:c||e.pageSize})))}),[c,d]),(0,r.useEffect)((()=>{a&&M(a)}),[a,l]),(0,r.useEffect)((()=>{if(l){const e=document.getElementById("comment-".concat(l));e&&e.scrollIntoView()}}),[V,l]);const X=e=>{let t=Math.floor(J/e.pageSize);J%e.pageSize&&(t+=1),N>t&&M(t),(e=>{try{localStorage.setItem("gu.prefs.discussion.threading",JSON.stringify({value:e.threads})),localStorage.setItem("gu.prefs.discussion.pagesize",JSON.stringify({value:e.pageSize})),localStorage.setItem("gu.prefs.discussion.order",JSON.stringify({value:e.orderBy}))}catch(e){}})(e),C(!0),null==j||j(),S(e)},ee=e=>{C(!0);const t=document.getElementById("comment-filters");t&&t.scrollIntoView(),M(e)},te=e=>{let t;t=Q.includes(e)?Q.filter((t=>t!==e)):[...Q,e],Z(t),(e=>{try{localStorage.setItem("gu.prefs.discussion.mutes",JSON.stringify({value:e}))}catch(e){}})(t)},ne=e=>{V.pop(),W([e,...V]),k||(C(!0),"function"==typeof j&&j());const t=document.getElementById("comment-".concat(e.id));t&&t.scrollIntoView()};(e=>{let{baseUrl:t,additionalHeaders:n,apiKey:s,idApiUrl:r}=e;U.baseUrl=t||U.baseUrl,U.headers=n||U.headers,U.apiKey=s||U.apiKey,U.idApiUrl=r||U.idApiUrl,L["api-key"]=U.apiKey})({additionalHeaders:m,baseUrl:t,apiKey:x,idApiUrl:v});const se=T>1;return!k&&P?(0,s.jsx)("span",{"data-testid":"loading-comments"}):k?(0,s.jsx)("div",{"data-component":"discussion",css:Hn},u&&!i&&(0,s.jsx)(ye,{pillar:o,shortUrl:n,onAddComment:ne,user:u,onComment:f,onReply:b,onPreview:y}),!!$.length&&(0,s.jsx)(un,{pillar:o,comments:$,isSignedIn:!!u,onPermalinkClick:g,onRecommend:h}),(0,s.jsx)(kn,{pillar:o,filters:w,onFilterChange:X,totalPages:T,commentCount:J}),se&&(0,s.jsx)(Ln,{totalPages:T,currentPage:N,setCurrentPage:e=>{ee(e)},commentCount:J,filters:w}),P?(0,s.jsx)($n,null):V.length?(0,s.jsx)("ul",{css:qn},V.slice(0,K).map((e=>(0,s.jsx)("li",{key:e.id},(0,s.jsx)(_t,{comment:e,pillar:o,isClosedForComments:i,shortUrl:n,user:u,threads:w.threads,commentBeingRepliedTo:H,setCommentBeingRepliedTo:q,commentToScrollTo:l,mutes:Q,toggleMuteStatus:te,onPermalinkClick:g,onRecommend:h,onReply:b}))))):(0,s.jsx)(Kn,null),O&&(0,s.jsx)($n,null),se&&(0,s.jsx)("footer",{css:_n},(0,s.jsx)(Ln,{totalPages:T,currentPage:N,setCurrentPage:e=>{ee(e)},commentCount:J,filters:w})),u&&!i&&V.length>10&&(0,s.jsx)(ye,{pillar:o,shortUrl:n,onAddComment:ne,user:u,onComment:f,onReply:b,onPreview:y})):(0,s.jsx)("div",{css:qn,"data-component":"discussion"},$&&$.length?(0,s.jsx)("div",{css:Vn},!!$.length&&(0,s.jsx)(un,{pillar:o,comments:$.slice(0,2),isSignedIn:!!u,onPermalinkClick:g,onRecommend:h})):(0,s.jsx)(r.default.Fragment,null,(0,s.jsx)(kn,{pillar:o,filters:w,onFilterChange:X,totalPages:T,commentCount:J}),se&&(0,s.jsx)(Ln,{totalPages:T,currentPage:N,setCurrentPage:e=>{ee(e)},commentCount:J,filters:w}),V.length?(0,s.jsx)("ul",{css:qn},V.slice(0,2).map((e=>(0,s.jsx)("li",{key:e.id},(0,s.jsx)(_t,{comment:e,pillar:o,isClosedForComments:i,shortUrl:n,user:u,threads:w.threads,commentBeingRepliedTo:H,setCommentBeingRepliedTo:q,mutes:Q,toggleMuteStatus:te,onPermalinkClick:g,onRecommend:h}))))):(0,s.jsx)(Kn,null)))}},5726:(e,t,n)=>{n.d(t,{p:()=>r});const s=/\b\/{2,}/g,r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("/").replace(s,"/")}},498:(e,t,n)=>{n.d(t,{o:()=>L});var s=n(7800),r=n(3220),o=n(43),i=n(4516),a=n(1919),l=n(5575),c=n(5364),d=n(7357),u=n(683);function m(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(){const e=m(["\n\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t\tborder: 1px solid ",";\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return p=function(){return e},e}function g(){const e=m(["\n\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t\tborder: 1px solid ",";\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return g=function(){return e},e}function x(){const e=m(["\n\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t\tborder: 1px solid ",";\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return x=function(){return e},e}function h(){const e=m(["\n\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t\tborder: 1px solid ",";\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return h=function(){return e},e}function f(){const e=m(["\n\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t\tborder: 1px solid ",";\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return f=function(){return e},e}function b(){const e=m(["\n\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t\tborder: 1px solid ",";\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return b=function(){return e},e}function y(){const e=m(["\n\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ",";\n\t\t\t\t\t\t\tborder: 1px solid ",";\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return y=function(){return e},e}function j(){const e=m(["\n\t\t\t\tbackground-color: transparent;\n\t\t\t"]);return j=function(){return e},e}function v(){const e=m(["\n\t\t\t\tborder: 1px solid currentColor;\n\t\t\t"]);return v=function(){return e},e}function w(){const e=m(["\n\t\t\t\tborder: none;\n\t\t\t"]);return w=function(){return e},e}function S(){const e=m(["\n\t\t\t\tcolor: ",";\n\t\t\t"]);return S=function(){return e},e}function k(){const e=m(["\n\t\t\t\t\t\tcolor: ",";\n\t\t\t\t\t"]);return k=function(){return e},e}function C(){const e=m(["\n\t\t\t\t\t\tcolor: ",";\n\t\t\t\t\t"]);return C=function(){return e},e}function P(){const e=m(["\n\t\t\t\t\t\tcolor: ",";\n\t\t\t\t\t"]);return P=function(){return e},e}function D(){const e=m(["\n\t\t\t\t\t\tcolor: ",";\n\t\t\t\t\t"]);return D=function(){return e},e}function O(){const e=m(["\n\t\t\t\t\t\tcolor: ",";\n\t\t\t\t\t"]);return O=function(){return e},e}function I(){const e=m(["\n\t\t\t\t\t\tcolor: ",";\n\t\t\t\t\t"]);return I=function(){return e},e}function R(){const e=m(["\n\t\t\t\t\t\tcolor: ",";\n\t\t\t\t\t"]);return R=function(){return e},e}function z(){const e=m(["\n\t\t\t\t\t\tcolor: ",";\n\t\t\t\t\t"]);return z=function(){return e},e}const T={display:i.D.Standard,design:a.Y.Standard,theme:l.D.News},E=d.n$[100];function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const L=e=>{var{format:t=T,children:n,priority:i="primary"}=e,a=function(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n,s,r={},o=Object.keys(e);for(s=0;s<o.length;s++)n=o[s],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["format","children","priority"]);const m=((e,t)=>{switch(t){case"primary":case"secondary":switch(e.theme){case l.D.News:return(0,o.css)(p(),d.r[300],d.r[400],d.r[400]);case l.D.Culture:return(0,o.css)(g(),d.TG[300],d.TG[400],d.TG[400]);case l.D.Lifestyle:return(0,o.css)(x(),d.H5[300],d.H5[400],d.H5[400]);case l.D.Sport:return(0,o.css)(h(),d.Fp[300],d.Fp[400],d.Fp[400]);case l.D.Opinion:return(0,o.css)(f(),d.VK[300],d.VK[400],d.VK[400]);case c.v.Labs:return(0,o.css)(b(),d.lh[300],d.lh[400],d.lh[400]);case c.v.SpecialReport:return(0,o.css)(y(),d.qD[300],d.qD[400],d.qD[400])}case"subdued":case"tertiary":return(0,o.css)(j())}})(t,i),L=((e,t)=>{switch(t){case"primary":case"secondary":case"tertiary":return(0,o.css)(v());case"subdued":return(0,o.css)(w())}})(0,i),A=((e,t)=>{switch(t){case"primary":case"secondary":return(0,o.css)(S(),E);case"subdued":case"tertiary":switch(e.theme){case l.D.News:return(0,o.css)(k(),d.r[400]);case l.D.Culture:return(0,o.css)(C(),d.TG[400]);case l.D.Lifestyle:return(0,o.css)(P(),d.H5[400]);case l.D.Sport:return(0,o.css)(D(),d.Fp[400]);case l.D.Opinion:return(0,o.css)(O(),d.VK[400]);case c.v.Labs:return(0,o.css)(I(),d.lh[400]);case c.v.SpecialReport:return(0,o.css)(R(),d.qD[400]);case c.v.SpecialReportAlt:return(0,o.css)(z(),u.DG.specialReportAlt[200])}}})(t,i);return(0,s.jsx)(r.z,(F=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){U(e,t,n[t])}))}return e}({priority:i,cssOverrides:[m,L,A]},a),B=null!=(B={children:n})?B:{},Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(B)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n.push.apply(n,s)}return n}(Object(B)).forEach((function(e){Object.defineProperty(F,e,Object.getOwnPropertyDescriptor(B,e))})),F));var F,B}},7555:(e,t,n)=>{n.d(t,{D:()=>c});var s=n(7800),r=n(43),o=n(4655),i=n(1083);function a(){const e=(t=["\n\t\t\t\t\t","\n\t\t\t\t"],n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}})));var t,n;return a=function(){return e},e}const l=e=>{let{size:t}=e;return(0,s.jsx)("svg",{width:t?o.EA[t]:void 0,height:void 0,viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg",focusable:!1,"aria-hidden":!0,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.015 14.042 20.707 22 22 20.709 14.06 12 22 3.291 20.707 2l-8.692 7.958L3.293 2.03 2 3.321 9.97 12 2 20.679l1.293 1.291 8.722-7.928Z"})})},c=e=>{let{size:t,isAnnouncedByScreenReader:n=!1}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{size:t}),n?(0,s.jsx)("span",{css:(0,r.css)(a(),i.j),children:"Close"}):""]})}},5158:(e,t,n)=>{n.d(t,{G:()=>c});var s=n(7800),r=n(43),o=n(4655),i=n(1083);function a(){const e=(t=["\n\t\t\t\t\t","\n\t\t\t\t"],n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}})));var t,n;return a=function(){return e},e}const l=e=>{let{size:t}=e;return(0,s.jsx)("svg",{width:t?o.EA[t]:void 0,height:void 0,viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg",focusable:!1,"aria-hidden":!0,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m10.8 13.2.425 9.8h1.525l.45-9.8 9.8-.45v-1.525l-9.8-.425-.45-9.8h-1.525l-.425 9.8-9.8.425v1.525l9.8.45Z"})})},c=e=>{let{size:t,isAnnouncedByScreenReader:n=!1}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{size:t}),n?(0,s.jsx)("span",{css:(0,r.css)(a(),i.j),children:"Plus sign"}):""]})}}}]);
//# sourceMappingURL=516.modern.c3be4f48517ec05be08b.js.map