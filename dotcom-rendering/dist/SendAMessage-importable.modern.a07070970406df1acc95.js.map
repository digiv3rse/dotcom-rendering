{"version":3,"file":"SendAMessage-importable.modern.a07070970406df1acc95.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/components/Callout/FormField.tsx","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/vendor/icons/SvgMessageRound.js","webpack://@guardian/dotcom-rendering/./src/web/components/SendAMessage.importable.tsx","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/vendor/icons/SvgChevronUpSingle.js"],"sourcesContent":["import {\n\tCheckbox,\n\tCheckboxGroup,\n\tOption,\n\tRadio,\n\tRadioGroup,\n\tSelect,\n\tTextArea,\n\tTextInput,\n} from '@guardian/source-react-components';\nimport { FileInput } from '@guardian/source-react-components-development-kitchen';\nimport { useEffect, useRef } from 'react';\nimport type {\n\tCampaignFieldType,\n\tMessageUsFieldType,\n} from '../../../types/content';\n\ntype FormDataType = { [key in string]: any };\n\ntype FormFieldProp = {\n\tvalidationErrors: { [key in string]: string };\n\tformField: CampaignFieldType | MessageUsFieldType;\n\tformData: FormDataType;\n\tpageId: string;\n\tsetFieldInFormData: (\n\t\tid: string,\n\t\tdata: string | string[] | undefined,\n\t) => void;\n};\n\nexport const FormField = ({\n\tformField,\n\tformData,\n\tsetFieldInFormData,\n\tpageId,\n\tvalidationErrors,\n}: FormFieldProp) => {\n\tconst { type, label, hideLabel, description, required, id } = formField;\n\n\tconst name = `field_${type}_${id}`;\n\tconst fieldValue =\n\t\tformField.id in formData ? (formData[formField.id] as string) : '';\n\tconst fieldError = validationErrors[formField.id];\n\n\tconst firstUpdate = useRef(true);\n\n\tuseEffect(() => {\n\t\tif (\n\t\t\tfirstUpdate.current &&\n\t\t\tformField.hidden &&\n\t\t\tformField.type === 'text'\n\t\t) {\n\t\t\tsetFieldInFormData(formField.id, pageId);\n\t\t\tfirstUpdate.current = false;\n\t\t}\n\t}, [formField, pageId, setFieldInFormData]);\n\n\tswitch (formField.type) {\n\t\tcase 'phone':\n\t\tcase 'email':\n\t\tcase 'text': {\n\t\t\tif (formField.hidden) return null;\n\t\t\treturn (\n\t\t\t\t<TextInput\n\t\t\t\t\tname={name}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\tvalue={fieldValue}\n\t\t\t\t\terror={fieldError}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t\ttype={formField.type}\n\t\t\t\t\tonChange={(e): void =>\n\t\t\t\t\t\tsetFieldInFormData(formField.id, e.target.value)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tcase 'textarea':\n\t\t\treturn (\n\t\t\t\t<TextArea\n\t\t\t\t\tname={name}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\tvalue={fieldValue}\n\t\t\t\t\terror={fieldError}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t\tonChange={(e): void =>\n\t\t\t\t\t\tsetFieldInFormData(formField.id, e.target.value)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'file':\n\t\t\treturn (\n\t\t\t\t<FileInput\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\terror={fieldError}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t\tonUpload={(file: string | undefined): void =>\n\t\t\t\t\t\tsetFieldInFormData(formField.id, file)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'select':\n\t\t\treturn (\n\t\t\t\t<Select\n\t\t\t\t\tname={name}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\tvalue={fieldValue}\n\t\t\t\t\terror={fieldError}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t\tonChange={(e): void =>\n\t\t\t\t\t\tsetFieldInFormData(formField.id, e.target.value)\n\t\t\t\t\t}\n\t\t\t\t\tchildren={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'default',\n\t\t\t\t\t\t\tlabel: 'Please choose an option',\n\t\t\t\t\t\t},\n\t\t\t\t\t]\n\t\t\t\t\t\t.concat(formField.options)\n\t\t\t\t\t\t.map(({ value, label: formLabel }) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Option key={value} value={value}>\n\t\t\t\t\t\t\t\t\t{formLabel}\n\t\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'checkbox':\n\t\t\treturn (\n\t\t\t\t<CheckboxGroup\n\t\t\t\t\tname={name}\n\t\t\t\t\tlabel={label}\n\t\t\t\t\thideLabel={hideLabel}\n\t\t\t\t\tsupporting={description}\n\t\t\t\t\toptional={!required}\n\t\t\t\t\terror={fieldError ? fieldError : undefined}\n\t\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\t>\n\t\t\t\t\t{formField.options.map((option) => {\n\t\t\t\t\t\tconst selectedCheckboxesArray: string[] =\n\t\t\t\t\t\t\tformData[formField.id] ?? [];\n\n\t\t\t\t\t\tconst isCheckboxChecked =\n\t\t\t\t\t\t\t!!selectedCheckboxesArray.find(\n\t\t\t\t\t\t\t\t(ele: string) => ele === option.value,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst filterOutCheckboxFromArray = () =>\n\t\t\t\t\t\t\tselectedCheckboxesArray.filter(\n\t\t\t\t\t\t\t\t(ele: string) => ele !== option.value,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst addCheckboxToArray = () => [\n\t\t\t\t\t\t\t...selectedCheckboxesArray,\n\t\t\t\t\t\t\toption.value,\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\tkey={option.value}\n\t\t\t\t\t\t\t\tlabel={option.label}\n\t\t\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\t\t\tchecked={isCheckboxChecked}\n\t\t\t\t\t\t\t\terror={fieldError ? true : false}\n\t\t\t\t\t\t\t\tdata-testid={`form-field-${option.value}`}\n\t\t\t\t\t\t\t\tonChange={(): void =>\n\t\t\t\t\t\t\t\t\tsetFieldInFormData(\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tisCheckboxChecked\n\t\t\t\t\t\t\t\t\t\t\t? filterOutCheckboxFromArray()\n\t\t\t\t\t\t\t\t\t\t\t: addCheckboxToArray(),\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</CheckboxGroup>\n\t\t\t);\n\t\tcase 'radio':\n\t\t\treturn (\n\t\t\t\t<RadioGroup\n\t\t\t\t\tlabel={formField.label}\n\t\t\t\t\tsupporting={formField.description}\n\t\t\t\t\terror={validationErrors[formField.id]}\n\t\t\t\t\tname={formField.name}\n\t\t\t\t\torientation={\n\t\t\t\t\t\tformField.options.length > 2 ? 'vertical' : 'horizontal'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{formField.options.map((option, index) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Radio\n\t\t\t\t\t\t\t\tdata-testid={`form-field-${option.value}`}\n\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\tlabel={option.label}\n\t\t\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\t\t\tname={`${formField.id}`}\n\t\t\t\t\t\t\t\tchecked={\n\t\t\t\t\t\t\t\t\tformField.id in formData &&\n\t\t\t\t\t\t\t\t\tformData[formField.id] === option.value\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonChange={(e): void =>\n\t\t\t\t\t\t\t\t\tsetFieldInFormData(\n\t\t\t\t\t\t\t\t\t\tformField.id,\n\t\t\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</RadioGroup>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden, iconSize } from '@guardian/source-foundations';\n\nconst Svg = ({ size }) => (jsx(\"svg\", { width: size ? iconSize[size] : undefined, height: undefined, viewBox: \"-3 -3 30 30\", xmlns: \"http://www.w3.org/2000/svg\", focusable: false, \"aria-hidden\": true, children: jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Zm3.336-14.444v1.27H7.558v-1.27h7.778Zm-2.699 2.54v1.27h-5.08v-1.27h5.08Zm3.81 2.539v1.27h-8.89v-1.27h8.89Zm-2.223 2.54v1.27H7.558v-1.27h6.666Z\" }) }));\nconst SvgMessageRound = ({ size, isAnnouncedByScreenReader = false, }) => (jsxs(Fragment, { children: [jsx(Svg, { size: size }), isAnnouncedByScreenReader ? (jsx(\"span\", { css: css `\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`, children: \"Message\" })) : ('')] }));\n\nexport { SvgMessageRound };\n//# sourceMappingURL=SvgMessageRound.js.map\n","import type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport {\n\tfocusHalo,\n\tfrom,\n\tneutral,\n\tpalette,\n\tspace,\n\tsuccess,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport {\n\tButton,\n\tSvgChevronDownSingle,\n\tSvgChevronUpSingle,\n\tSvgMessageRound,\n\tSvgTickRound,\n} from '@guardian/source-react-components';\nimport { ErrorSummary } from '@guardian/source-react-components-development-kitchen';\nimport { useState } from 'react';\nimport type { MessageUsFieldType } from '../../types/content';\nimport { decidePalette } from '../lib/decidePalette';\nimport { FormField } from './Callout/FormField';\n\nconst CALLOUT_URL =\n\t'https://callouts.code.dev-guardianapis.com/formstack-campaign/submit';\n\nconst containerStyles = (format: ArticleFormat) => css`\n\t${until.desktop} {\n\t\tbackground-color: ${decidePalette(format).background.messageForm};\n\t\tcolor: ${neutral[100]};\n\t}\n\tbackground-color: ${neutral[86]};\n\tpadding: ${space[3]}px;\n`;\nconst textStyles = css`\n\t${textSans.xsmall()};\n\tpadding-bottom: ${space[4]}px;\n`;\n\nconst successStyles = css`\n\t${textSans.xsmall()};\n\t${until.desktop} {\n\t\tcolor: ${neutral[100]};\n\t}\n`;\n\nconst tickBoxStyles = css`\n\tfill: ${success[400]};\n\twidth: ${space[12]}px;\n\tmargin-left: -${space[2]}px;\n`;\nconst errorTextStyles = css`\n\tcolor: ${palette.error[400]};\n\t${textSans.medium({ fontWeight: 'bold' })};\n\tdisplay: flex;\n\tpadding-bottom: ${space[2]}px;\n`;\n\nconst formStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n`;\n\nconst formFieldWrapperStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin-bottom: ${space[4]}px;\n\t${until.desktop} {\n\t\tlabel > div,\n\t\tlabel > div > span {\n\t\t\tcolor: ${neutral[100]};\n\t\t}\n\t}\n`;\n\nconst submitButtonStyles = css`\n\tbackground-color: ${neutral[100]};\n\tcolor: ${neutral[0]};\n\t:hover,\n\t:active {\n\t\tbackground-color: ${neutral[86]};\n\t}\n\t${until.phablet} {\n\t\twidth: 100%;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t${until.desktop} {\n\t\talign-self: flex-start;\n\t}\n\t${from.desktop} {\n\t\tcolor: ${neutral[100]};\n\t\tbackground-color: ${neutral[7]};\n\t\talign-self: center;\n\t\t:hover,\n\t\t:active {\n\t\t\tbackground-color: ${neutral[20]};\n\t\t}\n\t}\n`;\n\nconst footerPaddingStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\t${until.desktop} {\n\t\tjustify-content: flex-start;\n\t}\n\tjustify-content: space-around;\n\tpadding-bottom: ${space[4]}px;\n`;\n\nconst prefaceStyles = css`\n\t${textSans.xsmall()};\n\tcolor: ${neutral[100]};\n\tpadding-bottom: ${space[4]}px;\n\t${from.desktop} {\n\t\tcolor: ${neutral[0]};\n\t}\n`;\n\ntype FormDataType = { [key in string]: any };\n\ntype Props = {\n\tformFields: MessageUsFieldType[];\n\tformId: string;\n\tformat: ArticleFormat;\n\tpageId: string;\n};\n\ninterface FormProps extends Props {\n\tsubmissionURL: string;\n}\n\nconst Form = ({\n\tformFields,\n\tsubmissionURL,\n\tformId,\n\tformat,\n\tpageId,\n}: FormProps) => {\n\tconst [formData, setFormData] = useState<FormDataType>({});\n\tconst [validationErrors, setValidationErrors] = useState<{\n\t\t[key in string]: string;\n\t}>({});\n\n\tconst [networkError, setNetworkError] = useState('');\n\tconst [submissionSuccess, setSubmissionSuccess] = useState(false);\n\tconst [twitterHandle, setTwitterHandle] = useState('');\n\n\tconst setFieldInFormData = (\n\t\tid: string,\n\t\tdata: string | string[] | undefined,\n\t): void => {\n\t\tconst currentErrors = validationErrors;\n\t\tcurrentErrors[id] = '';\n\t\tsetValidationErrors(currentErrors);\n\n\t\tsetFormData({\n\t\t\t...formData,\n\t\t\t[id]: data,\n\t\t});\n\t};\n\n\tconst validateForm = (): boolean => {\n\t\tconst errors: { [key in string]: string } = {};\n\t\tlet isValid = true;\n\t\tformFields.forEach((field: MessageUsFieldType) => {\n\t\t\tif (field.required && !formData[field.id]) {\n\t\t\t\terrors[field.id] = 'This field is required';\n\t\t\t\tisValid = false;\n\t\t\t}\n\t\t\tif (field.type === 'email' && formData[field.id]) {\n\t\t\t\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\t\t\t\tif (!emailRegex.test(formData[field.id] as string)) {\n\t\t\t\t\terrors[field.id] = 'Please enter a valid email address';\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (\n\t\t\t\t['number', 'phone'].includes(field.type) &&\n\t\t\t\tformData[field.id]\n\t\t\t) {\n\t\t\t\tconst numberRegex = /^[\\d ()+-]+$/;\n\t\t\t\tif (!numberRegex.test(formData[field.id] as string)) {\n\t\t\t\t\terrors[field.id] = 'Please enter a valid number';\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t\tconst noWhiteSpace = formData[field.id] as string;\n\t\t\t\tif (noWhiteSpace.length < 10) {\n\t\t\t\t\terrors[field.id] = 'Please include your dialling/area code';\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t\t// We should have checks here for min length and max length - this work is ticketed here https://trello.com/c/7sYM6Zzd/822-add-validation-for-max-min-length-on-the-message-us-work\n\t\t\t}\n\t\t\treturn isValid;\n\t\t});\n\t\tsetValidationErrors(errors);\n\t\treturn Object.keys(errors).length === 0;\n\t};\n\n\tconst submitForm = async (form: FormDataType) => {\n\t\tsetNetworkError('');\n\n\t\tif (formData.twitterHandle) {\n\t\t\tsetNetworkError('Sorry we think you are a robot.');\n\t\t\treturn;\n\t\t}\n\t\t// need to add prefix `field_` to all keys in form, required by formstack\n\t\tconst formDataWithFieldPrefix = Object.keys(formData).reduce(\n\t\t\t(acc, cur) => ({\n\t\t\t\t...acc,\n\t\t\t\t[`field_${cur}`]: form[cur],\n\t\t\t}),\n\t\t\t{},\n\t\t);\n\t\treturn fetch(submissionURL, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({\n\t\t\t\tformId,\n\t\t\t\t...formDataWithFieldPrefix,\n\t\t\t}),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t},\n\t\t})\n\t\t\t.then((resp) => {\n\t\t\t\tif (resp.status === 201) {\n\t\t\t\t\tsetSubmissionSuccess(true);\n\t\t\t\t} else {\n\t\t\t\t\tsetNetworkError(\n\t\t\t\t\t\t'Sorry, there was a problem submitting your form. Please try again later.',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((respError) => {\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\trespError,\n\t\t\t\t\t'message-us-submission',\n\t\t\t\t);\n\n\t\t\t\tsetNetworkError(\n\t\t\t\t\t'Sorry, there was a problem submitting your message. Please try again later.',\n\t\t\t\t);\n\t\t\t});\n\t};\n\n\tif (submissionSuccess) {\n\t\treturn (\n\t\t\t<div css={containerStyles(format)}>\n\t\t\t\t<div css={tickBoxStyles}>\n\t\t\t\t\t<SvgTickRound />\n\t\t\t\t</div>\n\t\t\t\t<div css={successStyles}>\n\t\t\t\t\tThank you for submitting your message.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div css={containerStyles(format)}>\n\t\t\t<div css={prefaceStyles}>\n\t\t\t\t<span css={{ fontWeight: 'bold' }}>Please note: </span>This is\n\t\t\t\tnot a public comment – only the Guardian can see your message.\n\t\t\t\tOur writers will monitor these messages and respond to some in\n\t\t\t\tthis live blog, but unfortunately they will not be able to\n\t\t\t\trespond to every message.\n\t\t\t</div>\n\t\t\t<form\n\t\t\t\tcss={formStyles}\n\t\t\t\tnoValidate={true}\n\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tconst isValid = validateForm();\n\t\t\t\t\tif (!isValid) {\n\t\t\t\t\t\tconst firstInvalidFormElement: HTMLInputElement =\n\t\t\t\t\t\t\tdocument.querySelectorAll(\n\t\t\t\t\t\t\t\t':invalid',\n\t\t\t\t\t\t\t)[1] as HTMLInputElement;\n\t\t\t\t\t\tfirstInvalidFormElement.focus();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvoid submitForm(formData);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{Object.values(validationErrors).filter((err) => err !== '')\n\t\t\t\t\t.length > 0 && (\n\t\t\t\t\t<ErrorSummary\n\t\t\t\t\t\tmessage=\"Some information is missing.\"\n\t\t\t\t\t\tcontext=\"Please complete all required fields.\"\n\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\twidth: fit-content;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tmargin-bottom: ${space[4]}px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{formFields.map((formField) => (\n\t\t\t\t\t<div css={formFieldWrapperStyles} key={formField.id}>\n\t\t\t\t\t\t<FormField\n\t\t\t\t\t\t\tformField={formField}\n\t\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\t\tsetFieldInFormData={setFieldInFormData}\n\t\t\t\t\t\t\tvalidationErrors={validationErrors}\n\t\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t\t<div css={textStyles}>\n\t\t\t\t\tYou must be 18 or over to fill in this form. We will only\n\t\t\t\t\tuse this data for the purpose of improving our live blogs.\n\t\t\t\t\tFor more information please read our terms of service and\n\t\t\t\t\tprivacy policy. If you have something sensitive to share\n\t\t\t\t\twith us, contact the Guardian securely. By submitting your\n\t\t\t\t\tmessage, you are agreeing to share your details with us,\n\t\t\t\t\twhich we may use in this blog.\n\t\t\t\t</div>\n\t\t\t\t{/* this element is a H O N £ Y - P 0 T */}\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: -62.5rem;\n\t\t\t\t\t`}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\tname=\"twitter-handle\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tid=\"twitter-handle\"\n\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\tplaceholder=\"@mytwitterhandle\"\n\t\t\t\t\t\tvalue={twitterHandle}\n\t\t\t\t\t\tonChange={(e) => setTwitterHandle(e.target.value)}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{!!networkError && (\n\t\t\t\t\t<div css={errorTextStyles}>{networkError}</div>\n\t\t\t\t)}\n\t\t\t\t<div css={footerPaddingStyles}>\n\t\t\t\t\t<Button type=\"submit\" cssOverrides={submitButtonStyles}>\n\t\t\t\t\t\tSend to the Guardian\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t);\n};\n\nconst detailsStyles: SerializedStyles = css`\n\t&:not([open]) .is-open,\n\t&[open] .is-closed {\n\t\tdisplay: none;\n\t}\n\n\t&[open] summary {\n\t\ttext-decoration: underline;\n\t}\n\n\t/* removes toggle triangle from webkit browsers such as Safari */\n\tsummary::-webkit-details-marker {\n\t\tdisplay: none;\n\t}\n`;\n\nconst summaryStyles = css`\n\tcursor: pointer;\n\t&:focus {\n\t\t${focusHalo};\n\t}\n\t&:first-child {\n\t\tmargin-left: -4px;\n\t}\n\tpath {\n\t\t${until.desktop} {\n\t\t\tfill: white;\n\t\t}\n\t}\n\t.is-open,\n\t.is-closed {\n\t\tsvg {\n\t\t\theight: ${space[3]}px;\n\t\t}\n\t}\n\t${textSans.small({ fontWeight: 'bold' })};\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-bottom: ${space[2]}px;\n\t${until.desktop} {\n\t\tcolor: white;\n\t}\n`;\n\n/**\n * # Send a Message Component\n *\n * A callout for readers to get in touch with a liveblogger directly.\n *\n * ## Why does this need to be an Island?\n *\n * We are responding to user interactions on the page,\n * and submitting a form.\n *\n */\n\nexport const SendAMessage = ({ formFields, formId, format, pageId }: Props) => {\n\treturn (\n\t\t<details css={detailsStyles}>\n\t\t\t<summary css={summaryStyles}>\n\t\t\t\t<SvgMessageRound size=\"medium\" />\n\t\t\t\tSend us a message\n\t\t\t\t<span className=\"is-open\">\n\t\t\t\t\t<SvgChevronUpSingle size=\"xsmall\" />\n\t\t\t\t</span>\n\t\t\t\t<span className=\"is-closed\">\n\t\t\t\t\t<SvgChevronDownSingle size=\"xsmall\" />\n\t\t\t\t</span>\n\t\t\t</summary>\n\t\t\t<Form\n\t\t\t\tformFields={formFields}\n\t\t\t\tsubmissionURL={CALLOUT_URL}\n\t\t\t\tformId={formId}\n\t\t\t\tformat={format}\n\t\t\t\tpageId={pageId}\n\t\t\t/>\n\t\t</details>\n\t);\n};\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden, iconSize } from '@guardian/source-foundations';\n\nconst Svg = ({ size }) => (jsx(\"svg\", { width: size ? iconSize[size] : undefined, height: undefined, viewBox: \"-3 -3 30 30\", xmlns: \"http://www.w3.org/2000/svg\", focusable: false, \"aria-hidden\": true, children: jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M23 16.768 12.502 6.27h-1.004L1 16.768l.98.954L12 9.284l10.02 8.438.98-.954Z\" }) }));\nconst SvgChevronUpSingle = ({ size, isAnnouncedByScreenReader = false, }) => (jsxs(Fragment, { children: [jsx(Svg, { size: size }), isAnnouncedByScreenReader ? (jsx(\"span\", { css: css `\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`, children: \"Collapse to show less\" })) : ('')] }));\n\nexport { SvgChevronUpSingle };\n//# sourceMappingURL=SvgChevronUpSingle.js.map\n"],"names":["FormField","formField","formData","setFieldInFormData","pageId","validationErrors","type","label","hideLabel","description","required","id","name","fieldValue","fieldError","firstUpdate","useRef","useEffect","current","hidden","TextInput","supporting","optional","value","error","data-testid","onChange","e","target","TextArea","FileInput","onUpload","file","Select","children","concat","options","map","formLabel","Option","CheckboxGroup","undefined","option","selectedCheckboxesArray","isCheckboxChecked","find","ele","Checkbox","checked","filter","RadioGroup","orientation","length","index","Radio","Svg","size","jsx","width","iconSize","height","viewBox","xmlns","focusable","fillRule","clipRule","d","SvgMessageRound","isAnnouncedByScreenReader","jsxs","Fragment","css","visuallyHidden","containerStyles","format","until","decidePalette","background","messageForm","neutral","space","textStyles","textSans","successStyles","tickBoxStyles","success","errorTextStyles","palette","fontWeight","formStyles","formFieldWrapperStyles","submitButtonStyles","from","footerPaddingStyles","prefaceStyles","Form","formFields","submissionURL","formId","setFormData","useState","setValidationErrors","networkError","setNetworkError","submissionSuccess","setSubmissionSuccess","twitterHandle","setTwitterHandle","data","currentErrors","div","SvgTickRound","span","form","noValidate","onSubmit","preventDefault","errors","isValid","forEach","field","test","includes","Object","keys","validateForm","async","formDataWithFieldPrefix","reduce","acc","cur","fetch","method","body","JSON","stringify","headers","then","resp","status","catch","respError","window","guardian","modules","sentry","reportError","submitForm","document","querySelectorAll","focus","values","err","ErrorSummary","message","context","cssOverrides","aria-hidden","input","tabIndex","placeholder","Button","detailsStyles","summaryStyles","focusHalo","SendAMessage","details","summary","className","SvgChevronUpSingle","SvgChevronDownSingle"],"sourceRoot":""}