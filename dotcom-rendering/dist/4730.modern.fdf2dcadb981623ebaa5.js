"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[4730],{4730:(t,n,e)=>{e.d(n,{L:()=>K});var o=e(7800),r=e(43),i=e(1810),s=e(3196),c=e(683),a=e(7357),d=e(1083),l=e(3904),u=e(9038),p=e(9901),f=e(4463),h=e(7410);function x(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}function b(){const t=x(["\n\t","\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tbackground-color: white;\n\tpadding: 6px 0;\n\tbox-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n\n\t"," {\n\t\tposition: fixed;\n\t\tborder-radius: 0;\n\t\ttop: 32px;\n\t\tleft: 0;\n\t\tright: 0;\n\t\twidth: auto;\n\t\tmax-height: calc(100% - 50px);\n\t\toverflow: auto;\n\t}\n\n\t"," {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\twidth: 200px;\n\t\tborder-radius: 3px;\n\t}\n"],["\n\t","\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tbackground-color: white;\n\tpadding: 6px 0;\n\tbox-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n\n\t"," {\n\t\tposition: fixed;\n\t\tborder-radius: 0;\n\t\ttop: 32px;\n\t\tleft: 0;\n\t\tright: 0;\n\t\twidth: auto;\n\t\tmax-height: calc(100% - 50px);\n\t\toverflow: auto;\n\t}\n\n\t"," {\n\t\tposition: absolute;\n\t\ttop: 100%;\n\t\twidth: 200px;\n\t\tborder-radius: 3px;\n\t}\n"]);return b=function(){return t},t}function m(){const t=x(["\n\tposition: relative;\n\tdisplay: flex;\n"]);return m=function(){return t},t}function g(){const t=x(["\n\tdisplay: block;\n"]);return g=function(){return t},t}function v(){const t=x(["\n\tdisplay: none;\n"]);return v=function(){return t},t}function k(){const t=x(["\n\t",";\n\tcolor: ",";\n\tposition: relative;\n\ttransition: color 80ms ease-out;\n\tmargin: -1px 0 0 0;\n\ttext-decoration: none;\n\tdisplay: block;\n\tpadding: 10px 18px 15px 30px;\n\n\t:hover {\n\t\tbackground-color: ",";\n\t\ttext-decoration: none;\n\t}\n\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\t:before {\n\t\tcontent: '';\n\t\tborder-top: 1px solid ",";\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0px;\n\t\tleft: 30px;\n\t\tright: 0px;\n\t}\n"]);return k=function(){return t},t}function w(){const t=x(["\n\tfont-weight: bold;\n\n\t:after {\n\t\tcontent: '';\n\t\tborder: 2px solid ",";\n\t\tborder-top: 0px;\n\t\tborder-right: 0px;\n\t\tposition: absolute;\n\t\ttop: 19px;\n\t\tleft: 12px;\n\t\twidth: 10px;\n\t\theight: 4px;\n\t\ttransform: rotate(-45deg);\n\t}\n"]);return w=function(){return t},t}function y(){const t=x(["\n\t:before {\n\t\tcontent: none;\n\t}\n"]);return y=function(){return t},t}function j(){const t=x(["\n\t",";\n\tdisplay: block;\n\tcursor: pointer;\n\tbackground: none;\n\tborder: none;\n\t/* Design System: The buttons should be components that handle their own layout using primitives  */\n\tline-height: 1.2;\n\tcolor: ",";\n\ttransition: color 80ms ease-out;\n\tpadding: 0px 10px 6px 5px;\n\tmargin: 1px 0 0;\n\ttext-decoration: none;\n\tposition: relative;\n\n\t:hover {\n\t\tcolor: ",";\n\n\t\t:after {\n\t\t\ttransform: translateY(0) rotate(45deg);\n\t\t}\n\t}\n\n\t:after {\n\t\tcontent: '';\n\t\tdisplay: inline-block;\n\t\twidth: 5px;\n\t\theight: 5px;\n\t\ttransform: translateY(-2px) rotate(45deg);\n\t\tborder: 1px solid currentColor;\n\t\tborder-left: transparent;\n\t\tborder-top: transparent;\n\t\tmargin-left: 5px;\n\t\tvertical-align: middle;\n\t\ttransition: transform 250ms ease-out;\n\t}\n"]);return j=function(){return t},t}function S(){const t=x(["\n\t:hover:after {\n\t\ttransform: translateY(-1px) rotate(-135deg);\n\t}\n\t:after {\n\t\ttransform: translateY(1px) rotate(-135deg);\n\t}\n"]);return S=function(){return t},t}function _(){const t=x(["\n\tbackground-color: ",";\n\tcolor: ",";\n\ttext-align: center;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\t",";\n\tline-height: 1;\n\n\twidth: ","px;\n\theight: ","px;\n\tborder-radius: ","px;\n"]);return _=function(){return t},t}function E(){const t=x(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tmargin-left: -10px;\n\tmargin-top: -3px;\n"]);return E=function(){return t},t}function C(){const t=x(["\n\t",";\n"]);return C=function(){return t},t}function O(){const t=x(["\n\t\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t\t\tmargin-right: 8px;\n\t\t\t\t\t"]);return O=function(){return t},t}function I(){const t=x(["\n\t\t\t\t\t\t"," {\n\t\t\t\t\t\t\t/* Never show the input */\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t}\n\t\t\t\t\t\t"," {\n\t\t\t\t\t\t\t/* Hide caption by default */\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* stylelint-disable-next-line selector-type-no-unknown */\n\t\t\t\t\t\t",":checked + "," {\n\t\t\t\t\t\t\t/* Show the caption if the input is checked */\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t"]);return I=function(){return t},t}const L=(0,r.css)(b(),(0,p.K)("dropdown"),i.C4.tablet,i.Dp.tablet),A=(0,r.css)(m()),N=(0,r.css)(g()),T=(0,r.css)(v()),W=(0,r.css)(k(),s.OS.small(),c.fL.anchorSecondary,a.n$[93],c.Cg.secondary),D=(0,r.css)(w(),a.r[400]),z=(0,r.css)(y()),R=(0,r.css)(j(),s.OS.medium(),c.zb.primary,a.A5[400]),U=(0,r.css)(S()),B=c.DG.error[400],H=t=>(0,r.css)(_(),B,c.DG.neutral[100],s.OS.xsmall(),t,t,t),F=(0,r.css)(E()),G=(0,r.css)(C(),s.OS.xxsmall()),Y=t=>{let{diameter:n}=t;return(0,o.jsx)("div",{css:H(n),children:(0,o.jsx)("span",{children:"!"})})},q=t=>{let{notification:n}=t;const{message:e}=n;return(0,o.jsx)("div",{css:G,children:e})},J=t=>{let{link:n,index:e}=t;var i;const s=(0,l.useMemo)((()=>(t=>{if(t.notifications&&t.notifications.length>0)return{componentType:"RETENTION_HEADER",id:t.id,labels:t.notifications.map((t=>t.ophanLabel))}})(n)),[n]),[c,a]=(0,f.O)({debounce:!0}),[d,p]=(0,l.useState)(!1);(0,l.useEffect)((()=>{c&&s&&n.notifications&&n.notifications.length>0&&!d&&(p(!0),n.notifications.forEach((t=>{var n;null===(n=t.logImpression)||void 0===n||n.call(t)})),(0,u.X4)({component:s,action:"VIEW"}))}),[c,s,n.notifications,d,n.id]),(0,h.t)((()=>{s&&(0,u.X4)({component:s,action:"INSERT"})}),[s]);const x=s?((t,n)=>{const e=encodeURIComponent(JSON.stringify({source:"GUARDIAN_WEB",componentId:n.id,componentType:n.componentType,campaignCode:n.id,referrerPageviewId:window.guardian.config.ophan.pageViewId,referrerUrl:window.location.origin+window.location.pathname,labels:n.labels})),o=t.includes("?")?"&":"?";return"".concat(t).concat(o,"acquisitionData=").concat(e)})(n.url,s):n.url,b=void 0!==n.notifications&&n.notifications.length>0;return(0,o.jsxs)("li",{css:A,ref:a,children:[(0,o.jsxs)("a",{href:x,css:[W,!!n.isActive&&D,0===e&&z],"data-link-name":n.dataLinkName,onClick:()=>{s&&(0,u.X4)({component:s,action:"CLICK"})},children:[n.title,null===(i=n.notifications)||void 0===i?void 0:i.map((t=>(0,o.jsx)(q,{notification:t},t.id)))]}),b&&(0,o.jsx)("div",{css:(0,r.css)(O()),children:(0,o.jsx)(Y,{diameter:22})})]},n.title)},K=t=>{let{id:n,label:e,links:i,dataLinkName:s,cssOverrides:c,children:a}=t;const[u,p]=(0,l.useState)(!1),[f,h]=(0,l.useState)(!0);(0,l.useEffect)((()=>{h(!1)}),[]),(0,l.useEffect)((()=>{const t=t=>{u&&"Escape"===t.code&&p(!1)};return document.addEventListener("keydown",t,!1),()=>document.removeEventListener("keydown",t)}),[u]),(0,l.useEffect)((()=>{const t=t=>{u&&(t.stopPropagation(),p(!1))};return document.addEventListener("click",t,!1),()=>document.removeEventListener("click",t)}),[u]);const x="dropbox-id-".concat(n),b="checkbox-id-".concat(n),m=(t=>t.reduce(((t,n)=>{var e,o;return t+(null!==(o=null===(e=n.notifications)||void 0===e?void 0:e.length)&&void 0!==o?o:0)}),0))(i);return(0,o.jsx)(o.Fragment,{children:f?(0,o.jsxs)("div",{css:(0,r.css)(I(),"#".concat(b),d.j,"#".concat(x),"#".concat(b),"#".concat(x)),children:[(0,o.jsx)("label",{htmlFor:b,css:[R,c],children:e}),(0,o.jsx)("input",{type:"checkbox",id:b,"aria-checked":"false",tabIndex:-1}),(0,o.jsx)("ul",{id:x,css:[L,c],children:i.map(((t,n)=>(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:t.url,css:[W,!!t.isActive&&D,0===n&&z],"data-link-name":t.dataLinkName,children:t.title})},t.title)))})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("button",{onClick:()=>p(!u),css:[R,c,u&&U],"aria-expanded":u?"true":"false","data-link-name":s,"data-cy":"dropdown-button",type:"button",children:[e,m>0&&(0,o.jsx)("div",{css:F,children:(0,o.jsx)(Y,{diameter:18})})]}),(0,o.jsx)("div",{css:u?N:T,children:a?(0,o.jsx)(o.Fragment,{children:a}):(0,o.jsx)("ul",{css:[L,c],"data-cy":"dropdown-options",children:i.map(((t,n)=>(0,o.jsx)(J,{link:t,index:n},t.id)))})})]})})}},9901:(t,n,e)=>{e.d(n,{K:()=>r});const o=["sticky-video-button","sticky-video","banner","dropdown","burger","expanded-veggie-menu-wrapper","expanded-veggie-menu","mobileSticky","stickyAdWrapperLabsHeader","stickyAdWrapper","stickyAdWrapperNav","editionDropdown","toast","onwardsCarousel","myAccountDropdown","searchHeaderLink","TheGuardian","headerWrapper","articleHeadline","immersiveBlackBox","bodyArea","rightColumnArea","mainMedia","card-nested-link","card-link"],r=t=>"z-index: ".concat((t=>{const n=o.indexOf(t);return-1===n?-1:o.length-n})(t),";")},4463:(t,n,e)=>{e.d(n,{O:()=>s});var o=e(3198),r=e.n(o),i=e(3904);const s=t=>{const[n,e]=(0,i.useState)(!1);var o;const[s,c]=(0,i.useState)(null!==(o=t.node)&&void 0!==o?o:null),a=(0,i.useRef)(null),d=n=>{let[o]=n;o&&(o.isIntersecting?e(!0):t.repeat&&e(!1))},l=t.debounce?r()(d,200):d;return(0,i.useEffect)((()=>(a.current&&a.current.disconnect(),window.IntersectionObserver&&(a.current=new window.IntersectionObserver(l,t),s&&a.current.observe(s)),()=>{var t;return null===(t=a.current)||void 0===t?void 0:t.disconnect()})),[s,t,l]),[n,c]}},7410:(t,n,e)=>{e.d(n,{t:()=>r});var o=e(3904);const r=(t,n)=>{const[e,r]=(0,o.useState)(!1),i=n.every((t=>void 0!==t));(0,o.useEffect)((()=>{!e&&i&&(t(),r(!0))}),[e,i,t])}}}]);
//# sourceMappingURL=4730.modern.fdf2dcadb981623ebaa5.js.map