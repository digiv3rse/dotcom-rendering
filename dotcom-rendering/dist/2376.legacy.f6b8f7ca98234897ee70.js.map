{"version":3,"file":"2376.legacy.f6b8f7ca98234897ee70.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/lib/pillarPalette.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/AudioAtom.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/ChartAtom.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/src/deprecated-exports.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgFacebookMessenger.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgInfoRound.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/expandableAtom/Body.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/expandableAtom/Summary.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/expandableAtom/Container.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/expandableAtom/Footer.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/lib/ophan.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/GuideAtom.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/Answers.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgFacebook.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgTwitter.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgEnvelope.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgWhatsApp.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgLinkedIn.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgPinterest.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/SharingIcons.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/KnowledgeQuiz.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/PersonalityQuiz.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/loadYouTubeIframeApi.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/ProfileAtom.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/QandaAtom.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/TimelineAtom.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/common/MaintainAspectRatio.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/lib/formatTime.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/Picture.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/YoutubeAtomOverlay.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/YoutubeAtomPlaceholder.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/YouTubePlayer.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/YoutubeAtomPlayer.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/YoutubeAtomSticky.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/lib/useIsInView.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/atoms-rendering/src/YoutubeAtom.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-foundations/src/breakpoints/breakpoints.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-foundations/src/mq/mq.ts","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/src/button/LinkButton.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgCheckmark.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgCross.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgMediaControlsPlay.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgMinus.tsx","webpack://@guardian/dotcom-rendering/../../../libs/@guardian/source-react-components/vendor/icons/SvgPlus.tsx","webpack://@guardian/dotcom-rendering/../node_modules/is-mobile/index.js","webpack://@guardian/dotcom-rendering/../node_modules/lodash.debounce/index.js","webpack://@guardian/dotcom-rendering/../node_modules/preact-render-to-string/dist/index.module.js"],"sourcesContent":["import type { ArticleTheme } from '@guardian/libs';\nimport { ArticlePillar, ArticleSpecial } from '@guardian/libs';\nimport {\n\tculture,\n\tlifestyle,\n\tnews,\n\topinion,\n\tsport,\n} from '@guardian/source-foundations';\n\ntype Colour = string;\n\ninterface PillarColours {\n\t300: Colour;\n\t400: Colour;\n\t500: Colour;\n\t600: Colour;\n\t800: Colour;\n}\n\nexport const pillarPalette: Record<ArticleTheme, PillarColours> = {\n\t[ArticlePillar.News]: news,\n\t[ArticlePillar.Opinion]: opinion,\n\t[ArticlePillar.Sport]: sport,\n\t[ArticlePillar.Culture]: culture,\n\t[ArticlePillar.Lifestyle]: lifestyle,\n\t[ArticleSpecial.Labs]: lifestyle,\n\t[ArticleSpecial.SpecialReport]: news,\n\t[ArticleSpecial.SpecialReportAlt]: news,\n};\n","import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport {\n\tfocusHalo,\n\theadline,\n\tneutral,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport type { MouseEvent } from 'react';\nimport { useEffect, useRef, useState } from 'react';\nimport { pillarPalette } from './lib/pillarPalette';\nimport type { AudioAtomType } from './types';\n\nconst wrapperStyles = css`\n\twidth: 100%;\n\tborder-image: repeating-linear-gradient(\n\t\t\tto bottom,\n\t\t\t${neutral[86]},\n\t\t\t${neutral[86]} 1px,\n\t\t\ttransparent 1px,\n\t\t\ttransparent 4px\n\t\t)\n\t\t13;\n\tborder-top: 13px solid black;\n\tbackground-color: ${neutral[97]};\n\tposition: relative;\n\tpadding-left: 5px;\n\tpadding-right: 5px;\n\tpadding-bottom: 1px;\n\tmargin: 16px 0 36px;\n`;\n\nconst kickerStyle = (pillar: ArticleTheme) => css`\n\tcolor: ${pillarPalette[pillar][400]};\n\t${headline.xxxsmall({ fontWeight: 'bold' })};\n`;\n\nconst titleStyle = css`\n\t${headline.xxxsmall()};\n`;\n\nconst audioBodyStyle = css`\n\tdisplay: flex;\n\toverflow: hidden;\n`;\n\nconst audioElementStyle = css`\n\theight: 0;\n\tvertical-align: baseline;\n\twidth: 300px;\n`;\n\nconst audioControlsStyle = css`\n\tbox-sizing: content-box;\n\tpadding: 5px;\n\twidth: 50px;\n\theight: 50px;\n`;\n\nconst buttonStyle = css`\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tcursor: pointer;\n\tbackground-color: transparent;\n\t:focus {\n\t\t${focusHalo}\n\t}\n\theight: 50px;\n`;\n\nconst svgPlayStyle = css`\n\tfill: currentColor;\n\toverflow: hidden;\n\twidth: 50px;\n\theight: auto;\n`;\n\nconst svgPauseStyle = css`\n\tfill: currentColor;\n\toverflow: hidden;\n\twidth: 50px;\n\theight: auto;\n`;\n\nconst timingStyle = css`\n\talign-items: center;\n\tdisplay: flex;\n\tflex: 1;\n`;\n\nconst timePlayedStyle = css`\n\tmin-width: 75px;\n\tpadding-top: 6px;\n\tdisplay: block;\n`;\n\nconst progressBarStyle = css`\n\tflex: 1;\n\tdisplay: block;\n`;\n\nconst progressBarInputStyle = (pillar: ArticleTheme) => css`\n\twidth: 100%;\n\tappearance: none;\n\tbackground-image: linear-gradient(\n\t\tto right,\n\t\t${pillarPalette[pillar][400]} 0%,\n\t\t${neutral[60]} 0%\n\t);\n\theight: 6px;\n\toutline: 0;\n\tcursor: pointer;\n\tmargin-left: 0;\n\tmargin-right: 0;\n\t:focus {\n\t\t${focusHalo}\n\t}\n\t// Use the pillar to style the colour of the range thumb\n\t&::-webkit-slider-thumb {\n\t\tbackground: ${pillarPalette[pillar][400]};\n\t\t-webkit-appearance: none;\n\t\twidth: 14px;\n\t\theight: 14px;\n\t\tborder-radius: 50px;\n\t}\n\t&::-moz-range-thumb {\n\t\tbackground: ${pillarPalette[pillar][400]};\n\t\twidth: 14px;\n\t\theight: 14px;\n\t\tborder: none;\n\t\tborder-radius: 50px;\n\t}\n\t&::-ms-thumb {\n\t\tbackground: ${pillarPalette[pillar][400]};\n\t\twidth: 14px;\n\t\theight: 14px;\n\t\tborder: none;\n\t\tborder-radius: 50px;\n\t}\n`;\n\nconst timeDurationStyle = css`\n\tmin-width: 65px;\n\tpadding-top: 6px;\n\tpadding-left: 10px;\n\tdisplay: block;\n`;\n\nconst timeStyles = css`\n\t${textSans.small()}\n`;\n\nconst format = (t: number) => t.toFixed(0).padStart(2, '0');\n\nconst formatTime = (t: number) => {\n\tconst second = Math.floor(t % 60);\n\tconst minute = Math.floor((t % 3600) / 60);\n\tconst hour = Math.floor(t / 3600);\n\treturn `${format(hour)}:${format(minute)}:${format(second)}`;\n};\n\nconst PauseSVG = ({ pillar }: { pillar: ArticleTheme }) => (\n\t<svg css={svgPauseStyle} width=\"30px\" height=\"30px\" viewBox=\"0 0 30 30\">\n\t\t<g fill=\"none\" fillRule=\"evenodd\">\n\t\t\t<circle fill={pillarPalette[pillar][400]} cx=\"15\" cy=\"15\" r=\"15\"></circle>\n\t\t\t<path\n\t\t\t\td=\"M9.429 7.286h3.429v15.429h-3.43zm7.286 0h3.429v15.429h-3.43z\"\n\t\t\t\tfill={neutral[100]}\n\t\t\t></path>\n\t\t</g>\n\t</svg>\n);\n\nconst PlaySVG = ({ pillar }: { pillar: ArticleTheme }) => (\n\t<svg css={svgPlayStyle} width=\"30px\" height=\"30px\" viewBox=\"0 0 30 30\">\n\t\t<g fill=\"none\" fillRule=\"evenodd\">\n\t\t\t<circle fill={pillarPalette[pillar][400]} cx=\"15\" cy=\"15\" r=\"15\"></circle>\n\t\t\t<path\n\t\t\t\tfill={neutral[100]}\n\t\t\t\td=\"M10.113 8.571l-.47.366V20.01l.472.347 13.456-5.593v-.598z\"\n\t\t\t></path>\n\t\t</g>\n\t</svg>\n);\n\nconst buildUrl = (basicUrl: string, shouldUseAcast?: boolean) => {\n\treturn shouldUseAcast\n\t\t? basicUrl.replace('https://', 'https://flex.acast.com/')\n\t\t: basicUrl;\n};\n\nexport const AudioAtom = ({\n\tid,\n\ttrackUrl,\n\tkicker,\n\ttitle,\n\tpillar,\n\tshouldUseAcast,\n\tduration,\n}: AudioAtomType): JSX.Element => {\n\tconst audioEl = useRef<HTMLAudioElement>(null);\n\tconst [isPlaying, setIsPlaying] = useState<boolean>(false);\n\n\t// update current time and progress bar position\n\tconst [currentTime, setCurrentTime] = useState<number>(0);\n\tconst [percentPlayed, setPercentPlayed] = useState<number>(0);\n\t// url\n\tconst [urlToUse, setUrlToUse] = useState<string>(\n\t\tbuildUrl(trackUrl, shouldUseAcast),\n\t);\n\n\tuseEffect(() => {\n\t\tconst updateCurrentTimeAndPosition = () => {\n\t\t\tconst currentTime: number | undefined = audioEl.current?.currentTime;\n\t\t\tconst duration: number | undefined = audioEl.current?.duration;\n\t\t\tsetPercentPlayed(\n\t\t\t\tcurrentTime && duration ? (currentTime / duration) * 100 : 0,\n\t\t\t);\n\t\t\tsetCurrentTime(currentTime ?? 0);\n\t\t};\n\n\t\taudioEl.current?.addEventListener(\n\t\t\t'timeupdate',\n\t\t\tupdateCurrentTimeAndPosition,\n\t\t);\n\n\t\treturn () =>\n\t\t\taudioEl.current\n\t\t\t\t? audioEl.current.removeEventListener(\n\t\t\t\t\t\t'timeupdate',\n\t\t\t\t\t\tupdateCurrentTimeAndPosition,\n\t\t\t\t  )\n\t\t\t\t: undefined;\n\t}, [audioEl, setCurrentTime, shouldUseAcast]);\n\n\t// update duration time\n\tconst [durationTime, setDurationTime] = useState<number>(duration);\n\tuseEffect(() => {\n\t\tconst updateDurationTime = () =>\n\t\t\tsetDurationTime(audioEl.current ? audioEl.current.duration : duration);\n\n\t\taudioEl.current?.addEventListener('loadeddata', updateDurationTime);\n\t\treturn () =>\n\t\t\taudioEl.current?.removeEventListener('loadeddata', updateDurationTime);\n\t}, [audioEl, setDurationTime]);\n\n\tconst updateAudioCurrentTime = (e: MouseEvent<HTMLInputElement>) => {\n\t\tif (audioEl.current) {\n\t\t\tconst percentagePositionClick =\n\t\t\t\t(e.nativeEvent.offsetX / e.currentTarget.offsetWidth) * 100;\n\t\t\t// set the currentTime of the audio based on percentagePositionClick\n\t\t\taudioEl.current.currentTime =\n\t\t\t\t(audioEl.current.duration / 100) * percentagePositionClick;\n\t\t}\n\t};\n\n\t// ***************************\n\t// *     Accessibility       *\n\t// ***************************\n\tconst progressBarEl = useRef<HTMLInputElement>(null);\n\tuseEffect(() => {\n\t\tconst rightArrowKeyCode = 39;\n\t\tconst leftArrowKeyCode = 37;\n\t\tconst keyListener = (e: KeyboardEvent) => {\n\t\t\tif (\n\t\t\t\te.keyCode === rightArrowKeyCode &&\n\t\t\t\tdocument.activeElement === progressBarEl.current\n\t\t\t) {\n\t\t\t\tif (audioEl.current) audioEl.current.currentTime += 15;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\te.keyCode === leftArrowKeyCode &&\n\t\t\t\tdocument.activeElement === progressBarEl.current\n\t\t\t) {\n\t\t\t\tif (audioEl.current) audioEl.current.currentTime -= 15;\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('keydown', keyListener);\n\t\treturn () => document.removeEventListener('keydown', keyListener);\n\t}, [audioEl, progressBarEl]);\n\n\t// If Acast is enabled, replace the default url with an ad enabled one\n\tuseEffect(() => {\n\t\tsetUrlToUse(buildUrl(trackUrl, shouldUseAcast));\n\t}, [shouldUseAcast]);\n\n\tconst playAudio = () => {\n\t\tsetIsPlaying(true);\n\t\taudioEl.current?.play();\n\t};\n\n\tconst pauseAudio = () => {\n\t\tsetIsPlaying(false);\n\t\taudioEl.current?.pause();\n\t};\n\n\treturn (\n\t\t<div css={wrapperStyles} data-atom-id={id} data-atom-type=\"audio\">\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tpadding-left: 5px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<span css={kickerStyle(pillar)}>{kicker}</span>\n\t\t\t\t<h4 css={titleStyle}>{title}</h4>\n\t\t\t</div>\n\t\t\t<div css={audioBodyStyle}>\n\t\t\t\t<audio\n\t\t\t\t\tcss={audioElementStyle}\n\t\t\t\t\tsrc={urlToUse}\n\t\t\t\t\tref={audioEl}\n\t\t\t\t\tpreload=\"none\"\n\t\t\t\t\tdata-component=\"inarticle audio\"\n\t\t\t\t\tdata-duration={durationTime}\n\t\t\t\t\tdata-media-id={id ?? '_no_ids'}\n\t\t\t\t\tdata-title={titleStyle}\n\t\t\t\t>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tSorry your browser does not support audio - but you can download\n\t\t\t\t\t\there and listen\n\t\t\t\t\t\thttps://audio.guim.co.uk/2020/05/05-61553-gnl.fw.200505.jf.ch7DW.mp3\n\t\t\t\t\t</p>\n\t\t\t\t</audio>\n\t\t\t\t<div css={audioControlsStyle}>\n\t\t\t\t\t<button\n\t\t\t\t\t\tdata-testid={isPlaying ? 'pause-button' : 'play-button'}\n\t\t\t\t\t\tonClick={() => (isPlaying ? pauseAudio() : playAudio())}\n\t\t\t\t\t\tcss={buttonStyle}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isPlaying ? (\n\t\t\t\t\t\t\t<PauseSVG pillar={pillar} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<PlaySVG pillar={pillar} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div css={timingStyle}>\n\t\t\t\t\t<div css={timePlayedStyle}>\n\t\t\t\t\t\t<span css={timeStyles}>{formatTime(currentTime)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div css={progressBarStyle}>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tcss={progressBarInputStyle(pillar)}\n\t\t\t\t\t\t\tref={progressBarEl}\n\t\t\t\t\t\t\ttype=\"range\"\n\t\t\t\t\t\t\tmin=\"0\"\n\t\t\t\t\t\t\tmax=\"100\"\n\t\t\t\t\t\t\tstep=\"1\"\n\t\t\t\t\t\t\tvalue={percentPlayed}\n\t\t\t\t\t\t\tonClick={updateAudioCurrentTime}\n\t\t\t\t\t\t\treadOnly={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div css={timeDurationStyle}>\n\t\t\t\t\t\t<span css={timeStyles}>{formatTime(durationTime)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { space } from '@guardian/source-foundations';\nimport type { ChartAtomType } from './types';\n\nexport const ChartAtom = ({ id, html }: ChartAtomType): JSX.Element => {\n\treturn (\n\t\t<div\n\t\t\tdata-atom-id={id}\n\t\t\tdata-testid=\"chart\"\n\t\t\tdata-atom-type=\"chart\"\n\t\t\tdata-snippet-type=\"chart\"\n\t\t\tcss={css`\n\t\t\t\tpadding-bottom: ${space[1]}px;\n\t\t\t`}\n\t\t>\n\t\t\t<iframe\n\t\t\t\tclassName=\"atom__iframe\"\n\t\t\t\tname={id}\n\t\t\t\tsrcDoc={html}\n\t\t\t\twidth=\"100%\"\n\t\t\t\tframeBorder=\"0\"\n\t\t\t></iframe>\n\t\t</div>\n\t);\n};\n","/**\n * DEPRECATED EXPORTS\n *\n * To be removed from the public interface in the next major version.\n */\n\nimport { SvgCrossedOutCloud } from '../vendor/icons/SvgCrossedOutCloud';\nimport { SvgExclamation } from '../vendor/icons/SvgExclamation';\nimport { SvgFacebookMessenger } from '../vendor/icons/SvgFacebookMessenger';\nimport { SvgInfoRound } from '../vendor/icons/SvgInfoRound';\nimport { SvgMediaControlsPlay } from '../vendor/icons/SvgMediaControlsPlay';\nimport { SvgPayPalBrand } from '../vendor/icons/SvgPayPalBrand';\nimport type { Props as InternalPropsType } from './@types/Props';\n\n/**\n * @deprecated This is for internal use only.\n * It was previously exported so the v3 `src-*` modules could use it\n * but will be removed in the next major version.\n */\nexport type Props = InternalPropsType;\n\n/** @deprecated Use `SvgCrossedOutCloud` instead. */\nexport const SvgOfflineCloud = SvgCrossedOutCloud;\n\n/** @deprecated Use `SvgExclamation` instead. */\nexport const SvgAlert = SvgExclamation;\n\n/** @deprecated Use `SvgFacebookMessenger` instead. */\nexport const SvgMessenger = SvgFacebookMessenger;\n\n/** @deprecated Use `SvgInfoRound` instead. */\nexport const SvgInfo = SvgInfoRound;\n\n/** @deprecated Use `SvgMediaControlsPlay` instead. */\nexport const SvgPlay = SvgMediaControlsPlay;\n\n/** @deprecated Use `SvgPayPalBrand` instead. */\nexport const SvgPayPal = SvgPayPalBrand;\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M8.848 20.06c1 .304 2.061.455 3.152.455 5.515 0 10-4.151 10-9.242C22 6.152 17.515 2 12 2S2 6.152 2 11.273c0 2.606 1.182 4.97 3.06 6.636V22l3.788-1.94Zm1.637-8.302 2.576 2.666 5.454-5.727-4.97 2.727-2.575-2.666-5.455 5.727 4.97-2.727Z\"\n\t\t/>\n\t</svg>\n);\n\nexport const SvgFacebookMessenger = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tFacebook Messenger logo\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path d=\"M12 2C6.467 2 2 6.467 2 12s4.467 10 10 10 10-4.467 10-10S17.533 2 12 2Zm1.133 13.933v.49c-.11.088-.266.155-.422.244a12.49 12.49 0 0 1-.511.2 2.347 2.347 0 0 1-.533.133 4.344 4.344 0 0 1-.511.044c-.356 0-.578-.066-.712-.2a.577.577 0 0 1-.222-.444c0-.178.022-.356.045-.533.022-.178.066-.356.11-.578l.934-4.245-.867-.2v-.466c.134-.045.312-.111.556-.178.222-.067.467-.111.733-.156.267-.044.511-.088.756-.11.244-.023.467-.045.667-.045l.244.155-1.244 5.89h.977Zm.423-7.466c-.2.177-.49.266-.823.266-.31 0-.577-.089-.8-.266a.878.878 0 0 1-.31-.69c0-.31.11-.555.31-.733.2-.177.467-.266.8-.266.356 0 .623.089.823.266.2.178.31.423.31.734-.022.289-.11.51-.31.689Z\" />\n\t</svg>\n);\n\nexport const SvgInfoRound = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tInformation\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport { body, neutral, textSans } from '@guardian/source-foundations';\nimport { SvgInfo } from '@guardian/source-react-components';\nimport { pillarPalette } from '../lib/pillarPalette';\n\nconst imageStyling = css`\n\tfloat: left;\n\tmargin-right: 16px;\n\tmargin-bottom: 6px;\n\tobject-fit: cover;\n\tborder-radius: 50%;\n\tdisplay: block;\n\tborder: 0px;\n\twidth: 100px;\n\theight: 100px;\n`;\n\nconst creditStyling = css`\n\t${textSans.xsmall()};\n\tmargin: 12px 0;\n\tdisplay: flex;\n\talign-items: center;\n\tsvg {\n\t\twidth: 30px;\n\t\tfill: ${neutral[60]};\n\t}\n`;\n\nconst bodyStyling = css`\n\t${body.medium()}\n\tp {\n\t\tmargin-bottom: 0.5rem;\n\t}\n\n\tol {\n\t\tlist-style: decimal;\n\t\tlist-style-position: inside;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\tul {\n\t\tlist-style: none;\n\t\tmargin: 0 0 0.75rem;\n\t\tpadding: 0;\n\t\tmargin-bottom: 1rem;\n\t}\n\n\tul li {\n\t\tmargin-bottom: 0.375rem;\n\t\tpadding-left: 1.25rem;\n\t}\n\n\tul li:before {\n\t\tdisplay: inline-block;\n\t\tcontent: '';\n\t\tborder-radius: 0.375rem;\n\t\theight: 0.75rem;\n\t\twidth: 0.75rem;\n\t\tmargin-right: 0.5rem;\n\t\tbackground-color: ${neutral[86]};\n\t\tmargin-left: -1.25rem;\n\t}\n\n\t/* Without this bold elements are overridden */\n\tb {\n\t\tfont-weight: 700;\n\t}\n\n\ti {\n\t\tfont-style: italic;\n\t}\n`;\n\nconst linkStyling = (pillar: ArticleTheme) => css`\n\ta {\n\t\tcolor: ${pillarPalette[pillar][300]};\n\t\ttext-decoration: none;\n\t\tborder-bottom: 0.0625rem solid ${neutral[86]};\n\t\ttransition: border-color 0.15s ease-out;\n\t}\n\n\ta:hover {\n\t\tborder-bottom: solid 0.0625rem ${pillarPalette[pillar][400]};\n\t}\n`;\n\nexport const Body = ({\n\thtml,\n\timage,\n\tcredit,\n\tpillar,\n}: {\n\thtml: string;\n\timage?: string;\n\tcredit?: string;\n\tpillar: ArticleTheme;\n}): JSX.Element => {\n\treturn (\n\t\t<div>\n\t\t\t{image && <img css={imageStyling} src={image} alt=\"\" />}\n\t\t\t<div\n\t\t\t\tcss={[bodyStyling, linkStyling(pillar)]}\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: html,\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{credit && (\n\t\t\t\t<div css={creditStyling}>\n\t\t\t\t\t<SvgInfo />\n\t\t\t\t\t{credit}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport {\n\tbody,\n\theadline,\n\tneutral,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { SvgMinus, SvgPlus } from '@guardian/source-react-components';\nimport { useState } from 'react';\nimport { pillarPalette } from '../lib/pillarPalette';\n\n/// SUMMARY ELEMENT\n\nconst titleStyling = css`\n\t${headline.xxxsmall({\n\t\tfontWeight: 'medium',\n\t})};\n\tmargin: 0;\n\tline-height: 22px;\n`;\n\nconst plusStyling = css`\n\tmargin-right: 12px;\n\tmargin-bottom: 6px;\n\twidth: 33px;\n\tfill: white;\n\theight: 28px;\n`;\n\nconst minusStyling = css`\n\tmargin-right: 14px;\n\tmargin-bottom: 6px;\n\twidth: 30px;\n\tfill: white;\n\theight: 25px;\n\tpadding-left: 4px;\n`;\n\nconst iconSpacing = css`\n\tdisplay: inline-flex;\n\talign-items: center;\n\t${textSans.small()};\n`;\n\nexport const Summary = ({\n\tsectionTitle,\n\ttitle,\n\tpillar,\n\texpandCallback,\n}: {\n\tpillar: ArticleTheme;\n\tsectionTitle: string;\n\ttitle: string;\n\texpandCallback: () => void;\n}): JSX.Element => {\n\tconst atomTitleStyling = css`\n\t\tdisplay: block;\n\t\t${body.medium({\n\t\t\tlineHeight: 'tight',\n\t\t\tfontWeight: 'bold',\n\t\t})};\n\t\tcolor: ${pillarPalette[pillar][400]};\n\t`;\n\n\tconst showHideStyling = css`\n\t\tbackground: ${neutral[7]};\n\t\tcolor: ${neutral[100]};\n\t\theight: 2rem;\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\ttransform: translate(0, 50%);\n\t\tpadding: 0 15px 0 7px;\n\t\tborder-radius: 100em;\n\t\tcursor: pointer;\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t\tborder: 0;\n\t\tmargin: 0;\n\t\t:hover {\n\t\t\tbackground: ${pillarPalette[pillar][400]};\n\t\t}\n\t`;\n\tconst [hasBeenExpanded, setHasBeenExpanded] = useState(false);\n\tconst [expandEventSent, setExpandEventFired] = useState(false);\n\treturn (\n\t\t<summary\n\t\t\tonClick={() => {\n\t\t\t\tif (!expandEventSent) {\n\t\t\t\t\texpandCallback();\n\t\t\t\t\tsetExpandEventFired(true);\n\t\t\t\t}\n\t\t\t\tsetHasBeenExpanded(!hasBeenExpanded);\n\t\t\t}}\n\t\t>\n\t\t\t<span css={atomTitleStyling}>{sectionTitle}</span>\n\t\t\t<h4 css={titleStyling}>{title}</h4>\n\t\t\t<span css={showHideStyling}>\n\t\t\t\t{!hasBeenExpanded ? (\n\t\t\t\t\t<span css={iconSpacing}>\n\t\t\t\t\t\t<span css={plusStyling}>\n\t\t\t\t\t\t\t<SvgPlus />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\tShow\n\t\t\t\t\t</span>\n\t\t\t\t) : (\n\t\t\t\t\t<span css={iconSpacing}>\n\t\t\t\t\t\t<span css={minusStyling}>\n\t\t\t\t\t\t\t<SvgMinus />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\tHide\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</span>\n\t\t</summary>\n\t);\n};\n","import { css } from '@emotion/react';\nimport type { SerializedStyles } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport { ArticleDesign } from '@guardian/libs';\nimport { neutral, text } from '@guardian/source-foundations';\nimport { Summary } from './Summary';\n\nconst containerStyling = css`\n\tdisplay: block;\n\tposition: relative;\n`;\n\nexport const detailStyling = (design?: ArticleDesign): SerializedStyles => {\n\t// One off background colour for analysis articles\n\tconst background =\n\t\tdesign === ArticleDesign.Analysis ? '#F2E8E6' : neutral[93];\n\treturn css`\n\t\tmargin: 16px 0 36px;\n\t\tbackground: ${background};\n\t\tcolor: ${text.primary};\n\t\tpadding: 0 5px 6px;\n\t\tborder-image: repeating-linear-gradient(\n\t\t\t\tto bottom,\n\t\t\t\t${neutral[86]},\n\t\t\t\t${neutral[86]} 1px,\n\t\t\t\ttransparent 1px,\n\t\t\t\ttransparent 4px\n\t\t\t)\n\t\t\t13;\n\t\tborder-top: 13px solid black;\n\t\tposition: relative;\n\t\tsummary {\n\t\t\tlist-style: none;\n\t\t\tmargin: 0 0 16px;\n\t\t}\n\n\t\t/* https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details#Customizing_the_disclosure_widget */\n\t\tsummary::-webkit-details-marker {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tsummary:focus {\n\t\t\toutline: none;\n\t\t}\n\t`;\n};\n\nexport const Container = ({\n\tid,\n\ttitle,\n\tchildren,\n\tdesign,\n\tpillar,\n\texpandForStorybook,\n\tatomType,\n\tatomTypeTitle,\n\texpandCallback,\n}: {\n\tid: string;\n\ttitle: string;\n\tdesign?: ArticleDesign;\n\tpillar: ArticleTheme;\n\texpandForStorybook?: boolean;\n\tatomType: string;\n\tatomTypeTitle: string;\n\tchildren: React.ReactNode;\n\texpandCallback: () => void;\n}): JSX.Element => (\n\t<div css={containerStyling} data-atom-id={id} data-atom-type={atomType}>\n\t\t<details\n\t\t\tcss={detailStyling(design)}\n\t\t\tdata-atom-id={id}\n\t\t\tdata-snippet-type={atomType}\n\t\t\topen={expandForStorybook}\n\t\t>\n\t\t\t<Summary\n\t\t\t\tsectionTitle={atomTypeTitle}\n\t\t\t\tpillar={pillar}\n\t\t\t\ttitle={title}\n\t\t\t\texpandCallback={expandCallback}\n\t\t\t/>\n\t\t\t{children}\n\t\t</details>\n\t</div>\n);\n","import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport { textSans } from '@guardian/source-foundations';\nimport { useState } from 'react';\nimport { pillarPalette } from '../lib/pillarPalette';\n\n/// LIKE/DISLIKE FEEDBACK FOOTER\nconst footerStyling = css`\n\tfont-size: 13px;\n\tline-height: 16px;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n`;\n\n// Currently no thumb icon in src-icons so a path is needed\nconst ThumbImage = () => {\n\treturn (\n\t\t<svg\n\t\t\tcss={css`\n\t\t\t\twidth: 16px;\n\t\t\t\theight: 16px;\n\t\t\t`}\n\t\t\tviewBox=\"0 0 40 40\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfill=\"#FFF\"\n\t\t\t\td=\"M33.78 22.437l-4.228 13.98L27.93 37.5 5.062 34.14V15.503l7.8-1.517L24.354 2.5h1.624L28.9 5.426l-4.548 8.67h.107l10.477 1.31\"\n\t\t\t></path>\n\t\t</svg>\n\t);\n};\n\nexport const Footer = ({\n\tpillar,\n\tlikeHandler,\n\tdislikeHandler,\n}: {\n\tpillar: ArticleTheme;\n\tlikeHandler: () => void;\n\tdislikeHandler: () => void;\n}): JSX.Element => {\n\t// This is defined here because adding the hover styling using cx breaks the text styling\n\tconst buttonStyling = css`\n\t\tdisplay: inline-flex;\n\t\tcursor: pointer;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbackground: black;\n\t\tcolor: white;\n\t\tborder-style: hidden;\n\t\tborder-radius: 100%;\n\t\tmargin: 0 0 0 5px;\n\t\tpadding: 0;\n\t\twidth: 28px;\n\t\theight: 28px;\n\t\t:hover {\n\t\t\tbackground: ${pillarPalette[pillar][400]};\n\t\t}\n\t\t:focus {\n\t\t\tborder: none;\n\t\t}\n\t`;\n\tconst [showThankYou, setShowThankYou] = useState(false);\n\treturn (\n\t\t<footer css={footerStyling}>\n\t\t\t<div hidden={showThankYou}>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t${textSans.xsmall()};\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<div>Was this helpful?</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\taria-label=\"yes, this was helpful\"\n\t\t\t\t\t\tdata-testid=\"like\"\n\t\t\t\t\t\tcss={buttonStyling}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tlikeHandler();\n\t\t\t\t\t\t\tsetShowThankYou(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ThumbImage />\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\taria-label=\"no, this was not helpful\"\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tbuttonStyling,\n\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\ttransform: rotate(180deg);\n\t\t\t\t\t\t\t\t-webkit-transform: rotate(180deg);\n\t\t\t\t\t\t\t\t-moz-transform: rotate(180deg);\n\t\t\t\t\t\t\t\t-o-transform: rotate(180deg);\n\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tdata-testid=\"dislike\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tdislikeHandler();\n\t\t\t\t\t\t\tsetShowThankYou(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ThumbImage />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\t${textSans.xsmall()};\n\t\t\t\t\theight: 28px;\n\t\t\t\t`}\n\t\t\t\tdata-testid=\"feedback\"\n\t\t\t\thidden={!showThankYou}\n\t\t\t>\n\t\t\t\tThank you for your feedback.\n\t\t\t</div>\n\t\t</footer>\n\t);\n};\n","import type { OphanComponentEvent } from '@guardian/libs';\n\ntype OphanRecordFunction = (event: Record<string, unknown>) => void;\n\nconst getOphanRecordFunction = (): OphanRecordFunction => {\n\tconst record = window?.guardian?.ophan?.record;\n\n\tif (record) {\n\t\treturn record;\n\t}\n\tconsole.log('window.guardian.ophan.record is not available');\n\t// eslint-disable-next-line @typescript-eslint/no-empty-function\n\treturn () => {};\n};\n\nexport const submitComponentEvent = (\n\tcomponentEvent: OphanComponentEvent,\n): void => {\n\tconst record = getOphanRecordFunction();\n\trecord({ componentEvent });\n};\n","import { Body } from './expandableAtom/Body';\nimport { Container } from './expandableAtom/Container';\nimport { Footer } from './expandableAtom/Footer';\nimport { submitComponentEvent } from './lib/ophan';\nimport type { GuideAtomType } from './types';\n\nexport const GuideAtom = ({\n\tid,\n\ttitle,\n\timage,\n\thtml,\n\tcredit,\n\tdesign,\n\tpillar,\n\texpandForStorybook,\n\tlikeHandler,\n\tdislikeHandler,\n\texpandCallback,\n}: GuideAtomType): JSX.Element => {\n\treturn (\n\t\t<Container\n\t\t\tid={id}\n\t\t\ttitle={title}\n\t\t\tdesign={design}\n\t\t\tpillar={pillar}\n\t\t\tatomType=\"guide\"\n\t\t\tatomTypeTitle=\"Quick Guide\"\n\t\t\texpandForStorybook={expandForStorybook}\n\t\t\texpandCallback={\n\t\t\t\texpandCallback ??\n\t\t\t\t(() =>\n\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\tcomponentType: 'GUIDE_ATOM',\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t\taction: 'EXPAND',\n\t\t\t\t\t}))\n\t\t\t}\n\t\t>\n\t\t\t<Body html={html} image={image} credit={credit} pillar={pillar} />\n\t\t\t<Footer\n\t\t\t\tpillar={pillar}\n\t\t\t\tdislikeHandler={\n\t\t\t\t\tdislikeHandler ??\n\t\t\t\t\t(() =>\n\t\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\t\tcomponentType: 'GUIDE_ATOM',\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\taction: 'DISLIKE',\n\t\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t\tlikeHandler={\n\t\t\t\t\tlikeHandler ??\n\t\t\t\t\t(() =>\n\t\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\t\tcomponentType: 'GUIDE_ATOM',\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\taction: 'LIKE',\n\t\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t></Footer>\n\t\t</Container>\n\t);\n};\n","import type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport { ArticleSpecial } from '@guardian/libs';\nimport {\n\tbody,\n\tneutral,\n\tnews,\n\tspace,\n\tsuccess,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { SvgCheckmark, SvgCross } from '@guardian/source-react-components';\n\n// We export Radio wrapper styles to override Source Radio buttons to align\n// with our custom answers for the quiz\nexport const radioButtonWrapperStyles = (\n\ttheme: ArticleTheme,\n): SerializedStyles => css`\n\tlabel {\n\t\tpadding-top: ${space[3]}px;\n\t\tpadding-bottom: ${space[3]}px;\n\t\tpadding-left: ${space[2]}px;\n\t\tpadding-right: ${space[2]}px;\n\n\t\tmargin-bottom: ${space[2]}px;\n\n\t\tbackground-color: ${neutral[97]};\n\n\t\t:hover {\n\t\t\tbackground-color: ${neutral[86]};\n\t\t}\n\t\t/* TODO: apply same styles on focus (requires source update) */\n\n\t\tdiv {\n\t\t\t${fontStyles(theme)};\n\t\t}\n\t}\n`;\n\nconst fontStyles = (theme: ArticleTheme) =>\n\ttheme === ArticleSpecial.Labs ? textSans.medium() : body.medium();\n\nconst answerWithSVGStyles = css`\n\tmargin-bottom: ${space[2]}px;\n\n\tpadding-top: ${space[2]}px;\n\tpadding-bottom: ${space[3]}px;\n\tpadding-right: ${space[4]}px;\n\tpadding-left: ${space[3]}px;\n`;\n\nconst WhiteCheckmark = () => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin-right: ${space[1]}px;\n\n\t\t\theight: ${space[6]}px;\n\t\t\tsvg {\n\t\t\t\tfill: ${neutral[100]};\n\t\t\t\theight: ${space[6]}px;\n\t\t\t\twidth: ${space[6]}px;\n\t\t\t}\n\t\t`}\n\t>\n\t\t<SvgCheckmark />\n\t</div>\n);\n\nconst BlackCheckmark = () => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin-right: ${space[1]}px;\n\n\t\t\theight: ${space[6]}px;\n\t\t\tsvg {\n\t\t\t\tfill: ${neutral[0]};\n\t\t\t\theight: ${space[6]}px;\n\t\t\t\twidth: ${space[6]}px;\n\t\t\t}\n\t\t`}\n\t>\n\t\t<SvgCheckmark />\n\t</div>\n);\n\nconst WhiteCross = () => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin-right: ${space[1]}px;\n\n\t\t\theight: ${space[6]}px;\n\t\t\tsvg {\n\t\t\t\tfill: ${neutral[100]};\n\t\t\t\theight: ${space[6]}px;\n\t\t\t\twidth: ${space[6]}px;\n\t\t\t}\n\t\t`}\n\t>\n\t\t<SvgCross />\n\t</div>\n);\n\nconst WhiteText = ({\n\ttext,\n\tsupplementText,\n\tid,\n\tanswerType,\n\ttheme,\n}: {\n\tid: string;\n\ttext: string;\n\tsupplementText?: string;\n\tanswerType: string;\n\ttheme: ArticleTheme;\n}) => (\n\t<label\n\t\tcss={css`\n\t\t\tcolor: ${neutral[100]};\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t${fontStyles(theme)};\n\t\t`}\n\t\tdata-testid={id}\n\t\tdata-answer-type={answerType}\n\t>\n\t\t<span\n\t\t\tcss={css`\n\t\t\t\t${fontStyles(theme)};\n\t\t\t`}\n\t\t>\n\t\t\t{text}\n\t\t</span>\n\t\t{supplementText && (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${textSans.xsmall()}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{supplementText}\n\t\t\t</span>\n\t\t)}\n\t</label>\n);\n\nconst BlackText = ({\n\ttext,\n\tsupplementText,\n\tid,\n\tanswerType,\n\ttheme,\n}: {\n\tid: string;\n\ttext: string;\n\tsupplementText?: string;\n\tanswerType: string;\n\ttheme: ArticleTheme;\n}) => (\n\t<label\n\t\tcss={css`\n\t\t\tcolor: ${neutral[0]};\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t${fontStyles(theme)};\n\t\t`}\n\t\tdata-testid={id}\n\t\tdata-answer-type={answerType}\n\t>\n\t\t<span\n\t\t\tcss={css`\n\t\t\t\t${fontStyles(theme)};\n\t\t\t`}\n\t\t>\n\t\t\t{text}\n\t\t</span>\n\t\t{supplementText && (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${textSans.xsmall()}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{supplementText}\n\t\t\t</span>\n\t\t)}\n\t</label>\n);\n\nconst correctSelectedAnswerStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\n\tbackground-color: ${success[400]};\n`;\n\nexport const CorrectSelectedAnswer = ({\n\tanswerText,\n\texplainerText,\n\tid,\n\ttheme,\n}: {\n\tanswerText: string;\n\texplainerText: string;\n\tid: string;\n\ttheme: ArticleTheme;\n}): JSX.Element => (\n\t<div css={[answerWithSVGStyles, correctSelectedAnswerStyles]}>\n\t\t<WhiteCheckmark />\n\t\t<WhiteText\n\t\t\tid={id}\n\t\t\ttext={answerText}\n\t\t\tsupplementText={explainerText}\n\t\t\tanswerType=\"correct-selected-answer\"\n\t\t\ttheme={theme}\n\t\t/>\n\t</div>\n);\n\nconst incorrectSelectedAnswerStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\n\tbackground-color: ${news[400]};\n`;\n\nexport const IncorrectAnswer = ({\n\tanswerText,\n\tid,\n\ttheme,\n}: {\n\tanswerText: string;\n\tid: string;\n\ttheme: ArticleTheme;\n}): JSX.Element => (\n\t<div css={[answerWithSVGStyles, incorrectSelectedAnswerStyles]}>\n\t\t<WhiteCross />\n\t\t<WhiteText\n\t\t\tid={id}\n\t\t\ttext={answerText}\n\t\t\tanswerType=\"incorrect-answer\"\n\t\t\ttheme={theme}\n\t\t/>\n\t</div>\n);\n\nconst correctNonSelectedAnswerStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tborder: 2px solid ${success[400]};\n\tpadding-left: 10px;\n\n\tbackground-color: ${neutral[97]};\n`;\n\nexport const NonSelectedCorrectAnswer = ({\n\tanswerText,\n\texplainerText,\n\tid,\n\ttheme,\n}: {\n\tanswerText: string;\n\texplainerText: string;\n\tid: string;\n\ttheme: ArticleTheme;\n}): JSX.Element => (\n\t<div css={[answerWithSVGStyles, correctNonSelectedAnswerStyles]}>\n\t\t<BlackCheckmark />\n\t\t<BlackText\n\t\t\tid={id}\n\t\t\ttext={answerText}\n\t\t\tsupplementText={explainerText}\n\t\t\tanswerType=\"non-selected-correct-answer\"\n\t\t\ttheme={theme}\n\t\t/>\n\t</div>\n);\n\nconst unselectedAnswerStyles = css`\n\tbackground-color: ${neutral[97]};\n\tmargin-bottom: ${space[2]}px;\n\n\tpadding-top: ${space[2]}px;\n\tpadding-bottom: ${space[3]}px;\n\tpadding-right: ${space[2]}px;\n\tpadding-left: ${space[9]}px;\n`;\n\nexport const UnselectedAnswer = ({\n\tid,\n\tanswerText,\n\ttheme,\n}: {\n\tanswerText: string;\n\tid: string;\n\ttheme: ArticleTheme;\n}): JSX.Element => (\n\t<div css={unselectedAnswerStyles}>\n\t\t<BlackText\n\t\t\tid={id}\n\t\t\ttext={answerText}\n\t\t\tanswerType=\"unselected-disabled-answer\"\n\t\t\ttheme={theme}\n\t\t/>\n\t</div>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M9.575 6.125V9.25H6.15v3.45h3.425V23H13.7V12.7h3.375l.75-3.45H13.7V6.5c0-1.525.9-2.05 2.075-2.05h2.05L17.7 1.175c-1.025-.1-1.825-.175-3-.175-2.925 0-5.125 1.825-5.125 5.125Z\"\n\t\t/>\n\t</svg>\n);\n\nexport const SvgFacebook = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tFacebook logo\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M24 6.1c-.875.375-1.65.6-2.625.725 1.025-.575 1.7-1.425 2.025-2.5-.875.425-1.9 1-2.875 1.075C19.7 4.575 18.6 4 17.2 4c-2.45 0-4.5 2.05-4.5 4.5 0 .275.025.75.125 1.025C9 9.325 5.875 7.575 3.5 4.8c-.325.675-.6 1.475-.6 2.275 0 1.5.8 3.025 2.025 3.75-.4.075-1.675-.325-2.075-.525 0 2.325 1.625 4 3.65 4.475-.775.2-1.375.25-2.05.075.625 1.8 2.2 3.1 4.2 3.1-1.5 1.275-3.475 1.95-5.575 1.975-.375-.075-.775 0-1.075-.075 1.925 1.275 4.425 1.975 6.925 1.975 8.275 0 12.85-6.85 12.85-12.8 0-.175-.05-.4-.05-.575A10.12 10.12 0 0 0 24 6.1Z\"\n\t\t/>\n\t</svg>\n);\n\nexport const SvgTwitter = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tTwitter logo\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path d=\"M2.571 4 1 5.699l9.952 7.926h2.096L23 5.699 21.429 4H2.57Z\" />\n\t\t<path d=\"M1 17.625v-9.5l9.952 7h2.096l9.952-7v9.5l-1.571 1.5H2.57L1 17.625Z\" />\n\t</svg>\n);\n\nexport const SvgEnvelope = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tEmail\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path d=\"M19.09 4.52a9.9 9.9 0 0 0-7.05-2.92c-5.49 0-9.96 4.47-9.96 9.96 0 1.75.46 3.47 1.33 4.98L2 21.69l5.28-1.38c1.45.79 3.09 1.21 4.76 1.21 5.49 0 9.96-4.47 9.96-9.96a9.92 9.92 0 0 0-2.91-7.04Zm-7.05 15.32c-1.49 0-2.95-.4-4.22-1.15l-.3-.18-3.13.82.84-3.05-.2-.31a8.19 8.19 0 0 1-1.26-4.41c0-4.56 3.71-8.27 8.28-8.27 2.21 0 4.29.86 5.85 2.43a8.222 8.222 0 0 1 2.42 5.85c0 4.56-3.72 8.27-8.28 8.27Zm4.54-6.2c-.25-.12-1.47-.73-1.7-.81-.23-.08-.39-.12-.56.12-.17.25-.64.81-.79.97-.14.17-.29.19-.54.06-.25-.12-1.05-.39-2-1.23a7.283 7.283 0 0 1-1.38-1.72c-.15-.25-.02-.38.11-.51.11-.11.25-.29.37-.44.12-.15.17-.25.25-.42.08-.17.04-.31-.02-.44-.06-.12-.56-1.35-.77-1.85-.2-.49-.41-.42-.56-.43-.14-.01-.31-.01-.48-.01-.17 0-.44.06-.66.31-.22.25-.87.85-.87 2.08 0 1.22.89 2.41 1.02 2.57.12.17 1.75 2.68 4.25 3.76.59.26 1.06.41 1.42.52.6.19 1.14.16 1.57.1.48-.07 1.47-.6 1.68-1.18.21-.58.21-1.08.14-1.18-.06-.08-.23-.14-.48-.27Z\" />\n\t</svg>\n);\n\nexport const SvgWhatsApp = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tWhatsApp logo\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path d=\"M7.075 3.952c0 1.085-.785 1.95-2.08 1.95C3.786 5.902 3 5.037 3 3.952 3 2.843 3.81 2 5.05 2c1.242 0 2 .843 2.025 1.952ZM3.101 19.997V7.442H6.95v12.555H3.1ZM9.25 11.447c0-1.565-.05-2.868-.1-4.005h3.34l.179 1.746h.076c.5-.821 1.747-2.024 3.826-2.024 2.531 0 4.43 1.72 4.43 5.417v7.422H17.15V13.04c0-1.618-.558-2.721-1.95-2.721-1.063 0-1.696.743-1.974 1.462-.1.316-.143.646-.128.977v7.239H9.25v-8.55Z\" />\n\t</svg>\n);\n\nexport const SvgLinkedIn = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tLinkedIn logo\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path d=\"M10.577 15.303c-.54 2.831-1.2 5.546-3.153 6.963-.604-4.279.885-7.489 1.576-10.905-1.182-1.984.142-5.977 2.628-4.993 3.059 1.21-2.649 7.376 1.183 8.146 4 .804 5.634-6.941 3.153-9.46-3.584-3.637-10.434-.083-9.592 5.124.205 1.273 1.52 1.66.526 3.417-2.294-.509-2.979-2.318-2.89-4.73.141-3.942 3.547-6.713 6.963-7.096 4.32-.483 8.375 1.586 8.935 5.65.63 4.587-1.95 9.555-6.57 9.198-1.252-.098-1.777-.718-2.759-1.314Z\" />\n\t</svg>\n);\n\nexport const SvgPinterest = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tPinterest logo\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","import { css } from '@emotion/react';\nimport { from } from '@guardian/source-foundations';\nimport {\n\tLinkButton,\n\tSvgEnvelope,\n\tSvgFacebook,\n\tSvgLinkedIn,\n\tSvgMessenger,\n\tSvgPinterest,\n\tSvgTwitter,\n\tSvgWhatsApp,\n} from '@guardian/source-react-components';\nimport type { IconProps } from '@guardian/source-react-components';\nimport type { SharePlatformType } from './types';\n\nconst shareIconList = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\t${from.wide} {\n\t\tflex: auto;\n\t}\n\n\ta {\n\t\tmargin-right: 5px;\n\t}\n`;\n\nconst mobileOnlyShareIconsListItem = css`\n\t${from.phablet} {\n\t\tdisplay: none;\n\t}\n`;\n\ninterface ShareListItemType {\n\tid: SharePlatformType;\n\tIcon: React.ComponentType;\n\turl: string;\n\tuserMessage: string;\n\tmobileOnly: boolean;\n}\n\nexport const SharingIcons = ({\n\tsharingUrls,\n\tdisplayIcons,\n}: {\n\tsharingUrls: {\n\t\t[K in SharePlatformType]?: {\n\t\t\turl: string;\n\t\t\tuserMessage: string;\n\t\t};\n\t};\n\tdisplayIcons: SharePlatformType[];\n}): JSX.Element => {\n\tconst icons: {\n\t\t[K in SharePlatformType]?: React.ComponentType<IconProps>;\n\t} = {\n\t\tfacebook: SvgFacebook,\n\t\ttwitter: SvgTwitter,\n\t\temail: SvgEnvelope,\n\t\twhatsApp: SvgWhatsApp,\n\t\tmessenger: SvgMessenger,\n\t\tlinkedIn: SvgLinkedIn,\n\t\tpinterest: SvgPinterest,\n\t};\n\n\tconst mobileOnlyIcons: SharePlatformType[] = ['whatsApp', 'messenger'];\n\n\tconst shareList = displayIcons.reduce((list: ShareListItemType[], id) => {\n\t\tconst icon = icons[id];\n\t\tconst sharingUrl = sharingUrls[id];\n\n\t\tif (icon && sharingUrl) {\n\t\t\tconst listItem: ShareListItemType = {\n\t\t\t\tid,\n\t\t\t\tIcon: icon,\n\t\t\t\tmobileOnly: mobileOnlyIcons.includes(id),\n\t\t\t\t...sharingUrl,\n\t\t\t};\n\t\t\tlist.push(listItem);\n\t\t}\n\n\t\treturn list;\n\t}, []);\n\n\treturn (\n\t\t<div css={shareIconList}>\n\t\t\t{shareList.map((shareListItem) => {\n\t\t\t\tconst { Icon, id, url, userMessage, mobileOnly } = shareListItem;\n\n\t\t\t\treturn (\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={mobileOnly ? mobileOnlyShareIconsListItem : ''}\n\t\t\t\t\t\tkey={`${id}Share`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<LinkButton\n\t\t\t\t\t\t\thideLabel={true}\n\t\t\t\t\t\t\thref={url}\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\taria-label={userMessage}\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\ticon={<Icon />}\n\t\t\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{userMessage}\n\t\t\t\t\t\t</LinkButton>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport { ArticleSpecial } from '@guardian/libs';\nimport {\n\tbody,\n\tbrand,\n\tneutral,\n\tspace,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { Button, Radio, RadioGroup } from '@guardian/source-react-components';\nimport { Fragment, useEffect, useState } from 'react';\nimport {\n\tCorrectSelectedAnswer,\n\tIncorrectAnswer,\n\tNonSelectedCorrectAnswer,\n\tradioButtonWrapperStyles,\n\tUnselectedAnswer,\n} from './Answers';\nimport { SharingIcons } from './SharingIcons';\nimport type { SharingUrlsType } from './types';\n\ntype AnswerType = {\n\tid: string;\n\ttext: string;\n\trevealText?: string;\n\tisCorrect: boolean;\n\tanswerBuckets: string[];\n};\n\ntype QuestionType = {\n\tid: string;\n\ttext: string;\n\tanswers: AnswerType[];\n\timageUrl?: string;\n\timageAlt?: string;\n};\n\ntype QuizAtomType = {\n\tid: string;\n\tquestions: QuestionType[];\n\tresultGroups: ResultGroupsType[];\n\tsharingUrls: SharingUrlsType;\n\ttheme: ArticleTheme;\n};\n\ntype ResultGroupsType = {\n\ttitle: string;\n\tshareText: string;\n\tminScore: number;\n\tid: string;\n};\n\ntype QuizSelectionType = Record<string, AnswerType>;\n\nconst fieldsetStyle = css`\n\tmargin-bottom: 12px;\n\tborder: 0px;\n\tpadding: 0px;\n`;\n\nexport const KnowledgeQuizAtom = ({\n\tid,\n\tquestions,\n\tresultGroups,\n\tsharingUrls,\n\ttheme,\n}: QuizAtomType): JSX.Element => {\n\tconst [quizSelection, setQuizSelection] = useState<QuizSelectionType>({});\n\n\tconst haveAllQuestionsBeenAnswered =\n\t\tObject.keys(quizSelection).length === questions.length;\n\n\treturn (\n\t\t<form data-atom-id={id} data-atom-type=\"knowledgequiz\">\n\t\t\t{haveAllQuestionsBeenAnswered && (\n\t\t\t\t<div data-testid=\"quiz-results-block-top\">\n\t\t\t\t\t<Result\n\t\t\t\t\t\tquizSelection={quizSelection}\n\t\t\t\t\t\tresultGroups={resultGroups}\n\t\t\t\t\t\tsharingUrls={sharingUrls}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<ol data-ignore=\"global-ol-styling\">\n\t\t\t\t{questions.map((question, idx) => (\n\t\t\t\t\t<Question\n\t\t\t\t\t\tkey={question.id}\n\t\t\t\t\t\tid={question.id}\n\t\t\t\t\t\tnumber={idx + 1}\n\t\t\t\t\t\ttext={question.text}\n\t\t\t\t\t\timageUrl={question.imageUrl}\n\t\t\t\t\t\timageAlt={question.imageAlt}\n\t\t\t\t\t\tanswers={question.answers}\n\t\t\t\t\t\tquizSelection={quizSelection}\n\t\t\t\t\t\tsetQuizSelection={setQuizSelection}\n\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ol>\n\t\t\t{haveAllQuestionsBeenAnswered && (\n\t\t\t\t<div data-testid=\"quiz-results-block-top\">\n\t\t\t\t\t<Result\n\t\t\t\t\t\tquizSelection={quizSelection}\n\t\t\t\t\t\tresultGroups={resultGroups}\n\t\t\t\t\t\tsharingUrls={sharingUrls}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</form>\n\t);\n};\n\nexport const Question = ({\n\tid,\n\ttext,\n\timageUrl,\n\timageAlt,\n\tanswers,\n\tnumber,\n\tquizSelection,\n\tsetQuizSelection,\n\ttheme,\n}: QuestionType & {\n\tnumber: number;\n\tquizSelection: QuizSelectionType;\n\tsetQuizSelection: (quizSelection: QuizSelectionType) => void;\n\ttheme: ArticleTheme;\n}): JSX.Element => {\n\tconst [selectedAnswerId, setSelectedAnswerId] = useState<\n\t\tstring | undefined\n\t>();\n\tconst [hasSubmitted, setHasSubmitted] = useState<boolean>(false);\n\n\tuseEffect(() => {\n\t\tif (selectedAnswerId && hasSubmitted) {\n\t\t\tconst selectedAnswer = answers.find(\n\t\t\t\t(answer) => answer.id === selectedAnswerId,\n\t\t\t);\n\t\t\tselectedAnswer &&\n\t\t\t\tsetQuizSelection({\n\t\t\t\t\t...quizSelection,\n\t\t\t\t\t[id]: selectedAnswer,\n\t\t\t\t});\n\t\t}\n\t}, [selectedAnswerId, setQuizSelection, hasSubmitted, answers]);\n\n\treturn (\n\t\t<li\n\t\t\tcss={css`\n\t\t\t\t${theme === ArticleSpecial.Labs ? textSans.medium() : body.medium()};\n\t\t\t`}\n\t\t>\n\t\t\t<fieldset css={fieldsetStyle}>\n\t\t\t\t<legend\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-bottom: 12px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tpadding-right: 12px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${number}.`}\n\t\t\t\t\t</span>\n\t\t\t\t\t{text}\n\t\t\t\t</legend>\n\t\t\t\t{imageUrl && (\n\t\t\t\t\t<img\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t`}\n\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\talt={imageAlt ?? ''}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<Answers\n\t\t\t\t\tid={id}\n\t\t\t\t\tanswers={answers}\n\t\t\t\t\thasSubmitted={hasSubmitted}\n\t\t\t\t\tselectedAnswerId={selectedAnswerId}\n\t\t\t\t\tsetSelectedAnswerId={setSelectedAnswerId}\n\t\t\t\t\ttheme={theme}\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: row;\n\t\t\t\t\t\tmargin-bottom: 8px;\n\t\t\t\t\t\tbutton {\n\t\t\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tdata-testid={`submit-question-${id}`}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetHasSubmitted(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonKeyDown={(e: React.KeyboardEvent<HTMLButtonElement>) => {\n\t\t\t\t\t\t\tconst spaceKey = 32;\n\t\t\t\t\t\t\tconst enterKey = 13;\n\t\t\t\t\t\t\tif (e.keyCode === spaceKey ?? e.keyCode === enterKey) {\n\t\t\t\t\t\t\t\tsetHasSubmitted(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tReveal\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t</li>\n\t);\n};\n\nconst Answers = ({\n\tanswers,\n\tid: questionId,\n\thasSubmitted,\n\tselectedAnswerId,\n\tsetSelectedAnswerId,\n\ttheme,\n}: {\n\tanswers: AnswerType[];\n\tid: string;\n\thasSubmitted: boolean;\n\tselectedAnswerId?: string;\n\tsetSelectedAnswerId: (selectedAnswerId: string) => void;\n\ttheme: ArticleTheme;\n}) => {\n\tif (hasSubmitted) {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{answers.map((answer) => {\n\t\t\t\t\tconst isSelected = selectedAnswerId === answer.id;\n\n\t\t\t\t\tif (isSelected) {\n\t\t\t\t\t\tif (answer.isCorrect) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<CorrectSelectedAnswer\n\t\t\t\t\t\t\t\t\tkey={answer.id}\n\t\t\t\t\t\t\t\t\tid={answer.id}\n\t\t\t\t\t\t\t\t\tanswerText={answer.text}\n\t\t\t\t\t\t\t\t\texplainerText={answer.revealText ?? ''}\n\t\t\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!answer.isCorrect) {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<IncorrectAnswer\n\t\t\t\t\t\t\t\t\tkey={answer.id}\n\t\t\t\t\t\t\t\t\tid={answer.id}\n\t\t\t\t\t\t\t\t\tanswerText={answer.text}\n\t\t\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (answer.isCorrect) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<NonSelectedCorrectAnswer\n\t\t\t\t\t\t\t\tkey={answer.id}\n\t\t\t\t\t\t\t\tid={answer.id}\n\t\t\t\t\t\t\t\tanswerText={answer.text}\n\t\t\t\t\t\t\t\texplainerText={answer.revealText ?? ''}\n\t\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<UnselectedAnswer\n\t\t\t\t\t\t\tkey={answer.id}\n\t\t\t\t\t\t\tid={answer.id}\n\t\t\t\t\t\t\tanswerText={answer.text}\n\t\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\treturn (\n\t\t<div css={radioButtonWrapperStyles(theme)}>\n\t\t\t<RadioGroup name={questionId}>\n\t\t\t\t{answers.map((answer) => (\n\t\t\t\t\t<Radio\n\t\t\t\t\t\tkey={answer.id}\n\t\t\t\t\t\tvalue={answer.text}\n\t\t\t\t\t\tdata-testid={answer.id}\n\t\t\t\t\t\tdata-answer-type={\n\t\t\t\t\t\t\tselectedAnswerId === answer.id\n\t\t\t\t\t\t\t\t? 'selected-enabled-answer'\n\t\t\t\t\t\t\t\t: 'unselected-enabled-answer'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tname={questionId}\n\t\t\t\t\t\tlabel={answer.text}\n\t\t\t\t\t\tonChange={() => setSelectedAnswerId(answer.id)}\n\t\t\t\t\t\tchecked={selectedAnswerId === answer.id}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</RadioGroup>\n\t\t</div>\n\t);\n};\n\nconst resultWrapperStyles = css`\n\tbackground-color: ${neutral[93]};\n\tmargin-top: ${space[3]}px;\n\tmargin-bottom: ${space[3]}px;\n\tpadding: ${space[2]}px;\n`;\n\nconst resultDescriptionStyles = css`\n\t${textSans.medium()}\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst resultsNumberStyles = css`\n\t${textSans.xxxlarge({ fontWeight: 'bold' })}\n\tcolor: ${brand[400]};\n`;\n\nconst resultHeaderStyles = css`\n\t${textSans.medium({ fontWeight: 'bold' })}\n\tcolor: ${neutral[20]};\n\tpadding-bottom: ${space[1]}px;\n`;\n\nexport const Result = ({\n\tquizSelection,\n\tresultGroups,\n\tsharingUrls,\n}: {\n\tquizSelection: Record<string, AnswerType>;\n\tresultGroups: ResultGroupsType[];\n\tsharingUrls: SharingUrlsType;\n}): JSX.Element => {\n\tconst totalNumberOfQuestions = Object.keys(quizSelection).length;\n\tconst numberOfCorrectAnswers = Object.keys(quizSelection).filter(\n\t\t(questionId) => quizSelection[questionId]?.isCorrect,\n\t).length;\n\tconst totalResultGroups = resultGroups.length;\n\tlet bestResultGroup: ResultGroupsType | undefined;\n\tconst resultBrackets = [];\n\tlet bracketIndex = 0;\n\n\t// Sort the results by lowest score first\n\tresultGroups.sort(function (a, b) {\n\t\treturn a.minScore - b.minScore;\n\t});\n\n\t// If there is a result group for each question return the matching score\n\tif (totalNumberOfQuestions === totalResultGroups) {\n\t\tresultGroups.forEach((resultGroup) => {\n\t\t\tif (numberOfCorrectAnswers === resultGroup.minScore) {\n\t\t\t\tbestResultGroup = resultGroup;\n\t\t\t}\n\t\t});\n\t} else {\n\t\t// If there are less result groups than questions then answers are being put into brackets e.g. 1-5 correct, 6-10 correct\n\t\t// Find the score ranges\n\t\t// Decide which bracket the score is in\n\t\tfor (let i = 0; i < resultGroups.length; i++) {\n\t\t\tconst resultGroup = resultGroups[i];\n\n\t\t\tif (resultGroup) {\n\t\t\t\tresultBrackets[i] = resultGroup.minScore;\n\t\t\t}\n\t\t}\n\n\t\t// The regular sort function doesn't sort numbers, it works alphabetically\n\t\tresultBrackets.sort(function (a, b) {\n\t\t\treturn a - b;\n\t\t});\n\n\t\tfor (let i = 0; i < resultBrackets.length; i++) {\n\t\t\tconst resultBracket = resultBrackets[i];\n\n\t\t\tif (resultBracket && numberOfCorrectAnswers >= resultBracket) {\n\t\t\t\tbracketIndex = i;\n\t\t\t}\n\t\t}\n\t}\n\tbestResultGroup = resultGroups[bracketIndex];\n\n\treturn (\n\t\t<div css={resultWrapperStyles}>\n\t\t\t<div css={resultDescriptionStyles}>\n\t\t\t\t<span>You got...</span>\n\t\t\t\t<span\n\t\t\t\t\tcss={resultsNumberStyles}\n\t\t\t\t>{`${numberOfCorrectAnswers}/${totalNumberOfQuestions}`}</span>\n\t\t\t\t{bestResultGroup && <span>{bestResultGroup.title}</span>}\n\t\t\t</div>\n\n\t\t\t<hr />\n\t\t\t<div css={resultHeaderStyles}>Challenge your friends</div>\n\t\t\t<SharingIcons\n\t\t\t\tsharingUrls={sharingUrls}\n\t\t\t\tdisplayIcons={[\n\t\t\t\t\t'facebook',\n\t\t\t\t\t'twitter',\n\t\t\t\t\t'email',\n\t\t\t\t\t'whatsApp',\n\t\t\t\t\t'messenger',\n\t\t\t\t\t'linkedIn',\n\t\t\t\t\t'pinterest',\n\t\t\t\t]}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport { ArticleSpecial } from '@guardian/libs';\nimport {\n\tbody,\n\tneutral,\n\tspace,\n\ttext,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { Button, Radio, RadioGroup } from '@guardian/source-react-components';\nimport type { KeyboardEvent, MouseEvent } from 'react';\nimport { memo, useEffect, useState } from 'react';\nimport { radioButtonWrapperStyles } from './Answers';\nimport { SharingIcons } from './SharingIcons';\nimport type { SharingUrlsType } from './types';\n\ntype ResultsBucket = {\n\tid: string;\n\ttitle: string;\n\tdescription: string;\n};\n\ntype AnswerType = {\n\tid: string;\n\ttext: string;\n\trevealText?: string;\n\tisCorrect: boolean;\n\tanswerBuckets: string[];\n};\n\ntype QuestionType = {\n\tid: string;\n\ttext: string;\n\tanswers: AnswerType[];\n\timageUrl?: string;\n\timageAlt?: string;\n};\n\ntype QuizAtomType = {\n\tid: string;\n\tquestions: QuestionType[];\n\tresultBuckets: ResultsBucket[];\n\tsharingUrls: SharingUrlsType;\n\ttheme: ArticleTheme;\n};\n\nconst answersWrapperStyle = (theme: ArticleTheme) => css`\n\tmargin-bottom: 12px;\n\tborder: 0px;\n\tpadding: 0px;\n\t${theme === ArticleSpecial.Labs ? textSans.medium() : body.medium()};\n`;\n\nexport const findMostReferredToBucketId = ({\n\tselectedGlobalAnswers,\n\tquestions,\n}: {\n\tselectedGlobalAnswers: Record<string, string>;\n\tquestions: QuestionType[];\n}): string => {\n\tconst bucketCounter: Record<string, number> = {};\n\n\tconst answersFromQuestion: AnswerType[] = Object.keys(selectedGlobalAnswers)\n\t\t.map((questionId: string): AnswerType | undefined => {\n\t\t\tconst selectedQuestion = questions.find(\n\t\t\t\t(question) => question.id === questionId,\n\t\t\t);\n\t\t\tconst answerId = selectedGlobalAnswers[questionId];\n\t\t\tconst selectedAnswer = selectedQuestion?.answers.find(\n\t\t\t\t(answer) => answer.id === answerId,\n\t\t\t);\n\t\t\treturn selectedAnswer;\n\t\t})\n\t\t.filter(\n\t\t\t(selectedAnswer): boolean => selectedAnswer !== undefined,\n\t\t) as AnswerType[];\n\n\tanswersFromQuestion.forEach((answerFromQuestion) => {\n\t\tanswerFromQuestion.answerBuckets.forEach((answerBucket) => {\n\t\t\tif (answerBucket in bucketCounter) {\n\t\t\t\tbucketCounter[answerBucket] += 1;\n\t\t\t} else {\n\t\t\t\tbucketCounter[answerBucket] = 1;\n\t\t\t}\n\t\t});\n\t});\n\n\tlet bucketIdWithHighestCount: string | undefined;\n\tObject.keys(bucketCounter).forEach((bucketId) => {\n\t\tif (!bucketIdWithHighestCount) {\n\t\t\tbucketIdWithHighestCount = bucketId;\n\t\t\treturn;\n\t\t}\n\t\tconst thisBucket = bucketCounter[bucketId];\n\t\tconst currentHighestBucket = bucketCounter[bucketIdWithHighestCount];\n\n\t\tif (thisBucket && currentHighestBucket) {\n\t\t\tbucketIdWithHighestCount =\n\t\t\t\tthisBucket > currentHighestBucket ? bucketId : bucketIdWithHighestCount;\n\t\t}\n\t});\n\n\treturn bucketIdWithHighestCount as string;\n};\n\nexport const PersonalityQuizAtom = ({\n\tid,\n\tquestions,\n\tresultBuckets,\n\tsharingUrls,\n\ttheme,\n}: QuizAtomType): JSX.Element => {\n\tconst [selectedGlobalAnswers, setSelectedGlobalAnswers] = useState<\n\t\tRecord<string, string>\n\t>({});\n\n\tconst [hasSubmittedAnswers, setHasSubmittedAnswers] =\n\t\tuseState<boolean>(false);\n\tconst [hasMissingAnswers, setHasMissingAnswers] = useState<boolean>(false);\n\n\tconst [topSelectedResult, setTopSelectedResult] =\n\t\tuseState<ResultsBucket | null>();\n\n\tconst onSubmit = (e: MouseEvent | KeyboardEvent) => {\n\t\te.preventDefault();\n\t\t// check all answers have been selected\n\t\tconst missingAnswers = questions.some((question) =>\n\t\t\tquestion.id in selectedGlobalAnswers ? false : true,\n\t\t);\n\n\t\tif (missingAnswers) {\n\t\t\tsetHasMissingAnswers(true);\n\t\t} else {\n\t\t\tsetHasSubmittedAnswers(true);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tif (hasSubmittedAnswers && Object.keys(selectedGlobalAnswers).length) {\n\t\t\tconst bucketIdWithHighestCount = findMostReferredToBucketId({\n\t\t\t\tselectedGlobalAnswers,\n\t\t\t\tquestions,\n\t\t\t});\n\t\t\tsetTopSelectedResult(\n\t\t\t\tresultBuckets.find(\n\t\t\t\t\t(resultBucket) => resultBucket.id === bucketIdWithHighestCount,\n\t\t\t\t),\n\t\t\t);\n\t\t} else {\n\t\t\tsetTopSelectedResult(null);\n\t\t}\n\t}, [\n\t\thasSubmittedAnswers,\n\t\tselectedGlobalAnswers,\n\t\tsetTopSelectedResult,\n\t\tresultBuckets,\n\t]);\n\n\treturn (\n\t\t<form data-atom-id={id} data-atom-type=\"personalityquiz\">\n\t\t\t{hasSubmittedAnswers && topSelectedResult && (\n\t\t\t\t<div data-testid=\"quiz-results-block-top\">\n\t\t\t\t\t<Result resultBuckets={topSelectedResult} sharingUrls={sharingUrls} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<ol>\n\t\t\t\t{questions.map((question, idx) => (\n\t\t\t\t\t<PersonalityQuizAnswers\n\t\t\t\t\t\tkey={question.id}\n\t\t\t\t\t\tid={question.id}\n\t\t\t\t\t\tquestionNumber={idx + 1}\n\t\t\t\t\t\ttext={question.text}\n\t\t\t\t\t\timageUrl={question.imageUrl}\n\t\t\t\t\t\timageAlt={question.imageAlt}\n\t\t\t\t\t\tanswers={question.answers}\n\t\t\t\t\t\tupdateSelectedAnswer={(selectedAnswerId: string) => {\n\t\t\t\t\t\t\tsetHasMissingAnswers(false);\n\t\t\t\t\t\t\tsetSelectedGlobalAnswers({\n\t\t\t\t\t\t\t\t...selectedGlobalAnswers,\n\t\t\t\t\t\t\t\t[question.id]: selectedAnswerId,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tgloballySelectedAnswer={\n\t\t\t\t\t\t\tquestion.id in selectedGlobalAnswers\n\t\t\t\t\t\t\t\t? selectedGlobalAnswers[question.id]\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\thasSubmittedAnswers={hasSubmittedAnswers}\n\t\t\t\t\t\ttheme={theme}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ol>\n\t\t\t{hasMissingAnswers && <MissingAnswers />}\n\t\t\t{hasSubmittedAnswers && topSelectedResult && (\n\t\t\t\t<div data-testid=\"quiz-results-block-bottom\">\n\t\t\t\t\t<Result resultBuckets={topSelectedResult} sharingUrls={sharingUrls} />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\tbutton {\n\t\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tonClick={onSubmit}\n\t\t\t\t\tonKeyDown={(e: React.KeyboardEvent<HTMLButtonElement>) => {\n\t\t\t\t\t\tconst spaceKey = 32;\n\t\t\t\t\t\tconst enterKey = 13;\n\t\t\t\t\t\tif (e.keyCode === spaceKey ?? e.keyCode === enterKey) {\n\t\t\t\t\t\t\tonSubmit(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tdata-testid=\"submit-quiz\"\n\t\t\t\t>\n\t\t\t\t\tSubmit\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tpriority=\"secondary\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetSelectedGlobalAnswers({});\n\t\t\t\t\t\tsetHasSubmittedAnswers(false);\n\t\t\t\t\t\tsetTopSelectedResult(null);\n\t\t\t\t\t}}\n\t\t\t\t\tonKeyDown={(e: React.KeyboardEvent<HTMLButtonElement>) => {\n\t\t\t\t\t\tconst spaceKey = 32;\n\t\t\t\t\t\tconst enterKey = 13;\n\t\t\t\t\t\tif (e.keyCode === spaceKey ?? e.keyCode === enterKey) {\n\t\t\t\t\t\t\tsetSelectedGlobalAnswers({});\n\t\t\t\t\t\t\tsetHasSubmittedAnswers(false);\n\t\t\t\t\t\t\tsetTopSelectedResult(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tdata-testid=\"reset-quiz\"\n\t\t\t\t>\n\t\t\t\t\tReset\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n\ntype PersonalityQuizAnswersProps = {\n\tid: string;\n\tquestionNumber: number;\n\ttext: string;\n\timageUrl?: string;\n\timageAlt?: string;\n\tanswers: AnswerType[];\n\tupdateSelectedAnswer: (selectedAnswerId: string) => void;\n\tgloballySelectedAnswer?: string;\n\thasSubmittedAnswers: boolean;\n\ttheme: ArticleTheme;\n};\n\nconst PersonalityQuizAnswers = ({\n\tid: questionId,\n\tquestionNumber,\n\ttext,\n\timageUrl,\n\timageAlt,\n\tanswers,\n\tupdateSelectedAnswer,\n\tgloballySelectedAnswer,\n\thasSubmittedAnswers,\n\ttheme,\n}: PersonalityQuizAnswersProps) => {\n\t// use local state to avoid re-renders of AnswersGroup from updates due to: updateSelectedAnswer & selectedAnswer\n\tconst [selectedAnswer, setSelectedAnswers] = useState<string | undefined>();\n\n\tuseEffect(() => {\n\t\tif (selectedAnswer && selectedAnswer !== globallySelectedAnswer) {\n\t\t\tupdateSelectedAnswer(selectedAnswer);\n\t\t}\n\t}, [updateSelectedAnswer, selectedAnswer]);\n\n\t// in order to reset selection\n\tuseEffect(() => {\n\t\tif (!globallySelectedAnswer) setSelectedAnswers(undefined);\n\t}, [globallySelectedAnswer, setSelectedAnswers]);\n\n\treturn (\n\t\t<li css={answersWrapperStyle(theme)}>\n\t\t\t<fieldset>\n\t\t\t\t<legend\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-bottom: 12px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tpadding-right: 12px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${questionNumber}.`}\n\t\t\t\t\t</span>\n\t\t\t\t\t{text}\n\t\t\t\t</legend>\n\t\t\t\t{imageUrl && (\n\t\t\t\t\t<img\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t`}\n\t\t\t\t\t\tsrc={imageUrl}\n\t\t\t\t\t\talt={imageAlt ?? ''}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<AnswersGroup\n\t\t\t\t\thasSubmittedAnswers={hasSubmittedAnswers}\n\t\t\t\t\tquestionId={questionId}\n\t\t\t\t\tanswers={answers}\n\t\t\t\t\tselectedAnswer={selectedAnswer}\n\t\t\t\t\tsetSelectedAnswers={setSelectedAnswers}\n\t\t\t\t\ttheme={theme}\n\t\t\t\t/>\n\t\t\t</fieldset>\n\t\t</li>\n\t);\n};\n\ntype AnswersGroupProp = {\n\thasSubmittedAnswers: boolean;\n\tquestionId: string;\n\tanswers: AnswerType[];\n\tselectedAnswer: string | undefined;\n\tsetSelectedAnswers: (selectedAnswerId: string) => void;\n\ttheme: ArticleTheme;\n};\n\nconst AnswersGroup = memo(\n\t({\n\t\thasSubmittedAnswers,\n\t\tquestionId,\n\t\tanswers,\n\t\tselectedAnswer,\n\t\tsetSelectedAnswers,\n\t\ttheme,\n\t}: AnswersGroupProp) => (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\tradioButtonWrapperStyles(theme),\n\t\t\t\tcss`\n\t\t\t\t\tlabel {\n\t\t\t\t\t\t:hover {\n\t\t\t\t\t\t\tbackground-color: ${hasSubmittedAnswers\n\t\t\t\t\t\t\t\t? neutral[97]\n\t\t\t\t\t\t\t\t: neutral[86]};\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* TODO: apply same styles on focus (requires source update) */\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t]}\n\t\t>\n\t\t\t<RadioGroup name={questionId}>\n\t\t\t\t{answers.map((answer) => (\n\t\t\t\t\t<Radio\n\t\t\t\t\t\tkey={answer.id}\n\t\t\t\t\t\tvalue={answer.text}\n\t\t\t\t\t\tlabel={answer.text}\n\t\t\t\t\t\tdata-testid={answer.id}\n\t\t\t\t\t\tdata-answer-type={\n\t\t\t\t\t\t\tselectedAnswer === answer.id\n\t\t\t\t\t\t\t\t? 'selected-enabled-answer'\n\t\t\t\t\t\t\t\t: 'unselected-enabled-answer'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdisabled={hasSubmittedAnswers}\n\t\t\t\t\t\tonChange={() => setSelectedAnswers(answer.id)}\n\t\t\t\t\t\tchecked={selectedAnswer === answer.id}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</RadioGroup>\n\t\t</div>\n\t),\n);\nAnswersGroup.displayName = 'AnswersGroup';\n\nconst missingAnswersStyles = css`\n\t${textSans.medium({ fontWeight: 'bold' })}\n\tpadding-bottom: ${space[3]}px;\n\tcolor: ${text.error};\n`;\n\nexport const MissingAnswers = (): JSX.Element => (\n\t<div css={missingAnswersStyles}>You have not answered all the questions.</div>\n);\n\nconst resultWrapperStyles = css`\n\tbackground-color: ${neutral[93]};\n\tmargin-top: ${space[3]}px;\n\tmargin-bottom: ${space[3]}px;\n\tpadding: ${space[2]}px;\n`;\n\nconst resultHeaderStyles = css`\n\t${textSans.medium({ fontWeight: 'bold' })}\n\tcolor: ${neutral[20]};\n\tpadding-bottom: ${space[1]}px;\n`;\n\nconst resultDescriptionStyles = css`\n\t${textSans.medium()}\n\tcolor: ${neutral[46]};\n`;\n\nexport const Result = ({\n\tresultBuckets,\n\tsharingUrls,\n}: {\n\tresultBuckets: ResultsBucket;\n\tsharingUrls: SharingUrlsType;\n}): JSX.Element => (\n\t<div css={resultWrapperStyles}>\n\t\t<div css={resultHeaderStyles}>{resultBuckets.title}</div>\n\t\t<div css={resultDescriptionStyles}>{resultBuckets.description}</div>\n\t\t<hr />\n\t\t<div css={resultHeaderStyles}>Challenge your friends</div>\n\t\t<SharingIcons\n\t\t\tsharingUrls={sharingUrls}\n\t\t\tdisplayIcons={[\n\t\t\t\t'facebook',\n\t\t\t\t'twitter',\n\t\t\t\t'email',\n\t\t\t\t'whatsApp',\n\t\t\t\t'messenger',\n\t\t\t\t'linkedIn',\n\t\t\t\t'pinterest',\n\t\t\t]}\n\t\t/>\n\t</div>\n);\n","import { loadScript, log } from '@guardian/libs';\n\ndeclare global {\n\tinterface Window {\n\t\tonYouTubeIframeAPIReady: () => void;\n\t}\n}\n\nlet _scriptsPromise: Promise<Array<Event | undefined>>;\nlet _youtubeAPIReadyPromise: Promise<typeof YT>;\n\nconst loadScripts = (enableIma = false) => {\n\t/**\n\t * Since loadScripts can be called multiple times on the same page for pages with more than one video,\n\t * only attempt to load the scripts if this is the first call and return the same promise otherwise.\n\t */\n\tif (_scriptsPromise) {\n\t\treturn _scriptsPromise;\n\t}\n\tlet scripts;\n\tif (enableIma) {\n\t\tlog('dotcom', 'loadYT: loading YT & IMA script');\n\t\tscripts = [\n\t\t\t/**\n\t\t\t * The IMA version of the iframe api script can only be fetched from\n\t\t\t * a domain that is on YouTube's allow list (theguardian.com, thegulocal.com, gutools.co.uk).\n\t\t\t * If the request is made from a domain that isn't on the list (e.g. localhost),\n\t\t\t * the standard, non-IMA version will be returned and IMA functionality will fail silently.\n\t\t\t */\n\t\t\tloadScript('https://www.youtube.com/iframe_api?ima=1'),\n\t\t\tloadScript('//imasdk.googleapis.com/js/sdkloader/ima3.js'),\n\t\t];\n\t} else {\n\t\tlog('dotcom', 'loadYT: loading YT script');\n\t\tscripts = [loadScript('https://www.youtube.com/iframe_api')];\n\t}\n\t_scriptsPromise = Promise.all(scripts);\n\treturn _scriptsPromise;\n};\n\n/**\n * The YouTube IFrame API will call `window.onYouTubeIframeAPIReady`\n * when it has downloaded and is ready\n */\nconst youtubeAPIReady = () => {\n\t/**\n\t * Since youtubeAPIReady can be called multiple times on the same page for pages with more than one video,\n\t * only overwrite window.onYouTubeIframeAPIReady if this is the first call and return the same promise otherwise.\n\t */\n\tif (_youtubeAPIReadyPromise) {\n\t\treturn _youtubeAPIReadyPromise;\n\t}\n\n\t_youtubeAPIReadyPromise = new Promise((resolve) => {\n\t\twindow.onYouTubeIframeAPIReady = () => {\n\t\t\tlog('dotcom', 'loadYT: resolving YTAPI promise');\n\t\t\tresolve(window.YT);\n\t\t};\n\t});\n\treturn _youtubeAPIReadyPromise;\n};\n\nconst loadYouTubeAPI = (enableIma = false): Promise<typeof YT> => {\n\t/* If another part of the code has already loaded youtube api, return early. */\n\tif (window?.YT?.Player instanceof Function) {\n\t\tlog('dotcom', 'loadYT: returning window.YT');\n\t\treturn Promise.resolve(window.YT);\n\t}\n\n\t/* Create youtubeAPIReady promise before loading scripts so that\n\t * window.onYouTubeIframeAPIReady is guaranteed to be defined\n\t * by the time the youtube script calls it.\n\t */\n\tconst youtubeAPIReadyPromise = youtubeAPIReady();\n\n\treturn loadScripts(enableIma).then(() => {\n\t\treturn youtubeAPIReadyPromise;\n\t});\n};\n\nexport { loadYouTubeAPI };\n","import { Body } from './expandableAtom/Body';\nimport { Container } from './expandableAtom/Container';\nimport { Footer } from './expandableAtom/Footer';\nimport { submitComponentEvent } from './lib/ophan';\nimport type { ProfileAtomType } from './types';\n\nexport const ProfileAtom = ({\n\tid,\n\ttitle,\n\timage,\n\thtml,\n\tcredit,\n\tpillar,\n\texpandForStorybook,\n\tlikeHandler,\n\tdislikeHandler,\n\texpandCallback,\n}: ProfileAtomType): JSX.Element => {\n\treturn (\n\t\t<Container\n\t\t\tid={id}\n\t\t\ttitle={title}\n\t\t\tpillar={pillar}\n\t\t\tatomType=\"profile\"\n\t\t\tatomTypeTitle=\"Profile\"\n\t\t\texpandForStorybook={expandForStorybook}\n\t\t\texpandCallback={\n\t\t\t\texpandCallback ??\n\t\t\t\t(() =>\n\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\tcomponentType: 'PROFILE_ATOM',\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t\taction: 'EXPAND',\n\t\t\t\t\t}))\n\t\t\t}\n\t\t>\n\t\t\t<Body html={html} image={image} credit={credit} pillar={pillar} />\n\t\t\t<Footer\n\t\t\t\tpillar={pillar}\n\t\t\t\tdislikeHandler={\n\t\t\t\t\tdislikeHandler ??\n\t\t\t\t\t(() =>\n\t\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\t\tcomponentType: 'PROFILE_ATOM',\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\taction: 'DISLIKE',\n\t\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t\tlikeHandler={\n\t\t\t\t\tlikeHandler ??\n\t\t\t\t\t(() =>\n\t\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\t\tcomponentType: 'PROFILE_ATOM',\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\taction: 'LIKE',\n\t\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t></Footer>\n\t\t</Container>\n\t);\n};\n","import { Body } from './expandableAtom/Body';\nimport { Container } from './expandableAtom/Container';\nimport { Footer } from './expandableAtom/Footer';\nimport { submitComponentEvent } from './lib/ophan';\nimport type { QandaAtomType } from './types';\n\nexport const QandaAtom = ({\n\tid,\n\ttitle,\n\timage,\n\thtml,\n\tcredit,\n\tpillar,\n\texpandForStorybook,\n\tlikeHandler,\n\tdislikeHandler,\n\texpandCallback,\n}: QandaAtomType): JSX.Element => (\n\t<Container\n\t\tid={id}\n\t\ttitle={title}\n\t\tatomType=\"qanda\"\n\t\tatomTypeTitle=\"Q&A\"\n\t\tpillar={pillar}\n\t\texpandForStorybook={expandForStorybook}\n\t\texpandCallback={\n\t\t\texpandCallback ??\n\t\t\t(() =>\n\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\tcomponent: {\n\t\t\t\t\t\tcomponentType: 'QANDA_ATOM',\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t},\n\t\t\t\t\taction: 'EXPAND',\n\t\t\t\t}))\n\t\t}\n\t>\n\t\t<Body html={html} image={image} credit={credit} pillar={pillar} />\n\t\t<Footer\n\t\t\tpillar={pillar}\n\t\t\tdislikeHandler={\n\t\t\t\tdislikeHandler ??\n\t\t\t\t(() =>\n\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\tcomponentType: 'QANDA_ATOM',\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t\taction: 'DISLIKE',\n\t\t\t\t\t}))\n\t\t\t}\n\t\t\tlikeHandler={\n\t\t\t\tlikeHandler ??\n\t\t\t\t(() =>\n\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\tcomponentType: 'QANDA_ATOM',\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t\taction: 'LIKE',\n\t\t\t\t\t}))\n\t\t\t}\n\t\t></Footer>\n\t</Container>\n);\n","import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport {\n\tbody,\n\tbrandAlt,\n\tneutral,\n\tremSpace,\n\tspace,\n} from '@guardian/source-foundations';\nimport { Body } from './expandableAtom/Body';\nimport { Container } from './expandableAtom/Container';\nimport { Footer } from './expandableAtom/Footer';\nimport { submitComponentEvent } from './lib/ophan';\nimport type { TimelineAtomType, TimelineEvent } from './types';\n\nconst Snippet = css`\n\t:not(:last-child) {\n\t\tborder-left: 0.0625rem solid ${neutral[60]};\n\t\tpadding-bottom: ${remSpace[4]};\n\t}\n\tpadding-left: ${space[4]}px;\n\tmargin-left: ${space[2]}px;\n`;\n\nconst EventTitle = css`\n\t${body.medium({\n\t\tlineHeight: 'tight',\n\t\tfontWeight: 'bold',\n\t})};\n`;\n\nconst EventDateBullet = css`\n\tcontent: '';\n\twidth: ${space[4]}px;\n\theight: ${space[4]}px;\n\tborder-radius: 100%;\n\tfloat: left;\n\tposition: relative;\n\tleft: -24px;\n\tbackground-color: #121212;\n`;\n\nconst EventDate = css`\n\t::before {\n\t\t${EventDateBullet}\n\t}\n\tmargin-left: -16px;\n\tbackground: ${brandAlt[400]};\n\t${body.medium({\n\t\tlineHeight: 'tight',\n\t\tfontWeight: 'bold',\n\t})};\n`;\n\nconst EventToDate = css`\n\tbackground: ${brandAlt[400]};\n\t${body.medium({\n\t\tlineHeight: 'tight',\n\t\tfontWeight: 'bold',\n\t})};\n`;\n\nconst TimelineContents = ({\n\tevents,\n\tpillar,\n}: {\n\tevents: TimelineEvent[];\n\tpillar: ArticleTheme;\n}): JSX.Element => {\n\treturn (\n\t\t<div>\n\t\t\t{events.map((event, index) => {\n\t\t\t\tconst time = new Date(event.unixDate).toISOString();\n\t\t\t\tconst toTime = event.toUnixDate\n\t\t\t\t\t? new Date(event.toUnixDate).toISOString()\n\t\t\t\t\t: '';\n\t\t\t\treturn (\n\t\t\t\t\t<div key={index} data-type=\"event-snippet\" css={Snippet}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<time dateTime={time} css={EventDate}>\n\t\t\t\t\t\t\t\t{event.date}\n\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t\t{event.toDate && (\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t-{' '}\n\t\t\t\t\t\t\t\t\t<time dateTime={toTime} css={EventToDate}>\n\t\t\t\t\t\t\t\t\t\t{event.toDate}\n\t\t\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{event.title && <div css={EventTitle}>{event.title}</div>}\n\t\t\t\t\t\t{event.body && <Body html={event.body} pillar={pillar} />}\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n};\n\nexport const TimelineAtom = ({\n\tid,\n\tevents,\n\tdescription,\n\ttitle,\n\tpillar,\n\texpandForStorybook,\n\tlikeHandler,\n\tdislikeHandler,\n\texpandCallback,\n}: TimelineAtomType): JSX.Element => {\n\treturn (\n\t\t<Container\n\t\t\tatomType=\"timeline\"\n\t\t\tatomTypeTitle=\"Timeline\"\n\t\t\tid={id}\n\t\t\tpillar={pillar}\n\t\t\texpandForStorybook={expandForStorybook}\n\t\t\ttitle={title}\n\t\t\texpandCallback={\n\t\t\t\texpandCallback ??\n\t\t\t\t(() =>\n\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\tcomponentType: 'TIMELINE_ATOM',\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t},\n\t\t\t\t\t\taction: 'EXPAND',\n\t\t\t\t\t}))\n\t\t\t}\n\t\t>\n\t\t\t{description && <Body html={description} pillar={pillar} />}\n\t\t\t{events && <TimelineContents events={events} pillar={pillar} />}\n\t\t\t<Footer\n\t\t\t\tpillar={pillar}\n\t\t\t\tdislikeHandler={\n\t\t\t\t\tdislikeHandler ??\n\t\t\t\t\t(() =>\n\t\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\t\tcomponentType: 'TIMELINE_ATOM',\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\taction: 'DISLIKE',\n\t\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t\tlikeHandler={\n\t\t\t\t\tlikeHandler ??\n\t\t\t\t\t(() =>\n\t\t\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\t\t\tcomponent: {\n\t\t\t\t\t\t\t\tcomponentType: 'TIMELINE_ATOM',\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\tproducts: [],\n\t\t\t\t\t\t\t\tlabels: [],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\taction: 'LIKE',\n\t\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n","import { css } from '@emotion/react';\n\nexport const MaintainAspectRatio = ({\n\theight,\n\twidth,\n\tchildren,\n}: {\n\theight: number;\n\twidth: number;\n\tchildren: React.ReactNode;\n}): JSX.Element => (\n\t/* https://css-tricks.com/aspect-ratio-boxes/ */\n\t<div\n\t\tcss={css`\n\t\t\t/* position relative to contain the absolutely positioned iframe plus any Overlay image */\n\t\t\tposition: relative;\n\t\t\tpadding-bottom: ${(height / width) * 100}%;\n\n\t\t\tiframe {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t}\n\n\t\t\t/* \n                The IMA script gives the following styles to the ad container element:\n                    width: [pixel value equal to the youtube iframe's width]\n                    height: [pixel value equal to the youtube iframe's height]\n                    position: relative;\n                    display: block;\n                We need to override these styles to make sure that the ad container overlays\n                the youtube player exactly and to avoid a player-sized white space underneath the ad.\n            */\n\t\t\t[data-atom-type='ima-ad-container'] {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tposition: absolute !important;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n","const enforceTwoDigitString = (number: number) =>\n\tnumber >= 10 ? number : `0${number}`;\n\nexport const formatTime = (videoDurationInSeconds: number): string => {\n\tconst hours = Math.floor(videoDurationInSeconds / 3600);\n\tconst minutes = Math.floor((videoDurationInSeconds % 3600) / 60);\n\tconst seconds = videoDurationInSeconds % 60;\n\n\t// We assume that videos are shorter than 1 hour, but handle incase one does arise\n\tconst hoursString = hours > 0 ? `${enforceTwoDigitString(hours)}:` : '';\n\tconst minutesString = minutes > 0 ? enforceTwoDigitString(minutes) : '00';\n\tconst secondsString = seconds > 0 ? enforceTwoDigitString(seconds) : '00';\n\treturn `${hoursString}${minutesString}:${secondsString}`;\n};\n","import { css } from '@emotion/react';\nimport { breakpoints } from '@guardian/source-foundations';\nimport type { ImageSource, RoleType, SrcSetItem } from './types';\n\ntype Props = {\n\timageSources: ImageSource[];\n\trole: RoleType;\n\talt: string;\n\theight: number;\n\twidth: number;\n\tisMainMedia?: boolean;\n\tisLazy?: boolean;\n};\n\ntype ResolutionType = 'hdpi' | 'mdpi';\n\nconst getClosestSetForWidth = (\n\tdesiredWidth: number,\n\tinlineSrcSets: SrcSetItem[],\n): SrcSetItem => {\n\t// For a desired width, find the SrcSetItem which is the closest match\n\tconst sorted = inlineSrcSets.sort((a, b) => b.width - a.width);\n\treturn sorted.reduce((best, current) => {\n\t\tif (current.width < best.width && current.width >= desiredWidth) {\n\t\t\treturn current;\n\t\t}\n\t\treturn best;\n\t});\n};\n\nconst getSourcesForRoleAndResolution = (\n\timageSources: ImageSource[],\n\tresolution: ResolutionType,\n) => {\n\tconst srcSetItems = imageSources[0]?.srcSet ?? [];\n\n\treturn resolution === 'hdpi'\n\t\t? srcSetItems.filter((set) => set.src.includes('dpr=2'))\n\t\t: srcSetItems.filter((set) => !set.src.includes('dpr=2'));\n};\n\nconst getFallback = (\n\tresolution: ResolutionType,\n\timageSources: ImageSource[],\n): string | undefined => {\n\t// Get the sources for this role and resolution\n\tconst sources: SrcSetItem[] = getSourcesForRoleAndResolution(\n\t\timageSources,\n\t\tresolution,\n\t);\n\tif (sources.length === 0) return undefined;\n\t// The assumption here is readers on devices that do not support srcset are likely to be on poor\n\t// network connections so we're going to fallback to a small image\n\treturn getClosestSetForWidth(300, sources).src;\n};\n\nconst getSources = (\n\tresolution: ResolutionType,\n\timageSources: ImageSource[],\n): string => {\n\t// Get the sources for this role and resolution\n\tconst sources: SrcSetItem[] = getSourcesForRoleAndResolution(\n\t\timageSources,\n\t\tresolution,\n\t);\n\n\treturn sources.map((srcSet) => `${srcSet.src} ${srcSet.width}w`).join(',');\n};\n\n/**\n *       mobile: 320\n *       mobileMedium: 375\n *       mobileLandscape: 480\n *       phablet: 660\n *       tablet: 740\n *       desktop: 980\n *       leftCol: 1140\n *       wide: 1300\n */\n\nconst getSizes = (role: RoleType, isMainMedia: boolean): string => {\n\tswitch (role) {\n\t\tcase 'inline':\n\t\t\treturn `(min-width: ${breakpoints.phablet}px) 620px, 100vw`;\n\t\tcase 'halfWidth':\n\t\t\treturn `(min-width: ${breakpoints.phablet}px) 300px, 50vw`;\n\t\tcase 'thumbnail':\n\t\t\treturn '140px';\n\t\tcase 'immersive':\n\t\t\t// Immersive MainMedia elements fill the height of the viewport, meaning\n\t\t\t// on mobile devices even though the viewport width is small, we'll need\n\t\t\t// a larger image to maintain quality. To solve this problem we're using\n\t\t\t// the viewport height (vh) to calculate width. The value of 167vh\n\t\t\t// relates to an assumed image ratio of 5:3 which is equal to\n\t\t\t// 167 (viewport height)  : 100 (viewport width).\n\n\t\t\t// Immersive body images stretch the full viewport width below wide,\n\t\t\t// but do not stretch beyond 1300px after that.\n\t\t\treturn isMainMedia\n\t\t\t\t? `(orientation: portrait) 167vh, 100vw`\n\t\t\t\t: `(min-width: ${breakpoints.wide}px) 1300px, 100vw`;\n\t\tcase 'supporting':\n\t\t\treturn `(min-width: ${breakpoints.wide}px) 380px, 300px`;\n\t\tcase 'showcase':\n\t\t\treturn isMainMedia\n\t\t\t\t? `(min-width: ${breakpoints.wide}px) 1020px, (min-width: ${breakpoints.leftCol}px) 940px, (min-width: ${breakpoints.tablet}px) 700px, (min-width: ${breakpoints.phablet}px) 660px, 100vw`\n\t\t\t\t: `(min-width: ${breakpoints.wide}px) 860px, (min-width: ${breakpoints.leftCol}px) 780px, (min-width: ${breakpoints.phablet}px) 620px, 100vw`;\n\t}\n};\n\nexport const Picture = ({\n\timageSources,\n\trole,\n\talt,\n\theight,\n\twidth,\n\tisMainMedia = false,\n}: Props): JSX.Element => {\n\tconst hdpiSources = getSources('hdpi', imageSources);\n\tconst mdpiSources = getSources('mdpi', imageSources);\n\tconst fallbackSrc = getFallback('hdpi', imageSources);\n\tconst sizes = getSizes(role, isMainMedia);\n\n\treturn (\n\t\t<picture itemProp=\"contentUrl\">\n\t\t\t{/* HDPI Source (DPR2) - images in this srcset have `dpr=2&quality=45` in the url */}\n\t\t\t<source\n\t\t\t\tsrcSet={hdpiSources}\n\t\t\t\tsizes={sizes}\n\t\t\t\tmedia=\"(-webkit-min-device-pixel-ratio: 1.25), (min-resolution: 120dpi)\"\n\t\t\t/>\n\t\t\t{/* MDPI Source (DPR1) - images in this srcset have `quality=85` in the url */}\n\t\t\t<source srcSet={mdpiSources} sizes={sizes} />\n\t\t\t<img\n\t\t\t\talt={alt}\n\t\t\t\tsrc={fallbackSrc}\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t\t// https://stackoverflow.com/questions/10844205/html-5-strange-img-always-adds-3px-margin-at-bottom\n\t\t\t\t// why did we add the css `vertical-align: middle;` to the img tag\n\t\t\t\tcss={css`\n\t\t\t\t\tvertical-align: middle;\n\t\t\t\t`}\n\t\t\t/>\n\t\t</picture>\n\t);\n};\n","import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport {\n\tfocusHalo,\n\tneutral,\n\tspace,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { SvgPlay } from '@guardian/source-react-components';\nimport { formatTime } from './lib/formatTime';\nimport { pillarPalette } from './lib/pillarPalette';\nimport { Picture } from './Picture';\nimport type { ImageSource, RoleType } from './types';\n\ntype Props = {\n\tuniqueId: string;\n\toverrideImage?: ImageSource[];\n\tposterImage?: ImageSource[];\n\theight: number;\n\twidth: number;\n\talt: string;\n\trole: RoleType;\n\tduration?: number; // in seconds\n\tpillar: ArticleTheme;\n\ttitle?: string;\n\tonClick: () => void;\n};\n\nconst overlayStyles = css`\n\tbackground-size: cover;\n\tbackground-position: 49% 49%;\n\tbackground-repeat: no-repeat;\n\ttext-align: center;\n\theight: 100%;\n\twidth: 100%;\n\tposition: absolute;\n\tmax-height: 100vh;\n\tcursor: pointer;\n\tborder: 0;\n\tpadding: 0;\n\n\timg {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t/* hard code \"overlay-play-button\" to be able to give play button animation on focus/hover of overlay */\n\t:focus {\n\t\t${focusHalo}\n\t\t.overlay-play-button {\n\t\t\ttransform: scale(1.15);\n\t\t\ttransition-duration: 300ms;\n\t\t}\n\t}\n\t:hover {\n\t\t.overlay-play-button {\n\t\t\ttransform: scale(1.15);\n\t\t\ttransition-duration: 300ms;\n\t\t}\n\t}\n`;\n\nconst playButtonStyling = (pillar: ArticleTheme) => css`\n\tbackground-color: ${pillarPalette[pillar][500]};\n\tborder-radius: 100%;\n\theight: 60px;\n\twidth: 60px;\n\ttransform: scale(1);\n\ttransition-duration: 300ms;\n\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\n\tsvg {\n\t\tfill: ${neutral[100]};\n\t\twidth: 45px;\n\t\theight: 40px;\n\t}\n`;\n\nconst overlayInfoWrapperStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tposition: absolute;\n\tbottom: ${space[4]}px;\n\tleft: ${space[4]}px;\n`;\n\nconst videoDurationStyles = (pillar: ArticleTheme) => css`\n\t${textSans.medium({ fontWeight: 'bold' })};\n\tpadding-left: ${space[3]}px;\n\tcolor: ${pillarPalette[pillar][500]};\n`;\n\nexport const YoutubeAtomOverlay = ({\n\tuniqueId,\n\toverrideImage,\n\tposterImage,\n\theight,\n\twidth,\n\talt,\n\trole,\n\tduration,\n\tpillar,\n\ttitle,\n\tonClick,\n}: Props): JSX.Element => {\n\tconst id = `youtube-overlay-${uniqueId}`;\n\treturn (\n\t\t<button\n\t\t\tdata-cy={id}\n\t\t\tdata-testid={id}\n\t\t\tonClick={onClick}\n\t\t\tcss={overlayStyles}\n\t\t\taria-label={title ? `Play video: ${title}` : `Play video`}\n\t\t>\n\t\t\t<Picture\n\t\t\t\timageSources={overrideImage ?? posterImage ?? []}\n\t\t\t\trole={role}\n\t\t\t\talt={alt}\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t/>\n\t\t\t<div css={overlayInfoWrapperStyles}>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"overlay-play-button\"\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${playButtonStyling(pillar)}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<SvgPlay />\n\t\t\t\t</div>\n\t\t\t\t{duration !== undefined && duration > 0 && (\n\t\t\t\t\t<div css={videoDurationStyles(pillar)}>{formatTime(duration)}</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</button>\n\t);\n};\n","import { css } from '@emotion/react';\n\nexport const YoutubeAtomPlaceholder = ({\n\tuniqueId,\n}: {\n\tuniqueId: string;\n}): JSX.Element => {\n\tconst id = `youtube-placeholder-${uniqueId}`;\n\treturn (\n\t\t<div\n\t\t\tdata-name={id}\n\t\t\tdata-testid={id}\n\t\t\tcss={[\n\t\t\t\tcss`\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\tbackground-color: black;\n\t\t\t\t`,\n\t\t\t]}\n\t\t></div>\n\t);\n};\n","import type { AdsConfig } from '@guardian/commercial-core';\nimport { log } from '@guardian/libs';\nimport { loadYouTubeAPI } from './loadYouTubeIframeApi';\n\ntype EmbedConfig = {\n\tembedConfig: {\n\t\trelatedChannels: string[];\n\t\tadsConfig: AdsConfig;\n\t\tenableIma: boolean;\n\t};\n};\n\ntype PlayerOptions = YT.PlayerOptions & EmbedConfig;\n\n// PlayerEvent, OnStateChangeEvent, etc.\nexport type PlayerListenerName = keyof YT.Events;\n\nclass YouTubePlayer {\n\tplayerPromise: Promise<YT.Player>;\n\tprivate _player?: YT.Player;\n\n\tconstructor(id: string, playerOptions: PlayerOptions) {\n\t\tthis.playerPromise = this.setPlayer(id, playerOptions);\n\t}\n\n\tprivate async setPlayer(id: string, playerOptions: PlayerOptions) {\n\t\tconst YTAPI = await loadYouTubeAPI(playerOptions.embedConfig.enableIma);\n\t\tconst playerPromise = new Promise<YT.Player>((resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tthis._player = new YTAPI.Player(id, playerOptions);\n\t\t\t\tresolve(this._player);\n\t\t\t} catch (e) {\n\t\t\t\tthis.logError(e as Error);\n\t\t\t\treject(e);\n\t\t\t}\n\t\t});\n\t\treturn playerPromise;\n\t}\n\n\tprivate logError(e: Error) {\n\t\tlog('dotcom', `YouTubePlayer failed to load: ${e.message}`);\n\t}\n\n\tgetPlayerState(): Promise<YT.PlayerState | void> {\n\t\treturn this.playerPromise\n\t\t\t.then((player) => {\n\t\t\t\treturn player.getPlayerState();\n\t\t\t})\n\t\t\t.catch(this.logError);\n\t}\n\n\tplayVideo(): Promise<void> {\n\t\treturn this.playerPromise\n\t\t\t.then((player) => {\n\t\t\t\tplayer.playVideo();\n\t\t\t})\n\t\t\t.catch(this.logError);\n\t}\n\n\tpauseVideo(): Promise<void> {\n\t\treturn this.playerPromise\n\t\t\t.then((player) => {\n\t\t\t\tplayer.pauseVideo();\n\t\t\t})\n\t\t\t.catch(this.logError);\n\t}\n\n\tstopVideo(): Promise<void> {\n\t\treturn this.playerPromise\n\t\t\t.then((player) => {\n\t\t\t\tplayer.stopVideo();\n\t\t\t})\n\t\t\t.catch(this.logError);\n\t}\n\n\tremoveEventListener<T extends YT.PlayerEvent>(\n\t\teventName: PlayerListenerName,\n\t\tlistener: YT.PlayerEventHandler<T>,\n\t): void {\n\t\t/**\n\t\t * If the YouTube API hasn't finished loading,\n\t\t * this._player may be undefined in which case removeEventListener\n\t\t * will fail silently.\n\t\t */\n\t\tthis._player?.removeEventListener<T>(eventName, listener);\n\t}\n}\n\nexport { YouTubePlayer };\n","import type { Participations } from '@guardian/ab-core';\nimport type { AdsConfig } from '@guardian/commercial-core';\nimport {\n\tbuildAdsConfigWithConsent,\n\tbuildImaAdTagUrl,\n\tdisabledAds,\n} from '@guardian/commercial-core';\nimport type { ConsentState } from '@guardian/consent-management-platform/dist/types';\nimport { log } from '@guardian/libs';\nimport {\n\tuseCallback,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseState,\n} from 'react';\nimport type { google } from './ima';\nimport type { AdTargeting, VideoEventKey } from './types';\nimport type { PlayerListenerName } from './YouTubePlayer';\nimport { YouTubePlayer } from './YouTubePlayer';\n\ndeclare class ImaManager {\n\tconstructor(\n\t\tplayer: YT.Player,\n\t\tid: string,\n\t\tadContainerId: string,\n\t\tmakeAdsRequestCallback: (\n\t\t\tadsRequest: { adTagUrl: string },\n\t\t\tadsRenderingSettings: google.ima.AdsRenderingSettings,\n\t\t) => void,\n\t);\n\tgetAdsLoader: () => google.ima.AdsLoader;\n\tgetAdsManager: () => google.ima.AdsManager;\n}\n\ndeclare global {\n\tinterface Window {\n\t\t/**\n\t\t * Here we want to type the google object that will be added to window.\n\t\t * Since the imported google namespace is a value rather than a type, use typeof.\n\t\t */\n\t\tgoogle: typeof google;\n\t\tYT: {\n\t\t\tImaManager: typeof ImaManager;\n\t\t};\n\t}\n}\n\ntype Props = {\n\tuniqueId: string;\n\tvideoId: string;\n\tadTargeting?: AdTargeting;\n\tconsentState: ConsentState;\n\theight: number;\n\twidth: number;\n\ttitle?: string;\n\torigin?: string;\n\teventEmitters: Array<(event: VideoEventKey) => void>;\n\tautoPlay: boolean;\n\tonReady: () => void;\n\tenableIma: boolean;\n\tpauseVideo: boolean;\n\tdeactivateVideo: () => void;\n\tabTestParticipations: Participations;\n};\n\ntype CustomPlayEventDetail = { videoId: string };\nconst customPlayEventName = 'video:play';\n\ntype ProgressEvents = {\n\thasSentPlayEvent: boolean;\n\thasSent25Event: boolean;\n\thasSent50Event: boolean;\n\thasSent75Event: boolean;\n\thasSentEndEvent: boolean;\n};\n\n/**\n *  E.g.\n *  name: onReady, onStateChange, etc...\n *  listener: YT.PlayerEventHandler<PlayerEvent>, YT.PlayerEventHandler<OnStateChangeEvent>\n */\ntype PlayerListener<T extends PlayerListenerName> = {\n\tname: T;\n\tlistener: NonNullable<YT.Events[T]>;\n};\n\ntype PlayerListeners = Array<PlayerListener<PlayerListenerName>>;\n\n/**\n * Given a YT.PlayerEventHandler, (e.g. PlayerEventHandler<OnStateChangeEvent>)\n * return its event type (e.g. OnStateChangeEvent)\n */\ntype ExtractEventType<T> = T extends YT.PlayerEventHandler<infer X> ? X : never;\n\nconst dispatchCustomPlayEvent = (uniqueId: string) => {\n\tdocument.dispatchEvent(\n\t\tnew CustomEvent(customPlayEventName, {\n\t\t\tdetail: { uniqueId },\n\t\t}),\n\t);\n};\n\n/**\n * ProgressEvents are a ref, see below\n */\nconst createOnStateChangeListener =\n\t(\n\t\tvideoId: string,\n\t\tuniqueId: string,\n\t\tprogressEvents: ProgressEvents,\n\t\teventEmitters: Props['eventEmitters'],\n\t): YT.PlayerEventHandler<YT.OnStateChangeEvent> =>\n\t(event) => {\n\t\tconst loggerFrom = 'YoutubeAtomPlayer onStateChange';\n\t\tlog('dotcom', {\n\t\t\tfrom: loggerFrom,\n\t\t\tvideoId,\n\t\t\tevent,\n\t\t});\n\n\t\t/**\n\t\t * event.target is the actual underlying YT player\n\t\t */\n\t\tconst player = event.target;\n\n\t\tif (event.data === YT.PlayerState.PLAYING) {\n\t\t\t/**\n\t\t\t * Emit video play event so other components\n\t\t\t * get aware when a video is played\n\t\t\t */\n\t\t\tdispatchCustomPlayEvent(uniqueId);\n\n\t\t\tif (!progressEvents.hasSentPlayEvent) {\n\t\t\t\tlog('dotcom', {\n\t\t\t\t\tfrom: loggerFrom,\n\t\t\t\t\tvideoId,\n\t\t\t\t\tmsg: 'start play',\n\t\t\t\t\tevent,\n\t\t\t\t});\n\t\t\t\teventEmitters.forEach((eventEmitter) => eventEmitter('play'));\n\t\t\t\tprogressEvents.hasSentPlayEvent = true;\n\n\t\t\t\t/**\n\t\t\t\t * Set a timeout to check progress again in the future\n\t\t\t\t */\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tcheckProgress();\n\t\t\t\t}, 3000);\n\t\t\t} else {\n\t\t\t\tlog('dotcom', {\n\t\t\t\t\tfrom: loggerFrom,\n\t\t\t\t\tvideoId,\n\t\t\t\t\tmsg: 'resume',\n\t\t\t\t\tevent,\n\t\t\t\t});\n\t\t\t\teventEmitters.forEach((eventEmitter) => eventEmitter('resume'));\n\t\t\t}\n\n\t\t\tconst checkProgress = () => {\n\t\t\t\tif (!player) return null;\n\t\t\t\tconst currentTime = player?.getCurrentTime();\n\t\t\t\tconst duration = player?.getDuration();\n\n\t\t\t\tif (!duration ?? !currentTime) return;\n\n\t\t\t\tconst percentPlayed = (currentTime / duration) * 100;\n\n\t\t\t\tif (!progressEvents.hasSent25Event && 25 < percentPlayed) {\n\t\t\t\t\tlog('dotcom', {\n\t\t\t\t\t\tfrom: loggerFrom,\n\t\t\t\t\t\tvideoId,\n\t\t\t\t\t\tmsg: 'played 25%',\n\t\t\t\t\t\tevent,\n\t\t\t\t\t});\n\t\t\t\t\teventEmitters.forEach((eventEmitter) => eventEmitter('25'));\n\t\t\t\t\tprogressEvents.hasSent25Event = true;\n\t\t\t\t}\n\n\t\t\t\tif (!progressEvents.hasSent50Event && 50 < percentPlayed) {\n\t\t\t\t\tlog('dotcom', {\n\t\t\t\t\t\tfrom: loggerFrom,\n\t\t\t\t\t\tvideoId,\n\t\t\t\t\t\tmsg: 'played 50%',\n\t\t\t\t\t\tevent,\n\t\t\t\t\t});\n\t\t\t\t\teventEmitters.forEach((eventEmitter) => eventEmitter('50'));\n\t\t\t\t\tprogressEvents.hasSent50Event = true;\n\t\t\t\t}\n\n\t\t\t\tif (!progressEvents.hasSent75Event && 75 < percentPlayed) {\n\t\t\t\t\tlog('dotcom', {\n\t\t\t\t\t\tfrom: loggerFrom,\n\t\t\t\t\t\tvideoId,\n\t\t\t\t\t\tmsg: 'played 75%',\n\t\t\t\t\t\tevent,\n\t\t\t\t\t});\n\t\t\t\t\teventEmitters.forEach((eventEmitter) => eventEmitter('75'));\n\t\t\t\t\tprogressEvents.hasSent75Event = true;\n\t\t\t\t}\n\n\t\t\t\tconst currentPlayerState = player?.getPlayerState();\n\n\t\t\t\tif (currentPlayerState !== YT.PlayerState.ENDED) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Set a timeout to check progress again in the future\n\t\t\t\t\t */\n\t\t\t\t\tsetTimeout(() => checkProgress(), 3000);\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t};\n\t\t}\n\n\t\tif (event.data === YT.PlayerState.PAUSED) {\n\t\t\tlog('dotcom', {\n\t\t\t\tfrom: loggerFrom,\n\t\t\t\tvideoId,\n\t\t\t\tmsg: 'pause',\n\t\t\t\tevent,\n\t\t\t});\n\t\t\teventEmitters.forEach((eventEmitter) => eventEmitter('pause'));\n\t\t}\n\n\t\tif (event.data === YT.PlayerState.CUED) {\n\t\t\tlog('dotcom', {\n\t\t\t\tfrom: loggerFrom,\n\t\t\t\tvideoId,\n\t\t\t\tmsg: 'cued',\n\t\t\t\tevent,\n\t\t\t});\n\t\t\teventEmitters.forEach((eventEmitter) => eventEmitter('cued'));\n\t\t\tprogressEvents.hasSentPlayEvent = false;\n\t\t}\n\n\t\tif (\n\t\t\tevent.data === YT.PlayerState.ENDED &&\n\t\t\t!progressEvents.hasSentEndEvent\n\t\t) {\n\t\t\tlog('dotcom', {\n\t\t\t\tfrom: loggerFrom,\n\t\t\t\tvideoId,\n\t\t\t\tmsg: 'ended',\n\t\t\t\tevent,\n\t\t\t});\n\t\t\teventEmitters.forEach((eventEmitter) => eventEmitter('end'));\n\t\t\tprogressEvents.hasSentEndEvent = true;\n\t\t\tprogressEvents.hasSentPlayEvent = false;\n\t\t}\n\t};\n\n/**\n * returns an onReady listener\n */\nconst createOnReadyListener =\n\t(\n\t\tvideoId: string,\n\t\tonReadyCallback: () => void,\n\t\tsetPlayerReady: () => void,\n\t\tinstantiateImaManager?: (player: YT.Player) => void,\n\t) =>\n\t(event: YT.PlayerEvent) => {\n\t\tlog('dotcom', {\n\t\t\tfrom: 'YoutubeAtomPlayer onReady',\n\t\t\tvideoId,\n\t\t\tmsg: 'Ready',\n\t\t\tevent,\n\t\t});\n\t\t/**\n\t\t * Callback to notify YoutubeAtom that the player is ready\n\t\t */\n\t\tonReadyCallback();\n\n\t\t/**\n\t\t * Callback to set value of playerReady ref\n\t\t */\n\t\tsetPlayerReady();\n\n\t\t/**\n\t\t * instantiate IMA manager if IMA enabled\n\t\t */\n\t\tif (instantiateImaManager) {\n\t\t\ttry {\n\t\t\t\tinstantiateImaManager(event.target);\n\t\t\t} catch (e) {\n\t\t\t\tlog('commercial', 'error instantiating IMA manager:', e);\n\t\t\t}\n\t\t}\n\t};\n\nconst createInstantiateImaManager =\n\t(\n\t\tuniqueId: string,\n\t\tid: string,\n\t\tadContainerId: string,\n\t\tadTargeting: AdTargeting | undefined,\n\t\tconsentState: ConsentState,\n\t\tabTestParticipations: Participations,\n\t\timaManager: React.MutableRefObject<ImaManager | undefined>,\n\t\tadsManager: React.MutableRefObject<google.ima.AdsManager | undefined>,\n\t) =>\n\t(player: YT.Player) => {\n\t\tconst adTargetingEnabled = adTargeting && !adTargeting.disableAds;\n\t\tconst adUnit =\n\t\t\tadTargetingEnabled && adTargeting.adUnit ? adTargeting.adUnit : '';\n\t\tconst customParams =\n\t\t\tadTargetingEnabled && adTargeting.customParams\n\t\t\t\t? adTargeting.customParams\n\t\t\t\t: {};\n\n\t\tconst makeAdsRequestCallback = (\n\t\t\tadsRequest: { adTagUrl: string },\n\t\t\tadsRenderingSettings: google.ima.AdsRenderingSettings,\n\t\t) => {\n\t\t\tadsRequest.adTagUrl = buildImaAdTagUrl({\n\t\t\t\tadUnit,\n\t\t\t\tcustomParams,\n\t\t\t\tconsentState,\n\t\t\t\tclientSideParticipations: abTestParticipations,\n\t\t\t});\n\t\t\tadsRenderingSettings.uiElements = [\n\t\t\t\twindow.google.ima.UiElements.AdAttribution,\n\t\t\t];\n\t\t};\n\n\t\tif (typeof window.YT.ImaManager !== 'undefined') {\n\t\t\timaManager.current = new window.YT.ImaManager(\n\t\t\t\tplayer,\n\t\t\t\tid,\n\t\t\t\tadContainerId,\n\t\t\t\tmakeAdsRequestCallback,\n\t\t\t);\n\t\t\tconst adsLoader = imaManager.current.getAdsLoader();\n\n\t\t\tconst onAdsManagerLoaded = () => {\n\t\t\t\tadsManager.current = imaManager.current?.getAdsManager();\n\t\t\t\tadsManager.current?.addEventListener(\n\t\t\t\t\twindow.google.ima.AdEvent.Type.Started,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tdispatchCustomPlayEvent(uniqueId);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t};\n\n\t\t\tadsLoader.addEventListener(\n\t\t\t\twindow.google.ima.AdsManagerLoadedEvent.Type.AdsManagerLoaded,\n\t\t\t\tonAdsManagerLoaded,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t} else {\n\t\t\tconsole.warn(\n\t\t\t\t'YT.ImaManager is undefined, probably because the youtube iframe_api script was fetched from ' +\n\t\t\t\t\t\"a domain that isn't allow-listed (theguardian.com, thegulocal.com, gutools.co.uk). \" +\n\t\t\t\t\t'If you are running an app locally, use dev-nginx to proxy one of these domains to localhost.',\n\t\t\t);\n\t\t}\n\t};\n\nexport const YoutubeAtomPlayer = ({\n\tuniqueId,\n\tvideoId,\n\tadTargeting,\n\tconsentState,\n\theight,\n\twidth,\n\ttitle,\n\torigin,\n\teventEmitters,\n\tautoPlay,\n\tonReady,\n\tenableIma,\n\tpauseVideo,\n\tdeactivateVideo,\n\tabTestParticipations,\n}: Props): JSX.Element => {\n\t/**\n\t * useRef for player and progressEvents\n\t * Provides mutable persistent state for the player across renders\n\t * Does not cause re-renders on update\n\t */\n\tconst player = useRef<YouTubePlayer>();\n\tconst progressEvents = useRef<ProgressEvents>({\n\t\thasSentPlayEvent: false,\n\t\thasSent25Event: false,\n\t\thasSent50Event: false,\n\t\thasSent75Event: false,\n\t\thasSentEndEvent: false,\n\t});\n\n\tconst [playerReady, setPlayerReady] = useState<boolean>(false);\n\tconst playerReadyCallback = useCallback(() => setPlayerReady(true), []);\n\tconst playerListeners = useRef<PlayerListeners>([]);\n\t/**\n\t * A map ref with a key of eventname and a value of eventHandler\n\t */\n\tconst customListeners = useRef<\n\t\tRecord<string, (event: CustomEventInit<CustomPlayEventDetail>) => void>\n\t>({});\n\n\tconst imaManager = useRef<ImaManager>();\n\tconst adsManager = useRef<google.ima.AdsManager>();\n\n\tconst id = `youtube-video-${uniqueId}`;\n\tconst imaAdContainerId = `ima-ad-container-${uniqueId}`;\n\n\t/**\n\t * Initialise player useEffect\n\t */\n\tuseEffect(\n\t\t() => {\n\t\t\tif (!player.current) {\n\t\t\t\tlog('dotcom', {\n\t\t\t\t\tfrom: 'YoutubeAtomPlayer initialise',\n\t\t\t\t\tvideoId,\n\t\t\t\t});\n\n\t\t\t\tconst adsConfig: AdsConfig =\n\t\t\t\t\t!adTargeting || adTargeting.disableAds || enableIma\n\t\t\t\t\t\t? disabledAds\n\t\t\t\t\t\t: buildAdsConfigWithConsent({\n\t\t\t\t\t\t\t\tadUnit: adTargeting.adUnit,\n\t\t\t\t\t\t\t\tclientSideParticipations: abTestParticipations,\n\t\t\t\t\t\t\t\tconsentState,\n\t\t\t\t\t\t\t\tcustomParams: adTargeting.customParams,\n\t\t\t\t\t\t\t\tisAdFreeUser: false,\n\t\t\t\t\t\t  });\n\n\t\t\t\tconst embedConfig = {\n\t\t\t\t\trelatedChannels: [],\n\t\t\t\t\tadsConfig,\n\t\t\t\t\tenableIma,\n\t\t\t\t\t/**\n\t\t\t\t\t * YouTube recommends disabling related videos when IMA is enabled\n\t\t\t\t\t */\n\t\t\t\t\tdisableRelatedVideos: enableIma,\n\t\t\t\t};\n\n\t\t\t\tconst instantiateImaManager = enableIma\n\t\t\t\t\t? createInstantiateImaManager(\n\t\t\t\t\t\t\tuniqueId,\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\timaAdContainerId,\n\t\t\t\t\t\t\tadTargeting,\n\t\t\t\t\t\t\tconsentState,\n\t\t\t\t\t\t\tabTestParticipations,\n\t\t\t\t\t\t\timaManager,\n\t\t\t\t\t\t\tadsManager,\n\t\t\t\t\t  )\n\t\t\t\t\t: undefined;\n\n\t\t\t\tconst onReadyListener = createOnReadyListener(\n\t\t\t\t\tvideoId,\n\t\t\t\t\tonReady,\n\t\t\t\t\tplayerReadyCallback,\n\t\t\t\t\tinstantiateImaManager,\n\t\t\t\t);\n\n\t\t\t\tconst onStateChangeListener = createOnStateChangeListener(\n\t\t\t\t\tvideoId,\n\t\t\t\t\tuniqueId,\n\t\t\t\t\tprogressEvents.current,\n\t\t\t\t\teventEmitters,\n\t\t\t\t);\n\n\t\t\t\tplayer.current = new YouTubePlayer(id, {\n\t\t\t\t\theight,\n\t\t\t\t\twidth,\n\t\t\t\t\tvideoId,\n\t\t\t\t\tplayerVars: {\n\t\t\t\t\t\tmodestbranding: 1,\n\t\t\t\t\t\torigin,\n\t\t\t\t\t\tplaysinline: 1,\n\t\t\t\t\t\trel: 0,\n\t\t\t\t\t},\n\t\t\t\t\tembedConfig,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonReady: onReadyListener,\n\t\t\t\t\t\tonStateChange: onStateChangeListener,\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\t/**\n\t\t\t\t * Pause the current video when another video is played\n\t\t\t\t */\n\t\t\t\tconst handleCustomPlayEvent = (\n\t\t\t\t\tevent: CustomEventInit<CustomPlayEventDetail>,\n\t\t\t\t) => {\n\t\t\t\t\tif (event instanceof CustomEvent) {\n\t\t\t\t\t\tconst playedVideoId = event.detail.uniqueId;\n\t\t\t\t\t\tconst thisVideoId = uniqueId;\n\t\t\t\t\t\tif (playedVideoId !== thisVideoId) {\n\t\t\t\t\t\t\tconst playerStatePromise = player.current?.getPlayerState();\n\t\t\t\t\t\t\tplayerStatePromise?.then((playerState) => {\n\t\t\t\t\t\t\t\tif (playerState && playerState === YT.PlayerState.PLAYING) {\n\t\t\t\t\t\t\t\t\tplayer.current?.pauseVideo();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t// pause ima ads playing on other videos\n\t\t\t\t\t\t\tadsManager.current?.pause();\n\t\t\t\t\t\t\t// mark player as inactive\n\t\t\t\t\t\t\tdeactivateVideo();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n\t\t\t\t * add listener for custom play event\n\t\t\t\t */\n\t\t\t\tdocument.addEventListener(customPlayEventName, handleCustomPlayEvent);\n\n\t\t\t\tcustomListeners.current[customPlayEventName] = handleCustomPlayEvent;\n\n\t\t\t\tplayerListeners.current.push(\n\t\t\t\t\t{ name: 'onReady', listener: onReadyListener },\n\t\t\t\t\t{ name: 'onStateChange', listener: onStateChangeListener },\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * useEffect dependencies are mostly static but added to array for correctness\n\t\t */\n\t\t[\n\t\t\tadTargeting,\n\t\t\tautoPlay,\n\t\t\tconsentState,\n\t\t\teventEmitters,\n\t\t\theight,\n\t\t\tonReady,\n\t\t\torigin,\n\t\t\tvideoId,\n\t\t\twidth,\n\t\t\tenableIma,\n\t\t],\n\t);\n\n\t/**\n\t * Autoplay useEffect\n\t */\n\tuseEffect(() => {\n\t\tif (playerReady && autoPlay) {\n\t\t\t/**\n\t\t\t * Autoplay is determined by the parent\n\t\t\t * Typically true when there is a preceding overlay\n\t\t\t */\n\t\t\tlog('dotcom', {\n\t\t\t\tfrom: 'YoutubeAtomPlayer autoplay',\n\t\t\t\tvideoId,\n\t\t\t\tmsg: 'Playing video',\n\t\t\t});\n\t\t\tplayer.current?.playVideo();\n\t\t}\n\t}, [playerReady, autoPlay]);\n\n\t/**\n\t * Player pause useEffect\n\t */\n\tuseEffect(() => {\n\t\t/**\n\t\t * if the 'pauseVideo' prop is true this should pause the video\n\t\t *\n\t\t * 'pauseVideo' is controlled by the close sticky video button\n\t\t */\n\t\tif (pauseVideo) {\n\t\t\tplayer.current?.pauseVideo();\n\t\t}\n\t}, [pauseVideo]);\n\n\t/**\n\t * Unregister listeners useLayoutEffect\n\t */\n\tuseLayoutEffect(() => {\n\t\t/**\n\t\t * Unregister listeners before component unmount\n\t\t *\n\t\t * An empty dependency array will call its cleanup on unmount.\n\t\t *\n\t\t * Use useLayoutEffect to ensure the cleanup function is run\n\t\t * before the component is removed from the DOM. Usually clean up\n\t\t * functions will run after the render and commit phase.\n\t\t *\n\t\t * If we attempt to unregister listeners after the component is\n\t\t * removed from the DOM the YouTube API logs a warning to the console.\n\t\t */\n\t\treturn () => {\n\t\t\tplayerListeners.current.forEach((playerListener) => {\n\t\t\t\ttype T = ExtractEventType<typeof playerListener.name>;\n\t\t\t\tplayer.current?.removeEventListener<T>(\n\t\t\t\t\tplayerListener.name,\n\t\t\t\t\tplayerListener.listener,\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tObject.entries(customListeners.current).forEach(\n\t\t\t\t([eventName, eventHandler]) => {\n\t\t\t\t\tdocument.removeEventListener(eventName, eventHandler);\n\t\t\t\t},\n\t\t\t);\n\t\t};\n\t}, []);\n\n\t/**\n\t * An element for the YouTube iFrame to hook into the dom\n\t */\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tid={id}\n\t\t\t\tdata-atom-id={id}\n\t\t\t\tdata-testid={id}\n\t\t\t\tdata-atom-type=\"youtube\"\n\t\t\t\ttitle={title}\n\t\t\t></div>\n\t\t\t{enableIma && (\n\t\t\t\t<div id={imaAdContainerId} data-atom-type=\"ima-ad-container\"></div>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","import { css } from '@emotion/react';\nimport { log } from '@guardian/libs';\nimport { from, neutral, space } from '@guardian/source-foundations';\nimport { SvgCross } from '@guardian/source-react-components';\nimport detectMobile from 'is-mobile';\nimport { useEffect, useState } from 'react';\nimport { submitComponentEvent } from './lib/ophan';\nimport { useIsInView } from './lib/useIsInView';\nimport type { VideoEventKey } from './types';\n\nconst buttonStyles = css`\n\tposition: absolute;\n\tleft: -36px;\n\ttop: 0;\n\tz-index: 22;\n\tbackground-color: ${neutral[7]};\n\theight: 32px;\n\twidth: 32px;\n\tborder-radius: 50%;\n\tborder: 0;\n\tpadding: 0;\n\tcursor: pointer;\n\tdisplay: none;\n\tjustify-content: center;\n\talign-items: center;\n\ttransition: transform 0.2s;\n\n\t&:hover {\n\t\ttransform: scale(1.15);\n\t}\n\n\tsvg {\n\t\tfill: ${neutral[100]};\n\t}\n`;\n\n/**\n * This extended hover area allows users to click the close video button more easily\n */\nconst hoverAreaStyles = (fullWidthOverlay: boolean) => {\n\tconst hoverAreaWidth = 37;\n\n\treturn css`\n\t\tposition: absolute;\n\t\ttop: -4px;\n\t\tbottom: 0;\n\t\tleft: -${hoverAreaWidth}px;\n\t\twidth: ${hoverAreaWidth}px;\n\n\t\t&:hover button {\n\t\t\tdisplay: flex;\n\t\t}\n\n\t\twidth: ${fullWidthOverlay\n\t\t\t? `calc(100% + ${hoverAreaWidth}px)`\n\t\t\t: `${hoverAreaWidth}px`};\n\t`;\n};\n\nconst stickyStyles = (showButton: boolean) => css`\n\t@keyframes fade-in-up {\n\t\tfrom {\n\t\t\ttransform: translateY(100%);\n\t\t\topacity: 0;\n\t\t}\n\n\t\tto {\n\t\t\ttransform: translateY(0%);\n\t\t\topacity: 1;\n\t\t}\n\t}\n\n\tposition: fixed;\n\tbottom: 20px;\n\twidth: 215px;\n\tz-index: 21;\n\tanimation: fade-in-up 1s ease both;\n\n\t${from.tablet} {\n\t\twidth: 300px;\n\t}\n\n\tfigcaption {\n\t\tdisplay: none;\n\t}\n\n\tbutton {\n\t\tdisplay: ${showButton ? 'flex' : 'none'};\n\t}\n\n\t&:hover button {\n\t\tdisplay: flex;\n\t}\n`;\n\nconst stickyContainerStyles = (isMainMedia?: boolean) => {\n\treturn css`\n\t\theight: 192px;\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\tpadding-right: ${isMainMedia ? `${space[5]}px` : 0};\n\n\t\t${from.phablet} {\n\t\t\theight: 349px;\n\t\t}\n\t`;\n};\n\ntype Props = {\n\tuniqueId: string;\n\tvideoId: string;\n\teventEmitters: Array<(event: VideoEventKey) => void>;\n\tshouldStick?: boolean;\n\tsetPauseVideo: () => void;\n\tisActive: boolean;\n\tisMainMedia?: boolean;\n\tchildren: JSX.Element;\n\tisClosed: boolean;\n\tsetIsClosed: (state: boolean) => void;\n};\n\nconst isMobile = detectMobile({ tablet: true });\n\nexport const YoutubeAtomSticky = ({\n\tuniqueId,\n\tvideoId,\n\teventEmitters,\n\tshouldStick,\n\tsetPauseVideo,\n\tisActive,\n\tisMainMedia,\n\tchildren,\n\tisClosed,\n\tsetIsClosed,\n}: Props): JSX.Element => {\n\tconst [isSticky, setIsSticky] = useState<boolean>(false);\n\tconst [stickEventSent, setStickEventSent] = useState<boolean>(false);\n\tconst [showOverlay, setShowOverlay] = useState<boolean>(isMobile);\n\n\tconst [isIntersecting, setRef] = useIsInView({\n\t\tthreshold: 0.5,\n\t\trepeat: true,\n\t\tdebounce: true,\n\t});\n\n\t/**\n\t * Click handler for the sticky video close button\n\t */\n\tconst handleCloseClick = () => {\n\t\t// unstick the video\n\t\tsetIsSticky(false);\n\t\t// reset the sticky event sender\n\t\tsetStickEventSent(false);\n\t\t// pause the video\n\t\tsetPauseVideo();\n\t\t// set isClosed so that player won't restick\n\t\tsetIsClosed(true);\n\n\t\t// log a 'close' event\n\t\tlog('dotcom', {\n\t\t\tfrom: `YoutubeAtom handleCloseClick`,\n\t\t\tvideoId,\n\t\t\tmsg: 'Close',\n\t\t});\n\n\t\t// submit a 'close' event to Ophan\n\t\tsubmitComponentEvent({\n\t\t\tcomponent: {\n\t\t\t\tcomponentType: 'STICKY_VIDEO',\n\t\t\t\tid: videoId,\n\t\t\t},\n\t\t\taction: 'CLOSE',\n\t\t});\n\t};\n\n\t/**\n\t * keydown event handler\n\t *\n\t * closes sticky video when Escape key is pressed\n\t */\n\tconst handleKeydown = (e: { key: string }) => {\n\t\tif (e.key === 'Escape') {\n\t\t\thandleCloseClick();\n\t\t}\n\t};\n\n\t/**\n\t * useEffect to create keydown listener\n\t */\n\tuseEffect(() => {\n\t\twindow.addEventListener('keydown', handleKeydown);\n\t\treturn () => window.removeEventListener('keydown', handleKeydown);\n\t}, []);\n\n\t/**\n\t * useEffect for the sticky state\n\t */\n\tuseEffect(() => {\n\t\tif (shouldStick) setIsSticky(isActive && !isIntersecting && !isClosed);\n\t}, [isIntersecting, isActive, shouldStick, isClosed]);\n\n\t/**\n\t * useEffect for the stick events\n\t */\n\tuseEffect(() => {\n\t\tif (isSticky && !stickEventSent) {\n\t\t\tsetStickEventSent(true);\n\n\t\t\tlog('dotcom', {\n\t\t\t\tfrom: 'YoutubeAtom stick useEffect',\n\t\t\t\tvideoId,\n\t\t\t\tmsg: 'Stick',\n\t\t\t});\n\n\t\t\tsubmitComponentEvent({\n\t\t\t\tcomponent: {\n\t\t\t\t\tcomponentType: 'STICKY_VIDEO',\n\t\t\t\t\tid: videoId,\n\t\t\t\t},\n\t\t\t\taction: 'STICK',\n\t\t\t});\n\t\t}\n\t}, [isSticky, stickEventSent, videoId, eventEmitters]);\n\n\t/**\n\t * useEffect for mobile only sticky overlay\n\t *\n\t * this allows mobile uses to tap to reveal the close button\n\t */\n\tuseEffect(() => {\n\t\tsetShowOverlay(isMobile && isSticky);\n\t}, [isSticky, isMobile]);\n\n\tconst showCloseButton = !showOverlay && isMobile;\n\n\treturn (\n\t\t<div\n\t\t\tref={setRef}\n\t\t\tcss={isSticky && stickyContainerStyles(isMainMedia)}\n\t\t\tdata-cy={`youtube-sticky-${uniqueId}`}\n\t\t\tdata-is-sticky={isSticky}\n\t\t>\n\t\t\t<div css={isSticky && stickyStyles(showCloseButton)}>\n\t\t\t\t{children}\n\t\t\t\t{isSticky && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={hoverAreaStyles(showOverlay)}\n\t\t\t\t\t\t\tonClick={() => setShowOverlay(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tcss={buttonStyles}\n\t\t\t\t\t\t\tonClick={handleCloseClick}\n\t\t\t\t\t\t\tdata-cy={`youtube-sticky-close-${uniqueId}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SvgCross size=\"medium\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import libDebounce from 'lodash.debounce';\nimport { useEffect, useRef, useState } from 'react';\n\n/**\n * Intersection observer hook.\n *\n * @param {Number} threshold intersection threshold\n * @param {Boolean} repeat should the observer retrigger\n * @param {Boolean} debounce\n */\n\nconst useIsInView = (\n\toptions: IntersectionObserverInit & {\n\t\tdebounce?: boolean;\n\t\trepeat?: boolean;\n\t},\n): [boolean, React.Dispatch<React.SetStateAction<HTMLElement | null>>] => {\n\tconst [isInView, setIsInView] = useState<boolean>(false);\n\tconst [node, setNode] = useState<HTMLElement | null>(null);\n\n\tconst observer = useRef<IntersectionObserver | null>(null);\n\n\t// Enabling debouncing ensures the target element intersects for at least\n\t// 200ms before the callback is executed\n\tconst intersectionFn: IntersectionObserverCallback = ([entry]) => {\n\t\tif (entry?.isIntersecting) {\n\t\t\tsetIsInView(true);\n\t\t} else if (options.repeat) {\n\t\t\tsetIsInView(false);\n\t\t}\n\t};\n\tconst intersectionCallback = options.debounce\n\t\t? libDebounce(intersectionFn, 300)\n\t\t: intersectionFn;\n\n\tuseEffect(() => {\n\t\tif (observer.current) {\n\t\t\tobserver.current.disconnect();\n\t\t}\n\n\t\tif (window.IntersectionObserver) {\n\t\t\tobserver.current = new window.IntersectionObserver(\n\t\t\t\tintersectionCallback,\n\t\t\t\toptions,\n\t\t\t);\n\n\t\t\tconst { current: currentObserver } = observer;\n\n\t\t\tif (node) {\n\t\t\t\tcurrentObserver.observe(node);\n\t\t\t}\n\n\t\t\treturn () => currentObserver.disconnect();\n\t\t}\n\n\t\treturn;\n\t}, [node, options, intersectionCallback]);\n\n\treturn [isInView, setNode];\n};\n\nexport { useIsInView };\n","import type { Participations } from '@guardian/ab-core';\nimport type { ConsentState } from '@guardian/consent-management-platform/dist/types';\nimport type { ArticleTheme } from '@guardian/libs';\nimport { useCallback, useState } from 'react';\nimport { MaintainAspectRatio } from './common/MaintainAspectRatio';\nimport type {\n\tAdTargeting,\n\tImageSource,\n\tRoleType,\n\tVideoEventKey,\n} from './types';\nimport { YoutubeAtomOverlay } from './YoutubeAtomOverlay';\nimport { YoutubeAtomPlaceholder } from './YoutubeAtomPlaceholder';\nimport { YoutubeAtomPlayer } from './YoutubeAtomPlayer';\nimport { YoutubeAtomSticky } from './YoutubeAtomSticky';\n\ntype Props = {\n\telementId: string;\n\tvideoId: string;\n\toverrideImage?: ImageSource[];\n\tposterImage?: ImageSource[];\n\tadTargeting?: AdTargeting;\n\tconsentState?: ConsentState;\n\theight?: number;\n\twidth?: number;\n\ttitle?: string;\n\talt: string;\n\trole: RoleType;\n\tduration?: number; // in seconds\n\torigin?: string;\n\teventEmitters: Array<(event: VideoEventKey) => void>;\n\tpillar: ArticleTheme;\n\tshouldStick?: boolean;\n\tisMainMedia?: boolean;\n\timaEnabled: boolean;\n\tabTestParticipations: Participations;\n};\n\nexport const YoutubeAtom = ({\n\telementId,\n\tvideoId,\n\toverrideImage,\n\tposterImage,\n\tadTargeting,\n\tconsentState,\n\theight = 259,\n\twidth = 460,\n\talt,\n\trole,\n\ttitle,\n\tduration,\n\torigin,\n\teventEmitters,\n\tpillar,\n\tshouldStick,\n\tisMainMedia,\n\timaEnabled,\n\tabTestParticipations,\n}: Props): JSX.Element => {\n\tconst [overlayClicked, setOverlayClicked] = useState<boolean>(false);\n\tconst [playerReady, setPlayerReady] = useState<boolean>(false);\n\tconst [isActive, setIsActive] = useState<boolean>(false);\n\tconst [isClosed, setIsClosed] = useState<boolean>(false);\n\tconst [pauseVideo, setPauseVideo] = useState<boolean>(false);\n\n\tconst uniqueId = `${videoId}-${elementId}`;\n\tconst enableIma =\n\t\timaEnabled &&\n\t\t!!adTargeting &&\n\t\t!adTargeting.disableAds &&\n\t\t!!consentState &&\n\t\tconsentState.canTarget;\n\n\t/**\n\t * Update the isActive state based on video events\n\t *\n\t * @param {VideoEventKey} videoEvent the video event which triggers the callback\n\t */\n\tconst playerState = (videoEvent: VideoEventKey) => {\n\t\tswitch (videoEvent) {\n\t\t\tcase 'play':\n\t\t\tcase 'resume':\n\t\t\t\tsetPauseVideo(false);\n\t\t\t\tsetIsClosed(false);\n\t\t\t\tsetIsActive(true);\n\t\t\t\tbreak;\n\t\t\tcase 'end':\n\t\t\tcase 'cued':\n\t\t\t\tsetIsActive(false);\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * Combine the videoState and tracking event emitters\n\t */\n\tconst compositeEventEmitters = [playerState, ...eventEmitters];\n\n\tconst hasOverlay = !!(overrideImage ?? posterImage);\n\n\t/**\n\t * Show an overlay if:\n\t *\n\t * - It exists\n\t *\n\t * AND\n\t *\n\t * - It hasn't been clicked\n\t */\n\tconst showOverlay = hasOverlay && !overlayClicked;\n\n\t/**\n\t * Show a placeholder if:\n\t *\n\t * - We don't have an overlay OR the user has clicked the overlay\n\t *\n\t * AND\n\t *\n\t * - The player is not ready\n\t */\n\tconst showPlaceholder = (!hasOverlay ?? overlayClicked) && !playerReady;\n\n\tlet loadPlayer;\n\tif (!hasOverlay) {\n\t\t// load the player if there is no overlay\n\t\tloadPlayer = true;\n\t} else if (overlayClicked) {\n\t\t// load the player if the overlay has been clicked\n\t\tloadPlayer = true;\n\t} else {\n\t\tloadPlayer = false;\n\t}\n\n\t/**\n\t * Create a stable callback as it will be a useEffect dependency in YoutubeAtomPlayer\n\t */\n\tconst playerReadyCallback = useCallback(() => setPlayerReady(true), []);\n\n\treturn (\n\t\t<YoutubeAtomSticky\n\t\t\tuniqueId={uniqueId}\n\t\t\tvideoId={videoId}\n\t\t\tshouldStick={shouldStick}\n\t\t\tisActive={isActive}\n\t\t\teventEmitters={eventEmitters}\n\t\t\tsetPauseVideo={() => setPauseVideo(true)}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tisClosed={isClosed}\n\t\t\tsetIsClosed={setIsClosed}\n\t\t>\n\t\t\t<MaintainAspectRatio height={height} width={width}>\n\t\t\t\t{loadPlayer && consentState && (\n\t\t\t\t\t<YoutubeAtomPlayer\n\t\t\t\t\t\tvideoId={videoId}\n\t\t\t\t\t\tuniqueId={uniqueId}\n\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\tconsentState={consentState}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\torigin={origin}\n\t\t\t\t\t\teventEmitters={compositeEventEmitters}\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * If there is an overlay we want to autoplay\n\t\t\t\t\t\t * If there is not an overlay the user will use the YouTube player UI to play\n\t\t\t\t\t\t */\n\t\t\t\t\t\tautoPlay={hasOverlay}\n\t\t\t\t\t\tonReady={playerReadyCallback}\n\t\t\t\t\t\tenableIma={enableIma}\n\t\t\t\t\t\tpauseVideo={pauseVideo}\n\t\t\t\t\t\tdeactivateVideo={() => {\n\t\t\t\t\t\t\tsetIsActive(false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tabTestParticipations={abTestParticipations}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{showOverlay && (\n\t\t\t\t\t<YoutubeAtomOverlay\n\t\t\t\t\t\tuniqueId={uniqueId}\n\t\t\t\t\t\toverrideImage={overrideImage}\n\t\t\t\t\t\tposterImage={posterImage}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\talt={alt}\n\t\t\t\t\t\trole={role}\n\t\t\t\t\t\tduration={duration}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\tonClick={() => setOverlayClicked(true)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{showPlaceholder && <YoutubeAtomPlaceholder uniqueId={uniqueId} />}\n\t\t\t</MaintainAspectRatio>\n\t\t</YoutubeAtomSticky>\n\t);\n};\n","export type Breakpoint =\n\t| 'mobile'\n\t| 'mobileMedium'\n\t| 'mobileLandscape'\n\t| 'phablet'\n\t| 'tablet'\n\t| 'desktop'\n\t| 'leftCol'\n\t| 'wide';\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page) \n * [Design System](https://theguardian.design/2a1e5182b/p/41be19-grids)\n */\nexport const breakpoints = {\n\tmobile: 320,\n\tmobileMedium: 375,\n\tmobileLandscape: 480,\n\tphablet: 660,\n\ttablet: 740,\n\tdesktop: 980,\n\tleftCol: 1140,\n\twide: 1300,\n} as const;\n","import { breakpoints } from '../breakpoints/breakpoints';\nimport type { Breakpoint } from '../breakpoints/breakpoints';\n\nexport type BreakpointMap = {\n\t[key in Breakpoint]: string;\n};\n\nconst minWidth = (from: number): string => `@media (min-width: ${`${from}px`})`;\n\nconst maxWidth = (until: number): string =>\n\t`@media (max-width: ${`${until - 1}px`})`;\n\nconst minWidthMaxWidth = (from: number, until: number): string =>\n\t`@media (min-width: ${`${from}px`}) and (max-width: ${`${until - 1}px`})`;\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#from)\n *\n * @example\n *\tconst styles = css`\n *\t\t${from.mobileLandscape} {\n *\t\t\tpadding: 0 20px;\n *\t\t}\n * `;\n */\nexport const from: BreakpointMap = {\n\tmobile: minWidth(breakpoints.mobile),\n\tmobileMedium: minWidth(breakpoints.mobileMedium),\n\tmobileLandscape: minWidth(breakpoints.mobileLandscape),\n\tphablet: minWidth(breakpoints.phablet),\n\ttablet: minWidth(breakpoints.tablet),\n\tdesktop: minWidth(breakpoints.desktop),\n\tleftCol: minWidth(breakpoints.leftCol),\n\twide: minWidth(breakpoints.wide),\n};\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#until)\n *\n * @example\n *\tconst styles = css`\n *\t\t${until.wide} {\n *\t\t\tpadding: 0 40px;\n *\t\t}\n * `;\n */\nexport const until: BreakpointMap = {\n\tmobile: maxWidth(breakpoints.mobile),\n\tmobileMedium: maxWidth(breakpoints.mobileMedium),\n\tmobileLandscape: maxWidth(breakpoints.mobileLandscape),\n\tphablet: maxWidth(breakpoints.phablet),\n\ttablet: maxWidth(breakpoints.tablet),\n\tdesktop: maxWidth(breakpoints.desktop),\n\tleftCol: maxWidth(breakpoints.leftCol),\n\twide: maxWidth(breakpoints.wide),\n};\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#betweenand)\n *\n * @example\n *\tconst styles = css`\n *\t\t${between.phablet.and.desktop} {\n *\t\t\tpadding: 0 32px;\n *\t\t}\n * `;\n */\nexport const between = {\n\tmobile: {\n\t\tand: {\n\t\t\tmobileMedium: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t),\n\t\t\tmobileLandscape: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t),\n\t\t\tphablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.phablet),\n\t\t\ttablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.tablet),\n\t\t\tdesktop: minWidthMaxWidth(breakpoints.mobile, breakpoints.desktop),\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.mobile, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide),\n\t\t},\n\t},\n\tmobileMedium: {\n\t\tand: {\n\t\t\tmobileLandscape: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t),\n\t\t\tphablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.phablet),\n\t\t\ttablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.tablet),\n\t\t\tdesktop: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.desktop),\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide),\n\t\t},\n\t},\n\tmobileLandscape: {\n\t\tand: {\n\t\t\tphablet: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t),\n\t\t\ttablet: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.tablet),\n\t\t\tdesktop: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t),\n\t\t\tleftCol: minWidthMaxWidth(\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.leftCol,\n\t\t\t),\n\t\t\twide: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.wide),\n\t\t},\n\t},\n\tphablet: {\n\t\tand: {\n\t\t\ttablet: minWidthMaxWidth(breakpoints.phablet, breakpoints.tablet),\n\t\t\tdesktop: minWidthMaxWidth(breakpoints.phablet, breakpoints.desktop),\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.phablet, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.phablet, breakpoints.wide),\n\t\t},\n\t},\n\ttablet: {\n\t\tand: {\n\t\t\tdesktop: minWidthMaxWidth(breakpoints.tablet, breakpoints.desktop),\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.tablet, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.tablet, breakpoints.wide),\n\t\t},\n\t},\n\tdesktop: {\n\t\tand: {\n\t\t\tleftCol: minWidthMaxWidth(breakpoints.desktop, breakpoints.leftCol),\n\t\t\twide: minWidthMaxWidth(breakpoints.desktop, breakpoints.wide),\n\t\t},\n\t},\n\tleftCol: {\n\t\tand: {\n\t\t\twide: minWidthMaxWidth(breakpoints.leftCol, breakpoints.wide),\n\t\t},\n\t},\n};\n","import type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport type { AnchorHTMLAttributes } from 'react';\nimport { buttonContents } from './shared';\nimport { buttonStyles } from './styles';\nimport type { SharedButtonProps } from './types';\n\nexport interface LinkButtonProps\n\textends SharedButtonProps,\n\t\tAnchorHTMLAttributes<HTMLAnchorElement> {}\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_linkbutton--primary-priority-default-theme) \n * [Design System](https://theguardian.design/2a1e5182b/p/435225-button) \n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/button/LinkButton.tsx) \n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components)\n *\n * Buttons enable users to make choices or perform actions.\n *\n */\nexport const LinkButton = ({\n\tpriority,\n\tsize,\n\ticonSide,\n\ticon: iconSvg,\n\tnudgeIcon,\n\thideLabel,\n\tcssOverrides,\n\tchildren,\n\t...props\n}: LinkButtonProps): EmotionJSX.Element => (\n\t<a\n\t\tcss={buttonStyles({\n\t\t\tsize,\n\t\t\tpriority,\n\t\t\ticon: iconSvg,\n\t\t\thideLabel,\n\t\t\ticonSide,\n\t\t\tnudgeIcon,\n\t\t\tcssOverrides,\n\t\t})}\n\t\t{...props}\n\t>\n\t\t{buttonContents({\n\t\t\thideLabel,\n\t\t\ticonSvg,\n\t\t\tchildren,\n\t\t})}\n\t</a>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M3.011 11.883 2 12.896l5.057 7.08h.48L22 5.005l-1.011-.986L7.537 16.207l-4.526-4.324Z\"\n\t\t/>\n\t</svg>\n);\n\nexport const SvgCheckmark = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tCheckmark\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M12.015 14.042 20.707 22 22 20.709 14.06 12 22 3.291 20.707 2l-8.692 7.958L3.293 2.03 2 3.321 9.97 12 2 20.679l1.293 1.291 8.722-7.928Z\"\n\t\t/>\n\t</svg>\n);\n\nexport const SvgCross = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tClose\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M20.075 12.35v-.7L4.475 5.2l-.575.45v12.7l.575.4 15.6-6.4Z\"\n\t\t/>\n\t</svg>\n);\n\nexport const SvgMediaControlsPlay = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tPlay\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M1 10.75v2.5h22v-2.5H1Z\" />\n\t</svg>\n);\n\nexport const SvgMinus = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tMinus sign\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","// DO NOT EDIT\n// this file is auto-generated by packages/@guardian/source-react-components/scripts/create-icons/index.ts\nimport { css } from '@emotion/react';\nimport type { EmotionJSX } from '@emotion/react/types/jsx-namespace';\nimport { iconSize, visuallyHidden } from '@guardian/source-foundations';\nimport type { IconProps } from '../../src/@types/Icons';\n\nconst Svg = ({ size }: IconProps): EmotionJSX.Element => (\n\t<svg\n\t\twidth={size ? iconSize[size] : undefined}\n\t\theight={undefined}\n\t\tviewBox=\"-3 -3 30 30\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\tfocusable={false}\n\t\taria-hidden={true}\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"m10.8 13.2.425 9.8h1.525l.45-9.8 9.8-.45v-1.525l-9.8-.425-.45-9.8h-1.525l-.425 9.8-9.8.425v1.525l9.8.45Z\"\n\t\t/>\n\t</svg>\n);\n\nexport const SvgPlus = ({\n\tsize,\n\tisAnnouncedByScreenReader = false,\n}: IconProps): EmotionJSX.Element => (\n\t<>\n\t\t<Svg size={size} />\n\t\t{isAnnouncedByScreenReader ? (\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\tPlus sign\n\t\t\t</span>\n\t\t) : (\n\t\t\t''\n\t\t)}\n\t</>\n);\n","'use strict'\n\nmodule.exports = isMobile\nmodule.exports.isMobile = isMobile\nmodule.exports.default = isMobile\n\nconst mobileRE = /(android|bb\\d+|meego).+mobile|armv7l|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i\nconst notMobileRE = /CrOS/\n\nconst tabletRE = /android|ipad|playbook|silk/i\n\nfunction isMobile (opts) {\n  if (!opts) opts = {}\n  let ua = opts.ua\n  if (!ua && typeof navigator !== 'undefined') ua = navigator.userAgent\n  if (ua && ua.headers && typeof ua.headers['user-agent'] === 'string') {\n    ua = ua.headers['user-agent']\n  }\n  if (typeof ua !== 'string') return false\n\n  let result =\n    (mobileRE.test(ua) && !notMobileRE.test(ua)) ||\n    (!!opts.tablet && tabletRE.test(ua))\n\n  if (\n    !result &&\n    opts.tablet &&\n    opts.featureDetect &&\n    navigator &&\n    navigator.maxTouchPoints > 1 &&\n    ua.indexOf('Macintosh') !== -1 &&\n    ua.indexOf('Safari') !== -1\n  ) {\n    result = true\n  }\n\n  return result\n}\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","import{options as e,h as t,Fragment as r}from\"preact\";var o=/[\\s\\n\\\\/='\"\\0<>]/,a=/^xlink:?./,n=/[\"&<]/;function i(e){if(0===e.length||!1===n.test(e))return e;for(var t=0,r=0,o=\"\",a=\"\";r<e.length;r++){switch(e.charCodeAt(r)){case 34:a=\"&quot;\";break;case 38:a=\"&amp;\";break;case 60:a=\"&lt;\";break;default:continue}r!==t&&(o+=e.slice(t,r)),o+=a,t=r+1}return r!==t&&(o+=e.slice(t,r)),o}var s={},l=new Set([\"animation-iteration-count\",\"border-image-outset\",\"border-image-slice\",\"border-image-width\",\"box-flex\",\"box-flex-group\",\"box-ordinal-group\",\"column-count\",\"fill-opacity\",\"flex\",\"flex-grow\",\"flex-negative\",\"flex-order\",\"flex-positive\",\"flex-shrink\",\"flood-opacity\",\"font-weight\",\"grid-column\",\"grid-row\",\"line-clamp\",\"line-height\",\"opacity\",\"order\",\"orphans\",\"stop-opacity\",\"stroke-dasharray\",\"stroke-dashoffset\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke-width\",\"tab-size\",\"widows\",\"z-index\",\"zoom\"]),c=/[A-Z]/g;function u(e){var t=\"\";for(var r in e){var o=e[r];if(null!=o&&\"\"!==o){var a=\"-\"==r[0]?r:s[r]||(s[r]=r.replace(c,\"-$&\").toLowerCase()),n=\";\";\"number\"!=typeof o||a.startsWith(\"--\")||l.has(a)||(n=\"px;\"),t=t+a+\":\"+o+n}}return t||void 0}var f,_,p,d,v=[],h=Array.isArray,g=Object.assign;function y(o,a){var n=e.__s;e.__s=!0,f=e.__b,_=e.diffed,p=e.__r,d=e.unmount;var i=t(r,null);i.__k=[o];try{return x(o,a||b,!1,void 0,i)}finally{e.__c&&e.__c(o,v),e.__s=n,v.length=0}}function m(){this.__d=!0}var b={};function k(e,t){var r=e.type,o=new r(e.props,t);return e.__c=o,o.__v=e,o.props=e.props,o.context=t,o.__d=!0,null==o.state&&(o.state=b),null==o.__s&&(o.__s=o.state),r.getDerivedStateFromProps?o.state=g({},o.state,r.getDerivedStateFromProps(o.props,o.state)):o.componentWillMount&&(o.componentWillMount(),o.state=o.__s!==o.state?o.__s:o.state),p&&p(e),o.render(o.props,o.state,t)}function x(e,t,n,s,l){if(null==e||!0===e||!1===e||\"\"===e)return\"\";if(\"object\"!=typeof e)return\"function\"==typeof e?\"\":i(e+\"\");if(h(e)){var c=\"\";l.__k=e;for(var v=0;v<e.length;v++){var y=e[v];null!=y&&\"boolean\"!=typeof y&&(c+=x(y,t,n,s,l))}return c}if(void 0!==e.constructor)return\"\";e.__=l,f&&f(e);var b,S,j,A=e.type,L=e.props,M=t;if(\"function\"==typeof A){if(A===r)S=L.children;else{if(null!=(b=A.contextType)){var z=t[b.__c];M=z?z.props.value:b.__}if(A.prototype&&\"function\"==typeof A.prototype.render)S=k(e,M),j=e.__c;else{e.__c=j={__v:e,props:L,context:M,setState:m,forceUpdate:m,__d:!0,__h:[]};for(var F=0;j.__d&&F++<25;)j.__d=!1,p&&p(e),S=A.call(j,L,M);j.__d=!0}null!=j.getChildContext&&(t=g({},t,j.getChildContext()))}var T=x(S=null!=S&&S.type===r&&null==S.key?S.props.children:S,t,n,s,e);return _&&_(e),e.__=void 0,d&&d(e),T}var W,D=\"<\"+A,H=\"\";for(var O in L){var P=L[O];switch(O){case\"children\":W=P;continue;case\"key\":case\"ref\":case\"__self\":case\"__source\":continue;case\"htmlFor\":if(\"for\"in L)continue;O=\"for\";break;case\"className\":if(\"class\"in L)continue;O=\"class\";break;case\"defaultChecked\":O=\"checked\";break;case\"defaultSelected\":O=\"selected\";break;case\"defaultValue\":case\"value\":switch(O=\"value\",A){case\"textarea\":W=P;continue;case\"select\":s=P;continue;case\"option\":s!=P||\"selected\"in L||(D+=\" selected\")}break;case\"dangerouslySetInnerHTML\":H=P&&P.__html;continue;case\"style\":\"object\"==typeof P&&(P=u(P));break;default:if(n&&a.test(O))O=O.toLowerCase().replace(w,\"xlink:\");else{if(o.test(O))continue;\"-\"!==O[4]&&\"draggable\"!==O||null==P||(P+=\"\")}}null!=P&&!1!==P&&\"function\"!=typeof P&&(D=!0===P||\"\"===P?D+\" \"+O:D+\" \"+O+'=\"'+i(P+\"\")+'\"')}if(o.test(A))throw new Error(A+\" is not a valid HTML tag name in \"+D+\">\");return H||(\"string\"==typeof W?H=i(W):null!=W&&!1!==W&&!0!==W&&(H=x(W,t,\"svg\"===A||\"foreignObject\"!==A&&n,s,e))),_&&_(e),e.__=void 0,d&&d(e),!H&&C.has(A)?D+\"/>\":D+\">\"+H+\"</\"+A+\">\"}var w=/^xlink:?/,C=new Set([\"area\",\"base\",\"br\",\"col\",\"command\",\"embed\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"]),S=y,j=y;export default y;export{S as render,j as renderToStaticMarkup,y as renderToString};\n//# sourceMappingURL=index.module.js.map\n"],"names":["ArticlePillar","sport","culture","lifestyle","ArticleSpecial","news","neutral","kickerStyle","pillarPalette","pillar","headline","fontWeight","titleStyle","audioBodyStyle","audioElementStyle","audioControlsStyle","buttonStyle","svgPlayStyle","svgPauseStyle","timingStyle","timePlayedStyle","progressBarStyle","progressBarInputStyle","timeDurationStyle","timeStyles","textSans","format","formatTime","t","second","Math","minute","floor","hour","PauseSVG","PlaySVG","jsx","css","width","height","viewBox","children","_jsxs","fill","fillRule","cx","cy","r","_jsx","buildUrl","basicUrl","shouldUseAcast","AudioAtom","audioEl","useRef","useState","isPlaying","percentPlayed","useEffect","updateCurrentTimeAndPosition","currentTime","duration","setPercentPlayed","setCurrentTime","addEventListener","undefined","updateDurationTime","removeEventListener","keyListener","e","document","activeElement","current","setUrlToUse","jsxs","setIsPlaying","pause","play","pauseAudio","space","size","isAnnouncedByScreenReader","visuallyHidden","creditStyling","bodyStyling","body","linkStyling","Body","image","__html","plusStyling","minusStyling","iconSpacing","Summary","atomTitleStyling","lineHeight","expandEventSent","setExpandEventFired","expandCallback","setHasBeenExpanded","detailStyling","primary","Container","Footer","likeHandler","setShowThankYou","buttonStyling","dislikeHandler","submitComponentEvent","componentEvent","window","guardian","ophan","record","console","log","id","title","design","atomTypeTitle","expandForStorybook","component","componentType","products","labels","action","fontStyles","answerWithSVGStyles","WhiteCheckmark","text","supplementText","BlackText","CorrectSelectedAnswer","IncorrectAnswer","correctNonSelectedAnswerStyles","NonSelectedCorrectAnswer","UnselectedAnswer","SvgFacebook","SvgTwitter","SvgEnvelope","SvgWhatsApp","SvgLinkedIn","SvgPinterest","mobileOnlyShareIconsListItem","from","SharingIcons","facebook","twitter","email","whatsApp","messenger","SvgMessenger","linkedIn","pinterest","mobileOnlyIcons","shareList","icon","icons","sharingUrl","sharingUrls","Icon","mobileOnly","shareListItem","url","userMessage","KnowledgeQuizAtom","quizSelection","setQuizSelection","haveAllQuestionsBeenAnswered","Question","selectedAnswerId","setSelectedAnswerId","hasSubmitted","selectedAnswer","theme","setHasSubmitted","keyCode","Answers","Fragment","answer","resultWrapperStyles","resultDescriptionStyles","resultsNumberStyles","brand","resultHeaderStyles","Result","totalNumberOfQuestions","Object","numberOfCorrectAnswers","keys","filter","totalResultGroups","resultBrackets","minScore","resultGroups","resultGroup","bestResultGroup","b","i","bracketIndex","PersonalityQuizAtom","selectedGlobalAnswers","setSelectedGlobalAnswers","hasSubmittedAnswers","setHasSubmittedAnswers","hasMissingAnswers","setHasMissingAnswers","topSelectedResult","setTopSelectedResult","onSubmit","preventDefault","findMostReferredToBucketId","bucketIdWithHighestCount","map","selectedQuestion","answerId","questionId","find","answerFromQuestion","bucketCounter","currentHighestBucket","thisBucket","bucketId","questions","resultBuckets","question","PersonalityQuizAnswers","updateSelectedAnswer","globallySelectedAnswer","setSelectedAnswers","AnswersGroup","radioButtonWrapperStyles","_youtubeAPIReadyPromise","MissingAnswers","EventTitle","EventDateBullet","EventDate","EventToDate","brandAlt","TimelineContents","events","time","toTime","event","toUnixDate","TimelineAtom","enforceTwoDigitString","number","getSourcesForRoleAndResolution","srcSetItems","srcSet","resolution","set","src","includes","getSources","Picture","hdpiSources","imageSources","mdpiSources","fallbackSrc","getFallback","best","sizes","role","breakpoints","isMainMedia","playButtonStyling","overlayInfoWrapperStyles","videoDurationStyles","YoutubeAtomOverlay","videoDurationInSeconds","hours","minutes","seconds","hoursString","minutesString","secondsString","uniqueId","loadScripts","scripts","loadScript","_scriptsPromise","resolve","loadYouTubeAPI","Promise","youtubeAPIReadyPromise","YTAPI","playerPromise","reject","then","player","catch","playVideo","pauseVideo","stopVideo","eventName","dispatchCustomPlayEvent","detail","YoutubeAtomPlayer","progressEvents","hasSentPlayEvent","hasSent25Event","hasSent50Event","hasSent75Event","hasSentEndEvent","playerReadyCallback","setPlayerReady","playerListeners","imaManager","adsManager","imaAdContainerId","videoId","embedConfig","relatedChannels","adsConfig","disabledAds","buildAdsConfigWithConsent","adUnit","clientSideParticipations","abTestParticipations","consentState","customParams","isAdFreeUser","enableIma","disableRelatedVideos","instantiateImaManager","createInstantiateImaManager","adTargetingEnabled","adTargeting","YT","adsRequest","adsRenderingSettings","getAdsManager","onReadyListener","msg","onReadyCallback","onStateChangeListener","loggerFrom","eventEmitters","setTimeout","checkProgress","playerVars","modestbranding","origin","playsinline","rel","onReady","onStateChange","getPlayerState","playerStatePromise","PlayerState","playerState","customListeners","handleCustomPlayEvent","push","listener","autoPlay","useLayoutEffect","playerListener","stickyContainerStyles","isMobile","YoutubeAtomSticky","isSticky","stickEventSent","showOverlay","isInView","setIsInView","node","observer","entry","intersectionCallback","libDebounce","intersectionFn","currentObserver","setNode","useIsInView","threshold","repeat","debounce","isIntersecting","handleCloseClick","handleKeydown","setIsSticky","isActive","setStickEventSent","setShowOverlay","stickyStyles","showCloseButton","ref","setRef","hoverAreaWidth","overlayClicked","playerReady","isClosed","setIsClosed","imaEnabled","disableAds","videoEvent","setPauseVideo","setIsActive","hasOverlay","overrideImage","shouldStick","mobile","mobileMedium","mobileLandscape","phablet","tablet","desktop","leftCol","wide","maxWidth","until","minWidthMaxWidth","minWidth","and","priority","hideLabel","iconSide","nudgeIcon","cssOverrides","props","iconSvg","SvgCheckmark","SvgCross","SvgMediaControlsPlay","SvgMinus","SvgPlus","Svg","module","exports","mobileRE","notMobileRE","tabletRE","opts","ua","navigator","userAgent","headers","result","test","featureDetect","maxTouchPoints","indexOf","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","g","freeSelf","self","root","Function","objectToString","prototype","toString","nativeMax","max","nativeMin","min","now","Date","isObject","value","type","toNumber","isObjectLike","call","isSymbol","other","valueOf","replace","isBinary","slice","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","args","thisArg","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","remainingWait","debounced","isInvoking","arguments","this","leadingEdge","cancel","clearTimeout","flush","Set"],"sourceRoot":""}