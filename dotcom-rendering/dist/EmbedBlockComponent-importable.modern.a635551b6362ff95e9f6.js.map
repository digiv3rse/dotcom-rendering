{"version":3,"file":"EmbedBlockComponent-importable.modern.a635551b6362ff95e9f6.js","mappings":"qIAmBA,SAASA,EAAWC,EAAaC,EAAcC,GAC9C,OAAOF,EAAIE,QAAQ,IAAIC,OALxB,SAAsBH,GACrB,OAAOA,EAAIE,QAAQ,4BAA6B,OACjD,CAG+BE,CAAaH,GAAO,KAAMC,EACzD,C,iBAEO,MAQMG,EAAgBC,IAC5B,IAAIC,EAAYD,EAIhB,OAHAC,EAAYR,EAAWQ,EAAW,SAAU,WAC5CA,EAAYR,EAAWQ,EAAW,YAAa,WAC/CA,EAAYR,EAAWQ,EAAW,aAAc,YACzCA,CAAS,C,k3BCfjB,MAeMC,EAAoBC,IACzB,OAAQA,GACP,IAAK,YACL,IAAK,SACL,IAAK,WACJ,OAAOC,EAAAA,GAAAA,MAAe,CACrBC,WAAY,OACZC,WAAY,YAGd,IAAK,YACL,IAAK,aACL,IAAK,YACJ,OAAOF,EAAAA,GAAAA,OAAgB,CACtBC,WAAY,OACZC,WAAY,YAGf,EAGKC,EAAkBJ,IACvB,OAAQA,GACP,IAAK,YACL,IAAK,SACL,IAAK,WACJ,MAAO,UAER,IAAK,YACL,IAAK,aACJ,MAAO,QACR,IAAK,YACJ,MAAO,SAET,EAGKK,EAAkBL,IACvB,OAAQA,GACP,IAAK,YACL,IAAK,SACL,IAAK,WACL,IAAK,YACL,IAAK,aACJ,MAAO,qBAER,IAAK,YACJ,MAAO,QAET,EAqBYM,EAAe,I,IAAA,SAC3BC,EAAQ,KACRP,EAAO,SAAQ,SACfQ,EAAQ,WACRC,EAAU,YACVC,EAAW,OACXC,EAAM,aACNC,EAAe,WACR,EACP,MAAOC,EAAkBC,IAAuBC,EAAAA,EAAAA,WAAkB,GAS5DC,EAvGc,CAAChB,IACrB,OAAQA,GACP,IAAK,YACL,IAAK,SACL,IAAK,WACJ,OAAOC,EAAAA,GAAAA,OAAgB,CAAEE,WAAY,YAEtC,IAAK,YACL,IAAK,aACL,IAAK,YACJ,OAAOF,EAAAA,GAAAA,MAAe,CAAEE,WAAY,YAEtC,EA2FiBc,CAAajB,GAE9B,MAtC4B,CAAC,I,IAAA,WAC7BS,EAAU,iBACVI,EAAgB,YAChBH,GAKA,EACA,QAAIA,IAAgBD,GAGhBI,EAGO,EAwBVK,CAAqB,CACpBT,aACAI,mBACAH,iBAIA,UAACS,MAAAA,CACAC,KAAKA,EAAAA,EAAAA,KAAGA,IAEOC,EAAAA,GAAAA,UACMC,EAAAA,GAAAA,UAITC,EAAAA,EAAAA,GAAcA,EAAAA,EAAAA,GAAcA,EAAAA,EAAAA,GACtBA,EAAAA,EAAAA,IAElBC,iBAAgB,iBAA8B,OAAbZ,G,WAEjC,SAACO,MAAAA,CACAC,KAAKA,EAAAA,EAAAA,KAAGA,IACLrB,EAAiBC,GACFuB,EAAAA,EAAAA,I,SAGjBZ,EACE,SAAgB,OAAPA,EAAO,aAChB,8CAEJ,SAACc,IAAAA,CACAL,KAAKA,EAAAA,EAAAA,KAAGA,IACLJ,G,SAGFL,GACA,sB,UAAE,6CAC0CA,EAAO,qIAGd,KACpC,SAACe,SAAAA,C,SAAO,+BAEC,QAIV,sB,UAAE,0CACuC,IACvCd,EAAa,6IAGL,KACT,SAACc,SAAAA,C,SAAO,+BAEC,UAKZ,SAACP,MAAAA,CACAC,KAAKA,EAAAA,EAAAA,KAAGA,IACOG,EAAAA,EAAAA,I,UAGf,SAACI,EAAAA,EAAMA,CACNC,SAAS,UACTC,KAAMzB,EAAeJ,GACrB8B,MAAM,SAACC,EAAAA,EAAYA,CAAAA,GACnBC,SAAS,OACTC,QAAS,KA/EbnB,GAAoB,QAChBN,GACH0B,YAAW,IAAM1B,QA8Ed2B,UAAQ,uBACRC,iBAAe,e,SAEd/B,EAAeL,WAMd,qB,SAAGO,G,yxBC/LX,MAAM8B,GAAoBjB,EAAAA,EAAAA,KAAGA,IAC1BnB,EAAAA,GAAAA,UAEOqC,EAAAA,GAAAA,WACSf,EAAAA,EAAAA,IAGbgB,EAAwBC,IAA0BpB,EAAAA,EAAAA,KAAGA,IAExDoB,GACF,qCAEe,OAAZC,EAAAA,GAAAA,OAAY,qEASZD,GAAiB,qBAIRE,EAAuB,I,IAAA,KACnCC,EAAI,QACJC,EAAO,KACP5C,EAAI,WACJS,EAAU,YACVC,EAAW,OACXC,EAAM,aACNC,GACO,EAEP,MAAM4B,EAAeG,EAAKE,SAAS,cACnC,OACC,SAACvC,EAAAA,EAAWA,CACXN,KAAMA,EACNS,WAAYA,EACZC,YAAaA,EACbC,OAAQA,EACRC,aAAcA,E,UAEd,UAACO,MAAAA,CAAIgB,UAAQ,cAAcf,IAAKmB,EAAqBC,G,aAChDA,IAAgBI,KACnB,SAACzB,MAAAA,CACAC,IAAKiB,EACLS,wBAAyB,CACxBC,OAAQH,MAIX,SAACzB,MAAAA,CAAI2B,wBAAyB,CAAEC,QAAQnD,EAAAA,EAAAA,GAAa+C,U,kCCjEzD,MAAMK,EAAc,CAChBC,OAAQ,IACRC,aAAc,IACdC,gBAAiB,IACjBC,QAAS,IACTC,OAAQ,IACRC,QAAS,IACTC,QAAS,KACTC,KAAM,K,kECVV,MAAMC,EAAYhB,GAAS,sBAAkC,OAAZ,GAAQ,OAALA,EAAK,MAAI,KACvDiB,EAAYC,GAAU,sBAAuC,OAAjB,GAAa,OAAVA,EAAQ,EAAE,MAAI,KAC7DC,EAAmB,CAACnB,EAAMkB,IAAU,sBAAsD,OAAhC,GAAQ,OAALlB,EAAK,MAAI,sBAAqC,OAAjB,GAAa,OAAVkB,EAAQ,EAAE,MAAI,KAW3GlB,EAAO,CACTQ,OAAQQ,EAAST,EAAAA,EAAAA,QACjBE,aAAcO,EAAST,EAAAA,EAAAA,cACvBG,gBAAiBM,EAAST,EAAAA,EAAAA,iBAC1BI,QAASK,EAAST,EAAAA,EAAAA,SAClBK,OAAQI,EAAST,EAAAA,EAAAA,QACjBM,QAASG,EAAST,EAAAA,EAAAA,SAClBO,QAASE,EAAST,EAAAA,EAAAA,SAClBQ,KAAMC,EAAST,EAAAA,EAAAA,OAYbW,EAAQ,CACVV,OAAQS,EAASV,EAAAA,EAAAA,QACjBE,aAAcQ,EAASV,EAAAA,EAAAA,cACvBG,gBAAiBO,EAASV,EAAAA,EAAAA,iBAC1BI,QAASM,EAASV,EAAAA,EAAAA,SAClBK,OAAQK,EAASV,EAAAA,EAAAA,QACjBM,QAASI,EAASV,EAAAA,EAAAA,SAClBO,QAASG,EAASV,EAAAA,EAAAA,SAClBQ,KAAME,EAASV,EAAAA,EAAAA,OAYba,EAAU,CACZZ,OAAQ,CACJa,IAAK,CACDZ,aAAcU,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,cACnDG,gBAAiBS,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,iBACtDI,QAASQ,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,SAC9CK,OAAQO,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,QAC7CM,QAASM,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,SAC9CO,QAASK,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,SAC9CQ,KAAMI,EAAiBZ,EAAAA,EAAAA,aAA0BA,EAAAA,EAAAA,QAGzDE,aAAc,CACVY,IAAK,CACDX,gBAAiBS,EAAiBZ,EAAAA,EAAAA,aAA0BA,EAAAA,EAAAA,iBAC5DI,QAASQ,EAAiBZ,EAAAA,EAAAA,aAA0BA,EAAAA,EAAAA,SACpDK,OAAQO,EAAiBZ,EAAAA,EAAAA,aAA0BA,EAAAA,EAAAA,QACnDM,QAASM,EAAiBZ,EAAAA,EAAAA,aAA0BA,EAAAA,EAAAA,SACpDO,QAASK,EAAiBZ,EAAAA,EAAAA,aAA0BA,EAAAA,EAAAA,SACpDQ,KAAMI,EAAiBZ,EAAAA,EAAAA,aAA0BA,EAAAA,EAAAA,QAGzDG,gBAAiB,CACbW,IAAK,CACDV,QAASQ,EAAiBZ,EAAAA,EAAAA,gBAA6BA,EAAAA,EAAAA,SACvDK,OAAQO,EAAiBZ,EAAAA,EAAAA,gBAA6BA,EAAAA,EAAAA,QACtDM,QAASM,EAAiBZ,EAAAA,EAAAA,gBAA6BA,EAAAA,EAAAA,SACvDO,QAASK,EAAiBZ,EAAAA,EAAAA,gBAA6BA,EAAAA,EAAAA,SACvDQ,KAAMI,EAAiBZ,EAAAA,EAAAA,gBAA6BA,EAAAA,EAAAA,QAG5DI,QAAS,CACLU,IAAK,CACDT,OAAQO,EAAiBZ,EAAAA,EAAAA,QAAqBA,EAAAA,EAAAA,QAC9CM,QAASM,EAAiBZ,EAAAA,EAAAA,QAAqBA,EAAAA,EAAAA,SAC/CO,QAASK,EAAiBZ,EAAAA,EAAAA,QAAqBA,EAAAA,EAAAA,SAC/CQ,KAAMI,EAAiBZ,EAAAA,EAAAA,QAAqBA,EAAAA,EAAAA,QAGpDK,OAAQ,CACJS,IAAK,CACDR,QAASM,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,SAC9CO,QAASK,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,SAC9CQ,KAAMI,EAAiBZ,EAAAA,EAAAA,OAAoBA,EAAAA,EAAAA,QAGnDM,QAAS,CACLQ,IAAK,CACDP,QAASK,EAAiBZ,EAAAA,EAAAA,QAAqBA,EAAAA,EAAAA,SAC/CQ,KAAMI,EAAiBZ,EAAAA,EAAAA,QAAqBA,EAAAA,EAAAA,QAGpDO,QAAS,CACLO,IAAK,CACDN,KAAMI,EAAiBZ,EAAAA,EAAAA,QAAqBA,EAAAA,EAAAA,Q,4LChGxD,MAAMrB,EAAU,I,SAAA,SAAEC,EAAQ,KAAEC,EAAMC,KAAMiC,EAAO,SAAE/B,EAAQ,UAAEgC,EAAS,UAAEC,EAAS,KAAEC,EAAO,SAAQ,UAAEC,GAAY,EAAK,oBAAEC,EAAsB,UAAS,aAAEC,EAAY,SAAE9D,GAAoB,EAAP+D,E,kXAAAA,CAAAA,EAAAA,CAA/J1C,WAAUC,OAAMC,OAAeE,WAAUgC,YAAWC,YAAWC,OAAiBC,YAAmBC,sBAAiCC,eAAc9D,a,OAA0BgE,EAAAA,EAAAA,KAAI,U,wUAAU,EAAEnD,KAAKoD,EAAAA,EAAAA,GAAa,CACxN3C,OACAD,WACAE,KAAMiC,EACNC,YACAhC,WACAiC,YACAI,eACAF,cACAD,KAAMA,EAAM,YAAa,SAAU,aAAcC,EAAYC,OAAsBK,GAAcH,G,WAAAA,CAAO/D,UAAUmE,EAAAA,EAAAA,GAAe,CACjIV,YACAD,UACAI,YACA5D,e,wlBCtBR,MAAMoE,EAAO,I,IAAA,KAAE9C,GAAM,E,OAAM0C,EAAAA,EAAAA,KAAI,MAAO,CAAEK,MAAO/C,EAAOgD,EAAAA,GAAShD,QAAQ4C,EAAWK,YAAQL,EAAWM,QAAS,cAAeC,MAAO,6BAA8BC,WAAW,EAAO,eAAe,EAAM1E,UAAUgE,EAAAA,EAAAA,KAAI,OAAQ,CAAEW,SAAU,UAAWC,SAAU,UAAWC,EAAG,2FAA6F,EACrWrD,EAAgB,I,IAAA,KAAEF,EAAI,0BAAEwD,GAA4B,GAAQ,E,OAAMC,EAAAA,EAAAA,MAAKC,EAAAA,SAAU,CAAEhF,SAAU,EAACgE,EAAAA,EAAAA,KAAII,EAAK,CAAE9C,KAAMA,IAASwD,GAA6Bd,EAAAA,EAAAA,KAAI,OAAQ,CAAEnD,KAAKA,EAAAA,EAAAA,KAAGA,IAC1KoE,EAAAA,GACAjF,SAAU,cAAmB,KAAO,C","sources":["webpack://@guardian/dotcom-rendering/./src/lib/escapeData.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/ClickToView.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/EmbedBlockComponent.importable.tsx","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-foundations/esm/breakpoints/breakpoints.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-foundations/esm/mq/mq.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/src/button/Button.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/vendor/icons/SvgCheckmark.js"],"sourcesContent":["/**\n * Create an escapedData string that can be safely placed inside script tags on the page\n *\n * The level of sanitisation here is limited to escaping script tags to prevent\n * errors when embedded html string contain their own script tags.\n *\n * See: https://www.w3.org/TR/html52/semantics-scripting.html#restrictions-for-contents-of-script-elements\n *\n *  > The easiest and safest way to avoid the rather strange restrictions described in this section is to\n *  > always escape \"&lt;!--\" as \"&lt;\\!--\", \"&lt;script\" as \"&lt;\\script\", and \"&lt;/script\" as \"&lt;\\/script\"\n *\n * TODO: This could be extended\n */\n\n// See: https://stackoverflow.com/a/1144788\nfunction escapeRegExp(str: string): string {\n\treturn str.replace(/([.*+?^=!:${}()|[\\]/\\\\])/g, '\\\\$1');\n}\n\nfunction replaceAll(str: string, find: string, replace: string): string {\n\treturn str.replace(new RegExp(escapeRegExp(find), 'g'), replace);\n}\n\nexport const escapeData = (data: string): string => {\n\tlet escaped = data;\n\tescaped = replaceAll(escaped, '<!--', '<\\\\!--');\n\tescaped = replaceAll(escaped, '<script', '<\\\\script');\n\tescaped = replaceAll(escaped, '</script', '<\\\\/script');\n\treturn escaped;\n};\n\nexport const unescapeData = (data: string): string => {\n\tlet unescaped = data;\n\tunescaped = replaceAll(unescaped, '<\\\\!--', '<!--');\n\tunescaped = replaceAll(unescaped, '<\\\\script', '<script');\n\tunescaped = replaceAll(unescaped, '<\\\\/script', '</script');\n\treturn unescaped;\n};\n","import { css } from '@emotion/react';\nimport {\n\tbackground,\n\tborder,\n\tspace,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { Button, SvgCheckmark } from '@guardian/source-react-components';\nimport { useState } from 'react';\nimport type { RoleType } from '../../types/content';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\trole?: RoleType;\n\tonAccept?: () => void;\n\tisTracking: boolean;\n\tisMainMedia?: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nconst roleTextSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn textSans.medium({ lineHeight: 'regular' });\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\tcase 'thumbnail': {\n\t\t\treturn textSans.small({ lineHeight: 'regular' });\n\t\t}\n\t}\n};\n\nconst roleHeadlineSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn textSans.large({\n\t\t\t\tfontWeight: 'bold',\n\t\t\t\tlineHeight: 'regular',\n\t\t\t});\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\tcase 'thumbnail': {\n\t\t\treturn textSans.medium({\n\t\t\t\tfontWeight: 'bold',\n\t\t\t\tlineHeight: 'regular',\n\t\t\t});\n\t\t}\n\t}\n};\n\nconst roleButtonSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn 'default';\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\t\treturn 'small';\n\t\tcase 'thumbnail': {\n\t\t\treturn 'xsmall';\n\t\t}\n\t}\n};\n\nconst roleButtonText = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase':\n\t\tcase 'halfWidth':\n\t\tcase 'supporting': {\n\t\t\treturn 'Allow and continue';\n\t\t}\n\t\tcase 'thumbnail': {\n\t\t\treturn 'Allow';\n\t\t}\n\t}\n};\n\nconst shouldDisplayOverlay = ({\n\tisTracking,\n\tisOverlayClicked,\n\tisMainMedia,\n}: {\n\tisTracking: boolean;\n\tisOverlayClicked: boolean;\n\tisMainMedia?: boolean;\n}) => {\n\tif (isMainMedia || !isTracking) {\n\t\treturn false;\n\t}\n\tif (isOverlayClicked) {\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nexport const ClickToView = ({\n\tchildren,\n\trole = 'inline',\n\tonAccept,\n\tisTracking,\n\tisMainMedia,\n\tsource,\n\tsourceDomain = 'unknown',\n}: Props) => {\n\tconst [isOverlayClicked, setIsOverlayClicked] = useState<boolean>(false);\n\n\tconst handleClick = () => {\n\t\tsetIsOverlayClicked(true);\n\t\tif (onAccept) {\n\t\t\tsetTimeout(() => onAccept());\n\t\t}\n\t};\n\n\tconst textSize = roleTextSize(role);\n\n\tif (\n\t\tshouldDisplayOverlay({\n\t\t\tisTracking,\n\t\t\tisOverlayClicked,\n\t\t\tisMainMedia,\n\t\t})\n\t) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tbackground: ${background.secondary};\n\t\t\t\t\tborder: 1px solid ${border.secondary};\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tpadding: ${space[1]}px ${space[6]}px ${space[3]}px;\n\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t`}\n\t\t\t\tdata-component={`click-to-view:${sourceDomain}`}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${roleHeadlineSize(role)}\n\t\t\t\t\t\tmargin-bottom: ${space[1]}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{source\n\t\t\t\t\t\t? `Allow ${source} content?`\n\t\t\t\t\t\t: 'Allow content provided by a third party?'}\n\t\t\t\t</div>\n\t\t\t\t<p\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${textSize}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{source ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\tThis article includes content provided by {source}.\n\t\t\t\t\t\t\tWe ask for your permission before anything is\n\t\t\t\t\t\t\tloaded, as they may be using cookies and other\n\t\t\t\t\t\t\ttechnologies. To view this content,{' '}\n\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\tclick &apos;Allow and continue&apos;\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\tThis article includes content hosted on{' '}\n\t\t\t\t\t\t\t{sourceDomain}. We ask for your permission before\n\t\t\t\t\t\t\tanything is loaded, as the provider may be using\n\t\t\t\t\t\t\tcookies and other technologies. To view this\n\t\t\t\t\t\t\tcontent,{' '}\n\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\tclick &apos;Allow and continue&apos;\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-top: ${space[5]}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\tsize={roleButtonSize(role)}\n\t\t\t\t\t\ticon={<SvgCheckmark />}\n\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\tonClick={() => handleClick()}\n\t\t\t\t\t\tdata-cy=\"click-to-view-button\"\n\t\t\t\t\t\tdata-link-name=\"allow-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{roleButtonText(role)}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\treturn <>{children}</>;\n};\n","import { css } from '@emotion/react';\nimport { from, space, text, textSans } from '@guardian/source-foundations';\nimport { unescapeData } from '../../lib/escapeData';\nimport type { RoleType } from '../../types/content';\nimport { ClickToView } from './ClickToView';\n\ntype Props = {\n\thtml: string;\n\tcaption?: string;\n\trole?: RoleType;\n\tisTracking: boolean;\n\tisMainMedia?: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nconst emailCaptionStyle = css`\n\t${textSans.xxsmall()};\n\tword-break: break-all;\n\tcolor: ${text.supporting};\n\tpadding-bottom: ${space[1]}px;\n`;\n\nconst embedContainerStyles = (isEmailEmbed: boolean) => css`\n\t/* By using inline-block we keep email embed content together if a rich link is placed inline nearby */\n\t${isEmailEmbed &&\n\t`\n\t\tdisplay: inline-block;\n\t\t${from.tablet}{\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t}\n\t`}\n\tiframe {\n\t\t/* Some embeds can hijack the iframe and calculate an incorrect width, which pushes the body out */\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\twidth: 100% !important;\n\t\t${isEmailEmbed && `min-height: 60px;`}\n\t}\n`;\n\nexport const EmbedBlockComponent = ({\n\thtml,\n\tcaption,\n\trole,\n\tisTracking,\n\tisMainMedia,\n\tsource,\n\tsourceDomain,\n}: Props) => {\n\t// TODO: Email embeds are being turned into atoms, so we can remove this hack when that happens\n\tconst isEmailEmbed = html.includes('email/form');\n\treturn (\n\t\t<ClickToView\n\t\t\trole={role}\n\t\t\tisTracking={isTracking}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tsource={source}\n\t\t\tsourceDomain={sourceDomain}\n\t\t>\n\t\t\t<div data-cy=\"embed-block\" css={embedContainerStyles(isEmailEmbed)}>\n\t\t\t\t{!!(isEmailEmbed && caption) && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={emailCaptionStyle}\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t__html: caption,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t<div dangerouslySetInnerHTML={{ __html: unescapeData(html) }} />\n\t\t\t</div>\n\t\t</ClickToView>\n\t);\n};\n","/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page) •\n * [Design System](https://theguardian.design/2a1e5182b/p/41be19-grids)\n */\nconst breakpoints = {\n    mobile: 320,\n    mobileMedium: 375,\n    mobileLandscape: 480,\n    phablet: 660,\n    tablet: 740,\n    desktop: 980,\n    leftCol: 1140,\n    wide: 1300,\n};\n\nexport { breakpoints };\n//# sourceMappingURL=breakpoints.js.map\n","import { breakpoints } from '../breakpoints/breakpoints.js';\n\nconst minWidth = (from) => `@media (min-width: ${`${from}px`})`;\nconst maxWidth = (until) => `@media (max-width: ${`${until - 1}px`})`;\nconst minWidthMaxWidth = (from, until) => `@media (min-width: ${`${from}px`}) and (max-width: ${`${until - 1}px`})`;\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#from)\n *\n * @example\n *\tconst styles = css`\n *\t\t${from.mobileLandscape} {\n *\t\t\tpadding: 0 20px;\n *\t\t}\n * `;\n */\nconst from = {\n    mobile: minWidth(breakpoints.mobile),\n    mobileMedium: minWidth(breakpoints.mobileMedium),\n    mobileLandscape: minWidth(breakpoints.mobileLandscape),\n    phablet: minWidth(breakpoints.phablet),\n    tablet: minWidth(breakpoints.tablet),\n    desktop: minWidth(breakpoints.desktop),\n    leftCol: minWidth(breakpoints.leftCol),\n    wide: minWidth(breakpoints.wide),\n};\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#until)\n *\n * @example\n *\tconst styles = css`\n *\t\t${until.wide} {\n *\t\t\tpadding: 0 40px;\n *\t\t}\n * `;\n */\nconst until = {\n    mobile: maxWidth(breakpoints.mobile),\n    mobileMedium: maxWidth(breakpoints.mobileMedium),\n    mobileLandscape: maxWidth(breakpoints.mobileLandscape),\n    phablet: maxWidth(breakpoints.phablet),\n    tablet: maxWidth(breakpoints.tablet),\n    desktop: maxWidth(breakpoints.desktop),\n    leftCol: maxWidth(breakpoints.leftCol),\n    wide: maxWidth(breakpoints.wide),\n};\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_media-queries--page#betweenand)\n *\n * @example\n *\tconst styles = css`\n *\t\t${between.phablet.and.desktop} {\n *\t\t\tpadding: 0 32px;\n *\t\t}\n * `;\n */\nconst between = {\n    mobile: {\n        and: {\n            mobileMedium: minWidthMaxWidth(breakpoints.mobile, breakpoints.mobileMedium),\n            mobileLandscape: minWidthMaxWidth(breakpoints.mobile, breakpoints.mobileLandscape),\n            phablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.phablet),\n            tablet: minWidthMaxWidth(breakpoints.mobile, breakpoints.tablet),\n            desktop: minWidthMaxWidth(breakpoints.mobile, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.mobile, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide),\n        },\n    },\n    mobileMedium: {\n        and: {\n            mobileLandscape: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.mobileLandscape),\n            phablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.phablet),\n            tablet: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.tablet),\n            desktop: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.mobileMedium, breakpoints.wide),\n        },\n    },\n    mobileLandscape: {\n        and: {\n            phablet: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.phablet),\n            tablet: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.tablet),\n            desktop: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.mobileLandscape, breakpoints.wide),\n        },\n    },\n    phablet: {\n        and: {\n            tablet: minWidthMaxWidth(breakpoints.phablet, breakpoints.tablet),\n            desktop: minWidthMaxWidth(breakpoints.phablet, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.phablet, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.phablet, breakpoints.wide),\n        },\n    },\n    tablet: {\n        and: {\n            desktop: minWidthMaxWidth(breakpoints.tablet, breakpoints.desktop),\n            leftCol: minWidthMaxWidth(breakpoints.tablet, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.tablet, breakpoints.wide),\n        },\n    },\n    desktop: {\n        and: {\n            leftCol: minWidthMaxWidth(breakpoints.desktop, breakpoints.leftCol),\n            wide: minWidthMaxWidth(breakpoints.desktop, breakpoints.wide),\n        },\n    },\n    leftCol: {\n        and: {\n            wide: minWidthMaxWidth(breakpoints.leftCol, breakpoints.wide),\n        },\n    },\n};\n\nexport { between, from, until };\n//# sourceMappingURL=mq.js.map\n","import { jsx } from '@emotion/react/jsx-runtime';\nimport { buttonContents } from './shared.js';\nimport { buttonStyles } from './styles.js';\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_button--primary-priority-default-theme) •\n * [Design System](https://theguardian.design/2a1e5182b/p/435225-button) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/button/Button.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components)\n *\n * Buttons enable users to make choices or perform actions.\n *\n */\nconst Button = ({ priority, size, icon: iconSvg, iconSide, hideLabel, nudgeIcon, type = 'button', isLoading = false, loadingAnnouncement = 'Loading', cssOverrides, children, ...props }) => (jsx(\"button\", { css: buttonStyles({\n        size,\n        priority,\n        icon: iconSvg,\n        hideLabel,\n        iconSide,\n        nudgeIcon,\n        cssOverrides,\n        isLoading,\n    }), type: type, \"aria-live\": \"polite\", \"aria-label\": isLoading ? loadingAnnouncement : undefined, ...props, children: buttonContents({\n        hideLabel,\n        iconSvg,\n        isLoading,\n        children,\n    }) }));\n\nexport { Button };\n//# sourceMappingURL=Button.js.map\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden, iconSize } from '@guardian/source-foundations';\n\nconst Svg = ({ size }) => (jsx(\"svg\", { width: size ? iconSize[size] : undefined, height: undefined, viewBox: \"-3 -3 30 30\", xmlns: \"http://www.w3.org/2000/svg\", focusable: false, \"aria-hidden\": true, children: jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M3.011 11.883 2 12.896l5.057 7.08h.48L22 5.005l-1.011-.986L7.537 16.207l-4.526-4.324Z\" }) }));\nconst SvgCheckmark = ({ size, isAnnouncedByScreenReader = false, }) => (jsxs(Fragment, { children: [jsx(Svg, { size: size }), isAnnouncedByScreenReader ? (jsx(\"span\", { css: css `\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`, children: \"Checkmark\" })) : ('')] }));\n\nexport { SvgCheckmark };\n//# sourceMappingURL=SvgCheckmark.js.map\n"],"names":["replaceAll","str","find","replace","RegExp","escapeRegExp","unescapeData","data","unescaped","roleHeadlineSize","role","textSans","fontWeight","lineHeight","roleButtonSize","roleButtonText","ClickToView","children","onAccept","isTracking","isMainMedia","source","sourceDomain","isOverlayClicked","setIsOverlayClicked","useState","textSize","roleTextSize","shouldDisplayOverlay","div","css","background","border","space","data-component","p","strong","Button","priority","size","icon","SvgCheckmark","iconSide","onClick","setTimeout","data-cy","data-link-name","emailCaptionStyle","text","embedContainerStyles","isEmailEmbed","from","EmbedBlockComponent","html","caption","includes","dangerouslySetInnerHTML","__html","breakpoints","mobile","mobileMedium","mobileLandscape","phablet","tablet","desktop","leftCol","wide","minWidth","maxWidth","until","minWidthMaxWidth","between","and","iconSvg","hideLabel","nudgeIcon","type","isLoading","loadingAnnouncement","cssOverrides","props","jsx","buttonStyles","undefined","buttonContents","Svg","width","iconSize","height","viewBox","xmlns","focusable","fillRule","clipRule","d","isAnnouncedByScreenReader","jsxs","Fragment","visuallyHidden"],"sourceRoot":""}