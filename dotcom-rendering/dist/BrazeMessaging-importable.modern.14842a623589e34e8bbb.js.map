{"version":3,"file":"BrazeMessaging-importable.modern.14842a623589e34e8bbb.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/components/BrazeMessaging.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/getIdapiUserData.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/hasCurrentBrazeUser.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getBrazeUuid.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/braze/hasRequiredConsents.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/braze/checkBrazeDependencies.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/braze/initialiseAppboy.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/braze/buildBrazeMessaging.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useBraze.ts","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/braze-components/dist/logic/index.esm.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/libs/esm/joinUrl/joinUrl.js"],"sourcesContent":["import { log } from '@guardian/libs';\nimport { useBraze } from '../lib/useBraze';\n\ntype Props = {\n\tidApiUrl: string;\n};\n\n/**\n * This component ensures we call buildBrazeMessaging at least once\n * on every page\n */\nexport const BrazeMessaging = ({ idApiUrl }: Props) => {\n\tconst { brazeMessages, brazeCards } = useBraze(idApiUrl);\n\n\tif (brazeMessages) {\n\t\tlog('tx', 'Braze Messages Interface loaded', brazeMessages);\n\t}\n\tif (brazeCards) {\n\t\tlog('tx', 'Braze Cards Interface loaded', brazeCards);\n\t}\n\n\t// we don’t render anything\n\treturn null;\n};\n","import { joinUrl } from '@guardian/libs';\n\nexport interface IdApiUserData {\n\tuser?: {\n\t\tprimaryEmailAddress?: string;\n\t\tprivateFields?: {\n\t\t\tbrazeUuid?: string;\n\t\t};\n\t};\n}\n\nexport interface IdApiUserIdentifiers {\n\tid: string;\n\tbrazeUuid: string;\n\tpuzzleId: string;\n\tgoogleTagId: string;\n}\n\nfunction checkForErrors(response: Response) {\n\tif (!response.ok) {\n\t\tthrow Error(\n\t\t\tresponse.statusText ||\n\t\t\t\t`getIdApiUserData | An api call returned HTTP status ${response.status}`,\n\t\t);\n\t}\n\treturn response;\n}\n\nconst callApi = (url: string) => {\n\treturn fetch(url, {\n\t\tcredentials: 'include',\n\t})\n\t\t.then(checkForErrors)\n\t\t.then((response) => response.json());\n};\n\nconst cache: {\n\tidapiUserMeResponse?: Promise<IdApiUserData>;\n\tidapiUserIdentifiersResponse?: Promise<IdApiUserIdentifiers>;\n} = {};\n\nexport const getIdApiUserData = (ajaxUrl: string): Promise<IdApiUserData> => {\n\tif (!cache.idapiUserMeResponse) {\n\t\tconst url = joinUrl(ajaxUrl, 'user/me');\n\t\tcache.idapiUserMeResponse = callApi(url);\n\t}\n\treturn cache.idapiUserMeResponse;\n};\n\nexport const getIdapiUserIdentifiers = (\n\tajaxUrl: string,\n): Promise<IdApiUserIdentifiers> => {\n\tif (!cache.idapiUserIdentifiersResponse) {\n\t\tconst url = joinUrl(ajaxUrl, 'user/me/identifiers');\n\t\tcache.idapiUserIdentifiersResponse = callApi(url);\n\t}\n\treturn cache.idapiUserIdentifiersResponse;\n};\n","const KEY = 'gu.brazeUserSet';\n\nconst hasCurrentBrazeUser = (): boolean => {\n\treturn localStorage.getItem(KEY) === 'true';\n};\n\nconst setHasCurrentBrazeUser = (): void => {\n\tlocalStorage.setItem(KEY, 'true');\n};\n\nconst clearHasCurrentBrazeUser = (): void => {\n\tlocalStorage.removeItem(KEY);\n};\n\nexport {\n\thasCurrentBrazeUser,\n\tsetHasCurrentBrazeUser,\n\tclearHasCurrentBrazeUser,\n};\n","import type { IdApiUserIdentifiers } from './getIdapiUserData';\nimport { getIdapiUserIdentifiers } from './getIdapiUserData';\n\nexport const getBrazeUuid = async (ajaxUrl: string): Promise<string | void> => {\n\treturn getIdapiUserIdentifiers(ajaxUrl)\n\t\t.then((data: IdApiUserIdentifiers) => data.brazeUuid)\n\t\t.catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(error, 'getBrazeUuid');\n\t\t});\n};\n","import {\n\tgetConsentFor,\n\tonConsentChange,\n} from '@guardian/consent-management-platform';\n\nconst hasRequiredConsents = (): Promise<boolean> =>\n\tnew Promise((resolve, reject) => {\n\t\tonConsentChange((state) => {\n\t\t\ttry {\n\t\t\t\tresolve(getConsentFor('braze', state));\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t}\n\t\t});\n\t});\n\nexport { hasRequiredConsents };\n","import { getBrazeUuid } from '../getBrazeUuid';\nimport { hasRequiredConsents } from './hasRequiredConsents';\n\ntype SuccessResult = {\n\tisSuccessful: true;\n\tdata: ResultData;\n};\n\ntype FailureResult = {\n\tisSuccessful: false;\n\tfailure: {\n\t\tfield: string;\n\t\tdata: any;\n\t};\n\tdata: ResultData;\n};\n\ntype DependenciesResult = SuccessResult | FailureResult;\n\ntype ResultData = { [key: string]: string | boolean };\n\ntype DependencyResult = {\n\tname: string;\n\tvalue: Promise<string | boolean | null | undefined | void>;\n};\nconst buildFailureResponse = (name: string, value: any, data: ResultData) => ({\n\tisSuccessful: false,\n\tfailure: {\n\t\tfield: name,\n\t\tdata: value,\n\t},\n\tdata,\n});\n\nconst buildDependencies = (\n\tisSignedIn: boolean,\n\tidApiUrl: string,\n): DependencyResult[] => {\n\treturn [\n\t\t{\n\t\t\tname: 'apiKey',\n\t\t\tvalue: Promise.resolve(window.guardian.config.page.brazeApiKey),\n\t\t},\n\t\t{\n\t\t\tname: 'brazeSwitch',\n\t\t\tvalue: Promise.resolve(window.guardian.config.switches.brazeSwitch),\n\t\t},\n\t\t{\n\t\t\tname: 'brazeUuid',\n\t\t\tvalue: isSignedIn ? getBrazeUuid(idApiUrl) : Promise.resolve(null),\n\t\t},\n\t\t{\n\t\t\tname: 'consent',\n\t\t\tvalue: hasRequiredConsents(),\n\t\t},\n\t\t{\n\t\t\tname: 'isNotPaidContent',\n\t\t\tvalue: Promise.resolve(!window.guardian.config.page.isPaidContent),\n\t\t},\n\t];\n};\n\nconst checkBrazeDependencies = async (\n\tisSignedIn: boolean,\n\tidApiUrl: string,\n): Promise<DependenciesResult> => {\n\tconst dependencies = buildDependencies(isSignedIn, idApiUrl);\n\n\tconst data: ResultData = {};\n\n\t// I think we could possibly clean this up a bit when we can use\n\t// Promise.allSettled reliably (it's not available in our current Node\n\t// version and polyfill.io doesn't have a polyfill yet).\n\tfor (const { name, value } of dependencies) {\n\t\ttry {\n\t\t\tconst result = await value;\n\n\t\t\t// eslint-disable-next-line @typescript-eslint/strict-boolean-expressions -- TODO: Complex types, look into this further\n\t\t\tif (result) {\n\t\t\t\tdata[name] = result;\n\t\t\t} else {\n\t\t\t\treturn buildFailureResponse(name, result, data);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn buildFailureResponse(\n\t\t\t\tname,\n\t\t\t\te instanceof Error ? e.message : e,\n\t\t\t\tdata,\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tisSuccessful: true,\n\t\tdata,\n\t};\n};\n\nexport { checkBrazeDependencies };\n","import type appboy from '@braze/web-sdk-core';\nimport { log } from '@guardian/libs';\n\nconst SDK_OPTIONS: appboy.InitializationOptions = {\n\tenableLogging: true,\n\tnoCookies: true,\n\tbaseUrl: 'https://sdk.fra-01.braze.eu/api/v3',\n\tsessionTimeoutInSeconds: 1,\n\tminimumIntervalBetweenTriggerActionsInSeconds: 0,\n\tdevicePropertyAllowlist: [],\n};\n\nconst initialiseAppboy = async (apiKey: string): Promise<typeof appboy> => {\n\tconst importedAppboy = (await import(\n\t\t/* webpackChunkName: \"braze-web-sdk-core\" */ '@braze/web-sdk-core'\n\t)) as unknown as typeof appboy;\n\n\timportedAppboy.setLogger((message) => log('tx', message));\n\timportedAppboy.initialize(apiKey, SDK_OPTIONS);\n\n\treturn importedAppboy;\n};\n\nconst getInitialisedAppboy = (() => {\n\tlet cache: Promise<typeof appboy>;\n\n\treturn (apiKey: string): Promise<typeof appboy> => {\n\t\tif (cache === undefined) {\n\t\t\tcache = initialiseAppboy(apiKey);\n\t\t}\n\n\t\treturn cache;\n\t};\n})();\n\nexport { getInitialisedAppboy };\n","import type {\n\tBrazeCardsInterface,\n\tBrazeMessagesInterface,\n} from '@guardian/braze-components/logic';\nimport {\n\tBrazeCards,\n\tBrazeMessages,\n\tLocalMessageCache,\n\tNullBrazeCards,\n\tNullBrazeMessages,\n} from '@guardian/braze-components/logic';\nimport { getCookie, log, storage } from '@guardian/libs';\nimport { initPerf } from '../../browser/initPerf';\nimport { record } from '../../browser/ophan/ophan';\nimport {\n\tclearHasCurrentBrazeUser,\n\thasCurrentBrazeUser,\n\tsetHasCurrentBrazeUser,\n} from '../hasCurrentBrazeUser';\nimport { checkBrazeDependencies } from './checkBrazeDependencies';\nimport { getInitialisedAppboy } from './initialiseAppboy';\n\nconst maybeWipeUserData = async (\n\tapiKey?: string,\n\tbrazeUuid?: null | string,\n\tconsent?: boolean,\n\tbrazeSwitch?: boolean,\n): Promise<void> => {\n\tconst hasCurrentBrazeUserValue = hasCurrentBrazeUser();\n\tconst userHasLoggedOut = !brazeUuid && hasCurrentBrazeUserValue;\n\tconst userHasRemovedConsent = !consent && hasCurrentBrazeUserValue;\n\tconst brazeHasBeenDisabled = !brazeSwitch && hasCurrentBrazeUserValue;\n\n\tif (userHasLoggedOut || userHasRemovedConsent || brazeHasBeenDisabled) {\n\t\ttry {\n\t\t\tif (apiKey) {\n\t\t\t\tconst appboy = await getInitialisedAppboy(apiKey);\n\t\t\t\tappboy.wipeData();\n\t\t\t}\n\t\t\tLocalMessageCache.clear();\n\t\t\tclearHasCurrentBrazeUser();\n\t\t} catch (error) {\n\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t// @ts-expect-error\n\t\t\t\terror,\n\t\t\t\t'braze-maybeWipeUserData',\n\t\t\t);\n\t\t}\n\t}\n};\n\nexport const buildBrazeMessaging = async (\n\tidApiUrl: string,\n): Promise<{\n\tbrazeMessages: BrazeMessagesInterface;\n\tbrazeCards: BrazeCardsInterface;\n}> => {\n\tif (!storage.local.isAvailable()) {\n\t\t// we require local storage for using any message channel so that we know\n\t\t// when to clear up user data from the device on logout\n\t\treturn {\n\t\t\tbrazeMessages: new NullBrazeMessages(),\n\t\t\tbrazeCards: new NullBrazeCards(),\n\t\t};\n\t}\n\n\tconst isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\n\tconst dependenciesResult = await checkBrazeDependencies(\n\t\tisSignedIn,\n\t\tidApiUrl,\n\t);\n\n\tif (!dependenciesResult.isSuccessful) {\n\t\tconst { failure, data } = dependenciesResult;\n\n\t\tlog(\n\t\t\t'tx',\n\t\t\t`Not attempting to show Braze messages. Dependency ${\n\t\t\t\tfailure.field\n\t\t\t} failed with ${String(failure.data)}.`,\n\t\t);\n\n\t\tawait maybeWipeUserData(\n\t\t\tdata.apiKey as string | undefined,\n\t\t\tdata.brazeUuid as string | null | undefined,\n\t\t\tdata.consent as boolean | undefined,\n\t\t\tdata.brazeSwitch as boolean | undefined,\n\t\t);\n\n\t\treturn {\n\t\t\tbrazeMessages: new NullBrazeMessages(),\n\t\t\tbrazeCards: new NullBrazeCards(),\n\t\t};\n\t}\n\n\ttry {\n\t\tconst sdkLoadTiming = initPerf('braze-sdk-load');\n\t\tsdkLoadTiming.start();\n\n\t\tconst appboy = await getInitialisedAppboy(\n\t\t\tdependenciesResult.data.apiKey as string,\n\t\t);\n\n\t\tconst sdkLoadTimeTaken = sdkLoadTiming.end();\n\t\trecord({\n\t\t\tcomponent: 'braze-sdk-load-timing',\n\t\t\tvalue: sdkLoadTimeTaken,\n\t\t});\n\n\t\tconst errorHandler = (error: Error, desc: string) => {\n\t\t\twindow.guardian.modules.sentry.reportError(error, desc);\n\t\t};\n\n\t\tsetHasCurrentBrazeUser();\n\t\tappboy.changeUser(dependenciesResult.data.brazeUuid as string);\n\t\tappboy.openSession();\n\n\t\tconst brazeCards = window.guardian.config.switches.brazeContentCards\n\t\t\t? new BrazeCards(appboy, errorHandler)\n\t\t\t: new NullBrazeCards();\n\t\tconst brazeMessages = new BrazeMessages(\n\t\t\tappboy,\n\t\t\tLocalMessageCache,\n\t\t\terrorHandler,\n\t\t);\n\t\treturn { brazeMessages, brazeCards };\n\t} catch {\n\t\treturn {\n\t\t\tbrazeMessages: new NullBrazeMessages(),\n\t\t\tbrazeCards: new NullBrazeCards(),\n\t\t};\n\t}\n};\n","import type {\n\tBrazeCardsInterface,\n\tBrazeMessagesInterface,\n} from '@guardian/braze-components/logic';\nimport {\n\tNullBrazeCards,\n\tNullBrazeMessages,\n} from '@guardian/braze-components/logic';\nimport useSWRImmutable from 'swr/immutable';\nimport { buildBrazeMessaging } from './braze/buildBrazeMessaging';\n\n/**\n * Returns brazeMessaging as BrazeMessagesInterface and BrazeCardsInterface\n *\n * BrazeMessages is used to show single-impression messages (like ad impressions).\n * In contrast, BrazeCards can provide persistent user notifications.\n *\n * We're using useSWRImmutable to ensure this call is only made once\n * [doc]: https://swr.vercel.app/docs/revalidation#disable-automatic-revalidations\n */\nexport const useBraze = (\n\tidApiUrl: string,\n): {\n\tbrazeMessages: BrazeMessagesInterface | undefined;\n\tbrazeCards: BrazeCardsInterface | undefined;\n} => {\n\tconst { data, error } = useSWRImmutable('braze-message', () =>\n\t\tbuildBrazeMessaging(idApiUrl),\n\t);\n\n\tif (error) {\n\t\treturn {\n\t\t\tbrazeMessages: new NullBrazeMessages(),\n\t\t\tbrazeCards: new NullBrazeCards(),\n\t\t};\n\t}\n\n\treturn {\n\t\tbrazeMessages: data?.brazeMessages,\n\t\tbrazeCards: data?.brazeCards,\n\t};\n};\n","import{storage as e}from\"@guardian/libs\";function r(e,r){if(!(e instanceof r))throw new TypeError(\"Cannot call a class as a function\")}function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null==t)return;var n,o,a=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(a.push(n.value),!r||a.length!==r);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==t.return||t.return()}finally{if(s)throw o}}return a}(e,r)||i(e,r)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function i(e,r){if(e){if(\"string\"==typeof e)return s(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===t&&e.constructor&&(t=e.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(e):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,r):void 0}}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var l,u,c,d=[\"https://media.guim.co.uk/\",\"https://i.guim.co.uk/\"],h=function(e){return d.some((function(r){return e.startsWith(r)}))},f=[\"%%CURRENCY_SYMBOL%%\",\"%%COUNTRY_NAME%%\"],g=/%%.*?%%/g,p=function(e){var r,t,n=e.buttonText,o=e.buttonUrl,a=e.ophanComponentId,i=e.highlightedText,s=m(e),l=(i||\"\")+\" \"+s.join(\" \"),u=!!(t=null===(r=l.match(g))||void 0===r?void 0:r.filter((function(e){return!f.includes(\"\".concat(e))})))&&t.length>0;return Boolean(n&&o&&a&&s.length>0&&!u)},m=function(e){var r,t=[],n=function(e,r){var t=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!t){if(Array.isArray(e)||(t=i(e))||r&&e&&\"number\"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var a,s=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==t.return||t.return()}finally{if(l)throw a}}}}(Object.keys(e).filter((function(e){return/^paragraph\\d$/.test(e)})).sort());try{for(n.s();!(r=n.n()).done;){var o=e[r.value];o&&t.push(o)}}catch(e){n.e(e)}finally{n.f()}return t},v=(o(l={},\"AppBanner\",(function(e){var r=e.header,t=e.body,n=e.cta,o=e.imageUrl;return!!(r&&t&&n&&o)&&(!!h(o)||(console.log(\"Image URL \".concat(o,\" is not allowed\")),!1))})),o(l,\"BannerWithLink\",(function(e){var r=e.header,t=e.body,n=e.buttonText,o=e.buttonUrl,a=e.imageUrl,i=e.ophanComponentId;return a&&!h(a)?(console.log(\"Image URL \".concat(a,\" is not allowed\")),!1):Boolean(r&&t&&n&&o&&a&&i)})),o(l,\"BannerNewsletter\",(function(e){var r=e.header,t=e.body,n=e.imageUrl,o=e.ophanComponentId,a=e.newsletterId,i=e.frequency;return n&&!h(n)?(console.log(\"Image URL \".concat(n,\" is not allowed\")),!1):Boolean(r&&t&&n&&o&&a&&i)})),o(l,\"Epic\",p),o(l,\"EpicWithSpecialHeader\",(function(e){var r=p(e);if(r){var t=e.authoredEpicImageUrl,n=e.authoredEpicImageAltText,o=e.authoredEpicBylineName;return Boolean(t&&n&&o)}return r})),o(l,\"NewsletterEpic\",(function(e){var r=e.header,t=e.frequency,n=e.paragraph1,o=e.imageUrl,a=e.newsletterId,i=e.ophanComponentId;return!!(r&&t&&n&&o&&a&&i)&&(!!h(o)||(console.log(\"Image URL \".concat(o,\" is not allowed\")),!1))})),o(l,\"USNewsletterEpic\",(function(e){var r=e.header,t=e.frequency,n=e.paragraph1,o=e.ophanComponentId;return Boolean(r&&t&&n&&o)})),o(l,\"AUNewsletterEpic\",(function(e){var r=e.header,t=e.frequency,n=e.paragraph1,o=e.ophanComponentId;return Boolean(r&&t&&n&&o)})),o(l,\"UKNewsletterEpic\",(function(e){var r=e.header,t=e.frequency,n=e.paragraph1,o=e.ophanComponentId;return Boolean(r&&t&&n&&o)})),o(l,\"DownToEarthNewsletterEpic\",(function(e){var r=e.header,t=e.frequency,n=e.paragraph1,o=e.ophanComponentId;return Boolean(r&&t&&n&&o)})),o(l,\"EpicNewsletter_AU_AfternoonUpdate\",(function(e){var r=e.header,t=e.frequency,n=e.paragraph1,o=e.ophanComponentId;return Boolean(r&&t&&n&&o)})),o(l,\"EpicNewsletter_TheGuide\",(function(e){var r=e.header,t=e.frequency,n=e.paragraph1,o=e.ophanComponentId;return Boolean(r&&t&&n&&o)})),l),y=function(){function e(t,n,o,a,i,s){r(this,e),this.id=void 0,this.appboy=void 0,this.message=void 0,this.slotName=void 0,this.cache=void 0,this.errorHandler=void 0,this.id=t,this.message=n,this.appboy=o,this.slotName=a,this.cache=i,this.errorHandler=s}return n(e,[{key:\"logImpression\",value:function(){try{this.appboy.logInAppMessageImpression(this.message)}catch(e){e instanceof Error&&this.errorHandler(e,\"BrazeMessage.logImpression\")}this.cache.remove(this.slotName,this.id,this.errorHandler)}},{key:\"logButtonClick\",value:function(e){var r=new this.appboy.InAppMessageButton(\"Button: ID \".concat(e),void 0,void 0,void 0,void 0,void 0,e);try{this.appboy.logInAppMessageButtonClick(r,this.message)}catch(e){e instanceof Error&&this.errorHandler(e,\"BrazeMessage.logButtonClick\")}}},{key:\"extras\",get:function(){return this.message.extras}}]),e}(),b=function(){function e(t,n,o){r(this,e),this.appboy=void 0,this.freshMessageBySlot=void 0,this.cache=void 0,this.errorHandler=void 0,this.appboy=t,this.cache=n,this.freshMessageBySlot={Banner:this.getFreshMessagesForSlot(\"Banner\"),EndOfArticle:this.getFreshMessagesForSlot(\"EndOfArticle\")},this.errorHandler=o}return n(e,[{key:\"getFreshMessagesForSlot\",value:function(e){var r=this;return new Promise((function(t){r.appboy.subscribeToInAppMessage((function(n){var o=n,a=o.extras;a&&a.slotName&&a.slotName===e&&(r.cache.push(e,{message:o,id:\"\".concat(Math.random().toString(16).slice(2),\"-\").concat((new Date).getTime())},r.errorHandler),t(o))}))}))}},{key:\"getMessageForBanner\",value:function(e){return this.getMessageForSlot(\"Banner\",e)}},{key:\"getMessageForEndOfArticle\",value:function(e){return this.getMessageForSlot(\"EndOfArticle\",e)}},{key:\"getMessageForSlot\",value:function(e,r){var t=this,n=this.getHighestPriorityMessageFromCache(e,r);return n?Promise.resolve(n):this.freshMessageBySlot[e].then((function(){var n=t.getHighestPriorityMessageFromCache(e,r);if(n)return Promise.resolve(n);throw new Error(\"No valid messages for \".concat(e,\" slot\"))}))}},{key:\"getHighestPriorityMessageFromCache\",value:function(e,r){var t,n=this.cache.all(e,this.appboy,this.errorHandler).filter((function(e){return!!(r=e.message.extras)&&!!v[r.componentName]&&v[r.componentName](r);var r})),o={messagesWithFilters:(t=n).filter((function(e){return Boolean(e.message.extras.section)})),messagesWithoutFilters:t.filter((function(e){return!Boolean(e.message.extras.section)}))},i=o.messagesWithoutFilters,s=a(o.messagesWithFilters.concat(i).filter((function(e){var t;if(!e.message.extras.section||\"string\"!=typeof e.message.extras.section)return!0;var n=null==r||null===(t=r.section)||void 0===t?void 0:t.toLowerCase();return!!n&&e.message.extras.section.split(\"|\").map((function(e){return e.toLowerCase()})).includes(n)})),1)[0];if(s)return new y(s.id,s.message,this.appboy,e,this.cache,this.errorHandler)}}]),e}(),C=function(){function e(){r(this,e)}return n(e,[{key:\"getMessageForBanner\",value:function(){return Promise.reject(new Error(\"No banner message\"))}},{key:\"getMessageForEndOfArticle\",value:function(){return Promise.reject(new Error(\"No end of article message\"))}}]),e}();!function(e){e.Banner=\"Banner\",e.EndOfArticle=\"EndOfArticle\"}(u||(u={})),function(e){e.ProfileBadge=\"ProfileBadge\"}(c||(c={}));var B=function(){function e(t,n,o,a,i){r(this,e),this.id=void 0,this.slotName=void 0,this.card=void 0,this.appboy=void 0,this.errorHandler=void 0,this.id=t,this.slotName=n,this.card=o,this.appboy=a,this.errorHandler=i}return n(e,[{key:\"logImpression\",value:function(){try{this.appboy.logCardImpressions([this.card],!0)||this.errorHandler(new Error(\"Failed to log card impression event\"),\"BrazeCard.logImpressions\")}catch(e){e instanceof Error&&this.errorHandler(e,\"BrazeCard.logImpressions\")}}},{key:\"logCardClick\",value:function(){try{this.appboy.logCardClick(this.card,!0)||this.errorHandler(new Error(\"Failed to log card click event\"),\"BrazeCard.logCardClick\")}catch(e){e instanceof Error&&this.errorHandler(e,\"BrazeCard.logCardClick\")}}},{key:\"logCardDismissal\",value:function(){try{this.appboy.logCardDismissal(this.card)||this.errorHandler(new Error(\"Failed to log card dismiss event\"),\"BrazeCard.logCardDismiss\")}catch(e){e instanceof Error&&this.errorHandler(e,\"BrazeCard.logCardDismiss\")}}},{key:\"extras\",get:function(){var e=this.card.extras;return void 0===e?{}:e}},{key:\"expiry\",get:function(){var e=this.card.expiresAt;return null===e?void 0:e}}]),e}(),w=function(){function e(t,n){r(this,e),this.appboy=void 0,this.errorHandler=void 0,this.appboy=t,this.errorHandler=n}return n(e,[{key:\"getCardsForProfileBadge\",value:function(){return this.getCardsForSlot(c.ProfileBadge)}},{key:\"getCardsForSlot\",value:function(e){var r=this;return this.appboy.getCachedContentCards().cards.flatMap((function(t){var n=t.extras;return n&&n.slotName&&n.slotName===e?void 0===t.id?(r.errorHandler(new Error(\"appboy card had no ID\"),\"BrazeCards.getCardsForSlot\"),[]):[new B(t.id,e,t,r.appboy,r.errorHandler)]:[]}))}},{key:\"lastUpdated\",get:function(){return this.appboy.getCachedContentCards().lastUpdated}}]),e}(),I=function(){function e(){r(this,e)}return n(e,[{key:\"getCardsForProfileBadge\",value:function(){return[]}}]),e}(),E=864e5,k=function(e){return\"\".concat(\"gu.brazeMessageCache\",\".\").concat(e)},F=function(r,t){var n=k(r);e.local.set(n,t)},M=function(e,r){return new r.HtmlMessage(e.message,e.extras,e.campaignId,e.cardId,e.triggerId,e.dismissType,e.duration,e.animateIn,e.animateOut,e.frameColor,e.htmlId,e.css,e.messageFields)},x=function(r,t){var n=function(r){var t=k(r),n=e.local.get(t);return Array.isArray(n)?n:[]}(r),o=n.filter((function(e){return r=e,Boolean((null==r?void 0:r.expires)&&Number.isFinite(null==r?void 0:r.expires)&&(null==r||null===(t=r.message)||void 0===t?void 0:t.id)&&(null==r||null===(n=r.message)||void 0===n||null===(o=n.message)||void 0===o?void 0:o.triggerId)&&(null==r||null===(a=r.message)||void 0===a||null===(i=a.message)||void 0===i?void 0:i.extras));var r,t,n,o,a,i})).filter((function(e){return e.expires>Date.now()}));if(n.length!==o.length){var a=n.length-o.length;t(Error(\"Removed \".concat(a,\" expired message\").concat(1===a?\"\":\"s\",\" from queue\")),\"LocalMessageCache\"),F(r,o)}return o},A=function(){function t(){r(this,t)}return n(t,null,[{key:\"peek\",value:function(e,r,t){var n=x(e,t)[0];if(n)return{id:n.message.id,message:M(n.message.message,r)}}},{key:\"all\",value:function(e,r,t){return x(e,t).map((function(e){return{id:e.message.id,message:M(e.message.message,r)}}))}},{key:\"remove\",value:function(e,r,t){var n=x(e,t),o=n.findIndex((function(e){return e.message.id===r}));if(o>=0&&n.splice(o,1))return F(e,n),!0;return!1}},{key:\"push\",value:function(e,r,t){var n=x(e,t);if(n.length<2){var o={message:r,expires:Date.now()+864e5};return n.push(o),F(e,n),!0}return t(new Error(\"Failed to add message to queue - queue full\"),\"LocalMessageCache\"),!1}},{key:\"clear\",value:function(){for(var r in u){var t=k(r);e.local.remove(t)}}}]),t}();export{B as BrazeCard,w as BrazeCards,y as BrazeMessage,b as BrazeMessages,A as LocalMessageCache,I as NullBrazeCards,C as NullBrazeMessages,M as hydrateMessage,E as millisecondsBeforeExpiry,F as setQueue};\n","// detect two or more `/` chars after a word boundary\nconst multipleSlashesInRoute = /\\b\\/{2,}/g;\nconst joinUrl = (...args) => args.join('/').replace(multipleSlashesInRoute, '/');\n\nexport { joinUrl };\n//# sourceMappingURL=joinUrl.js.map\n"],"names":["BrazeMessaging","idApiUrl","brazeMessages","brazeCards","useBraze","log","checkForErrors","response","ok","Error","statusText","status","callApi","url","fetch","credentials","then","json","cache","getIdApiUserData","ajaxUrl","idapiUserMeResponse","joinUrl","getIdapiUserIdentifiers","idapiUserIdentifiersResponse","KEY","getBrazeUuid","async","data","brazeUuid","catch","error","window","guardian","modules","sentry","reportError","buildFailureResponse","name","value","isSuccessful","failure","field","SDK_OPTIONS","enableLogging","noCookies","baseUrl","sessionTimeoutInSeconds","minimumIntervalBetweenTriggerActionsInSeconds","devicePropertyAllowlist","getInitialisedAppboy","apiKey","undefined","importedAppboy","setLogger","message","initialize","initialiseAppboy","buildBrazeMessaging","storage","NullBrazeMessages","NullBrazeCards","isSignedIn","getCookie","shouldMemoize","dependenciesResult","dependencies","Promise","resolve","config","page","brazeApiKey","switches","brazeSwitch","reject","onConsentChange","state","getConsentFor","e","isPaidContent","buildDependencies","result","checkBrazeDependencies","String","consent","hasCurrentBrazeUserValue","localStorage","getItem","wipeData","LocalMessageCache","removeItem","maybeWipeUserData","sdkLoadTiming","initPerf","start","appboy","sdkLoadTimeTaken","end","record","component","errorHandler","desc","setItem","changeUser","openSession","brazeContentCards","BrazeCards","BrazeMessages","useSWRImmutable","r","TypeError","t","length","n","enumerable","configurable","writable","Object","defineProperty","key","prototype","o","a","Array","isArray","Symbol","iterator","i","s","call","next","done","push","return","toString","slice","constructor","from","test","l","u","c","d","h","some","startsWith","f","g","p","buttonText","buttonUrl","ophanComponentId","highlightedText","m","join","match","filter","includes","concat","Boolean","keys","sort","v","header","body","cta","imageUrl","console","newsletterId","frequency","authoredEpicImageUrl","authoredEpicImageAltText","authoredEpicBylineName","paragraph1","y","this","id","slotName","logInAppMessageImpression","remove","InAppMessageButton","logInAppMessageButtonClick","get","extras","b","freshMessageBySlot","Banner","getFreshMessagesForSlot","EndOfArticle","subscribeToInAppMessage","Math","random","Date","getTime","getMessageForSlot","getHighestPriorityMessageFromCache","all","componentName","messagesWithFilters","section","messagesWithoutFilters","toLowerCase","split","map","C","ProfileBadge","B","card","logCardImpressions","logCardClick","logCardDismissal","expiresAt","w","getCardsForSlot","getCachedContentCards","cards","flatMap","lastUpdated","I","k","F","M","HtmlMessage","campaignId","cardId","triggerId","dismissType","duration","animateIn","animateOut","frameColor","htmlId","css","messageFields","x","expires","Number","isFinite","now","A","findIndex","splice","multipleSlashesInRoute","args","replace"],"sourceRoot":""}