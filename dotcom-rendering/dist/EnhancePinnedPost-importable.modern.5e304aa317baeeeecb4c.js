(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[9814],{3198:(e,n,t)=>{var o=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,d="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,a="object"==typeof self&&self&&self.Object===Object&&self,f=d||a||Function("return this")(),v=Object.prototype.toString,p=Math.max,y=Math.min,m=function(){return f.Date.now()};function b(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&v.call(e)==r}(e))return o;if(b(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=b(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var t=c.test(e);return t||s.test(e)?l(e.slice(2),t?2:8):u.test(e)?o:+e}e.exports=function(e,n,t){var o,r,i,u,c,s,l=0,d=!1,a=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(n){var t=o,i=r;return o=r=void 0,l=n,u=e.apply(i,t)}function h(e){var t=e-s;return void 0===s||t>=n||t<0||a&&e-l>=i}function w(){var e=m();if(h(e))return E(e);c=setTimeout(w,function(e){var t=n-(e-s);return a?y(t,i-(e-l)):t}(e))}function E(e){return c=void 0,f&&o?v(e):(o=r=void 0,u)}function O(){var e=m(),t=h(e);if(o=arguments,r=this,s=e,t){if(void 0===c)return function(e){return l=e,c=setTimeout(w,n),d?v(e):u}(s);if(a)return c=setTimeout(w,n),v(s)}return void 0===c&&(c=setTimeout(w,n)),u}return n=g(n)||0,b(t)&&(d=!!t.leading,i=(a="maxWait"in t)?p(g(t.maxWait)||0,n):i,f="trailing"in t?!!t.trailing:f),O.cancel=function(){void 0!==c&&clearTimeout(c),l=0,o=s=r=c=void 0},O.flush=function(){return void 0===c?u:E(m())},O}},572:(e,n,t)=>{"use strict";t.r(n),t.d(n,{EnhancePinnedPost:()=>f});var o=t(3904),r=t(8869),i=t(9038),u=t(4463);const c="undefined"==typeof window,s=c?null:window.document.querySelector("[data-gu-marker=pinned-post]"),l=c?null:window.document.querySelector("input[name=pinned-post-checkbox]"),d=c?null:window.document.querySelector("#collapsible-body");const a=()=>{l instanceof HTMLInputElement&&(l.checked?(0,i.X4)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:null==s?void 0:s.id},action:"CLICK",value:"show-more"}):((0,i.X4)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:null==s?void 0:s.id},action:"CLICK",value:"show-less"}),function(){const e=null==s?void 0:s.getBoundingClientRect();e&&e.top<0&&(null==s||s.scrollIntoView({behavior:"smooth"}))}()))},f=()=>{const[e,n]=(0,o.useState)(!1),[t]=(0,u.O)({threshold:.1,repeat:!0,node:null!=s?s:void 0}),c=(0,o.useRef)(),f=()=>{d&&function(e){const n=document.querySelector("#pinned-post-button"),t=document.querySelector("#pinned-post-overlay");n&&(e?n.style.removeProperty("display"):n.style.display="none"),t&&(e?t.style.removeProperty("display"):t.style.display="none")}(!(d.scrollHeight<=d.clientHeight))};return(0,o.useEffect)((()=>{if(!s)return;f();const e=new MutationObserver(f);return e.observe(s,{childList:!0,subtree:!0}),()=>e.disconnect()}),[]),(0,o.useEffect)((()=>(null==l||l.addEventListener("change",a),()=>{null==l||l.removeEventListener("change",a)})),[]),(0,o.useEffect)((()=>{c.current=(0,r.i)("pinned-post-view-duration")}),[]),(0,o.useEffect)((()=>{var o,r;if(s)if(t)n(!0),null===(o=c.current)||void 0===o||o.clear(),null===(r=c.current)||void 0===r||r.start();else if(e){var u;const e=null===(u=c.current)||void 0===u?void 0:u.end();if(void 0!==e){const n=e/1e3;(0,i.X4)({component:{componentType:"LIVE_BLOG_PINNED_POST",id:s.id},action:"VIEW",value:n.toString()})}}}),[t,e]),null}},4463:(e,n,t)=>{"use strict";t.d(n,{O:()=>u});var o=t(3198),r=t.n(o),i=t(3904);const u=e=>{const[n,t]=(0,i.useState)(!1);var o;const[u,c]=(0,i.useState)(null!==(o=e.node)&&void 0!==o?o:null),s=(0,i.useRef)(null),l=n=>{let[o]=n;o&&(o.isIntersecting?t(!0):e.repeat&&t(!1))},d=e.debounce?r()(l,200):l;return(0,i.useEffect)((()=>(s.current&&s.current.disconnect(),window.IntersectionObserver&&(s.current=new window.IntersectionObserver(d,e),u&&s.current.observe(u)),()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.disconnect()})),[u,e,d]),[n,c]}}}]);
//# sourceMappingURL=EnhancePinnedPost-importable.modern.5e304aa317baeeeecb4c.js.map