{"version":3,"file":"Carousel-importable.legacy.40a8d298ad52f98d6ecc.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/lib/formatAttrString.ts","webpack://@guardian/dotcom-rendering/./src/web/components/Carousel.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/CardCommentCount.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/FetchCommentCounts.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/LeftColumn.tsx","webpack://@guardian/dotcom-rendering/./src/lib/formatters.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/formatCount.ts","webpack://@guardian/dotcom-rendering/./src/static/icons/comment.svg"],"sourcesContent":["const removeAlphaNumeric = (str) => str.replace(new RegExp('[^0-9a-z ]', 'gi'), ';'); // We set it to semicolon so we can remove it at the end\nconst lowercase = (str) => str.toLowerCase();\nconst replaceSpacesWithHyphens = (str) => str.replace(new RegExp(' ', 'g'), '-'); // Replace the space\nconst removeTempChars = (str) => str.replace(new RegExp('[;]', 'g'), ''); // Strip out those semicolons\nexport const formatAttrString = (input) => removeTempChars(replaceSpacesWithHyphens(lowercase(removeAlphaNumeric(input))));\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { brandAlt, from, headline, neutral, space, text, until, } from '@guardian/source-foundations';\nimport libDebounce from 'lodash.debounce';\nimport { useEffect, useRef, useState } from 'react';\nimport { decidePalette } from '../lib/decidePalette';\nimport { formatAttrString } from '../lib/formatAttrString';\nimport { getSourceImageUrl } from '../lib/getSourceImageUrl_temp_fix';\nimport { getZIndex } from '../lib/getZIndex';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { FetchCommentCounts } from './FetchCommentCounts.importable';\nimport { Hide } from './Hide';\nimport { LeftColumn } from './LeftColumn';\n// Carousel icons - need replicating from source for centring\nconst SvgChevronLeftSingle = () => {\n    return (_jsx(\"svg\", { viewBox: \"0 0 32 32\", xmlns: \"http://www.w3.org/2000/svg\", width: \"24\", height: \"24\", children: _jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M18.4 4L8 14.4V15.45L18.4 25.8499L19.375 24.8999L11.05 14.925L19.375 4.95L18.4 4Z\" }) }));\n};\nconst SvgChevronRightSingle = () => {\n    return (_jsx(\"svg\", { viewBox: \"0 0 32 32\", xmlns: \"http://www.w3.org/2000/svg\", width: \"24\", height: \"24\", children: _jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M9.975 4L9 4.95L17.325 14.925L9 24.8999L9.975 25.8499L20.375 15.45V14.4L9.975 4Z\" }) }));\n};\nconst wrapperStyle = (length) => css `\n\tdisplay: flex;\n\t/* Remove space-between where there is a single item, so that it is left-aligned */\n\t${length > 1 && 'justify-content: space-between'}\n\toverflow: hidden;\n\t${from.desktop} {\n\t\tpadding-right: 40px;\n\t}\n`;\n// For desktop and above, are we at the last card. Is one less than the dots style equivalent\nconst isLastCardShowing = (index, totalStories) => index >= totalStories - 4;\nconst containerMargins = css `\n\tmargin-top: 6px;\n\tmargin-bottom: 24px;\n\n\tmargin-left: 0px;\n\tmargin-right: 0px;\n\n\t${from.tablet} {\n\t\t/* Shrink the container to remove the leading and\n       \t\t\t\t   trailing side margins from the list of cards */\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n\n\t${from.leftCol} {\n\t\tmargin-left: -1px;\n\t\tmargin-right: -10px;\n\t\tmargin-top: 6px;\n\t}\n`;\nconst containerStyles = css `\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\toverflow: hidden; /* Needed for scrolling to work */\n`;\nconst carouselStyle = css `\n\tmin-height: 227px;\n\tposition: relative; /* must set position for offset(Left) calculations of children to be relative to this box */\n\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: stretch;\n\n\tscroll-snap-type: x mandatory;\n\tscroll-behavior: smooth;\n\toverflow-x: auto; /* Scrollbar is less intrusive visually on non-desktop devices typically */\n\toverflow-y: hidden; /*Fixes small problem with 1px vertical scroll on immersive due to top bar */\n\t${from.tablet} {\n\t\t&::-webkit-scrollbar {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tscrollbar-width: none;\n\t}\n\n\t${until.tablet} {\n\t\tmargin-left: -10px; /* Align firstcard on mobile devices */\n\t}\n`;\nconst dotsStyle = css `\n\tmargin-bottom: ${space[2]}px;\n`;\nconst dotStyle = css `\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: ${space[3]}px;\n\twidth: ${space[3]}px;\n\tbackground-color: ${neutral[93]};\n\tborder-radius: 100%;\n\tborder: 0 none;\n\tpadding: 0;\n\tmargin-right: ${space[1]}px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ${neutral[86]};\n\t\toutline: none;\n\t}\n`;\nconst dotActiveStyle = (palette) => css `\n\tbackground-color: ${palette.background.carouselDot};\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ${palette.background.carouselDotFocus};\n\t}\n`;\nconst adjustNumberOfDotsStyle = (index, totalStories) => {\n    return css `\n\t\t${from.phablet} {\n\t\t\tdisplay: ${index >= totalStories - 1 ? 'none' : 'auto'};\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\tdisplay: ${index >= totalStories - 2 ? 'none' : 'auto'};\n\t\t}\n\n\t\t${from.desktop} {\n\t\t\tdisplay: ${index >= totalStories - 3 ? 'none' : 'auto'};\n\t\t}\n\t`;\n};\n// Not used for buttons above carousel\nconst buttonContainerStyle = css `\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tposition: absolute;\n\t${getZIndex('onwardsCarousel')}\n\theight: 100%;\n\tpadding-bottom: 36px; /* Align buttons centrally with cards */\n\n\t${until.leftCol} {\n\t\tdisplay: none;\n\t}\n`;\nconst prevButtonContainerStyle = (format) => {\n    switch (format.design) {\n        case ArticleDesign.LiveBlog:\n        case ArticleDesign.DeadBlog: {\n            return css `\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\tleft: 205px;\n\t\t\t\t}\n\t\t\t`;\n        }\n        default: {\n            return css `\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\tleft: 120px;\n\t\t\t\t}\n\n\t\t\t\t${from.wide} {\n\t\t\t\t\tleft: 205px;\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n};\nconst nextButtonContainerStyle = css `\n\tright: 10px;\n`;\nconst buttonStyle = css `\n\tborder: 0 none;\n\tborder-radius: 100%;\n\theight: 34px;\n\twidth: 34px;\n\tcursor: pointer;\n\tmargin-top: 10px;\n\tpadding: 0;\n\tbackground-color: ${neutral[0]};\n\n\t&:active,\n\t&:hover {\n\t\toutline: none;\n\t\tbackground-color: ${brandAlt[400]};\n\t\tsvg {\n\t\t\tfill: ${neutral[7]};\n\t\t}\n\t}\n\n\t&:focus {\n\t\toutline: none;\n\t}\n\n\tsvg {\n\t\tfill: ${neutral[100]};\n\t\theight: 34px;\n\t}\n`;\nconst prevButtonStyle = (index) => css `\n\tbackground-color: ${index !== 0 ? neutral[0] : neutral[60]};\n\tcursor: ${index !== 0 ? 'pointer' : 'default'};\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ${index !== 0 ? brandAlt[400] : neutral[60]};\n\n\t\tsvg {\n\t\t\tfill: ${neutral[100]};\n\t\t}\n\t}\n`;\nconst nextButtonStyle = (index, totalStories) => css `\n\tpadding-left: 5px; /* Fix centering of SVG*/\n\tmargin-left: 10px;\n\tbackground-color: ${!isLastCardShowing(index, totalStories)\n    ? neutral[0]\n    : neutral[60]};\n\tcursor: ${!isLastCardShowing(index, totalStories) ? 'pointer' : 'default'};\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ${!isLastCardShowing(index, totalStories)\n    ? brandAlt[400]\n    : neutral[60]};\n\n\t\tsvg {\n\t\t\tfill: ${neutral[100]};\n\t\t}\n\t}\n`;\nconst headerRowStyles = css `\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\t${from.tablet} {\n\t\tpadding-right: 10px;\n\t}\n\n\t${from.tablet} {\n\t\tmargin-left: 10px;\n\t}\n`;\nconst headerStyles = css `\n\t${headline.xsmall({ fontWeight: 'bold' })};\n\tcolor: ${text.primary};\n\t${headline.xsmall({ fontWeight: 'bold' })};\n\tpadding-bottom: ${space[2]}px;\n\tpadding-top: ${space[1]}px;\n\tmargin-left: 0;\n`;\nconst titleStyle = (palette, isCuratedContent) => css `\n\tcolor: ${isCuratedContent ? palette.text.carouselTitle : text.primary};\n`;\nconst Title = ({ title, palette, isCuratedContent, }) => (_jsxs(\"h2\", { css: headerStyles, children: [isCuratedContent ? 'More from ' : '', _jsx(\"span\", { css: titleStyle(palette, isCuratedContent), children: title })] }));\nconst CarouselCard = ({ format, linkTo, imageUrl, headlineText, webPublicationDate, kickerText, isFirst, dataLinkName, discussionId, branding, }) => (_jsx(LI, { percentage: \"25%\", showDivider: !isFirst, padSides: true, padSidesOnMobile: true, snapAlignStart: true, children: _jsx(Card, { linkTo: linkTo, format: format, headlineText: headlineText, webPublicationDate: webPublicationDate, kickerText: kickerText, imageUrl: imageUrl, imageSize: imageUrl ? 'carousel' : undefined, showClock: true, showAge: true, imagePositionOnMobile: \"top\", minWidthInPixels: 220, showQuotedHeadline: format.design === ArticleDesign.Comment, dataLinkName: dataLinkName, discussionId: discussionId, branding: branding, isExternalLink: false }) }));\nconst HeaderAndNav = ({ heading, trails, palette, index, isCuratedContent, goToIndex, }) => (_jsxs(\"div\", { children: [_jsx(Title, { title: heading, palette: palette, isCuratedContent: isCuratedContent }), _jsx(\"div\", { css: dotsStyle, children: trails.map((_, i) => (_jsx(\"span\", { onClick: () => goToIndex(i), \"aria-hidden\": \"true\", css: [\n                    dotStyle,\n                    i === index && dotActiveStyle(palette),\n                    adjustNumberOfDotsStyle(i, trails.length),\n                ], \"data-link-name\": `carousel-small-nav-dot-${i}` }, `dot-${i}`))) })] }));\n/**\n * # Carousel\n *\n * A carousel of cards, mainly used in onward journeys,\n * at the bottom of articles\n *\n * ## Why does this need to be an Island?\n *\n * Data is fetched from an API client-side.\n *\n * ---\n *\n * [`Carousel` on Chromatic](https://www.chromatic.com/component?appId=63e251470cfbe61776b0ef19&csfId=components-carousel)\n */\nexport const Carousel = ({ heading, trails, onwardsSource, format }) => {\n    const palette = decidePalette(format);\n    const carouselRef = useRef(null);\n    const [index, setIndex] = useState(0);\n    const [maxIndex, setMaxIndex] = useState(0);\n    const arrowName = 'carousel-small-arrow';\n    const isCuratedContent = onwardsSource === 'curated-content';\n    const notPresentation = (el) => el.getAttribute('role') !== 'presentation';\n    const getItems = () => {\n        const { current } = carouselRef;\n        if (current === null)\n            return [];\n        return Array.from(current.children);\n    };\n    const getIndex = () => {\n        const { current } = carouselRef;\n        const offsets = getItems()\n            .filter(notPresentation)\n            .map((el) => el.offsetLeft);\n        const [offset] = offsets;\n        if (current === null || offset === undefined)\n            return 0;\n        const scrolled = current.scrollLeft + offset;\n        const active = offsets.findIndex((el) => el >= scrolled);\n        return Math.max(0, active);\n    };\n    const getSetIndex = () => {\n        setIndex(getIndex());\n    };\n    const goToIndex = (newIndex) => {\n        const { current } = carouselRef;\n        if (current === null)\n            return;\n        const offsets = getItems()\n            .filter(notPresentation)\n            .map((el) => el.offsetLeft);\n        current.scrollTo({ left: offsets[newIndex] });\n        getSetIndex();\n    };\n    const prev = () => {\n        const { current } = carouselRef;\n        const offsets = getItems()\n            .filter(notPresentation)\n            .map(({ offsetLeft }) => offsetLeft);\n        const [offset] = offsets;\n        if (current === null || offset === undefined)\n            return;\n        const scrolled = current.scrollLeft + offset;\n        const nextOffset = offsets.reverse().find((o) => o < scrolled);\n        if (nextOffset !== undefined && nextOffset !== 0) {\n            current.scrollTo({ left: nextOffset });\n        }\n        else {\n            current.scrollTo({ left: 0 });\n        }\n        getSetIndex();\n    };\n    const next = () => {\n        const { current } = carouselRef;\n        const offsets = getItems()\n            .filter(notPresentation)\n            .map(({ offsetLeft }) => offsetLeft);\n        const [offset] = offsets;\n        if (current === null || offset === undefined)\n            return;\n        const scrolled = current.scrollLeft + offset;\n        const nextOffset = offsets.find((currOffset) => currOffset > scrolled);\n        if (nextOffset !== undefined && nextOffset !== 0) {\n            current.scrollTo({ left: nextOffset });\n        }\n        getSetIndex();\n    };\n    useEffect(() => {\n        const carousel = carouselRef.current;\n        if (carousel) {\n            carousel.addEventListener('scroll', libDebounce(getSetIndex, 100));\n            return carousel.removeEventListener('scroll', libDebounce(getSetIndex, 100));\n        }\n    });\n    // No idea if this is the best approach but it prevents issues with libDebounce\n    // using old data to determine the max index. Instead we say update maxIndex\n    // when index changes and compare it against the prior maxIndex only.\n    useEffect(() => setMaxIndex((m) => Math.max(index, m)), [index]);\n    return (_jsxs(\"div\", { css: wrapperStyle(trails.length), \"data-link-name\": formatAttrString(heading), children: [_jsx(FetchCommentCounts, {}), _jsx(LeftColumn, { borderType: \"partial\", size: format.design === ArticleDesign.LiveBlog ||\n                    format.design === ArticleDesign.DeadBlog\n                    ? 'wide'\n                    : 'compact', children: _jsx(HeaderAndNav, { heading: heading, trails: trails, palette: palette, index: index, isCuratedContent: isCuratedContent, goToIndex: goToIndex }) }), _jsx(\"div\", { css: [buttonContainerStyle, prevButtonContainerStyle(format)], children: _jsx(\"button\", { type: \"button\", onClick: prev, \"aria-label\": \"Move carousel backwards\", css: [buttonStyle, prevButtonStyle(index)], \"data-link-name\": `${arrowName}-prev`, children: _jsx(SvgChevronLeftSingle, {}) }) }), _jsx(\"div\", { css: [buttonContainerStyle, nextButtonContainerStyle], children: _jsx(\"button\", { type: \"button\", onClick: next, \"aria-label\": \"Move carousel forwards\", css: [buttonStyle, nextButtonStyle(index, trails.length)], \"data-link-name\": `${arrowName}-next`, children: _jsx(SvgChevronRightSingle, {}) }) }), _jsxs(\"div\", { css: [containerStyles, containerMargins], \"data-component\": onwardsSource, \"data-link\": formatAttrString(heading), children: [_jsx(Hide, { when: \"above\", breakpoint: \"leftCol\", children: _jsxs(\"div\", { css: headerRowStyles, children: [_jsx(HeaderAndNav, { heading: heading, trails: trails, palette: palette, index: index, isCuratedContent: isCuratedContent, goToIndex: goToIndex }), _jsxs(Hide, { when: \"below\", breakpoint: \"desktop\", children: [_jsx(\"button\", { type: \"button\", onClick: prev, \"aria-label\": \"Move carousel backwards\", css: [buttonStyle, prevButtonStyle(index)], \"data-link-name\": `${arrowName}-prev`, children: _jsx(SvgChevronLeftSingle, {}) }), _jsx(\"button\", { type: \"button\", onClick: next, \"aria-label\": \"Move carousel forwards\", css: [\n                                                buttonStyle,\n                                                nextButtonStyle(index, trails.length),\n                                            ], \"data-link-name\": `${arrowName}-next`, children: _jsx(SvgChevronRightSingle, {}) })] })] }) }), _jsx(\"ul\", { css: carouselStyle, ref: carouselRef, \"data-component\": `carousel-small | maxIndex-${maxIndex}`, children: trails.map((trail, i) => {\n                            const { url: linkTo, headline: headlineText, webPublicationDate, format: trailFormat, image, kickerText, branding, discussion, } = trail;\n                            // Don't try to render cards that have no publication date. This property is technically optional\n                            // but we rarely if ever expect it not to exist\n                            if (!webPublicationDate)\n                                return null;\n                            const imageUrl = image && getSourceImageUrl(image);\n                            return (_jsx(CarouselCard, { isFirst: i === 0, format: trailFormat, linkTo: linkTo, headlineText: headlineText, webPublicationDate: webPublicationDate, imageUrl: imageUrl, kickerText: kickerText, dataLinkName: `carousel-small-card-position-${i}`, discussionId: discussion?.isCommentable\n                                    ? discussion.discussionId\n                                    : undefined, branding: branding }, `${trail.url}${i}`));\n                        }) })] })] }));\n};\n","import { jsx as _jsx, jsxs as _jsxs } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { between, textSans } from '@guardian/source-foundations';\nimport CommentIcon from '../../static/icons/comment.svg';\nimport { decidePalette } from '../lib/decidePalette';\nconst containerStyles = (palette, isDynamo) => css `\n\tdisplay: flex;\n\tflex-direction: row;\n\t${textSans.xxsmall({ lineHeight: 'tight' })};\n\tmargin-top: -4px;\n\tpadding-left: 5px;\n\tpadding-right: 5px;\n\tcolor: ${isDynamo ? palette.text.dynamoHeadline : palette.text.cardFooter};\n`;\nconst svgStyles = (palette, isDynamo) => css `\n\tsvg {\n\t\tmargin-bottom: -5px;\n\t\theight: 14px;\n\t\twidth: 14px;\n\t\tmargin-right: 2px;\n\t\tfill: ${isDynamo\n    ? palette.text.dynamoHeadline\n    : palette.text.cardFooter};\n\t}\n`;\nconst longStyles = css `\n\tdisplay: block;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: none;\n\t}\n`;\nconst shortStyles = css `\n\tdisplay: none;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: block;\n\t}\n`;\nexport const CardCommentCount = ({ containerPalette, format, short, long, isDynamo, }) => {\n    const palette = decidePalette(format, containerPalette);\n    return (_jsxs(\"div\", { css: containerStyles(palette, isDynamo), children: [_jsx(\"div\", { css: svgStyles(palette, isDynamo), children: _jsx(CommentIcon, {}) }), _jsx(\"div\", { css: longStyles, \"aria-hidden\": \"true\", children: long }), _jsx(\"div\", { css: shortStyles, \"aria-hidden\": \"true\", children: short })] }));\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { CacheProvider } from '@emotion/react';\nimport { useEffect, useState } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { getEmotionCache } from '../browser/islands/emotion';\nimport { formatCount } from '../lib/formatCount';\nimport { useApi } from '../lib/useApi';\nimport { CardCommentCount } from './CardCommentCount';\n/**\n * @description\n * Reads the dom looking for markers that contain the information needed to render the\n * count\n */\nfunction extractMarkers() {\n    const markers = [];\n    document\n        .querySelectorAll('[data-discussion-id]')\n        .forEach((element) => {\n        if (element instanceof HTMLElement) {\n            try {\n                const { discussionId, format, isDynamo, containerPalette } = element.dataset;\n                if (discussionId && format) {\n                    markers.push({\n                        discussionId,\n                        format: JSON.parse(format),\n                        isDynamo: isDynamo ? true : undefined,\n                        containerPalette,\n                    });\n                }\n            }\n            catch (e) {\n                // Do nothing\n            }\n        }\n    });\n    return markers;\n}\n/**\n * @description\n * Creates the url used to fetch the count data\n */\nfunction buildUrl(markers) {\n    const discussionIds = markers.flatMap((marker) => marker.discussionId); // E.g.: ['/p/3pm9v', '/p/4k83z', '/p/6bnba']\n    return `https://api.nextgen.guardianapps.co.uk/discussion/comment-counts.json?shortUrls=${discussionIds.join(',')}`;\n}\n/**\n * @description\n * Converts the count number into a formatted string and parses the stringified\n * format\n *\n * E.g.:\n *   - The 'long' version of 12345 is 12,345\n *   - The 'short' version of 12345 is 12k\n */\nfunction enhanceCounts(counts, markers) {\n    return counts.map(({ count, id }) => {\n        const { long, short } = formatCount(count);\n        const thisMarker = markers.find((marker) => marker.discussionId === id);\n        // We don't get format in the api response so look it up in the array\n        // of DOM markers\n        const format = thisMarker?.format;\n        const isDynamo = thisMarker?.isDynamo;\n        const containerPalette = thisMarker?.containerPalette;\n        return {\n            id,\n            long,\n            short,\n            format,\n            isDynamo,\n            containerPalette,\n        };\n    });\n}\n/**\n * @description\n * Takes the long and short version of each count and renders onto the page with react\n */\nfunction renderCounts(counts) {\n    counts.forEach((count) => {\n        const container = document.querySelector(`[data-discussion-id=\"${count.id}\"]`);\n        if (container) {\n            const root = createRoot(container);\n            root.render(_jsx(CacheProvider, { value: getEmotionCache(), children: _jsx(CardCommentCount, { format: count.format, short: count.short, long: count.long, isDynamo: count.isDynamo, containerPalette: count.containerPalette }) }));\n            container.setAttribute('aria-label', `${count.short} Comments`);\n        }\n    });\n}\n/**\n * @description\n * Makes an api call to fetch the comment counts for all Cards on the page\n *\n * For each Card with comments found (by looking for a marker element) it:\n *\n * - Fetches the comment count data in a single call to Frontend's discussion API\n * - Enhances the data, transforming the count from a number to formatted strings\n * - Uses react 'render' to add the comment counts to their placeholders\n *\n * We do it this was so that we can make a single call, but still render multiple comment counts\n * Using an individual island for each comment count could be more costly, especially on fronts\n *\n * @param {boolean} repeat If true, the fetch call will be repeated on an interval\n */\nexport const FetchCommentCounts = ({ repeat }) => {\n    const [url, setUrl] = useState();\n    useEffect(() => {\n        const markers = extractMarkers();\n        setUrl(buildUrl(markers));\n    }, []);\n    useApi(url, {\n        refreshInterval: repeat ? 15_000 : 0,\n        refreshWhenHidden: false,\n        onSuccess: (data) => {\n            // It's possible the DOM has been mutated and there are new Cards showing\n            // so we check again\n            const markers = extractMarkers();\n            if (data?.counts) {\n                try {\n                    renderCounts(enhanceCounts(data.counts, markers));\n                }\n                catch (e) {\n                    // Do nothing\n                }\n            }\n            // Make sure the list of discussionIds we fetch counts for is up to date\n            setUrl(buildUrl(markers));\n        },\n    });\n    return null;\n};\n","import { jsx as _jsx } from \"@emotion/react/jsx-runtime\";\nimport { css } from '@emotion/react';\nimport { between, border, from, space, until, } from '@guardian/source-foundations';\nconst leftWidth = (size) => {\n    switch (size) {\n        case 'wide': {\n            return css `\n\t\t\t\tpadding-right: 10px;\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\t/* below 1140 */\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\t/* above 1140 */\n\t\t\t\t\tflex-basis: 230px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\t\t\t`;\n        }\n        case 'compact':\n        default: {\n            return css `\n\t\t\t\tpadding-right: 10px;\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\t/* below 1140 */\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t${between.leftCol.and.wide} {\n\t\t\t\t\t/* above 1140, below 1300 */\n\t\t\t\t\tflex-basis: 151px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\n\t\t\t\t${from.wide} {\n\t\t\t\t\t/* above 1300 */\n\t\t\t\t\tflex-basis: 230px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n};\nconst positionRelative = css `\n\tposition: relative;\n`;\nconst partialRightBorder = (colour) => css `\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\theight: 30px;\n\t\twidth: 1px;\n\t\tbackground: ${colour};\n\t}\n`;\nconst fullRightBorder = (colour) => css `\n\tborder-right: 1px solid ${colour};\n`;\nexport const LeftColumn = ({ children, borderType, borderColour = border.secondary, size = 'compact', verticalMargins = true, }) => {\n    return (_jsx(\"section\", { css: [\n            positionRelative,\n            leftWidth(size),\n            borderType === 'full' && fullRightBorder(borderColour),\n            verticalMargins &&\n                css `\n\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tKeep spacing at the bottom of the container consistent at 36px, regardless of\n\t\t\t\t\t\t\tbreakpoint, based on chat with Harry Fisher\n\t\t\t\t\t\t*/\n\t\t\t\t\t\tpadding-bottom: ${space[9]}px;\n\t\t\t\t\t`,\n        ], children: _jsx(\"div\", { css: [\n                borderType === 'partial' &&\n                    partialRightBorder(borderColour),\n                css `\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t`,\n            ], children: children }) }));\n};\n","const integerCommas = (val) => {\n    const digits = val.toFixed(0).split('');\n    const len = digits.length;\n    for (let i = digits.length - 1; i >= 1; i -= 1) {\n        if ((len - i) % 3 === 0) {\n            digits.splice(i, 0, ',');\n        }\n    }\n    return digits.join('');\n};\nexport { integerCommas };\n","import { integerCommas } from '../../lib/formatters';\nexport const formatCount = (count) => {\n    if (count === undefined)\n        return { short: '…', long: '…' };\n    if (count === 0)\n        return { short: '0', long: '0' };\n    const countAsInteger = parseInt(count.toFixed(0), 10);\n    const displayCountLong = integerCommas(countAsInteger);\n    const displayCountShort = countAsInteger > 10000\n        ? `${Math.round(countAsInteger / 1000)}k`\n        : countAsInteger.toString();\n    return {\n        short: displayCountShort,\n        long: displayCountLong,\n    };\n};\n","\nmodule.exports = {\"attributes\":{\"width\":\"16\",\"height\":\"16\",\"viewBox\":\"0 0 16 16\"},\"content\":\"<path d=\\\"M13 0l1 1v7l-1 1H7l-2 3H4V9H2L1 8V1l1-1h11z\\\"></path>\"}\nvar desvg = require('@kossnocorp/desvg/react')\nmodule.exports = desvg(module.exports)\n"],"names":["formatAttrString","input","str","replace","RegExp","removeTempChars","replaceSpacesWithHyphens","toLowerCase","SvgChevronLeftSingle","_jsx","viewBox","xmlns","width","height","children","fillRule","clipRule","d","SvgChevronRightSingle","isLastCardShowing","index","totalStories","containerMargins","css","from","containerStyles","carouselStyle","until","dotsStyle","space","dotStyle","neutral","dotActiveStyle","palette","background","carouselDot","carouselDotFocus","adjustNumberOfDotsStyle","buttonContainerStyle","getZIndex","prevButtonContainerStyle","format","design","ArticleDesign","nextButtonContainerStyle","buttonStyle","brandAlt","prevButtonStyle","nextButtonStyle","headerRowStyles","headerStyles","headline","fontWeight","text","titleStyle","isCuratedContent","carouselTitle","Title","title","_jsxs","CarouselCard","linkTo","imageUrl","headlineText","webPublicationDate","kickerText","isFirst","dataLinkName","discussionId","branding","LI","percentage","showDivider","padSides","padSidesOnMobile","snapAlignStart","Card","imageSize","undefined","showClock","showAge","imagePositionOnMobile","minWidthInPixels","showQuotedHeadline","isExternalLink","HeaderAndNav","heading","trails","goToIndex","map","_","i","onClick","length","Carousel","onwardsSource","decidePalette","carouselRef","useRef","useState","setIndex","maxIndex","setMaxIndex","arrowName","notPresentation","el","getAttribute","getItems","current","Array","getSetIndex","offsets","filter","offsetLeft","offset","scrolled","scrollLeft","active","findIndex","Math","max","getIndex","newIndex","scrollTo","left","prev","nextOffset","reverse","find","o","next","currOffset","useEffect","carousel","addEventListener","libDebounce","removeEventListener","m","FetchCommentCounts","LeftColumn","borderType","size","type","Hide","when","breakpoint","ref","trail","url","trailFormat","image","discussion","getSourceImageUrl","isCommentable","isDynamo","textSans","lineHeight","dynamoHeadline","cardFooter","svgStyles","longStyles","between","shortStyles","CardCommentCount","containerPalette","short","long","CommentIcon","extractMarkers","markers","document","querySelectorAll","forEach","element","HTMLElement","dataset","push","JSON","parse","e","buildUrl","discussionIds","flatMap","marker","join","repeat","setUrl","useApi","refreshInterval","refreshWhenHidden","onSuccess","data","counts","count","id","formatCount","thisMarker","enhanceCounts","container","querySelector","createRoot","render","CacheProvider","value","getEmotionCache","setAttribute","leftWidth","positionRelative","partialRightBorder","colour","borderColour","border","verticalMargins","countAsInteger","parseInt","toFixed","displayCountLong","val","digits","split","len","splice","integerCommas","round","toString","module","exports","desvg"],"sourceRoot":""}