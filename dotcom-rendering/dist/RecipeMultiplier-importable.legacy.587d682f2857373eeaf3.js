"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[834],{9371:(e,n,t)=>{t.r(n),t.d(n,{RecipeMultiplier:()=>C});var i,r,o=t(5809),c=t(126),a=t(7800),s=t(43),d=t(1898),l=t(6621),u=function(e){return void 0===e},v=t(9525),p=t(7162),g=t(2933),f=t(3965),h=t(1171),m=t(4872),x=t(3904),b=t(3287),j="\ngu-recipe {\n\tcolor: ".concat(v.H5[100],";\n\tbackground-color: ").concat(v.H5[800],";\n\tfont-weight: bold;\n}\n"),y=(0,s.css)(p.OS.small()," position:sticky;z-index:1;display:grid;grid-template-columns:6fr repeat(3, 1fr);top:0;color:",v.H5[100],";background-color:",v.H5[800],";padding:",g.D[2],"px;"),w=["g","l"],O="undefined"==typeof document,S=["s","second","seconds","min","minute","minutes","hr","hour","hours","C","c","cm","mm"],k=new Map([["½",.5],["⅓",.3333],["⅔",.6667],["¼",.25],["¾",.75],["⅕",.2],["⅖",.4],["⅗",.6],["⅘",.8],["⅙",.1667],["⅚",.8333],["⅐",.1429],["⅛",.125],["⅜",.375],["⅝",.625],["⅞",.875],["⅑",.1111],["⅒",.1]]),z=new RegExp(["(?:".concat(["","Serves ","Makes "].join("|"),")"),"(?<value>".concat(["\\d+","\\d+-\\d+","\\d+/\\d+"].concat((0,c.Z)(k.keys())).join("|"),")"),"(?:(?<separator> ?)","(?<unit>[a-z]+?\\b)|(?=<))"].join(""),"i"),E=O?1:parseFloat(null!==(i=null===(r=document.querySelector("gu-recipe[serves]"))||void 0===r?void 0:r.dataset.value)&&void 0!==i?i:"1"),C=function(){var e=(0,x.useState)(E),n=(0,o.Z)(e,2),t=n[0],i=n[1],r=(0,x.useState)(1),c=(0,o.Z)(r,2),p=c[0],g=c[1];return(0,b.t)((function(){var e;(0,l.c)("dotcom","Injecting multiplier");var n=document.createElement("style");n.innerHTML=j,document.body.appendChild(n);var t=null===(e=document.querySelector("gu-island[name=RecipeMultiplier]"))||void 0===e?void 0:e.nextSibling;if(t instanceof HTMLElement)for(var i,r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null),c=function(){var e,n;if(!(i instanceof Text))return"continue";var t=null!==(e=null===(n=i.nodeValue)||void 0===n?void 0:n.match(z))&&void 0!==e?e:void 0;if(!t)return"continue";var r,c=t.index,a=t.groups,s=t[0].length;switch(c){case void 0:case-1:break;case 0:var u;s&&i.splitText(s);var v=document.createElement("gu-recipe");if(v.textContent=i.textContent,r=null==a?void 0:a.unit,(0,d.H)(r)&&S.includes(r))return"continue";Object.entries(null!=a?a:{}).map((function(e){var n,t,i=(0,o.Z)(e,2),r=i[0],c=i[1],a=c.split("/").map(parseFloat),s=(0,o.Z)(a,2),d=s[0],l=s[1];return"value"===r&&c.includes("/")&&void 0!==d&&void 0!==l?[r,(d/l).toString()]:[r,null!==(n=null===(t=k.get(c))||void 0===t?void 0:t.toString())&&void 0!==n?n:c]})).forEach((function(e){var n=(0,o.Z)(e,2),t=n[0],i=n[1];v.setAttribute("data-".concat(t),i)})),null===(u=i.parentNode)||void 0===u||u.insertBefore(v,i),i.textContent=null;break;default:i.splitText(c)}(0,l.c)("design",c,s,i.textContent)};i=r.nextNode();)c()}),[]),(0,x.useEffect)((function(){var e=document.querySelector("gu-recipe[serves]");e&&(e.innerText=t.toString()),g(t/E)}),[t]),(0,x.useEffect)((function(){document.querySelectorAll("gu-recipe").forEach((function(e){var n=e.dataset,t=n.value,i=n.separator,r=n.unit;u(t)||u(i)||u(r)||(e.innerText=function(e){var n=e.value,t=e.separator,i=e.unit,r=(0,o.Z)(n,2),c=r[0],a=r[1];if(void 0===c)return"Invalid value";if(void 0!==a)return"".concat(c,"-").concat(a).concat(t).concat(i);if(function(e){return w.includes(e)}(i)){var s=5*Math.round(c/5);return"".concat(s).concat(t).concat(i)}var d=c>1?Math.round(c):Math.round(100*c)/100;return"".concat(d).concat(t).concat(i)}({value:t.split("-").map(parseFloat).map((function(e){return e*p})),separator:i,unit:r}))}))}),[p]),(0,a.jsxs)("ul",{css:y,children:[(0,a.jsxs)("li",{children:["Serves ",t]}),(0,a.jsx)("li",{css:{textAlign:"center"},children:(0,a.jsx)(f.z,{icon:(0,a.jsx)(h.i,{}),hideLabel:!0,size:"xsmall",disabled:t-1<.5,cssOverrides:(0,s.css)("background-color:",v.H5[300],";"),onClick:function(){return i(t-1)},children:"subtract 1 serving"})}),(0,a.jsx)("li",{css:{fontWeight:"bold",textAlign:"center"},children:t}),(0,a.jsx)("li",{css:{textAlign:"center"},children:(0,a.jsx)(f.z,{icon:(0,a.jsx)(m.G,{}),hideLabel:!0,size:"xsmall",disabled:t+1>24,cssOverrides:(0,s.css)("background-color:",v.H5[300],";"),onClick:function(){return i(t+1)},children:"add 1 serving"})}),(0,a.jsx)("li",{css:{gridColumn:"1 / -1",accentColor:v.H5[300]},children:(0,a.jsx)("input",{css:{width:"100%",margin:0},type:"range",name:"",min:.5,max:24,step:.5,value:t,onChange:function(e){var n=e.target.value,t=Number.parseFloat(n);Number.isNaN(t)||i(t)}})})]})}},3287:(e,n,t)=>{t.d(n,{t:()=>o});var i=t(5809),r=t(3904),o=function(e,n){var t=(0,r.useState)(!1),o=(0,i.Z)(t,2),c=o[0],a=o[1],s=n.every((function(e){return void 0!==e}));(0,r.useEffect)((function(){!c&&s&&(e(),a(!0))}),[c,s,e])}},3965:(e,n,t)=>{t.d(n,{z:()=>u});var i=t(4649),r=t(8808),o=t(7800),c=t(8259),a=t(5015),s=["priority","size","icon","iconSide","hideLabel","nudgeIcon","type","isLoading","loadingAnnouncement","cssOverrides","children"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var u=function(e){var n=e.priority,t=e.size,i=e.icon,d=e.iconSide,u=e.hideLabel,v=e.nudgeIcon,p=e.type,g=void 0===p?"button":p,f=e.isLoading,h=void 0!==f&&f,m=e.loadingAnnouncement,x=void 0===m?"Loading":m,b=e.cssOverrides,j=e.children,y=(0,r.Z)(e,s);return(0,o.jsx)("button",l(l({css:(0,a.$)({size:t,priority:n,icon:i,hideLabel:u,iconSide:d,nudgeIcon:v,cssOverrides:b,isLoading:h}),type:g,"aria-live":"polite","aria-label":h?x:void 0},y),{},{children:(0,c._)({hideLabel:u,iconSvg:i,isLoading:h,children:j})}))}},1171:(e,n,t)=>{t.d(n,{i:()=>s});var i=t(7800),r=t(43),o=t(7861),c=t(9861),a=function(e){var n=e.size;return(0,i.jsx)("svg",{width:n?o.EA[n]:void 0,height:void 0,viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg",focusable:!1,"aria-hidden":!0,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 10.75v2.5h22v-2.5H1Z"})})},s=function(e){var n=e.size,t=e.isAnnouncedByScreenReader,o=void 0!==t&&t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a,{size:n}),o?(0,i.jsx)("span",{css:(0,r.css)(c.j,";"),children:"Minus sign"}):""]})}},4872:(e,n,t)=>{t.d(n,{G:()=>s});var i=t(7800),r=t(43),o=t(7861),c=t(9861),a=function(e){var n=e.size;return(0,i.jsx)("svg",{width:n?o.EA[n]:void 0,height:void 0,viewBox:"-3 -3 30 30",xmlns:"http://www.w3.org/2000/svg",focusable:!1,"aria-hidden":!0,children:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m10.8 13.2.425 9.8h1.525l.45-9.8 9.8-.45v-1.525l-9.8-.425-.45-9.8h-1.525l-.425 9.8-9.8.425v1.525l9.8.45Z"})})},s=function(e){var n=e.size,t=e.isAnnouncedByScreenReader,o=void 0!==t&&t;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a,{size:n}),o?(0,i.jsx)("span",{css:(0,r.css)(c.j,";"),children:"Plus sign"}):""]})}}}]);
//# sourceMappingURL=RecipeMultiplier-importable.legacy.587d682f2857373eeaf3.js.map