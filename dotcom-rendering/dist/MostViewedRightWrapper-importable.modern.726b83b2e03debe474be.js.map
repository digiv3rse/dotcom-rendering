{"version":3,"file":"MostViewedRightWrapper-importable.modern.726b83b2e03debe474be.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/components/MostViewedRightItem.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/useHover.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/MostViewedRight.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/MostViewedRightWrapper.importable.tsx","webpack://@guardian/dotcom-rendering/./src/web/lib/decideDesign.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideDisplay.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideTheme.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideFormat.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/decideTrail.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/getDataLinkName.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useAdBlockInUse.ts","webpack://@guardian/dotcom-rendering/./src/web/lib/useApi.tsx","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-foundations/esm/space/space.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components-development-kitchen/esm/lines/StraightLines.js"],"sourcesContent":["import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { border, headline, neutral, text } from '@guardian/source-foundations';\nimport type { TrailType } from '../../types/trails';\nimport { useHover } from '../lib/useHover';\nimport { AgeWarning } from './AgeWarning';\nimport { Avatar } from './Avatar';\nimport { LinkHeadline } from './LinkHeadline';\n\nconst listItemStyles = css`\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\t&::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tpadding-top: 4px;\n\tmargin-bottom: 12px;\n\tborder-top: 1px solid ${border.secondary};\n\n\t&:first-of-type {\n\t\tpadding-top: 0;\n\t\tborder-top: none;\n\t}\n`;\n\nconst linkTagStyles = css`\n\ttext-decoration: none;\n\tfont-weight: 500;\n\t${headline.xxxsmall()};\n\n\t&:link,\n\t&:active {\n\t\tcolor: ${text.anchorSecondary};\n\t}\n\n\t&:visited h4 {\n\t\tcolor: ${neutral[46]};\n\t}\n\n\t&:hover h4 {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nconst lineWrapperStyles = css`\n\tdisplay: flex;\n`;\n\nconst headlineWrapperStyles = css`\n\twidth: calc(100% - 82px);\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst imageWrapperStyles = css`\n\twidth: 72px;\n\theight: 72px;\n\tmargin-top: 3px;\n\tmargin-right: 10px;\n`;\n\nconst marginTopStyles = css`\n\tmargin-top: 4px;\n`;\n\ntype Props = {\n\ttrail: TrailType;\n\tmostViewedItemIndex: number;\n};\n\nexport const MostViewedRightItem = ({ trail, mostViewedItemIndex }: Props) => {\n\tconst [hoverRef, isHovered] = useHover<HTMLAnchorElement>();\n\n\treturn (\n\t\t<li\n\t\t\tcss={listItemStyles}\n\t\t\tdata-link-name={`trail | ${mostViewedItemIndex + 1}`}\n\t\t>\n\t\t\t<a css={linkTagStyles} href={trail.url} ref={hoverRef}>\n\t\t\t\t<div css={lineWrapperStyles}>\n\t\t\t\t\t{!!trail.image && (\n\t\t\t\t\t\t<div css={imageWrapperStyles}>\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\tsrc={trail.image}\n\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div css={headlineWrapperStyles}>\n\t\t\t\t\t\t{trail.format.design === ArticleDesign.LiveBlog ? (\n\t\t\t\t\t\t\t<LinkHeadline\n\t\t\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tshowUnderline={isHovered}\n\t\t\t\t\t\t\t\tkickerText=\"Live\"\n\t\t\t\t\t\t\t\thideLineBreak={true}\n\t\t\t\t\t\t\t\tbyline={\n\t\t\t\t\t\t\t\t\ttrail.showByline ? trail.byline : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<LinkHeadline\n\t\t\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tshowUnderline={isHovered}\n\t\t\t\t\t\t\t\tbyline={\n\t\t\t\t\t\t\t\t\ttrail.showByline ? trail.byline : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div css={marginTopStyles}>\n\t\t\t\t\t\t\t{!!trail.ageWarning && (\n\t\t\t\t\t\t\t\t<AgeWarning\n\t\t\t\t\t\t\t\t\tage={trail.ageWarning}\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</li>\n\t);\n};\n","import type { MutableRefObject } from 'react';\nimport { useEffect, useRef, useState } from 'react';\n\nexport function useHover<T>(): [MutableRefObject<T>, boolean] {\n\tconst [value, setValue] = useState(false);\n\n\tconst ref = useRef<any>(null);\n\n\tconst handleMouseOver = () => setValue(true);\n\tconst handleMouseOut = () => setValue(false);\n\n\tuseEffect(() => {\n\t\tconst node: HTMLElement | undefined = ref.current;\n\t\tif (node) {\n\t\t\tnode.addEventListener('mouseover', handleMouseOver);\n\t\t\tnode.addEventListener('mouseout', handleMouseOut);\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener('mouseover', handleMouseOver);\n\t\t\t\tnode.removeEventListener('mouseout', handleMouseOut);\n\t\t\t};\n\t\t}\n\t\treturn () => {};\n\t}, []);\n\n\treturn [ref, value];\n}\n","import { css } from '@emotion/react';\nimport { headline } from '@guardian/source-foundations';\nimport { StraightLines } from '@guardian/source-react-components-development-kitchen';\nimport type { FETrailTabType, TrailType } from '../../types/trails';\nimport { decideTrail } from '../lib/decideTrail';\nimport { useApi } from '../lib/useApi';\nimport { MostViewedRightItem } from './MostViewedRightItem';\n\nconst wrapperStyles = css`\n\tmargin-top: 24px;\n\tpadding-bottom: 48px;\n`;\n\n// We only stick most viewed when ads are not showing. We do this\n// to maximise right column space\nconst stickyStyles = css`\n\tposition: sticky;\n\ttop: 0;\n`;\n\nconst headingStyles = css`\n\t${headline.xxxsmall({ fontWeight: 'bold' })}\n\tmargin-bottom: 8px;\n`;\n\ninterface Props {\n\tlimitItems?: number;\n\tisAdFreeUser: boolean;\n\tadBlockerDetected: boolean;\n}\n\nexport const MostViewedRight = ({\n\tlimitItems = 5,\n\tisAdFreeUser,\n\tadBlockerDetected,\n}: Props) => {\n\tconst endpointUrl =\n\t\t'https://api.nextgen.guardianapps.co.uk/most-read-geo.json?dcr=true';\n\tconst { data, error } = useApi<FETrailTabType>(endpointUrl);\n\n\tif (error) {\n\t\twindow.guardian.modules.sentry.reportError(error, 'most-viewed-right');\n\t\treturn null;\n\t}\n\n\tif (data) {\n\t\tconst trails: TrailType[] = data.trails\n\t\t\t.slice(0, limitItems)\n\t\t\t.map(decideTrail);\n\t\tconst stickToTop = adBlockerDetected || isAdFreeUser;\n\t\t// Look I don't know why data-component is geo-most-popular either, but it is, ok? Ok.\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={[wrapperStyles, stickToTop && stickyStyles]}\n\t\t\t\tdata-component=\"geo-most-popular\"\n\t\t\t>\n\t\t\t\t<StraightLines\n\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t`}\n\t\t\t\t\tcount={4}\n\t\t\t\t/>\n\t\t\t\t<h3 css={headingStyles}>Most viewed</h3>\n\t\t\t\t<ul data-link-name=\"Right hand most popular geo GB\">\n\t\t\t\t\t{trails.map((trail, index) => (\n\t\t\t\t\t\t<MostViewedRightItem\n\t\t\t\t\t\t\tkey={trail.url}\n\t\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\t\tmostViewedItemIndex={index}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n","import { css } from '@emotion/react';\nimport type { RefObject } from 'react';\nimport { useEffect, useRef, useState } from 'react';\nimport { useAdBlockInUse } from '../lib/useAdBlockInUse';\nimport { MostViewedRight } from './MostViewedRight';\n\ntype Props = {\n\tlimitItems?: number;\n\tisAdFreeUser: boolean;\n};\n\n// Minimum height needed to render MostViewedRight is its own outer height.\nconst HEIGHT_REQUIRED = 482 + 24 + 24;\n\nconst SHADY_PIE_HEIGHT = 400;\nconst TOP_RIGHT_AD_HEIGHT = 1059;\n\n// Wrapping MostViewedRight so we can determine whether or not there's enough vertical space in the container to render it.\nexport const MostViewedRightWrapper = ({ limitItems, isAdFreeUser }: Props) => {\n\tconst adBlockerDetected = useAdBlockInUse();\n\tconst bodyRef = useRef<HTMLDivElement>(null);\n\tconst [heightIsAvailable, setHeightIsAvailable] = useState<boolean>(false);\n\n\tuseEffect(() => {\n\t\tconst checkHeight = (ref: RefObject<HTMLDivElement>) => {\n\t\t\tif (!heightIsAvailable) {\n\t\t\t\t// Don't bother checking if height already available\n\t\t\t\tif (ref.current) {\n\t\t\t\t\tconst { offsetHeight } = ref.current;\n\t\t\t\t\tsetHeightIsAvailable(offsetHeight > HEIGHT_REQUIRED);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Check if we have the available height\n\t\tcheckHeight(bodyRef);\n\n\t\t// setTimeout here lets us put another check at the end of the\n\t\t// event queue in case any in body elements still need to render\n\t\t// which could push the page down giving us the space we need\n\t\tsetTimeout(() => {\n\t\t\tcheckHeight(bodyRef);\n\t\t});\n\t}, [heightIsAvailable]);\n\n\tconst rightAdvertHeight = adBlockerDetected\n\t\t? SHADY_PIE_HEIGHT\n\t\t: TOP_RIGHT_AD_HEIGHT;\n\n\t// Styling the data island root so it stretches to cover the full height available in the container.\n\t// Requires us to subtract the height of its sibling in the container (Sticky top right ad slot).\n\tconst availableSpaceHeight = css`\n\t\theight: calc(100% - ${rightAdvertHeight}px);\n\t`;\n\n\tif (!heightIsAvailable) {\n\t\treturn <div ref={bodyRef} css={availableSpaceHeight} />;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tref={bodyRef}\n\t\t\tcss={css`\n\t\t\t\theight: auto;\n\t\t\t`}\n\t\t>\n\t\t\t<MostViewedRight\n\t\t\t\tlimitItems={limitItems}\n\t\t\t\tisAdFreeUser={isAdFreeUser}\n\t\t\t\tadBlockerDetected={!!adBlockerDetected}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","import { ArticleDesign } from '@guardian/libs';\n\n/**\n * NOTE: Immersive Opinion pieces are not supported,\n * i.e. when `CommentDesign` and `ImmersiveDisplay` are used jointly.\n */\nexport const decideDesign = ({\n\tdesign,\n\tdisplay,\n}: Partial<FEFormat>): ArticleDesign => {\n\tswitch (design) {\n\t\tcase 'ArticleDesign':\n\t\t\treturn ArticleDesign.Standard;\n\t\tcase 'GalleryDesign':\n\t\t\treturn ArticleDesign.Gallery;\n\t\tcase 'AudioDesign':\n\t\t\treturn ArticleDesign.Audio;\n\t\tcase 'VideoDesign':\n\t\t\treturn ArticleDesign.Video;\n\t\tcase 'ReviewDesign':\n\t\t\treturn ArticleDesign.Review;\n\t\tcase 'AnalysisDesign':\n\t\t\treturn ArticleDesign.Analysis;\n\t\tcase 'CommentDesign':\n\t\t\t// Temporary hack until we can handle Immersive Opinion pieces\n\t\t\treturn display === 'ImmersiveDisplay'\n\t\t\t\t? ArticleDesign.Standard\n\t\t\t\t: ArticleDesign.Comment;\n\t\tcase 'LetterDesign':\n\t\t\treturn ArticleDesign.Letter;\n\t\tcase 'FeatureDesign':\n\t\t\treturn ArticleDesign.Feature;\n\t\tcase 'LiveBlogDesign':\n\t\t\treturn ArticleDesign.LiveBlog;\n\t\tcase 'DeadBlogDesign':\n\t\t\treturn ArticleDesign.DeadBlog;\n\t\tcase 'RecipeDesign':\n\t\t\treturn ArticleDesign.Recipe;\n\t\tcase 'MatchReportDesign':\n\t\t\treturn ArticleDesign.MatchReport;\n\t\tcase 'InterviewDesign':\n\t\t\treturn ArticleDesign.Interview;\n\t\tcase 'EditorialDesign':\n\t\t\treturn ArticleDesign.Editorial;\n\t\tcase 'QuizDesign':\n\t\t\treturn ArticleDesign.Quiz;\n\t\tcase 'InteractiveDesign':\n\t\t\treturn ArticleDesign.Interactive;\n\t\tcase 'PhotoEssayDesign':\n\t\t\treturn ArticleDesign.PhotoEssay;\n\t\tcase 'PrintShopDesign':\n\t\t\treturn ArticleDesign.PrintShop;\n\t\tcase 'ObituaryDesign':\n\t\t\treturn ArticleDesign.Obituary;\n\t\tcase 'FullPageInteractiveDesign':\n\t\t\treturn ArticleDesign.FullPageInteractive;\n\t\tcase 'NewsletterSignupDesign':\n\t\t\treturn ArticleDesign.NewsletterSignup;\n\t\tcase 'ExplainerDesign':\n\t\t\treturn ArticleDesign.Explainer;\n\t\tcase 'TimelineDesign':\n\t\t\treturn ArticleDesign.Timeline;\n\t\tcase 'ProfileDesign':\n\t\t\treturn ArticleDesign.Profile;\n\t\tdefault:\n\t\t\treturn ArticleDesign.Standard;\n\t}\n};\n","import { ArticleDisplay } from '@guardian/libs';\n\nexport const decideDisplay = ({\n\tdisplay,\n}: Partial<FEFormat>): ArticleDisplay => {\n\tswitch (display) {\n\t\tcase 'StandardDisplay':\n\t\t\treturn ArticleDisplay.Standard;\n\t\tcase 'ImmersiveDisplay':\n\t\t\treturn ArticleDisplay.Immersive;\n\t\tcase 'ShowcaseDisplay':\n\t\t\treturn ArticleDisplay.Showcase;\n\t\tcase 'NumberedListDisplay':\n\t\t\treturn ArticleDisplay.NumberedList;\n\t\tdefault:\n\t\t\treturn ArticleDisplay.Standard;\n\t}\n};\n","import { ArticlePillar, ArticleSpecial } from '@guardian/libs';\n\nexport const decideTheme = ({ theme }: Partial<FEFormat>): ArticleTheme => {\n\tswitch (theme) {\n\t\tcase 'NewsPillar':\n\t\t\treturn ArticlePillar.News;\n\t\tcase 'OpinionPillar':\n\t\t\treturn ArticlePillar.Opinion;\n\t\tcase 'SportPillar':\n\t\t\treturn ArticlePillar.Sport;\n\t\tcase 'CulturePillar':\n\t\t\treturn ArticlePillar.Culture;\n\t\tcase 'LifestylePillar':\n\t\t\treturn ArticlePillar.Lifestyle;\n\t\tcase 'SpecialReportTheme':\n\t\t\treturn ArticleSpecial.SpecialReport;\n\t\tcase 'SpecialReportAltTheme':\n\t\t\treturn ArticleSpecial.SpecialReportAlt;\n\t\tcase 'Labs':\n\t\t\treturn ArticleSpecial.Labs;\n\t\tdefault:\n\t\t\treturn ArticlePillar.News;\n\t}\n};\n","import { decideDesign } from './decideDesign';\nimport { decideDisplay } from './decideDisplay';\nimport { decideTheme } from './decideTheme';\n\nexport const decideFormat = (format: Partial<FEFormat>): ArticleFormat => ({\n\tdisplay: decideDisplay(format),\n\ttheme: decideTheme(format),\n\tdesign: decideDesign(format),\n});\n","import type { FETrailType, TrailType } from '../../types/trails';\nimport { decideFormat } from './decideFormat';\nimport { getDataLinkNameCard } from './getDataLinkName';\n\nexport const decideTrail = (trail: FETrailType, index = 0): TrailType => {\n\tconst format: ArticleFormat = decideFormat(trail.format);\n\n\treturn {\n\t\t...trail,\n\t\tformat,\n\t\tdataLinkName: getDataLinkNameCard(format, '0', index + 1),\n\t};\n};\n","import { ArticleDesign, ArticleSpecial } from '@guardian/libs';\n\n/**\n * TODO: missing \"podcast\" and \"external\"\n */\nconst getLinkType = ({ theme, design }: ArticleFormat): RichLinkCardType => {\n\tswitch (theme) {\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn 'special-report';\n\t\tdefault:\n\t\t\tswitch (design) {\n\t\t\t\tcase ArticleDesign.Analysis:\n\t\t\t\t\treturn 'analysis';\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\t\treturn 'live';\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\treturn 'dead';\n\t\t\t\tcase ArticleDesign.Feature:\n\t\t\t\t\treturn 'feature';\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\t\treturn 'editorial';\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\t\treturn 'comment';\n\t\t\t\tcase ArticleDesign.Gallery:\n\t\t\t\tcase ArticleDesign.Audio:\n\t\t\t\tcase ArticleDesign.Video:\n\t\t\t\t\treturn 'media';\n\t\t\t\tcase ArticleDesign.Review:\n\t\t\t\t\treturn 'review';\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\t\treturn 'letters';\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'news';\n\t\t\t}\n\t}\n};\n\n/**\n * Get the `data-link-name` attribute for a card.\n * Used by Ophan for understanding reader journeys. E.g:\n * - `feature | card-2+ | card-@1`\n * - `news | group-0 | card-@5`\n *\n * @see {JSX.IntrinsicAttributes}\n */\nexport const getDataLinkNameCard = (\n\tformat: ArticleFormat,\n\tgroup: string | number,\n\tindex: number,\n): string =>\n\t[getLinkType(format), `group-${group}`, `card-@${index}`].join(' | ');\n","import { isAdBlockInUse } from '@guardian/commercial-core';\nimport { useEffect, useState } from 'react';\n\n/**\n * @description\n * useAdBlockInUse provides a custom hook to integrate the isAdBlockInUse\n * promise into a react component\n * */\nexport const useAdBlockInUse = (): boolean | undefined => {\n\tconst [isInUse, setIsInUse] = useState<boolean | undefined>();\n\tuseEffect(() => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\tisAdBlockInUse().then((blockerDetected) => {\n\t\t\tsetIsInUse(blockerDetected);\n\t\t});\n\t}, []);\n\n\treturn isInUse;\n};\n","import type { SWRConfiguration } from 'swr';\nimport useSWR from 'swr';\n\nfunction checkForErrors(response: Response) {\n\tif (!response.ok) {\n\t\tthrow Error(\n\t\t\tresponse.statusText ||\n\t\t\t\t`useApi | An api call returned HTTP status ${response.status}`,\n\t\t);\n\t}\n\treturn response;\n}\n\nconst fetcher = (init?: RequestInit) => (url: string) =>\n\tfetch(url, init)\n\t\t.then(checkForErrors)\n\t\t.then((res) => res.json());\n\ninterface ApiResponse<T> {\n\tloading: boolean;\n\tdata?: T;\n\terror?: Error;\n}\n\n/**\n * @description\n * A custom hook to make a GET request using the given url using the SWR lib (https://swr.vercel.app/)\n * returns { loading, error, data }\n * @param {String} url - The url to fetch\n * @param {SWRConfiguration} options - The SWR config object - https://swr.vercel.app/docs/options\n * @param {RequestInit} init - The fetch init object - https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n * */\nexport const useApi = <T,>(\n\turl?: string,\n\toptions?: SWRConfiguration,\n\tinit?: RequestInit,\n): ApiResponse<T> => {\n\tconst { data, error } = useSWR(url, fetcher(init), options);\n\n\treturn {\n\t\tdata,\n\t\terror,\n\t\tloading: !!url && !error && !data,\n\t};\n};\n","import { pxToRem } from '../utils/px-to-rem.js';\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_space--page) •\n * [Design System](https://theguardian.design/2a1e5182b/p/05f835-space)\n *\n * Can be applied to margin or padding properties, vertically or horizontally.\n *\n ** `space[1]` -> 4px\n ** `space[2]` -> 8px\n ** `space[3]` -> 12px\n ** `space[4]` -> 16px\n ** `space[5]` -> 20px\n ** `space[6]` -> 24px\n ** `space[9]` -> 36px\n ** `space[12]` -> 48px\n ** `space[24]` -> 96px\n */\nconst space = {\n    1: 4,\n    2: 8,\n    3: 12,\n    4: 16,\n    5: 20,\n    6: 24,\n    9: 36,\n    12: 48,\n    24: 96,\n};\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/docs/source-foundations_space--page) •\n * [Design System](https://theguardian.design/2a1e5182b/p/05f835-space)\n *\n * Can be applied to margin or padding properties, vertically or horizontally.\n *\n ** `remSpace[1]` -> 0.25rem\n ** `remSpace[2]` -> 0.5rem\n ** `remSpace[3]` -> 0.75rem\n ** `remSpace[4]` -> 1rem\n ** `remSpace[5]` -> 1.25rem\n ** `remSpace[6]` -> 1.5rem\n ** `remSpace[9]` -> 2.25rem\n ** `remSpace[12]` -> 3rem\n ** `remSpace[24]` -> 6rem\n */\nconst remSpace = {\n    1: `${pxToRem(space[1])}rem`,\n    2: `${pxToRem(space[2])}rem`,\n    3: `${pxToRem(space[3])}rem`,\n    4: `${pxToRem(space[4])}rem`,\n    5: `${pxToRem(space[5])}rem`,\n    6: `${pxToRem(space[6])}rem`,\n    9: `${pxToRem(space[9])}rem`,\n    12: `${pxToRem(space[12])}rem`,\n    24: `${pxToRem(space[24])}rem`,\n};\n/* TODO: this should be exposed as a number instead of a string,\n   so consumers can perform calculations on it */\n\nexport { remSpace, space };\n//# sourceMappingURL=space.js.map\n","import { jsx } from '@emotion/react/jsx-runtime';\nimport { space, breakpoints, neutral } from '@guardian/source-foundations';\n\nconst thickness = 1;\nconst gapVertical = space[1];\nconst maxWidth = breakpoints.wide;\nconst getHeight = (count) => gapVertical * (count - 1) + thickness;\nconst StraightLines = ({ count = 4, color = neutral[86], cssOverrides, }) => {\n    const height = getHeight(count);\n    const viewBox = `0 0 ${maxWidth} ${height}`;\n    const lines = [];\n    for (let index = 0; index < count; index++) {\n        lines.push(jsx(\"line\", { x1: 0, x2: maxWidth, y1: index * gapVertical + 0.5, y2: index * gapVertical + 0.5 }, index));\n    }\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", width: \"100%\", height: height, viewBox: viewBox, preserveAspectRatio: \"none\", stroke: color, strokeWidth: thickness, css: cssOverrides, \"aria-hidden\": \"true\", focusable: \"false\", children: lines }));\n};\n\nexport { StraightLines };\n//# sourceMappingURL=StraightLines.js.map\n"],"names":["listItemStyles","css","border","linkTagStyles","headline","text","neutral","lineWrapperStyles","headlineWrapperStyles","imageWrapperStyles","marginTopStyles","MostViewedRightItem","trail","mostViewedItemIndex","hoverRef","isHovered","value","setValue","useState","ref","useRef","handleMouseOver","handleMouseOut","useEffect","node","current","addEventListener","removeEventListener","useHover","li","data-link-name","a","href","url","div","image","Avatar","src","alt","format","design","ArticleDesign","LinkHeadline","headlineText","size","showUnderline","kickerText","hideLineBreak","byline","showByline","undefined","ageWarning","AgeWarning","age","wrapperStyles","stickyStyles","headingStyles","fontWeight","MostViewedRight","limitItems","isAdFreeUser","adBlockerDetected","data","error","useApi","window","guardian","modules","sentry","reportError","trails","slice","map","decideTrail","stickToTop","data-component","StraightLines","cssOverrides","count","h3","ul","index","MostViewedRightWrapper","useAdBlockInUse","bodyRef","heightIsAvailable","setHeightIsAvailable","checkHeight","offsetHeight","setTimeout","rightAdvertHeight","availableSpaceHeight","decideDesign","display","decideDisplay","ArticleDisplay","decideTheme","theme","ArticlePillar","ArticleSpecial","decideFormat","dataLinkName","getDataLinkNameCard","getLinkType","group","join","isInUse","setIsInUse","isAdBlockInUse","then","blockerDetected","checkForErrors","response","ok","Error","statusText","status","options","init","useSWR","fetch","res","json","fetcher","loading","space","remSpace","pxToRem","gapVertical","maxWidth","breakpoints","color","height","getHeight","viewBox","lines","push","jsx","x1","x2","y1","y2","xmlns","width","preserveAspectRatio","stroke","strokeWidth","focusable","children"],"sourceRoot":""}