{"version":3,"file":"DocumentBlockComponent-importable.modern.ae317d4943c56d237a1f.js","mappings":"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","sources":["webpack://@guardian/dotcom-rendering/./src/web/components/ClickToView.tsx","webpack://@guardian/dotcom-rendering/./src/web/components/DocumentBlockComponent.importable.tsx","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/src/button/Button.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/src/button/LinkButton.js","webpack://@guardian/dotcom-rendering/../node_modules/@guardian/source-react-components/esm/vendor/icons/SvgCheckmark.js"],"sourcesContent":["import { css } from '@emotion/react';\nimport {\n\tbackground,\n\tborder,\n\tspace,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { Button, SvgCheckmark } from '@guardian/source-react-components';\nimport { useState } from 'react';\nimport type { RoleType } from '../../types/content';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\trole?: RoleType;\n\tonAccept?: () => void;\n\tisTracking: boolean;\n\tisMainMedia?: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nconst roleTextSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn textSans.medium({ lineHeight: 'regular' });\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\tcase 'thumbnail': {\n\t\t\treturn textSans.small({ lineHeight: 'regular' });\n\t\t}\n\t}\n};\n\nconst roleHeadlineSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn textSans.large({\n\t\t\t\tfontWeight: 'bold',\n\t\t\t\tlineHeight: 'regular',\n\t\t\t});\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\tcase 'thumbnail': {\n\t\t\treturn textSans.medium({\n\t\t\t\tfontWeight: 'bold',\n\t\t\t\tlineHeight: 'regular',\n\t\t\t});\n\t\t}\n\t}\n};\n\nconst roleButtonSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn 'default';\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\t\treturn 'small';\n\t\tcase 'thumbnail': {\n\t\t\treturn 'xsmall';\n\t\t}\n\t}\n};\n\nconst roleButtonText = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase':\n\t\tcase 'halfWidth':\n\t\tcase 'supporting': {\n\t\t\treturn 'Allow and continue';\n\t\t}\n\t\tcase 'thumbnail': {\n\t\t\treturn 'Allow';\n\t\t}\n\t}\n};\n\nconst shouldDisplayOverlay = ({\n\tisTracking,\n\tisOverlayClicked,\n\tisMainMedia,\n}: {\n\tisTracking: boolean;\n\tisOverlayClicked: boolean;\n\tisMainMedia?: boolean;\n}) => {\n\tif (isMainMedia || !isTracking) {\n\t\treturn false;\n\t}\n\tif (isOverlayClicked) {\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nexport const ClickToView = ({\n\tchildren,\n\trole = 'inline',\n\tonAccept,\n\tisTracking,\n\tisMainMedia,\n\tsource,\n\tsourceDomain = 'unknown',\n}: Props) => {\n\tconst [isOverlayClicked, setIsOverlayClicked] = useState<boolean>(false);\n\n\tconst handleClick = () => {\n\t\tsetIsOverlayClicked(true);\n\t\tif (onAccept) {\n\t\t\tsetTimeout(() => onAccept());\n\t\t}\n\t};\n\n\tconst textSize = roleTextSize(role);\n\n\tif (\n\t\tshouldDisplayOverlay({\n\t\t\tisTracking,\n\t\t\tisOverlayClicked,\n\t\t\tisMainMedia,\n\t\t})\n\t) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tbackground: ${background.secondary};\n\t\t\t\t\tborder: 1px solid ${border.secondary};\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tpadding: ${space[1]}px ${space[6]}px ${space[3]}px;\n\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t`}\n\t\t\t\tdata-component={`click-to-view:${sourceDomain}`}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${roleHeadlineSize(role)}\n\t\t\t\t\t\tmargin-bottom: ${space[1]}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{source\n\t\t\t\t\t\t? `Allow ${source} content?`\n\t\t\t\t\t\t: 'Allow content provided by a third party?'}\n\t\t\t\t</div>\n\t\t\t\t<p\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${textSize}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{source ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\tThis article includes content provided by {source}.\n\t\t\t\t\t\t\tWe ask for your permission before anything is\n\t\t\t\t\t\t\tloaded, as they may be using cookies and other\n\t\t\t\t\t\t\ttechnologies. To view this content,{' '}\n\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\tclick &apos;Allow and continue&apos;\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\tThis article includes content hosted on{' '}\n\t\t\t\t\t\t\t{sourceDomain}. We ask for your permission before\n\t\t\t\t\t\t\tanything is loaded, as the provider may be using\n\t\t\t\t\t\t\tcookies and other technologies. To view this\n\t\t\t\t\t\t\tcontent,{' '}\n\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\tclick &apos;Allow and continue&apos;\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-top: ${space[5]}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\tsize={roleButtonSize(role)}\n\t\t\t\t\t\ticon={<SvgCheckmark />}\n\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\tonClick={() => handleClick()}\n\t\t\t\t\t\tdata-cy=\"click-to-view-button\"\n\t\t\t\t\t\tdata-link-name=\"allow-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{roleButtonText(role)}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\treturn <>{children}</>;\n};\n","import { css } from '@emotion/react';\nimport { LinkButton } from '@guardian/source-react-components';\nimport type { RoleType } from '../../types/content';\nimport { ClickToView } from './ClickToView';\n\nconst widthOverride = css`\n\tiframe {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tmin-width: 300px !important;\n\t\tmax-width: 100%;\n\t}\n`;\n\nexport const getDocumentCloudAssetUrl = (\n\tembedUrl?: string,\n): string | undefined => {\n\treturn embedUrl?.replace(\n\t\tnew RegExp(\n\t\t\t'https://embed.documentcloud.org/documents/([0-9]+)-([^/]+).*',\n\t\t\t'g',\n\t\t),\n\t\t'https://assets.documentcloud.org/documents/$1/$2.pdf',\n\t);\n};\n\ntype Props = {\n\tembedUrl?: string;\n\theight: number;\n\tisMainMedia: boolean;\n\tisTracking: boolean;\n\trole?: RoleType;\n\tsource?: string;\n\tsourceDomain?: string;\n\ttitle?: string;\n\twidth: number;\n};\n\nexport const DocumentBlockComponent = ({\n\tembedUrl,\n\theight,\n\tisMainMedia,\n\tisTracking,\n\trole,\n\tsource,\n\tsourceDomain,\n\ttitle,\n\twidth,\n}: Props) => {\n\treturn (\n\t\t<ClickToView\n\t\t\trole={role}\n\t\t\tisTracking={isTracking}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tsource={source}\n\t\t\tsourceDomain={sourceDomain}\n\t\t>\n\t\t\t<div css={widthOverride}>\n\t\t\t\t<iframe\n\t\t\t\t\tsrc={embedUrl}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\theight={height}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tallowFullScreen={true}\n\t\t\t\t\tdata-cy=\"document-embed\"\n\t\t\t\t/>\n\t\t\t\t{source === 'DocumentCloud' ? (\n\t\t\t\t\t<LinkButton\n\t\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\thref={getDocumentCloudAssetUrl(embedUrl)}\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\tdownload={true}\n\t\t\t\t\t>\n\t\t\t\t\t\tDownload original document\n\t\t\t\t\t</LinkButton>\n\t\t\t\t) : (\n\t\t\t\t\t<></>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</ClickToView>\n\t);\n};\n","import { jsx } from '@emotion/react/jsx-runtime';\nimport { buttonContents } from './shared.js';\nimport { buttonStyles } from './styles.js';\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_button--primary-priority-default-theme) •\n * [Design System](https://theguardian.design/2a1e5182b/p/435225-button) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/button/Button.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components)\n *\n * Buttons enable users to make choices or perform actions.\n *\n */\nconst Button = ({ priority, size, icon: iconSvg, iconSide, hideLabel, nudgeIcon, type = 'button', isLoading = false, loadingAnnouncement = 'Loading', cssOverrides, children, ...props }) => (jsx(\"button\", { css: buttonStyles({\n        size,\n        priority,\n        icon: iconSvg,\n        hideLabel,\n        iconSide,\n        nudgeIcon,\n        cssOverrides,\n        isLoading,\n    }), type: type, \"aria-live\": \"polite\", \"aria-label\": isLoading ? loadingAnnouncement : undefined, ...props, children: buttonContents({\n        hideLabel,\n        iconSvg,\n        isLoading,\n        children,\n    }) }));\n\nexport { Button };\n//# sourceMappingURL=Button.js.map\n","import { jsx } from '@emotion/react/jsx-runtime';\nimport { buttonContents } from './shared.js';\nimport { buttonStyles } from './styles.js';\n\n/**\n * [Storybook](https://guardian.github.io/csnx/?path=/story/source-react-components_linkbutton--primary-priority-default-theme) •\n * [Design System](https://theguardian.design/2a1e5182b/p/435225-button) •\n * [GitHub](https://github.com/guardian/csnx/tree/main/libs/@guardian/source-react-components/src/button/LinkButton.tsx) •\n * [NPM](https://www.npmjs.com/package/@guardian/source-react-components)\n *\n * Buttons enable users to make choices or perform actions.\n *\n */\nconst LinkButton = ({ priority, size, iconSide, icon: iconSvg, nudgeIcon, hideLabel, cssOverrides, children, ...props }) => (jsx(\"a\", { css: buttonStyles({\n        size,\n        priority,\n        icon: iconSvg,\n        hideLabel,\n        iconSide,\n        nudgeIcon,\n        cssOverrides,\n    }), ...props, children: buttonContents({\n        hideLabel,\n        iconSvg,\n        children,\n    }) }));\n\nexport { LinkButton };\n//# sourceMappingURL=LinkButton.js.map\n","import { jsxs, Fragment, jsx } from '@emotion/react/jsx-runtime';\nimport { css } from '@emotion/react';\nimport { visuallyHidden, iconSize } from '@guardian/source-foundations';\n\nconst Svg = ({ size }) => (jsx(\"svg\", { width: size ? iconSize[size] : undefined, height: undefined, viewBox: \"-3 -3 30 30\", xmlns: \"http://www.w3.org/2000/svg\", focusable: false, \"aria-hidden\": true, children: jsx(\"path\", { fillRule: \"evenodd\", clipRule: \"evenodd\", d: \"M3.011 11.883 2 12.896l5.057 7.08h.48L22 5.005l-1.011-.986L7.537 16.207l-4.526-4.324Z\" }) }));\nconst SvgCheckmark = ({ size, isAnnouncedByScreenReader = false, }) => (jsxs(Fragment, { children: [jsx(Svg, { size: size }), isAnnouncedByScreenReader ? (jsx(\"span\", { css: css `\n\t\t\t\t\t${visuallyHidden}\n\t\t\t\t`, children: \"Checkmark\" })) : ('')] }));\n\nexport { SvgCheckmark };\n//# sourceMappingURL=SvgCheckmark.js.map\n"],"names":["roleHeadlineSize","role","textSans","fontWeight","lineHeight","roleButtonSize","roleButtonText","ClickToView","children","onAccept","isTracking","isMainMedia","source","sourceDomain","isOverlayClicked","setIsOverlayClicked","useState","textSize","roleTextSize","shouldDisplayOverlay","div","css","background","border","space","data-component","p","strong","Button","priority","size","icon","SvgCheckmark","iconSide","onClick","setTimeout","data-cy","data-link-name","widthOverride","getDocumentCloudAssetUrl","embedUrl","replace","RegExp","DocumentBlockComponent","height","title","width","iframe","src","allowFullScreen","LinkButton","href","download","iconSvg","hideLabel","nudgeIcon","type","isLoading","loadingAnnouncement","cssOverrides","props","jsx","buttonStyles","undefined","buttonContents","Svg","iconSize","viewBox","xmlns","focusable","fillRule","clipRule","d","isAnnouncedByScreenReader","jsxs","Fragment","visuallyHidden"],"sourceRoot":""}