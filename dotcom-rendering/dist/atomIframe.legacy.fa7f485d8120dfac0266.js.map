{"version":3,"file":"atomIframe.legacy.fa7f485d8120dfac0266.js","mappings":"uLACaA,EAAa,WAAH,OAASC,EAAAA,EAAAA,GAAmB,gBAAiB,C,kCCD7D,IAAMA,EAAqB,SAACC,GAC/B,IAAMC,EAAU,GAAGC,MAAMC,KAAKC,SAASC,iBAAiBL,IA8BxD,OA7BAM,OAAOC,iBAAiB,WAAW,SAACC,GAChC,IAAMC,EAASR,EAAQS,MAAK,SAACC,GACzB,IACI,OAAOA,EAAEC,OAASJ,EAAMK,OAAOD,IAInC,CAFA,MAAOE,GACH,OAAO,CACX,CACJ,IACA,GAAIL,EACA,IACI,IAAMM,EAAUC,KAAKC,MAAMT,EAAMU,MAExB,eADDH,EAAQI,OAERV,EAAOW,OAASL,EAAQM,MAMxB,CAAZ,MAAOP,GAAK,CAEpB,IACAb,EAAQqB,SAAQ,SAACb,GAAY,IAAD,EAClBc,GAAoC,QAA9B,EAACd,EAAOe,aAAa,iBAAS,QAAI,IACzCC,QAAQ,eAAgB,YACxBA,QAAQ,iBAAkB,cAC/BhB,EAAOiB,aAAa,SAAUH,EAClC,IACOI,QAAQC,SACnB,C","sources":["webpack://@guardian/dotcom-rendering/./src/web/browser/atomIframe.ts","webpack://@guardian/dotcom-rendering/./src/web/browser/updateIframeHeight.tsx"],"sourcesContent":["import { updateIframeHeight } from './updateIframeHeight';\nexport const atomIframe = () => updateIframeHeight('.atom__iframe');\n","export const updateIframeHeight = (queryString) => {\n    const iframes = [].slice.call(document.querySelectorAll(queryString));\n    window.addEventListener('message', (event) => {\n        const iframe = iframes.find((i) => {\n            try {\n                return i.name === event.source.name;\n            }\n            catch (e) {\n                return false;\n            }\n        });\n        if (iframe) {\n            try {\n                const message = JSON.parse(event.data);\n                switch (message.type) {\n                    case 'set-height':\n                        iframe.height = message.value;\n                        break;\n                    default:\n                }\n                // eslint-disable-next-line no-empty\n            }\n            catch (e) { }\n        }\n    });\n    iframes.forEach((iframe) => {\n        const src = (iframe.getAttribute('srcdoc') ?? '')\n            .replace(/<gu-script>/g, '<script>')\n            .replace(/<\\/gu-script>/g, '<' + '/script>');\n        iframe.setAttribute('srcdoc', src);\n    });\n    return Promise.resolve();\n};\n"],"names":["atomIframe","updateIframeHeight","queryString","iframes","slice","call","document","querySelectorAll","window","addEventListener","event","iframe","find","i","name","source","e","message","JSON","parse","data","type","height","value","forEach","src","getAttribute","replace","setAttribute","Promise","resolve"],"sourceRoot":""}