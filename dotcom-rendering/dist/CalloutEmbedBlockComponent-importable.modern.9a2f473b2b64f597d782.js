(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[6142],{5036:t=>{t.exports=function(t,e,n){n=n||{};var r=e.content,o=e.attributes;return function(e){return t("svg",Object.assign({dangerouslySetInnerHTML:{__html:r}},o,e),e&&e.children)}}},5951:(t,e,n)=>{var r=n(5036),o=n(3904);t.exports=r.bind(null,o.createElement.bind(o))},6180:(t,e,n)=>{t.exports={attributes:{viewBox:"0 0 32 32"},content:'<rect x="5" y="15" width="22" height="3"></rect>'};var r=n(5951);t.exports=r(t.exports)},6522:(t,e,n)=>{t.exports={attributes:{width:"18",height:"18",viewBox:"0 0 18 18"},content:'<path d="M8.2 0h1.6l.4 7.8 7.8.4v1.6l-7.8.4-.4 7.8H8.2l-.4-7.8L0 9.8V8.2l7.8-.4.4-7.8z"/>'};var r=n(5951);t.exports=r(t.exports)},1449:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CalloutEmbedBlockComponent:()=>Nt});var r=n(7800),o=n(43),i=n(7357),c=n(3196),s=n(3220),a=n(3904),l=n(6180),u=n.n(l),d=n(6522),f=n.n(d),p=n(4180),b=n(683),m=n(5706),y=n(4436),h=n(1083);function O(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function j(){const t=O(["\n\t","\n"]);return j=function(){return t},t}function g(){const t=O(["\n\t","\n"]);return g=function(){return t},t}function v(){const t=O(["\n\t","\n\tcolor: ",";\n\tpadding-left: 5px;\n"]);return v=function(){return t},t}const x=(0,o.css)(j(),c.OS.medium({fontWeight:"bold"})),w=(0,o.css)(g(),c.OS.medium()),P=(0,o.css)(v(),c.OS.small({fontStyle:"italic"}),i.n$[46]),S=t=>{let{formField:e,hideLabel:n}=t;return(0,r.jsxs)("label",{css:[x,n&&h.j],htmlFor:e.name,hidden:e.hideLabel,children:[e.label,!e.required&&(0,r.jsx)("span",{css:P,children:"Optional"}),!!e.description&&(0,r.jsx)("div",{children:(0,r.jsx)("span",{css:w,children:"".concat(e.description)})})]})};function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function F(){const t=k(["\n\tpadding-top: 10px;\n\tpadding-bottom: 10px;\n"]);return F=function(){return t},t}function E(){const t=k(["\n\tpadding-top: ","px;\n\tcolor: ",";\n\t",";\n"]);return E=function(){return t},t}const z=(0,o.css)(F()),L=(0,o.css)(E(),y.D[2],b.fL.error,c.OS.small({fontWeight:"bold"})),C=t=>{let{formField:e,formData:n,setFormData:o}=t;const[i,c]=(0,a.useState)("");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S,{formField:e}),(0,r.jsx)("input",{"data-testid":"form-field-".concat(e.id),css:z,type:"file",accept:"image/*, .pdf",required:e.required,onChange:async t=>{var r,i,s,a;if(null===(r=t.target.files)||void 0===r?void 0:r[0]){c("");try{const r=await(i=t.target.files[0],new Promise(((t,e)=>{const n=new FileReader;n.addEventListener("load",(()=>{var r;const o=null===(r=n.result)||void 0===r?void 0:r.toString().split(";base64,")[1];o?t(o):e(new Error("Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files"))}),!1),n.addEventListener("error",(()=>{e(new Error("Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files"))})),n.readAsDataURL(i)})));o((s=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){D(t,e,n[e])}))}return t}({},n),a=null!=(a={[e.id]:r})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(a)).forEach((function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(a,t))})),s))}catch(t){c("Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files")}}}}),(0,r.jsx)("p",{children:"We accept images and pdfs. Maximum total file size: 6MB"}),!!i&&(0,r.jsx)("div",{css:L,children:i})]})};var W=n(4416),T=n(3710);function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const H=t=>{let{formField:e,formData:n,setFormData:o,validationErrors:i}=t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(W.c,{error:null==i?void 0:i[e.id],hideLabel:e.hideLabel,name:e.name,label:e.label,supporting:e.description,children:e.options.map(((t,c)=>{var s;const a=null!==(s=n[e.id])&&void 0!==s?s:[],l=!!a.find((e=>e===t.value));return(0,r.jsx)(T.X,{"data-testid":"form-field-".concat(t.value),label:t.label,value:t.value,checked:l,error:!!(null==i?void 0:i[e.id]),onChange:()=>{var r,i;o((r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){_(t,e,n[e])}))}return t}({},n),i=null!=(i={[e.id]:l?a.filter((e=>e!==t.value)):[...a,t.value]})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(i)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(i,t))})),r))}},c)}))})})};var q=n(6575),I=n(8634);function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(){const t=(e=["\n\t\t\tfieldset {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return M=function(){return t},t}const B=t=>{let{validationErrors:e,formField:n,formData:i,setFormData:c}=t;return(0,r.jsxs)("div",{css:(0,o.css)(M()),children:[(0,r.jsx)(S,{formField:n}),(0,r.jsx)(q.E,{error:null==e?void 0:e[n.id],name:n.name,orientation:n.options.length>2?"vertical":"horizontal",children:n.options.map(((t,e)=>{const o=n.id in i&&i[n.id]===t.value;return(0,r.jsx)(I.Y,{"data-testid":"form-field-".concat(t.value),label:t.label,value:t.value,name:"".concat(n.id),checked:!!o,onChange:()=>{return c((e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){G(t,e,n[e])}))}return t}({},i),r=null!=(r={[n.id]:t.value})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e));var e,r}},e)}))})]})},$=t=>{let{validationErrors:e,formField:n,formData:o,setFormData:i,multiple:c}=t;return(0,r.jsx)("div",{"data-testid":"form-field-".concat(n.id),children:c?(0,r.jsx)(H,{validationErrors:null!=e?e:void 0,formField:n,formData:o,setFormData:i}):(0,r.jsx)(B,{validationErrors:null!=e?e:void 0,formField:n,formData:o,setFormData:i})})};var K,R=n(7001);function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const N=t=>{let{validationErrors:e,formField:n,formData:o,setFormData:i}=t;return(0,r.jsx)(R.P,{hideLabel:n.hideLabel,"data-testid":"form-field-".concat(n.id),error:null==e?void 0:e[n.id],label:n.label,supporting:n.description,value:null!==(K=o[n.id])&&void 0!==K?K:"",onChange:t=>{return i((e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){U(t,e,n[e])}))}return t}({},o),r=null!=(r={[n.id]:t.target.value})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e));var e,r},optional:!n.required,children:n.options.map(((t,e)=>(0,r.jsx)("option",{value:t.value,children:t.value},e)))})};var X=n(2711);function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function J(){const t=(e=["\n\twidth: 100%;\n\tmargin-top: ","px;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return J=function(){return t},t}const Q=(0,o.css)(J(),y.D[2]),V=t=>{let{validationErrors:e,formField:n,formData:o,setFormData:i}=t;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(X.K,{hideLabel:n.hideLabel,"data-testid":"form-field-".concat(n.id),label:n.label,supporting:n.description,css:Q,optional:!n.required,value:n.id in o?o[n.id]:"",error:null==e?void 0:e[n.id],onChange:t=>{return i((e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){A(t,e,n[e])}))}return t}({},o),r=null!=(r={[n.id]:t.target.value})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e));var e,r}})})};var Y=n(5237);function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tt(){const t=(e=["\n\tmargin-top: ","px;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));var e,n;return tt=function(){return t},t}const et=(0,o.css)(tt(),y.D[2]),nt=t=>{let{validationErrors:e,formField:n,formData:o,setFormData:i}=t;return(0,r.jsx)(Y.o,{hideLabel:n.hideLabel,error:null==e?void 0:e[n.id],css:et,"data-testid":"form-field-".concat(n.id),type:n.type,label:n.label,supporting:n.description,optional:!n.required,value:n.id in o?o[n.id]:"",onChange:t=>{return i((e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Z(t,e,n[e])}))}return t}({},o),r=null!=(r={[n.id]:t.target.value})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e));var e,r}})};function rt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function ot(){const t=rt(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n"]);return ot=function(){return t},t}function it(){const t=rt(["\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tpadding-bottom: 15px;\n"]);return it=function(){return t},t}function ct(){const t=rt(["\n\tpadding-bottom: 10px;\n\tcolor: ",";\n\t",";\n"]);return ct=function(){return t},t}function st(){const t=rt(["\n\tdisplay: flex;\n\tflex-direction: column;\n"]);return st=function(){return t},t}function at(){const t=rt(["\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: -62.5rem;\n\t\t\t\t"]);return at=function(){return t},t}function lt(){const t=rt(["\n\t\t\t\t\t\ta,\n\t\t\t\t\t\ta:hover {\n\t\t\t\t\t\t\tborder: 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext-align: right;\n\t\t\t\t\t"]);return lt=function(){return t},t}function ut(){const t=rt(["\n\t\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\t"]);return ut=function(){return t},t}const dt=(0,o.css)(ot()),ft=(0,o.css)(it()),pt=(0,o.css)(ct(),b.fL.error,c.OS.medium({fontWeight:"bold"})),bt=(0,o.css)(st()),mt=t=>{let{formField:e,formData:n,setFormData:o}=t;switch(e.type){case"textarea":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,{formField:e,formData:n,setFormData:o}),(0,r.jsx)("hr",{})]});case"file":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C,{formField:e,formData:n,setFormData:o}),(0,r.jsx)("hr",{})]});case"select":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N,{formField:e,formData:n,setFormData:o}),(0,r.jsx)("hr",{})]});case"checkbox":case"radio":return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($,{formField:e,formData:n,setFormData:o,multiple:"checkbox"===e.type}),(0,r.jsx)("hr",{})]});default:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nt,{formField:e,formData:n,setFormData:o}),(0,r.jsx)("hr",{})]})}},yt=t=>{let{onSubmit:e,formFields:n,error:i}=t;const[c,l]=(0,a.useState)(""),[u,d]=(0,a.useState)({});return(0,r.jsxs)("form",{action:"/formstack-campaign/submit",method:"post",css:dt,onSubmit:t=>{t.preventDefault(),e(u)},children:[n.map(((t,e)=>(0,r.jsx)("div",{css:bt,"custom-guardian":"callout-form-field",children:(0,r.jsx)(mt,{formField:t,formData:u,setFormData:d})},e))),(0,r.jsx)("div",{css:(0,o.css)(at()),"aria-hidden":"true",children:(0,r.jsx)("input",{name:"twitter-handle",type:"text",id:"twitter-handle",tabIndex:-1,placeholder:"@mytwitterhandle",value:c,onChange:t=>l(t.target.value)})}),!!i&&(0,r.jsx)("div",{css:pt,children:i}),(0,r.jsxs)("div",{css:ft,children:[(0,r.jsx)(s.z,{priority:"secondary",size:"xsmall",type:"submit",children:"Share with the Guardian"}),(0,r.jsx)("div",{css:(0,o.css)(lt()),children:(0,r.jsx)(m.r,{priority:"secondary",target:"_blank",rel:"noreferrer",href:"https://www.theguardian.com/help/terms-of-service",cssOverrides:(0,o.css)(ut()),children:"Terms and conditions"})})]})]})};function ht(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){ht(t,e,n[e])}))}return t}function jt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function gt(){const t=jt(["\n\tmargin-bottom: 26px;\n\tmargin-top: 16px;\n"]);return gt=function(){return t},t}function vt(){const t=jt(["\n\tborder-top: 1px "," solid;\n\tborder-bottom: 1px "," solid;\n\tposition: relative;\n\tpadding-bottom: 10px;\n\n\t/* IE does not support summary HTML elements, so we need to hide children ourself */\n\t:not([open]) > *:not(summary) {\n\t\tdisplay: none;\n\t}\n"]);return vt=function(){return t},t}function xt(){const t=jt(["\n\tbackground-color: ",";\n"]);return xt=function(){return t},t}function wt(){const t=jt(["\n\tmargin-right: 10px;\n"]);return wt=function(){return t},t}function Pt(){const t=jt(["\n\t","\n"]);return Pt=function(){return t},t}function St(){const t=jt(['\n\t/* Removing default styles from summary tag */\n\t::-webkit-details-marker {\n\t\tdisplay: none;\n\t}\n\toutline: none;\n\n\t/* We don\'t want the summary to open when we click anything but the button, so we pointer-event: none the summary */\n\t/* 176da211-05aa-4280-859b-1e3157b3f19e */\n\tpointer-events: none;\n\n\t/*\n        why hide visibility?\n        because we want to prevent the user for tabbing to the summary HTML element\n        without using tabIndex={-1} which would disable focus on all child DOM elements\n\n        NOTE: requires "visibility: visible;" on child elements to display and enable focus\n    */\n\tvisibility: hidden;\n\n\ta {\n\t\t/* but we do want to allow click on links */\n\t\tpointer-events: all;\n\t}\n']);return St=function(){return t},t}function Dt(){const t=jt(["\n\tvisibility: visible;\n\tmin-height: 70px;\n\tdisplay: flex;\n\tflex-direction: row;\n"]);return Dt=function(){return t},t}function kt(){const t=jt(["\n\t","\n\tcolor: ",";\n\tbackground-color: ",";\n\tmin-width: 88px;\n\tpadding-bottom: 6px;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\t::after {\n\t\tcontent: '';\n\t\twidth: 20px;\n\t\theight: 22px;\n\t\tborder-bottom-right-radius: 18px;\n\t\tposition: absolute;\n\t\tbackground-color: ",";\n\t}\n"]);return kt=function(){return t},t}function Ft(){const t=jt(["\n\t","\n"]);return Ft=function(){return t},t}function Et(){const t=jt(["\n\t","\n"]);return Et=function(){return t},t}function zt(){const t=jt(["\n\ta {\n\t\tcolor: ",";\n\t\ttext-decoration: none;\n\t\t:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t}\n"]);return zt=function(){return t},t}function Lt(){const t=jt(["\n\tposition: absolute;\n\tcursor: pointer;\n\tmargin-top: -5px;\n\n\tvisibility: visible;\n\n\t/* We need to ensure our pointer-events are turned back on on the button */\n\t/* 176da211-05aa-4280-859b-1e3157b3f19e */\n\tpointer-events: all;\n"]);return Lt=function(){return t},t}function Ct(){const t=jt(["\n\t\t\t\t\t\t\t\t\t/* TODO: need to find an nicer way of dynamically setting svg dimensions */\n\t\t\t\t\t\t\t\t\tsvg {\n\t\t\t\t\t\t\t\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\t\t\t\t\t\t\t\twidth: 15px !important;\n\t\t\t\t\t\t\t\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\t\t\t\t\t\t\t\theight: 15px !important;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t"]);return Ct=function(){return t},t}const Wt=(0,o.css)(gt()),Tt=(0,o.css)(vt(),i.n$[86],i.n$[86]),_t=(0,o.css)(xt(),i.n$[97]),Ht=(0,o.css)(wt()),qt=(0,o.css)(Pt(),c.OS.medium({fontWeight:"bold"})),It=(0,o.css)(St()),Gt=(0,o.css)(Dt()),Mt=t=>(0,o.css)(kt(),c.OS.medium({fontWeight:"bold"}),i.n$[100],t.background.speechBubble,t.background.speechBubble),Bt=(0,o.css)(Ft(),c.OS.medium({fontWeight:"bold"})),$t=(0,o.css)(Et(),c.OS.xxsmall({fontWeight:"bold"})),Kt=(0,o.css)(zt(),i.UQ[500]),Rt=(0,o.css)(Lt());let Ut=!0;const Nt=t=>{let{callout:e,format:n}=t,i=null,c=null,l=null;const[d,b]=(0,a.useState)(!1),[m,y]=(0,a.useState)(""),[h,O]=(0,a.useState)(!1),j=(0,p.b)(n),{title:g,description:v,formFields:x}=e;return(0,a.useEffect)((()=>{i=document.querySelector('button[custom-guardian="callout-form-open-button"]'),c=document.querySelector('\n            *[custom-guardian="callout-form-field"]:first-of-type input,\n            *[custom-guardian="callout-form-field"]:first-of-type select\n        '),l=document.querySelector('button[custom-guardian="callout-form-close-button"]');const t=t=>{if(9===t.keyCode){if(!c||!l)return;t.shiftKey||document.activeElement!==l||(null==c||c.focus(),t.preventDefault()),t.shiftKey&&document.activeElement===c&&(l.focus(),t.preventDefault())}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[d]),(0,a.useEffect)((()=>{d&&c&&c.focus()}),[d,c]),(0,a.useEffect)((()=>{d||!i||Ut||i.focus()}),[d,i]),(0,a.useEffect)((()=>{d&&(Ut=!1)}),[d]),(0,a.useEffect)((()=>{const t=t=>{27===t.keyCode&&b(!1)};return d&&document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[d,b]),h?(0,r.jsx)("figure",{"data-print-layout":"hide",css:Wt,children:(0,r.jsx)("details",{css:[Tt,_t],"aria-hidden":!0,open:d,children:(0,r.jsx)("summary",{css:It,children:(0,r.jsxs)("div",{css:Gt,children:[(0,r.jsx)("div",{css:Ht,children:(0,r.jsx)("div",{css:Mt(j),children:(0,r.jsx)("h4",{children:"Share your story"})})}),(0,r.jsx)("div",{css:Kt,children:(0,r.jsx)("p",{css:qt,children:"Thank you for your contribution"})})]})})})}):(0,r.jsx)("figure",{"data-print-layout":"hide",css:Wt,children:(0,r.jsxs)("details",{css:[Tt,d&&_t],"aria-hidden":!0,open:d,children:[(0,r.jsxs)("summary",{css:It,children:[(0,r.jsxs)("div",{css:Gt,children:[(0,r.jsx)("div",{css:Ht,children:(0,r.jsx)("div",{css:Mt(j),children:(0,r.jsx)("h4",{children:"Share your story"})})}),(0,r.jsxs)("div",{css:Kt,children:[(0,r.jsx)("h4",{css:Bt,children:g}),!!v&&(0,r.jsx)("div",{css:$t,dangerouslySetInnerHTML:{__html:v}})]})]}),!d&&(0,r.jsx)("span",{css:Rt,"aria-hidden":"true",children:(0,r.jsx)(s.z,{css:(0,o.css)(Ct()),iconSide:"left",size:"xsmall",icon:(0,r.jsx)(f(),{}),onClick:()=>b(!0),"custom-guardian":"callout-form-open-button",tabIndex:0,children:"Tell us"})})]}),(0,r.jsx)(yt,{formFields:x,onSubmit:async t=>{if(y(""),t.twitterHandle)return void y("Sorry we think you are a robot.");const n=Object.keys(t).reduce(((e,n)=>{return r=Ot({},e),o=null!=(o={["field_".concat(n)]:t[n]})?o:{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(o)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))})),r;var r,o}),{});return fetch(e.calloutsUrl,{method:"POST",body:JSON.stringify(Ot({formId:e.formId,"twitter-handle":""},n)),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((t=>{201===t.status?(O(!0),b(!1)):y("Sorry, there was a problem submitting your form. Please try again later.")})).catch((t=>{window.guardian.modules.sentry.reportError(t,"callout-embed-submission"),y("Sorry, there was a problem submitting your form. Please try again later.")}))},error:m}),(0,r.jsx)("span",{css:Rt,"aria-hidden":"true",children:d&&(0,r.jsx)(s.z,{iconSide:"left",size:"xsmall",icon:(0,r.jsx)(u(),{}),onClick:()=>b(!1),"custom-guardian":"callout-form-close-button",children:"Hide"})})]})})}},5706:(t,e,n)=>{"use strict";n.d(e,{r:()=>s});var r=n(7800),o=n(3829),i=n(5181);function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const s=t=>{var e,n,{priority:s="primary",icon:a,iconSide:l="left",cssOverrides:u,children:d}=t,f=function(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}(t,["priority","icon","iconSide","cssOverrides","children"]);return(0,r.jsx)("a",(e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){c(t,e,n[e])}))}return t}({css:(0,i.Wf)({priority:s,iconSvg:a,iconSide:l,cssOverrides:u})},f),n=null!=(n={children:(0,o.w)({children:d,iconSvg:a,iconSide:l})})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e))}},3829:(t,e,n)=>{"use strict";n.d(e,{w:()=>i});var r=n(7800),o=n(3904);const i=t=>{let{children:e,iconSvg:n,iconSide:i}=t;const c=(0,r.jsx)(o.Fragment,{children:"      "},"spacer"),s=[e];return n&&("left"===i?s.unshift(c,(0,o.cloneElement)(n,{key:"svg"})):s.push(c,(0,o.cloneElement)(n,{key:"svg"}))),s}},5181:(t,e,n)=>{"use strict";n.d(e,{Wf:()=>S});var r=n(43),o=n(3196),i=n(8322),c=n(4655),s=n(4436),a=n(683);const l={link:{textPrimary:a.DG.brand[500],textPrimaryHover:a.DG.brand[500],textSecondary:a.DG.neutral[7],textSecondaryHover:a.DG.neutral[7]}};function u(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function d(){const t=u(["\n\tposition: relative;\n\t",";\n\tcursor: pointer;\n\ttext-decoration: underline;\n\ttext-underline-position: under;\n\ttext-underline-offset: 5%;\n\n\tdisplay: inline;\n\talign-items: center;\n\n\t&:focus {\n\t\t",";\n\t}\n\n\t&:hover {\n\t\t/* If the hover text decoration thickness is not set, we default to the initial value. */\n\t\ttext-decoration-thickness: var(--source-text-decoration-thickness, auto);\n\t}\n"]);return d=function(){return t},t}function f(){const t=u(["\n\t/* override user agent styles */\n\tborder: none;\n\tbackground: transparent;\n\tpadding: 0;\n"]);return f=function(){return t},t}function p(){const t=u(["\n\tcolor: ",";\n\n\t&:hover {\n\t\tcolor: ",";\n\t}\n"]);return p=function(){return t},t}function b(){const t=u(["\n\tcolor: ",";\n\n\t&:hover {\n\t\tcolor: ",";\n\t}\n"]);return b=function(){return t},t}function m(){const t=u(["\n\tsvg {\n\t\tfill: currentColor;\n\t\t/*\n\t\tTODO: hardcoded bottom margin to vertically align\n\t\ticons with text. This needs to be revisited when\n\t\tthe rules of icon spacing have been formalised\n\t\t */\n\t\tmargin-bottom: -3px;\n\t\twidth: ","px;\n\t\theight: auto;\n\t}\n"]);return m=function(){return t},t}function y(){const t=u(["\n\tsvg {\n\t\tmargin-left: -","px;\n\t}\n"]);return y=function(){return t},t}function h(){const t=u(["\n\tsvg {\n\t\tmargin-left: -","px;\n\t\tmargin-right: ","px;\n\t}\n"]);return h=function(){return t},t}a.DG.neutral[100],a.DG.neutral[100],a.DG.neutral[7],a.DG.neutral[7];const O=(0,r.css)(d(),o.OS.medium(),i.y),j=(0,r.css)(f()),g=(0,r.css)(m(),c.bf.iconXsmall),v=(0,r.css)(y(),s.D[5]),x=(0,r.css)(h(),s.D[6],s.D[1]),w={primary:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.link;return(0,r.css)(p(),t.textPrimary,t.textPrimaryHover)},secondary:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.link;return(0,r.css)(b(),t.textSecondary,t.textSecondaryHover)}},P={right:v,left:x},S=t=>{let{isButton:e,priority:n,iconSvg:r,iconSide:o="left",cssOverrides:i}=t;return t=>[O,e?j:"",w[n](t.link),r?g:"",r?P[o]:"",i]}}}]);
//# sourceMappingURL=CalloutEmbedBlockComponent-importable.modern.9a2f473b2b64f597d782.js.map