"use strict";(self.webpackChunk_guardian_dotcom_rendering=self.webpackChunk_guardian_dotcom_rendering||[]).push([[6713],{7978:(e,t,n)=>{function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{SetABTests:()=>R});const s=e=>{const{mvtMaxValue:t=1e6,mvtId:n,pageIsSensitive:s,abTestSwitches:i,forcedTestVariants:a,forcedTestException:o,arrayOfTestObjects:c=[]}=e,u=e=>{const c=(e=>{const r=t*e.audienceOffset,s=r+t*e.audience;var i;return n&&n>r&&n<=s&&null!==(i=e.variants[n%e.variants.length])&&void 0!==i?i:null})(e),u=((e,t)=>{var n;const r=e.id;var s;const i=null==t||null===(n=t[r])||void 0===n?void 0:n.variant;return!!i&&((e,t)=>null!==(s=e.variants.find((e=>e.id===t)))&&void 0!==s&&s)(e,i)})(e,a),l=u||c;return o!==e.id&&(u||(e=>{const t=(n=e.expiry,(new Date).valueOf()>new Date(n).setHours(23,59,59,59));var n;const r=!!e.showForSensitive,a=i["ab".concat(e.id)]&&!!i["ab".concat(e.id)],o=e.canRun();return(!s||r)&&!!a&&!t&&o})(e))&&l&&(u||(e=>{const t="notintest"!==e.id;return e.canRun?e.canRun()&&t:t})(l))?(d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){r(e,t,n[t])}))}return e}({},e),p=null!=(p={variantToRun:l})?p:{},Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(p)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(p)).forEach((function(e){Object.defineProperty(d,e,Object.getOwnPropertyDescriptor(p,e))})),d):null;var d,p},l=e=>e.reduce(((e,t)=>{const n=u(t);return n?[...e,n]:e}),[]);var d;return{allRunnableTests:l,runnableTest:u,firstRunnableTest:e=>null!==(d=e.map((e=>u(e))).find((e=>null!==e)))&&void 0!==d?d:null,isUserInVariant:(e,t)=>l(c).some((n=>n.id===e&&n.variantToRun.id===t))}},i=()=>{},a=(e,t)=>t({abTestRegister:e}),o=(e,t)=>{const n={variantName:e.id,complete:t};return e.campaignCode&&(n.campaignCodes=[e.campaignCode]),n},c=e=>e.variants.every((e=>"function"==typeof e.impression)),u=(e,t,n)=>r=>{const s=r.variantToRun;var c;const u=null!==(c=e?s.success:s.impression)&&void 0!==c?c:i;try{u(((e,t,n,r)=>{const s={[e.id]:o(t,n)};return()=>a(s,r)})(r,s,e,n))}catch(e){t(e,{},!1)}};class l{get allRunnableTests(){return this._allRunnableTests}get firstRunnableTest(){return this._firstRunnableTest}get runnableTest(){return this._runnableTest}get isUserInVariant(){return this._isUserInVariant}get registerCompleteEvents(){return this._registerCompleteEvents}get registerImpressionEvents(){return this._registerImpressionEvents}get trackABTests(){return this._trackABTests}constructor(e){const{mvtMaxValue:t,mvtId:n,pageIsSensitive:r,abTestSwitches:i,serverSideTests:l,forcedTestVariants:d,forcedTestException:p,errorReporter:h,ophanRecord:f,arrayOfTestObjects:v}=e,g=s({mvtMaxValue:t,mvtId:n,pageIsSensitive:r,abTestSwitches:i,forcedTestVariants:d,forcedTestException:p,arrayOfTestObjects:v}),b=(e=>{const{serverSideTests:t={},errorReporter:n=(()=>{}),ophanRecord:r=(()=>{})}=e;return{registerCompleteEvents:e=>e.forEach(u(!0,n,r)),registerImpressionEvents:e=>{e.filter(c).forEach(u(!1,n,r))},trackABTests:e=>a(((e,t,n)=>{try{const t={},r=Object.keys(n).filter((e=>!!n[e]));return e.filter((e=>!c(e))).forEach((e=>{t[e.id]=o(e.variantToRun,!1)})),r.forEach((e=>{t["ab".concat(e)]=o({id:"inTest",test:()=>{}},!1)})),t}catch(e){return t(e,{},!1),{}}})(e,n,t),r)}})({serverSideTests:l,errorReporter:h,ophanRecord:f});this._allRunnableTests=g.allRunnableTests,this._firstRunnableTest=g.firstRunnableTest,this._runnableTest=g.runnableTest,this._isUserInVariant=g.isUserInVariant,this._registerCompleteEvents=b.registerCompleteEvents,this._registerImpressionEvents=b.registerImpressionEvents,this._trackABTests=b.trackABTests}}var d=n(1614),p=n(2803),h=n(9038),f=n(6257),v=n(8265),g=n(2012),b=n(3448),m=n(3205);const y=[f.U,m.a,b.C,g.r,{id:"NewsletterMerchUnitLighthouseControl",start:"2020-11-11",expiry:"2020-12-08",author:"Josh Buckland & Alex Dufournet",description:"Show BAU merch unit to 50% of users. This is the control for the NewsletterMerchUnitLighthouseVariants test.",audience:.5,audienceOffset:0,successMeasure:"We see increased engagement from users shown the Newsletters ad unit",audienceCriteria:"Website users only.",idealOutcome:"Investigate lighthouse segment engagement via newsletters",showForSensitive:!1,canRun:()=>!0,variants:[{id:"control",test:()=>{}}]},{id:"NewsletterMerchUnitLighthouseVariants",start:"2020-11-11",expiry:"2020-12-08",author:"Josh Buckland & Alex Dufournet",description:"Show a newsletter advert in the merchandising unit to 25% of users and reader revenueto another 25%. The remaining 50% are covered by NewsletterMerchUnitLighthouseControl which needs to run at the same time. These two variants test the value of showing newsletter merch units instead of reader revenue ones. ",audience:.5,audienceOffset:.5,successMeasure:"We see increased engagement from users shown the Newsletters ad unit",audienceCriteria:"Website users only.",idealOutcome:"Investigate lighthouse segment engagement via newsletters",showForSensitive:!1,canRun:()=>!0,variants:[{id:"newsletter",test:()=>{}},{id:"reader-revenue",test:()=>{}}]},{id:"ConsentlessAds",author:"@guardian/commercial-dev",start:"2022-08-11",expiry:"2023-06-01",audience:0,audienceOffset:0,audienceCriteria:"All pageviews",successMeasure:"Testing Opt Out ads in production",description:"Use consentless ad stack rather than consented / standalone",variants:[{id:"control",test:()=>{}},{id:"variant",test:()=>{}}],canRun:()=>!0},v.N,{id:"BillboardsInMerch",author:"@commercial-dev",start:"2022-12-07",expiry:"2023-02-31",audience:0,audienceOffset:0,audienceCriteria:"Opt in only",successMeasure:"Test the commercial impact of showing billboard adverts in merchandising slots",description:"Show billboard adverts in merchandising slots to browsers in the variant",variants:[{id:"control",test:()=>{}},{id:"variant",test:()=>{}}],canRun:()=>!0},{id:"ElementsManager",author:"@commercial-dev",start:"2023-02-23",expiry:"2023-06-30",audience:0,audienceOffset:0,audienceCriteria:"Opt in only",successMeasure:"Able to serve GEM assets in ad slots on page",description:"Test serving GEM assets in ad slots on page",variants:[{id:"control",test:()=>{}},{id:"variant",test:()=>{}}],canRun:()=>!0}],O={abAbTestTest:!0,abSignInGateMainControl:!0,abSignInGateMainVariant:!0,abSignInGateAusMandatory:!0};function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const S=e=>e.startsWith("#ab")?e.replace("#ab-","").split(",").reduce(((e,t)=>{const[n,r]=t.split("=");return n&&r?(s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){T(e,t,n[t])}))}return e}({},e),i=null!=(i={[n]:{variant:r}})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(i)).forEach((function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(i,e))})),s):e;var s,i}),{}):{};var j=n(5677);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){I(e,t,n[t])}))}return e}const R=e=>{let{isDev:t,pageIsSensitive:n,abTestSwitches:r,forcedTestVariants:s}=e;const i=Number(t&&(0,d.e)({name:"GU_mvt_id_local",shouldMemoize:!0})||(0,d.e)({name:"GU_mvt_id",shouldMemoize:!0}));i||console.log("There is no MVT ID set, see SetABTests.importable.tsx");const a=(0,h.ZL)(),o=window.Cypress?O:{},c=M({},s,S(window.location.hash)),u=new l({mvtId:i,pageIsSensitive:n,abTestSwitches:M({},r,o),arrayOfTestObjects:y,ophanRecord:a,forcedTestVariants:c}),f=u.allRunnableTests(y),v=f.reduce(((e,t)=>{let{id:n,variantToRun:r}=t;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){w(e,t,n[t])}))}return e}({},e,{[n]:{variant:r.id}})}),{});return(0,j.x)({api:u,participations:v}),u.trackABTests(f),u.registerImpressionEvents(f),u.registerCompleteEvents(f),(0,p.c)("dotcom","AB tests initialised"),null}},6257:(e,t,n)=>{n.d(t,{U:()=>r});const r={id:"AbTestTest",start:"2020-05-20",expiry:"2023-12-01",author:"gtrufitt",description:"This Test",audience:1e-4,audienceOffset:0,successMeasure:"It works",audienceCriteria:"Everyone",idealOutcome:"It works",showForSensitive:!0,canRun:()=>!0,variants:[{id:"control",test:()=>{},impression:e=>{e()},success:e=>{e()}},{id:"variant",test:()=>{},impression:e=>{e()},success:e=>{e()}}]}},8265:(e,t,n)=>{n.d(t,{N:()=>r});const r={id:"IntegrateIma",start:"2022-07-14",expiry:"2023-04-04",author:"Zeke Hunter-Green",description:"Test the commercial impact of replacing YouTube ads with Interactive Media Ads on first-party videos",audience:0,audienceOffset:0,audienceCriteria:"Opt in",successMeasure:"IMA integration works as expected without adversely affecting pages with videos",canRun:()=>!0,variants:[{id:"control",test:()=>{}},{id:"variant",test:()=>{}}]}},2012:(e,t,n)=>{n.d(t,{r:()=>r});const r={id:"SignInGateCopyTestJan2023",start:"2023-01-23",expiry:"2025-12-01",author:"Lindsey Dew",description:"Test varying the copy in the call to action for sign in gate",audience:0,audienceOffset:0,successMeasure:"Users sign in or create a Guardian account",audienceCriteria:"3rd article of the day, lower priority than consent banner, simple articles (not gallery, live etc.), not signed in, not shown after dismiss, not on help, info sections etc. Exclude iOS 9 and guardian-live-australia. Suppresses other banners, and appears over epics",dataLinkNames:"SignInGateCopyTest",idealOutcome:"One variants performs at least 2% better than the control and/OR 10% better than the other variant. Neither variant performs 5% worse than the control",showForSensitive:!1,canRun:()=>!0,variants:[{id:"quick-and-easy",test:()=>{}},{id:"take-a-moment",test:()=>{}},{id:"sign-in-copy-control",test:()=>{}}]}},3448:(e,t,n)=>{n.d(t,{C:()=>r});const r={id:"SignInGateMainControl",start:"2020-05-20",expiry:"2025-12-01",author:"Mahesh Makani",description:"Show sign in gate to 100% of users on 3rd article view of simple article templates, and show a further 5 times after the first dismissal, with higher priority over banners and epic. Control Audience.",audience:.1,audienceOffset:.9,successMeasure:"N/A - User does not see gate, only to compare to variant.",audienceCriteria:"3rd article of the day, lower priority than consent banner, simple articles (not gallery, live etc.), not signed in, not shown after dismiss, not on help, info sections etc. Exclude iOS 9 and guardian-live-australia. Suppresses other banners, and appears over epics",dataLinkNames:"SignInGateMain",idealOutcome:"Increase the number of users signed in whilst running at a reasonable scale",showForSensitive:!1,canRun:()=>!0,variants:[{id:"main-control-4",test:()=>{}}]}},3205:(e,t,n)=>{n.d(t,{a:()=>r});const r={id:"SignInGateMainVariant",start:"2020-06-09",expiry:"2025-12-01",author:"Mahesh Makani",description:"Show sign in gate to 100% of users on 3rd article view of simple article templates, and show a further 5 times after the first dismissal, with higher priority over banners and epic. Main/Variant Audience.",audience:.9,audienceOffset:0,successMeasure:"Users sign in or create a Guardian account",audienceCriteria:"3rd article of the day, lower priority than consent banner, simple articles (not gallery, live etc.), not signed in, not shown after dismiss, not on help, info sections etc. Exclude iOS 9 and guardian-live-australia. Suppresses other banners, and appears over epics",dataLinkNames:"SignInGateMain",idealOutcome:"Increase the number of users signed in whilst running at a reasonable scale",showForSensitive:!1,canRun:()=>!0,variants:[{id:"main-variant-4",test:()=>{}}]}},5677:(e,t,n)=>{n.d(t,{N:()=>o,x:()=>c});var r=n(6131),s=n(2699);const i=new Promise((()=>{})),a="ab-tests",o=()=>{const{data:e}=(0,s.Z)(a,(()=>i));return e},c=e=>{let{api:t,participations:n}=e;(0,r.JG)(a,{api:t,participations:n},!1)}}}]);
//# sourceMappingURL=SetABTests-importable.modern.d9542a538d3de6287ff6.js.map