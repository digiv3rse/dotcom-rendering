[{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/__mocks__/svgMock.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Analysis.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Article.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Comment.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Dead.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Editorial.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Feature.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Interview.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Labs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Letter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Live.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/MatchReport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/NewletterSignup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/NumberedList.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/PhotoEssay.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/PrintShop.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Quiz.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Recipe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Review.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/SpecialReport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/articles/Standard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/images.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/match-report.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/series.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/generated/story-package.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/calloutCampaign.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/cricket-scoreboard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/discussion-no-top-comments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/discussion.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/key-events.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/liveBlock.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/most-read-geo.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/most-read.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/related.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/short-discussion.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/fixtures/manual/trails.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/index.d.ts","messages":[{"ruleId":"@typescript-eslint/consistent-type-imports","severity":1,"message":"`import()` type annotations are forbidden.","line":69,"column":23,"nodeType":"TSImportType","messageId":"noImportTypeAnnotations","endLine":69,"endColumn":62},{"ruleId":"@typescript-eslint/consistent-type-imports","severity":1,"message":"`import()` type annotations are forbidden.","line":70,"column":22,"nodeType":"TSImportType","messageId":"noImportTypeAnnotations","endLine":70,"endColumn":60},{"ruleId":"@typescript-eslint/consistent-type-imports","severity":1,"message":"`import()` type annotations are forbidden.","line":71,"column":21,"nodeType":"TSImportType","messageId":"noImportTypeAnnotations","endLine":71,"endColumn":58},{"ruleId":"@typescript-eslint/consistent-type-imports","severity":1,"message":"`import()` type annotations are forbidden.","line":72,"column":22,"nodeType":"TSImportType","messageId":"noImportTypeAnnotations","endLine":72,"endColumn":60},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":79,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2912,2915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2912,2915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":551,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":551,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12635,12638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12635,12638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":911,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":911,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20118,20121],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20118,20121],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1193,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1193,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[26156,26159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[26156,26159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1240,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1240,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27136,27139],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27136,27139],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1340,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1340,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29099,29102],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29099,29102],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1345,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1345,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29299,29302],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29299,29302],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1352,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1352,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29533,29536],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29533,29536],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1361,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1361,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29744,29747],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29744,29747],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1362,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1362,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29763,29766],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29763,29766],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1363,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1363,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29788,29791],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29788,29791],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1364,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1364,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29810,29813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29810,29813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1365,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1365,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29834,29837],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29834,29837],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1366,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1366,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29852,29855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29852,29855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1367,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1367,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29874,29877],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29874,29877],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1368,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1368,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29893,29896],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29893,29896],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1369,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1369,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29913,29916],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29913,29916],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1370,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1370,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29936,29939],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29936,29939],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1371,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1371,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29956,29959],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29956,29959],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1372,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1372,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[29980,29983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[29980,29983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1373,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1373,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30005,30008],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30005,30008],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1374,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1374,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30026,30029],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30026,30029],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1375,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1375,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30050,30053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30050,30053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1376,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1376,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30070,30073],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30070,30073],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1377,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1377,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30087,30090],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30087,30090],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1378,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1378,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30111,30114],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30111,30114],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1379,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1379,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30133,30136],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30133,30136],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1380,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1380,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30151,30154],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30151,30154],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1381,"column":18,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1381,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30173,30176],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30173,30176],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1382,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1382,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30197,30200],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30197,30200],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1383,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1383,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30217,30220],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30217,30220],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1384,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1384,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30237,30240],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30237,30240],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1390,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1390,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30305,30308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30305,30308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1409,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1409,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[31018,31021],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[31018,31021],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[{"ruleId":"import/no-default-export","severity":2,"message":"Prefer named exports.","line":1342,"column":9,"nodeType":"ExportDefaultDeclaration","endLine":1342,"endColumn":16,"suppressions":[{"kind":"directive","justification":"TODO: use type definition @types/compose-function"}]},{"ruleId":"import/no-default-export","severity":2,"message":"Prefer named exports.","line":1347,"column":9,"nodeType":"ExportDefaultDeclaration","endLine":1347,"endColumn":16,"suppressions":[{"kind":"directive","justification":"it’s that 6yo module works"}]},{"ruleId":"import/no-default-export","severity":2,"message":"Prefer named exports.","line":1392,"column":9,"nodeType":"ExportDefaultDeclaration","endLine":1392,"endColumn":16,"suppressions":[{"kind":"directive","justification":"This is how we import SVGs"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":38,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// ------------------------  //\n// CAPIArticleType and its subtypes //\n// ------------------------- //\n\n// Pillars are used for styling\n// RealPillars have pillar palette colours\n// FakePillars allow us to make modifications to style based on rules outside of the pillar of an article\n// These are partialy kept for Google Analytics purposes\ntype RealPillars = 'news' | 'opinion' | 'sport' | 'culture' | 'lifestyle';\ntype FakePillars = 'labs';\ntype LegacyPillar = RealPillars | FakePillars;\n\n// Themes are used for styling\n// RealPillars have pillar palette colours and have a `Pillar` type in Scala\n// FakePillars allow us to make modifications to style based on rules outside of the pillar of an article and have a `Special` type in Scala\n// https://github.com/guardian/content-api-scala-client/blob/master/client/src/main/scala/com.gu.contentapi.client/utils/format/Theme.scala\ntype ThemePillar =\n\t| 'NewsPillar'\n\t| 'OpinionPillar'\n\t| 'SportPillar'\n\t| 'CulturePillar'\n\t| 'LifestylePillar';\ntype ThemeSpecial = 'SpecialReportTheme' | 'Labs';\ntype CAPITheme = ThemePillar | ThemeSpecial;\n\n// CAPIDesign is what CAPI gives us on the Format field\n// https://github.com/guardian/content-api-scala-client/blob/master/client/src/main/scala/com.gu.contentapi.client/utils/format/Design.scala\ntype CAPIDesign =\n\t| 'ArticleDesign'\n\t| 'GalleryDesign'\n\t| 'AudioDesign'\n\t| 'VideoDesign'\n\t| 'ReviewDesign'\n\t| 'AnalysisDesign'\n\t| 'CommentDesign'\n\t| 'LetterDesign'\n\t| 'FeatureDesign'\n\t| 'LiveBlogDesign'\n\t| 'DeadBlogDesign'\n\t| 'RecipeDesign'\n\t| 'MatchReportDesign'\n\t| 'InterviewDesign'\n\t| 'EditorialDesign'\n\t| 'QuizDesign'\n\t| 'InteractiveDesign'\n\t| 'PhotoEssayDesign'\n\t| 'PrintShopDesign'\n\t| 'ObituaryDesign'\n\t| 'FullPageInteractiveDesign'\n\t| 'NewsletterSignupDesign';\n\n// CAPIDisplay is the display information passed through from CAPI and dictates the displaystyle of the content e.g. Immersive\n// https://github.com/guardian/content-api-scala-client/blob/master/client/src/main/scala/com.gu.contentapi.client/utils/format/Display.scala\ntype CAPIDisplay =\n\t| 'StandardDisplay'\n\t| 'ImmersiveDisplay'\n\t| 'ShowcaseDisplay'\n\t| 'NumberedListDisplay';\n\n// CAPIFormat is the stringified version of Format passed through from CAPI.\n// It gets converted to the @guardian/libs format on platform\n\ntype CAPIFormat = {\n\tdesign: CAPIDesign;\n\ttheme: CAPITheme;\n\tdisplay: CAPIDisplay;\n};\n\ntype ArticleDisplay = import('@guardian/libs').ArticleDisplay;\ntype ArticleDesign = import('@guardian/libs').ArticleDesign;\ntype ArticleTheme = import('@guardian/libs').ArticleTheme;\ntype ArticleFormat = import('@guardian/libs').ArticleFormat;\ntype ArticlePillar = ArticleTheme;\n\n// This is an object that allows you Type defaults of the designTypes.\n// The return type looks like: { Feature: any, Live: any, ...}\n// and can be used to add TypeSafety when needing to override a style in a designType\n\ntype DesignTypesObj = { [key in ArticleDesign]: any };\n\ntype Colour = string;\n\ntype Palette = {\n\ttext: {\n\t\theadline: Colour;\n\t\tseriesTitle: Colour;\n\t\tsectionTitle: Colour;\n\t\tseriesTitleWhenMatch: Colour;\n\t\tbyline: Colour;\n\t\ttwitterHandle: Colour;\n\t\ttwitterHandleBelowDesktop: Colour;\n\t\tcaption: Colour;\n\t\tcaptionLink: Colour;\n\t\tsubMeta: Colour;\n\t\tsubMetaLabel: Colour;\n\t\tsubMetaLink: Colour;\n\t\tsyndicationButton: Colour;\n\t\tarticleLink: Colour;\n\t\tarticleLinkHover: Colour;\n\t\tcardHeadline: Colour;\n\t\tcardByline: Colour;\n\t\tcardKicker: Colour;\n\t\tlinkKicker: Colour;\n\t\tcardStandfirst: Colour;\n\t\tcardFooter: Colour;\n\t\theadlineByline: Colour;\n\t\tstandfirst: Colour;\n\t\tstandfirstLink: Colour;\n\t\tlastUpdated: Colour;\n\t\tbranding: Colour;\n\t\tdisclaimerLink: Colour;\n\t\tsignInLink: Colour;\n\t\trichLink: Colour;\n\t\twitnessIcon: Colour;\n\t\twitnessAuthor: Colour;\n\t\twitnessTitle: Colour;\n\t\tcarouselTitle: Colour;\n\t\tcalloutHeading: Colour;\n\t\tpullQuote: Colour;\n\t\tpullQuoteAttribution: Colour;\n\t\tdropCap: Colour;\n\t\tblockquote: Colour;\n\t\tnumberedTitle: Colour;\n\t\tnumberedPosition: Colour;\n\t\toverlayedCaption: Colour;\n\t\tshareCount: Colour;\n\t\tshareCountUntilDesktop: Colour;\n\t\tcricketScoreboardLink: Colour;\n\t\tkeyEvent: Colour;\n\t};\n\tbackground: {\n\t\tarticle: Colour;\n\t\tseriesTitle: Colour;\n\t\tsectionTitle: Colour;\n\t\tavatar: Colour;\n\t\tcard: Colour;\n\t\theadline: Colour;\n\t\theadlineByline: Colour;\n\t\tbullet: Colour;\n\t\tbulletStandfirst: Colour;\n\t\theader: Colour;\n\t\tstandfirst: Colour;\n\t\trichLink: Colour;\n\t\timageTitle: Colour;\n\t\tspeechBubble: Colour;\n\t\tcarouselDot: Colour;\n\t\tcarouselDotFocus: Colour;\n\t\theadlineTag: Colour;\n\t\tmostViewedTab: Colour;\n\t\tmatchNav: Colour;\n\t\tanalysisUnderline: Colour;\n\t\tmatchStats: Colour;\n\t\tageWarning: Colour;\n\t\tkeyEventBullet: Colour;\n\t\tsummaryEventBullet: Colour;\n\t};\n\tfill: {\n\t\tcommentCount: Colour;\n\t\tcommentCountUntilDesktop: Colour;\n\t\tshareCountIcon: Colour;\n\t\tshareCountIconUntilDesktop: Colour;\n\t\tshareIcon: Colour;\n\t\tshareIconGrayBackground: Colour;\n\t\tcameraCaptionIcon: Colour;\n\t\trichLink: Colour;\n\t\tquoteIcon: Colour;\n\t\tblockquoteIcon: Colour;\n\t\ttwitterHandleBelowDesktop: Colour;\n\t};\n\tborder: {\n\t\tsyndicationButton: Colour;\n\t\tsubNav: Colour;\n\t\tarticleLink: Colour;\n\t\tarticleLinkHover: Colour;\n\t\tliveBlock: Colour;\n\t\tpinnedPost: Colour;\n\t\tstandfirstLink: Colour;\n\t\theadline: Colour;\n\t\tstandfirst: Colour;\n\t\trichLink: Colour;\n\t\tnavPillar: Colour;\n\t\tarticle: Colour;\n\t\tlines: Colour;\n\t\tmatchTab: Colour;\n\t\tactiveMatchTab: Colour;\n\t\tcricketScoreboardTop: Colour;\n\t\tcricketScoreboardDivider: Colour;\n\t\tcardSupporting: Colour;\n\t};\n\ttopBar: {\n\t\tcard: Colour;\n\t};\n\thover: {\n\t\theadlineByline: Colour;\n\t\tstandfirstLink: Colour;\n\t\tkeyEventLink: Colour;\n\t\tkeyEventBullet: Colour;\n\t\tsummaryEventBullet: Colour;\n\t};\n};\n\ntype ContainerOverrides = {\n\ttext: {\n\t\tcardHeadline: Colour;\n\t\tcardStandfirst: Colour;\n\t\tcardKicker: Colour;\n\t\tcardByline: Colour;\n\t\tcardFooter: Colour;\n\t\tcardCommentCount: Colour;\n\t\tdynamoHeadline: Colour;\n\t\tdynamoKicker: Colour;\n\t\tdynamoSublinkKicker: Colour;\n\t\tdynamoMeta: Colour;\n\t\tcontainer: Colour;\n\t\tcontainerToggle: Colour;\n\t};\n\tborder: {\n\t\tcontainer: Colour;\n\t\tlines: Colour;\n\t};\n\tbackground: {\n\t\tcontainer: Colour;\n\t\tcard: Colour;\n\t};\n\ttopBar: {\n\t\tcard: Colour;\n\t};\n};\n\ntype Edition = 'UK' | 'US' | 'INT' | 'AU';\n\ntype SharePlatform =\n\t| 'facebook'\n\t| 'twitter'\n\t| 'email'\n\t| 'whatsApp'\n\t| 'linkedIn'\n\t| 'messenger';\n\n// shared type declarations\ninterface SimpleLinkType {\n\turl: string;\n\ttitle: string;\n}\n\ninterface AdTargetParam {\n\tname: string;\n\tvalue: string | string[];\n}\n\ntype CustomParams = {\n\tsens: 't' | 'f';\n\turlkw: string[];\n\t[key: string]: string | string[] | number | number[] | boolean | boolean[];\n};\n\ntype AdTargeting =\n\t| {\n\t\t\tadUnit: string;\n\t\t\tcustomParams: CustomParams;\n\t\t\tdisableAds?: false;\n\t  }\n\t| {\n\t\t\tdisableAds: true;\n\t  };\n\ninterface SectionNielsenAPI {\n\tname: string;\n\tapiID: string;\n}\n\ninterface EditionCommercialProperties {\n\tadTargeting: AdTargetParam[];\n\tbranding?: Branding;\n}\n\ntype CommercialProperties = { [E in Edition]: EditionCommercialProperties };\n\ntype BrandingLogo = {\n\tsrc: string;\n\tlink: string;\n\tlabel: string;\n\tdimensions: { width: number; height: number };\n};\n\ninterface Branding {\n\tbrandingType?: { name: string };\n\tsponsorName: string;\n\tlogo: BrandingLogo;\n\taboutThisLink: string;\n\tlogoForDarkBackground?: BrandingLogo;\n}\n\ninterface LinkType extends SimpleLinkType {\n\tlongTitle: string;\n\tchildren?: LinkType[];\n\tmobileOnly?: boolean;\n\tpillar?: ArticlePillar;\n\tmore?: boolean;\n}\n\ninterface PillarType extends LinkType {\n\tpillar: ArticlePillar;\n}\n\ninterface MoreType extends LinkType {\n\tmore: true;\n}\n\ninterface ReaderRevenueCategories {\n\tcontribute: string;\n\tsubscribe: string;\n\tsupport: string;\n\tsupporter: string;\n\tgifting?: string;\n}\n\ntype ReaderRevenueCategory = 'contribute' | 'subscribe' | 'support';\ninterface ReaderRevenuePositions {\n\theader: ReaderRevenueCategories;\n\tfooter: ReaderRevenueCategories;\n\tsideMenu: ReaderRevenueCategories;\n\tampHeader: ReaderRevenueCategories;\n\tampFooter: ReaderRevenueCategories;\n}\n\ntype ReaderRevenuePosition =\n\t| 'header'\n\t| 'footer'\n\t| 'sideMenu'\n\t| 'ampHeader'\n\t| 'ampFooter';\n\ninterface BaseNavType {\n\totherLinks: MoreType;\n\tbrandExtensions: LinkType[];\n\tcurrentNavLink: string;\n\tsubNavSections?: SubNavType;\n\treaderRevenueLinks: ReaderRevenuePositions;\n}\n\n// TODO rename\ninterface SimpleNavType {\n\tpillars: PillarType[];\n\totherLinks: MoreType;\n\tbrandExtensions: LinkType[];\n\treaderRevenueLinks: ReaderRevenuePositions;\n}\n\ninterface NavType extends BaseNavType {\n\tpillars: PillarType[];\n}\n\ninterface SubNavBrowserType {\n\tcurrentNavLink: string;\n\tsubNavSections?: SubNavType;\n}\n\ninterface SubNavType {\n\tparent?: LinkType;\n\tlinks: LinkType[];\n}\n\ninterface AuthorType {\n\tbyline?: string;\n\ttwitterHandle?: string;\n\temail?: string;\n}\n\ninterface BlockContributor {\n\tname: string;\n\timageUrl?: string;\n\tlargeImageUrl?: string;\n}\n\ninterface Block {\n\tid: string;\n\telements: CAPIElement[];\n\tblockCreatedOn?: number;\n\tblockCreatedOnDisplay?: string;\n\tblockLastUpdated?: number;\n\tblockLastUpdatedDisplay?: string;\n\ttitle?: string;\n\tblockFirstPublished?: number;\n\tblockFirstPublishedDisplay?: string;\n\tblockFirstPublishedDisplayNoTimezone?: string;\n\tprimaryDateLine: string;\n\tsecondaryDateLine: string;\n\tcreatedOn?: number;\n\tcreatedOnDisplay?: string;\n\tlastUpdated?: number;\n\tlastUpdatedDisplay?: string;\n\tfirstPublished?: number;\n\tfirstPublishedDisplay?: string;\n\tcontributors?: BlockContributor[];\n}\n\ninterface Pagination {\n\tcurrentPage: number;\n\ttotalPages: number;\n\tnewest?: string;\n\tnewer?: string;\n\toldest?: string;\n\tolder?: string;\n}\n\ninterface FooterLink {\n\ttext: string;\n\turl: string;\n\tdataLinkName: string;\n\textraClasses?: string;\n}\ninterface FooterType {\n\tfooterLinks: FooterLink[][];\n}\n\ntype ContentType =\n\t| 'article'\n\t| 'network'\n\t| 'section'\n\t| 'imageContent'\n\t| 'interactive'\n\t| 'gallery'\n\t| 'video'\n\t| 'audio'\n\t| 'liveBlog'\n\t| 'tag'\n\t| 'index'\n\t| 'crossword'\n\t| 'survey'\n\t| 'signup'\n\t| 'userid';\n\ntype PageTypeType = {\n\thasShowcaseMainElement: boolean;\n\tisFront: boolean;\n\tisLiveblog: boolean;\n\tisMinuteArticle: boolean;\n\tisPaidContent: boolean;\n\tisPreview: boolean;\n\tisSensitive: boolean;\n};\n\ntype MatchType = 'CricketMatchType' | 'FootballMatchType';\n\ntype CricketTeam = {\n\tname: string;\n\thome: boolean;\n};\n\ntype FallOfWicket = {\n\torder: number;\n};\n\ntype CricketInnings = {\n\torder: number;\n\tbattingTeam: string;\n\trunsScored: string;\n\tdeclared: boolean;\n\tforfeited: boolean;\n\tfallOfWicket: FallOfWicket[];\n\tovers: string;\n};\n\ntype CricketMatch = {\n\tmatchId: string;\n\tcompetitionName: string;\n\tvenueName: string;\n\tteams: CricketTeam[];\n\tinnings: CricketInnings[];\n\tgameDate: string;\n};\n\n// Data types for the API request bodies from clients that require\n// transformation before internal use. If we use the data as-is, we avoid the\n// CAPI prefix. Note also, the 'CAPI' prefix naming convention is a bit\n// misleading - the model is *not* the same as the Content API content models.\n\ninterface CAPILinkType {\n\turl: string;\n\ttitle: string;\n\tlongTitle?: string;\n\ticonName?: string;\n\tchildren?: CAPILinkType[];\n\tpillar?: LegacyPillar;\n\tmore?: boolean;\n\tclassList?: string[];\n}\n\ninterface CAPINavType {\n\tcurrentUrl: string;\n\tpillars: CAPILinkType[];\n\totherLinks: CAPILinkType[];\n\tbrandExtensions: CAPILinkType[];\n\tcurrentNavLink?: CAPILinkType;\n\tcurrentNavLinkTitle?: string;\n\tcurrentPillarTitle?: string;\n\tsubNavSections?: {\n\t\tparent?: CAPILinkType;\n\t\tlinks: CAPILinkType[];\n\t};\n\treaderRevenueLinks: ReaderRevenuePositions;\n}\n\n// WARNING: run `gen-schema` task if changing this to update the associated JSON\n// schema definition.\ninterface CAPIArticleType {\n\theadline: string;\n\tstandfirst: string;\n\twebTitle: string;\n\tmainMediaElements: CAPIElement[];\n\tmain: string;\n\tkeyEvents: Block[];\n\tblocks: Block[];\n\tpinnedPost?: Block;\n\tpagination?: Pagination;\n\tauthor: AuthorType;\n\n\t/**\n\t * @TJS-format date-time\n\t */\n\twebPublicationDateDeprecated: string;\n\twebPublicationDate: string;\n\twebPublicationDateDisplay: string;\n\twebPublicationSecondaryDateDisplay: string;\n\teditionLongForm: string;\n\teditionId: Edition;\n\tpageId: string;\n\tversion: number; // TODO: check who uses?\n\ttags: TagType[];\n\tformat: CAPIFormat;\n\n\t// Include pillar and designType until we remove them upstream\n\t// We type designType as `string` for now so that the field is present,\n\t// but we don't care what's in it. Pillar we have a type for so we use it\n\t// but it shouldn't be important.\n\tdesignType: string;\n\tpillar: LegacyPillar;\n\n\tisImmersive: boolean;\n\tsectionLabel: string;\n\tsectionUrl: string;\n\tsectionName?: string;\n\tsubMetaSectionLinks: SimpleLinkType[];\n\tsubMetaKeywordLinks: SimpleLinkType[];\n\tshouldHideAds: boolean;\n\tisAdFreeUser: boolean;\n\topenGraphData: { [key: string]: string };\n\ttwitterData: { [key: string]: string };\n\twebURL: string;\n\tlinkedData: { [key: string]: any }[];\n\tconfig: ConfigType;\n\n\tshowBottomSocialButtons: boolean;\n\tshouldHideReaderRevenue: boolean;\n\n\t// AMP specific (for now)\n\tguardianBaseURL: string;\n\tcontentType: string;\n\thasRelated: boolean;\n\tpublication: string; // TODO: check who uses?\n\thasStoryPackage: boolean;\n\tbeaconURL: string;\n\tisCommentable: boolean;\n\tcommercialProperties: CommercialProperties;\n\tstarRating?: number;\n\ttrailText: string;\n\tbadge?: BadgeType;\n\n\tnav: CAPINavType; // TODO move this out as most code uses a different internal NAV model.\n\n\tpageFooter: FooterType;\n\n\tcontributionsServiceUrl: string;\n\tslotMachineFlags?: string;\n\n\tpageType: PageTypeType;\n\n\tmatchUrl?: string;\n\tmatchType?: MatchType;\n\tisSpecialReport: boolean;\n\n\t// Interactives made on Frontend rather than DCR require special handling.\n\t// The logic is date-driven. See:\n\t// https://github.com/guardian/frontend/blob/main/common/app/model/dotcomrendering/InteractiveSwitchOver.scala#L7.\n\tisLegacyInteractive?: boolean;\n\tfilterKeyEvents: boolean;\n\n\t// Included on live and dead blogs. Used when polling\n\tmostRecentBlockId?: string;\n}\n\ntype StageType = 'DEV' | 'CODE' | 'PROD';\n\n// FE* types are coming from Frontend\ninterface FEFrontType {\n\tpressedPage: FEPressedPageType;\n\tnav: CAPINavType;\n\teditionId: Edition;\n\teditionLongForm: string;\n\tguardianBaseURL: string;\n\tpageId: string;\n\twebTitle: string;\n\twebURL: string;\n\tconfig: FEFrontConfigType;\n\tcommercialProperties: Record<string, unknown>;\n\tpageFooter: FooterType;\n}\n\ntype DCRFrontType = {\n\tpressedPage: DCRPressedPageType;\n\tnav: CAPINavType;\n\teditionId: Edition;\n\twebTitle: string;\n\tconfig: FEFrontConfigType;\n\tpageFooter: FooterType;\n};\n\ntype FEPressedPageType = {\n\tid: string;\n\tseoData: FESeoDataType;\n\tfrontProperties: FEFrontPropertiesType;\n\tcollections: FECollectionType[];\n};\n\ntype DCRPressedPageType = {\n\tid: string;\n\tseoData: FESeoDataType;\n\tfrontProperties: FEFrontPropertiesType;\n\tcollections: DCRCollectionType[];\n};\n\ntype FESeoDataType = {\n\tid: string;\n\tnavSection: string;\n\twebTitle: string;\n\tdescription: string;\n};\n\ntype FEFrontPropertiesType = {\n\tisImageDisplayed: boolean;\n\tcommercial: Record<string, unknown>;\n};\n\ntype FESupportingContent = {\n\tproperties: {\n\t\thref?: string;\n\t};\n\theader?: {\n\t\tkicker?: {\n\t\t\titem?: {\n\t\t\t\tproperties: {\n\t\t\t\t\tkickerText: string;\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\theadline: string;\n\t\turl: string;\n\t};\n\tformat?: CAPIFormat;\n};\n\ntype DCRSupportingContent = {\n\theadline: string;\n\turl?: string;\n\tkickerText?: string;\n\tformat: ArticleFormat;\n};\n\ntype FEContainerType =\n\t| 'dynamic/fast'\n\t| 'dynamic/package'\n\t| 'dynamic/slow'\n\t| 'dynamic/slow-mpu'\n\t| 'fixed/large/slow-XIV'\n\t| 'fixed/medium/fast-XI'\n\t| 'fixed/medium/fast-XII'\n\t| 'fixed/medium/slow-VI'\n\t| 'fixed/medium/slow-VII'\n\t| 'fixed/medium/slow-XII-mpu'\n\t| 'fixed/small/fast-VIII'\n\t| 'fixed/small/slow-I'\n\t| 'fixed/small/slow-III'\n\t| 'fixed/small/slow-IV'\n\t| 'fixed/small/slow-V-half'\n\t| 'fixed/small/slow-V-mpu'\n\t| 'fixed/small/slow-V-third'\n\t| 'fixed/thrasher'\n\t| 'fixed/video'\n\t| 'nav/list'\n\t| 'nav/media-list'\n\t| 'news/most-popular';\n\ntype FEContainerPalette =\n\t| 'EventPalette'\n\t| 'SombreAltPalette'\n\t| 'EventAltPalette'\n\t| 'InvestigationPalette'\n\t| 'LongRunningAltPalette'\n\t| 'LongRunningPalette'\n\t| 'SombrePalette'\n\t| 'Canonical'\n\t| 'Dynamo'\n\t| 'Special'\n\t| 'DynamoLike'\n\t| 'Special'\n\t| 'Breaking'\n\t| 'Podcast'\n\t| 'Branded'\n\t| 'BreakingPalette';\n\ntype DCRContainerPalette =\n\t| 'EventPalette'\n\t| 'SombreAltPalette'\n\t| 'EventAltPalette'\n\t| 'InvestigationPalette'\n\t| 'LongRunningAltPalette'\n\t| 'LongRunningPalette'\n\t| 'SombrePalette'\n\t| 'BreakingPalette';\n\n// TODO: These may need to be declared differently than the front types in the future\ntype DCRContainerType = FEContainerType;\n\ntype FEFrontCard = {\n\tproperties: {\n\t\tisBreaking: boolean;\n\t\tshowMainVideo: boolean;\n\t\tshowKickerTag: boolean;\n\t\tshowByline: boolean;\n\t\timageSlideshowReplace: boolean;\n\t\tmaybeContent?: {\n\t\t\ttrail: {\n\t\t\t\ttrailPicture?: {\n\t\t\t\t\tallImages: {\n\t\t\t\t\t\tindex: number;\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tdisplayCredit?: string;\n\t\t\t\t\t\t\tsource?: string;\n\t\t\t\t\t\t\tphotographer?: string;\n\t\t\t\t\t\t\tisMaster?: string;\n\t\t\t\t\t\t\taltText?: string;\n\t\t\t\t\t\t\theight: string;\n\t\t\t\t\t\t\tcredit: string;\n\t\t\t\t\t\t\tmediaId: string;\n\t\t\t\t\t\t\twidth: string;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmediaType: string;\n\t\t\t\t\t\turl: string;\n\t\t\t\t\t}[];\n\t\t\t\t};\n\t\t\t\tbyline?: string;\n\t\t\t\tthumbnailPath?: string;\n\t\t\t\twebPublicationDate: number;\n\t\t\t};\n\t\t\tmetadata: {\n\t\t\t\tid: string;\n\t\t\t\twebTitle: string;\n\t\t\t\twebUrl: string;\n\t\t\t\ttype: string;\n\t\t\t\tsectionId?: { value: string };\n\t\t\t\tformat: CAPIFormat;\n\t\t\t};\n\t\t\tfields: {\n\t\t\t\tmain: string;\n\t\t\t\tbody: string;\n\t\t\t\tstandfirst?: string;\n\t\t\t};\n\t\t\telements: Record<string, unknown>;\n\t\t\ttags: Record<string, unknown>;\n\t\t};\n\t\tmaybeContentId?: string;\n\t\tisLiveBlog: boolean;\n\t\tisCrossword: boolean;\n\t\tbyline?: string;\n\t\twebTitle: string;\n\t\tlinkText?: string;\n\t\twebUrl?: string;\n\t\teditionBrandings: { edition: { id: Edition } }[];\n\t};\n\theader: {\n\t\tisVideo: boolean;\n\t\tisComment: boolean;\n\t\tisGallery: boolean;\n\t\tisAudio: boolean;\n\t\tkicker?: {\n\t\t\ttype: string;\n\t\t\titem?: {\n\t\t\t\tproperties: {\n\t\t\t\t\tkickerText: string;\n\t\t\t\t};\n\t\t\t};\n\t\t};\n\t\tseriesOrBlogKicker?: {\n\t\t\tproperties: {\n\t\t\t\tkickerText: string;\n\t\t\t};\n\t\t\tname: string;\n\t\t\turl: string;\n\t\t\tid: string;\n\t\t};\n\t\theadline: string;\n\t\turl: string;\n\t\thasMainVideoElement: boolean;\n\t};\n\tcard: {\n\t\tid: string;\n\t\tcardStyle: {\n\t\t\ttype: string;\n\t\t};\n\t\twebPublicationDateOption?: number;\n\t\tlastModifiedOption?: number;\n\t\ttrailText?: string;\n\t\tstarRating?: number;\n\t\tshortUrlPath?: string;\n\t\tshortUrl: string;\n\t\tgroup: string;\n\t\tisLive: boolean;\n\t};\n\tdiscussion: {\n\t\tisCommentable: boolean;\n\t\tisClosedForComments: boolean;\n\t\tdiscussionId?: string;\n\t};\n\tdisplay: {\n\t\tisBoosted: boolean;\n\t\tshowBoostedHeadline: boolean;\n\t\tshowQuotedHeadline: boolean;\n\t\timageHide: boolean;\n\t\tshowLivePlayable: boolean;\n\t};\n\tformat?: CAPIFormat;\n\tenriched?: Record<string, unknown>;\n\tsupportingContent?: FESupportingContent[];\n\tcardStyle?: {\n\t\ttype: string;\n\t};\n\ttype: string;\n};\n\ntype DCRFrontCard = {\n\tformat: ArticleFormat;\n\turl: string;\n\theadline: string;\n\ttrailText?: string;\n\twebPublicationDate?: string;\n\timage?: string;\n\tkickerText?: string;\n\t/** @see JSX.IntrinsicAttributes[\"data-link-name\"] */\n\tdataLinkName: string;\n};\n\ntype FECollectionType = {\n\tid: string;\n\tdisplayName: string;\n\tcurated: FEFrontCard[];\n\tbackfill: FEFrontCard[];\n\ttreats: FEFrontCard[];\n\tlastUpdate?: number;\n\thref?: string;\n\tgroups?: string[];\n\tcollectionType: FEContainerType;\n\tuneditable: boolean;\n\tshowTags: boolean;\n\tshowSections: boolean;\n\thideKickers: boolean;\n\tshowDateHeader: boolean;\n\tshowLatestUpdate: boolean;\n\tconfig: {\n\t\tdisplayName: string;\n\t\tmetadata?: { type: FEContainerPalette }[];\n\t\tcollectionType: FEContainerType;\n\t\thref?: string;\n\t\tgroups?: string[];\n\t\tuneditable: boolean;\n\t\tshowTags: boolean;\n\t\tshowSections: boolean;\n\t\thideKickers: boolean;\n\t\tshowDateHeader: boolean;\n\t\tshowLatestUpdate: boolean;\n\t\texcludeFromRss: boolean;\n\t\tshowTimestamps: boolean;\n\t\thideShowMore: boolean;\n\t\tplatform: string;\n\t};\n\thasMore: boolean;\n};\n\ntype DCRCollectionType = {\n\tid: string;\n\tdisplayName: string;\n\tcollectionType: DCRContainerType;\n\tcontainerPalette?: DCRContainerPalette;\n\tcurated: DCRFrontCard[];\n\tbackfill: DCRFrontCard[];\n\ttreats: DCRFrontCard[];\n\thref?: string;\n};\n\ntype FEFrontConfigType = {\n\tavatarApiUrl: string;\n\texternalEmbedHost: string;\n\tajaxUrl: string;\n\tkeywords: string;\n\trevisionNumber: string;\n\tisProd: boolean;\n\tswitches: Switches;\n\tsection: string;\n\tkeywordIds: string;\n\tlocationapiurl: string;\n\tsharedAdTargeting: { [key: string]: any };\n\tbuildNumber: string;\n\tabTests: ServerSideTests;\n\tpbIndexSites: { [key: string]: unknown }[];\n\tampIframeUrl: string;\n\tbeaconUrl: string;\n\tuserAttributesApiUrl: string;\n\thost: string;\n\tbrazeApiKey: string;\n\tcalloutsUrl: string;\n\trequiresMembershipAccess: boolean;\n\tonwardWebSocket: string;\n\ta9PublisherId: string;\n\tcontentType: string;\n\tfacebookIaAdUnitRoot: string;\n\tophanEmbedJsUrl: string;\n\tidUrl: string;\n\tdcrSentryDsn: string;\n\tisFront: true;\n\tidWebAppUrl: string;\n\tdiscussionApiUrl: string;\n\tsentryPublicApiKey: string;\n\tomnitureAccount: string;\n\tdfpAccountId: string;\n\tpageId: string;\n\tforecastsapiurl: string;\n\tassetsPath: string;\n\tpillar: string;\n\tcommercialBundleUrl: string;\n\tdiscussionApiClientHeader: string;\n\tmembershipUrl: string;\n\tdfpHost: string;\n\tcardStyle?: string;\n\tgoogletagUrl: string;\n\tsentryHost: string;\n\tshouldHideAdverts: boolean;\n\tmmaUrl: string;\n\tmembershipAccess: string;\n\tisPreview: boolean;\n\tgoogletagJsUrl: string;\n\tsupportUrl: string;\n\tedition: string;\n\tdiscussionFrontendUrl: string;\n\tipsosTag: string;\n\tophanJsUrl: string;\n\tisPaidContent: boolean;\n\tmobileAppsAdUnitRoot: string;\n\tplistaPublicApiKey: string;\n\tfrontendAssetsFullURL: string;\n\tgoogleSearchId: string;\n\tallowUserGeneratedContent: boolean;\n\tdfpAdUnitRoot: string;\n\tidApiUrl: string;\n\tomnitureAmpAccount: string;\n\tadUnit: string;\n\thasPageSkin: boolean;\n\twebTitle: string;\n\tstripePublicToken: string;\n\tgoogleRecaptchaSiteKey: string;\n\tdiscussionD2Uid: string;\n\tweatherapiurl: string;\n\tgoogleSearchUrl: string;\n\toptimizeEpicUrl: string;\n\tstage: StageType;\n\tidOAuthUrl: string;\n\tisSensitive: boolean;\n\tisDev: boolean;\n\tthirdPartyAppsAccount?: string;\n\tavatarImagesUrl: string;\n\tfbAppId: string;\n};\n\ninterface TagType {\n\tid: string;\n\ttype: string;\n\ttitle: string;\n\ttwitterHandle?: string;\n\tpaidContentType?: string;\n\tbylineImageUrl?: string;\n\tbylineLargeImageUrl?: string;\n}\n\n/**\n * BlocksRequest is the expected body format for POST requests made to /Blocks\n */\ninterface BlocksRequest {\n\tblocks: Block[];\n\tformat: CAPIFormat;\n\thost?: string;\n\tpageId: string;\n\twebTitle: string;\n\tajaxUrl: string;\n\tisAdFreeUser: boolean;\n\tisSensitive: boolean;\n\tedition: string;\n\tsection: string;\n\tsharedAdTargeting: Record<string, unknown>;\n\tadUnit: string;\n\tvideoDuration?: number;\n\tswitches: { [key: string]: boolean };\n}\n\n/**\n * KeyEventsRequest is the expected body format for POST requests made to /KeyEvents\n */\ninterface KeyEventsRequest {\n\tkeyEvents: Block[];\n\tformat: CAPIFormat;\n\tfilterKeyEvents: boolean;\n}\n\ninterface BadgeType {\n\tseriesTag: string;\n\timageUrl: string;\n}\n\ntype ImagePositionType = 'left' | 'top' | 'right' | 'bottom' | 'none';\n\ntype ImageSizeType = 'small' | 'medium' | 'large' | 'jumbo';\n\ntype SmallHeadlineSize = 'tiny' | 'small' | 'medium' | 'large';\n\ntype AvatarType = {\n\tsrc: string;\n\talt: string;\n};\n\ntype MediaType = 'Video' | 'Audio' | 'Gallery';\n\ntype LineEffectType = 'squiggly' | 'dotted' | 'straight';\n\ntype LeftColSize = 'compact' | 'wide';\n\ntype CardPercentageType = '25%' | '34%' | '50%' | '66%' | '75%' | '100%';\n\ntype HeadlineLink = {\n\tto: string; // the href for the anchor tag\n\tvisitedColour?: string; // a custom colour for the :visited state\n\tpreventFocus?: boolean; // if true, stop the link from being tabbable and focusable\n};\n\ntype UserBadge = {\n\tname: string;\n};\n\ntype UserProfile = {\n\tuserId: string;\n\tdisplayName: string;\n\twebUrl: string;\n\tapiUrl: string;\n\tavatar: string;\n\tsecureAvatarUrl: string;\n\tbadge: UserBadge[];\n\n\t// only included from /profile/me endpoint\n\tprivateFields?: {\n\t\tcanPostComment: boolean;\n\t\tisPremoderated: boolean;\n\t\thasCommented: boolean;\n\t};\n};\n\n/**\n * Football\n */\ntype TeamType = {\n\tid: string;\n\tname: string;\n\tcodename: string;\n\tplayers: PlayerType[];\n\tpossession: number;\n\tshotsOn: number;\n\tshotsOff: number;\n\tcorners: number;\n\tfouls: number;\n\tcolours: string;\n\tscore: number;\n\tcrest: string;\n\tscorers: string[];\n};\n\ntype PlayerType = {\n\tid: string;\n\tname: string;\n\tposition: string;\n\tlastName: string;\n\tsubstitute: boolean;\n\ttimeOnPitch: string;\n\tshirtNumber: string;\n\tevents: EventType[];\n};\n\ntype EventType = {\n\teventTime: string; // minutes\n\teventType: 'substitution' | 'dismissal' | 'booking';\n};\n\ntype MatchReportType = {\n\tid: string;\n\tisResult: boolean;\n\thomeTeam: TeamType;\n\tawayTeam: TeamType;\n\tcompetition: {\n\t\tfullName: string;\n\t};\n\tisLive: boolean;\n\tvenue: string;\n\tcomments: string;\n\tminByMinUrl: string;\n\treportUrl: string;\n};\n\n/**\n * Onwards\n */\ntype OnwardsType = {\n\theading: string;\n\ttrails: TrailType[];\n\tdescription?: string;\n\turl?: string;\n\tophanComponentName: OphanComponentName;\n\tformat: ArticleFormat;\n\tisCuratedContent?: boolean;\n};\n\ntype OphanComponentName =\n\t| 'series'\n\t| 'more-on-this-story'\n\t| 'related-stories'\n\t| 'related-content'\n\t| 'more-media-in-section'\n\t| 'more-galleries'\n\t| 'curated-content'\n\t| 'default-onwards'; // We should never see this in the analytics data!\n\ninterface CommercialConfigType {\n\tisPaidContent?: boolean;\n\tpageId: string;\n\twebPublicationDate?: number;\n\theadline?: string;\n\tauthor?: string;\n\tkeywords?: string;\n\tsection?: string;\n\tedition?: string;\n\tseries?: string;\n\ttoneIds?: string;\n\tcontentType: string;\n\tampIframeUrl: string;\n}\n\ntype ServerSideTests = {\n\t[k: `${string}Variant`]: 'variant';\n\t[k: `${string}Control`]: 'control';\n};\n\n/**\n * the config model will contain useful app/site\n * level data. Although currently derived from the config model\n * constructed in frontend and passed to dotcom-rendering\n * this data could eventually be defined in dotcom-rendering\n */\ninterface ConfigType extends CommercialConfigType {\n\tajaxUrl: string;\n\tsentryPublicApiKey: string;\n\tsentryHost: string;\n\tdcrSentryDsn: string;\n\tswitches: { [key: string]: boolean };\n\tabTests: ServerSideTests;\n\tdfpAccountId: string;\n\tcommercialBundleUrl: string;\n\trevisionNumber: string;\n\tshortUrlId: string;\n\tisDev?: boolean;\n\tgoogletagUrl: string;\n\tstage: string;\n\tfrontendAssetsFullURL: string;\n\tadUnit: string;\n\tisSensitive: boolean;\n\tvideoDuration?: number;\n\tedition: string;\n\tsection: string;\n\n\tsharedAdTargeting: { [key: string]: any };\n\tisPaidContent?: boolean;\n\tkeywordIds: string;\n\tshowRelatedContent: boolean;\n\tshouldHideReaderRevenue?: boolean;\n\tidApiUrl: string;\n\tdiscussionApiUrl: string;\n\tdiscussionD2Uid: string;\n\tdiscussionApiClientHeader: string;\n\tisPhotoEssay?: boolean;\n\treferences?: { [key: string]: string }[];\n\thost?: string;\n\tidUrl?: string;\n\tmmaUrl?: string;\n\tbrazeApiKey?: string;\n\tipsosTag?: string;\n\tisLiveBlog?: boolean;\n\tisLive?: boolean;\n\tisPreview?: boolean;\n}\n\ninterface GADataType {\n\tpillar: LegacyPillar;\n\twebTitle: string;\n\tsection: string;\n\tcontentType: string;\n\tcommissioningDesks: string;\n\tcontentId: string;\n\tauthorIds: string;\n\tkeywordIds: string;\n\ttoneIds: string;\n\tseriesId: string;\n\tisHosted: string;\n\tedition: Edition;\n\tbeaconUrl: string;\n}\n\n// ----------------- //\n// General DataTypes //\n// ----------------- //\n\ninterface DCRServerDocumentData {\n\tpage: string;\n\tsite: string;\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tGA: GADataType;\n\tlinkedData: { [key: string]: any };\n}\n\ninterface BaseTrailType {\n\turl: string;\n\theadline: string;\n\twebPublicationDate?: string;\n\timage?: string;\n\tavatarUrl?: string;\n\tmediaType?: MediaType;\n\tmediaDuration?: number;\n\tageWarning?: string;\n\tbyline?: string;\n\tshowByline?: boolean;\n\tkickerText?: string;\n\tshortUrl?: string;\n\tcommentCount?: number;\n\tstarRating?: number;\n\tlinkText?: string;\n\tbranding?: Branding;\n}\ninterface TrailType extends BaseTrailType {\n\tpalette?: never;\n\tformat: ArticleFormat;\n\tsupportingContent?: DCRSupportingContent[];\n\ttrailText?: string;\n\t/** @see JSX.IntrinsicAttributes[\"data-link-name\"] */\n\tdataLinkName: string;\n}\n\ninterface CAPITrailType extends BaseTrailType {\n\tformat: CAPIFormat;\n\t// Include pillar and designType until we remove them upstream\n\t// We type designType as `string` for now so that the field is present,\n\t// but we don't care what's in it. Pillar we have a type for so we use it\n\t// but it shouldn't be important.\n\tdesignType: string;\n\tpillar: LegacyPillar;\n}\n\ninterface TrailTabType {\n\theading: string;\n\ttrails: TrailType[];\n}\n\ninterface CAPITrailTabType {\n\theading: string;\n\ttrails: CAPITrailType[];\n}\n\ninterface MostViewedFooterPayloadType {\n\ttabs: CAPITrailTabType[];\n\tmostCommented: CAPITrailType;\n\tmostShared: CAPITrailType;\n}\n\n// ------------\n// Liveblogs //\n// ------------\ntype LiveUpdateType = {\n\tnumNewBlocks: number;\n\thtml: string;\n\tmostRecentBlockId: string;\n};\n\n// ------------\n// RichLinks //\n// ------------\ntype RichLinkCardType =\n\t| 'special-report'\n\t| 'live'\n\t| 'dead'\n\t| 'feature'\n\t| 'editorial'\n\t| 'comment'\n\t| 'podcast'\n\t| 'media'\n\t| 'analysis'\n\t| 'review'\n\t| 'letters'\n\t| 'external'\n\t| 'news';\n\n// ----------\n// AdSlots //\n// ----------\ntype AdSlotType =\n\t| 'right'\n\t| 'top-above-nav'\n\t| 'mostpop'\n\t| 'merchandising-high'\n\t| 'merchandising'\n\t| 'comments'\n\t| 'survey';\n\n// ------------------------------\n// 3rd party type declarations //\n// ------------------------------\n\ndeclare module 'compose-function' {\n\tconst compose: any;\n\t// eslint-disable-next-line import/no-default-export -- TODO: use type definition @types/compose-function\n\texport default compose;\n}\ndeclare module 'minify-css-string' {\n\tconst minifyCSSString: any;\n\t// eslint-disable-next-line import/no-default-export -- it’s that 6yo module works\n\texport default minifyCSSString;\n}\ndeclare module 'chromatic/isChromatic';\n\ndeclare module 'dynamic-import-polyfill' {\n\texport const initialize: any;\n}\n\n// ------------------------------------- //\n// AMP types                             //\n// ------------------------------------- //\n\ndeclare namespace JSX {\n\tinterface IntrinsicElements {\n\t\t'amp-state': any;\n\t\t'amp-form': any;\n\t\t'amp-experiment': any;\n\t\t'amp-sidebar': any;\n\t\t'amp-accordion': any;\n\t\t'amp-img': any;\n\t\t'amp-twitter': any;\n\t\t'amp-list': any;\n\t\t'amp-vimeo': any;\n\t\t'amp-facebook': any;\n\t\t'amp-video': any;\n\t\t'amp-instagram': any;\n\t\t'amp-soundcloud': any;\n\t\t'amp-iframe': any;\n\t\t'amp-analytics': any;\n\t\t'amp-pixel': any;\n\t\t'amp-ad': any;\n\t\t'amp-sticky-ad': any;\n\t\t'amp-youtube': any;\n\t\t'amp-geo': any;\n\t\t'amp-consent': any;\n\t\t'amp-live-list': any;\n\t\t'amp-audio': any;\n\t\t'amp-embed': any;\n\t}\n}\n\n// SVG handling\ndeclare module '*.svg' {\n\tconst content: any;\n\t// eslint-disable-next-line import/no-default-export -- This is how we import SVGs\n\texport default content;\n}\n\n// Extend PerformanceEntry from lib.dom.ts with current 'In Draft' properties (to allow access as use in browsers that support)\n// lib.dom.ts: https://microsoft.github.io/PowerBI-JavaScript/interfaces/_node_modules_typedoc_node_modules_typescript_lib_lib_dom_d_.performanceentry.html\n// Draft: https://wicg.github.io/element-timing/#sec-performance-element-timing\ninterface PerformanceEntry {\n\tloadTime: number;\n\trenderTime: number;\n}\n\ndeclare namespace JSX {\n\tinterface IntrinsicElements {\n\t\t'gu-island': {\n\t\t\tname: string;\n\t\t\tdeferUntil?: 'idle' | 'visible';\n\t\t\tclientOnly?: boolean;\n\t\t\tprops: any;\n\t\t\tchildren: React.ReactNode;\n\t\t};\n\t}\n\n\tinterface IntrinsicAttributes {\n\t\t/**\n\t\t * **Rendered Components – Ophan**\n\t\t *\n\t\t * The Ophan client automatically tracks components on the page\n\t\t * that have the `data-component` attribute.\n\t\t * To avoid race conditions, it is best to add this attribute only\n\t\t * to server-rendered HTML.\n\t\t *\n\t\t * Add `data-component=\"component-name\"` to the element you want\n\t\t * to track.\n\t\t *\n\t\t * The page views table will then contain `component-name` when the\n\t\t * element is present on the page.\n\t\t */\n\t\t'data-component'?: string;\n\t\t/**\n\t\t * **Component Clicks – Ophan**\n\t\t *\n\t\t * The Ophan client automatically tracks click interactions\n\t\t * on components that have the `data-link-name` attribute.\n\t\t * To avoid race conditions, it is best to add this attribute only\n\t\t * to server-rendered HTML.\n\t\t *\n\t\t * Add `data-component=\"component-name\"` to the element you want\n\t\t * to track. Then `add data-link-name=\"link-name\"` to the anchor for which\n\t\t * clicks will be tracked.\n\t\t *\n\t\t * The page views table will then contain `link-name` when the\n\t\t * link is clicked.\n\t\t */\n\t\t'data-link-name'?: string;\n\t}\n}\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/scripts/jest/setup.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":38,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":38,"endColumn":16},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":67,"column":1,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":67,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// add some helpful assertions\nimport 'jest-dom/extend-expect';\n\nimport type { WindowGuardianConfig } from '../../src/model/window-guardian';\n\nconst windowGuardianConfig = {\n\tpage: {\n\t\tsentryPublicApiKey: '344003a8d11c41d8800fbad8383fdc50',\n\t\tsentryHost: 'app.getsentry.com/35463',\n\t\tdcrSentryDsn:\n\t\t\t'https://1937ab71c8804b2b8438178dfdd6468f@sentry.io/1377847',\n\t},\n\tophan: {\n\t\tbrowserId: 'jest-browser-id',\n\t\tpageViewId: 'jest-page-view-id',\n\t},\n} as WindowGuardianConfig;\n\nconst windowGuardian = {\n\tapp: {\n\t\tdata: {},\n\t},\n\tconfig: windowGuardianConfig,\n\tmustardCut: false,\n\tpolyfilled: false,\n\tonPolyfilled: () => undefined,\n\tqueue: [],\n\tophan: {\n\t\tsetEventEmitter: () => null,\n\t\ttrackComponentAttention: () => null,\n\t\trecord: () => null,\n\t\tviewId: '',\n\t\tpageViewId: '',\n\t},\n\tmodules: {\n\t\tsentry: {\n\t\t\treportError: (error: Error): void => {\n\t\t\t\tconsole.log(\n\t\t\t\t\t`Error: attempting to log error without having registered sentry.\\nError is: ${error.message}`,\n\t\t\t\t);\n\t\t\t},\n\t\t},\n\t},\n\tfunctions: {\n\t\timport: (url: string) => import(url),\n\t},\n\tautomat: {\n\t\treact: undefined,\n\t\tpreact: undefined,\n\t\temotion: undefined,\n\t\temotionCore: undefined,\n\t\temotionTheming: undefined,\n\t},\n\treaderRevenue: {\n\t\tchangeGeolocation: () => {},\n\t\tshowMeTheEpic: () => {},\n\t\tshowMeTheBanner: () => {},\n\t\tshowNextVariant: () => {},\n\t\tshowPreviousVariant: () => {},\n\t},\n\tgaPath: '/assets/ga.js',\n};\n\n// Stub global Guardian object\n// We should never be able to directly set things to the global window object.\n// But in this case we want to stub things for testing, so it's ok to ignore this rule\n// @ts-expect-error\nwindow.guardian = windowGuardian;\n\n// Mock Local Storage\n// See: https://github.com/facebook/jest/issues/2098#issuecomment-260733457\n\nconst localStorageMock = (function () {\n\tlet store: {\n\t\t[key: string]: string;\n\t} = {};\n\treturn {\n\t\tgetItem(key: string) {\n\t\t\treturn store[key] || null;\n\t\t},\n\t\tsetItem(key: string, value: string) {\n\t\t\tstore[key] = value.toString();\n\t\t},\n\t\tremoveItem(key: string) {\n\t\t\tdelete store[key];\n\t\t},\n\t\tclear() {\n\t\t\tstore = {};\n\t\t},\n\t};\n})();\n\nObject.defineProperty(window, 'localStorage', {\n\tvalue: localStorageMock,\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/scripts/webpack/@types/fs/index.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/scripts/webpack/@types/webpack-filter-warnings-plugin/index.d.ts","messages":[],"suppressedMessages":[{"ruleId":"import/no-default-export","severity":2,"message":"Prefer named exports.","line":5,"column":9,"nodeType":"ExportDefaultDeclaration","endLine":5,"endColumn":16,"suppressions":[{"kind":"directive","justification":"this is how the module exports"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/scripts/webpack/@types/webpack-messages/index.d.ts","messages":[],"suppressedMessages":[{"ruleId":"import/no-default-export","severity":2,"message":"Prefer named exports.","line":19,"column":9,"nodeType":"ExportDefaultDeclaration","endLine":19,"endColumn":16,"suppressions":[{"kind":"directive","justification":"it is how the module is exported"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/AMPAttributes.ts","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":1,"column":0,"nodeType":null,"endLine":1,"endColumn":62}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'_' is defined but never used.","line":2,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":9,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport _ from 'react';\n\n// Provides type definition for AMP attributes on React/JSX elements.\n\n// Note, we cannot declare this in the global type definitions because it is not\n// possible to merge modules this way (only override them).\ndeclare module 'react' {\n\tinterface HTMLAttributes<T> extends DOMAttributes<T> {\n\t\ton?: string;\n\t\toverflow?: string;\n\t\tfallback?: '';\n\t\tupdate?: '';\n\t\titems?: '';\n\t}\n}\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Ad.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":141,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":150,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { adJson, stringify } from '../lib/ad-json';\nimport type { RTCParameters } from '../lib/real-time-config';\nimport { realTimeConfig } from '../lib/real-time-config';\nimport { useContentABTestGroup } from './ContentABTest';\n\n// Largest size first\nconst inlineSizes = [\n\t{ width: 320, height: 480 }, // Picnic story\n\t{ width: 300, height: 250 }, // MPU\n\t{ width: 250, height: 250 }, // Square\n];\n\n// Note: amp-sticky-ad has max height of 100\nconst stickySizes = [{ width: 320, height: 50 }]; // Mobile Leaderboard\n\nconst dfpAdUnitRoot = 'theguardian.com';\n\nconst ampData = (section: string, contentType: string): string => {\n\tconst dfpAccountId = '59666047';\n\n\tif (section !== '') {\n\t\treturn `/${dfpAccountId}/${dfpAdUnitRoot}/${section}/${contentType.toLowerCase()}/amp`;\n\t}\n\n\treturn `/${dfpAccountId}/${dfpAdUnitRoot}/amp`;\n};\n\nconst relevantYieldURLPrefix = 'https://pbs.relevant-digital.com/openrtb2/amp';\n\nconst mapAdTargeting = (adTargeting: AdTargeting): AdTargetParam[] => {\n\tconst adTargetingMapped: AdTargetParam[] = [];\n\n\tif (!adTargeting.disableAds) {\n\t\tadTargetingMapped.push({\n\t\t\tname: 'sens',\n\t\t\tvalue: adTargeting.customParams.sens,\n\t\t});\n\n\t\tadTargetingMapped.push({\n\t\t\tname: 'urlkw',\n\t\t\tvalue: adTargeting.customParams.urlkw,\n\t\t});\n\t}\n\n\treturn adTargetingMapped;\n};\n\n// Variants for the Prebid server test\n// Assign each variant 4 groups e.g. 33.3% of content types each\nconst variants = {\n\t'relevant-yield': new Set([0, 1, 4, 5, 6, 7]),\n\tpubmatic: new Set([2, 3, 8, 9, 10, 11]),\n};\n\n// Determine participation in a variant from group\nconst isInVariant = (\n\tvariantName: 'relevant-yield' | 'pubmatic',\n\tgroup: number | undefined,\n) => group !== undefined && variants[variantName].has(group);\n\nconst useRealTimeConfig = (\n\tusePrebid: boolean,\n\tusePermutive: boolean,\n\tuseAmazon: boolean,\n\t{ tagId, profileId, pubId }: RTCParameters,\n): string => {\n\tconst { group } = useContentABTestGroup();\n\n\t// Relevant Yield variant\n\tif (isInVariant('relevant-yield', group)) {\n\t\tconst relevantYieldURL = [\n\t\t\t`${relevantYieldURLPrefix}?tag_id=${tagId}`,\n\t\t\t'w=ATTR(width)',\n\t\t\t'h=ATTR(height)',\n\t\t\t'ow=ATTR(data-override-width)',\n\t\t\t'oh=ATTR(data-override-height)',\n\t\t\t'ms=ATTR(data-multi-size)',\n\t\t\t'slot=ATTR(data-slot)',\n\t\t\t'targeting=TGT',\n\t\t\t'curl=CANONICAL_URL',\n\t\t\t'timeout=TIMEOUT',\n\t\t\t'adcid=ADCID',\n\t\t\t'purl=HREF',\n\t\t\t'gdpr_consent=CONSENT_STRING',\n\t\t\t'tgt_pfx=rv',\n\t\t\t'dummy_param=ATTR(data-amp-slot-index)',\n\t\t].join('&');\n\n\t\treturn realTimeConfig({\n\t\t\turl: usePrebid ? relevantYieldURL : undefined,\n\t\t\tusePermutive,\n\t\t\tuseAmazon,\n\t\t});\n\t}\n\n\t// Pubmatic variant\n\tif (isInVariant('pubmatic', group)) {\n\t\tconst pubmaticConfig = {\n\t\t\topenwrap: {\n\t\t\t\tPROFILE_ID: profileId,\n\t\t\t\tPUB_ID: pubId,\n\t\t\t},\n\t\t};\n\n\t\treturn realTimeConfig({\n\t\t\tvendors: usePrebid ? pubmaticConfig : {},\n\t\t\tusePermutive,\n\t\t\tuseAmazon,\n\t\t\ttimeoutMillis: 1000,\n\t\t});\n\t}\n\n\t// Not in test - dont't run Prebid\n\n\treturn realTimeConfig({\n\t\tusePermutive,\n\t\tuseAmazon,\n\t});\n};\n\ninterface CommercialConfig {\n\tusePrebid: boolean;\n\tusePermutive: boolean;\n\tuseAmazon: boolean;\n}\n\nexport interface BaseAdProps {\n\tedition: Edition;\n\tsection: string;\n\tcontentType: string;\n\tcommercialProperties: CommercialProperties;\n\tadTargeting: AdTargeting;\n\tconfig: CommercialConfig;\n}\n\ninterface AdProps extends BaseAdProps {\n\tisSticky?: boolean;\n\trtcParameters: RTCParameters;\n}\n\nexport const Ad = ({\n\tisSticky = false,\n\tedition,\n\tsection,\n\tcontentType,\n\tcommercialProperties,\n\tadTargeting,\n\tconfig: { useAmazon, usePrebid, usePermutive },\n\trtcParameters,\n}: AdProps) => {\n\tconst adSizes = isSticky ? stickySizes : inlineSizes;\n\t// Set Primary ad size as first element (should be the largest)\n\tconst [{ width, height }] = adSizes;\n\t// Secondary ad sizes\n\tconst multiSizes = adSizes.map((e) => `${e.width}x${e.height}`).join(',');\n\n\tconst rtcConfig = useRealTimeConfig(\n\t\tusePrebid,\n\t\tusePermutive,\n\t\tuseAmazon,\n\t\trtcParameters,\n\t);\n\n\treturn (\n\t\t<amp-ad\n\t\t\tdata-block-on-consent=\"\"\n\t\t\t// Primary ad size width and height\n\t\t\twidth={width}\n\t\t\theight={height}\n\t\t\t// Secondary ad sizes\n\t\t\tdata-multi-size={multiSizes}\n\t\t\t// Setting data-multi-size-validation to false allows\n\t\t\t// secondary ad sizes that are less than 2/3rds of the\n\t\t\t// corresponding primary size.\n\t\t\tdata-multi-size-validation=\"false\"\n\t\t\tdata-npa-on-unknown-consent={true}\n\t\t\tdata-loading-strategy=\"prefer-viewability-over-views\"\n\t\t\tlayout=\"fixed\"\n\t\t\ttype=\"doubleclick\"\n\t\t\tjson={stringify(\n\t\t\t\tadJson([\n\t\t\t\t\t...commercialProperties[edition].adTargeting,\n\t\t\t\t\t...mapAdTargeting(adTargeting),\n\t\t\t\t]),\n\t\t\t)}\n\t\t\tdata-slot={ampData(section, contentType)}\n\t\t\trtc-config={rtcConfig}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/AdConsent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/AmpExperiment.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":11,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":13,"endColumn":7}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport type { AmpExperiments } from '../server/ampExperimentCache';\n\nexport const AmpExperimentComponent: React.FC<{\n\texperimentsData?: AmpExperiments;\n}> = ({ experimentsData }) => {\n\treturn (\n\t\t<amp-experiment>\n\t\t\t<script\n\t\t\t\ttype=\"application/json\"\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: JSON.stringify(experimentsData),\n\t\t\t\t}}\n\t\t\t/>\n\t\t</amp-experiment>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Analytics.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":58,"column":40,"nodeType":"Identifier","messageId":"invalidType","endLine":58,"endColumn":47},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":85,"column":39,"nodeType":"Identifier","messageId":"invalidType","endLine":85,"endColumn":46},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":111,"column":14,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":111,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport type { PermutivePayload } from '../lib/permutive';\n\nexport interface AnalyticsModel {\n\tgaTracker: string;\n\ttitle: string;\n\tfbPixelaccount: string;\n\tcomscoreID: string;\n\tsection?: string;\n\tcontentType: string;\n\tid: string;\n\tneilsenAPIID: string;\n\tdomain: string;\n\tpermutive: {\n\t\tnamespace: string;\n\t\tapiKey: string;\n\t\tpayload: PermutivePayload;\n\t};\n\tipsosSectionName: string;\n}\n\nexport const Analytics: React.FC<{\n\tanalytics: AnalyticsModel;\n}> = ({\n\tanalytics: {\n\t\tgaTracker,\n\t\tfbPixelaccount,\n\t\tcomscoreID,\n\t\ttitle,\n\t\tsection,\n\t\tcontentType,\n\t\tid,\n\t\tneilsenAPIID,\n\t\tdomain,\n\t\tpermutive,\n\t\tipsosSectionName,\n\t},\n}) => {\n\tconst scripts: string[] = [\n\t\t`<amp-pixel data-block-on-consent src=\"//www.facebook.com/tr?id=${fbPixelaccount}&ev=PageView&noscript=1\"></amp-pixel>`,\n\t\t`<amp-analytics config=\"https://ophan.theguardian.com/amp.json\" data-credentials=\"include\" ></amp-analytics>`,\n\t\t`<amp-analytics data-block-on-consent type=\"googleanalytics\" id=\"google-analytics\">\n             <script type=\"application/json\">\n               {\n                 \"requests\": {\n                   \"pageviewWithCustomDims\": \"\\${pageview}&cd3=\\${platform}&cd4=\\${sectionId}&cd5=\\${contentType}&cd6=\\${commissioningDesks}&cd7=\\${contentId}&cd8=\\${contributorIds}&cd9=\\${keywordIds}&cd10=\\${toneIds}&cd11=\\${seriesId}&cd26=\\${isHostedFlag}&cd29=\\${fullRequestUrl}&cd43=\\${experience}\"\n                 },\n                 \"vars\": {\n                   \"account\": \"${gaTracker}\"\n                 },\n                 \"triggers\": {\n                   \"trackPageview\": {\n                     \"on\": \"visible\",\n                     \"request\": \"pageviewWithCustomDims\",\n                     \"vars\": {\n                       \"title\": \"${title}\",\n                       \"platform\": \"AMP\",\n                       \"sectionId\": \"${section}\",\n                       \"contentType\": \"${contentType}\",\n                       \"contentId\": \"${id}\",\n                       \"isHostedFlag\": \"true\",\n                       \"fullRequestUrl\": \"${domain}/${id}\",\n                       \"experience\": \"dotcom-rendering\"\n                     }\n                   }\n                 }\n               }\n               </script>\n            </amp-analytics>`,\n\t\t`<amp-analytics data-block-on-consent id=\"comscore\" type=\"comscore\">\n            <script type=\"application/json\">\n                {\n                    \"vars\": {\"c2\": \"${comscoreID}\"},\n                    \"extraUrlParams\": {\"comscorekw\": \"amp\"}\n                }\n            </script>\n        </amp-analytics>`,\n\t\t`<amp-analytics type=\"nielsen\">\n             <script type=\"application/json\">\n                {\n                    \"vars\": {\n                        \"apid\": \"${neilsenAPIID}\",\n                        \"apv\": \"1.0\",\n                        \"apn\": \"The Guardian\",\n                        \"section\": \"${section}\",\n                        \"segC\": \"Guardian - Google AMP\"\n                    }\n                }\n            </script>\n        </amp-analytics>`,\n\t\t`<amp-analytics data-block-on-consent type=\"permutive\">\n            <script type=\"application/json\">\n                {\n                    \"vars\": {\n                        \"namespace\": \"${permutive.namespace}\",\n                        \"key\": \"${permutive.apiKey}\"\n                    },\n                    \"extraUrlParams\": ${JSON.stringify(permutive.payload)}\n                }\n            </script>\n        </amp-analytics>`,\n\t\t`<amp-analytics data-block-on-consent config=\"https://uk-script.dotmetrics.net/AmpConfig.json?dom=www.theguardian.com&tag=${ipsosSectionName}\">\n            <script type=\"application/json\">\n                {\n                    \"enabled\": \"$EQUALS(\\${ampGeo(ISOCountry)}, gb)\"\n                }\n            </script>\n        </amp-analytics>`,\n\t];\n\n\treturn <div dangerouslySetInnerHTML={{ __html: scripts.join('\\n') }} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/AnalyticsIframe.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Blocks.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":151,"column":27,"nodeType":"Punctuator","messageId":"preferNullish","endLine":151,"endColumn":29,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3569,3571],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { neutral, text, textSans } from '@guardian/source-foundations';\nimport React from 'react';\nimport { pillarPalette_DO_NOT_USE } from '../../lib/pillars';\nimport { blockLink } from '../lib/block-link';\nimport { findBlockAdSlots } from '../lib/find-adslots';\nimport { Elements } from './Elements';\nimport { RegionalAd } from './RegionalAd';\n\nconst adStyle = css`\n\tbackground: ${neutral[93]};\n\tborder-top: 1px solid ${neutral[86]};\n\twidth: min-content;\n\theight: min-content;\n\tclear: both;\n\ttext-align: center;\n\tmargin: 0 auto 12px;\n\n\t:before {\n\t\tcontent: 'Advertisement';\n\t\tdisplay: block;\n\t\t${textSans.xxsmall()};\n\t\t/* Adverts specifcally don't use the GU font branding. */\n\t\t/* stylelint-disable-next-line property-disallowed-list */\n\t\tfont-family: 'Helvetica Neue', Helvetica, Arial, 'Lucida Grande',\n\t\t\tsans-serif;\n\t\tpadding: 3px 10px;\n\t\tcolor: ${text.supporting};\n\t\ttext-align: right;\n\t}\n`;\n\nconst blockStyle = (pillar: ArticleTheme) => css`\n\tpadding: 6px 10px 12px;\n\tbackground-color: ${neutral[100]};\n\tborder-top: 1px solid ${pillarPalette_DO_NOT_USE[pillar].dark};\n\tborder-bottom: 1px solid ${neutral[93]};\n\tmargin-bottom: 12px;\n`;\n\nconst firstPublishedStyle = css`\n\tcolor: ${neutral[7]};\n\tmargin-bottom: 10px;\n\ttext-decoration: none;\n\tfont-weight: bold;\n\t${textSans.xxsmall()};\n`;\n\nconst lastUpdatedStyle = css`\n\t${textSans.xxsmall()};\n\tcolor: ${neutral[60]};\n\ttext-align: right;\n\tpadding-right: 15px;\n`;\n\nconst clearBoth = css`\n\tclear: both;\n`;\n\n// TODO ad handling (currently done in elements, which is wrong, so let's lift\n// that out and have an Ad element type we match against\nexport const Blocks: React.FunctionComponent<{\n\tblocks: Block[];\n\tpillar: ArticleTheme;\n\tedition: Edition;\n\tsection?: string;\n\tcontentType: string;\n\tswitches: Switches;\n\tcommercialProperties: CommercialProperties;\n\turl: string;\n\tshouldHideAds: boolean;\n\tadTargeting: AdTargeting;\n}> = ({\n\tblocks,\n\tpillar,\n\tedition,\n\tsection,\n\tcontentType,\n\tswitches,\n\tcommercialProperties,\n\turl,\n\tshouldHideAds,\n\tadTargeting,\n}) => {\n\t// TODO add last updated for blocks to show here\n\tconst liveBlogBlocks = blocks.map((block) => {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tid={block.id}\n\t\t\t\tdata-sort-time={block.blockFirstPublished}\n\t\t\t\tkey={block.id}\n\t\t\t\tcss={blockStyle(pillar)}\n\t\t\t>\n\t\t\t\t{block.blockFirstPublishedDisplay && (\n\t\t\t\t\t<a\n\t\t\t\t\t\tcss={firstPublishedStyle}\n\t\t\t\t\t\thref={blockLink(url, block.id)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{block.blockFirstPublishedDisplay}\n\t\t\t\t\t</a>\n\t\t\t\t)}\n\t\t\t\t{block.title && <h2>{block.title}</h2>}\n\t\t\t\t{Elements(block.elements, pillar, false)}\n\t\t\t\t{/* Some elements float (e.g. rich links) */}\n\t\t\t\t<div css={clearBoth} />{' '}\n\t\t\t\t{block.blockLastUpdatedDisplay && (\n\t\t\t\t\t<div css={lastUpdatedStyle}>\n\t\t\t\t\t\tUpdated at {block.blockLastUpdatedDisplay}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t});\n\n\tif (shouldHideAds) {\n\t\treturn <>{liveBlogBlocks}</>;\n\t}\n\n\tconst slotIndexes = findBlockAdSlots(liveBlogBlocks);\n\tconst adInfo = {\n\t\tsection,\n\t\tedition,\n\t\tcontentType,\n\t\tcommercialProperties,\n\t\tswitches: {\n\t\t\tampPrebid: switches.ampPrebid,\n\t\t\tpermutive: switches.permutive,\n\t\t\tampAmazon: switches.ampAmazon,\n\t\t},\n\t};\n\n\tconst adConfig = {\n\t\tusePrebid: adInfo.switches.ampPrebid,\n\t\tusePermutive: adInfo.switches.permutive,\n\t\tuseAmazon: adInfo.switches.ampAmazon,\n\t};\n\treturn (\n\t\t<>\n\t\t\t{liveBlogBlocks.map((item, i) => {\n\t\t\t\tif (slotIndexes.includes(i)) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tid={`ad-${i + 1}`}\n\t\t\t\t\t\t\t\tdata-sort-time=\"1\"\n\t\t\t\t\t\t\t\tcss={adStyle}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RegionalAd\n\t\t\t\t\t\t\t\t\tedition={edition}\n\t\t\t\t\t\t\t\t\tsection={section || ''}\n\t\t\t\t\t\t\t\t\tcontentType={contentType}\n\t\t\t\t\t\t\t\t\tconfig={adConfig}\n\t\t\t\t\t\t\t\t\tcommercialProperties={commercialProperties}\n\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn item;\n\t\t\t})}\n\t\t\t<div\n\t\t\t\tid=\"clean-blocks\"\n\t\t\t\tdata-sort-time=\"1\"\n\t\t\t\tcss={css`\n\t\t\t\t\tclear: both;\n\t\t\t\t`}\n\t\t\t/>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/BodyArticle.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":155,"column":36,"nodeType":"Punctuator","messageId":"preferNullish","endLine":155,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3904,3906],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":198,"column":31,"nodeType":"Punctuator","messageId":"preferNullish","endLine":198,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4641,4643],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign as Design,\n\tArticleSpecial as Special,\n} from '@guardian/libs';\nimport {\n\tneutral,\n\topinion,\n\ttext,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { pillarPalette_DO_NOT_USE } from '../../lib/pillars';\nimport { getSharingUrls } from '../../lib/sharing-urls';\nimport { decideDesign } from '../../web/lib/decideDesign';\nimport { decideTheme } from '../../web/lib/decideTheme';\nimport { findAdSlots } from '../lib/find-adslots';\nimport type { ArticleModel } from '../types/ArticleModel';\nimport { Elements } from './Elements';\nimport { Epic } from './Epic';\nimport { RegionalAd } from './RegionalAd';\nimport { StickyAd } from './StickyAd';\nimport { SubMeta } from './SubMeta';\nimport { TopMeta } from './topMeta/TopMeta';\n\nconst innerContainerStyles = css`\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n`;\n\nconst bulletStyle = (pillar: ArticleTheme) => css`\n\t.bullet {\n\t\tcolor: transparent;\n\t\tfont-size: 1px;\n\t}\n\n\t.bullet:before {\n\t\tdisplay: inline-block;\n\t\tcontent: '';\n\t\tborder-radius: 6px;\n\t\theight: 12px;\n\t\twidth: 12px;\n\t\tmargin-right: 2px;\n\t\tbackground-color: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\tmargin-left: 0px;\n\t}\n`;\n\nconst decideBackground = (design: Design, pillar: ArticleTheme): string => {\n\tif (pillar === Special.Labs) return neutral[86];\n\tswitch (design) {\n\t\tcase Design.Comment:\n\t\tcase Design.Letter:\n\t\t\treturn opinion[800];\n\t\tdefault:\n\t\t\treturn neutral[100];\n\t}\n};\n\nconst body = (pillar: ArticlePillar, design: Design) => {\n\treturn css`\n\t\tbackground-color: ${decideBackground(design, pillar)};\n\t\t${bulletStyle(pillar)}\n\t`;\n};\n\nconst adStyle = css`\n\tfloat: right;\n\tbackground: ${neutral[93]};\n\tborder-top: 1px solid ${neutral[86]};\n\twidth: min-content;\n\theight: min-content;\n\tclear: both;\n\ttext-align: center;\n\tmargin: 4px 0 12px 20px;\n\n\t:before {\n\t\tcontent: 'Advertisement';\n\t\tdisplay: block;\n\t\t${textSans.xxsmall()};\n\t\t/* Adverts specifcally don't use the GU font branding. */\n\t\t/* stylelint-disable-next-line property-disallowed-list */\n\t\tfont-family: 'Helvetica Neue', Helvetica, Arial, 'Lucida Grande',\n\t\t\tsans-serif;\n\t\tpadding: 3px 10px;\n\t\tcolor: ${text.supporting};\n\t\ttext-align: right;\n\t}\n\n\t${until.phablet} {\n\t\tfloat: none;\n\t\tmargin: 0 auto 12px;\n\t}\n`;\n\nexport const Body: React.FC<{\n\tdata: ArticleModel;\n\tconfig: ConfigType;\n}> = ({ data, config }) => {\n\tconst capiElements = data.blocks[0] ? data.blocks[0].elements : [];\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: data.isAdFreeUser,\n\t\tisSensitive: config.isSensitive,\n\t\tvideoDuration: config.videoDuration,\n\t\tedition: config.edition,\n\t\tsection: config.section,\n\t\tsharedAdTargeting: config.sharedAdTargeting,\n\t\tadUnit: config.adUnit,\n\t});\n\tconst design = decideDesign(data.format);\n\tconst pillar = decideTheme(data.format);\n\tconst elementsWithoutAds = Elements(\n\t\tcapiElements,\n\t\tpillar,\n\t\tdata.isImmersive,\n\t\tadTargeting,\n\t);\n\tconst slotIndexes = findAdSlots(capiElements);\n\tconst adInfo = {\n\t\tadUnit: config.adUnit,\n\t\tsection: data.sectionName,\n\t\tedition: data.editionId,\n\t\tcontentType: data.contentType,\n\t\tcommercialProperties: data.commercialProperties,\n\t\tswitches: {\n\t\t\tampPrebid: config.switches.ampPrebid,\n\t\t\tpermutive: config.switches.permutive,\n\t\t\tampAmazon: config.switches.ampAmazon,\n\t\t},\n\t};\n\n\tconst adConfig = {\n\t\tusePrebid: adInfo.switches.ampPrebid,\n\t\tusePermutive: adInfo.switches.permutive,\n\t\tuseAmazon: adInfo.switches.ampAmazon,\n\t};\n\tconst elements = data.shouldHideAds ? (\n\t\t<>{elementsWithoutAds}</>\n\t) : (\n\t\t<>\n\t\t\t{elementsWithoutAds.map((item, i) => {\n\t\t\t\tif (slotIndexes.includes(i)) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tid={`ad-${i + 1}`}\n\t\t\t\t\t\t\t\tdata-sort-time=\"1\"\n\t\t\t\t\t\t\t\tcss={adStyle}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RegionalAd\n\t\t\t\t\t\t\t\t\tedition={data.editionId}\n\t\t\t\t\t\t\t\t\tsection={data.sectionName || ''}\n\t\t\t\t\t\t\t\t\tcontentType={adInfo.contentType}\n\t\t\t\t\t\t\t\t\tconfig={adConfig}\n\t\t\t\t\t\t\t\t\tcommercialProperties={\n\t\t\t\t\t\t\t\t\t\tadInfo.commercialProperties\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn item;\n\t\t\t})}\n\t\t\t<div\n\t\t\t\tid=\"clean-blocks\"\n\t\t\t\tdata-sort-time=\"1\"\n\t\t\t\tcss={css`\n\t\t\t\t\tclear: both;\n\t\t\t\t`}\n\t\t\t/>\n\t\t</>\n\t);\n\n\tconst epic = data.shouldHideReaderRevenue ? null : (\n\t\t<Epic webURL={data.webURL} />\n\t);\n\n\treturn (\n\t\t<div css={[body(pillar, design), innerContainerStyles]}>\n\t\t\t<TopMeta\n\t\t\t\tdata={data}\n\t\t\t\tdesign={design}\n\t\t\t\tpillar={pillar}\n\t\t\t\tadTargeting={adTargeting}\n\t\t\t/>\n\n\t\t\t{elements}\n\n\t\t\t{epic}\n\n\t\t\t<StickyAd\n\t\t\t\tedition={data.editionId}\n\t\t\t\tsection={data.sectionName || ''}\n\t\t\t\tcontentType={adInfo.contentType}\n\t\t\t\tconfig={adConfig}\n\t\t\t\tcommercialProperties={adInfo.commercialProperties}\n\t\t\t\tadTargeting={adTargeting}\n\t\t\t/>\n\n\t\t\t<SubMeta\n\t\t\t\tsections={data.subMetaSectionLinks}\n\t\t\t\tkeywords={data.subMetaKeywordLinks}\n\t\t\t\tpillar={pillar}\n\t\t\t\tsharingURLs={getSharingUrls(data.pageId, data.webTitle)}\n\t\t\t\tpageID={data.pageId}\n\t\t\t\tisCommentable={data.isCommentable}\n\t\t\t\tguardianBaseURL={data.guardianBaseURL}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/BodyLiveblog.tsx","messages":[{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":114,"column":6,"nodeType":"JSXElement","messageId":"missingType","endLine":117,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\theadline,\n\tneutral,\n\tnews,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { getSharingUrls } from '../../lib/sharing-urls';\nimport RefreshIcon from '../../static/icons/refresh.svg';\nimport { decideTheme } from '../../web/lib/decideTheme';\nimport type { ArticleModel } from '../types/ArticleModel';\nimport { Blocks } from './Blocks';\nimport { KeyEvents } from './KeyEvents';\nimport { Pagination } from './Pagination';\nimport { SubMeta } from './SubMeta';\nimport { TopMetaLiveblog } from './topMeta/TopMetaLiveblog';\n\n// TODO check if liveblog background colours are more complex - like regular\n// article is\n\nconst innerContainerStyles = css`\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n`;\n\nconst bodyStyle = css`\n\tbackground-color: ${neutral[97]};\n\n\th2 {\n\t\t${headline.xxsmall()};\n\t\tfont-weight: 500;\n\t\tmargin-block-start: 0.83em;\n\t\tmargin-block-end: 0.83em;\n\t\tmargin-inline-start: 0px;\n\t\tmargin-inline-end: 0px;\n\t}\n`;\n\n// To override AMP styles we need to use nested and specific selectors here\n// unfortunately.\nconst updateButtonStyle = css`\n\t&.amp-active[update] {\n\t\tposition: fixed;\n\t\tleft: 0;\n\t\ttop: 12px;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n\n\twidth: 100%;\n\n\tbutton {\n\t\tborder: none;\n\t\tborder-radius: 1000px;\n\t\theight: 36px;\n\t\tpadding: 0 12px;\n\n\t\tbackground-color: ${news[400]};\n\t\tcolor: ${neutral[100]};\n\t\tfont-weight: bold;\n\t\t${textSans.xxsmall()};\n\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\n\tsvg {\n\t\theight: 20px;\n\t\twidth: 20px;\n\t\tmargin-right: 6px;\n\t}\n`;\n\n// Note, it is possible for liveblog updates to lack styling if a style change\n// to any block content is deployed between a user loading a live blog and the\n// updates happening. This happens because we don't include new styles on block\n// updates, but only on initial page load.\nexport const Body: React.FC<{\n\tdata: ArticleModel;\n\tconfig: ConfigType;\n}> = ({ data, config }) => {\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: data.isAdFreeUser,\n\t\tisSensitive: config.isSensitive,\n\t\tvideoDuration: config.videoDuration,\n\t\tedition: config.edition,\n\t\tsection: config.section,\n\t\tsharedAdTargeting: config.sharedAdTargeting,\n\t\tadUnit: config.adUnit,\n\t});\n\tconst pillar = decideTheme(data.format);\n\tconst url = `${data.guardianBaseURL}/${data.pageId}`;\n\tconst isFirstPage = data.pagination\n\t\t? data.pagination.currentPage === 1\n\t\t: false;\n\n\treturn (\n\t\t<div css={[bodyStyle, innerContainerStyles]}>\n\t\t\t<TopMetaLiveblog articleData={data} pillar={pillar} />\n\t\t\t<KeyEvents events={data.keyEvents} url={url} />\n\n\t\t\t{!isFirstPage && (\n\t\t\t\t<Pagination guardianURL={url} pagination={data.pagination} />\n\t\t\t)}\n\n\t\t\t<amp-live-list\n\t\t\t\tid=\"live-blog-entries-main\"\n\t\t\t\tdata-max-items-per-page=\"20\" // TODO confirm if this should be dynamic\n\t\t\t>\n\t\t\t\t<div update=\"\" css={updateButtonStyle}>\n\t\t\t\t\t<button on=\"tap:live-blog-entries-main.update\">\n\t\t\t\t\t\t<RefreshIcon />\n\t\t\t\t\t\t<span>You have updates</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div items=\"\">\n\t\t\t\t\t<Blocks\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t\tblocks={data.blocks}\n\t\t\t\t\t\t// stuff for ads\n\t\t\t\t\t\tedition={data.editionId}\n\t\t\t\t\t\tsection={data.sectionName}\n\t\t\t\t\t\tcontentType={data.contentType}\n\t\t\t\t\t\tswitches={config.switches}\n\t\t\t\t\t\tcommercialProperties={data.commercialProperties}\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\tshouldHideAds={data.shouldHideAds}\n\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</amp-live-list>\n\n\t\t\t<Pagination guardianURL={url} pagination={data.pagination} />\n\n\t\t\t<SubMeta\n\t\t\t\tsections={data.subMetaSectionLinks}\n\t\t\t\tkeywords={data.subMetaKeywordLinks}\n\t\t\t\tpillar={pillar}\n\t\t\t\tsharingURLs={getSharingUrls(data.pageId, data.webTitle)}\n\t\t\t\tpageID={data.pageId}\n\t\t\t\tisCommentable={data.isCommentable}\n\t\t\t\tguardianBaseURL={data.guardianBaseURL}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Caption.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":22,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":36,"endColumn":6},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":59,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":61,"endColumn":7},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":60,"column":26,"nodeType":"Punctuator","messageId":"preferNullish","endLine":60,"endColumn":28,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1200,1202],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { text, textSans } from '@guardian/source-foundations';\nimport React from 'react';\nimport { pillarPalette_DO_NOT_USE } from '../../lib/pillars';\nimport TriangleIcon from '../../static/icons/triangle.svg';\n\nconst figureStyle = css`\n\tmargin-bottom: 8px;\n`;\nconst captionStyle = css`\n\tpadding-top: 10px;\n\t${textSans.xxsmall()};\n\tword-wrap: break-word;\n\tcolor: ${text.supporting};\n`;\n\nconst captionPadding = css`\n\tpadding-left: 8px;\n\tpadding-right: 8px;\n`;\n\nexport const Caption = ({\n\tcaptionText,\n\tpillar,\n\tpadCaption = false,\n\tcredit,\n\tdisplayCredit = true,\n\tchildren,\n}: {\n\tcaptionText?: string;\n\tpillar: ArticleTheme;\n\tpadCaption?: boolean;\n\tcredit?: string;\n\tdisplayCredit?: boolean;\n\tchildren: React.ReactNode;\n}) => {\n\tconst iconStyle = css`\n\t\tfill: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\tpadding-right: 3px;\n\t`;\n\n\tconst captionLink = css`\n\t\ta {\n\t\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\t\ttext-decoration: none;\n\t\t}\n\t\ta:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t\tstrong {\n\t\t\tfont-weight: bold;\n\t\t}\n\t`;\n\n\tconst getCaptionHtml = () => {\n\t\treturn (\n\t\t\t<span\n\t\t\t\tcss={captionLink}\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: captionText || '',\n\t\t\t\t}}\n\t\t\t\tkey=\"caption\"\n\t\t\t/>\n\t\t);\n\t};\n\n\treturn (\n\t\t<figure css={figureStyle}>\n\t\t\t{children}\n\t\t\t{captionText && (\n\t\t\t\t<>\n\t\t\t\t\t<figcaption\n\t\t\t\t\t\tcss={[captionStyle, padCaption && captionPadding]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span css={iconStyle}>\n\t\t\t\t\t\t\t<TriangleIcon />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{getCaptionHtml()} {displayCredit && credit}\n\t\t\t\t\t</figcaption>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</figure>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/ContentABTest.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/ContentABTest.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":48,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":56,"endColumn":6},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":81,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":81,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import sha256 from 'crypto-js/sha256';\nimport React from 'react';\n\nconst AB_TEST_GROUPS = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11] as const;\n\nconst NUM_GROUPS = AB_TEST_GROUPS.length;\n\ntype ContentABTestGroup = typeof AB_TEST_GROUPS[number];\n\nconst isContentABTestGroup = (n: number): n is ContentABTestGroup =>\n\tAB_TEST_GROUPS.includes(n as ContentABTestGroup);\n\ninterface ContentABTestContext {\n\tgroup?: ContentABTestGroup;\n}\n\n/**\n * Compute which test group to place the current page in\n *\n * @param pageId The data that is used to assign a certain piece of content into a bucket\n * @returns The test group the content is placed in\n */\nexport const getGroup = (pageId: string): ContentABTestGroup => {\n\t// Apply a SHA-256 hash to the page ID\n\t// Add the leading slash as this will be present when we apply the equivalent algorithm at the analysis stage\n\tconst hashedPageId = sha256(`/${pageId}`);\n\t// Take the last 4 bytes of the hash\n\tconst lastFourBytes = hashedPageId.words[hashedPageId.words.length - 1];\n\t// Assign the group by applying mod base 12\n\t// Mod can return negative values so we apply `Math.abs` to avoid negative groups\n\tconst group = Math.abs(lastFourBytes) % NUM_GROUPS;\n\n\tif (isContentABTestGroup(group)) {\n\t\treturn group;\n\t}\n\n\t// This should be unreachable\n\t// Report and throw an error if it isn't\n\tconst error = new Error('Failed to put AMP content into group');\n\twindow.guardian.modules.sentry.reportError(error, 'commercial');\n\tthrow error;\n};\n\nconst Context = React.createContext<ContentABTestContext | undefined>(\n\tundefined,\n);\n\nexport const ContentABTestProvider = ({\n\tswitches,\n\tpageId,\n\tchildren,\n}: {\n\tswitches: Switches;\n\tpageId: string;\n\tchildren: React.ReactNode;\n}) => {\n\tconst group = getGroup(pageId);\n\tconst providerValue = switches.ampContentAbTesting ? { group } : {};\n\treturn (\n\t\t<Context.Provider value={providerValue}>{children}</Context.Provider>\n\t);\n};\n\n/**\n * Obtain the current test group\n *\n * @example\n * const { group } = useContentABTestGroup();\n *\n *\tswitch(group) {\n *    case (0): {\n * \t\t// ...\n *    }\n *    case (1): {\n * \t\t// ...\n *    }\n *    // Handle other groups\n *  }\n *\n */\nexport const useContentABTestGroup = () => {\n\tconst context = React.useContext(Context);\n\n\tif (context === undefined) {\n\t\tthrow Error(\n\t\t\t'useContentABTestGroup must be used within the ContentABTestProvider',\n\t\t);\n\t}\n\n\treturn context;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Elements.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":38,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":38,"endColumn":13},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":46,"column":40,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":46,"endColumn":41},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":52,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":52,"endColumn":13},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":58,"column":41,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":58,"endColumn":42},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":72,"column":8,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":74,"endColumn":10},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":81,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":81,"endColumn":13},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":89,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":89,"endColumn":13},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":120,"column":8,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":122,"endColumn":10},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":129,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":129,"endColumn":13},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":145,"column":8,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":147,"endColumn":10},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":154,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":154,"endColumn":13},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":160,"column":43,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":160,"endColumn":44},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":164,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":164,"endColumn":13},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":173,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":173,"endColumn":13},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":191,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":191,"endColumn":13},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":199,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":199,"endColumn":13},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":207,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":207,"endColumn":13},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":221,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":221,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NotRenderableInDCR } from '../../lib/errors/not-renderable-in-dcr';\nimport { enhance } from '../lib/enhance';\nimport { AudioAtomBlockComponent } from './elements/AudioAtomBlockComponent';\nimport { CommentBlockComponent } from './elements/CommentBlockComponent';\nimport { ContentAtomBlockComponent } from './elements/ContentAtomBlockComponent';\nimport { DisclaimerBlockComponent } from './elements/DisclaimerBlockComponent';\nimport { EmbedBlockComponentAMP } from './elements/EmbedBlockComponentAMP';\nimport { GuVideoBlockComponent } from './elements/GuVideoBlockComponent';\nimport { ImageBlockComponent } from './elements/ImageBlockComponent';\nimport { InteractiveAtomBlockComponent } from './elements/InteractiveAtomBlockComponent';\nimport { InteractiveBlockComponentAMP } from './elements/InteractiveBlockComponentAMP';\nimport { PullquoteBlockComponent } from './elements/PullquoteBlockComponent';\nimport { RichLinkBlockComponent } from './elements/RichLinkBlockComponent';\nimport { SoundcloudBlockComponent } from './elements/SoundcloudBlockComponent';\nimport { SubheadingBlockComponent } from './elements/SubheadingBlockComponent';\nimport { TextBlockComponent } from './elements/TextBlockComponent';\nimport { TimelineBlockComponent } from './elements/TimelineBlockComponent';\nimport { TwitterBlockComponent } from './elements/TwitterBlockComponent';\nimport { VideoVimeoBlockComponent } from './elements/VideoVimeoBlockComponent';\nimport { VideoYoutubeBlockComponent } from './elements/VideoYoutubeBlockComponent';\nimport { YoutubeBlockComponentAMP } from './elements/YoutubeBlockComponentAMP';\nimport { Expandable } from './Expandable';\n\nexport const Elements = (\n\telements: CAPIElement[],\n\tpillar: ArticlePillar,\n\tisImmersive: boolean,\n\tadTargeting?: AdTargeting,\n): JSX.Element[] => {\n\tconst cleanedElements = enhance(elements);\n\tconst output = cleanedElements.map((element, i) => {\n\t\tswitch (element._type) {\n\t\t\tcase 'model.dotcomrendering.pageElements.AudioAtomBlockElement':\n\t\t\t\treturn <AudioAtomBlockComponent element={element} />;\n\t\t\tcase 'model.dotcomrendering.pageElements.BlockquoteBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<TextBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.ChartAtomBlockElement':\n\t\t\t\treturn <InteractiveAtomBlockComponent url={element.url} />;\n\t\t\tcase 'model.dotcomrendering.pageElements.CommentBlockElement':\n\t\t\t\treturn <CommentBlockComponent key={i} element={element} />;\n\t\t\tcase 'model.dotcomrendering.pageElements.ContentAtomBlockElement':\n\t\t\t\treturn <ContentAtomBlockComponent element={element} />;\n\t\t\tcase 'model.dotcomrendering.pageElements.DisclaimerBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<DisclaimerBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.EmbedBlockElement':\n\t\t\t\treturn <EmbedBlockComponentAMP key={i} element={element} />;\n\t\t\tcase 'model.dotcomrendering.pageElements.GenericAtomBlockElement':\n\t\t\t\treturn <InteractiveAtomBlockComponent url={element.url} />;\n\t\t\tcase 'model.dotcomrendering.pageElements.GuideAtomBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<Expandable\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttype={element.label}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\timg={element.img}\n\t\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: element.html,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Expandable>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.GuVideoBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<GuVideoBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.ImageBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<ImageBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.InteractiveAtomBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<InteractiveAtomBlockComponent\n\t\t\t\t\t\turl={element.url}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\tplaceholderUrl={element.placeholderUrl}\n\t\t\t\t\t/>\n\t\t\t\t); // element.placeholderUrl\n\t\t\tcase 'model.dotcomrendering.pageElements.InteractiveBlockElement': // Plain Interactive Embeds\n\t\t\t\treturn (\n\t\t\t\t\t<InteractiveBlockComponentAMP\n\t\t\t\t\t\turl={element.url}\n\t\t\t\t\t\tisMandatory={element.isMandatory}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.ProfileAtomBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<Expandable\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttype={element.label}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\timg={element.img}\n\t\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: element.html,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Expandable>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.PullquoteBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<PullquoteBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.QABlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<Expandable\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttype=\"Q&A\"\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\timg={element.img}\n\t\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: element.html,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Expandable>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.RichLinkBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<RichLinkBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.SoundcloudBlockElement':\n\t\t\t\treturn <SoundcloudBlockComponent key={i} element={element} />;\n\t\t\tcase 'model.dotcomrendering.pageElements.SubheadingBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<SubheadingBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t\tisImmersive={isImmersive}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.TextBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<TextBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.TimelineBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<TimelineBlockComponent\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\tdescription={element.description}\n\t\t\t\t\t\tevents={element.events}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.TweetBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<TwitterBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.VideoVimeoBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<VideoVimeoBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.VideoYoutubeBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<VideoYoutubeBlockComponent\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tcase 'model.dotcomrendering.pageElements.YoutubeBlockElement':\n\t\t\t\treturn (\n\t\t\t\t\t<YoutubeBlockComponentAMP\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tpillar={pillar}\n\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\tconsole.log('Unsupported Element', JSON.stringify(element));\n\t\t\t\tif ((element as { isMandatory?: boolean }).isMandatory) {\n\t\t\t\t\tthrow new NotRenderableInDCR();\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t}\n\t});\n\n\treturn output.filter((el) => el !== null) as JSX.Element[];\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Epic.tsx","messages":[{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":442,"column":10,"nodeType":"JSXElement","messageId":"missingType","endLine":447,"endColumn":19},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":448,"column":10,"nodeType":"JSXElement","messageId":"missingType","endLine":453,"endColumn":19},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":454,"column":10,"nodeType":"JSXElement","messageId":"missingType","endLine":459,"endColumn":19},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":463,"column":10,"nodeType":"JSXElement","messageId":"missingType","endLine":468,"endColumn":19},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":469,"column":10,"nodeType":"JSXElement","messageId":"missingType","endLine":474,"endColumn":19},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":475,"column":10,"nodeType":"JSXElement","messageId":"missingType","endLine":480,"endColumn":19},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":513,"column":10,"nodeType":"JSXElement","messageId":"missingType","endLine":518,"endColumn":19},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":542,"column":9,"nodeType":"JSXElement","messageId":"missingType","endLine":556,"endColumn":18},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":622,"column":9,"nodeType":"JSXElement","messageId":"missingType","endLine":637,"endColumn":18}],"suppressedMessages":[{"ruleId":"react/jsx-no-target-blank","severity":2,"message":"Using target=\"_blank\" without rel=\"noreferrer\" (which implies rel=\"noopener\") is a security risk in older browsers: see https://mathiasbynens.github.io/rel-noopener/#recommendations","line":651,"column":10,"nodeType":"JSXOpeningElement","messageId":"noTargetBlankWithoutNoreferrer","endLine":654,"endColumn":11,"fix":{"range":[19804,19804],"text":" rel=\"noreferrer\""},"suppressions":[{"kind":"directive","justification":"we’re linking to Guardian"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbody,\n\tborder,\n\tbrand,\n\tbrandAlt,\n\tbrandBackground,\n\terror,\n\theadline,\n\tneutral,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport {\n\tMoustacheSection,\n\tMoustacheTemplate,\n\tmoustacheVariable,\n\tMoustacheVariable,\n} from './moustache';\n\nexport const epicChoiceCardCss = `\n\t.epicChoiceCard {\n\t\tcolor: ${neutral[46]};\n\t\tcursor: pointer;\n\t\tborder-radius: 4px;\n\t\tbox-shadow: inset 0 0 0 2px ${border.primary};\n\t\tbox-sizing: border-box;\n\t\tmin-height: 44px;\n\t\tmargin: 0 0 8px 0;\n\t\tborder: none;\n\t\toutline: none;\n\t\tbackground-color: transparent;\n\t\tfont-weight: 700;\n\t\tfont-size: 1.0625rem;\n\t\tfont-family: GuardianTextSans, Guardian Text Sans Web, Helvetica Neue,\n\t\t\tHelvetica, Arial, Lucida Grande, sans-serif;\n\t\ttext-align: center;\n\t}\n\t.epicChoiceCard:hover {\n\t\tbox-shadow: inset 0 0 0 4px ${brand[500]};\n\t\tcolor: ${brand[400]};\n\t}\n\t.epicChoiceCardSelected {\n\t\tbox-shadow: inset 0 0 0 4px ${brand[500]};\n\t\tbackground-color: #e3f6ff;\n\t\tcolor: ${brand[400]};\n\t}\n`;\n\nconst choiceCardGroupColumn = css`\n\tdisplay: flex;\n\twidth: 100%;\n\tflex-direction: column;\n\tbox-sizing: border-box;\n`;\nconst choiceCardGroupRow = css`\n\tdisplay: grid;\n\tjustify-content: space-between;\n\twidth: 100%;\n\tcolumn-gap: 8px;\n\trow-gap: 8px;\n\tbox-sizing: border-box;\n\tgrid-template-columns: repeat(3, 1fr);\n`;\nconst choiceCardContainer = css`\n\tposition: relative;\n\tmargin-top: 8px;\n`;\nconst epicStyle = css`\n\tborder-top: 0.0625rem solid ${brandAlt[400]};\n\tbackground-color: ${neutral[97]};\n\tclear: left;\n\tmargin-top: 1.5rem;\n\tmargin-bottom: 1rem;\n\tpadding: 0.25rem 0.3125rem 1rem;\n`;\nconst epicHeaderStyle = css`\n\tfont-size: 1.25rem;\n\tline-height: 1.4375rem;\n\t${headline.xxsmall()};\n\ttext-rendering: optimizeLegibility;\n\tfont-kerning: normal;\n\tfont-variant-ligatures: common-ligatures;\n\tfont-weight: 700;\n\tmargin-bottom: 0.75rem;\n\t-webkit-font-smoothing: antialiased;\n`;\nconst epicParagraphStyle = css`\n\tfont-size: 1.1rem;\n\tdisplay: block;\n\tmargin-block-start: 0.5rem;\n\tmargin-block-end: 0.5rem;\n\t${body.medium()};\n\ttext-rendering: optimizeLegibility;\n\tfont-kerning: normal;\n\tfont-variant-ligatures: common-ligatures;\n\t-webkit-font-smoothing: antialiased;\n\tvertical-align: 0%;\n\tline-height: 1.5;\n\t&::selection {\n\t\tbackground-color: ${brandAlt[400]};\n\t}\n\t&:last-of-type {\n\t\tdisplay: inline;\n\t}\n`;\nconst highlightedTextStyle = css`\n\tfont-size: 1.1rem;\n\tbackground-color: ${brandAlt[400]};\n\tpadding: 0.125rem;\n\tmargin-left: 5px;\n\tcolor: ${neutral[7]};\n\t${headline.xxxsmall({ fontWeight: 'bold' })};\n\ttext-rendering: optimizeLegibility;\n\tfont-kerning: normal;\n\tfont-variant-ligatures: common-ligatures;\n\t-webkit-font-smoothing: antialiased;\n\tvertical-align: 0%;\n\tline-height: 1.5;\n\tdisplay: inline;\n`;\nconst genericButtonStyle = css`\n\toutline: none;\n\tdisplay: inline-flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\t${textSans.medium()};\n\ttext-rendering: optimizeLegibility;\n\tfont-kerning: normal;\n\tfont-variant-ligatures: common-ligatures;\n\t-webkit-font-smoothing: antialiased;\n\ttext-decoration: none;\n\tfont-weight: 700;\n\tfont-size: 1.1rem;\n\theight: 44px;\n\tmin-height: 44px;\n\tpadding: 0 20px 2px;\n\tborder-radius: 1.3125rem;\n\tbox-sizing: border-box;\n\tcursor: pointer;\n\tvertical-align: base;\n\tline-height: 1.5;\n\ttransition: background-color 0.3s;\n\ttext-align: centre;\n`;\nconst transparentButtonStyle = css`\n\t${genericButtonStyle}\n\tmargin: 4px;\n\tbackground-color: transparent;\n\tcolor: ${neutral[7]};\n\tborder: 1px solid ${neutral[7]};\n\t&:hover {\n\t\tbackground-color: ${neutral[86]};\n\t}\n`;\nconst yellowButtonStyle = css`\n\t${genericButtonStyle}\n\tmargin: 4px;\n\tbackground-color: ${brandAlt[400]};\n\tcolor: ${neutral[7]};\n\tborder: 1px solid ${brandAlt[400]};\n\t&:hover {\n\t\tbackground-color: ${brandAlt[300]};\n\t}\n`;\nconst blueButtonStyle = css`\n\t${genericButtonStyle}\n\tbackground-color: ${brand[400]};\n\tcolor: ${neutral[100]};\n\tborder: 1px solid ${brand[400]};\n\tmargin-bottom: 6px;\n\t&:hover {\n\t\tbackground-color: ${brandBackground.ctaSecondaryHover};\n\t}\n`;\nconst genericArrowStyle = css`\n\tmargin-left: 0.5rem;\n\tposition: relative;\n\twidth: 1.3125rem;\n\theight: auto;\n\tdisplay: inline;\n\tvertical-align: sub;\n`;\nconst darkArrowStyle = css`\n\t${genericArrowStyle}\n\tfill: ${neutral[7]};\n`;\nconst lightArrowStyle = css`\n\t${genericArrowStyle}\n\tfill: ${neutral[100]};\n`;\nconst quadLineStyle = css`\n\tbackground-image: repeating-linear-gradient(\n\t\tto bottom,\n\t\t${neutral[86]},\n\t\t${neutral[86]} 1px,\n\t\ttransparent 1px,\n\t\ttransparent 4px\n\t);\n\tbackground-repeat: repeat-x;\n\tbackground-position: top;\n\tbackground-size: 1px 13px;\n\tpadding-top: 18px;\n\tmargin-top: 12px;\n`;\nconst acceptedPaymentMethodsWrapperStyle = css`\n\tmargin-top: 0.5rem;\n\tmargin-left: 0.5rem;\n\tdisplay: block;\n`;\nconst tickerWrapperStyle = css`\n\tmargin-bottom: 20px;\n`;\nconst leftStyle = css`\n\ttext-align: left;\n\tdisplay: flex;\n\tflex-wrap: nowrap;\n\tflex-direction: column;\n\tjustify-content: flex-end;\n`;\nconst rightStyle = css`\n\ttext-align: right;\n\tdisplay: flex;\n\tflex-wrap: nowrap;\n\tflex-direction: column;\n\tjustify-content: flex-end;\n`;\nconst tickerInfoStyle = css`\n\tdisplay: flex;\n\tflex-wrap: nowrap;\n\tflex-direction: row;\n\tjustify-content: space-between;\n`;\nconst tickerProgressStyle = css`\n\tposition: absolute;\n\tmargin: 0;\n\tpadding: 0;\n\tleft: 0;\n\tbackground-color: ${error[400]};\n\theight: 100%;\n\twidth: 100%;\n\ttransform-origin: left;\n`;\n/* stylelint-disable */\nconst tickerBackgroundStyle = css`\n\toverflow: hidden;\n\tposition: relative;\n\tmargin: 5px 0;\n\theight: 10px;\n\twidth: 100%;\n\tbackground-color: #dda7a1;\n\tborder: none;\n`;\n/* stylelint-enable */\nconst topLeftStyle = css`\n\t${textSans.small({ fontWeight: 'bold' })};\n`;\nconst topRightStyle = css`\n\t${textSans.small({ fontWeight: 'bold' })};\n`;\nconst labelStyle = css`\n\t${textSans.small()};\n`;\nconst goalExceededMarkerStyle = css`\n\twidth: 1px;\n\theight: 100%;\n\tborder-left: 2px solid ${neutral[7]};\n\tposition: absolute;\n\ttop: 0;\n\tz-index: 2;\n`;\nconst buttonsStyle = css`\n\tdisplay: flex;\n\tmargin-top: 2rem;\n\tflex-wrap: wrap;\n`;\nconst closeButtonStyle = css`\n\tborder: 0;\n\toutline: 0;\n\tpadding: 0;\n\tbackground: transparent;\n\twidth: 30px;\n\theight: 30px;\n\tcursor: pointer;\n`;\nconst reminderFormTopStyle = css`\n\tdisplay: inline-flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\twidth: 100%;\n`;\nconst inputLabelStyle = css`\n\tcolor: ${neutral[7]};\n\t${textSans.medium({ fontWeight: 'bold' })};\n\tmargin-bottom: 4px;\n`;\nconst invalidInputLabelStyle = css`\n\t${textSans.medium()};\n\tcolor: ${error[400]};\n\tdisplay: flex;\n`;\nconst invalidInputSvgStyle = css`\n\twidth: 30px;\n\theight: 30px;\n\tfill: ${error[400]};\n`;\nconst emailInputStyle = css`\n\toutline: none;\n\twidth: 100%;\n\tborder-radius: 0;\n\tborder: 2px solid ${neutral[60]};\n\tpadding: 0 8px;\n\tline-height: 1.35;\n\tbox-sizing: border-box;\n\theight: 44px;\n\t${textSans.medium()};\n\tcolor: ${neutral[7]};\n\tmargin-bottom: 10px;\n`;\nconst reminderTermsStyle = css`\n\t${textSans.small({ fontStyle: 'italic' })};\n\tline-height: 1.5;\n\n\ta {\n\t\ttext-decoration: underline;\n\t\tcolor: ${neutral[7]};\n\t}\n`;\nconst successMessageStyle = css`\n\t${body.medium()};\n\n\ta {\n\t\ttext-decoration: underline;\n\t\tcolor: ${neutral[7]};\n\t}\n`;\nconst reminderErrorStyle = css`\n\t${textSans.small({ fontStyle: 'italic' })};\n\tcolor: ${error[400]};\n\tfont-weight: 600;\n\tmargin-bottom: 10px;\n`;\nconst reminderWrapperStyle = css`\n\t#reminderForm.user-invalid #email {\n\t\tborder: 4px solid ${error[400]};\n\t}\n`;\n\nexport const Epic: React.FC<{ webURL: string }> = ({ webURL }) => {\n\tconst supportDotcomComponentsUrl =\n\t\tprocess.env.GU_STAGE === 'PROD'\n\t\t\t? 'https://contributions.guardianapis.com'\n\t\t\t: process.env.SDC_URL ??\n\t\t\t  'https://contributions.code.dev-guardianapis.com';\n\n\tconst setReminderUrl = `${supportDotcomComponentsUrl}/amp/set_reminder`;\n\tconst epicUrl = `${supportDotcomComponentsUrl}/amp/epic?ampVariantAssignments=VARIANTS&webUrl=${webURL}`;\n\n\treturn (\n\t\t<div>\n\t\t\t<amp-state id=\"epicState\" src={epicUrl} />\n\n\t\t\t<amp-list\n\t\t\t\tlayout=\"fixed-height\"\n\t\t\t\t// This means that if the user refreshes at the end of the article while the epic is in view then the epic\n\t\t\t\t// will not display. This is such an edge case that we can live with it, and in general it will fill the\n\t\t\t\t// space.\n\t\t\t\theight=\"1px\"\n\t\t\t\tsrc=\"amp-state:epicState\"\n\t\t\t\tcredentials=\"include\"\n\t\t\t\tid=\"epic-container\"\n\t\t\t\tsingle-item=\"true\"\n\t\t\t\titems=\".\"\n\t\t\t>\n\t\t\t\t<MoustacheTemplate>\n\t\t\t\t\t<div css={epicStyle}>\n\t\t\t\t\t\t<MoustacheSection name=\"ticker\">\n\t\t\t\t\t\t\t<div css={tickerWrapperStyle}>\n\t\t\t\t\t\t\t\t<div css={tickerInfoStyle}>\n\t\t\t\t\t\t\t\t\t<div css={leftStyle}>\n\t\t\t\t\t\t\t\t\t\t<p css={topLeftStyle}>\n\t\t\t\t\t\t\t\t\t\t\t{moustacheVariable('topLeft')}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p css={labelStyle}>\n\t\t\t\t\t\t\t\t\t\t\t{moustacheVariable('bottomLeft')}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div css={rightStyle}>\n\t\t\t\t\t\t\t\t\t\t<p css={topRightStyle}>\n\t\t\t\t\t\t\t\t\t\t\t{moustacheVariable('topRight')}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<p css={labelStyle}>\n\t\t\t\t\t\t\t\t\t\t\t{moustacheVariable('bottomRight')}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div css={tickerBackgroundStyle}>\n\t\t\t\t\t\t\t\t\t\t<MoustacheSection name=\"goalExceededMarkerPercentage\">\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tid=\"goal-exceeded-marker\"\n\t\t\t\t\t\t\t\t\t\t\t\tcss={goalExceededMarkerStyle}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tleft: `${moustacheVariable(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'goalExceededMarkerPercentage',\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}%`,\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</MoustacheSection>\n\n\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\tid=\"ticker-progress\"\n\t\t\t\t\t\t\t\t\t\t\tcss={tickerProgressStyle}\n\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\twidth: `${moustacheVariable(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'percentage',\n\t\t\t\t\t\t\t\t\t\t\t\t)}%`,\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t<h2 css={epicHeaderStyle}>\n\t\t\t\t\t\t\t<MoustacheVariable name=\"heading\" />\n\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t<MoustacheSection name=\"paragraphs\">\n\t\t\t\t\t\t\t<p css={epicParagraphStyle}>\n\t\t\t\t\t\t\t\t<MoustacheVariable name=\".\" />\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t<span css={highlightedTextStyle}>\n\t\t\t\t\t\t\t<MoustacheVariable name=\"highlightedText\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<br />\n\n\t\t\t\t\t\t<MoustacheSection name=\"choiceCards\">\n\t\t\t\t\t\t\t<div css={choiceCardContainer}>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<div css={choiceCardGroupRow}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tdata-amp-bind-class=\"epicState.choiceCards.choiceCardSelection.frequency == 'ONE_OFF' ? epicState.choiceCards.classNames.choiceCardSelected : epicState.choiceCards.classNames.choiceCard\"\n\t\t\t\t\t\t\t\t\t\ton=\"tap:AMP.setState({ epicState: { choiceCards: { choiceCardSelection: { frequency: 'ONE_OFF', amount: epicState.choiceCards.amounts['ONE_OFF'][1] } } } })\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>Single</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tdata-amp-bind-class=\"epicState.choiceCards.choiceCardSelection.frequency == 'MONTHLY' ? epicState.choiceCards.classNames.choiceCardSelected : epicState.choiceCards.classNames.choiceCard\"\n\t\t\t\t\t\t\t\t\t\ton=\"tap:AMP.setState({ epicState: { choiceCards: { choiceCardSelection: { frequency: 'MONTHLY', amount: epicState.choiceCards.amounts['MONTHLY'][1] } } } })\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>Monthly</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tdata-amp-bind-class=\"epicState.choiceCards.choiceCardSelection.frequency == 'ANNUAL' ? epicState.choiceCards.classNames.choiceCardSelected : epicState.choiceCards.classNames.choiceCard\"\n\t\t\t\t\t\t\t\t\t\ton=\"tap:AMP.setState({ epicState: { choiceCards: { choiceCardSelection: { frequency: 'ANNUAL', amount: epicState.choiceCards.amounts['ANNUAL'][1] } } } })\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>Annual</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<div css={choiceCardGroupColumn}>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tdata-amp-bind-class=\"epicState.choiceCards.choiceCardSelection.amount == epicState.choiceCards.amounts[epicState.choiceCards.choiceCardSelection.frequency][0] ? epicState.choiceCards.classNames.choiceCardSelected : epicState.choiceCards.classNames.choiceCard\"\n\t\t\t\t\t\t\t\t\t\ton=\"tap:AMP.setState({ epicState: { choiceCards: { choiceCardSelection: { amount: epicState.choiceCards.amounts[epicState.choiceCards.choiceCardSelection.frequency][0] } } } })\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span data-amp-bind-text=\"epicState.choiceCards.currencySymbol + epicState.choiceCards.amounts[epicState.choiceCards.choiceCardSelection.frequency][0] + epicState.choiceCards.choiceCardLabelSuffix[epicState.choiceCards.choiceCardSelection.frequency]\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tdata-amp-bind-class=\"epicState.choiceCards.choiceCardSelection.amount == epicState.choiceCards.amounts[epicState.choiceCards.choiceCardSelection.frequency][1] ? epicState.choiceCards.classNames.choiceCardSelected : epicState.choiceCards.classNames.choiceCard\"\n\t\t\t\t\t\t\t\t\t\ton=\"tap:AMP.setState({ epicState: { choiceCards: { choiceCardSelection: { amount: epicState.choiceCards.amounts[epicState.choiceCards.choiceCardSelection.frequency][1] } } } })\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span data-amp-bind-text=\"epicState.choiceCards.currencySymbol + epicState.choiceCards.amounts[epicState.choiceCards.choiceCardSelection.frequency][1] + epicState.choiceCards.choiceCardLabelSuffix[epicState.choiceCards.choiceCardSelection.frequency]\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tdata-amp-bind-class=\"epicState.choiceCards.choiceCardSelection.amount == 'other' ? epicState.choiceCards.classNames.choiceCardSelected : epicState.choiceCards.classNames.choiceCard\"\n\t\t\t\t\t\t\t\t\t\ton=\"tap:AMP.setState({ epicState: { choiceCards: { choiceCardSelection: { amount: 'other' } } } })\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>Other</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</MoustacheSection>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss=\"buttonsWrapper\"\n\t\t\t\t\t\t\tdata-amp-bind-hidden=\"epicState.reminder.hideButtons\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div css={buttonsStyle}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<MoustacheSection name=\"cta\">\n\t\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tid=\"primaryCta\"\n\t\t\t\t\t\t\t\t\t\t\tdata-amp-bind-href=\"epicState.choiceCards ? epicState.ctaUrl + '&selected-contribution-type=' + epicState.choiceCards.choiceCardSelection.frequency + '&selected-amount=' + epicState.choiceCards.choiceCardSelection.amount : epicState.ctaUrl\"\n\t\t\t\t\t\t\t\t\t\t\tcss={yellowButtonStyle}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<MoustacheVariable name=\"text\" />\n\t\t\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\t\t\tcss={darkArrowStyle}\n\t\t\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 17.89\"\n\t\t\t\t\t\t\t\t\t\t\t\tpreserveAspectRatio=\"xMinYMid\"\n\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<path d=\"M20 9.35l-9.08 8.54-.86-.81 6.54-7.31H0V8.12h16.6L10.06.81l.86-.81L20 8.51v.84z\" />\n\t\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div data-amp-bind-hidden=\"epicState.reminder.hideReminderCta\">\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tcss={transparentButtonStyle}\n\t\t\t\t\t\t\t\t\t\ton=\"tap:AMP.setState({epicState:{reminder:{hideReminderWrapper: false, hideButtons: true}}}),epic-container.changeToLayoutContainer()\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span data-amp-bind-text=\"epicState.reminder.reminderCta\" />\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div css={acceptedPaymentMethodsWrapperStyle}>\n\t\t\t\t\t\t\t\t<amp-img\n\t\t\t\t\t\t\t\t\tlayout=\"fixed\"\n\t\t\t\t\t\t\t\t\theight=\"25px\"\n\t\t\t\t\t\t\t\t\twidth=\"176px\"\n\t\t\t\t\t\t\t\t\tsrc=\"https://assets.guim.co.uk/images/acquisitions/2db3a266287f452355b68d4240df8087/payment-methods.png\"\n\t\t\t\t\t\t\t\t\talt=\"Accepted payment methods: Visa, Mastercard, American Express and PayPal\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={reminderWrapperStyle}\n\t\t\t\t\t\t\tdata-amp-bind-hidden=\"epicState.reminder.hideReminderWrapper\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div css={quadLineStyle} />\n\t\t\t\t\t\t\t<div css={reminderFormTopStyle}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcss={epicHeaderStyle}\n\t\t\t\t\t\t\t\t\tdata-amp-bind-text=\"'Remind me in ' + epicState.reminder.reminderLabel\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tcss={closeButtonStyle}\n\t\t\t\t\t\t\t\t\ton=\"tap:AMP.setState({epicState:{reminder:{hideReminderWrapper: true, hideButtons: false}}}),reminderForm.clear\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 30 30\"\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M15.325 17.025l7.225 6.625 1.075-1.075-6.6-7.25 6.6-7.25L22.55 7l-7.225 6.625-7.25-6.6L7 8.1l6.625 7.225L7 22.55l1.075 1.075 7.25-6.6z\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tid=\"reminderForm\"\n\t\t\t\t\t\t\t\tdata-amp-bind-hidden=\"epicState.reminder.hideReminderForm\"\n\t\t\t\t\t\t\t\tmethod=\"post\"\n\t\t\t\t\t\t\t\taction-xhr={setReminderUrl}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\tcustom-validation-reporting=\"interact-and-submit\"\n\t\t\t\t\t\t\t\tencType=\"application/x-www-form-urlencoded\"\n\t\t\t\t\t\t\t\ton=\"submit-success:AMP.setState({epicState:{reminder:{hideReminderCta: true, hideSuccessMessage: false, hideReminderForm: true, headerText: 'Thank you! Your reminder is set.'}}});submit-error:AMP.setState({epicState:{reminder:{hideFailureMessage:false}}})\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div css={inputLabelStyle}>Email address</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tvisible-when-invalid=\"typeMismatch\"\n\t\t\t\t\t\t\t\t\tcss={invalidInputLabelStyle}\n\t\t\t\t\t\t\t\t\tvalidation-for=\"email\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tcss={invalidInputSvgStyle}\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 30 30\"\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M14.41 5L4 22.057l.668.943h20.664l.668-.943L15.59 5h-1.18zm-.063 12.178h1.306l.621-6.917-.856-.728h-.835l-.857.728.62 6.917zM15 18.452c.7 0 1.274.573 1.274 1.274 0 .7-.573 1.274-1.274 1.274-.7 0-1.274-.573-1.274-1.274 0-.7.573-1.274 1.274-1.274z\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\tPlease enter a valid email address\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tvisible-when-invalid=\"valueMissing\"\n\t\t\t\t\t\t\t\t\tcss={invalidInputLabelStyle}\n\t\t\t\t\t\t\t\t\tvalidation-for=\"email\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 30 30\"\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tcss={invalidInputSvgStyle}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M14.41 5L4 22.057l.668.943h20.664l.668-.943L15.59 5h-1.18zm-.063 12.178h1.306l.621-6.917-.856-.728h-.835l-.857.728.62 6.917zM15 18.452c.7 0 1.274.573 1.274 1.274 0 .7-.573 1.274-1.274 1.274-.7 0-1.274-.573-1.274-1.274 0-.7.573-1.274 1.274-1.274z\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\tPlease enter your email address\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\t\tname=\"isPreContribution\"\n\t\t\t\t\t\t\t\t\tvalue=\"true\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\t\tname=\"reminderDate\"\n\t\t\t\t\t\t\t\t\tdata-amp-bind-value=\"epicState.reminder.reminderPeriod\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tcss={emailInputStyle}\n\t\t\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\t\t\tname=\"email\"\n\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\trequired={true}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tcss={blueButtonStyle}\n\t\t\t\t\t\t\t\t\ton=\"tap:reminderForm.submit\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSet a reminder\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tcss={lightArrowStyle}\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 20 17.89\"\n\t\t\t\t\t\t\t\t\t\tpreserveAspectRatio=\"xMinYMid\"\n\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path d=\"M20 9.35l-9.08 8.54-.86-.81 6.54-7.31H0V8.12h16.6L10.06.81l.86-.81L20 8.51v.84z\" />\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcss={reminderErrorStyle}\n\t\t\t\t\t\t\t\t\tdata-amp-bind-hidden=\"epicState.reminder.hideFailureMessage\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSorry we couldn&apos;t set a reminder for\n\t\t\t\t\t\t\t\t\tyou this time. Please try again later.\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div css={reminderTermsStyle}>\n\t\t\t\t\t\t\t\t\tWe will send you a maximum of two emails in{' '}\n\t\t\t\t\t\t\t\t\t<span data-amp-bind-text=\"epicState.reminder.reminderLabel\" />\n\t\t\t\t\t\t\t\t\t. To find out what personal data we collect\n\t\t\t\t\t\t\t\t\tand how we use it, view our{' '}\n\t\t\t\t\t\t\t\t\t{/* eslint-disable-next-line react/jsx-no-target-blank -- we’re linking to Guardian */}\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\thref=\"https://www.theguardian.com/help/privacy-policy\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tPrivacy Policy\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={successMessageStyle}\n\t\t\t\t\t\t\t\tdata-amp-bind-hidden=\"epicState.reminder.hideSuccessMessage\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tWe will be in touch to remind you to contribute.\n\t\t\t\t\t\t\t\tLook out for a message in your inbox in{' '}\n\t\t\t\t\t\t\t\t<span data-amp-bind-text=\"epicState.reminder.reminderLabel\" />\n\t\t\t\t\t\t\t\t. If you have any questions about contributing,\n\t\t\t\t\t\t\t\tplease{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\t\t\thref=\"mailto:contribution.support@theguardian.com\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tcontact us\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</MoustacheTemplate>\n\t\t\t</amp-list>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Expandable.tsx","messages":[{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":208,"column":3,"nodeType":"JSXElement","messageId":"missingType","endLine":220,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbody,\n\theadline,\n\tneutral,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport { neutralBorder, pillarPalette_DO_NOT_USE } from '../../lib/pillars';\nimport InfoIcon from '../../static/icons/info.svg';\nimport PlusIcon from '../../static/icons/plus.svg';\n\nconst ListStyle = (iconColour: string) => css`\n\tli {\n\t\tmargin-bottom: 6px;\n\t\tpadding-left: 20px;\n\t\tp {\n\t\t\tdisplay: inline;\n\t\t}\n\t}\n\n\tli:before {\n\t\tdisplay: inline-block;\n\t\tcontent: '';\n\t\tborder-radius: 6px;\n\t\theight: 12px;\n\t\twidth: 12px;\n\t\tmargin-right: 8px;\n\t\tbackground-color: ${iconColour};\n\t\tmargin-left: -20px;\n\t}\n`;\n\nconst LinkStyle = (pillar: ArticleTheme) => css`\n\ta {\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\ttext-decoration: none;\n\t\tborder-bottom: 1px solid ${neutralBorder(pillar)};\n\t\t:hover {\n\t\t\tborder-bottom: 1px solid ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\t}\n\t}\n`;\n\nconst TextStyle = (pillar: ArticleTheme) => css`\n\tstrong {\n\t\tfont-weight: 700;\n\t}\n\tp {\n\t\tpadding: 0 0 12px;\n\t\t${body.medium()};\n\t\tfont-weight: 300;\n\t\tword-wrap: break-word;\n\t\tcolor: ${neutral[7]};\n\t}\n\n\tblockquote {\n\t\tmargin-left: 20px;\n\t\tfont-style: italic;\n\t}\n\n\t${body.medium()};\n\n\t${LinkStyle(pillar)};\n\t${ListStyle(neutralBorder(pillar))};\n`;\n\nconst wrapper = (pillar: ArticleTheme) => css`\n\tbackground: ${neutral[93]};\n\tposition: relative;\n\tpadding: 0 5px 6px;\n\tmargin: 16px 0 36px;\n\n\tborder-top: 13px solid ${neutral[7]};\n\tborder-image: repeating-linear-gradient(\n\t\t\tto bottom,\n\t\t\t${neutral[86]},\n\t\t\t${neutral[86]} 1px,\n\t\t\ttransparent 1px,\n\t\t\ttransparent 4px\n\t\t)\n\t\t13;\n\n\t${TextStyle(pillar)}\n\n\t${body.medium()};\n`;\n\nconst buttonStyles = css`\n\theight: 32px;\n\tbackground-color: ${neutral[7]};\n\tborder-radius: 1600px;\n\tcolor: ${neutral[100]};\n\tborder: none;\n\t${textSans.small()};\n\tfont-weight: 700;\n\tpadding: 0 15px 0 7px;\n\n\tdisplay: inline-flex;\n\talign-items: center;\n\n\tposition: absolute;\n\tbottom: 0;\n\ttransform: translate(0, 50%);\n\n\tspan {\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t}\n\n\tsvg {\n\t\tfill: ${neutral[100]};\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tmargin-right: 10px;\n\t}\n`;\n\nconst headerStyle = css`\n\t${headline.xxsmall()};\n`;\n\nconst creditStyle = css`\n\t${textSans.small()};\n\tdisplay: block;\n\tmargin: 12px 0;\n`;\n\nconst pillarColour = (pillar: ArticleTheme) => css`\n\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n`;\n\nconst headers = css`\n\tmargin: 0 0 16px;\n`;\n\nconst innerStyle = css`\n\tpadding-bottom: 24px;\n`;\n\nconst iconStyle = css`\n\tdisplay: inline-flex;\n\tbackground: ${neutral[60]};\n\tborder-radius: 100%;\n\twidth: 16px;\n\theight: 16px;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 5px;\n\n\tsvg {\n\t\theight: 12px;\n\t\tfill: ${neutral[100]};\n\t}\n`;\n\nconst imageStyle = css`\n\twidth: 100px;\n\theight: 100px;\n\tdisplay: block;\n\tfloat: left;\n\tmargin-right: 10px;\n\tmargin-bottom: 6px;\n\n\timg {\n\t\tobject-fit: cover;\n\t\tborder-radius: 50%;\n\t}\n`;\n\nexport const Expandable: React.FC<{\n\tid: string;\n\ttype: string;\n\ttitle: string;\n\timg?: string;\n\tcredit?: string;\n\tpillar: ArticleTheme;\n\tchildren: React.ReactNode;\n}> = ({ id, type, title, img, children, credit, pillar }) => (\n\t<aside css={wrapper(pillar)}>\n\t\t<div css={headers}>\n\t\t\t<span css={[headerStyle, pillarColour(pillar)]}>{type}</span>\n\t\t\t<h2 css={headerStyle}>{title}</h2>\n\t\t</div>\n\n\t\t<div css={innerStyle} hidden={true} id={id}>\n\t\t\t{img && (\n\t\t\t\t<amp-img\n\t\t\t\t\tclass={imageStyle}\n\t\t\t\t\tsrc={img}\n\t\t\t\t\talt={`Image for ${title} explainer`}\n\t\t\t\t\tlayout=\"fixed\"\n\t\t\t\t\twidth=\"100\"\n\t\t\t\t\theight=\"100\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{children}\n\t\t\t{credit && (\n\t\t\t\t<span css={creditStyle}>\n\t\t\t\t\t<span css={iconStyle}>\n\t\t\t\t\t\t<InfoIcon />\n\t\t\t\t\t</span>{' '}\n\t\t\t\t\t{credit}\n\t\t\t\t</span>\n\t\t\t)}\n\t\t</div>\n\n\t\t<button\n\t\t\ton={`tap:${id}.toggleVisibility,show-${id}.toggleVisibility,hide-${id}.toggleVisibility`}\n\t\t\tcss={buttonStyles}\n\t\t>\n\t\t\t<span id={`show-${id}`}>\n\t\t\t\t<PlusIcon />\n\t\t\t\tShow\n\t\t\t</span>\n\t\t\t<span hidden={true} id={`hide-${id}`}>\n\t\t\t\t<PlusIcon />\n\t\t\t\tHide\n\t\t\t</span>\n\t\t</button>\n\t</aside>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Footer.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":147,"column":14,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":147,"endColumn":32},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":147,"column":17,"nodeType":"MemberExpression","messageId":"invalidType","endLine":147,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbody,\n\tbrand,\n\tbrandAlt,\n\tneutral,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport type { Link } from '../../lib/footer-links';\nimport {\n\tfooterLinksNew,\n\tisOnPlatform,\n\tLinkPlatform,\n} from '../../lib/footer-links';\nimport { useContentABTestGroup } from './ContentABTest';\nimport { ReaderRevenueButton } from './ReaderRevenueButton';\n\nconst innerContainerStyles = css`\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n`;\n\nconst footer = css`\n\tbackground-color: ${brand[400]};\n\tcolor: ${neutral[86]};\n\t${textSans.medium()};\n\tmargin-top: 20px;\n`;\n\nconst footerInner = css`\n\tposition: relative;\n\tpadding-bottom: 6px;\n`;\n\nconst footerLink = css`\n\tcolor: ${neutral[100]};\n\ttext-decoration: none;\n\tpadding-bottom: 12px;\n\tdisplay: block;\n\n\t:hover {\n\t\tcolor: ${brandAlt[400]};\n\t}\n`;\n\nconst footerList = css`\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tflex-direction: row;\n\tposition: relative;\n\tpadding-top: 12px;\n\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tleft: calc(50% - 10px);\n\t\twidth: 1px;\n\t\tdisplay: block;\n\t\tbackground-color: rgba(255, 255, 255, 0.3);\n\t}\n`;\n\nconst footerListBlock = css`\n\tmargin-right: 10px;\n\twidth: calc(50% - 10px);\n\tmargin-top: 0;\n`;\n\nconst copyrightContainer = css`\n\tpadding-left: 20px;\n\tpadding-right: 20px;\n\tpadding-top: 20px;\n\tpadding-bottom: 18px;\n\tborder-top: 1px solid rgba(255, 255, 255, 0.3);\n\tmargin-top: 12px;\n\tposition: relative;\n`;\n\nconst copyright = css`\n\t${textSans.xxsmall()};\n`;\n\nconst iconContainer = css`\n\tposition: relative;\n\tfloat: right;\n\tmargin-top: -6px;\n\tborder-radius: 100%;\n\tbackground-color: ${neutral[100]};\n\tcursor: pointer;\n\theight: 42px;\n\tmin-width: 42px;\n`;\n\nconst icon = css`\n\t:before {\n\t\tposition: absolute;\n\t\ttop: 6px;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tmargin: auto;\n\t\tborder: 2px solid ${brand[400]};\n\t\tborder-bottom: 0;\n\t\tborder-right: 0;\n\t\tcontent: '';\n\t\theight: 12px;\n\t\twidth: 12px;\n\t\ttransform: rotate(45deg);\n\t}\n`;\n\nconst backToTopLink = css`\n\tposition: absolute;\n\tbackground-color: ${brand[400]};\n\tcolor: ${neutral[100]};\n\tfont-weight: 700;\n\ttop: -14px;\n\tright: 20px;\n\tpadding: 0 5px;\n`;\n\nconst backToTopText = css`\n\tdisplay: inline-block;\n\tpadding-right: 0.3125rem;\n\tpadding-top: 3px;\n`;\n\nconst supportLink = css`\n\tcolor: ${brandAlt[400]};\n\t${body.medium()};\n\tpadding-bottom: 0.375rem;\n`;\n\nconst year = new Date().getFullYear();\n\nconst FooterLinks: React.FC<{\n\tlinks: Link[][];\n\tnav: NavType;\n}> = ({ links, nav }) => {\n\tconst linkGroups = links.map((linkGroup) => {\n\t\tconst ls = linkGroup\n\t\t\t.filter((l) => isOnPlatform(l, LinkPlatform.Amp))\n\t\t\t.map((l, index) => (\n\t\t\t\t<li key={`${l.url}${index}`}>\n\t\t\t\t\t<a css={footerLink} href={l.url} on={l.on}>\n\t\t\t\t\t\t{l.title}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t));\n\t\tconst key = linkGroup.reduce((acc, { title }) => `acc-${title}`, '');\n\n\t\treturn (\n\t\t\t<ul key={key} css={footerListBlock}>\n\t\t\t\t{ls}\n\t\t\t</ul>\n\t\t);\n\t});\n\n\treturn (\n\t\t<div css={footerList}>\n\t\t\t{linkGroups}\n\t\t\t<div key=\"rrblock\" css={footerListBlock}>\n\t\t\t\t<div css={supportLink}>Support The&nbsp;Guardian</div>\n\t\t\t\t<ReaderRevenueButton\n\t\t\t\t\tnav={nav}\n\t\t\t\t\trrLink=\"ampFooter\"\n\t\t\t\t\trrCategory=\"contribute\"\n\t\t\t\t\trightAlignIcon={true}\n\t\t\t\t\tlinkLabel=\"Contribute\"\n\t\t\t\t/>\n\t\t\t\t<ReaderRevenueButton\n\t\t\t\t\tnav={nav}\n\t\t\t\t\trrLink=\"ampFooter\"\n\t\t\t\t\trrCategory=\"subscribe\"\n\t\t\t\t\trightAlignIcon={true}\n\t\t\t\t\tlinkLabel=\"Subscribe\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport const Footer: React.FC<{ nav: NavType }> = ({ nav }) => {\n\tconst { group } = useContentABTestGroup();\n\treturn (\n\t\t<footer data-content-test-group={group} css={footer}>\n\t\t\t<div css={innerContainerStyles}>\n\t\t\t\t<div css={footerInner}>\n\t\t\t\t\t<FooterLinks links={footerLinksNew} nav={nav} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div css={[copyrightContainer, innerContainerStyles]}>\n\t\t\t\t<a css={backToTopLink} href=\"#top\">\n\t\t\t\t\t<span css={backToTopText}>Back to top</span>\n\t\t\t\t\t<span css={iconContainer}>\n\t\t\t\t\t\t<i css={icon} />\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\t\t\t\t<div css={copyright}>\n\t\t\t\t\t© {year} Guardian News & Media Limited or its affiliated\n\t\t\t\t\tcompanies. All rights reserved.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</footer>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Header.tsx","messages":[{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":231,"column":4,"nodeType":"JSXElement","messageId":"missingType","endLine":237,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbrand,\n\tbrandAlt,\n\tbrandText,\n\tfrom,\n\theadline,\n\tneutral,\n\tuntil,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport { SvgGuardianBestWebsiteLogo } from '@guardian/source-react-components';\nimport React from 'react';\nimport { pillarPalette_DO_NOT_USE } from '../../lib/pillars';\nimport { ReaderRevenueButton } from './ReaderRevenueButton';\n\nconst headerStyles = css`\n\tbackground-color: ${brand[400]};\n`;\n\nconst row = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tposition: relative;\n`;\n\nconst logoStyles = css`\n\talign-self: flex-start;\n\theight: 65px;\n\twidth: 175px;\n\tmargin-top: 3px;\n\tmargin-right: 20px;\n\tmargin-bottom: 20px;\n\n\t${until.mobileMedium} {\n\t\theight: 54px;\n\t\twidth: 135px;\n\t\tmargin-bottom: 15px;\n\t\tmargin-right: 52px;\n\t\tmargin-top: 9px;\n\t}\n\n\tsvg {\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t}\n`;\n\nconst pillarListStyles = css`\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\t/* Design System: This override is needed because the line height changes the layout*/\n\tline-height: 0;\n`;\n\nconst pillarListItemStyle = css`\n\tdisplay: inline-block;\n\n\t:first-of-type {\n\t\ta {\n\t\t\tpadding-left: 20px;\n\n\t\t\t:before {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\n\t\t${until.mobileLandscape} {\n\t\t\ta {\n\t\t\t\tpadding-left: 10px;\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst pillarLinkStyle = (pillar: ArticleTheme) => css`\n\ttext-decoration: none;\n\tcursor: pointer;\n\tdisplay: block;\n\t${headline.xxxsmall()};\n\theight: 36px;\n\tpadding: 9px 4px;\n\tcolor: ${neutral[100]};\n\tposition: relative;\n\toverflow: hidden;\n\n\tfont-weight: 900;\n\tfont-size: 15.4px;\n\n\t${from.mobileLandscape} {\n\t\tfont-size: 18px;\n\t\tpadding: 7px 4px 0;\n\t}\n\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n\n\t:before {\n\t\tborder-left: 1px solid rgba(255, 255, 255, 0.3);\n\t\ttop: 0;\n\t\tz-index: 1;\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tleft: 0;\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t}\n\n\t:after {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tposition: absolute;\n\t\tborder-top: 4px solid ${pillarPalette_DO_NOT_USE[pillar].bright};\n\t\ttransition: transform 0.3s ease-in-out;\n\t}\n`;\n\nconst veggieStyles = css`\n\tbackground-color: ${brandAlt[400]};\n\tcolor: ${neutral[97]};\n\theight: 42px;\n\tmin-width: 42px;\n\tborder: 0;\n\tborder-radius: 50%;\n\toutline: none;\n\tz-index: 1;\n\tbottom: -3px;\n\tright: 20px;\n\tposition: absolute;\n\n\t${until.mobileMedium} {\n\t\tbottom: 50px;\n\t}\n\n\t${until.mobileLandscape} {\n\t\tright: 5px;\n\t}\n`;\n\nconst lineStyles = css`\n\theight: 2px;\n\tposition: absolute;\n\twidth: 20px;\n\tbackground-color: ${neutral[7]};\n`;\n\nconst pattyStyles = css`\n\tleft: 11px;\n\n\t${lineStyles};\n\n\t:before {\n\t\tcontent: '';\n\t\ttop: -6px;\n\t\tleft: 0;\n\t\t${lineStyles};\n\t}\n\n\t:after {\n\t\tcontent: '';\n\t\ttop: 6px;\n\t\tleft: 0;\n\t\t${lineStyles};\n\t}\n`;\n\nconst navRow = css`\n\tborder-top: 1px solid rgba(255, 255, 255, 0.3);\n`;\n\nconst pillarLinks = (pillars: PillarType[], guardianBaseURL: string) => (\n\t<nav>\n\t\t<ul css={pillarListStyles}>\n\t\t\t{pillars.map((p) => (\n\t\t\t\t<li css={pillarListItemStyle} key={p.title}>\n\t\t\t\t\t<a\n\t\t\t\t\t\tcss={pillarLinkStyle(p.pillar)}\n\t\t\t\t\t\thref={`${guardianBaseURL}${p.url}`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{p.title}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t</nav>\n);\n\nexport const Header: React.FC<{\n\tnav: NavType;\n\tguardianBaseURL: string;\n}> = ({ nav, guardianBaseURL }) => (\n\t<header css={headerStyles}>\n\t\t<div css={row}>\n\t\t\t<ReaderRevenueButton\n\t\t\t\tnav={nav}\n\t\t\t\trrLink=\"ampHeader\"\n\t\t\t\trrCategory=\"subscribe\"\n\t\t\t\tlinkLabel=\"Subscribe\"\n\t\t\t/>\n\n\t\t\t<a css={logoStyles} href={guardianBaseURL}>\n\t\t\t\t<span\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${visuallyHidden};\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\tThe Guardian - Back to home\n\t\t\t\t</span>\n\t\t\t\t<SvgGuardianBestWebsiteLogo\n\t\t\t\t\ttextColor={brandText.primary}\n\t\t\t\t\ttextAccentColor={brandAlt[400]}\n\t\t\t\t/>\n\t\t\t</a>\n\t\t</div>\n\n\t\t<div css={[row, navRow]}>\n\t\t\t{pillarLinks(nav.pillars, guardianBaseURL)}\n\n\t\t\t{/* Note, the actual sidebar lives directly in the body as AMP requires this :( */}\n\t\t\t<button\n\t\t\t\tcss={veggieStyles}\n\t\t\t\taria-label=\"Toggle main menu\"\n\t\t\t\ton=\"tap:sidebar1.toggle\"\n\t\t\t>\n\t\t\t\t<span css={pattyStyles} />\n\t\t\t</button>\n\t\t</div>\n\t</header>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/JsonScript.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":3,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":3,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[67,70],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[67,70],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":8,"column":4,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":8,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nexport const JsonScript: React.FC<{ o: any }> = ({ o }) => {\n\tconst JSONString: string = JSON.stringify(o);\n\treturn (\n\t\t<script\n\t\t\ttype=\"application/json\"\n\t\t\tdangerouslySetInnerHTML={{ __html: JSONString }}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/KeyEvents.tsx","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":72,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":72,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":80,"column":45,"nodeType":"Punctuator","messageId":"preferNullish","endLine":80,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1592,1594],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\theadline,\n\tneutral,\n\tsport,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport DownArrow from '../../static/icons/down-arrow.svg';\nimport { blockLink } from '../lib/block-link';\n\nconst headingStyle = css`\n\t${headline.xxsmall()};\n\tbackground-color: ${neutral[100]};\n\tpadding: 0.375rem 0.625rem;\n\tfont-weight: bold;\n\tspan {\n\t\tbackground-color: ${neutral[46]};\n\t\tfloat: right;\n\t\tposition: relative;\n\t}\n\n\tsvg {\n\t\tfill: ${neutral[100]};\n\t\tcolor: black;\n\t\tdisplay: block;\n\t}\n`;\n\nconst listItemStyle = css`\n\tdisplay: table;\n\t${textSans.small()};\n\twidth: 100%;\n\toverflow: hidden;\n\tmin-height: 2.5rem;\n\tborder-bottom: 0.0625rem solid ${neutral[86]};\n\tpadding: 0.125rem 0 0.375rem;\n`;\n\nconst timeStyle = css`\n\tdisplay: table-cell;\n\twidth: 6.75rem;\n\tfont-weight: bold;\n`;\n\nconst listTitleStyle = css`\n\tdisplay: table-cell;\n`;\n\nconst wrapper = css`\n\tmargin-bottom: 6px;\n`;\n\n// TODO text link style shouldn't be here\nconst eventLinkStyle = css`\n\tdisplay: block;\n\ttext-decoration: none;\n\tcolor: ${sport[300]};\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nconst listStyle = css`\n\tpadding: 0.375rem 0.625rem;\n`;\n\nexport const KeyEvents: React.FunctionComponent<{\n\tevents: Block[];\n\turl: string;\n}> = ({ events, url }) => {\n\tif (!events || events.length < 1) {\n\t\treturn null;\n\t}\n\n\tconst lis = events.map((event) => (\n\t\t<li css={listItemStyle} key={event.id}>\n\t\t\t<a css={eventLinkStyle} href={blockLink(url, event.id)}>\n\t\t\t\t<span css={timeStyle}>{event.blockCreatedOnDisplay}</span>\n\t\t\t\t<span css={listTitleStyle}>{event.title || ''}</span>\n\t\t\t</a>\n\t\t</li>\n\t));\n\n\treturn (\n\t\t<amp-accordion class={wrapper}>\n\t\t\t<section>\n\t\t\t\t<h2 css={headingStyle}>\n\t\t\t\t\tKey events{' '}\n\t\t\t\t\t<span>\n\t\t\t\t\t\t<DownArrow />\n\t\t\t\t\t</span>\n\t\t\t\t</h2>\n\t\t\t\t<ul css={listStyle}>{lis}</ul>\n\t\t\t</section>\n\t\t</amp-accordion>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/MainMedia.tsx","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":79,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":79,"endColumn":12},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2597,2600],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2597,2600],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":142,"column":19,"nodeType":"Identifier","messageId":"anyAssignment","endLine":142,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":153,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3053,3056],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3053,3056],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tneutral,\n\ttextSans,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport InfoIcon from '../../static/icons/info.svg';\nimport { bestFitImage, heightEstimate } from '../lib/image-fit';\nimport { scrsetStringFromImagesSources } from '../lib/srcset-utils';\nimport { YoutubeBlockComponentAMP } from './elements/YoutubeBlockComponentAMP';\n\nconst figureStyle = css`\n\tmargin: 0 0;\n\tposition: relative;\n\n\tinput:checked ~ figcaption {\n\t\tdisplay: block;\n\t}\n`;\n\nconst captionStyle = css`\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(18, 18, 18, 0.8);\n\tcolor: ${neutral[100]};\n\tdisplay: none;\n\tpadding: 6px 40px 12px 10px;\n\tmax-width: 100%;\n\tmin-height: 46px;\n\t${textSans.small()};\n`;\n\nconst inputStyle = css`\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n`;\n\nconst labelStyle = css`\n\tposition: absolute;\n\tright: 6px;\n\twidth: 32px;\n\theight: 32px;\n\tz-index: 1;\n\tbackground-color: rgba(18, 18, 18, 0.6);\n\tborder-radius: 50%;\n\tbottom: 6px;\n\n\tsvg {\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tleft: 0;\n\t\tmargin: auto;\n\t\tposition: absolute;\n\t\tfill: ${neutral[100]};\n\t}\n`;\n\nconst mainImage = (element: ImageBlockElement) => {\n\tconst containerWidth = 600;\n\tconst image: SrcSetItem = bestFitImage(\n\t\telement.imageSources,\n\t\tcontainerWidth,\n\t);\n\tconst height: number = heightEstimate(\n\t\telement.media.allImages[0],\n\t\timage.width,\n\t);\n\n\tif (!image) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<figure css={figureStyle}>\n\t\t\t<amp-img\n\t\t\t\tsrc={image.src}\n\t\t\t\talt={element.data.alt}\n\t\t\t\tattribution={element.data.credit}\n\t\t\t\theight={height.toString()}\n\t\t\t\twidth={image.width.toString()}\n\t\t\t\tlayout=\"responsive\"\n\t\t\t\tsrcset={scrsetStringFromImagesSources(element.imageSources)}\n\t\t\t/>\n\t\t\t{(element.data.caption ||\n\t\t\t\t(element.data.credit && element.displayCredit)) && (\n\t\t\t\t<>\n\t\t\t\t\t<input\n\t\t\t\t\t\taria-checked={false}\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid=\"show-caption\"\n\t\t\t\t\t\tcss={inputStyle}\n\t\t\t\t\t/>\n\t\t\t\t\t{}\n\t\t\t\t\t<label css={labelStyle} htmlFor=\"show-caption\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t${visuallyHidden}\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tShow caption\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<InfoIcon />\n\t\t\t\t\t</label>\n\t\t\t\t\t<figcaption css={captionStyle}>\n\t\t\t\t\t\t{element.data.caption}{' '}\n\t\t\t\t\t\t{element.displayCredit && element.data.credit}\n\t\t\t\t\t</figcaption>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</figure>\n\t);\n};\n\n// used to break out of the inner container margin\nconst expanded = css`\n\tmargin: 0 -10px;\n`;\n\nconst asComponent = (\n\telement: CAPIElement,\n\tpillar: ArticlePillar,\n\tadTargeting?: any,\n) => {\n\tswitch (element._type) {\n\t\tcase 'model.dotcomrendering.pageElements.ImageBlockElement':\n\t\t\treturn mainImage(element);\n\t\tcase 'model.dotcomrendering.pageElements.YoutubeBlockElement':\n\t\t\treturn (\n\t\t\t\t<YoutubeBlockComponentAMP\n\t\t\t\t\telement={element}\n\t\t\t\t\tpillar={pillar}\n\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t/>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n\nexport const MainMedia: React.FC<{\n\telement: CAPIElement;\n\tpillar: ArticleTheme;\n\tadTargeting?: any;\n}> = ({ element, pillar, adTargeting }) => {\n\treturn (\n\t\t<div css={expanded}>{asComponent(element, pillar, adTargeting)}</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Onward.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/OnwardContainer.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":103,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":111,"endColumn":6},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"SerializedStyles\" of template literal expression.","line":122,"column":9,"nodeType":"Identifier","messageId":"invalidType","endLine":122,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline, neutral, textSans } from '@guardian/source-foundations';\nimport Camera from '../../static/icons/camera.svg';\nimport Clock from '../../static/icons/clock.svg';\nimport Quote from '../../static/icons/quote.svg';\nimport VideoIcon from '../../static/icons/video-icon.svg';\nimport VolumeHigh from '../../static/icons/volume-high.svg';\nimport {\n\tMoustacheSection,\n\tMoustacheTemplate,\n\tmoustacheVariable,\n\tMoustacheVariable,\n} from './moustache';\nimport { ShowMoreButton } from './ShowMoreButton';\n\nconst inner = css`\n\tpadding-top: 3px;\n\toverflow: hidden;\n\tposition: relative;\n\tborder-top: 1px solid ${neutral[86]};\n\tmargin-top: 24px;\n`;\nconst header = css`\n\tpadding-bottom: 12px;\n\tfont-weight: 500;\n\tposition: relative;\n\t${headline.xxsmall()};\n\ttext-transform: capitalize;\n`;\nconst item = css`\n\tbackground-color: ${neutral[93]};\n\tborder-top: 1px solid ${neutral[93]};\n\tpadding-left: 126px;\n\tposition: relative;\n\theight: 75px;\n\tmargin-bottom: 12px;\n\toverflow: hidden;\n`;\nconst imageContainer = css`\n\tposition: absolute;\n\tleft: 0;\n`;\nconst itemContent = css`\n\tmin-height: 60px;\n\tpadding: 0 5px;\n\tposition: relative;\n\toverflow: hidden;\n`;\nconst link = css`\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\topacity: 0;\n\toverflow: hidden;\n\ttext-indent: 200%;\n\twhite-space: nowrap;\n\tbackground: transparent;\n`;\nconst headlineCSS = css`\n\tpadding: 0;\n\tmargin: 1px 0 4px;\n\tfont-weight: 500;\n\tword-wrap: break-word;\n\t${headline.xxxsmall()};\n`;\nconst description = css`\n\t${headline.xxxsmall()};\n\tmargin-bottom: 16px;\n`;\nconst iconCSS = css`\n\tsvg {\n\t\tfill: ${neutral[7]};\n\t\tpadding-right: 2px;\n\t\theight: 13px;\n\t\twidth: 16px;\n\t}\n`;\nconst quoteIconCSS = css`\n\tsvg {\n\t\tfill: ${neutral[60]};\n\t\tpadding-right: 2px;\n\t\theight: 13px;\n\t\twidth: 16px;\n\t}\n`;\nconst ageWarning = css`\n\tcolor: ${neutral[20]};\n\tfill: ${neutral[20]};\n\t${textSans.xxsmall()};\n`;\nconst showMore = css`\n\tbackground-color: ${neutral[100]};\n\t&[overflow] {\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t}\n`;\n\nexport const OnwardContainer = ({\n\tguardianBaseURL,\n\tpath,\n\tcomponentName,\n}: {\n\tguardianBaseURL: string;\n\tpath: string;\n\tcomponentName: string;\n}) => (\n\t<amp-list\n\t\tlayout=\"fixed-height\"\n\t\theight=\"184px\"\n\t\tsrc={path}\n\t\tcredentials=\"include\"\n\t>\n\t\t<MoustacheTemplate>\n\t\t\t<MoustacheSection name=\"showContent\">\n\t\t\t\t<div\n\t\t\t\t\tcss={`\n\t\t\t\t\t\t${inner} js-has-click-event\n\t\t\t\t\t`}\n\t\t\t\t\tdata-vars-component={componentName}\n\t\t\t\t>\n\t\t\t\t\t<div css={header}>\n\t\t\t\t\t\t<MoustacheVariable name=\"displayName\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<MoustacheSection name=\"description\">\n\t\t\t\t\t\t{/*  Don't show if there is not description WHAT STYLES HERE */}\n\t\t\t\t\t\t<div css={description}>\n\t\t\t\t\t\t\t<MoustacheVariable name=\"description\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</MoustacheSection>\n\n\t\t\t\t\t<MoustacheSection name=\"content\">\n\t\t\t\t\t\t<MoustacheSection name=\"headline\">\n\t\t\t\t\t\t\t{/* Don't show if headline is empty */}\n\t\t\t\t\t\t\t<div css={item}>\n\t\t\t\t\t\t\t\t<div css={imageContainer}>\n\t\t\t\t\t\t\t\t\t<amp-img\n\t\t\t\t\t\t\t\t\t\tsrc={moustacheVariable('thumbnail')}\n\t\t\t\t\t\t\t\t\t\tlayout=\"fixed\"\n\t\t\t\t\t\t\t\t\t\twidth=\"126\"\n\t\t\t\t\t\t\t\t\t\theight=\"75\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div css={itemContent}>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<h2 css={headlineCSS}>\n\t\t\t\t\t\t\t\t\t\t\t<span css={iconCSS}>\n\t\t\t\t\t\t\t\t\t\t\t\t<MoustacheSection name=\"isVideo\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VideoIcon />\n\t\t\t\t\t\t\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t\t\t\t\t\t\t<MoustacheSection name=\"isGallery\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Camera />\n\t\t\t\t\t\t\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t\t\t\t\t\t\t<MoustacheSection name=\"isAudio\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<VolumeHigh />\n\t\t\t\t\t\t\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<span css={quoteIconCSS}>\n\t\t\t\t\t\t\t\t\t\t\t\t<MoustacheSection name=\"isComment\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Quote />\n\t\t\t\t\t\t\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t<MoustacheVariable name=\"headline\" />\n\t\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t\t\t<MoustacheSection name=\"isComment\">\n\t\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t\t<MoustacheVariable name=\"byline\" />\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<aside css={ageWarning}>\n\t\t\t\t\t\t\t\t\t\t<time>\n\t\t\t\t\t\t\t\t\t\t\t<MoustacheSection name=\"showWebPublicationDate\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Clock />{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t<MoustacheVariable name=\"webPublicationDate\" />\n\t\t\t\t\t\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tcss={link}\n\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\tguardianBaseURL +\n\t\t\t\t\t\t\t\t\t\tmoustacheVariable('url')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<MoustacheVariable name=\"headline\" />\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</MoustacheSection>\n\t\t\t\t\t</MoustacheSection>\n\t\t\t\t</div>\n\t\t\t</MoustacheSection>\n\t\t</MoustacheTemplate>\n\t\t<div overflow=\"\" css={showMore}>\n\t\t\t<ShowMoreButton />\n\t\t</div>\n\t</amp-list>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Pagination.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":28,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":39,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":39,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":43,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Pagination } from './Pagination';\n\nexport default {\n\tcomponent: Pagination,\n\ttitle: 'AMP/Components/Pagination',\n};\n\nconst pagination: Pagination = {\n\tcurrentPage: 1,\n\ttotalPages: 2,\n\toldest: '?page=with:block-5b3ad778e4b05bcf5a69676d',\n\tolder: '?page=with:block-5b3b2ef5e4b05bcf5a6968f4',\n\tnewest: '?page=with:block-5b3ad778e4b05bcf5a69676d',\n\tnewer: '?page=with:block-5b3b2ef5e4b05bcf5a6968f4',\n};\n\nexport const PaginationDefault = () => (\n\t<Pagination pagination={pagination} guardianURL=\"\" />\n);\n\nconst paginationOlder: Pagination = {\n\tcurrentPage: 1,\n\ttotalPages: 2,\n\toldest: '?page=with:block-5b3ad778e4b05bcf5a69676d',\n\tolder: '?page=with:block-5b3b2ef5e4b05bcf5a6968f4',\n};\n\nexport const PaginationWithOlder = () => (\n\t<Pagination pagination={paginationOlder} guardianURL=\"\" />\n);\n\nconst paginationNewer: Pagination = {\n\tcurrentPage: 1,\n\ttotalPages: 2,\n\tnewest: '?page=with:block-5b3ad778e4b05bcf5a69676d',\n\tnewer: '?page=with:block-5b3b2ef5e4b05bcf5a6968f4',\n};\n\nexport const PaginationWithNewer = () => (\n\t<Pagination pagination={paginationNewer} guardianURL=\"\" />\n);\n\nexport const EmptyPagination = () => <Pagination guardianURL=\"\" />;\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/ReaderRevenueButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/RegionalAd.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":77,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":79,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":78,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":78,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3304,3306],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":80,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":82,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":81,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":81,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3426,3428],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":83,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":85,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":84,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":84,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3548,3550],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":86,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":88,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":87,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":87,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3671,3673],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":126,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":128,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":127,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":127,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4800,4802],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":129,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":131,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":130,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":130,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4922,4924],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":132,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":134,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":133,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":133,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5044,5046],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":135,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":137,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":136,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":136,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5167,5169],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":175,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":177,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":176,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":176,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6252,6254],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":178,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":180,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":179,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":179,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6374,6376],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":181,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":183,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":182,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":182,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6496,6498],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":184,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":186,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":185,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":185,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6619,6621],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":224,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":226,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":225,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":225,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7749,7751],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":227,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":229,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":228,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":228,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7871,7873],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":230,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":232,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":231,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":231,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7993,7995],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":233,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":235,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":234,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":234,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8116,8118],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":273,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":275,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":274,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":274,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9199,9201],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":276,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":278,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":277,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":277,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9321,9323],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":279,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":281,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":280,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":280,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9443,9445],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":282,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":284,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":283,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":283,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9566,9568],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":322,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":324,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":323,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":323,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[10678,10680],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":325,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":327,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":326,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":326,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[10800,10802],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":328,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":330,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":329,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":329,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[10922,10924],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":331,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":333,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":332,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":332,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11045,11047],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":374,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":376,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":375,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":375,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12305,12307],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":377,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":379,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":378,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":378,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12427,12429],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":380,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":382,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":381,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":381,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12549,12551],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":383,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":385,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":384,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":384,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12672,12674],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":434,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":436,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":435,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":435,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14231,14233],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":437,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":439,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":438,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":438,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14353,14355],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":440,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":442,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":441,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":441,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14475,14477],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":443,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":445,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":444,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":444,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14598,14600],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":64,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render } from '@testing-library/react';\nimport { ContentABTestProvider } from './ContentABTest';\nimport { RegionalAd } from './RegionalAd';\n\ndescribe('RegionalAd', () => {\n\tconst permutiveURL =\n\t\t'https://guardian.amp.permutive.com/rtc?type=doubleclick';\n\n\tconst ukRelevantYieldURL =\n\t\t'https://pbs.relevant-digital.com/openrtb2/amp?tag_id=6214ca675cf18e70cbaeef37_6214c9a4b73a6613d4aeef2f&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&targeting=TGT&curl=CANONICAL_URL&timeout=TIMEOUT&adcid=ADCID&purl=HREF&gdpr_consent=CONSENT_STRING&tgt_pfx=rv&dummy_param=ATTR(data-amp-slot-index)';\n\tconst usRelevantYieldURL =\n\t\t'https://pbs.relevant-digital.com/openrtb2/amp?tag_id=6214cb381a577cd525aeef3f_6214caacb52b565527aeef39&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&targeting=TGT&curl=CANONICAL_URL&timeout=TIMEOUT&adcid=ADCID&purl=HREF&gdpr_consent=CONSENT_STRING&tgt_pfx=rv&dummy_param=ATTR(data-amp-slot-index)';\n\tconst auRelevantYieldURL =\n\t\t'https://pbs.relevant-digital.com/openrtb2/amp?tag_id=6214cbe6a24103508faeef45_6214cb50aac9c1160daeef40&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&targeting=TGT&curl=CANONICAL_URL&timeout=TIMEOUT&adcid=ADCID&purl=HREF&gdpr_consent=CONSENT_STRING&tgt_pfx=rv&dummy_param=ATTR(data-amp-slot-index)';\n\tconst intRelevantYieldURL =\n\t\t'https://pbs.relevant-digital.com/openrtb2/amp?tag_id=6214ca56243f4ff4f5aeef36_6214c723c70856442e4d79f2&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&targeting=TGT&curl=CANONICAL_URL&timeout=TIMEOUT&adcid=ADCID&purl=HREF&gdpr_consent=CONSENT_STRING&tgt_pfx=rv&dummy_param=ATTR(data-amp-slot-index)';\n\n\tconst apsVendorObj = {\n\t\taps: { PUB_ID: '3722', PARAMS: { amp: '1' } },\n\t};\n\n\tconst ukPubmaticVendorObj = {\n\t\topenwrap: {\n\t\t\tPROFILE_ID: '6611',\n\t\t\tPUB_ID: '157207',\n\t\t},\n\t};\n\tconst usPubmaticVendorObj = {\n\t\topenwrap: {\n\t\t\tPROFILE_ID: '6696',\n\t\t\tPUB_ID: '157206',\n\t\t},\n\t};\n\tconst auPubmaticVendorObj = {\n\t\topenwrap: {\n\t\t\tPROFILE_ID: '6697',\n\t\t\tPUB_ID: '157203',\n\t\t},\n\t};\n\tconst intPubmaticVendorObj = {\n\t\topenwrap: {\n\t\t\tPROFILE_ID: '6611',\n\t\t\tPUB_ID: '157207',\n\t\t},\n\t};\n\n\tit('with no ab test running rtc-config contains just a permutive URL when `usePermutive` and `usePrebid` flags are set to true', () => {\n\t\tconst { container } = render(\n\t\t\t<ContentABTestProvider pageId=\"\" switches={{}}>\n\t\t\t\t<RegionalAd\n\t\t\t\t\tedition=\"UK\"\n\t\t\t\t\tsection=\"\"\n\t\t\t\t\tcontentType=\"\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tusePrebid: true,\n\t\t\t\t\t\tusePermutive: true,\n\t\t\t\t\t\tuseAmazon: false,\n\t\t\t\t\t}}\n\t\t\t\t\tcommercialProperties={{\n\t\t\t\t\t\tUK: { adTargeting: [] },\n\t\t\t\t\t\tUS: { adTargeting: [] },\n\t\t\t\t\t\tAU: { adTargeting: [] },\n\t\t\t\t\t\tINT: { adTargeting: [] },\n\t\t\t\t\t}}\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ContentABTestProvider>,\n\t\t);\n\n\t\tconst ampAdElement = container.querySelectorAll('amp-ad');\n\n\t\texpect(ampAdElement).not.toBeNull();\n\n\t\tconst ukRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[0].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst usRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[1].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst auRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[2].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst intRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[3].getAttribute('rtc-config') || '{}',\n\t\t);\n\n\t\texpect(ukRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(usRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(auRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(intRtcAttribute.urls).toEqual([permutiveURL]);\n\t});\n\n\tit('with no ab test running rtc-config contains just no prebid URL when `usePermutive` is false and `usePrebid` is true', () => {\n\t\tconst { container } = render(\n\t\t\t<ContentABTestProvider pageId=\"\" switches={{}}>\n\t\t\t\t<RegionalAd\n\t\t\t\t\tedition=\"UK\"\n\t\t\t\t\tsection=\"\"\n\t\t\t\t\tcontentType=\"\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tusePrebid: true,\n\t\t\t\t\t\tusePermutive: false,\n\t\t\t\t\t\tuseAmazon: false,\n\t\t\t\t\t}}\n\t\t\t\t\tcommercialProperties={{\n\t\t\t\t\t\tUK: { adTargeting: [] },\n\t\t\t\t\t\tUS: { adTargeting: [] },\n\t\t\t\t\t\tAU: { adTargeting: [] },\n\t\t\t\t\t\tINT: { adTargeting: [] },\n\t\t\t\t\t}}\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ContentABTestProvider>,\n\t\t);\n\n\t\tconst ampAdElement = container.querySelectorAll('amp-ad');\n\n\t\texpect(ampAdElement).not.toBeNull();\n\n\t\tconst ukRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[0].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst usRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[1].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst auRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[2].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst intRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[3].getAttribute('rtc-config') || '{}',\n\t\t);\n\n\t\texpect(ukRtcAttribute.urls).toEqual([]);\n\t\texpect(usRtcAttribute.urls).toEqual([]);\n\t\texpect(auRtcAttribute.urls).toEqual([]);\n\t\texpect(intRtcAttribute.urls).toEqual([]);\n\t});\n\n\tit('with no ab test running rtc-config contains just the permutive URL when `usePermutive` is true and `usePrebid` is false', () => {\n\t\tconst { container } = render(\n\t\t\t<ContentABTestProvider pageId=\"\" switches={{}}>\n\t\t\t\t<RegionalAd\n\t\t\t\t\tedition=\"UK\"\n\t\t\t\t\tsection=\"\"\n\t\t\t\t\tcontentType=\"\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tusePrebid: false,\n\t\t\t\t\t\tusePermutive: true,\n\t\t\t\t\t\tuseAmazon: false,\n\t\t\t\t\t}}\n\t\t\t\t\tcommercialProperties={{\n\t\t\t\t\t\tUK: { adTargeting: [] },\n\t\t\t\t\t\tUS: { adTargeting: [] },\n\t\t\t\t\t\tAU: { adTargeting: [] },\n\t\t\t\t\t\tINT: { adTargeting: [] },\n\t\t\t\t\t}}\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ContentABTestProvider>,\n\t\t);\n\n\t\tconst ampAdElement = container.querySelectorAll('amp-ad');\n\n\t\texpect(ampAdElement).not.toBeNull();\n\n\t\tconst ukRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[0].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst usRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[1].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst auRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[2].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst intRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[3].getAttribute('rtc-config') || '{}',\n\t\t);\n\n\t\texpect(ukRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(usRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(auRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(intRtcAttribute.urls).toEqual([permutiveURL]);\n\t});\n\n\tit('with no ab test running rtc-config contains no URLs when `usePermutive` and `usePrebid` flags are both set to false', () => {\n\t\tconst { container } = render(\n\t\t\t<ContentABTestProvider pageId=\"\" switches={{}}>\n\t\t\t\t<RegionalAd\n\t\t\t\t\tedition=\"UK\"\n\t\t\t\t\tsection=\"\"\n\t\t\t\t\tcontentType=\"\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tusePrebid: false,\n\t\t\t\t\t\tusePermutive: false,\n\t\t\t\t\t\tuseAmazon: false,\n\t\t\t\t\t}}\n\t\t\t\t\tcommercialProperties={{\n\t\t\t\t\t\tUK: { adTargeting: [] },\n\t\t\t\t\t\tUS: { adTargeting: [] },\n\t\t\t\t\t\tAU: { adTargeting: [] },\n\t\t\t\t\t\tINT: { adTargeting: [] },\n\t\t\t\t\t}}\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ContentABTestProvider>,\n\t\t);\n\n\t\tconst ampAdElement = container.querySelectorAll('amp-ad');\n\n\t\texpect(ampAdElement).not.toBeNull();\n\n\t\tconst ukRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[0].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst usRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[1].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst auRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[2].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst intRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[3].getAttribute('rtc-config') || '{}',\n\t\t);\n\n\t\texpect(ukRtcAttribute.urls).toHaveLength(0);\n\t\texpect(usRtcAttribute.urls).toHaveLength(0);\n\t\texpect(auRtcAttribute.urls).toHaveLength(0);\n\t\texpect(intRtcAttribute.urls).toHaveLength(0);\n\t});\n\n\tit('with no ab test running rtc-config contains the correct vendor config when `useAmazon` is set to true', () => {\n\t\tconst { container } = render(\n\t\t\t<ContentABTestProvider pageId=\"\" switches={{}}>\n\t\t\t\t<RegionalAd\n\t\t\t\t\tedition=\"UK\"\n\t\t\t\t\tsection=\"\"\n\t\t\t\t\tcontentType=\"\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tusePrebid: false,\n\t\t\t\t\t\tusePermutive: false,\n\t\t\t\t\t\tuseAmazon: true,\n\t\t\t\t\t}}\n\t\t\t\t\tcommercialProperties={{\n\t\t\t\t\t\tUK: { adTargeting: [] },\n\t\t\t\t\t\tUS: { adTargeting: [] },\n\t\t\t\t\t\tAU: { adTargeting: [] },\n\t\t\t\t\t\tINT: { adTargeting: [] },\n\t\t\t\t\t}}\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ContentABTestProvider>,\n\t\t);\n\n\t\tconst ampAdElement = container.querySelectorAll('amp-ad');\n\n\t\texpect(ampAdElement).not.toBeNull();\n\n\t\tconst ukRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[0].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst usRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[1].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst auRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[2].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst intRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[3].getAttribute('rtc-config') || '{}',\n\t\t);\n\n\t\texpect(ukRtcAttribute.vendors).toEqual(apsVendorObj);\n\t\texpect(usRtcAttribute.vendors).toEqual(apsVendorObj);\n\t\texpect(auRtcAttribute.vendors).toEqual(apsVendorObj);\n\t\texpect(intRtcAttribute.vendors).toEqual(apsVendorObj);\n\t});\n\n\tit('with no ab test running rtc-config contains no vendor config when `useAmazon` is set to false', () => {\n\t\tconst { container } = render(\n\t\t\t<ContentABTestProvider pageId=\"\" switches={{}}>\n\t\t\t\t<RegionalAd\n\t\t\t\t\tedition=\"UK\"\n\t\t\t\t\tsection=\"\"\n\t\t\t\t\tcontentType=\"\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tusePrebid: false,\n\t\t\t\t\t\tusePermutive: false,\n\t\t\t\t\t\tuseAmazon: false,\n\t\t\t\t\t}}\n\t\t\t\t\tcommercialProperties={{\n\t\t\t\t\t\tUK: { adTargeting: [] },\n\t\t\t\t\t\tUS: { adTargeting: [] },\n\t\t\t\t\t\tAU: { adTargeting: [] },\n\t\t\t\t\t\tINT: { adTargeting: [] },\n\t\t\t\t\t}}\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ContentABTestProvider>,\n\t\t);\n\n\t\tconst ampAdElement = container.querySelectorAll('amp-ad');\n\n\t\texpect(ampAdElement).not.toBeNull();\n\n\t\tconst ukRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[0].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst usRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[1].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst auRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[2].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst intRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[3].getAttribute('rtc-config') || '{}',\n\t\t);\n\n\t\texpect(ukRtcAttribute.vendors).toEqual({});\n\t\texpect(usRtcAttribute.vendors).toEqual({});\n\t\texpect(auRtcAttribute.vendors).toEqual({});\n\t\texpect(intRtcAttribute.vendors).toEqual({});\n\t});\n\n\tit('with ab test running and in relevant yield variant, rtc-config contains permutive and relevant yield URLs when `usePermutive` and `usePrebid` flags are set to true', () => {\n\t\tconst { container } = render(\n\t\t\t<ContentABTestProvider\n\t\t\t\tpageId=\"food/2022/feb/15/air-fryers-miraculous-kitchen-must-have-or-just-a-load-of-hot-air\"\n\t\t\t\tswitches={{ ampContentAbTesting: true }}\n\t\t\t>\n\t\t\t\t<RegionalAd\n\t\t\t\t\tedition=\"UK\"\n\t\t\t\t\tsection=\"\"\n\t\t\t\t\tcontentType=\"\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tusePrebid: true,\n\t\t\t\t\t\tusePermutive: true,\n\t\t\t\t\t\tuseAmazon: true,\n\t\t\t\t\t}}\n\t\t\t\t\tcommercialProperties={{\n\t\t\t\t\t\tUK: { adTargeting: [] },\n\t\t\t\t\t\tUS: { adTargeting: [] },\n\t\t\t\t\t\tAU: { adTargeting: [] },\n\t\t\t\t\t\tINT: { adTargeting: [] },\n\t\t\t\t\t}}\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ContentABTestProvider>,\n\t\t);\n\n\t\tconst ampAdElement = container.querySelectorAll('amp-ad');\n\n\t\texpect(ampAdElement).not.toBeNull();\n\n\t\tconst ukRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[0].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst usRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[1].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst auRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[2].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst intRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[3].getAttribute('rtc-config') || '{}',\n\t\t);\n\n\t\texpect(ukRtcAttribute.urls).toEqual([ukRelevantYieldURL, permutiveURL]);\n\t\texpect(usRtcAttribute.urls).toEqual([usRelevantYieldURL, permutiveURL]);\n\t\texpect(auRtcAttribute.urls).toEqual([auRelevantYieldURL, permutiveURL]);\n\t\texpect(intRtcAttribute.urls).toEqual([\n\t\t\tintRelevantYieldURL,\n\t\t\tpermutiveURL,\n\t\t]);\n\n\t\texpect(ukRtcAttribute.vendors).toEqual(apsVendorObj);\n\t\texpect(usRtcAttribute.vendors).toEqual(apsVendorObj);\n\t\texpect(auRtcAttribute.vendors).toEqual(apsVendorObj);\n\t\texpect(intRtcAttribute.vendors).toEqual(apsVendorObj);\n\t});\n\n\tit('with ab test running and in Pubmatic variant, rtc-config contains Permutive UR and Pubmatic vendor when `usePermutive` and `usePrebid` flags are set to true', () => {\n\t\tconst { container } = render(\n\t\t\t<ContentABTestProvider\n\t\t\t\tpageId=\"money/2004/may/13/homeimprovements\"\n\t\t\t\tswitches={{ ampContentAbTesting: true }}\n\t\t\t>\n\t\t\t\t<RegionalAd\n\t\t\t\t\tedition=\"UK\"\n\t\t\t\t\tsection=\"\"\n\t\t\t\t\tcontentType=\"\"\n\t\t\t\t\tconfig={{\n\t\t\t\t\t\tusePrebid: true,\n\t\t\t\t\t\tusePermutive: true,\n\t\t\t\t\t\tuseAmazon: true,\n\t\t\t\t\t}}\n\t\t\t\t\tcommercialProperties={{\n\t\t\t\t\t\tUK: { adTargeting: [] },\n\t\t\t\t\t\tUS: { adTargeting: [] },\n\t\t\t\t\t\tAU: { adTargeting: [] },\n\t\t\t\t\t\tINT: { adTargeting: [] },\n\t\t\t\t\t}}\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</ContentABTestProvider>,\n\t\t);\n\n\t\tconst ampAdElement = container.querySelectorAll('amp-ad');\n\n\t\texpect(ampAdElement).not.toBeNull();\n\n\t\tconst ukRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[0].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst usRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[1].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst auRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[2].getAttribute('rtc-config') || '{}',\n\t\t);\n\t\tconst intRtcAttribute: Record<string, unknown> = JSON.parse(\n\t\t\tampAdElement[3].getAttribute('rtc-config') || '{}',\n\t\t);\n\n\t\texpect(ukRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(usRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(auRtcAttribute.urls).toEqual([permutiveURL]);\n\t\texpect(intRtcAttribute.urls).toEqual([permutiveURL]);\n\n\t\texpect(ukRtcAttribute.vendors).toEqual({\n\t\t\t...ukPubmaticVendorObj,\n\t\t\t...apsVendorObj,\n\t\t});\n\t\texpect(usRtcAttribute.vendors).toEqual({\n\t\t\t...usPubmaticVendorObj,\n\t\t\t...apsVendorObj,\n\t\t});\n\t\texpect(auRtcAttribute.vendors).toEqual({\n\t\t\t...auPubmaticVendorObj,\n\t\t\t...apsVendorObj,\n\t\t});\n\t\texpect(intRtcAttribute.vendors).toEqual({\n\t\t\t...intPubmaticVendorObj,\n\t\t\t...apsVendorObj,\n\t\t});\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/RegionalAd.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ClassNames } from '@emotion/react';\nimport { getRTCParameters } from '../lib/real-time-config';\nimport { adRegions, regionClasses } from '../lib/region-classes';\nimport type { BaseAdProps } from './Ad';\nimport { Ad } from './Ad';\n\n/**\n * Ad slot component whose config differs based on region.\n * For each adRegion, create an Ad component with styling so that all but the component for the\n * user's region are hidden\n * @param RegionalAdProps\n * @returns an Ad component per region\n */\nexport const RegionalAd = ({\n\tedition,\n\tsection,\n\tcontentType,\n\tcommercialProperties,\n\tconfig,\n\tadTargeting,\n}: BaseAdProps) => (\n\t<>\n\t\t{adRegions.map((adRegion) => (\n\t\t\t<ClassNames key={adRegion}>\n\t\t\t\t{({ css, cx }) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={cx(\n\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t${regionClasses[adRegion].styles}\n\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Ad\n\t\t\t\t\t\t\tisSticky={false}\n\t\t\t\t\t\t\tedition={edition}\n\t\t\t\t\t\t\tsection={section}\n\t\t\t\t\t\t\tcontentType={contentType}\n\t\t\t\t\t\t\tcommercialProperties={commercialProperties}\n\t\t\t\t\t\t\tconfig={config}\n\t\t\t\t\t\t\trtcParameters={getRTCParameters({ adRegion })}\n\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</ClassNames>\n\t\t))}\n\t</>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/ShareIcons.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":81,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":81,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":82,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":82,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":83,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":83,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":84,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":84,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":85,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":85,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":86,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":86,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { visuallyHidden } from '@guardian/source-foundations';\nimport React from 'react';\nimport {\n\tneutralBorder,\n\tpillarMap,\n\tpillarPalette_DO_NOT_USE,\n} from '../../lib/pillars';\nimport EmailIcon from '../../static/icons/email.svg';\nimport FacebookIcon from '../../static/icons/facebook.svg';\nimport LinkedInIcon from '../../static/icons/linked-in.svg';\nimport MessengerIcon from '../../static/icons/messenger.svg';\nimport TwitterIconPadded from '../../static/icons/twitter-padded.svg';\nimport WhatsAppIcon from '../../static/icons/whatsapp.svg';\n\nconst pillarFill = pillarMap(\n\t(pillar) =>\n\t\tcss`\n\t\t\tfill: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\t`,\n);\n\nconst shareIconsListItem = css`\n\tpadding: 0 3px 6px 0;\n\tdisplay: inline-block;\n\tmin-width: 32px;\n`;\n\nconst shareIcon = (pillar: ArticleTheme) => css`\n\tborder: 1px solid ${neutralBorder(pillar)};\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmin-width: 32px;\n\tmax-width: 100%;\n\twidth: auto;\n\theight: 32px;\n\tborder-radius: 50%;\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: relative;\n\tbox-sizing: content-box;\n\n\tsvg {\n\t\theight: 88%;\n\t\twidth: 88%;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tleft: 0;\n\t\tmargin: auto;\n\t\tposition: absolute;\n\t}\n\n\t:hover {\n\t\tbackground-color: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\tborder-color: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\tfill: white;\n\t}\n`;\n\ninterface ShareListItemType {\n\tid: SharePlatform;\n\tIcon: React.ComponentType;\n\turl: string;\n\tuserMessage: string;\n\tmobileOnly: boolean;\n}\n\nexport const ShareIcons: React.FC<{\n\tsharingUrls: {\n\t\t[K in SharePlatform]?: {\n\t\t\turl: string;\n\t\t\tuserMessage: string;\n\t\t};\n\t};\n\tdisplayIcons: SharePlatform[];\n\tpillar: ArticleTheme;\n}> = ({ sharingUrls, displayIcons, pillar }) => {\n\tconst icons: { [K in SharePlatform]?: React.ComponentType } = {\n\t\tfacebook: FacebookIcon,\n\t\ttwitter: TwitterIconPadded,\n\t\temail: EmailIcon,\n\t\tlinkedIn: LinkedInIcon,\n\t\twhatsApp: WhatsAppIcon,\n\t\tmessenger: MessengerIcon,\n\t};\n\n\tconst mobileOnlyIcons: SharePlatform[] = ['whatsApp', 'messenger'];\n\n\tconst shareList = displayIcons.reduce((list: ShareListItemType[], id) => {\n\t\tconst icon = icons[id];\n\t\tconst sharingUrl = sharingUrls[id];\n\n\t\tif (icon && sharingUrl) {\n\t\t\tconst listItem: ShareListItemType = {\n\t\t\t\tid,\n\t\t\t\tIcon: icon,\n\t\t\t\tmobileOnly: mobileOnlyIcons.includes(id),\n\t\t\t\t...sharingUrl,\n\t\t\t};\n\t\t\tlist.push(listItem);\n\t\t}\n\n\t\treturn list;\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t{shareList.map((shareListItem) => {\n\t\t\t\tconst { Icon, id, url, userMessage } = shareListItem;\n\n\t\t\t\treturn (\n\t\t\t\t\t<li css={shareIconsListItem} key={`${id}Share`}>\n\t\t\t\t\t\t<a href={url} role=\"button\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t${visuallyHidden};\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{userMessage}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span css={[shareIcon(pillar), pillarFill[pillar]]}>\n\t\t\t\t\t\t\t\t<Icon />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/ShowMoreButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/Sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[577,580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[577,580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":228,"column":10,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":230,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ClassNames } from '@emotion/react';\nimport {\n\tbrand,\n\tbrandAlt,\n\theadline,\n\tneutral,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport { createAuthenticationEventParams } from '../../lib/identity-component-event';\n\nexport const Sidebar: React.FC<{ nav: NavType }> = () => {\n\t// this next line is necessary cos react has a 'template' object with no 'type' property.\n\t// By saying 'as {}' we can pretend we're not adding the 'type' property and thus avoid unhappy type errors\n\tconst props = { type: 'amp-mustache' } as { [key: string]: any };\n\treturn (\n\t\t<ClassNames>\n\t\t\t{({ css, cx }) => {\n\t\t\t\tconst sidebarStyles = css`\n\t\t\t\t\twidth: 80vh;\n\t\t\t\t\tbackground-color: ${brand[400]};\n\n\t\t\t\t\t[aria-expanded='true'] {\n\t\t\t\t\t\ti {\n\t\t\t\t\t\t\tmargin-top: 0px;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ti:before {\n\t\t\t\t\t\t\ttransform: rotate(-135deg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`;\n\n\t\t\t\tconst menuGroup = css`\n\t\t\t\t\tpadding-bottom: 0.75rem;\n\t\t\t\t`;\n\n\t\t\t\tconst toggle = css`\n\t\t\t\t\ti {\n\t\t\t\t\t\tmargin-top: -4px;\n\t\t\t\t\t\tleft: 25px;\n\t\t\t\t\t\tposition: absolute;\n\n\t\t\t\t\t\t:before {\n\t\t\t\t\t\t\tborder: 2px solid ${neutral[100]};\n\t\t\t\t\t\t\tborder-top: 0;\n\t\t\t\t\t\t\tborder-left: 0;\n\t\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\theight: 8px;\n\t\t\t\t\t\t\ttransform: rotate(45deg);\n\t\t\t\t\t\t\twidth: 8px;\n\t\t\t\t\t\t\tcolor: ${neutral[100]};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`;\n\n\t\t\t\tconst pillarLink = css`\n\t\t\t\t\tbackground-color: transparent;\n\t\t\t\t\tborder: 0;\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\t${headline.xsmall()};\n\t\t\t\t\toutline: none;\n\t\t\t\t\tpadding: 6px 10px 16px 50px;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tfont-weight: 700;\n\t\t\t\t\tcolor: ${neutral[100]};\n\t\t\t\t\t${toggle};\n\t\t\t\t`;\n\n\t\t\t\tconst link = css`\n\t\t\t\t\tbackground-color: transparent;\n\t\t\t\t\tborder: 0;\n\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\tcolor: ${neutral[100]};\n\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\t${textSans.large({ lineHeight: 'tight' })};\n\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\toutline: none;\n\t\t\t\t\tpadding: 8px 10px 8px 50px;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t`;\n\n\t\t\t\tconst subLinks = css`\n\t\t\t\t\tbackground-color: ${brand[300]};\n\t\t\t\t\tpadding-bottom: 12px;\n\n\t\t\t\t\ta {\n\t\t\t\t\t\t${link};\n\t\t\t\t\t}\n\t\t\t\t`;\n\n\t\t\t\tconst otherLinks = css`\n\t\t\t\t\ta {\n\t\t\t\t\t\t${link};\n\t\t\t\t\t}\n\t\t\t\t`;\n\n\t\t\t\tconst membershipLinks = css`\n\t\t\t\t\ta {\n\t\t\t\t\t\tfont-weight: 700;\n\t\t\t\t\t\tcolor: ${brandAlt[400]};\n\t\t\t\t\t}\n\t\t\t\t`;\n\n\t\t\t\tconst pillarStyles = css`\n\t\t\t\t\tposition: relative;\n\n\t\t\t\t\t:not(:last-child):after {\n\t\t\t\t\t\tbackground-color: rgba(255, 255, 255, 0.3);\n\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\theight: 1px;\n\t\t\t\t\t\tleft: 50px;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\t\t\t`;\n\n\t\t\t\tconst editionLink = css`\n\t\t\t\t\t${toggle};\n\t\t\t\t`;\n\n\t\t\t\tconst template = `\n\t\t\t<ul class=${menuGroup}>\n\t\t\t{{ #topLevelSections }}\n\t\t\t\t<li class=${pillarStyles}>\n\t\t\t\t\t<amp-accordion>\n\t\t\t\t\t\t<section>\n\t\t\t\t\t\t\t<h2 class=${pillarLink}\n\t\t\t\t\t\t\t\tdata-link-name=\"amp : nav : secondary : {{ title }}\">\n\t\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t</h2>\n\n\t\t\t\t\t\t\t<ul class=${subLinks}>\n\t\t\t\t\t\t\t\t{{ #subSections }}\n\t\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref=\"{{ url }}\"\n\t\t\t\t\t\t\t\t\t\t\tdata-link-name=\"amp : nav : secondary : {{ title }}\">\n\t\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t{{ /subSections }}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</amp-accordion>\n\t\t\t\t</li>\n\t\t\t{{ /topLevelSections }}\n\t\t\t</ul>\n\n\t\t\t<ul class=${otherLinks}>\n\t\t\t{{ #readerRevenueLinks }}\n\t\t\t\t<li class=${membershipLinks}\n\t\t\t\t\trole=\"menuitem\">\n\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"{{ url }}\"\n\t\t\t\t\t\tdata-link-name=\"amp : nav : {{ title }}\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t{{ /readerRevenueLinks }}\n\n\t\t\t<li>\n\t\t\t\t<a href=\"https://profile.theguardian.com/signin?INTCMP=DOTCOM_NEWHEADER_SIGNIN&ABCMP=ab-sign-in&${createAuthenticationEventParams(\n\t\t\t\t\t'amp_sidebar_signin',\n\t\t\t\t)}\"\n\t\t\t\t\tdata-link-name=\"amp : nav : sign in\">\n\t\t\t\t\tSign in / Register\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t\t</ul>\n\n\t\t\t<amp-accordion>\n\t\t\t<section>\n\t\t\t\t<h2 class=${cx(link, editionLink)}>\n\t\t\t\t\t<i></i>\n\t\t\t\t\tSwitch edition\n\t\t\t\t</h2>\n\n\t\t\t\t<ul class=${subLinks}>\n\t\t\t\t{{ #editions }}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a data-link-name=\"amp : nav : edition-picker : {{ id }}\"\n\t\t\t\t\t\thref=\"{{ optInLink }}\">\n\t\t\t\t\t\t   {{ displayName }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t{{ /editions }}\n\t\t\t\t</ul>\n\t\t\t</section>\n\t\t\t</amp-accordion>\n\n\t\t\t<ul class=${cx(otherLinks, menuGroup)}>\n\t\t\t{{ #secondarySections }}\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"{{ url }}\"\n\t\t\t\t\t\tdata-link-name=\"amp : nav : {{ title }}\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t{{ /secondarySections }}\n\t\t\t</ul>\n\t\t\t`;\n\n\t\t\t\treturn (\n\t\t\t\t\t<amp-sidebar\n\t\t\t\t\t\tclass={sidebarStyles}\n\t\t\t\t\t\tlayout=\"nodisplay\"\n\t\t\t\t\t\tid=\"sidebar1\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<amp-list\n\t\t\t\t\t\t\tlayout=\"fill\"\n\t\t\t\t\t\t\tsrc=\"https://amp.theguardian.com/editionalised-nav.json\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t<template {...props}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t__html: template,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</amp-list>\n\t\t\t\t\t</amp-sidebar>\n\t\t\t\t);\n\t\t\t}}\n\t\t</ClassNames>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/StarRating.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":36,"column":56,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":36,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brandAlt } from '@guardian/source-foundations';\nimport React from 'react';\nimport { Star } from '../../static/icons/Star';\n\nconst ratingsWrapper = css`\n\tbackground-color: ${brandAlt[400]};\n\tdisplay: inline-block;\n`;\n\nconst largeSize = css`\n\tpadding: 6px 10px;\n\tsvg {\n\t\twidth: 20px;\n\t\theight: 20px;\n\t}\n`;\n\nconst smallSize = css`\n\tpadding: 2px;\n\tsvg {\n\t\twidth: 15px;\n\t\theight: 15px;\n\t}\n`;\n\nexport const StarRating: React.FC<{\n\trating: number;\n\tsize: string;\n}> = ({ rating, size }) => {\n\tconst sizeClass = size === 'large' ? largeSize : smallSize;\n\tconst stars = (n: number) => {\n\t\treturn Array(5)\n\t\t\t.fill(0)\n\t\t\t.map((_, i) => (\n\t\t\t\t<Star starId={`${size}${i}`} isEmpty={i >= n} key={i} />\n\t\t\t));\n\t};\n\treturn <div css={[ratingsWrapper, sizeClass]}>{stars(rating)}</div>;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/StickyAd.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { text, textSans } from '@guardian/source-foundations';\nimport { getRTCParameters } from '../lib/real-time-config';\nimport type { BaseAdProps } from './Ad';\nimport { Ad } from './Ad';\n\n// This CSS should be imported and added to global styles in amp/server/document.tsx to add the Advertisement label to the sticky\nexport const stickyAdLabelCss = `\namp-sticky-ad:before {\n\tcontent: 'Advertisement';\n\tdisplay: block;\n\t${textSans.xsmall()};\n\tfont-family: 'Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;\n\tpadding: 3px 10px 0;\n\tcolor: ${text.supporting};\n\ttext-align: right;\n\tline-height: 1;\n\tfont-size: 0.75rem;\n}`;\n\nexport const StickyAd = ({\n\tedition,\n\tsection,\n\tcontentType,\n\tconfig,\n\tcommercialProperties,\n\tadTargeting,\n}: BaseAdProps) => {\n\treturn (\n\t\t<amp-sticky-ad layout=\"nodisplay\">\n\t\t\t<Ad\n\t\t\t\tisSticky={true}\n\t\t\t\tedition={edition}\n\t\t\t\tsection={section}\n\t\t\t\tcontentType={contentType}\n\t\t\t\tcommercialProperties={commercialProperties}\n\t\t\t\tconfig={config}\n\t\t\t\tadTargeting={adTargeting}\n\t\t\t\trtcParameters={getRTCParameters({ isSticky: true })}\n\t\t\t/>\n\t\t</amp-sticky-ad>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/SubMeta.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/AudioAtomBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/CommentBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":63,"column":22,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":63,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { neutral, news, textSans } from '@guardian/source-foundations';\nimport React from 'react';\n\nconst wrapper = css`\n\toverflow: hidden;\n\tposition: relative;\n\tmargin-bottom: 12px;\n\tpadding-top: 12px;\n\t${textSans.medium()};\n\tpadding-left: 20px;\n\tborder-left: 8px solid ${neutral[86]};\n\tclear: left;\n`;\n\nconst avatar = css`\n\tfloat: left;\n\tmargin-right: 20px;\n\tmargin-bottom: 12px;\n`;\n\nconst metaLink = css`\n\tborder-bottom: 1px solid ${neutral[86]};\n\tcolor: ${news[400]};\n\ttext-decoration: none;\n\t${textSans.xxsmall()};\n`;\n\nconst bodyCSS = css`\n\tclear: left;\n\n\tp {\n\t\t${textSans.medium()};\n\t\tfont-weight: 300;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 8px;\n\t}\n`;\n\nexport const CommentBlockComponent: React.FC<{\n\telement: CommentBlockElement;\n}> = ({ element }) => (\n\t<div css={wrapper}>\n\t\t<amp-img\n\t\t\tclass={avatar}\n\t\t\tlayout=\"fixed\"\n\t\t\twidth=\"40\"\n\t\t\theight=\"40\"\n\t\t\tsrc={element.avatarURL}\n\t\t/>\n\t\t<div>\n\t\t\t<a css={metaLink} href={element.profileURL}>\n\t\t\t\t{element.profileName}\n\t\t\t</a>\n\t\t</div>\n\n\t\t<div>\n\t\t\t<a css={metaLink} href={element.permalink}>\n\t\t\t\t{element.dateTime}\n\t\t\t</a>\n\t\t</div>\n\n\t\t<div css={bodyCSS} dangerouslySetInnerHTML={{ __html: element.body }} />\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/ContentAtomBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/DisclaimerBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":20,"column":3,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":22,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { textSans } from '@guardian/source-foundations';\nimport React from 'react';\nimport { pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\n\nconst style = (pillar: ArticleTheme) => css`\n\t${textSans.small()};\n\n\ta {\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t}\n`;\n\nexport const DisclaimerBlockComponent: React.FC<{\n\thtml: string;\n\tpillar: ArticleTheme;\n}> = ({ html, pillar }) => (\n\t<span\n\t\tcss={style(pillar)}\n\t\tdangerouslySetInnerHTML={{\n\t\t\t__html: html,\n\t\t}}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/EmbedBlockComponentAMP.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/GuVideoBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/ImageBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":50,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":50,"endColumn":12},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":76,"column":7,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":78,"endColumn":9},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":77,"column":37,"nodeType":"Punctuator","messageId":"preferNullish","endLine":77,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1992,1994],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { text, textSans } from '@guardian/source-foundations';\nimport React from 'react';\nimport { pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\nimport TriangleIcon from '../../../static/icons/triangle.svg';\nimport { bestFitImage, heightEstimate } from '../../lib/image-fit';\n\nconst figureStyle = css`\n\tmargin-top: 16px;\n\tmargin-bottom: 8px;\n`;\nconst captionStyle = css`\n\tpadding-top: 8px;\n\t${textSans.xxsmall()};\n\tword-wrap: break-word;\n\tcolor: ${text.supporting};\n`;\n\nexport const ImageBlockComponent: React.FC<{\n\telement: ImageBlockElement;\n\tpillar: ArticleTheme;\n}> = ({ element, pillar }) => {\n\tconst containerWidth = 600;\n\tconst image: SrcSetItem = bestFitImage(\n\t\telement.imageSources,\n\t\tcontainerWidth,\n\t);\n\tconst height: number = heightEstimate(\n\t\telement.media.allImages[0],\n\t\timage.width,\n\t);\n\tconst iconStyle = css`\n\t\tfill: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\tpadding-right: 3px;\n\t`;\n\n\tconst captionLink = css`\n\t\ta {\n\t\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\t\ttext-decoration: none;\n\t\t}\n\t\ta:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t\tstrong {\n\t\t\tfont-weight: bold;\n\t\t}\n\t`;\n\n\tif (!image) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<figure css={figureStyle}>\n\t\t\t<amp-img\n\t\t\t\tsrc={image.src}\n\t\t\t\talt={element.data.alt}\n\t\t\t\tattribution={element.data.credit}\n\t\t\t\theight={height.toString()}\n\t\t\t\twidth={image.width.toString()}\n\t\t\t\tlayout=\"responsive\"\n\t\t\t/>\n\t\t\t{(element.data.caption ||\n\t\t\t\t(element.data.credit && element.displayCredit)) && (\n\t\t\t\t<figcaption css={captionStyle}>\n\t\t\t\t\t<span css={iconStyle}>\n\t\t\t\t\t\t<TriangleIcon />\n\t\t\t\t\t</span>\n\t\t\t\t\t{/*\n                        TODO - Move caption handling to use https://github.com/guardian/dotcom-rendering/blob/master/packages/guui/components/Caption/Caption.tsx\n                        Update: 16th October (Pascal): guui has been decommissioned.\n                    */}\n\t\t\t\t\t<span\n\t\t\t\t\t\tcss={captionLink}\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t__html: element.data.caption || '',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tkey=\"caption\"\n\t\t\t\t\t/>{' '}\n\t\t\t\t\t{element.displayCredit && element.data.credit}\n\t\t\t\t</figcaption>\n\t\t\t)}\n\t\t</figure>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/InteractiveAtomBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/InteractiveBlockComponentAMP.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/PullquoteBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":29,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":31,"endColumn":7}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { body, neutral } from '@guardian/source-foundations';\nimport React from 'react';\nimport { pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\nimport Quote from '../../../static/icons/quote.svg';\n\nconst styles = (pillar: ArticleTheme) => css`\n\tbackground-color: ${neutral[97]};\n\tpadding: 0.375rem 0.625rem 0.75rem;\n\tmargin-bottom: 0.75rem;\n\tdisplay: block;\n\tcolor: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t${body.medium()};\n\n\tsvg {\n\t\tfill: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t}\n`;\n\nexport const PullquoteBlockComponent: React.FC<{\n\thtml?: string;\n\tpillar: ArticleTheme;\n}> = ({ html, pillar }) => {\n\tif (!html) return <></>;\n\treturn (\n\t\t<aside css={styles(pillar)}>\n\t\t\t<Quote />{' '}\n\t\t\t<span\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: html,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</aside>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/RichLinkBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/SoundcloudBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/SubheadingBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":56,"column":3,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":58,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleSpecial as Special } from '@guardian/libs';\nimport { headline, neutral, textSans } from '@guardian/source-foundations';\nimport React from 'react';\nimport { pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\n\nconst style = (pillar: ArticleTheme) => css`\n\th2 {\n\t\tmargin-top: 24px;\n\t\tmargin-bottom: 10px;\n\t\t${headline.xxsmall()};\n\t}\n\tstrong {\n\t\tfont-weight: 700;\n\t}\n\ta {\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\ttext-decoration: none;\n\t\tborder-bottom: 1px solid ${neutral[86]};\n\t\t:hover {\n\t\t\tborder-bottom: 1px solid ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\t}\n\t}\n`;\n\nconst immersiveBodyStyle = css`\n\th2 {\n\t\t${headline.medium()};\n\t\tfont-weight: 200;\n\t}\n`;\n\n// Labs paid content only\nconst subHeadingStyleLabs = css`\n\th2 {\n\t\tfont-weight: 700;\n\t\t${textSans.large()}\n\t}\n`;\n\nexport const SubheadingBlockComponent: React.FC<{\n\thtml: string;\n\tpillar: ArticleTheme;\n\tisImmersive: boolean;\n}> = ({ html, pillar, isImmersive }) => (\n\t<span\n\t\tcss={\n\t\t\tpillar === Special.Labs\n\t\t\t\t? [\n\t\t\t\t\t\tstyle(pillar),\n\t\t\t\t\t\tisImmersive && immersiveBodyStyle,\n\t\t\t\t\t\tsubHeadingStyleLabs,\n\t\t\t\t  ]\n\t\t\t\t: style(pillar)\n\t\t}\n\t\tdangerouslySetInnerHTML={{\n\t\t\t__html: html,\n\t\t}}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/TextBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":84,"column":3,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":86,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleSpecial } from '@guardian/libs';\nimport { body, neutral, textSans } from '@guardian/source-foundations';\nimport React from 'react';\nimport sanitise from 'sanitize-html';\nimport { neutralBorder, pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\n\n// Note, this should only apply basic text styling. It is a case where we want\n// to re-use styling, but generally we should avoid this as it couples\n// components.\n\nconst ListStyle = (iconColour: string) => css`\n\tli {\n\t\tmargin-bottom: 6px;\n\t\tpadding-left: 20px;\n\t\tp {\n\t\t\tdisplay: inline;\n\t\t}\n\t}\n\n\tli:before {\n\t\tdisplay: inline-block;\n\t\tcontent: '';\n\t\tborder-radius: 6px;\n\t\theight: 12px;\n\t\twidth: 12px;\n\t\tmargin-right: 8px;\n\t\tbackground-color: ${iconColour};\n\t\tmargin-left: -20px;\n\t}\n`;\n\nconst LinkStyle = (pillar: ArticleTheme) => css`\n\ta {\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\ttext-decoration: none;\n\t\tborder-bottom: 1px solid ${neutralBorder(pillar)};\n\t\t:hover {\n\t\t\tborder-bottom: 1px solid ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\t}\n\t}\n`;\n\nconst TextStyle = (pillar: ArticleTheme) => css`\n\tstrong {\n\t\tfont-weight: 700;\n\t}\n\tp {\n\t\tpadding: 0 0 12px;\n\t\t${body.medium()};\n\t\tfont-weight: 300;\n\t\tword-wrap: break-word;\n\t\tcolor: ${neutral[7]};\n\t}\n\n\tblockquote {\n\t\tmargin-left: 20px;\n\t\tfont-style: italic;\n\t}\n\n\t${body.medium()};\n\n\t${LinkStyle(pillar)};\n\t${ListStyle(neutralBorder(pillar))};\n`;\n\n// Labs paid content only\nconst textStyleLabs = css`\n\tp {\n\t\t${textSans.large()}\n\t}\n`;\n\nexport const TextBlockComponent: React.FC<{\n\thtml: string;\n\tpillar: ArticleTheme;\n}> = ({ html, pillar }) => (\n\t<span\n\t\tcss={\n\t\t\tpillar === ArticleSpecial.Labs\n\t\t\t\t? [TextStyle(pillar), textStyleLabs]\n\t\t\t\t: TextStyle(pillar)\n\t\t}\n\t\tdangerouslySetInnerHTML={{\n\t\t\t__html: sanitise(html),\n\t\t}}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/TimelineBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":47,"column":16,"nodeType":"Punctuator","messageId":"preferNullish","endLine":47,"endColumn":18,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[964,966],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":61,"column":8,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":63,"endColumn":10},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":62,"column":24,"nodeType":"Punctuator","messageId":"preferNullish","endLine":62,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1355,1357],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brandAlt, neutral } from '@guardian/source-foundations';\nimport React from 'react';\nimport { Expandable } from '../Expandable';\n\nconst eventsWrapper = css`\n\tmargin-left: 8px;\n\n\tli:not(:last-child) {\n\t\tborder-left: 1px solid rgba(220, 220, 220, 0.5);\n\t}\n`;\n\nconst eventStyle = css`\n\tpadding-left: 17px;\n\tpadding-bottom: 16px;\n`;\n\nconst highlight = css`\n\tbackground-color: ${brandAlt[400]};\n`;\n\nconst eventIconStyle = css`\n\t:before {\n\t\tcontent: '';\n\t\twidth: 16px;\n\t\theight: 16px;\n\t\tborder-radius: 100%;\n\t\tfloat: left;\n\t\tmargin-left: -25px;\n\t\tbackground-color: ${neutral[7]};\n\t}\n`;\n\nconst headingStyle = css`\n\tfont-weight: bold;\n`;\n\nexport const TimelineBlockComponent: React.FC<{\n\tid: string;\n\ttitle: string;\n\tdescription?: string;\n\tevents: TimelineEvent[];\n\tpillar: ArticleTheme;\n}> = ({ id, title, description, events, pillar }) => (\n\t<Expandable id={id} type=\"Timeline\" title={title} pillar={pillar}>\n\t\t{description || ''}\n\t\t<ul css={eventsWrapper}>\n\t\t\t{events.map((e) => (\n\t\t\t\t<li css={eventStyle} key={e.title}>\n\t\t\t\t\t<time css={[eventIconStyle, highlight]}>{e.date}</time>\n\t\t\t\t\t{e.toDate && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t- <time css={highlight}>{e.toDate}</time>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h3 css={headingStyle}>{e.title}</h3>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: e.body || '',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t</Expandable>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/TwitterBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":7,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":7,"endColumn":49},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":91,"column":7,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":91,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { body, neutral } from '@guardian/source-foundations';\nimport { JSDOM } from 'jsdom';\nimport React from 'react';\nimport { neutralBorder, pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\n\nexport const ListStyle = (iconColour: string) => css`\n\tli {\n\t\tmargin-bottom: 6px;\n\t\tpadding-left: 20px;\n\t\tp {\n\t\t\tdisplay: inline;\n\t\t}\n\t}\n\n\tli:before {\n\t\tdisplay: inline-block;\n\t\tcontent: '';\n\t\tborder-radius: 6px;\n\t\theight: 12px;\n\t\twidth: 12px;\n\t\tmargin-right: 8px;\n\t\tbackground-color: ${iconColour};\n\t\tmargin-left: -20px;\n\t}\n`;\n\nconst LinkStyle = (pillar: ArticleTheme) => css`\n\ta {\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\ttext-decoration: none;\n\t\tborder-bottom: 1px solid ${neutralBorder(pillar)};\n\t\t:hover {\n\t\t\tborder-bottom: 1px solid ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\t}\n\t}\n`;\n\nconst TextStyle = (pillar: ArticleTheme) => css`\n\tstrong {\n\t\tfont-weight: 700;\n\t}\n\tp {\n\t\tpadding: 0 0 12px;\n\t\t${body.medium()};\n\t\tfont-weight: 300;\n\t\tword-wrap: break-word;\n\t\tcolor: ${neutral[7]};\n\t}\n\n\tblockquote {\n\t\tmargin-left: 20px;\n\t\tfont-style: italic;\n\t}\n\n\t${body.medium()};\n\n\t${LinkStyle(pillar)};\n\t${ListStyle(neutralBorder(pillar))};\n`;\n\nconst makeFallback = (html: string): string | null => {\n\tconst { window } = new JSDOM(html);\n\tconst blockquotes = window.document.getElementsByTagName('blockquote');\n\n\tif (blockquotes.length !== 1) {\n\t\treturn null;\n\t}\n\n\tconst q = blockquotes[0];\n\treturn q.innerHTML;\n};\n\nexport const TwitterBlockComponent: React.FC<{\n\telement: TweetBlockElement;\n\tpillar: ArticleTheme;\n}> = ({ element, pillar }) => {\n\tconst fallbackHTML = makeFallback(element.html);\n\n\treturn (\n\t\t<amp-twitter\n\t\t\twidth=\"2\"\n\t\t\theight={element.hasMedia ? 2 : 1}\n\t\t\tlayout=\"responsive\"\n\t\t\tdata-tweetid={element.id}\n\t\t\tdata-dnt=\"true\"\n\t\t>\n\t\t\t{fallbackHTML && (\n\t\t\t\t<div placeholder=\"\" css={TextStyle(pillar)}>\n\t\t\t\t\t<blockquote\n\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: fallbackHTML }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</amp-twitter>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/VideoVimeoBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/VideoYoutubeBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/elements/YoutubeBlockComponentAMP.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":19,"column":66,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":19,"endColumn":68},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":20,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":39,"endColumn":3},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":34,"column":23,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":34,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":49,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1088,1091],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1088,1091],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { constructQuery } from '../../../lib/querystring';\nimport { Caption } from '../Caption';\n\ntype EmbedConfig = {\n\tadsConfig:\n\t\t| {\n\t\t\t\tadTagParameters: {\n\t\t\t\t\tiu: string;\n\t\t\t\t\tcust_params: string;\n\t\t\t\t};\n\t\t\t\tdisableAds?: false;\n\t\t  }\n\t\t| {\n\t\t\t\tdisableAds: true;\n\t\t  };\n};\n\nconst buildEmbedConfig = (adTargeting: AdTargeting): EmbedConfig => {\n\tswitch (adTargeting.disableAds) {\n\t\tcase true:\n\t\t\treturn {\n\t\t\t\tadsConfig: {\n\t\t\t\t\tdisableAds: true,\n\t\t\t\t},\n\t\t\t};\n\t\tcase false:\n\t\tcase undefined:\n\t\t\treturn {\n\t\t\t\tadsConfig: {\n\t\t\t\t\tadTagParameters: {\n\t\t\t\t\t\tiu: `${adTargeting.adUnit || ''}`,\n\t\t\t\t\t\tcust_params: encodeURIComponent(\n\t\t\t\t\t\t\tconstructQuery(adTargeting.customParams || {}),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t}\n};\n\nexport const YoutubeBlockComponentAMP: React.FC<{\n\telement: YoutubeBlockElement;\n\tpillar: ArticleTheme;\n\tadTargeting?: AdTargeting;\n}> = ({ element, pillar, adTargeting }) => {\n\t// https://www.ampproject.org/docs/reference/components/amp-youtube\n\t// https://developers.google.com/youtube/player_parameters\n\tconst attributes: { [key: string]: any } = {\n\t\tid: `gu-video-youtube-${element.id}`,\n\t\t'data-videoid': element.assetId,\n\t\tlayout: 'responsive',\n\t\twidth: '16',\n\t\theight: '9',\n\t\t'data-block-on-consent': '', // Block player until consent is obtained\n\t\t'data-param-modestbranding': true, // Remove YouTube logo\n\t\tcredentials: 'omit',\n\t};\n\n\tif (adTargeting) {\n\t\tattributes['data-param-embed_config'] = JSON.stringify(\n\t\t\tbuildEmbedConfig(adTargeting),\n\t\t);\n\t}\n\n\tif (element.channelId) {\n\t\t// related videos metadata\n\t\tattributes['data-param-rel'] = '0';\n\t}\n\n\treturn (\n\t\t<Caption\n\t\t\tcaptionText={element.mediaTitle}\n\t\t\tpillar={pillar}\n\t\t\tpadCaption={true}\n\t\t>\n\t\t\t<amp-youtube {...attributes} />\n\t\t</Caption>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/moustache.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":6,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":6,"endColumn":51},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":6},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":32,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[892,895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[892,895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\n\nconst open = (name: string, invert?: boolean) =>\n\t`{{${invert ? '^' : '#'}${name}}}`;\nconst close = (name: string) => `{{/${name}}}`;\nexport const moustacheVariable = (name: string) => `{{${name}}}`;\n\nexport const MoustacheSection = ({\n\tname,\n\tchildren,\n\tinvert,\n}: {\n\tname: string;\n\tchildren: React.ReactNode;\n\tinvert?: boolean;\n}) => (\n\t<>\n\t\t{open(name, invert)}\n\t\t{children}\n\t\t{close(name)}\n\t</>\n);\n\nexport const MoustacheVariable: React.FC<{ name: string }> = ({ name }) => (\n\t<>{moustacheVariable(name)}</>\n);\n\nexport const MoustacheTemplate = ({\n\tchildren,\n}: {\n\tchildren: React.ReactNode;\n}) => {\n\t// this next line is necessary cos react has a 'template' object with no 'type' property.\n\t// By saying 'as {}' we can pretend we're not adding the 'type' property and thus avoid unhappy type errors\n\tconst props = { type: 'amp-mustache' } as { [key: string]: any };\n\n\treturn <template {...props}>{children}</template>;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/Branding.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/Byline.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":10,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":10,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":26,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":26,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":47,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":47,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Byline } from './Byline';\n\nconst guardianBaseURL = 'https://theguardian.com';\n\nexport default {\n\tcomponent: Byline,\n\ttitle: 'AMP/Components/topMeta/Byline',\n};\n\nexport const SingleByline = () => (\n\t<Byline\n\t\tbyline=\"Eva Smith and friends\"\n\t\tguardianBaseURL={guardianBaseURL}\n\t\ttags={[\n\t\t\t{\n\t\t\t\tid: 'eva-smith',\n\t\t\t\ttype: 'Contributor',\n\t\t\t\ttitle: 'Eva Smith',\n\t\t\t},\n\t\t]}\n\t/>\n);\n\nSingleByline.story = { name: 'Byline with single contributor tag' };\n\nexport const MultipleByline = () => (\n\t<Byline\n\t\tbyline=\"Eva Smith and Duncan Campbell\"\n\t\tguardianBaseURL={guardianBaseURL}\n\t\ttags={[\n\t\t\t{\n\t\t\t\tid: 'eva-smith',\n\t\t\t\ttype: 'Contributor',\n\t\t\t\ttitle: 'Eva Smith',\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'duncan-campbell',\n\t\t\t\ttype: 'Contributor',\n\t\t\t\ttitle: 'Duncan Campbell',\n\t\t\t},\n\t\t]}\n\t/>\n);\n\nMultipleByline.story = { name: 'Byline with multiple contributors' };\n\nexport const MultipleDuplicateByline = () => (\n\t<Byline\n\t\tbyline=\"Duncan Campbell and Duncan Campbell\"\n\t\tguardianBaseURL={guardianBaseURL}\n\t\ttags={[\n\t\t\t{\n\t\t\t\tid: 'duncan-campbell',\n\t\t\t\ttype: 'Contributor',\n\t\t\t\ttitle: 'Duncan Campbell',\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'duncan-campbell-1',\n\t\t\t\ttype: 'Contributor',\n\t\t\t\ttitle: 'Duncan Campbell',\n\t\t\t},\n\t\t]}\n\t/>\n);\n\nMultipleDuplicateByline.story = {\n\tname: 'Byline w/ contributors with identical names',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/Byline.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/Byline.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":10,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":10,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getBylineComponentsFromTokens } from '../../../lib/byline';\nimport { bylineTokens } from '../../lib/byline-tokens';\n\ntype Props = {\n\tbyline?: string;\n\ttags: TagType[];\n\tguardianBaseURL: string;\n};\n\nexport const Byline = ({ byline, tags, guardianBaseURL }: Props) => {\n\tif (!byline) {\n\t\treturn null;\n\t}\n\n\tconst contributorTags = tags.filter((tag) => tag.type === 'Contributor');\n\tconst tokens = bylineTokens(byline, contributorTags);\n\n\tconst bylineComponents = getBylineComponentsFromTokens(tokens, tags);\n\n\tconst linkedByline = bylineComponents.map((bylineComponent) => {\n\t\tif (typeof bylineComponent === 'string') {\n\t\t\treturn bylineComponent;\n\t\t}\n\t\treturn (\n\t\t\t<a\n\t\t\t\tkey={bylineComponent.tag.id}\n\t\t\t\thref={`${guardianBaseURL}/${bylineComponent.tag.id}`}\n\t\t\t>\n\t\t\t\t{bylineComponent.tag.title}\n\t\t\t</a>\n\t\t);\n\t});\n\n\treturn <>{linkedByline}</>;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/PaidForBand.tsx","messages":[{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":115,"column":5,"nodeType":"JSXElement","messageId":"missingType","endLine":120,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleSpecial } from '@guardian/libs';\nimport {\n\tbrandAlt,\n\tfrom,\n\tneutral,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport React from 'react';\nimport { pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\nimport ArrowRightIcon from '../../../static/icons/arrow-right.svg';\nimport LabsLogo from '../../../static/logos/the-guardian-labs.svg';\n\nconst headerStyle = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin: 0 -10px;\n\tpadding: 0 10px;\n\theight: 58px;\n\tbackground-color: ${pillarPalette_DO_NOT_USE[ArticleSpecial.Labs].bright};\n\n\t${from.mobileLandscape} {\n\t\tpadding: 0 20px;\n\t}\n`;\n\nconst focusColor = css`\n\toutline-color: ${brandAlt[400]};\n`;\n\nconst metaStyle = css`\n\theight: 100%;\n\t${textSans.small()};\n\tfont-weight: 700;\n`;\n\nconst aboutStyle = css`\n\tdisplay: inline-flex;\n\theight: 100%;\n`;\n\nconst aboutButtonStyle = css`\n\tdisplay: block;\n\twidth: 100%;\n\tfont: inherit;\n\tfont-weight: 400;\n\tmargin-left: 10px;\n\tpadding: 10px;\n\tborder: 0;\n\tborder-left: solid 1px\n\t\t${pillarPalette_DO_NOT_USE[ArticleSpecial.Labs].faded};\n\tborder-right: solid 1px\n\t\t${pillarPalette_DO_NOT_USE[ArticleSpecial.Labs].faded};\n\tbackground: transparent;\n\tcolor: inherit;\n\tcursor: pointer;\n`;\n\nconst aboutButtonIcon = css`\n\t:after {\n\t\tcontent: ' ';\n\t\tdisplay: inline-block;\n\t\twidth: 5px;\n\t\theight: 5px;\n\t\ttransform: translateY(-2px) rotate(45deg);\n\t\tborder: 1px solid currentColor;\n\t\tborder-left: transparent;\n\t\tborder-top: transparent;\n\t\tmargin-left: 6px;\n\t\tvertical-align: middle;\n\t}\n`;\n\nconst popUpStyle = css`\n\tposition: absolute;\n\ttransform: translate(-15%, 30%);\n\twidth: 266px;\n\tpadding: 16px;\n\tbackground-color: ${neutral[7]};\n\tcolor: ${neutral[100]};\n\tfont-weight: normal;\n\tborder-radius: 4px;\n\tz-index: 100;\n`;\n\nconst logoStyle = css`\n\tmargin: 5px 0;\n`;\n\nconst aStyle = css`\n\tdisplay: inline-block;\n\tcolor: ${pillarPalette_DO_NOT_USE[ArticleSpecial.Labs].bright};\n\ttext-decoration: none;\n\tmargin-top: 10px;\n\t&:hover {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nconst iconStyle = css`\n\tfill: ${pillarPalette_DO_NOT_USE[ArticleSpecial.Labs].bright};\n\tmargin: 0 0;\n\tpadding-right: 3px;\n\tvertical-align: middle;\n\twidth: 20px;\n\theight: 20px;\n`;\n\nexport const PaidForBand: React.FC = () => (\n\t<header css={headerStyle}>\n\t\t<div css={metaStyle}>\n\t\t\t<span>Paid content</span>\n\t\t\t<div css={aboutStyle}>\n\t\t\t\t<button\n\t\t\t\t\tcss={[aboutButtonStyle, aboutButtonIcon, focusColor]}\n\t\t\t\t\ton=\"tap:popup.toggleVisibility\"\n\t\t\t\t>\n\t\t\t\t\tAbout\n\t\t\t\t</button>\n\t\t\t\t<div id=\"popup\" css={popUpStyle} hidden={true}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\tPaid content is paid for and controlled by an advertiser\n\t\t\t\t\t\tand produced by the Guardian Labs team.\n\t\t\t\t\t</div>\n\t\t\t\t\t<a\n\t\t\t\t\t\tcss={[aStyle, focusColor]}\n\t\t\t\t\t\thref=\"https://www.theguardian.com/content-funding\"\n\t\t\t\t\t>\n\t\t\t\t\t\tLearn more about Guardian Labs content{' '}\n\t\t\t\t\t\t<ArrowRightIcon css={iconStyle} role=\"presentation\" />\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<LabsLogo css={logoStyle} />\n\t</header>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/SeriesLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/Standfirst.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":79,"column":4,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":81,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleTheme } from '@guardian/libs';\nimport { ArticleSpecial } from '@guardian/libs';\nimport { headline, neutral, textSans } from '@guardian/source-foundations';\nimport React from 'react';\nimport { neutralBorder, pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\n\nconst ListStyle = (iconColour: string) => css`\n\tli {\n\t\tmargin-bottom: 6px;\n\t\tpadding-left: 20px;\n\t\tp {\n\t\t\tdisplay: inline;\n\t\t}\n\t}\n\n\tli:before {\n\t\tdisplay: inline-block;\n\t\tcontent: '';\n\t\tborder-radius: 6px;\n\t\theight: 12px;\n\t\twidth: 12px;\n\t\tmargin-right: 8px;\n\t\tbackground-color: ${iconColour};\n\t\tmargin-left: -20px;\n\t}\n`;\n\nconst LinkStyle = (pillar: ArticleTheme) => css`\n\ta {\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\ttext-decoration: none;\n\t\tborder-bottom: 1px solid ${neutralBorder(pillar)};\n\t\t:hover {\n\t\t\tborder-bottom: 1px solid ${pillarPalette_DO_NOT_USE[pillar].dark};\n\t\t}\n\t}\n`;\n\nconst standfirstCss = (pillar: ArticleTheme) => css`\n\t${headline.xxxsmall()};\n\tfont-weight: 100;\n\tcolor: ${neutral[7]};\n\tmargin-bottom: 12px;\n\n\tp {\n\t\tmargin-bottom: 8px;\n\t\tfont-weight: 200;\n\t}\n\tstrong {\n\t\tfont-weight: 700;\n\t}\n\n\t${ListStyle(neutralBorder(pillar))};\n\t${LinkStyle(pillar)};\n`;\n\n// Labs paid content only\nconst labsStyle = css`\n\tp,\n\tli {\n\t\tfont-weight: 700;\n\t\t${textSans.large()}\n\t}\n`;\n\nexport const Standfirst: React.FunctionComponent<{\n\ttext: string;\n\tpillar: ArticleTheme;\n}> = ({ text, pillar }) => {\n\treturn (\n\t\t<div\n\t\t\tdata-print-layout=\"hide\"\n\t\t\tcss={\n\t\t\t\tpillar === ArticleSpecial.Labs\n\t\t\t\t\t? [standfirstCss(pillar), labsStyle]\n\t\t\t\t\t: standfirstCss(pillar)\n\t\t\t}\n\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t__html: text,\n\t\t\t}}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/TopMeta.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/TopMetaAnalysis.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":94,"column":11,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":94,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline, neutral, until } from '@guardian/source-foundations';\nimport { string as curly } from 'curlyquotes';\nimport React from 'react';\nimport { getAgeWarning } from '../../../lib/age-warning';\nimport { pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\nimport { getSharingUrls } from '../../../lib/sharing-urls';\nimport type { ArticleModel } from '../../types/ArticleModel';\nimport { MainMedia } from '../MainMedia';\nimport { StarRating } from '../StarRating';\nimport { Branding, BrandingRegionContainer } from './Branding';\nimport { Byline } from './Byline';\nimport { SeriesLink } from './SeriesLink';\nimport { Standfirst } from './Standfirst';\nimport { TopMetaExtras } from './TopMetaExtras';\n\nconst headerStyle = css`\n\t${headline.small()};\n\tfont-weight: 500;\n\tpadding-bottom: 24px;\n\tpadding-top: 3px;\n\tcolor: ${neutral[7]};\n`;\n\nconst underlinedStyles = css`\n\tbackground-image: repeating-linear-gradient(\n\t\tto bottom,\n\t\ttransparent,\n\t\ttransparent 47px,\n\t\trgba(171, 6, 19, 0.5)\n\t);\n\tline-height: 48px;\n\tbackground-size: 1rem 48px;\n\t${until.tablet} {\n\t\tbackground-image: repeating-linear-gradient(\n\t\t\tto bottom,\n\t\t\ttransparent,\n\t\t\ttransparent 39px,\n\t\t\trgba(171, 6, 19, 0.5)\n\t\t);\n\t\tline-height: 40px;\n\t\tbackground-size: 1px 40px;\n\t}\n\n\tbackground-position: top left;\n\tbackground-clip: content-box;\n\tbackground-origin: content-box;\n`;\n\nconst bylineStyle = (pillar: ArticleTheme) => css`\n\t${headline.xxxsmall()};\n\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\tpadding-bottom: 8px;\n\tfont-style: italic;\n\n\ta {\n\t\tfont-weight: 700;\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\ttext-decoration: none;\n\t\tfont-style: normal;\n\t}\n`;\n\nconst starRatingWrapper = css`\n\tmargin: 0 0 6px -10px;\n`;\n\nconst Headline: React.FC<{\n\theadlineText: string;\n\tstarRating?: number;\n}> = ({ headlineText, starRating }) => {\n\treturn (\n\t\t<div>\n\t\t\t<h1 css={[headerStyle, underlinedStyles]}>{curly(headlineText)}</h1>\n\n\t\t\t{starRating !== undefined && (\n\t\t\t\t<div css={starRatingWrapper}>\n\t\t\t\t\t<StarRating rating={starRating} size=\"large\" />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport const TopMetaAnalysis: React.FC<{\n\tarticleData: ArticleModel;\n\tadTargeting?: AdTargeting;\n\tpillar: ArticleTheme;\n}> = ({ articleData, adTargeting, pillar }) => {\n\treturn (\n\t\t<header>\n\t\t\t{articleData.mainMediaElements.map((element, i) => (\n\t\t\t\t<MainMedia\n\t\t\t\t\tkey={i}\n\t\t\t\t\telement={element}\n\t\t\t\t\tpillar={pillar}\n\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t/>\n\t\t\t))}\n\n\t\t\t{!articleData.isImmersive && (\n\t\t\t\t<SeriesLink\n\t\t\t\t\tbaseURL={articleData.guardianBaseURL}\n\t\t\t\t\ttags={articleData.tags}\n\t\t\t\t\tpillar={pillar}\n\t\t\t\t\tfallbackToSection={true}\n\t\t\t\t\tsectionLabel={articleData.sectionLabel}\n\t\t\t\t\tsectionUrl={articleData.sectionUrl}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<Headline\n\t\t\t\theadlineText={articleData.headline}\n\t\t\t\tstarRating={articleData.starRating}\n\t\t\t/>\n\n\t\t\t<Standfirst text={articleData.standfirst} pillar={pillar} />\n\n\t\t\t<BrandingRegionContainer\n\t\t\t\tcommercialProperties={articleData.commercialProperties}\n\t\t\t>\n\t\t\t\t{(branding) => <Branding branding={branding} pillar={pillar} />}\n\t\t\t</BrandingRegionContainer>\n\n\t\t\t<div css={bylineStyle(pillar)}>\n\t\t\t\t<Byline\n\t\t\t\t\tbyline={articleData.author.byline}\n\t\t\t\t\ttags={articleData.tags}\n\t\t\t\t\tguardianBaseURL={articleData.guardianBaseURL}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<TopMetaExtras\n\t\t\t\tsharingUrls={getSharingUrls(\n\t\t\t\t\tarticleData.pageId,\n\t\t\t\t\tarticleData.webTitle,\n\t\t\t\t)}\n\t\t\t\tpillar={pillar}\n\t\t\t\tageWarning={getAgeWarning(\n\t\t\t\t\tarticleData.tags,\n\t\t\t\t\tarticleData.webPublicationDateDeprecated,\n\t\t\t\t)}\n\t\t\t\twebPublicationDate={articleData.webPublicationDateDisplay}\n\t\t\t\ttwitterHandle={articleData.author.twitterHandle}\n\t\t\t/>\n\t\t</header>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/TopMetaExtras.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/TopMetaLiveblog.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":92,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":94,"endColumn":7},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":112,"column":20,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":112,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline, neutral } from '@guardian/source-foundations';\nimport { string as curly } from 'curlyquotes';\nimport React from 'react';\nimport { getAgeWarning } from '../../../lib/age-warning';\nimport { neutralBorder, pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\nimport { getSharingUrls } from '../../../lib/sharing-urls';\nimport type { ArticleModel } from '../../types/ArticleModel';\nimport { MainMedia } from '../MainMedia';\nimport { Byline } from './Byline';\nimport { TopMetaExtras } from './TopMetaExtras';\n\nconst ListStyle = (iconColour: string) => css`\n\tli {\n\t\tmargin-bottom: 6px;\n\t\tpadding-left: 20px;\n\t\tp {\n\t\t\tdisplay: inline;\n\t\t}\n\t}\n\n\tli:before {\n\t\tdisplay: inline-block;\n\t\tcontent: '';\n\t\tborder-radius: 6px;\n\t\theight: 12px;\n\t\twidth: 12px;\n\t\tmargin-right: 8px;\n\t\tbackground-color: ${iconColour};\n\t\tmargin-left: -20px;\n\t}\n`;\n\nconst headerStyle = (pillar: ArticleTheme) => css`\n\t${headline.small()};\n\tfont-weight: 500;\n\tpadding: 3px 10px 24px;\n\tcolor: ${neutral[100]};\n\tbackground-color: ${pillarPalette_DO_NOT_USE[pillar].main};\n`;\n\nconst bylineStyle = (pillar: ArticleTheme) => css`\n\t${headline.xxxsmall()};\n\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\tpadding-top: 3px;\n\tpadding-bottom: 8px;\n\tfont-style: italic;\n\n\ta {\n\t\tfont-weight: 700;\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\ttext-decoration: none;\n\t\tfont-style: normal;\n\t}\n`;\n\nconst standfirstStyle = (pillar: ArticleTheme) => css`\n\t${headline.xxxsmall()};\n\tcolor: ${neutral[100]};\n\tbackground-color: ${pillarPalette_DO_NOT_USE[pillar].dark};\n\tfont-weight: bold;\n\tpadding: 3px 10px 12px;\n\n\ta {\n\t\tcolor: ${neutral[100]};\n\t}\n\n\tp {\n\t\tmargin-bottom: 8px;\n\t}\n\tstrong {\n\t\tfont-weight: 700;\n\t}\n\n\t${ListStyle(neutralBorder(pillar))};\n`;\n\nconst fullWidth = css`\n\tmargin: 0 -10px;\n`;\n\nconst Headline: React.FC<{\n\theadlineText: string;\n\tstandfirst: string;\n\tpillar: ArticleTheme;\n}> = ({ headlineText, pillar, standfirst }) => {\n\treturn (\n\t\t<div css={fullWidth}>\n\t\t\t<h1 css={headerStyle(pillar)}>{curly(headlineText)}</h1>\n\t\t\t<div\n\t\t\t\tcss={standfirstStyle(pillar)}\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: standfirst,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const TopMetaLiveblog: React.FC<{\n\tarticleData: ArticleModel;\n\tpillar: ArticleTheme;\n}> = ({ articleData, pillar }) => (\n\t<header>\n\t\t<Headline\n\t\t\theadlineText={articleData.headline}\n\t\t\tstandfirst={articleData.standfirst}\n\t\t\tpillar={pillar}\n\t\t/>\n\n\t\t{articleData.mainMediaElements.map((element, i) => (\n\t\t\t<MainMedia key={i} element={element} pillar={pillar} />\n\t\t))}\n\n\t\t<div css={bylineStyle(pillar)}>\n\t\t\t<Byline\n\t\t\t\tbyline={articleData.author.byline}\n\t\t\t\ttags={articleData.tags}\n\t\t\t\tguardianBaseURL={articleData.guardianBaseURL}\n\t\t\t/>\n\t\t</div>\n\n\t\t<TopMetaExtras\n\t\t\tsharingUrls={getSharingUrls(\n\t\t\t\tarticleData.pageId,\n\t\t\t\tarticleData.webTitle,\n\t\t\t)}\n\t\t\tpillar={pillar}\n\t\t\tageWarning={getAgeWarning(\n\t\t\t\tarticleData.tags,\n\t\t\t\tarticleData.webPublicationDateDeprecated,\n\t\t\t)}\n\t\t\twebPublicationDate={articleData.webPublicationDateDisplay}\n\t\t\ttwitterHandle={articleData.author.twitterHandle}\n\t\t/>\n\t</header>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/TopMetaNews.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":68,"column":11,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":68,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline, neutral } from '@guardian/source-foundations';\nimport { string as curly } from 'curlyquotes';\nimport React from 'react';\nimport { getAgeWarning } from '../../../lib/age-warning';\nimport { pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\nimport { getSharingUrls } from '../../../lib/sharing-urls';\nimport type { ArticleModel } from '../../types/ArticleModel';\nimport { MainMedia } from '../MainMedia';\nimport { StarRating } from '../StarRating';\nimport { Branding, BrandingRegionContainer } from './Branding';\nimport { Byline } from './Byline';\nimport { SeriesLink } from './SeriesLink';\nimport { Standfirst } from './Standfirst';\nimport { TopMetaExtras } from './TopMetaExtras';\n\nconst headerStyle = css`\n\t${headline.small()};\n\tfont-weight: 500;\n\tpadding-bottom: 24px;\n\tpadding-top: 3px;\n\tcolor: ${neutral[7]};\n`;\nconst bylineStyle = (pillar: ArticleTheme) => css`\n\t${headline.xxxsmall()};\n\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\tpadding-bottom: 8px;\n\tfont-style: italic;\n\n\ta {\n\t\tfont-weight: 700;\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\ttext-decoration: none;\n\t\tfont-style: normal;\n\t}\n`;\n\nconst starRatingWrapper = css`\n\tmargin: 0 0 6px -10px;\n`;\n\nconst Headline: React.FC<{\n\theadlineText: string;\n\tstarRating?: number;\n}> = ({ headlineText, starRating }) => {\n\treturn (\n\t\t<div>\n\t\t\t<h1 css={headerStyle}>{curly(headlineText)}</h1>\n\n\t\t\t{starRating !== undefined && (\n\t\t\t\t<div css={starRatingWrapper}>\n\t\t\t\t\t<StarRating rating={starRating} size=\"large\" />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport const TopMetaNews: React.FC<{\n\tarticleData: ArticleModel;\n\tadTargeting?: AdTargeting;\n\tpillar: ArticleTheme;\n}> = ({ articleData, adTargeting, pillar }) => {\n\treturn (\n\t\t<header>\n\t\t\t{articleData.mainMediaElements.map((element, i) => (\n\t\t\t\t<MainMedia\n\t\t\t\t\tkey={i}\n\t\t\t\t\telement={element}\n\t\t\t\t\tpillar={pillar}\n\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t/>\n\t\t\t))}\n\n\t\t\t{!articleData.isImmersive && (\n\t\t\t\t<SeriesLink\n\t\t\t\t\tbaseURL={articleData.guardianBaseURL}\n\t\t\t\t\ttags={articleData.tags}\n\t\t\t\t\tpillar={pillar}\n\t\t\t\t\tfallbackToSection={true}\n\t\t\t\t\tsectionLabel={articleData.sectionLabel}\n\t\t\t\t\tsectionUrl={articleData.sectionUrl}\n\t\t\t\t/>\n\t\t\t)}\n\n\t\t\t<Headline\n\t\t\t\theadlineText={articleData.headline}\n\t\t\t\tstarRating={articleData.starRating}\n\t\t\t/>\n\n\t\t\t<Standfirst text={articleData.standfirst} pillar={pillar} />\n\n\t\t\t<BrandingRegionContainer\n\t\t\t\tcommercialProperties={articleData.commercialProperties}\n\t\t\t>\n\t\t\t\t{(branding) => <Branding branding={branding} pillar={pillar} />}\n\t\t\t</BrandingRegionContainer>\n\n\t\t\t<div css={bylineStyle(pillar)}>\n\t\t\t\t<Byline\n\t\t\t\t\tbyline={articleData.author.byline}\n\t\t\t\t\ttags={articleData.tags}\n\t\t\t\t\tguardianBaseURL={articleData.guardianBaseURL}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<TopMetaExtras\n\t\t\t\tsharingUrls={getSharingUrls(\n\t\t\t\t\tarticleData.pageId,\n\t\t\t\t\tarticleData.webTitle,\n\t\t\t\t)}\n\t\t\t\tpillar={pillar}\n\t\t\t\tageWarning={getAgeWarning(\n\t\t\t\t\tarticleData.tags,\n\t\t\t\t\tarticleData.webPublicationDateDeprecated,\n\t\t\t\t)}\n\t\t\t\twebPublicationDate={articleData.webPublicationDateDisplay}\n\t\t\t\ttwitterHandle={articleData.author.twitterHandle}\n\t\t\t/>\n\t\t</header>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/TopMetaOpinion.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":115,"column":21,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":115,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline, neutral } from '@guardian/source-foundations';\nimport React from 'react';\nimport { getAgeWarning } from '../../../lib/age-warning';\nimport { pillarPalette_DO_NOT_USE } from '../../../lib/pillars';\nimport { getSharingUrls } from '../../../lib/sharing-urls';\nimport type { ArticleModel } from '../../types/ArticleModel';\nimport { MainMedia } from '../MainMedia';\nimport { Branding, BrandingRegionContainer } from './Branding';\nimport { Byline } from './Byline';\nimport { SeriesLink } from './SeriesLink';\nimport { Standfirst } from './Standfirst';\nimport { TopMetaExtras } from './TopMetaExtras';\n\nconst headerStyle = css`\n\t${headline.small()};\n\tfont-weight: 100;\n\tpadding-top: 3px;\n\tcolor: ${neutral[7]};\n`;\n\nconst bylineStyle = (pillar: ArticleTheme) => css`\n\t${headline.small()};\n\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\tfont-style: italic;\n\tfont-weight: 100;\n\tpadding-top: 3px;\n\n\ta {\n\t\tcolor: ${pillarPalette_DO_NOT_USE[pillar].main};\n\t\ttext-decoration: none;\n\t}\n`;\n\nconst bylineImageStyle = css`\n\tdisplay: block;\n\tmargin-right: -18px;\n\tflex-shrink: 0;\n`;\n\nconst bylineWrapper = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\n\tbackground-image: repeating-linear-gradient(\n\t\tto bottom,\n\t\t${neutral[86]},\n\t\t${neutral[86]} 1px,\n\t\ttransparent 1px,\n\t\ttransparent 4px\n\t);\n\tbackground-repeat: repeat-x;\n\tbackground-position: bottom;\n\tbackground-size: 1px 29px;\n\tmargin: 0 -10px;\n\tpadding: 0 10px;\n`;\n\nconst bottomPadding = css`\n\tpadding-bottom: 72px;\n`;\n\nconst BylineMeta: React.FunctionComponent<{\n\tarticleData: ArticleModel;\n\tpillar: ArticleTheme;\n}> = ({ articleData, pillar }) => {\n\tconst contributorTag = articleData.tags.find(\n\t\t(t) => t.type === 'Contributor',\n\t);\n\tconst contributorCount = articleData.tags.filter(\n\t\t(t) => t.type === 'Contributor',\n\t).length;\n\tconst bylineImageUrl = contributorTag\n\t\t? contributorTag.bylineLargeImageUrl\n\t\t: null;\n\n\tconst shouldShowBylineImage =\n\t\tcontributorTag && bylineImageUrl && contributorCount === 1;\n\n\treturn (\n\t\t<div css={bylineWrapper}>\n\t\t\t<div\n\t\t\t\tcss={[\n\t\t\t\t\tbylineStyle(pillar),\n\t\t\t\t\t!shouldShowBylineImage && bottomPadding,\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<Byline\n\t\t\t\t\tbyline={articleData.author.byline}\n\t\t\t\t\ttags={articleData.tags}\n\t\t\t\t\tguardianBaseURL={articleData.guardianBaseURL}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t{shouldShowBylineImage && (\n\t\t\t\t<amp-img\n\t\t\t\t\tclass={bylineImageStyle}\n\t\t\t\t\tsrc={bylineImageUrl}\n\t\t\t\t\talt={`Contributor image for: ${contributorTag.title}`}\n\t\t\t\t\twidth=\"180\"\n\t\t\t\t\theight=\"150\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport const TopMetaOpinion: React.FC<{\n\tarticleData: ArticleModel;\n\tpillar: ArticleTheme;\n}> = ({ articleData, pillar }) => {\n\treturn (\n\t\t<header>\n\t\t\t{articleData.mainMediaElements.map((element, i) => (\n\t\t\t\t<MainMedia key={i} element={element} pillar={pillar} />\n\t\t\t))}\n\n\t\t\t<SeriesLink\n\t\t\t\tbaseURL={articleData.guardianBaseURL}\n\t\t\t\ttags={articleData.tags}\n\t\t\t\tpillar={pillar}\n\t\t\t\tfallbackToSection={false}\n\t\t\t/>\n\n\t\t\t<h1 css={headerStyle}>{articleData.headline}</h1>\n\n\t\t\t<BrandingRegionContainer\n\t\t\t\tcommercialProperties={articleData.commercialProperties}\n\t\t\t>\n\t\t\t\t{(branding) => <Branding branding={branding} pillar={pillar} />}\n\t\t\t</BrandingRegionContainer>\n\n\t\t\t<BylineMeta articleData={articleData} pillar={pillar} />\n\n\t\t\t<Standfirst text={articleData.standfirst} pillar={pillar} />\n\n\t\t\t<TopMetaExtras\n\t\t\t\tsharingUrls={getSharingUrls(\n\t\t\t\t\tarticleData.pageId,\n\t\t\t\t\tarticleData.webTitle,\n\t\t\t\t)}\n\t\t\t\tpillar={pillar}\n\t\t\t\tageWarning={getAgeWarning(\n\t\t\t\t\tarticleData.tags,\n\t\t\t\t\tarticleData.webPublicationDateDeprecated,\n\t\t\t\t)}\n\t\t\t\twebPublicationDate={articleData.webPublicationDateDisplay}\n\t\t\t\ttwitterHandle={articleData.author.twitterHandle}\n\t\t\t/>\n\t\t</header>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/components/topMeta/TopMetaPaidContent.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":88,"column":20,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":88,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { body, neutral, text, textSans } from '@guardian/source-foundations';\nimport React from 'react';\nimport { getAgeWarning } from '../../../lib/age-warning';\nimport { getSharingUrls } from '../../../lib/sharing-urls';\nimport type { ArticleModel } from '../../types/ArticleModel';\nimport { MainMedia } from '../MainMedia';\nimport { BrandingRegionContainer } from './Branding';\nimport { Byline } from './Byline';\nimport { PaidForBand } from './PaidForBand';\nimport { Standfirst } from './Standfirst';\nimport { TopMetaExtras } from './TopMetaExtras';\n\nconst headerStyle = css`\n\t${textSans.xlarge()};\n\tfont-weight: 400;\n\tpadding-top: 3px;\n\tpadding-bottom: 27px;\n\tcolor: ${neutral[7]};\n`;\n\nconst bylineStyle = css`\n\t${body.medium()};\n\tcolor: ${neutral[7]};\n\tpadding-bottom: 8px;\n\tfont-style: italic;\n\n\ta {\n\t\tfont-weight: 700;\n\t\tcolor: ${neutral[7]};\n\t\ttext-decoration: none;\n\t\tfont-style: normal;\n\t}\n\ta:hover {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nconst paidForLogoLabelStyle = css`\n\t${textSans.small()};\n\tfont-weight: 700;\n\tmargin-bottom: 6px;\n\tcolor: ${text.supporting};\n`;\nconst paidForLogoStyle = css`\n\tpadding-top: 4px;\n\tmargin-top: 3px;\n\tmargin-bottom: 12px;\n`;\n\nconst PaidForByLogo: React.FC<{\n\tbranding: Branding;\n}> = ({ branding }) => {\n\tconst { logo, sponsorName } = branding;\n\n\treturn (\n\t\t<div css={paidForLogoStyle}>\n\t\t\t<div css={paidForLogoLabelStyle}>Paid for by</div>\n\t\t\t<a\n\t\t\t\thref={logo.link}\n\t\t\t\tdata-sponsor={sponsorName.toLowerCase()}\n\t\t\t\trel=\"nofollow\"\n\t\t\t\taria-label={`Visit the ${sponsorName} website`}\n\t\t\t>\n\t\t\t\t<amp-img\n\t\t\t\t\tsrc={logo.src}\n\t\t\t\t\twidth=\"140px\"\n\t\t\t\t\theight=\"90px\"\n\t\t\t\t\talt={sponsorName}\n\t\t\t\t/>\n\t\t\t</a>\n\t\t</div>\n\t);\n};\n\nconst Headline: React.FC<{\n\theadlineText: string;\n}> = ({ headlineText }) => <h1 css={headerStyle}>{headlineText}</h1>;\n\nexport const TopMetaPaidContent: React.FC<{\n\tarticleData: ArticleModel;\n\tpillar: ArticleTheme;\n}> = ({ articleData, pillar }) => (\n\t<header>\n\t\t<PaidForBand />\n\n\t\t{articleData.mainMediaElements.map((element, i) => (\n\t\t\t<MainMedia key={i} element={element} pillar={pillar} />\n\t\t))}\n\n\t\t<Headline headlineText={articleData.headline} />\n\n\t\t<BrandingRegionContainer\n\t\t\tcommercialProperties={articleData.commercialProperties}\n\t\t>\n\t\t\t{(branding) => <PaidForByLogo branding={branding} />}\n\t\t</BrandingRegionContainer>\n\n\t\t<Standfirst text={articleData.standfirst} pillar={pillar} />\n\n\t\t<div css={bylineStyle}>\n\t\t\t<Byline\n\t\t\t\tbyline={articleData.author.byline}\n\t\t\t\ttags={articleData.tags}\n\t\t\t\tguardianBaseURL={articleData.guardianBaseURL}\n\t\t\t/>\n\t\t</div>\n\n\t\t<TopMetaExtras\n\t\t\tsharingUrls={getSharingUrls(\n\t\t\t\tarticleData.pageId,\n\t\t\t\tarticleData.webTitle,\n\t\t\t)}\n\t\t\tpillar={pillar}\n\t\t\tageWarning={getAgeWarning(\n\t\t\t\tarticleData.tags,\n\t\t\t\tarticleData.webPublicationDateDeprecated,\n\t\t\t)}\n\t\t\twebPublicationDate={articleData.webPublicationDateDisplay}\n\t\t\ttwitterHandle={articleData.author.twitterHandle}\n\t\t/>\n\t</header>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/ad-json.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/ad-json.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":12,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":12,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Passed raw as configuration to the ad\ninterface KV {\n\tname: string;\n\tvalue: string;\n}\n\ninterface AdJson {\n\ttargeting: KV[];\n}\n\nexport const adJson = (targeting: AdTargetParam[]): AdJson => {\n\tif (!targeting) {\n\t\treturn { targeting: [] };\n\t}\n\n\tconst json = targeting\n\t\t.filter((p) => p.name !== 'p')\n\t\t.map(({ name, value }) => ({\n\t\t\tname,\n\t\t\tvalue: Array.isArray(value) ? value.join(',') : value,\n\t\t}));\n\tjson.push({ name: 'p', value: 'amp' });\n\tjson.push({ name: 'rp', value: 'dotcom-rendering' });\n\n\treturn { targeting: json };\n};\n\nexport const stringify = (json: AdJson): string => {\n\tinterface Map {\n\t\t[key: string]: string;\n\t}\n\tconst targeting = json.targeting.reduce<Map>((params, param) => {\n\t\tparams[param.name] = param.value;\n\t\treturn params;\n\t}, {});\n\n\treturn JSON.stringify({ targeting });\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/block-link.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/byline-tokens.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/byline-tokens.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/edition.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/enhance.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/enhance.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":7,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":7,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":10,"column":14,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":16,"endColumn":2},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":10,"column":25,"nodeType":"Identifier","messageId":"unsafeCall","endLine":10,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":18,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":19,"column":2,"nodeType":"CallExpression","messageId":"unsafeReturn","endLine":24,"endColumn":3},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":19,"column":2,"nodeType":"Identifier","messageId":"unsafeCall","endLine":19,"endColumn":10},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":32,"column":4,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":32,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import compose from 'compose-function';\nimport { minify } from 'html-minifier';\nimport { sanitiseHTML } from '../../model/sanitise';\n\n// We don't represent lists in InCopy, so things will just come across with bullet characters.\n// These may also be used for emphasis, so bullet characters don't mean list.\nexport const bigBullets = (s: string) =>\n\ts.replace(/•/g, '<span class=\"bullet\">&bull;</span>');\n\nexport const minimise = compose(bigBullets, (s: string) =>\n\tminify(s, {\n\t\tcollapseWhitespace: true,\n\t\tminifyCSS: true,\n\t\tminifyJS: true,\n\t}),\n);\n\nexport const clean = (html: string) =>\n\tminimise(\n\t\tsanitiseHTML(html, {\n\t\t\tADD_TAGS: ['#comment'],\n\t\t\tFORCE_BODY: true,\n\t\t}),\n\t);\n\nexport const enhance = (elements: CAPIElement[]): CAPIElement[] => {\n\treturn elements.map((element) => {\n\t\tif (\n\t\t\telement._type ===\n\t\t\t'model.dotcomrendering.pageElements.InteractiveAtomBlockElement'\n\t\t) {\n\t\t\telement.html = element.html ? clean(element.html) : element.html;\n\t\t}\n\t\treturn element;\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/find-adslots.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any[]` assigned to a parameter of type `CAPIElement[]`.","line":65,"column":23,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":65,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any[]` assigned to a parameter of type `CAPIElement[]`.","line":71,"column":23,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":71,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tAD_LIMIT,\n\tfindAdSlots,\n\tfindBlockAdSlots,\n\tgetElementLength,\n\tSMALL_PARA_CHARS,\n} from './find-adslots';\n\nconst getTextBlockElement = (length: number): TextBlockElement => {\n\treturn {\n\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\telementId: 'mockId',\n\t\thtml: `${'.'.repeat(length)}`,\n\t};\n};\n\ndescribe('ampadslots', () => {\n\tconst imageBlockElement: ImageBlockElement = {\n\t\t_type: 'model.dotcomrendering.pageElements.ImageBlockElement',\n\t\telementId: 'mockId',\n\t\tmedia: { allImages: [] },\n\t\tdata: { alt: 'img', credit: 'nobody' },\n\t\timageSources: [],\n\t\tdisplayCredit: false,\n\t\trole: 'inline',\n\t};\n\n\tconst tenCharTextBlock = getTextBlockElement(10);\n\tconst fiveHundredCharTextBlock = getTextBlockElement(500);\n\n\tdescribe('findAdSlots', () => {\n\t\tit('should have these values for ad spacing (or tests other than this one need updating)', () => {\n\t\t\texpect(AD_LIMIT).toEqual(8);\n\t\t\texpect(SMALL_PARA_CHARS).toEqual(50);\n\t\t});\n\n\t\tit('adds an advert after 700 chars', () => {\n\t\t\tconst data: CAPIElement[] = [\n\t\t\t\t{\n\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\thtml: `Mr and Mrs Dursley of number 4 privet drive were proud to say${'.'.repeat(\n\t\t\t\t\t\t700,\n\t\t\t\t\t)}`,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\thtml: `that they were perfectly normal${'.'.repeat(700)}`,\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(findAdSlots(data)).toEqual([0]);\n\t\t});\n\n\t\tit('does not add an advert after 699 chars', () => {\n\t\t\tconst data = [getTextBlockElement(300), getTextBlockElement(399)];\n\n\t\t\texpect(findAdSlots(data)).toEqual([]);\n\t\t});\n\n\t\tit('should not add more than 8 adverts', () => {\n\t\t\tconst data = Array(30).fill(fiveHundredCharTextBlock, 0, 30);\n\n\t\t\texpect(findAdSlots(data).length).toEqual(8);\n\t\t});\n\n\t\tit('should not break up small paragraphs with ads', () => {\n\t\t\tconst data = Array(50).fill(tenCharTextBlock, 0, 50);\n\n\t\t\texpect(findAdSlots(data).length).toEqual(0);\n\t\t});\n\n\t\tit('should not put an advert directly before a non text element', () => {\n\t\t\tconst data = [\n\t\t\t\tgetTextBlockElement(700),\n\t\t\t\tgetTextBlockElement(29),\n\t\t\t\timageBlockElement,\n\t\t\t];\n\t\t\texpect(findAdSlots(data).length).toEqual(0);\n\t\t});\n\n\t\tit('should not put an advert directly after a non text element', () => {\n\t\t\tconst data = [\n\t\t\t\tgetTextBlockElement(700),\n\t\t\t\timageBlockElement,\n\t\t\t\tgetTextBlockElement(29),\n\t\t\t];\n\t\t\texpect(findAdSlots(data).length).toEqual(0);\n\t\t});\n\n\t\tit('should place an advert sufficiently far away from a non text element', () => {\n\t\t\tconst data = [\n\t\t\t\tgetTextBlockElement(700),\n\t\t\t\timageBlockElement,\n\t\t\t\tgetTextBlockElement(200),\n\t\t\t\tgetTextBlockElement(200),\n\t\t\t];\n\n\t\t\texpect(findAdSlots(data).length).toEqual(1);\n\t\t});\n\t});\n\n\tdescribe('findBlockAdSlots', () => {\n\t\tit('should intersperse ads every 5 blocks up to a maximum of 8', () => {\n\t\t\tconst blocks = Array(100).fill('foo');\n\n\t\t\tconst slots = findBlockAdSlots(blocks);\n\n\t\t\texpect(slots).toEqual([4, 9, 14, 19, 24, 29, 34, 39]);\n\t\t});\n\t});\n});\n\ndescribe('getElementLength', () => {\n\tit('should correctly calculate the length of a text block (stripping html chars)', () => {\n\t\tconst textBlock = getTextBlockElement(200);\n\t\ttextBlock.html = `<p>${textBlock.html}</p>`;\n\t\texpect(getElementLength(textBlock)).toEqual(200);\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/find-adslots.ts","messages":[{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":38,"column":4,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":38,"endColumn":38},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":171,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":171,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4496,4499],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4496,4499],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Find ad slots\n *\n * Returns a list of indexes *after* which ads should be directly\n * placed.\n *\n * Ads are placed:\n *\n * * sufficiently far from other ads (isReadyForAd)\n * * sufficiently far from non-text elements (NONTEXT_BUFFER_[FWD|BWD])\n * * non adjacent to small (SMALL_PARA_CHARS) paragraphs\n *\n * These tests apply forwards and backwards, though in the case of\n * non-text buffers, the values differ.\n *\n * Where the above tests are met, we say there is adequate 'buffer'\n * around the ad and it can be placed.\n */\n\ninterface ElementWithLength {\n\telement: CAPIElement;\n\tlength: number;\n}\n\nexport const AD_LIMIT = 8;\nexport const SMALL_PARA_CHARS = 50;\nconst NONTEXT_BUFFER_FORWARD = 300;\nconst NONTEXT_BUFFER_BACKWARD = 200;\n\nconst isTextElement = (e: CAPIElement): boolean => {\n\treturn e._type === 'model.dotcomrendering.pageElements.TextBlockElement';\n};\n\nexport const getElementLength = (element: CAPIElement): number => {\n\tswitch (element._type) {\n\t\tcase 'model.dotcomrendering.pageElements.TextBlockElement':\n\t\t\t// we don't want to count html characters\n\t\t\tconst htmlRegex = /(<([^>]+)>)/gi;\n\t\t\treturn element.html.replace(htmlRegex, '').length;\n\t\tdefault:\n\t\t\treturn 0; // for the purposes of ads we don't care how long other elements are\n\t}\n};\n\nconst getElementsWithLength = (\n\telements: CAPIElement[],\n): ElementWithLength[] => {\n\treturn elements.map((e) => {\n\t\treturn {\n\t\t\telement: e,\n\t\t\tlength: getElementLength(e),\n\t\t};\n\t});\n};\n\nconst getLengthOfFollowingTextElements = (\n\telements: ElementWithLength[],\n): number => {\n\tconst firstNonTextIndex = elements.findIndex(\n\t\t(e) => !isTextElement(e.element),\n\t);\n\n\treturn elements\n\t\t.slice(0, firstNonTextIndex)\n\t\t.map((e) => e.length)\n\t\t.reduce((a, b) => a + b, 0);\n};\n\nconst suitableAdNeighbour = (e: ElementWithLength): boolean => {\n\treturn isTextElement(e.element) && e.length > SMALL_PARA_CHARS;\n};\n\nconst hasForwardBuffer = (\n\telements: ElementWithLength[],\n\tindex: number,\n): boolean => {\n\tconst forwardElements = elements.slice(index + 1, elements.length);\n\tconst meetsThreshold =\n\t\tgetLengthOfFollowingTextElements(forwardElements) >=\n\t\tNONTEXT_BUFFER_FORWARD;\n\tconst noForwardsEmbeds =\n\t\tforwardElements.filter((e) => isTextElement(e.element)).length ===\n\t\tforwardElements.length;\n\n\tconst enoughCharsForward = meetsThreshold || noForwardsEmbeds;\n\n\tconst neighbourSuitable = elements[index]\n\t\t? suitableAdNeighbour(elements[index])\n\t\t: false;\n\treturn enoughCharsForward && neighbourSuitable;\n};\n\nconst hasBackwardBuffer = (\n\telements: ElementWithLength[],\n\tindex: number,\n): boolean => {\n\tconst backwardsElements = elements.slice(0, index).reverse();\n\tconst meetsThreshold =\n\t\tgetLengthOfFollowingTextElements(backwardsElements) >=\n\t\tNONTEXT_BUFFER_BACKWARD;\n\tconst noBackwardsEmbeds =\n\t\tbackwardsElements.filter((e) => isTextElement(e.element)).length ===\n\t\tbackwardsElements.length;\n\n\tconst enoughCharsBackward = meetsThreshold || noBackwardsEmbeds;\n\n\treturn suitableAdNeighbour(elements[index]) && enoughCharsBackward;\n};\n\n/**\n * There are some magic numbers here - obtained by eyeballing content. Feel free\n * to update them if you notice issues.\n */\nconst sufficientSpaceSinceLastAd = (\n\tcharsSinceLastAd: number,\n\tparagraphsSinceLastAd: number,\n): boolean => {\n\treturn (\n\t\t(charsSinceLastAd > 700 && paragraphsSinceLastAd > 1) ||\n\t\tcharsSinceLastAd > 900\n\t);\n};\n\nconst hasSpaceForAd = (\n\telements: ElementWithLength[],\n\tindex: number,\n\tcharsSinceLastAd: number,\n\tparagraphsSinceLastAd: number,\n): boolean => {\n\treturn (\n\t\tsufficientSpaceSinceLastAd(charsSinceLastAd, paragraphsSinceLastAd) &&\n\t\thasBackwardBuffer(elements, index) &&\n\t\thasForwardBuffer(elements, index)\n\t);\n};\n\n// Returns index of items to place ads *after*\nexport const findAdSlots = (elements: CAPIElement[]): number[] => {\n\tlet charsSinceLastAd = 0;\n\tlet paragraphsSinceLastAd = 0;\n\tlet adCount = 0;\n\tconst adSlots = [];\n\n\tconst elementsWithLength = getElementsWithLength(elements);\n\n\tfor (let i = 0; i < elementsWithLength.length; i += 1) {\n\t\tif (adCount < AD_LIMIT && isTextElement(elements[i])) {\n\t\t\tcharsSinceLastAd += elementsWithLength[i].length;\n\n\t\t\tif (\n\t\t\t\thasSpaceForAd(\n\t\t\t\t\telementsWithLength,\n\t\t\t\t\ti,\n\t\t\t\t\tcharsSinceLastAd,\n\t\t\t\t\tparagraphsSinceLastAd,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tadSlots.push(i - 1);\n\t\t\t\tcharsSinceLastAd = 0;\n\t\t\t\tparagraphsSinceLastAd = 0;\n\t\t\t\tadCount += 1;\n\t\t\t} else {\n\t\t\t\tparagraphsSinceLastAd += 1;\n\t\t\t}\n\t\t}\n\t}\n\treturn adSlots;\n};\n\n// Returns index of items to place ads *after*\nexport const findBlockAdSlots = (blocks: any[]): number[] => {\n\tconst maxAds = 8;\n\n\t// Place slots every five elements, but not at the beginning. Limit to\n\t// maxAds.\n\treturn blocks\n\t\t.map((_, i) => i)\n\t\t.filter((i) => i !== 0 && i % 5 === 0)\n\t\t.map((i) => i - 1)\n\t\t.slice(0, maxAds);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/get-video-id.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/get-video-id.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":3,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":5},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":36,"column":7,"nodeType":"Punctuator","messageId":"preferNullish","endLine":36,"endColumn":9,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[936,938],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { parse, URLSearchParams } from 'url';\n\nexport const getIdFromUrl = (\n\turlString: string,\n\tregexFormat: string,\n\ttryInPath?: boolean,\n\ttryQueryParam?: string,\n) => {\n\tconst logErr = (actual: string, message: string) => {\n\t\tthrow new Error(\n\t\t\t`validate getIdFromURL error: The URL ${urlString} returned ${actual}. ${message}`,\n\t\t);\n\t};\n\n\tconst url = parse(urlString);\n\n\t// Looks for ID in both formats if provided\n\tconst ids: string[] = [\n\t\ttryQueryParam &&\n\t\t\turl.query &&\n\t\t\tnew URLSearchParams(url.query).get(tryQueryParam),\n\t\ttryInPath && url.pathname && url.pathname.split('/').pop(),\n\t].filter((tryId): tryId is string => !!tryId);\n\n\tif (!ids.length)\n\t\tlogErr(\n\t\t\t'an undefined ID',\n\t\t\t'Could not get ID from pathname or searchParams.',\n\t\t);\n\n\t// Allows for a matching ID to be selected from either (or both) formats\n\tconst id = ids.find((tryId) => new RegExp(regexFormat).test(tryId));\n\n\tif (!id) {\n\t\treturn logErr(\n\t\t\tid || ids.join(', '),\n\t\t\t`Value(s) didn't match regexFormat ${regexFormat}`,\n\t\t);\n\t}\n\n\treturn id;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/image-fit.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":37,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":37,"endColumn":13},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":44,"column":94,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":44,"endColumn":96}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { bestFitImage, heightEstimate } from './image-fit';\n\ntest('chooses smallest image that is still greater than column width', () => {\n\tconst images = [\n\t\t{\n\t\t\tweighting: 'inline' as Weighting,\n\t\t\tsrcSet: [\n\t\t\t\t{\n\t\t\t\t\tsrc: 'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=620&quality=85&auto=format&fit=max&s=dedab549648a105a71696cadab62715f',\n\t\t\t\t\twidth: 620,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsrc: 'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=605&quality=85&auto=format&fit=max&s=8e367c059ef0a2ef00cc5c318a22c8a8',\n\t\t\t\t\twidth: 605,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsrc: 'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=445&quality=85&auto=format&fit=max&s=a73e2a4c64e72082284add1ac2bbd624',\n\t\t\t\t\twidth: 445,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tweighting: 'thumbnail' as Weighting,\n\t\t\tsrcSet: [\n\t\t\t\t{\n\t\t\t\t\tsrc: 'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=140&quality=85&auto=format&fit=max&s=92dec489a4ea25b8ba80f8b260ca0bb9',\n\t\t\t\t\twidth: 140,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsrc: 'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=120&quality=85&auto=format&fit=max&s=b0d93418512fb3213d356b148490ed48',\n\t\t\t\t\twidth: 120,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t];\n\tconst bestFit = bestFitImage(images, 600);\n\tif (bestFit) {\n\t\texpect(bestFit.src).toBe(\n\t\t\t'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=605&quality=85&auto=format&fit=max&s=8e367c059ef0a2ef00cc5c318a22c8a8',\n\t\t);\n\t}\n});\n\ntest('if no image is greater than column width, just return the biggest available', async () => {\n\tconst images = [\n\t\t{\n\t\t\tweighting: 'thumbnail' as Weighting,\n\t\t\tsrcSet: [\n\t\t\t\t{\n\t\t\t\t\tsrc: 'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=140&quality=85&auto=format&fit=max&s=92dec489a4ea25b8ba80f8b260ca0bb9',\n\t\t\t\t\twidth: 140,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsrc: 'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=120&quality=85&auto=format&fit=max&s=b0d93418512fb3213d356b148490ed48',\n\t\t\t\t\twidth: 120,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t];\n\tconst bestFit = bestFitImage(images, 600);\n\texpect(bestFit.src).toBe(\n\t\t'https://i.guim.co.uk/img/media/d78248012632672db90b7cbd766e6a8383542fc0/0_316_4366_2619/master/4366.jpg?width=140&quality=85&auto=format&fit=max&s=92dec489a4ea25b8ba80f8b260ca0bb9',\n\t);\n});\n\ntest('throws an error if no image', () => {\n\tconst images: ImageSource[] = [];\n\texpect(() => bestFitImage(images, 600)).toThrow();\n});\n\ntest('it gets the correct image height, using aspect ratio', () => {\n\tconst comparisonImage: Image = {\n\t\tindex: 1234,\n\t\tfields: {\n\t\t\theight: '600',\n\t\t\twidth: '1000',\n\t\t\tisMaster: 'false',\n\t\t},\n\t\tmediaType: 'picture',\n\t\tmimeType: 'jpg',\n\t\turl: 'https://media.guim.co.uk/abc/1000',\n\t};\n\tconst width = 600;\n\tconst h = heightEstimate(comparisonImage, width);\n\n\texpect(h).toBe(360);\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/image-fit.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":19,"column":17,"nodeType":"Punctuator","messageId":"preferNullish","endLine":19,"endColumn":19,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[477,479],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const bestFitImage = (\n\timages: ImageSource[],\n\tcontainerWidth: number,\n): SrcSetItem => {\n\tconst srcSets: SrcSetItem[] = images.reduce(\n\t\t(acc: SrcSetItem[], curr: ImageSource) => acc.concat(curr.srcSet),\n\t\t[],\n\t);\n\n\t// should confirm this is the correct behaviour\n\tif (srcSets.length === 0) {\n\t\tthrow new Error('No inline images found');\n\t}\n\n\tconst bestFit = srcSets\n\t\t.sort((a, b) => a.width - b.width)\n\t\t.find((img) => img.width >= containerWidth);\n\n\treturn bestFit || srcSets[srcSets.length - 1];\n};\n\n// AMP images need their height set explicitly, but\n// ImageBlockElement.imageSources doesn't pass height through. So\n// have to calculate height using aspect ratio from ImageBlockElement.media.allImages\nexport const heightEstimate = (img: Image, width: number): number => {\n\tconst w = parseInt(img.fields.width, 10);\n\tconst h = parseInt(img.fields.height, 10);\n\tconst aspectRatio = w / h;\n\n\treturn width / aspectRatio;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/permutive.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/permutive.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1209,1212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1209,1212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1819,1822],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1819,1822],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1967,1970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1967,1970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":61,"column":4,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":61,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface PermutivePayload {\n\t'properties.content.premium'?: string;\n\t'properties.content.id'?: string;\n\t'properties.content.title'?: string;\n\t'properties.content.section'?: string;\n\t'properties.content.authors!'?: string;\n\t'properties.content.keywords!'?: string;\n\t'properties.content.publishedAt'?: string;\n\t'properties.content.tone'?: string;\n\t'properties.user.edition'?: string;\n}\n\nexport const generatePermutivePayload = (\n\trawConfig: CommercialConfigType,\n): PermutivePayload => {\n\tconst publishedAt =\n\t\trawConfig.webPublicationDate &&\n\t\ttypeof rawConfig.webPublicationDate === 'number'\n\t\t\t? new Date(rawConfig.webPublicationDate).toISOString()\n\t\t\t: null;\n\tconst authors =\n\t\trawConfig.author && typeof rawConfig.author === 'string'\n\t\t\t? rawConfig.author\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map((s) => s.trim())\n\t\t\t\t\t.join()\n\t\t\t: null;\n\tconst keywords =\n\t\trawConfig.keywords && typeof rawConfig.keywords === 'string'\n\t\t\t? rawConfig.keywords\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map((s) => s.trim())\n\t\t\t\t\t.join()\n\t\t\t: null;\n\tconst toneIds =\n\t\trawConfig.toneIds && typeof rawConfig.toneIds === 'string'\n\t\t\t? rawConfig.toneIds\n\t\t\t\t\t.split(',')\n\t\t\t\t\t.map((s) => s.trim())\n\t\t\t\t\t.join()\n\t\t\t: null;\n\tconst config: { [key: string]: any } = {\n\t\t'properties.content.premium': rawConfig.isPaidContent,\n\t\t'properties.content.type': rawConfig.contentType,\n\t\t'properties.content.series': rawConfig.series,\n\t\t'properties.content.id': rawConfig.pageId,\n\t\t'properties.content.title': rawConfig.headline,\n\t\t'properties.content.section': rawConfig.section,\n\t\t'properties.content.authors!list[string]': authors,\n\t\t'properties.content.keywords!list[string]': keywords,\n\t\t'properties.content.publishedAt': publishedAt,\n\t\t'properties.content.tone!list[string]': toneIds,\n\t\t'properties.user.edition': rawConfig.edition,\n\t};\n\n\tconst payload: { [key: string]: any } = Object.keys(config)\n\t\t.filter(\n\t\t\t(key) => typeof config[key] !== 'undefined' && config[key] !== null,\n\t\t)\n\t\t.reduce((acc: { [key: string]: any }, key) => {\n\t\t\tacc[key] = config[key];\n\t\t\treturn acc;\n\t\t}, {});\n\n\treturn payload;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/real-time-config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/region-classes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/sanitise-html.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/sanitise-html.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/scripts.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/srcset-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/tag-utils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/lib/tag-utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/pages/Article.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/server/ampExperimentCache.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":27,"column":4,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":27,"endColumn":29},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":36,"column":18,"nodeType":"MemberExpression","messageId":"unexpected","endLine":36,"endColumn":31},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":36,"column":65,"nodeType":"Identifier","messageId":"invalidType","endLine":36,"endColumn":66},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":42,"column":16,"nodeType":"MemberExpression","messageId":"unexpected","endLine":42,"endColumn":29},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":42,"column":63,"nodeType":"Identifier","messageId":"invalidType","endLine":42,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fetch from 'node-fetch';\n\nexport type AmpExperiment = {\n\tsticky?: boolean;\n\tconsentNotificationId?: string;\n\tvariants: {\n\t\t[key: string]: number; // floating point number\n\t};\n};\n\nexport type AmpExperiments = {\n\t[key: string]: AmpExperiment;\n};\n\nexport const ampExperimentsDataUrl =\n\tprocess.env.GU_STAGE === 'PROD'\n\t\t? 'https://contributions.guardianapis.com/amp/experiments_data'\n\t\t: 'https://contributions.code.dev-guardianapis.com/amp/experiments_data';\n\nlet ampExperimentCache: AmpExperiments = {};\nexport const getAmpExperimentCache = (): AmpExperiments => ampExperimentCache;\n\nconst fetchExperimentsData = (): Promise<void> => {\n\treturn fetch(ampExperimentsDataUrl)\n\t\t.then((rawResponse) => rawResponse.json())\n\t\t.then((json) => {\n\t\t\tampExperimentCache = json;\n\t\t});\n};\n\nconst oneMinute = 60_000;\nconst refreshExperimentsData = () => {\n\tsetTimeout(() => {\n\t\tfetchExperimentsData()\n\t\t\t.then(refreshExperimentsData)\n\t\t\t.catch((e) => console.error(`fetchExperimentsData - error: ${e}`));\n\t}, oneMinute * 2);\n};\n\nfetchExperimentsData()\n\t.then(refreshExperimentsData)\n\t.catch((e) => console.error(`fetchExperimentsData - error: ${e}`));\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/server/document.test.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":79,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":79,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import validator from 'amphtml-validator';\nimport { Article as ExampleArticle } from '../../../fixtures/generated/articles/Article';\nimport { extractNAV } from '../../model/extract-nav';\nimport type { AnalyticsModel } from '../components/Analytics';\nimport { Article } from '../pages/Article';\nimport { document } from './document';\n\ntest('rejects invalid AMP doc (to test validator)', async () => {\n\tconst v = await validator.getInstance();\n\tconst linkedData = [{}];\n\tconst metadata = { description: '', canonicalURL: '' };\n\tconst result = v.validateString(\n\t\tdocument({\n\t\t\tlinkedData,\n\t\t\tmetadata,\n\t\t\ttitle: 'foo',\n\t\t\tscripts: [''],\n\t\t\tbody: <img alt=\"foo\" />,\n\t\t}),\n\t);\n\texpect(result.errors.length > 0).toBe(true);\n});\n\n// TODO failing because fixture still models blocks as nested array of elements\n// rather than a list of Block(s) - that are objects with 'id' and 'elements'\n// fields. This then errors in Elements.tsx.\ntest('produces valid AMP doc', async () => {\n\tconst v = await validator.getInstance();\n\tconst { config } = ExampleArticle;\n\tconst nav = extractNAV(ExampleArticle.nav);\n\tconst { linkedData } = ExampleArticle;\n\n\tconst metadata = {\n\t\tdescription: ExampleArticle.trailText,\n\t\tcanonicalURL: ExampleArticle.webURL,\n\t};\n\n\tconst analytics: AnalyticsModel = {\n\t\tgaTracker: 'UA-XXXXXXX-X',\n\t\ttitle: 'Foo',\n\t\tfbPixelaccount: 'XXXXXXXXXX',\n\t\tcomscoreID: 'XXXXXXX',\n\t\tsection: ExampleArticle.sectionName,\n\t\tcontentType: ExampleArticle.contentType,\n\t\tid: ExampleArticle.pageId,\n\t\tneilsenAPIID: 'XXXXXX-XXXX-XXXX-XXXX-XXXXXXXXX',\n\t\tdomain: 'amp.theguardian.com',\n\t\tpermutive: {\n\t\t\tnamespace: 'guardian',\n\t\t\tapiKey: '42-2020',\n\t\t\tpayload: {\n\t\t\t\t'properties.content.title': 'article title',\n\t\t\t},\n\t\t},\n\t\tipsosSectionName: 'section',\n\t};\n\n\tconst body = (\n\t\t<Article\n\t\t\texperimentsData={{}}\n\t\t\tnav={nav}\n\t\t\tarticleData={{ ...ExampleArticle, shouldHideReaderRevenue: false }}\n\t\t\tconfig={config}\n\t\t\tanalytics={analytics}\n\t\t/>\n\t);\n\n\tconst result = v.validateString(\n\t\tdocument({\n\t\t\tbody,\n\t\t\tlinkedData,\n\t\t\tmetadata,\n\t\t\ttitle: 'foo',\n\t\t\tscripts: [],\n\t\t}),\n\t);\n\n\tif (result.errors.length > 0) {\n\t\tconsole.log(result.errors);\n\t}\n\texpect(result.errors.length).toBe(0);\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/server/document.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":22,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":6},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[729,732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[729,732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":37,"column":0,"nodeType":null,"endLine":37,"endColumn":63},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":97,"column":11,"nodeType":"CallExpression","messageId":"invalidType","endLine":97,"endColumn":24}],"suppressedMessages":[{"ruleId":"@typescript-eslint/unbound-method","severity":2,"message":"Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.","line":38,"column":8,"nodeType":"VariableDeclarator","messageId":"unboundWithoutThisAnnotation","endLine":38,"endColumn":56,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import createCache from '@emotion/cache';\nimport { CacheProvider } from '@emotion/react';\nimport createEmotionServer from '@emotion/server/create-instance';\nimport { resets } from '@guardian/source-foundations';\nimport he from 'he';\nimport React from 'react';\nimport { renderToStaticMarkup } from 'react-dom/server';\nimport { getFontsCss } from '../../lib/fonts-css';\nimport { epicChoiceCardCss } from '../components/Epic';\nimport { stickyAdLabelCss } from '../components/StickyAd';\n\ninterface RenderToStringResult {\n\thtml: string;\n\tcss: string;\n}\n\ninterface Metadata {\n\tdescription: string;\n\tcanonicalURL: string;\n}\n\nexport const document = ({\n\tlinkedData,\n\ttitle,\n\tbody,\n\tscripts,\n\tmetadata,\n}: {\n\tlinkedData: { [key: string]: any }[];\n\ttitle: string;\n\tbody: React.ReactElement;\n\tscripts: string[];\n\tmetadata: Metadata;\n}) => {\n\tconst key = 'dcr-amp';\n\tconst cache = createCache({ key });\n\t// eslint-disable-next-line @typescript-eslint/unbound-method\n\tconst { extractCritical } = createEmotionServer(cache);\n\tconst { html, css }: RenderToStringResult = extractCritical(\n\t\trenderToStaticMarkup(\n\t\t\t<CacheProvider value={cache}>{body}</CacheProvider>,\n\t\t),\n\t);\n\n\tconst favicon =\n\t\tprocess.env.NODE_ENV === 'production'\n\t\t\t? 'favicon-32x32.ico'\n\t\t\t: 'favicon-32x32-dev-yellow.ico';\n\n\treturn `<!doctype html>\n<html ⚡ lang=\"en\">\n    <head>\n    <meta charset=\"utf-8\">\n\n    <!-- SEO related meta -->\n    <title>${title}</title>\n    <meta name=\"description\" content=\"${he.encode(metadata.description)}\" />\n\n    <link rel=\"canonical\" href=\"${metadata.canonicalURL}\" />\n    <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1\">\n    <link rel=\"icon\" href=\"https://static.guim.co.uk/images/${favicon}\">\n\n\n    ${linkedData.reduce(\n\t\t(prev, ld) => `${prev}\n<script type=\"application/ld+json\">${JSON.stringify(ld)}</script>`,\n\t\t'',\n\t)}\n\n    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>\n    <script async src=\"https://cdn.ampproject.org/v0.js\"></script>\n\n    <!-- AMP elements that are always required -->\n    <script async custom-element=\"amp-experiment\" src=\"https://cdn.ampproject.org/v0/amp-experiment-0.1.js\"></script>\n    <script async custom-template=\"amp-mustache\" src=\"https://cdn.ampproject.org/v0/amp-mustache-0.2.js\"></script>\n    <script async custom-element=\"amp-sidebar\" src=\"https://cdn.ampproject.org/v0/amp-sidebar-0.1.js\"></script>\n    <script async custom-element=\"amp-accordion\" src=\"https://cdn.ampproject.org/v0/amp-accordion-0.1.js\"></script>\n    <script async custom-element=\"amp-list\" src=\"https://cdn.ampproject.org/v0/amp-list-0.1.js\"></script>\n    <script async custom-element=\"amp-iframe\" src=\"https://cdn.ampproject.org/v0/amp-iframe-0.1.js\"></script>\n    <script async custom-element=\"amp-analytics\" src=\"https://cdn.ampproject.org/v0/amp-analytics-0.1.js\"></script>\n    <script async custom-element=\"amp-ad\" src=\"https://cdn.ampproject.org/v0/amp-ad-0.1.js\"></script>\n    <script async custom-element=\"amp-geo\" src=\"https://cdn.ampproject.org/v0/amp-geo-0.1.js\"></script>\n    <script async custom-element=\"amp-consent\" src=\"https://cdn.ampproject.org/v0/amp-consent-0.1.js\"></script>\n\t<script async custom-element=\"amp-sticky-ad\" src=\"https://cdn.ampproject.org/v0/amp-sticky-ad-1.0.js\"></script>\n\n    <!-- AMP element which is specific to the live blog -->\n    <script async custom-element=\"amp-live-list\" src=\"https://cdn.ampproject.org/v0/amp-live-list-0.1.js\"></script>\n    <script async custom-element=\"amp-audio\" src=\"https://cdn.ampproject.org/v0/amp-audio-0.1.js\"></script>\n\n    <script async custom-element=\"amp-bind\" src=\"https://cdn.ampproject.org/v0/amp-bind-0.1.js\"></script>\n    <script async custom-element=\"amp-form\" src=\"https://cdn.ampproject.org/v0/amp-form-0.1.js\"></script>\n\n    <!-- AMP elements that are optional dependending on content -->\n    ${scripts.join(' ')}\n\n    <style amp-custom>\n        ${getFontsCss()}\n        ${resets.resetCSS}\n        ${css}\n\t\t${stickyAdLabelCss}\n\t\t${epicChoiceCardCss}\n    </style>\n\n    </head>\n    <body>\n    ${html}\n    </body>\n</html>`;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/server/index.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":76},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `{ [key: string]: any; }`.","line":17,"column":34,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":17,"endColumn":38},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":29,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":29,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1271,1273],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":47,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":47,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1833,1835],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":79,"column":4,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":79,"endColumn":23},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":81,"column":33,"nodeType":"MemberExpression","messageId":"invalidType","endLine":81,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":86,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":86,"endColumn":79}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type express from 'express';\nimport { Article as ExampleArticle } from '../../../fixtures/generated/articles/Article';\nimport { NotRenderableInDCR } from '../../lib/errors/not-renderable-in-dcr';\nimport { findBySubsection } from '../../model/article-sections';\nimport { extractNAV } from '../../model/extract-nav';\nimport { validateAsCAPIType as validateV2 } from '../../model/validate';\nimport type { AnalyticsModel } from '../components/Analytics';\nimport { generatePermutivePayload } from '../lib/permutive';\nimport { extractScripts } from '../lib/scripts';\nimport { Article } from '../pages/Article';\nimport { getAmpExperimentCache } from './ampExperimentCache';\nimport { document } from './document';\n\nexport const render = ({ body }: express.Request, res: express.Response) => {\n\ttry {\n\t\t// TODO remove when migrated to v2\n\t\tconst CAPIArticle = validateV2(body);\n\t\tconst { linkedData } = CAPIArticle;\n\t\tconst { config } = CAPIArticle;\n\t\tconst blockElements = CAPIArticle.blocks.map((block) => block.elements);\n\n\t\t// This is simply to flatten the elements\n\t\tconst elements = ([] as CAPIElement[]).concat(...blockElements);\n\n\t\tconst scripts = [\n\t\t\t...extractScripts(elements, CAPIArticle.mainMediaElements),\n\t\t];\n\n\t\tconst sectionName = CAPIArticle.sectionName || '';\n\t\tconst neilsenAPIID = findBySubsection(sectionName).apiID;\n\n\t\tconst analytics: AnalyticsModel = {\n\t\t\tgaTracker: 'UA-78705427-1',\n\t\t\ttitle: CAPIArticle.headline,\n\t\t\tfbPixelaccount: '279880532344561',\n\t\t\tcomscoreID: '6035250',\n\t\t\tsection: sectionName,\n\t\t\tcontentType: CAPIArticle.contentType,\n\t\t\tid: CAPIArticle.pageId,\n\t\t\tneilsenAPIID,\n\t\t\tdomain: 'amp.theguardian.com',\n\t\t\tpermutive: {\n\t\t\t\tnamespace: 'guardian',\n\t\t\t\tapiKey: '359ba275-5edd-4756-84f8-21a24369ce0b',\n\t\t\t\tpayload: generatePermutivePayload(config),\n\t\t\t},\n\t\t\tipsosSectionName: config.ipsosTag || 'guardian',\n\t\t};\n\n\t\tconst metadata = {\n\t\t\tdescription: CAPIArticle.trailText,\n\t\t\tcanonicalURL: CAPIArticle.webURL,\n\t\t};\n\n\t\tconst resp = document({\n\t\t\tlinkedData,\n\t\t\tscripts,\n\t\t\tmetadata,\n\t\t\ttitle: `${CAPIArticle.headline} | ${CAPIArticle.sectionLabel} | The Guardian`,\n\t\t\tbody: (\n\t\t\t\t<Article\n\t\t\t\t\texperimentsData={getAmpExperimentCache()}\n\t\t\t\t\tarticleData={CAPIArticle}\n\t\t\t\t\tnav={extractNAV(CAPIArticle.nav)}\n\t\t\t\t\tanalytics={analytics}\n\t\t\t\t\tconfig={config}\n\t\t\t\t/>\n\t\t\t),\n\t\t});\n\n\t\tres.status(200).send(resp);\n\t} catch (e) {\n\t\t// a validation error\n\t\tif (e instanceof TypeError) {\n\t\t\tres.status(400).send(`<pre>${e.message}</pre>`);\n\t\t} else if (e instanceof NotRenderableInDCR) {\n\t\t\tres.status(415).send(`<pre>${e.message}</pre>`);\n\t\t} else {\n\t\t\t// @ts-expect-error\n\n\t\t\tres.status(500).send(`<pre>${e.message}</pre>`);\n\t\t}\n\t}\n};\n\nexport const renderPerfTest = (req: express.Request, res: express.Response) => {\n\treq.body = ExampleArticle;\n\trender(req, res);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/amp/types/ArticleModel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/ad-targeting.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/ad-targeting.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":38,"column":21,"nodeType":"Punctuator","messageId":"preferNullish","endLine":38,"endColumn":23,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[883,885],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { isString } from '@guardian/libs';\n\n// TODO: this function already exists in commercial-core, consider exporting it to avoid duplication\nconst getUrlKeywords = (url: string): string[] => {\n\tconst lastSegment = url\n\t\t.split('/')\n\t\t.filter(Boolean) // This handles a trailing slash\n\t\t.slice(-1)[0];\n\n\treturn isString(lastSegment) ? lastSegment.split('-').filter(Boolean) : [];\n};\n\nexport const buildAdTargeting = ({\n\tisAdFreeUser,\n\tisSensitive,\n\tedition,\n\tsection,\n\tsharedAdTargeting,\n\tadUnit,\n\tvideoDuration,\n}: {\n\tisAdFreeUser: boolean;\n\tisSensitive: boolean;\n\tedition: string;\n\tsection: string;\n\tsharedAdTargeting: Record<string, unknown>;\n\tadUnit: string;\n\tvideoDuration?: number;\n}): AdTargeting => {\n\tif (isAdFreeUser) {\n\t\treturn {\n\t\t\tdisableAds: true,\n\t\t};\n\t}\n\tconst customParams = {\n\t\tsens: isSensitive ? ('t' as const) : ('f' as const),\n\t\tsi: 'f',\n\t\tvl: videoDuration || 0,\n\t\tcc: edition,\n\t\ts: section,\n\t\tinskin: 'f',\n\t\t...sharedAdTargeting,\n\t\tpa: 'f',\n\t\turlkw: getUrlKeywords(String(sharedAdTargeting.url)),\n\t};\n\treturn {\n\t\tcustomParams,\n\t\tadUnit,\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/age-warning.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/article-count.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":47,"column":60,"nodeType":"Punctuator","messageId":"preferNullish","endLine":47,"endColumn":62,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1646,1648],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":48,"column":58,"nodeType":"Punctuator","messageId":"preferNullish","endLine":48,"endColumn":60,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1710,1712],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { storage } from '@guardian/libs';\nimport {\n\tgetWeeklyArticleHistory,\n\tincrementWeeklyArticleCount,\n} from '@guardian/support-dotcom-components';\nimport type { WeeklyArticleHistory } from '@guardian/support-dotcom-components/dist/dotcom/src/types';\nimport { hasOptedOutOfArticleCount } from '../web/lib/contributions';\nimport type { DailyArticleHistory } from '../web/lib/dailyArticleCount';\nimport {\n\tgetDailyArticleCount,\n\tincrementDailyArticleCount,\n} from '../web/lib/dailyArticleCount';\n\nexport interface ArticleCounts {\n\tweeklyArticleHistory: WeeklyArticleHistory;\n\tdailyArticleHistory: DailyArticleHistory;\n}\n\n// We should monitor this function call to ensure it only happens within an\n// article pages when other pages are supported by DCR.\nexport const getArticleCounts = async (\n\tpageId: string,\n\tkeywordIds: string,\n): Promise<ArticleCounts | undefined> => {\n\tif (await hasOptedOutOfArticleCount()) return undefined;\n\n\t// hasOptedOut needs to be done before we check if articleCount is set in the window\n\t// This is because a potential race condition where one invocation of getArticleCounts\n\t// is waiting for hasOptedOut another invocation might receive it and increment the article count.\n\tif (!window.guardian.weeklyArticleCount) {\n\t\tincrementWeeklyArticleCount(\n\t\t\tstorage.local,\n\t\t\tpageId,\n\t\t\tkeywordIds.split(','),\n\t\t);\n\n\t\twindow.guardian.weeklyArticleCount = getWeeklyArticleHistory(\n\t\t\tstorage.local,\n\t\t);\n\t}\n\tif (!window.guardian.dailyArticleCount) {\n\t\tincrementDailyArticleCount();\n\t\twindow.guardian.dailyArticleCount = getDailyArticleCount();\n\t}\n\n\treturn {\n\t\tweeklyArticleHistory: window.guardian.weeklyArticleCount || [],\n\t\tdailyArticleHistory: window.guardian.dailyArticleCount || [],\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/assets.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":12,"column":2,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":12,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":14,"column":2,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":14,"endColumn":52}],"suppressedMessages":[{"ruleId":"global-require","severity":2,"message":"Unexpected require().","line":12,"column":13,"nodeType":"CallExpression","messageId":"unexpected","endLine":12,"endColumn":39,"suppressions":[{"kind":"directive","justification":"this may fail"}]},{"ruleId":"global-require","severity":2,"message":"Unexpected require().","line":14,"column":19,"nodeType":"CallExpression","messageId":"unexpected","endLine":14,"endColumn":52,"suppressions":[{"kind":"directive","justification":"this may fail"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"interface AssetHash {\n\t[key: string]: string;\n}\n\nlet manifest: AssetHash = {};\nlet legacyManifest: AssetHash = {};\n\ntry {\n\t// path is relative to the server bundle\n\n\t// eslint-disable-next-line global-require -- this may fail\n\tmanifest = require('./manifest.json');\n\t// eslint-disable-next-line global-require -- this may fail\n\tlegacyManifest = require('./manifest.legacy.json');\n} catch (e) {\n\t// do nothing\n}\n\n/**\n * Decides the url to use for fetching assets\n *\n * @param {'PROD' | 'CODE' | undefined} stage the environment code is executing in\n * @returns {string}\n */\nconst decideAssetOrigin = (stage: string | undefined): string => {\n\tswitch (stage?.toUpperCase()) {\n\t\tcase 'PROD':\n\t\t\treturn 'https://assets.guim.co.uk/';\n\t\tcase 'CODE':\n\t\t\treturn 'https://assets-code.guim.co.uk/';\n\t\tdefault:\n\t\t\treturn '/';\n\t}\n};\nexport const ASSET_ORIGIN = decideAssetOrigin(process.env.GU_STAGE);\n\nexport const getScriptArrayFromFile = (\n\tfile: `${string}.js`,\n): { src: string; legacy?: boolean }[] => {\n\tif (!file.endsWith('.js'))\n\t\tthrow new Error('Invalid filename: extension must be .js');\n\n\tconst isDev = process.env.NODE_ENV === 'development';\n\n\tconst filename = isDev ? file : manifest[file];\n\tconst legacyFilename = isDev\n\t\t? file.replace('.js', '.legacy.js')\n\t\t: legacyManifest[file];\n\n\tconst scripts = [];\n\n\tif (filename) {\n\t\tscripts.push({\n\t\t\tsrc: `${ASSET_ORIGIN}assets/${filename}`,\n\t\t\tlegacy: false,\n\t\t});\n\t}\n\tif (legacyFilename) {\n\t\tscripts.push({\n\t\t\tsrc: `${ASSET_ORIGIN}assets/${legacyFilename}`,\n\t\t\tlegacy: true,\n\t\t});\n\t}\n\n\treturn scripts;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/byline.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/byline.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":24,"column":9,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":24,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const getContributorTags = (tags: TagType[]): TagType[] => {\n\treturn tags.filter((t) => t.type === 'Contributor');\n};\n\nexport const getContributorTagsForToken = (\n\ttags: TagType[],\n\ttoken: string,\n): TagType[] => {\n\treturn getContributorTags(tags).filter((t) => t.title === token);\n};\n\ntype BylineComponent = { token: string; tag: TagType } | string;\n\nexport const getBylineComponentsFromTokens = (\n\ttokens: string[],\n\ttags: TagType[],\n): BylineComponent[] => {\n\tconst [bylineComponents] = tokens.reduce<[BylineComponent[], TagType[]]>(\n\t\t([bylines, remainingTags], token) => {\n\t\t\tconst [firstContributorTag] = getContributorTagsForToken(\n\t\t\t\tremainingTags,\n\t\t\t\ttoken,\n\t\t\t);\n\t\t\tif (!firstContributorTag) {\n\t\t\t\treturn [bylines.concat(token), remainingTags];\n\t\t\t}\n\n\t\t\t// We've used this tag, so remove it from the list of possible tags.\n\t\t\t// This ensures we don't use the same contributor tag when two identical\n\t\t\t// names with different contributor tags are used.\n\t\t\tconst newRemainingTags = remainingTags.filter(\n\t\t\t\t(tag) => !(tag.id === firstContributorTag.id),\n\t\t\t);\n\n\t\t\treturn [\n\t\t\t\tbylines.concat({ tag: firstContributorTag, token }),\n\t\t\t\tnewRemainingTags,\n\t\t\t];\n\t\t},\n\t\t[[], tags],\n\t);\n\n\treturn bylineComponents;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/content.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/errors/not-renderable-in-dcr.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/escapeData.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/escapeData.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/fetchTickerData.ts","messages":[{"ruleId":"no-shadow","severity":1,"message":"'TickerCountType' is already declared in the upper scope on line 1 column 13.","line":1,"column":13,"nodeType":"Identifier","messageId":"noShadow","endLine":1,"endColumn":28},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"{ total: string; goal: string; }\" of template literal expression.","line":36,"column":62,"nodeType":"Identifier","messageId":"invalidType","endLine":36,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export enum TickerCountType {\n\tmoney = 'money',\n\tpeople = 'people',\n}\n\nexport interface TickerData {\n\ttotal: number;\n\tgoal: number;\n}\n\nconst tickerUrl = (countType: TickerCountType): string =>\n\tcountType === TickerCountType.people\n\t\t? 'https://support.theguardian.com/supporters-ticker.json'\n\t\t: 'https://support.theguardian.com/ticker.json';\n\nconst checkForErrors = (response: Response): Promise<Response> => {\n\tif (!response.ok) {\n\t\treturn Promise.reject(\n\t\t\tresponse.statusText ||\n\t\t\t\t`Ticker api call returned HTTP status ${response.status}`,\n\t\t);\n\t}\n\treturn Promise.resolve(response);\n};\n\nconst parse = (json: { total: string; goal: string }): Promise<TickerData> => {\n\tconst total = parseInt(json.total, 10);\n\tconst goal = parseInt(json.goal, 10);\n\n\tif (!Number.isNaN(total) && !Number.isNaN(goal)) {\n\t\treturn Promise.resolve({\n\t\t\ttotal,\n\t\t\tgoal,\n\t\t});\n\t}\n\treturn Promise.reject(Error(`Failed to parse ticker data: ${json}`));\n};\n\nexport const fetchTickerData = (\n\ttickerType: TickerCountType,\n): Promise<TickerData> =>\n\tfetch(tickerUrl(tickerType))\n\t\t.then((response) => checkForErrors(response))\n\t\t.then((response) => response.json())\n\t\t.then(parse);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/fonts-css.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":281,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":281,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":281,"column":34,"nodeType":"CallExpression","messageId":"unsafeReturn","endLine":281,"endColumn":67},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":281,"column":34,"nodeType":"Identifier","messageId":"unsafeCall","endLine":281,"endColumn":49}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import minifyCssString from 'minify-css-string';\n\ntype FontFamily =\n\t| 'GH Guardian Headline'\n\t| 'Guardian Egyptian Web' // Legacy of GH Guardian Headline\n\t| 'GuardianTextEgyptian'\n\t| 'Guardian Text Egyptian Web' // Legacy of GuardianTextEgyptian\n\t| 'GuardianTextSans'\n\t| 'Guardian Text Sans Web'; // Legacy of GuardianTextSans\n\ntype FontStyle = 'normal' | 'italic';\n\ninterface FontDisplay {\n\tfamily: FontFamily;\n\twoff2: string;\n\twoff: string;\n\tttf: string;\n\tweight: number;\n\tstyle: FontStyle;\n}\n\nconst fontList: FontDisplay[] = [\n\t// GH Guardian Headline, with legacy family name of Guardian Egyptian Web\n\t{\n\t\tfamily: 'GH Guardian Headline',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Light.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Light.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Light.ttf',\n\t\tweight: 300,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'Guardian Egyptian Web',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Light.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Light.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Light.ttf',\n\t\tweight: 300,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'GH Guardian Headline',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-LightItalic.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-LightItalic.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-LightItalic.ttf',\n\t\tweight: 300,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'Guardian Egyptian Web',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-LightItalic.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-LightItalic.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-LightItalic.ttf',\n\t\tweight: 300,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'GH Guardian Headline',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Medium.woff2',\n\t\twoff: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Medium.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Medium.ttf',\n\t\tweight: 500,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'Guardian Egyptian Web',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Medium.woff2',\n\t\twoff: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Medium.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Medium.ttf',\n\t\tweight: 500,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'GH Guardian Headline',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-MediumItalic.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-MediumItalic.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-MediumItalic.ttf',\n\t\tweight: 500,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'Guardian Egyptian Web',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-MediumItalic.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-MediumItalic.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-MediumItalic.ttf',\n\t\tweight: 500,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'GH Guardian Headline',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Bold.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Bold.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Bold.ttf',\n\t\tweight: 700,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'Guardian Egyptian Web',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Bold.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Bold.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-Bold.ttf',\n\t\tweight: 700,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'GH Guardian Headline',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-BoldItalic.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-BoldItalic.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-BoldItalic.ttf',\n\t\tweight: 700,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'Guardian Egyptian Web',\n\t\twoff2: 'fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-BoldItalic.woff2',\n\t\twoff: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-BoldItalic.woff',\n\t\tttf: 'fonts/guardian-headline/latin1-not-hinted/GHGuardianHeadline-BoldItalic.ttf',\n\t\tweight: 700,\n\t\tstyle: 'italic',\n\t},\n\t// GuardianTextEgyptian, with legacy family name of Guardian Text Egyptian Web\n\t{\n\t\tfamily: 'GuardianTextEgyptian',\n\t\twoff2: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Regular.woff2',\n\t\twoff: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Regular.woff',\n\t\tttf: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-Regular.ttf',\n\t\tweight: 400,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'Guardian Text Egyptian Web',\n\t\twoff2: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Regular.woff2',\n\t\twoff: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Regular.woff',\n\t\tttf: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-Regular.ttf',\n\t\tweight: 400,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'GuardianTextEgyptian',\n\t\twoff2: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-RegularItalic.woff2',\n\t\twoff: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-RegularItalic.woff',\n\t\tttf: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-RegularItalic.ttf',\n\t\tweight: 400,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'Guardian Text Egyptian Web',\n\t\twoff2: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-RegularItalic.woff2',\n\t\twoff: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-RegularItalic.woff',\n\t\tttf: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-RegularItalic.ttf',\n\t\tweight: 400,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'GuardianTextEgyptian',\n\t\twoff2: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Bold.woff2',\n\t\twoff: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-Bold.woff',\n\t\tttf: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-Bold.ttf',\n\t\tweight: 700,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'Guardian Text Egyptian Web',\n\t\twoff2: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Bold.woff2',\n\t\twoff: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-Bold.woff',\n\t\tttf: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-Bold.ttf',\n\t\tweight: 700,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'GuardianTextEgyptian',\n\t\twoff2: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-BoldItalic.woff2',\n\t\twoff: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-BoldItalic.woff',\n\t\tttf: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-BoldItalic.ttf',\n\t\tweight: 700,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'Guardian Text Egyptian Web',\n\t\twoff2: 'fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-BoldItalic.woff2',\n\t\twoff: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-BoldItalic.woff',\n\t\tttf: 'fonts/guardian-textegyptian/latin1-not-hinted/GuardianTextEgyptian-BoldItalic.ttf',\n\t\tweight: 700,\n\t\tstyle: 'italic',\n\t},\n\t// GuardianTextSans, with legacy family name of Guardian Text Sans Web\n\t{\n\t\tfamily: 'GuardianTextSans',\n\t\twoff2: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Regular.woff2',\n\t\twoff: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Regular.woff',\n\t\tttf: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-Regular.ttf',\n\t\tweight: 400,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'Guardian Text Sans Web',\n\t\twoff2: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Regular.woff2',\n\t\twoff: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Regular.woff',\n\t\tttf: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-Regular.ttf',\n\t\tweight: 400,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'GuardianTextSans',\n\t\twoff2: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-RegularItalic.woff2',\n\t\twoff: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-RegularItalic.woff',\n\t\tttf: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-RegularItalic.ttf',\n\t\tweight: 400,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'Guardian Text Sans Web',\n\t\twoff2: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-RegularItalic.woff2',\n\t\twoff: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-RegularItalic.woff',\n\t\tttf: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-RegularItalic.ttf',\n\t\tweight: 400,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'GuardianTextSans',\n\t\twoff2: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Bold.woff2',\n\t\twoff: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-Bold.woff',\n\t\tttf: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-Bold.ttf',\n\t\tweight: 700,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'Guardian Text Sans Web',\n\t\twoff2: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Bold.woff2',\n\t\twoff: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-Bold.woff',\n\t\tttf: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-Bold.ttf',\n\t\tweight: 700,\n\t\tstyle: 'normal',\n\t},\n\t{\n\t\tfamily: 'GuardianTextSans',\n\t\twoff2: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-BoldItalic.woff2',\n\t\twoff: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-BoldItalic.woff',\n\t\tttf: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-BoldItalic.ttf',\n\t\tweight: 700,\n\t\tstyle: 'italic',\n\t},\n\t{\n\t\tfamily: 'Guardian Text Sans Web',\n\t\twoff2: 'fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-BoldItalic.woff2',\n\t\twoff: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-BoldItalic.woff',\n\t\tttf: 'fonts/guardian-textsans/latin1-not-hinted/GuardianTextSans-BoldItalic.ttf',\n\t\tweight: 700,\n\t\tstyle: 'italic',\n\t},\n];\n\nconst assetsUrl = (path: string): string =>\n\t`https://assets.guim.co.uk/static/frontend/${path}`;\n\nconst template: (_: FontDisplay) => string = ({\n\tfamily,\n\twoff2,\n\twoff,\n\tttf,\n\tweight,\n\tstyle,\n}) => `\n    @font-face {\n        font-family: \"${family}\";\n        src: url(${assetsUrl(woff2)}) format(\"woff2\"),\n                url(${assetsUrl(woff)}) format(\"woff\"),\n                url(${assetsUrl(ttf)}) format(\"truetype\");\n        font-weight: ${weight};\n        font-style: ${style};\n        font-display: swap;\n    }\n`;\n\nconst getStyleString: () => string = () => {\n\treturn fontList.reduce(\n\t\t(styleString, font) => `${styleString}${template(font)}`,\n\t\t'',\n\t);\n};\n\nexport const getFontsCss = () => minifyCssString(getStyleString());\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/footer-links.ts","messages":[{"ruleId":"no-shadow","severity":1,"message":"'LinkPlatform' is already declared in the upper scope on line 1 column 13.","line":1,"column":13,"nodeType":"Identifier","messageId":"noShadow","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export enum LinkPlatform {\n\tWeb,\n\tAmp,\n}\n\nexport interface Link {\n\ttitle: string;\n\turl?: string;\n\ton?: string;\n\tonlyOnPlatform?: LinkPlatform;\n}\n\nexport const isOnPlatform = (l: Link, platform: LinkPlatform): boolean => {\n\treturn !l.onlyOnPlatform || l.onlyOnPlatform === platform;\n};\n\nexport const footerLinksNew: Link[][] = [\n\t[\n\t\t{\n\t\t\ttitle: 'About us',\n\t\t\turl: 'https://www.theguardian.com/about',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Contact us',\n\t\t\turl: 'https://www.theguardian.com/help/contact-us',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Complaints and corrections',\n\t\t\turl: 'https://www.theguardian.com/info/complaints-and-corrections',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Securedrop',\n\t\t\turl: 'https://securedrop.theguardian.com/',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Work for us',\n\t\t\turl: 'https://workforus.theguardian.com/locations/london',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Privacy settings',\n\t\t\ton: 'tap:consent.prompt(consent=SourcePoint)',\n\t\t\tonlyOnPlatform: LinkPlatform.Amp,\n\t\t},\n\t\t{\n\t\t\ttitle: 'Privacy policy',\n\t\t\turl: 'https://www.theguardian.com/info/privacy',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Cookie policy',\n\t\t\turl: 'https://www.theguardian.com/info/cookies',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Terms & conditions',\n\t\t\turl: 'https://www.theguardian.com/help/terms-of-service',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Help',\n\t\t\turl: 'https://www.theguardian.com/help',\n\t\t},\n\t],\n\t[\n\t\t{\n\t\t\ttitle: 'All topics',\n\t\t\turl: 'https://www.theguardian.com/index/subjects/a',\n\t\t},\n\t\t{\n\t\t\ttitle: 'All writers',\n\t\t\turl: 'https://www.theguardian.com/index/contributors',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Modern Slavery Act',\n\t\t\turl: 'https://www.theguardian.com/info/2016/jul/27/modern-slavery-and-our-supply-chains?INTCMP=NGW_FOOTER_UK_GU_MODERN_SLAVERY_ACT',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Digital newspaper archive',\n\t\t\turl: 'https://theguardian.newspapers.com/',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Facebook',\n\t\t\turl: 'https://www.facebook.com/theguardian',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Twitter',\n\t\t\turl: 'https://twitter.com/guardian',\n\t\t},\n\t],\n\t[\n\t\t{\n\t\t\ttitle: 'Advertise with us',\n\t\t\turl: 'https://advertising.theguardian.com/',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Search jobs',\n\t\t\turl: 'https://jobs.theguardian.com/?INTCMP=NGW_FOOTER_UK_GU_JOBS',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Patrons',\n\t\t\turl: 'https://patrons.theguardian.com/?INTCMP=footer_patrons',\n\t\t},\n\t\t{\n\t\t\ttitle: 'Discount Codes',\n\t\t\turl: 'https://discountcode.theguardian.com/uk?INTCMP=guardian_footer',\n\t\t},\n\t],\n];\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/formatters.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/identity-component-event.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/identity-component-event.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { constructQuery } from './querystring';\n\nexport type AuthenticationComponentId =\n\t| 'amp_sidebar_signin'\n\t| 'guardian_signin_header'\n\t| 'signin_to_comment'\n\t| 'register_to_comment';\n\ntype AuthenticationEventParams = {\n\tcomponentType: string;\n\tcomponentId: AuthenticationComponentId;\n\tviewId?: string;\n};\n\nexport const createAuthenticationEventParams = (\n\tcomponentId: AuthenticationComponentId,\n\tpageViewId?: string,\n) => {\n\tconst params: AuthenticationEventParams = {\n\t\tcomponentType: 'identityauthentication',\n\t\tcomponentId,\n\t};\n\n\tif (pageViewId) {\n\t\tparams.viewId = pageViewId;\n\t}\n\n\treturn `componentEventParams=${encodeURIComponent(constructQuery(params))}`;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/joinUrl.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/joinUrl.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const joinUrl = (parts: string[]) => {\n\t// Remove any leading or trailing slashes from all parts and then join cleanly on\n\t// a single slash - prevents malformed urls\n\tconst trimmed = parts\n\t\t.map((part) => {\n\t\t\t// Trim left\n\t\t\tif (part.substr(0, 1) === '/') return part.slice(1);\n\t\t\treturn part;\n\t\t})\n\t\t.map((part) => {\n\t\t\t// Trim right\n\t\t\tif (part.substr(part.length - 1, 1) === '/')\n\t\t\t\treturn part.slice(0, -1);\n\t\t\treturn part;\n\t\t});\n\n\treturn trimmed.join('/');\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/mixins.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/pillars.ts","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":61,"column":0,"nodeType":null,"endLine":61,"endColumn":65}],"suppressedMessages":[{"ruleId":"@typescript-eslint/naming-convention","severity":1,"message":"Variable name `pillarPalette_DO_NOT_USE` must match one of the following formats: camelCase, PascalCase, UPPER_CASE","line":62,"column":14,"nodeType":"Identifier","messageId":"doesNotMatchFormat","endLine":65,"endColumn":2,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticlePillar, ArticleSpecial } from '@guardian/libs';\nimport type { ArticleTheme } from '@guardian/libs';\nimport {\n\tborder,\n\tculture,\n\tlabs,\n\tlifestyle,\n\tnews,\n\topinion,\n\tspecialReport,\n\tsport,\n} from '@guardian/source-foundations';\n\ntype ColourType = string;\n\nexport const pillarNames: ArticleTheme[] = [\n\tArticlePillar.News,\n\tArticlePillar.Opinion,\n\tArticlePillar.Sport,\n\tArticlePillar.Culture,\n\tArticlePillar.Lifestyle,\n\tArticleSpecial.Labs,\n];\n\ntype PillarPalette = {\n\tdark: ColourType;\n\tmain: ColourType;\n\tbright: ColourType;\n\tpastel: ColourType;\n\tfaded: ColourType;\n\t300: ColourType;\n\t400: ColourType;\n\t500: ColourType;\n\t600: ColourType;\n\t800: ColourType;\n};\n\ntype SpecialPalette = {\n\tdark: ColourType;\n\tmain: ColourType;\n\tbright: ColourType;\n\tfaded: ColourType;\n\t300: ColourType;\n\t400: ColourType;\n\t500: ColourType;\n\t800: ColourType;\n};\n\ntype LabsPalette = {\n\tdark: ColourType;\n\tmain: ColourType;\n\tbright: ColourType;\n\tfaded: ColourType;\n\t300: ColourType;\n\t400: ColourType;\n\t500: ColourType;\n\t800: ColourType;\n};\n\n// pillarPalette_DO_NOT_USE should no longer be used. Use palette from  decidePalette instead\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const pillarPalette_DO_NOT_USE: Record<\n\tArticleTheme,\n\tPillarPalette | SpecialPalette | LabsPalette\n> = {\n\t[ArticlePillar.News]: {\n\t\tdark: news[300],\n\t\tmain: news[400],\n\t\tbright: news[500],\n\t\tpastel: news[600],\n\t\tfaded: news[800],\n\t\t300: news[300],\n\t\t400: news[400],\n\t\t500: news[500],\n\t\t600: news[600],\n\t\t800: news[800],\n\t},\n\t[ArticlePillar.Opinion]: {\n\t\tdark: opinion[300],\n\t\tmain: opinion[300],\n\t\tbright: opinion[500],\n\t\tpastel: opinion[600],\n\t\tfaded: opinion[800],\n\t\t300: opinion[300],\n\t\t400: opinion[400],\n\t\t500: opinion[500],\n\t\t600: opinion[600],\n\t\t800: opinion[800],\n\t},\n\t[ArticlePillar.Sport]: {\n\t\tdark: sport[300],\n\t\tmain: sport[400],\n\t\tbright: sport[500],\n\t\tpastel: sport[600],\n\t\tfaded: sport[800],\n\t\t300: sport[300],\n\t\t400: sport[400],\n\t\t500: sport[500],\n\t\t600: sport[600],\n\t\t800: sport[800],\n\t},\n\t[ArticlePillar.Culture]: {\n\t\tdark: culture[300],\n\t\tmain: culture[400],\n\t\tbright: culture[500],\n\t\tpastel: culture[600],\n\t\tfaded: culture[800],\n\t\t300: culture[300],\n\t\t400: culture[400],\n\t\t500: culture[500],\n\t\t600: culture[600],\n\t\t800: culture[800],\n\t},\n\t[ArticlePillar.Lifestyle]: {\n\t\tdark: lifestyle[300],\n\t\tmain: lifestyle[400],\n\t\tbright: lifestyle[500],\n\t\tpastel: lifestyle[600],\n\t\tfaded: lifestyle[800],\n\t\t300: lifestyle[300],\n\t\t400: lifestyle[400],\n\t\t500: lifestyle[500],\n\t\t600: lifestyle[600],\n\t\t800: lifestyle[800],\n\t},\n\t[ArticleSpecial.Labs]: {\n\t\tdark: labs[300],\n\t\tmain: labs[400],\n\t\tbright: '#69d1ca', // bright teal\n\t\tfaded: '#65a897', // dark teal\n\t\t300: labs[300],\n\t\t400: labs[400],\n\t\t500: '#69d1ca', // bright teal\n\t\t800: '#65a897', // dark teal\n\t},\n\t[ArticleSpecial.SpecialReport]: {\n\t\tdark: specialReport[300],\n\t\tmain: specialReport[400],\n\t\tbright: specialReport[500],\n\t\tfaded: specialReport[800],\n\t\t300: specialReport[300],\n\t\t400: specialReport[400],\n\t\t500: specialReport[500],\n\t\t800: specialReport[800],\n\t},\n};\n\n/*\nThis takes a function, f, and applies it to all pillars.\nIt returns an object with each pillar as the keys and f('pillar') as the value\n*/\nexport const pillarMap: <T>(f: (name: ArticleTheme) => T) => {\n\t[K in ArticleTheme]: T;\n} = (f) => ({\n\t[ArticlePillar.News]: f(ArticlePillar.News),\n\t[ArticlePillar.Opinion]: f(ArticlePillar.Opinion),\n\t[ArticlePillar.Sport]: f(ArticlePillar.Sport),\n\t[ArticlePillar.Culture]: f(ArticlePillar.Culture),\n\t[ArticlePillar.Lifestyle]: f(ArticlePillar.Lifestyle),\n\t[ArticleSpecial.Labs]: f(ArticleSpecial.Labs),\n\t[ArticleSpecial.SpecialReport]: f(ArticleSpecial.SpecialReport),\n});\n/*\nFurther notes on this function:\n\t- It maps by hand because it's easy to lose track of types when you use Object.assign()\n\t- Where the function parameter f returns type T, pillarMap will return an object with\n\t  a key for each pillar and values of type T.\n */\n\nexport const neutralBorder = (pillar: ArticleTheme): ColourType => {\n\tswitch (pillar) {\n\t\tcase ArticleSpecial.Labs:\n\t\t\treturn border.primary; // 'dark' theme\n\t\tdefault:\n\t\t\treturn border.secondary;\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/querystring.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/querystring.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[48,51],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[48,51],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":4,"column":10,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":4,"endColumn":30},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string | number | boolean`.","line":6,"column":43,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":6,"endColumn":44},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string | number | boolean`.","line":7,"column":26,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":7,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const constructQuery = (query: { [key: string]: any }): string =>\n\tObject.keys(query)\n\t\t.map((param: string) => {\n\t\t\tconst value = query[param];\n\t\t\tconst queryValue = Array.isArray(value)\n\t\t\t\t? value.map((v) => encodeURIComponent(v)).join(',')\n\t\t\t\t: encodeURIComponent(value);\n\t\t\treturn `${param}=${queryValue}`;\n\t\t})\n\t\t.join('&');\n\nexport { constructQuery };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/sharing-urls.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/lib/slot-machine-flags.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/article-sections.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/article-sections.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":92,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1752,1755],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1752,1755],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":157,"column":8,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":157,"endColumn":41},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":159,"column":3,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":159,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const sections: SectionNielsenAPI[] = [\n\t{\n\t\tname: 'Guardian',\n\t\tapiID: '2879C1E1-7EF9-459B-9C5C-6F4D2BC9DD53',\n\t},\n\t{\n\t\tname: 'Books',\n\t\tapiID: '4994D04B-4279-4184-A2C5-E8BB1DD50AB9',\n\t},\n\t{\n\t\tname: 'Business',\n\t\tapiID: '163BF72C-72D0-4702-82A9-17A548A39D79',\n\t},\n\t{\n\t\tname: 'CommentIsFree',\n\t\tapiID: 'C962A2C3-C9E1-40DD-9B58-7B1095EDB16E',\n\t},\n\t{\n\t\tname: 'Culture',\n\t\tapiID: '87C0725C-D478-4567-967B-E3519ECD12E8',\n\t},\n\t{\n\t\tname: 'Education',\n\t\tapiID: 'DD50B111-D493-4D25-8980-2B0752E16ED1',\n\t},\n\t{\n\t\tname: 'Environment',\n\t\tapiID: 'FEC0766C-C766-4A77-91B3-74C5525E680F',\n\t},\n\t{\n\t\tname: 'Fashion',\n\t\tapiID: '1639B19E-B581-491E-94B7-FBACB6823C43',\n\t},\n\t{\n\t\tname: 'Film',\n\t\tapiID: 'D5BB97FE-637C-4E9E-B972-C8EA88101CB7',\n\t},\n\t{\n\t\tname: 'LifeStyle',\n\t\tapiID: 'B32533F9-65CF-4261-8BB9-2A707F59712A',\n\t},\n\t{\n\t\tname: 'Media',\n\t\tapiID: '385AA13F-9B64-4927-9536-BE70F9AD54BD',\n\t},\n\t{\n\t\tname: 'Money',\n\t\tapiID: '10BE8096-BF69-4252-AC27-C4127D8631F6',\n\t},\n\t{\n\t\tname: 'Music',\n\t\tapiID: '9D928193-7B5C-45A9-89E4-C47F42B8FB73',\n\t},\n\t{\n\t\tname: 'News',\n\t\tapiID: '66BEC53C-9890-477C-B639-60879EC4F762',\n\t},\n\t{\n\t\tname: 'Politics',\n\t\tapiID: 'C5C73A36-9E39-4D42-9049-2528DB5E998D',\n\t},\n\t{\n\t\tname: 'ProfessionalNetwork',\n\t\tapiID: '9DFEFF7E-9D45-4676-82B3-F29A6BF05BE1',\n\t},\n\t{\n\t\tname: 'Science',\n\t\tapiID: 'F4867E05-4149-49F0-A9DE-9F3496930B8C',\n\t},\n\t{\n\t\tname: 'Society',\n\t\tapiID: '617F9FB9-2D34-4C3A-A2E7-383AE877A35D',\n\t},\n\t{\n\t\tname: 'Sport',\n\t\tapiID: '52A6516F-E323-449F-AA57-6A1B2386F8F6',\n\t},\n\t{\n\t\tname: 'Technology',\n\t\tapiID: '4F448B55-305F-4203-B192-8534CB606C12',\n\t},\n\t{\n\t\tname: 'Travel',\n\t\tapiID: '05A03097-D4CA-46BF-96AD-935252967239',\n\t},\n\t{\n\t\tname: 'TvRadio',\n\t\tapiID: '3277F0D0-9389-4A32-A4D6-516B49D87E45',\n\t},\n];\n\nconst subsections: { [key: string]: any } = {\n\tbooks: sections[1],\n\t'childrens-books-site': sections[1],\n\tbusiness: sections[2],\n\t'better-business': sections[2],\n\t'business-to-business': sections[2],\n\t'working-in-development': sections[2],\n\tcommentisfree: sections[3],\n\tculture: sections[4],\n\tartanddesign: sections[4],\n\t'culture-network': sections[4],\n\t'culture-professionals-network': sections[4],\n\tgames: sections[4],\n\tstage: sections[4],\n\teducation: sections[5],\n\t'higher-education-network': sections[5],\n\t'teacher-network': sections[5],\n\tenvironment: sections[6],\n\t'animals-farmed': sections[6],\n\tfashion: sections[7],\n\tfilm: sections[8],\n\tlifeandstyle: sections[9],\n\tmedia: sections[10],\n\tmoney: sections[11],\n\tmusic: sections[12],\n\tnews: sections[13],\n\t'australia-news': sections[13],\n\tcardiff: sections[13],\n\tcities: sections[13],\n\tcommunity: sections[13],\n\tedinburgh: sections[13],\n\t'global-development': sections[13],\n\t'government-computing-network': sections[13],\n\tlaw: sections[13],\n\tleeds: sections[13],\n\tlocal: sections[13],\n\t'local-government-network': sections[13],\n\t'media-network': sections[13],\n\t'uk-news': sections[13],\n\t'us-news': sections[13],\n\tweather: sections[13],\n\tworld: sections[13],\n\tpolitics: sections[14],\n\t'guardian-professional': sections[15],\n\t'global-development-professionals-network': sections[15],\n\t'small-business-network': sections[15],\n\tscience: sections[16],\n\tsociety: sections[17],\n\t'healthcare-network': sections[17],\n\t'housing-network': sections[17],\n\tinequality: sections[17],\n\t'public-leaders-network': sections[17],\n\t'social-care-network': sections[17],\n\t'social-enterprise-network': sections[17],\n\t'society-professionals': sections[17],\n\t'women-in-leadership': sections[17],\n\tsport: sections[18],\n\tfootball: sections[18],\n\ttechnology: sections[19],\n\ttravel: sections[20],\n\t'travel/offers': sections[20],\n\t'tv-and-radio': sections[21],\n};\n\nexport const findBySubsection = (subsection: string): SectionNielsenAPI => {\n\tconst section = subsections[subsection];\n\tif (section) {\n\t\treturn section;\n\t}\n\n\treturn sections[0];\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-blockquotes.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-blockquotes.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-dividers.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-dividers.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":13,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":13,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { JSDOM } from 'jsdom';\n\nconst isDinkus = (element: CAPIElement): boolean => {\n\t// Classic dinkus do not trigger dropcaps\n\tif (\n\t\telement._type !==\n\t\t\t'model.dotcomrendering.pageElements.SubheadingBlockElement' &&\n\t\telement._type !== 'model.dotcomrendering.pageElements.TextBlockElement'\n\t)\n\t\treturn false;\n\n\tconst frag = JSDOM.fragment(element.html);\n\tif (!frag || !frag.firstChild) return false;\n\t// A dinkus is can be spaced or unspaced\n\treturn (\n\t\tfrag.textContent === '***' ||\n\t\tfrag.textContent === '* * *' ||\n\t\tfrag.textContent === '•••' ||\n\t\tfrag.textContent === '• • •'\n\t);\n};\n\nconst checkForDividers = (elements: CAPIElement[]): CAPIElement[] => {\n\t// checkForDividers loops the array of article elements looking for star flags and\n\t// enhancing the data accordingly. In short, if a h2 tag is equal to * * * then we\n\t// insert a divider and any the text element immediately afterwards should have dropCap\n\t// set to true\n\tconst enhanced: CAPIElement[] = [];\n\telements.forEach((element, i) => {\n\t\tif (i === 0) {\n\t\t\t// Always pass first element through\n\t\t\tenhanced.push(element);\n\t\t} else if (isDinkus(element)) {\n\t\t\t// If this element is a dinkus, replace it with a divider\n\t\t\tenhanced.push({\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.DividerBlockElement',\n\t\t\t});\n\t\t} else if (\n\t\t\t// If the previous element was a dinkus and this one is a text block, set it's dropCap flag\n\t\t\tisDinkus(elements[i - 1]) &&\n\t\t\telement._type ===\n\t\t\t\t'model.dotcomrendering.pageElements.TextBlockElement'\n\t\t) {\n\t\t\tenhanced.push({\n\t\t\t\t...element,\n\t\t\t\tdropCap: true,\n\t\t\t});\n\t\t} else {\n\t\t\t// Otherwise, do nothing\n\t\t\tenhanced.push(element);\n\t\t}\n\t});\n\treturn enhanced;\n};\n\nexport const enhanceDividers = (blocks: Block[]): Block[] =>\n\tblocks.map((block: Block) => {\n\t\treturn {\n\t\t\t...block,\n\t\t\telements: checkForDividers(block.elements),\n\t\t};\n\t});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-dots.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-dots.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-embeds.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-embeds.ts","messages":[{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":11,"column":5,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":11,"endColumn":46},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":12,"column":5,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":12,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { JSDOM } from 'jsdom';\n\nconst addTitleToIframe = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst enhanced: CAPIElement[] = [];\n\telements.forEach((element) => {\n\t\tswitch (element._type) {\n\t\t\tcase 'model.dotcomrendering.pageElements.EmbedBlockElement':\n\t\t\t\t// Parse the embed block element, find the iframe and add\n\t\t\t\t// the alt text as a title attribute if it exists\n\t\t\t\t// https://dequeuniversity.com/tips/provide-iframe-titles\n\t\t\t\tconst dom = JSDOM.fragment(element.html);\n\t\t\t\tconst iframe = dom.querySelector('iframe');\n\t\t\t\tif (iframe && element.alt) {\n\t\t\t\t\tiframe.setAttribute('title', element.alt);\n\t\t\t\t\tenhanced.push({\n\t\t\t\t\t\t...element,\n\t\t\t\t\t\t...{\n\t\t\t\t\t\t\thtml: iframe.outerHTML,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tenhanced.push(element);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tenhanced.push(element);\n\t\t}\n\t});\n\treturn enhanced;\n};\n\nexport const enhanceEmbeds = (blocks: Block[]): Block[] =>\n\tblocks.map((block: Block) => {\n\t\treturn {\n\t\t\t...block,\n\t\t\telements: addTitleToIframe(block.elements),\n\t\t};\n\t});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-images.test.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":533,"column":8,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":533,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticlePillar } from '@guardian/libs';\nimport { Article } from '../../fixtures/generated/articles/Article';\nimport { PhotoEssay } from '../../fixtures/generated/articles/PhotoEssay';\nimport { images } from '../../fixtures/generated/images';\nimport { enhanceImages } from './enhance-images';\n\nconst image = {\n\t...images[0],\n\tdata: {\n\t\t...images[0].data,\n\t\tcaption: 'The original caption',\n\t},\n};\n\nconst metaData = {\n\tid: '123',\n\tprimaryDateLine: 'Wed 9 Dec 2020 06.30 GMT',\n\tsecondaryDateLine: 'Last modified on Wed 9 Dec 2020 13.40 GMT',\n};\n\ndescribe('Enhance Images', () => {\n\tdescribe('for photo essays', () => {\n\t\tit('sets the caption for an image if the following element is a text element with ul and li tags', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\timage,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li>This new caption replaces the one on the image object.</li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'showcase',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t\t'<ul><li>This new caption replaces the one on the image object.</li></ul>',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('creates a multi image element if 2 images in a row are halfWidth', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>Judy, just sitting in the square on her own in Walworth.</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.MultiImageBlockElement',\n\t\t\t\t\t\t\telementId: images[0].elementId,\n\t\t\t\t\t\t\timages: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t'<ul><li><p>Judy, just sitting in the square on her own in Walworth.</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('does not create a multi image element if roles are not halfWidth', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'showcase' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>Judy, just sitting in the square on her own in Walworth.</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'inline',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'showcase',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t\t'<ul><li><p>Judy, just sitting in the square on her own in Walworth.</p></li></ul>',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('does not use a multi block element for a single image, even when halfWidth', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>Judy, just sitting in the square on her own in Walworth.</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t\t'<ul><li><p>Judy, just sitting in the square on her own in Walworth.</p></li></ul>',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('sets the title prop for the previous image element when a h2 caption is found', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\timage,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.SubheadingBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<h2>Example title text</h2>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttitle: 'Example title text',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('handles when a caption, then a title follow an image, both are used', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\timage,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.SubheadingBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<h2>The title</h2>',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<p>Just some normal text</p>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t\t'<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttitle: 'The title',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<p>Just some normal text</p>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('halfWidth images without an image to be paired with are placed as single images by themselves', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.MultiImageBlockElement',\n\t\t\t\t\t\t\telementId: images[0].elementId,\n\t\t\t\t\t\t\timages: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t\t'<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('handles when a title, then a caption follow an image, both are used', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\timage,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.SubheadingBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<h2>The title</h2>',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<p>Just some normal text</p>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t\t'<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttitle: 'The title',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<p>Just some normal text</p>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('removes default captions for photo essays and sets none at all if no ul element is found', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [image],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\t\tit('handles if the last few images are not followed by any caption or title', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\timage,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.SubheadingBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<h2>The title</h2>',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<p>Just some normal text</p>',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'immersive' },\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t\t'<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttitle: 'The title',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<p>Just some normal text</p>',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'inline',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'immersive',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\t// Need to ignore TS to check test works for other element types\n\t\tit('will pass through other element types', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.model.dotcomrendering.pageElements.PullquoteBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<p>A Pullquote</p>',\n\t\t\t\t\t\t\tpillar: ArticlePillar.News,\n\t\t\t\t\t\t\trole: 'inline',\n\t\t\t\t\t\t},\n\t\t\t\t\t\timage,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.SubheadingBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<h2>The title</h2>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.model.dotcomrendering.pageElements.PullquoteBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<p>A Pullquote</p>',\n\t\t\t\t\t\t\tpillar: ArticlePillar.News,\n\t\t\t\t\t\t\trole: 'inline',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t\tcaption: '',\n\t\t\t\t\t\t\t\tcredit: '',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttitle: 'The title',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, PhotoEssay.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\t});\n\n\tdescribe('for normal articles', () => {\n\t\tit('keeps default captions for articles other than photo essays', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [image],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\t\tit('creates two sets of multi image elements when there are 4 halfWidths images in a row', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.MultiImageBlockElement',\n\t\t\t\t\t\t\telementId: images[0].elementId,\n\t\t\t\t\t\t\timages: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.MultiImageBlockElement',\n\t\t\t\t\t\t\telementId: images[0].elementId,\n\t\t\t\t\t\t\timages: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t'<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\t\tit('does nothing with normal articles', () => {\n\t\t\tconst someText: TextBlockElement = {\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\telementId: 'mockId',\n\t\t\t\thtml: '<p>Just some normal text</p>',\n\t\t\t};\n\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...images[0], role: 'inline' },\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\t{ ...images[1], role: 'showcase' },\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\t{ ...images[2], role: 'inline' },\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\t{ ...images[3], role: 'immersive' },\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t\tsomeText,\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = input;\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('does not strip the captions from any preceding halfwidth images if the special caption is not placed immediately after them', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.MultiImageBlockElement',\n\t\t\t\t\t\t\telementId: images[0].elementId,\n\t\t\t\t\t\t\timages: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\t\tit('keeps the original captions and positions if there are 3 inline images in a row', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'inline',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'inline',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'inline',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\t\tit('does not strip captions if not a photo essay and there are no halfWidth images in the buffer', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = input;\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('does not strip captions if not a photo essay and there is only one halfWidth image in the buffer', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = input;\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('should only treat h2 text following an image as the image title on photo essays', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\timage,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.SubheadingBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<h2>Example title text</h2>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = input;\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('does not use the special caption outside photo essays if it does not immediately follow the halfWidth images', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\t\t\tconst expectedOutput = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.MultiImageBlockElement',\n\t\t\t\t\t\t\telementId: images[0].elementId,\n\t\t\t\t\t\t\timages: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\n\t\tit('replaces the caption outside photo essays if there are two or more halfWidth images at the end of the buffer', () => {\n\t\t\tconst input: Block[] = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{ ...image, role: 'inline' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{ ...image, role: 'halfWidth' },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\t\t\t\telementId: 'mockId',\n\t\t\t\t\t\t\thtml: '<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst expectedOutput = [\n\t\t\t\t{\n\t\t\t\t\t...metaData,\n\t\t\t\t\telements: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\trole: 'inline',\n\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t...image.data,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.MultiImageBlockElement',\n\t\t\t\t\t\t\telementId: images[0].elementId,\n\t\t\t\t\t\t\timages: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...image,\n\t\t\t\t\t\t\t\t\trole: 'halfWidth',\n\t\t\t\t\t\t\t\t\tdisplayCredit: false,\n\t\t\t\t\t\t\t\t\tdata: { ...image.data, caption: '' },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\tcaption:\n\t\t\t\t\t\t\t\t'<ul><li><p>This is the caption</p></li></ul>',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t];\n\n\t\t\texpect(enhanceImages(input, Article.format)).toEqual(\n\t\t\t\texpectedOutput,\n\t\t\t);\n\t\t});\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-images.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":4,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":4,"endColumn":14},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":13,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":13,"endColumn":14},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":21,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":21,"endColumn":14},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":28,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":28,"endColumn":14},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":44,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":44,"endColumn":11},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":48,"column":11,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":48,"endColumn":54,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1461,1504],"text":"frag.textContent?.trim()"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":54,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":54,"endColumn":14},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":62,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":62,"endColumn":11},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":73,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":73,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { JSDOM } from 'jsdom';\n\nconst ishalfWidthImage = (element: CAPIElement): boolean => {\n\tif (!element) return false;\n\treturn (\n\t\telement._type ===\n\t\t\t'model.dotcomrendering.pageElements.ImageBlockElement' &&\n\t\telement.role === 'halfWidth'\n\t);\n};\n\nconst isMultiImage = (element: CAPIElement): boolean => {\n\tif (!element) return false;\n\treturn (\n\t\telement._type ===\n\t\t'model.dotcomrendering.pageElements.MultiImageBlockElement'\n\t);\n};\n\nconst isImage = (element: CAPIElement): boolean => {\n\tif (!element) return false;\n\treturn (\n\t\telement._type === 'model.dotcomrendering.pageElements.ImageBlockElement'\n\t);\n};\n\nconst isTitle = (element: CAPIElement): boolean => {\n\tif (!element) return false;\n\t// Checks if this element is a 'title' based on the convention: <h2>Title text</h2>\n\tif (\n\t\telement._type !==\n\t\t'model.dotcomrendering.pageElements.SubheadingBlockElement'\n\t)\n\t\treturn false;\n\tconst frag = JSDOM.fragment(element.html);\n\treturn frag.firstElementChild?.nodeName === 'H2';\n};\n\nconst extractTitle = (element: CAPIElement): string => {\n\t// We cast here because we're know this element is a subheading but TS isn't sure\n\tconst subHeading = element as SubheadingBlockElement;\n\t// Extract 'title' based on the convention: <h2>Title text</h2>\n\tconst frag = JSDOM.fragment(subHeading.html);\n\tif (!frag || !frag.firstElementChild) return '';\n\tconst isH2tag = frag.firstElementChild.nodeName === 'H2';\n\tif (isH2tag) {\n\t\t// element is an essay title\n\t\treturn (frag.textContent && frag.textContent.trim()) || '';\n\t}\n\treturn '';\n};\n\nconst isCaption = (element: CAPIElement): boolean => {\n\tif (!element) return false;\n\t// Checks if this element is a 'caption' based on the convention: <ul><li><Caption text</li></ul>\n\tif (\n\t\telement._type !== 'model.dotcomrendering.pageElements.TextBlockElement'\n\t) {\n\t\treturn false;\n\t}\n\tconst frag = JSDOM.fragment(element.html);\n\tif (!frag || !frag.firstElementChild) return false;\n\tconst hasULwrapper = frag.firstElementChild.nodeName === 'UL';\n\tconst containsLItags = frag.firstElementChild.outerHTML.includes('<li>');\n\treturn hasULwrapper && containsLItags;\n};\n\nconst extractCaption = (element: CAPIElement): string => {\n\t// Extract 'caption' based on the convention: <ul><li><Caption text</li></ul>\n\t// We cast here because we're know this element is a text element but TS isn't sure\n\tconst textElement = element as TextBlockElement;\n\tconst frag = JSDOM.fragment(textElement.html);\n\tif (!frag || !frag.firstElementChild) return '';\n\tconst hasULwrapper = frag.firstElementChild.nodeName === 'UL';\n\tconst containsLItags = frag.firstElementChild.outerHTML.includes('<li>');\n\tif (hasULwrapper && containsLItags) {\n\t\treturn textElement.html;\n\t}\n\treturn '';\n};\n\nconst constructMultiImageElement = (\n\tthisElement: CAPIElement,\n\tnextElement: CAPIElement,\n): MultiImageBlockElement => {\n\t// We cast here because we're certain each element is an image (because of the guards we set earlier) but\n\t// TS isn't inferring that and needs a little help\n\tconst first = thisElement as ImageBlockElement;\n\tconst second = nextElement as ImageBlockElement;\n\treturn {\n\t\t_type: 'model.dotcomrendering.pageElements.MultiImageBlockElement',\n\t\telementId: first.elementId,\n\t\timages: [\n\t\t\t{\n\t\t\t\t...first,\n\t\t\t\tdata: {\n\t\t\t\t\t...first.data,\n\t\t\t\t\tcaption: '', // Delete any existing caption (special captions might be added later)\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t...second,\n\t\t\t\tdata: {\n\t\t\t\t\t...second.data,\n\t\t\t\t\tcaption: '', // ibid\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t};\n};\n\nconst addMultiImageElements = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst withMultiImageElements: CAPIElement[] = [];\n\telements.forEach((thisElement, i) => {\n\t\tconst nextElement = elements[i + 1];\n\t\tif (ishalfWidthImage(thisElement) && ishalfWidthImage(nextElement)) {\n\t\t\t// Pair found. Add a multi element and remove the next entry\n\t\t\twithMultiImageElements.push(\n\t\t\t\tconstructMultiImageElement(thisElement, nextElement),\n\t\t\t);\n\t\t\t// Remove the next element\n\t\t\telements.splice(i + 1, 1);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithMultiImageElements.push(thisElement);\n\t\t}\n\t});\n\treturn withMultiImageElements;\n};\n\nconst addTitles = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst withTitles: CAPIElement[] = [];\n\telements.forEach((thisElement, i) => {\n\t\tconst nextElement = elements[i + 1];\n\t\tconst subsequentElement = elements[i + 2];\n\t\tif (isImage(thisElement) && isTitle(nextElement)) {\n\t\t\t// This element is an image and is immediately followed by a title\n\t\t\twithTitles.push({\n\t\t\t\t...thisElement,\n\t\t\t\ttitle: extractTitle(nextElement),\n\t\t\t} as ImageBlockElement);\n\t\t\t// Remove the element\n\t\t\telements.splice(i + 1, 1);\n\t\t} else if (\n\t\t\tisImage(thisElement) &&\n\t\t\tisCaption(nextElement) &&\n\t\t\tisTitle(subsequentElement)\n\t\t) {\n\t\t\t// This element is an image, was followed by a caption, and then had a title after it\n\t\t\twithTitles.push({\n\t\t\t\t...thisElement,\n\t\t\t\ttitle: extractTitle(subsequentElement),\n\t\t\t} as ImageBlockElement);\n\t\t\t// Remove the element\n\t\t\telements.splice(i + 2, 1);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithTitles.push(thisElement);\n\t\t}\n\t});\n\treturn withTitles;\n};\n\nconst addCaptionsToImages = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst withSpecialCaptions: CAPIElement[] = [];\n\telements.forEach((thisElement, i) => {\n\t\tconst nextElement = elements[i + 1];\n\t\tconst subsequentElement = elements[i + 2];\n\t\tif (isImage(thisElement) && isCaption(nextElement)) {\n\t\t\tconst thisImage = thisElement as ImageBlockElement;\n\t\t\twithSpecialCaptions.push({\n\t\t\t\t...thisImage,\n\t\t\t\tdata: {\n\t\t\t\t\t...thisImage.data,\n\t\t\t\t\tcaption: extractCaption(nextElement),\n\t\t\t\t},\n\t\t\t} as ImageBlockElement);\n\t\t\t// Remove the next element\n\t\t\telements.splice(i + 1, 1);\n\t\t} else if (\n\t\t\tisImage(thisElement) &&\n\t\t\tisTitle(nextElement) &&\n\t\t\tisCaption(subsequentElement)\n\t\t) {\n\t\t\tconst thisImage = thisElement as ImageBlockElement;\n\t\t\twithSpecialCaptions.push({\n\t\t\t\t...thisImage,\n\t\t\t\tdata: {\n\t\t\t\t\t...thisImage.data,\n\t\t\t\t\tcaption: extractCaption(subsequentElement),\n\t\t\t\t},\n\t\t\t} as ImageBlockElement);\n\t\t\t// Remove the subsequent element\n\t\t\telements.splice(i + 2, 1);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithSpecialCaptions.push(thisElement);\n\t\t}\n\t});\n\treturn withSpecialCaptions;\n};\n\nconst addCaptionsToMultis = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst withSpecialCaptions: CAPIElement[] = [];\n\telements.forEach((thisElement, i) => {\n\t\tconst nextElement = elements[i + 1];\n\t\tconst subsequentElement = elements[i + 2];\n\t\tif (isMultiImage(thisElement) && isCaption(nextElement)) {\n\t\t\twithSpecialCaptions.push({\n\t\t\t\t...thisElement,\n\t\t\t\tcaption: extractCaption(nextElement),\n\t\t\t} as MultiImageBlockElement);\n\t\t\t// Remove the next element\n\t\t\telements.splice(i + 1, 1);\n\t\t} else if (\n\t\t\tisMultiImage(thisElement) &&\n\t\t\tisTitle(nextElement) &&\n\t\t\tisCaption(subsequentElement)\n\t\t) {\n\t\t\twithSpecialCaptions.push({\n\t\t\t\t...thisElement,\n\t\t\t\tcaption: extractCaption(subsequentElement),\n\t\t\t} as MultiImageBlockElement);\n\t\t\t// Remove the subsequent element\n\t\t\telements.splice(i + 2, 1);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithSpecialCaptions.push(thisElement);\n\t\t}\n\t});\n\treturn withSpecialCaptions;\n};\n\nconst stripCaptions = (elements: CAPIElement[]): CAPIElement[] => {\n\t// Remove all captions from all images\n\tconst withoutCaptions: CAPIElement[] = [];\n\telements.forEach((thisElement) => {\n\t\tif (\n\t\t\tthisElement._type ===\n\t\t\t'model.dotcomrendering.pageElements.ImageBlockElement'\n\t\t) {\n\t\t\t// Remove the caption from this image\n\t\t\twithoutCaptions.push({\n\t\t\t\t...thisElement,\n\t\t\t\tdata: {\n\t\t\t\t\t...thisElement.data,\n\t\t\t\t\tcaption: '',\n\t\t\t\t},\n\t\t\t} as ImageBlockElement);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithoutCaptions.push(thisElement);\n\t\t}\n\t});\n\treturn withoutCaptions;\n};\n\nconst removeCredit = (elements: CAPIElement[]): CAPIElement[] => {\n\t// Remove credit from all images\n\tconst withoutCredit: CAPIElement[] = [];\n\telements.forEach((thisElement) => {\n\t\tif (\n\t\t\tthisElement._type ===\n\t\t\t'model.dotcomrendering.pageElements.ImageBlockElement'\n\t\t) {\n\t\t\t// Remove the credit from this image\n\t\t\twithoutCredit.push({\n\t\t\t\t...thisElement,\n\t\t\t\tdata: {\n\t\t\t\t\t...thisElement.data,\n\t\t\t\t\tcredit: '',\n\t\t\t\t},\n\t\t\t} as ImageBlockElement);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithoutCredit.push(thisElement);\n\t\t}\n\t});\n\treturn withoutCredit;\n};\n\nclass Enhancer {\n\telements: CAPIElement[];\n\n\tconstructor(elements: CAPIElement[]) {\n\t\tthis.elements = elements;\n\t}\n\n\tstripCaptions() {\n\t\tthis.elements = stripCaptions(this.elements);\n\t\treturn this;\n\t}\n\n\taddMultiImageElements() {\n\t\tthis.elements = addMultiImageElements(this.elements);\n\t\treturn this;\n\t}\n\n\taddTitles() {\n\t\tthis.elements = addTitles(this.elements);\n\t\treturn this;\n\t}\n\n\taddCaptionsToMultis() {\n\t\tthis.elements = addCaptionsToMultis(this.elements);\n\t\treturn this;\n\t}\n\n\taddCaptionsToImages() {\n\t\tthis.elements = addCaptionsToImages(this.elements);\n\t\treturn this;\n\t}\n\n\tremoveCredit() {\n\t\tthis.elements = removeCredit(this.elements);\n\t\treturn this;\n\t}\n}\n\nconst enhance = (\n\telements: CAPIElement[],\n\tisPhotoEssay: boolean,\n): CAPIElement[] => {\n\tif (isPhotoEssay) {\n\t\treturn (\n\t\t\tnew Enhancer(elements)\n\t\t\t\t// Photo essays by convention have all image captions removed and rely completely on\n\t\t\t\t// special captions set using the ul/li trick\n\t\t\t\t.stripCaptions()\n\t\t\t\t// By convention, photo essays don't include credit for images in the caption\n\t\t\t\t.removeCredit()\n\t\t\t\t// Replace pairs of halfWidth images with MultiImageBlockElements\n\t\t\t\t.addMultiImageElements()\n\t\t\t\t// Photo essay have a convention of adding titles to images if the subsequent block is a h2\n\t\t\t\t.addTitles()\n\t\t\t\t// If any MultiImageBlockElement is followed by a ul/l caption, delete the special caption\n\t\t\t\t// element and use the value for the multi image `caption` prop\n\t\t\t\t.addCaptionsToMultis()\n\t\t\t\t// In photo essays, we also use ul captions for normal images as well\n\t\t\t\t.addCaptionsToImages().elements\n\t\t);\n\t}\n\n\treturn (\n\t\tnew Enhancer(elements)\n\t\t\t// Replace pairs of halfWidth images with MultiImageBlockElements\n\t\t\t.addMultiImageElements()\n\t\t\t// If any MultiImageBlockElement is followed by a ul/l caption, delete the special caption\n\t\t\t// element and use the value for the multi image `caption` prop\n\t\t\t.addCaptionsToMultis().elements\n\t);\n};\n\nexport const enhanceImages = (blocks: Block[], format: CAPIFormat): Block[] => {\n\tconst isPhotoEssay = format.design === 'PhotoEssayDesign';\n\n\treturn blocks.map((block: Block) => {\n\t\treturn {\n\t\t\t...block,\n\t\t\telements: enhance(block.elements, isPhotoEssay),\n\t\t};\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-interactive-contents-elements.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-numbered-lists.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-numbered-lists.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":4,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":4,"endColumn":14},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":12,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":12,"endColumn":11},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":43,"column":15,"nodeType":"Punctuator","messageId":"preferNullish","endLine":43,"endColumn":17,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1422,1424],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":54,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":54,"endColumn":14},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":60,"column":32,"nodeType":"Punctuator","messageId":"preferNullish","endLine":60,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1956,1958],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":76,"column":32,"nodeType":"Punctuator","messageId":"preferNullish","endLine":76,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2477,2479],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":180,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":180,"endColumn":14},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":188,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":188,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { JSDOM } from 'jsdom';\n\nconst isFalseH3 = (element: CAPIElement): boolean => {\n\tif (!element) return false;\n\t// Checks if this element is a 'false h3' based on the convention: <p><strong><H3 text</strong></p>\n\tif (\n\t\telement._type !== 'model.dotcomrendering.pageElements.TextBlockElement'\n\t) {\n\t\treturn false;\n\t}\n\tconst frag = JSDOM.fragment(element.html);\n\tif (!frag || !frag.firstElementChild) return false;\n\tconst html = frag.firstElementChild.outerHTML;\n\t// The following things must be true for an element to be a faux H3\n\tconst hasPwrapper = frag.firstElementChild.nodeName === 'P';\n\tconst containsStrongtags =\n\t\tfrag.firstElementChild.outerHTML.includes('<strong>');\n\tconst doesNotContainLinks =\n\t\t!frag.firstElementChild.outerHTML.includes('<a>');\n\tconst htmlLength = html.length;\n\tconst startStrong = html.substr(0, 11) === '<p><strong>';\n\tconst endsStrong = html.substr(htmlLength - 13) === '</strong></p>';\n\n\treturn (\n\t\thasPwrapper &&\n\t\tcontainsStrongtags &&\n\t\tdoesNotContainLinks &&\n\t\tstartStrong &&\n\t\tendsStrong\n\t);\n};\n\nconst extractH3 = (element: CAPIElement): string => {\n\t// Extract the text based on the convention: <p><strong><H3 text</strong></p>\n\tconst textElement = element as TextBlockElement;\n\tconst frag = JSDOM.fragment(textElement.html);\n\tif (isFalseH3(element)) {\n\t\treturn (\n\t\t\tfrag.firstElementChild?.innerHTML\n\t\t\t\t.split('<strong>')\n\t\t\t\t.join('')\n\t\t\t\t.split('</strong>')\n\t\t\t\t.join('') || ''\n\t\t);\n\t}\n\treturn '';\n};\n\nconst isStarRating = (element: CAPIElement): boolean => {\n\tconst isStar = (charactor: string): boolean => {\n\t\treturn charactor === '★' || charactor === '☆';\n\t};\n\n\tif (!element) return false;\n\t// Checks if this element is a 'star rating' based on the convention: <p>★★★★☆</p>\n\tif (element._type !== 'model.dotcomrendering.pageElements.TextBlockElement')\n\t\treturn false;\n\tconst frag = JSDOM.fragment(element.html);\n\tconst hasPTags = frag.firstElementChild?.nodeName === 'P';\n\tconst text = frag.textContent || '';\n\t// Loop the string making sure each letter is a star\n\tfor (const letter of text) {\n\t\tif (!isStar(letter)) return false;\n\t}\n\tconst hasFiveStars = text.length === 5;\n\treturn hasPTags && hasFiveStars;\n};\n\nconst extractStarCount = (element: CAPIElement): number => {\n\tconst isSelectedStar = (charactor: string): boolean => {\n\t\treturn charactor === '★';\n\t};\n\t// Returns the count of stars\n\tconst textElement = element as TextBlockElement;\n\tconst frag = JSDOM.fragment(textElement.html);\n\tconst text = frag.textContent || '';\n\t// Loop the string counting selected stars\n\tlet starCount = 0;\n\tfor (const letter of text) {\n\t\tif (isSelectedStar(letter)) starCount += 1;\n\t}\n\treturn starCount;\n};\n\nconst isStarableImage = (element: CAPIElement | undefined): boolean => {\n\treturn (\n\t\telement?._type ===\n\t\t\t'model.dotcomrendering.pageElements.ImageBlockElement' &&\n\t\telement.role !== 'thumbnail'\n\t);\n};\n\nconst starifyImages = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst starified: CAPIElement[] = [];\n\tlet previousRating: number | undefined;\n\telements.forEach((thisElement, index) => {\n\t\tswitch (thisElement._type) {\n\t\t\tcase 'model.dotcomrendering.pageElements.TextBlockElement':\n\t\t\t\tif (\n\t\t\t\t\tisStarRating(thisElement) &&\n\t\t\t\t\tisStarableImage(elements[index + 1])\n\t\t\t\t) {\n\t\t\t\t\t// Remember this rating so we can add it to the next element\n\t\t\t\t\tpreviousRating = extractStarCount(thisElement);\n\t\t\t\t} else {\n\t\t\t\t\t// Pass through\n\t\t\t\t\tstarified.push(thisElement);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'model.dotcomrendering.pageElements.ImageBlockElement':\n\t\t\t\tif (\n\t\t\t\t\tpreviousRating !== undefined &&\n\t\t\t\t\tisStarableImage(thisElement)\n\t\t\t\t) {\n\t\t\t\t\t// Add this image using the rating we remembered\n\t\t\t\t\tstarified.push({\n\t\t\t\t\t\t...thisElement,\n\t\t\t\t\t\tstarRating: previousRating,\n\t\t\t\t\t});\n\t\t\t\t\tpreviousRating = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// Pass through\n\t\t\t\t\tstarified.push(thisElement);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t// Pass through\n\t\t\t\tstarified.push(thisElement);\n\t\t}\n\t});\n\treturn starified;\n};\n\nconst inlineStarRatings = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst withStars: CAPIElement[] = [];\n\telements.forEach((thisElement) => {\n\t\tif (\n\t\t\tthisElement._type ===\n\t\t\t\t'model.dotcomrendering.pageElements.TextBlockElement' &&\n\t\t\tisStarRating(thisElement)\n\t\t) {\n\t\t\tconst rating = extractStarCount(thisElement);\n\t\t\t// Inline this image\n\t\t\twithStars.push({\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.StarRatingBlockElement',\n\t\t\t\telementId: thisElement.elementId,\n\t\t\t\trating,\n\t\t\t\tsize: 'large',\n\t\t\t});\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithStars.push(thisElement);\n\t\t}\n\t});\n\treturn withStars;\n};\n\nconst makeThumbnailsRound = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst inlined: CAPIElement[] = [];\n\telements.forEach((thisElement) => {\n\t\tif (\n\t\t\tthisElement._type ===\n\t\t\t\t'model.dotcomrendering.pageElements.ImageBlockElement' &&\n\t\t\tthisElement.role === 'thumbnail'\n\t\t) {\n\t\t\t// Make this image round\n\t\t\tinlined.push({\n\t\t\t\t...thisElement,\n\t\t\t\tisAvatar: true,\n\t\t\t} as ImageBlockElement);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\tinlined.push(thisElement);\n\t\t}\n\t});\n\treturn inlined;\n};\n\nconst isItemLink = (element: CAPIElement): boolean => {\n\tif (!element) return false;\n\t// Checks if this element is a 'item link' based on the convention: <ul> <li>...</li> </ul>\n\tif (\n\t\telement._type !== 'model.dotcomrendering.pageElements.TextBlockElement'\n\t) {\n\t\treturn false;\n\t}\n\tconst frag = JSDOM.fragment(element.html);\n\tif (!frag || !frag.firstElementChild) return false;\n\n\tconst hasULWrapper = frag.firstElementChild.nodeName === 'UL';\n\tconst hasOnlyOneChild = frag.firstElementChild.childElementCount === 1;\n\tconst hasLINestedWrapper =\n\t\tfrag.firstElementChild.firstElementChild?.nodeName === 'LI';\n\n\treturn hasULWrapper && hasOnlyOneChild && hasLINestedWrapper;\n};\n\nconst removeGlobalH2Styles = (elements: CAPIElement[]): CAPIElement[] => {\n\t/**\n\t * Article pages come with some global style rules, one of which affects h2\n\t * tags. But for numbered lists we don't want these styles because we use\n\t * these html elements to represents our special titles. Rather than start a\n\t * css war, this enhancer uses the `data-ignore` attribute which is a contract\n\t * established to allow global styles to be ignored.\n\t *\n\t * All h2 tags inside an article of Design: NumberedList have this attirbute\n\t * set.\n\t */\n\tconst withH2StylesIgnored: CAPIElement[] = [];\n\telements.forEach((thisElement) => {\n\t\tif (\n\t\t\tthisElement._type ===\n\t\t\t'model.dotcomrendering.pageElements.SubheadingBlockElement'\n\t\t) {\n\t\t\twithH2StylesIgnored.push({\n\t\t\t\t...thisElement,\n\t\t\t\thtml: thisElement.html.replace(\n\t\t\t\t\t'<h2>',\n\t\t\t\t\t'<h2 data-ignore=\"global-h2-styling\">',\n\t\t\t\t),\n\t\t\t});\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithH2StylesIgnored.push(thisElement);\n\t\t}\n\t});\n\treturn withH2StylesIgnored;\n};\n\nconst addH3s = (elements: CAPIElement[]): CAPIElement[] => {\n\t/**\n\t * Why not just add H3s in Composer?\n\t * Truth is, you can't. So to get around this there's a convention that says if\n\t * you insert <p><strong>Faux H3!</strong>,</p> then we replace it with a h3 tag\n\t * instead.\n\t *\n\t * Note. H3s don't have any styles so we have to add them. In Frontend, they use\n\t * a 'fauxH3' class for this. In DCR we add `globalH3Styles` which was added at\n\t * the same time as this code.\n\t */\n\tconst withH3s: CAPIElement[] = [];\n\tlet previousItem: CAPIElement | undefined;\n\telements.forEach((thisElement) => {\n\t\tif (\n\t\t\tthisElement._type ===\n\t\t\t\t'model.dotcomrendering.pageElements.TextBlockElement' &&\n\t\t\tisFalseH3(thisElement)\n\t\t) {\n\t\t\tconst h3Text = extractH3(thisElement);\n\n\t\t\t// To avoid having to depend on the ordering of the enhancer (which could easily be a source of bugs)\n\t\t\t// We determine if previous items are `ItemLinkBlockElement` through type and `isItemLink` functions\n\t\t\tconst isPreviousItemLink =\n\t\t\t\tpreviousItem?._type ===\n\t\t\t\t\t'model.dotcomrendering.pageElements.ItemLinkBlockElement' ||\n\t\t\t\t(previousItem && isItemLink(previousItem));\n\n\t\t\twithH3s.push(\n\t\t\t\t{\n\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.DividerBlockElement',\n\t\t\t\t\tsize: 'full',\n\t\t\t\t\tspaceAbove: isPreviousItemLink ? 'loose' : 'tight',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t...thisElement,\n\t\t\t\t\thtml: `<h3>${h3Text}</h3>`,\n\t\t\t\t},\n\t\t\t);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithH3s.push(thisElement);\n\t\t}\n\t\tpreviousItem = thisElement;\n\t});\n\treturn withH3s;\n};\n\nconst addItemLinks = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst withItemLink: CAPIElement[] = [];\n\telements.forEach((thisElement) => {\n\t\tif (\n\t\t\tthisElement._type ===\n\t\t\t\t'model.dotcomrendering.pageElements.TextBlockElement' &&\n\t\t\tisItemLink(thisElement)\n\t\t) {\n\t\t\twithItemLink.push(\n\t\t\t\t{\n\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.DividerBlockElement',\n\t\t\t\t\tsize: 'full',\n\t\t\t\t\tspaceAbove: 'tight',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t...thisElement,\n\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.ItemLinkBlockElement',\n\t\t\t\t},\n\t\t\t);\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithItemLink.push(thisElement);\n\t\t}\n\t});\n\treturn withItemLink;\n};\n\nconst addTitles = (\n\telements: CAPIElement[],\n\tformat: CAPIFormat,\n): CAPIElement[] => {\n\t/**\n\t * Why not just add H3s in Composer?\n\t * Truth is, you can't. So to get around this there's a convention that says if\n\t * you insert <p><strong>Faux H3!</strong>,</p> then we replace it with a h3 tag\n\t * instead.\n\t *\n\t * Note. H3s don't have any styles so we have to add them. In Frontend, they use\n\t * a 'fauxH3' class for this. In DCR we add `globalH3Styles` which was added at\n\t * the same time as this code.\n\t */\n\tconst withTitles: CAPIElement[] = [];\n\tlet position = 1;\n\telements.forEach((thisElement) => {\n\t\tif (\n\t\t\tthisElement._type ===\n\t\t\t'model.dotcomrendering.pageElements.SubheadingBlockElement'\n\t\t) {\n\t\t\tconst { html } = thisElement;\n\t\t\twithTitles.push(\n\t\t\t\t{\n\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.DividerBlockElement',\n\t\t\t\t\tsize: 'full',\n\t\t\t\t\tspaceAbove: 'loose',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_type: 'model.dotcomrendering.pageElements.NumberedTitleBlockElement',\n\t\t\t\t\telementId: thisElement.elementId,\n\t\t\t\t\tposition,\n\t\t\t\t\thtml,\n\t\t\t\t\tformat,\n\t\t\t\t},\n\t\t\t);\n\t\t\tposition += 1;\n\t\t} else {\n\t\t\t// Pass through\n\t\t\twithTitles.push(thisElement);\n\t\t}\n\t});\n\treturn withTitles;\n};\n\nclass Enhancer {\n\telements: CAPIElement[];\n\n\tformat: CAPIFormat;\n\n\tconstructor(elements: CAPIElement[], format: CAPIFormat) {\n\t\tthis.elements = elements;\n\t\tthis.format = format;\n\t}\n\n\tmakeThumbnailsRound() {\n\t\tthis.elements = makeThumbnailsRound(this.elements);\n\t\treturn this;\n\t}\n\n\taddTitles() {\n\t\tthis.elements = addTitles(this.elements, this.format);\n\t\treturn this;\n\t}\n\n\tremoveGlobalH2Styles() {\n\t\tthis.elements = removeGlobalH2Styles(this.elements);\n\t\treturn this;\n\t}\n\n\taddH3s() {\n\t\tthis.elements = addH3s(this.elements);\n\t\treturn this;\n\t}\n\n\taddItemLinks() {\n\t\tthis.elements = addItemLinks(this.elements);\n\t\treturn this;\n\t}\n\n\tstarifyImages() {\n\t\tthis.elements = starifyImages(this.elements);\n\t\treturn this;\n\t}\n\n\tinlineStarRatings() {\n\t\tthis.elements = inlineStarRatings(this.elements);\n\t\treturn this;\n\t}\n}\n\nconst enhance = (\n\telements: CAPIElement[],\n\tformat: CAPIFormat,\n): CAPIElement[] => {\n\treturn (\n\t\tnew Enhancer(elements, format)\n\t\t\t// Add the data-ignore='global-h2-styling' attribute\n\t\t\t.removeGlobalH2Styles()\n\t\t\t// Turn false h3s into real ones\n\t\t\t.addH3s()\n\t\t\t// Add item links\n\t\t\t.addItemLinks()\n\t\t\t// Add numbered titles\n\t\t\t.addTitles()\n\t\t\t// Overlay stars onto images\n\t\t\t.starifyImages()\n\t\t\t// Turn ascii stars into components\n\t\t\t.inlineStarRatings()\n\t\t\t// Thumbnail images should be round\n\t\t\t.makeThumbnailsRound().elements\n\t);\n};\n\nexport const enhanceNumberedLists = (\n\tblocks: Block[],\n\tformat: CAPIFormat,\n): Block[] => {\n\tconst isNumberedList = format.display === 'NumberedListDisplay';\n\n\tif (!isNumberedList) {\n\t\treturn blocks;\n\t}\n\n\treturn blocks.map((block: Block) => {\n\t\treturn {\n\t\t\t...block,\n\t\t\telements: enhance(block.elements, format),\n\t\t};\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-switches.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhance-tweets.ts","messages":[{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":9,"column":5,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":12,"endColumn":7}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const removeTweetClass = (elements: CAPIElement[]): CAPIElement[] => {\n\tconst enhanced: CAPIElement[] = [];\n\telements.forEach((element) => {\n\t\tswitch (element._type) {\n\t\t\tcase 'model.dotcomrendering.pageElements.TweetBlockElement':\n\t\t\t\t// Parse the embed block element, find the iframe and add\n\t\t\t\t// the alt text as a title attribute if it exists\n\t\t\t\t// https://dequeuniversity.com/tips/provide-iframe-titles\n\t\t\t\tconst withoutTweetClass = element.html.replace(\n\t\t\t\t\t'twitter-tweet',\n\t\t\t\t\t'nojs-tweet',\n\t\t\t\t);\n\t\t\t\tenhanced.push({\n\t\t\t\t\t...element,\n\t\t\t\t\thtml: withoutTweetClass,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tenhanced.push(element);\n\t\t}\n\t});\n\treturn enhanced;\n};\n\nexport const enhanceTweets = (blocks: Block[]): Block[] =>\n\tblocks.map((block: Block) => {\n\t\treturn {\n\t\t\t...block,\n\t\t\telements: removeTweetClass(block.elements),\n\t\t};\n\t});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhanceBlocks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhanceCollections.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":63,"column":39,"nodeType":"Punctuator","messageId":"preferNullish","endLine":63,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2314,2316],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":64,"column":33,"nodeType":"Punctuator","messageId":"preferNullish","endLine":64,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2353,2355],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":66,"column":57,"nodeType":"Punctuator","messageId":"preferNullish","endLine":66,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2448,2450],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport { decideFormat } from '../web/lib/decideFormat';\nimport { getDataLinkNameCard } from '../web/lib/getDataLinkName';\n\n/**\n *\n * This function makes the decision about when we use the parent's (the\n * container's) format property to override the styling of a sublink, and\n * when we allow the sublink to express its own styling.\n *\n * Eg. If you had a sublink to a lifestyle article, when should it use pink for\n * the kicker and when would that not look right\n *\n * @returns the format property that we will use to style the sublink\n */\nconst decidePresentationFormat = ({\n\tlinkFormat,\n\tcontainerFormat,\n\tcontainerPalette,\n}: {\n\tlinkFormat?: ArticleFormat;\n\tcontainerFormat: ArticleFormat;\n\tcontainerPalette?: DCRContainerPalette;\n}): ArticleFormat => {\n\t// Some sublinks are to fronts and so don't have a `format` property\n\tif (!linkFormat) return containerFormat;\n\t// If the container has a special palette, use the container format\n\tif (containerPalette) return containerFormat;\n\t// These types of article styles have background styles that sublinks\n\t// need to respect so we use the container format here\n\tif (\n\t\tcontainerFormat.design === ArticleDesign.LiveBlog ||\n\t\tcontainerFormat.design === ArticleDesign.Gallery ||\n\t\tcontainerFormat.design === ArticleDesign.Audio ||\n\t\tcontainerFormat.design === ArticleDesign.Video ||\n\t\tcontainerFormat.theme === ArticleSpecial.SpecialReport ||\n\t\tcontainerFormat.design === ArticleDesign.Analysis\n\t)\n\t\treturn containerFormat;\n\t// Otherwise, we can allow the sublink to express its own styling\n\treturn linkFormat;\n};\n\nconst enhanceSupportingContent = (\n\tsupportingContent: FESupportingContent[],\n\tformat: ArticleFormat,\n\tcontainerPalette?: DCRContainerPalette,\n): DCRSupportingContent[] => {\n\treturn supportingContent.map((subLink) => {\n\t\t// This is the actual DCR format for this sublink\n\t\tconst linkFormat = subLink.format\n\t\t\t? decideFormat(subLink.format)\n\t\t\t: undefined;\n\t\t// This is the format used to decide how the sublink looks (we vary this based\n\t\t// on the container background colour)\n\t\tconst presentationFormat = decidePresentationFormat({\n\t\t\tlinkFormat,\n\t\t\tcontainerFormat: format,\n\t\t\tcontainerPalette,\n\t\t});\n\t\treturn {\n\t\t\tformat: presentationFormat,\n\t\t\theadline: subLink.header?.headline || '',\n\t\t\turl: subLink.properties.href || subLink.header?.url,\n\t\t\tkickerText:\n\t\t\t\tsubLink.header?.kicker?.item?.properties.kickerText ||\n\t\t\t\t(linkFormat && linkFormat.design === ArticleDesign.LiveBlog\n\t\t\t\t\t? 'Live'\n\t\t\t\t\t: undefined),\n\t\t};\n\t});\n};\n\nconst enhanceCards = (\n\tcollections: FEFrontCard[],\n\tcontainerPalette?: DCRContainerPalette,\n): DCRFrontCard[] =>\n\tcollections\n\t\t.filter(\n\t\t\t(card: FEFrontCard): card is FEFrontCard & { format: CAPIFormat } =>\n\t\t\t\t!!card.format,\n\t\t)\n\t\t.map((faciaCard, index) => {\n\t\t\tconst format = decideFormat(faciaCard.format);\n\t\t\tconst group = `${faciaCard.card.group}${\n\t\t\t\tfaciaCard.display.isBoosted ? '+' : ''\n\t\t\t}`;\n\t\t\tconst dataLinkName = getDataLinkNameCard(format, group, index + 1);\n\t\t\treturn {\n\t\t\t\tformat,\n\t\t\t\tdataLinkName,\n\t\t\t\turl: faciaCard.header.url,\n\t\t\t\theadline: faciaCard.header.headline,\n\t\t\t\ttrailText: faciaCard.card.trailText,\n\t\t\t\twebPublicationDate: faciaCard.card.webPublicationDateOption\n\t\t\t\t\t? new Date(\n\t\t\t\t\t\t\tfaciaCard.card.webPublicationDateOption,\n\t\t\t\t\t  ).toISOString()\n\t\t\t\t\t: undefined,\n\t\t\t\timage: faciaCard.properties.maybeContent?.trail.trailPicture\n\t\t\t\t\t?.allImages[0].url,\n\t\t\t\tkickerText:\n\t\t\t\t\tfaciaCard.header.kicker?.item?.properties.kickerText,\n\t\t\t\tsupportingContent: faciaCard.supportingContent\n\t\t\t\t\t? enhanceSupportingContent(\n\t\t\t\t\t\t\tfaciaCard.supportingContent,\n\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\tcontainerPalette,\n\t\t\t\t\t  )\n\t\t\t\t\t: undefined,\n\t\t\t};\n\t\t});\n\nconst decideContainerPalette = (\n\tmetadata?: { type: FEContainerPalette }[],\n): DCRContainerPalette | undefined => {\n\tswitch (metadata?.[0]?.type) {\n\t\tcase 'EventPalette':\n\t\t\treturn 'EventPalette';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn 'SombreAltPalette';\n\t\tcase 'EventAltPalette':\n\t\t\treturn 'EventAltPalette';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn 'InvestigationPalette';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn 'LongRunningAltPalette';\n\t\tcase 'LongRunningPalette':\n\t\t\treturn 'LongRunningPalette';\n\t\tcase 'SombrePalette':\n\t\t\treturn 'SombrePalette';\n\t\tcase 'BreakingPalette':\n\t\t\treturn 'BreakingPalette';\n\t\tcase 'Canonical':\n\t\tcase 'Dynamo':\n\t\tcase 'Special':\n\t\tcase 'DynamoLike':\n\t\tcase 'Breaking':\n\t\tcase 'Podcast':\n\t\tcase 'Branded':\n\t\tdefault:\n\t\t\treturn undefined;\n\t}\n};\n\nexport const enhanceCollections = (\n\tcollections: FECollectionType[],\n): DCRCollectionType[] => {\n\treturn collections.map((collection) => {\n\t\tconst { id, displayName, collectionType } = collection;\n\t\tconst containerPalette = decideContainerPalette(\n\t\t\tcollection.config.metadata,\n\t\t);\n\t\treturn {\n\t\t\tid,\n\t\t\tdisplayName,\n\t\t\tcollectionType,\n\t\t\tcontainerPalette,\n\t\t\tcurated: enhanceCards(collection.curated, containerPalette),\n\t\t\tbackfill: enhanceCards(collection.backfill, containerPalette),\n\t\t\ttreats: enhanceCards(collection.treats, containerPalette),\n\t\t};\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/enhanceStandfirst.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/extract-ga.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/extract-ga.ts","messages":[{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":15,"column":10,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":15,"endColumn":46,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[503,539],"text":"arrOfvalues?.join(',')"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":25,"column":10,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":25,"endColumn":26,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[857,873],"text":"tag?.title"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":52,"column":28,"nodeType":"Punctuator","messageId":"preferNullish","endLine":52,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1567,1569],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// All GA fields should  fall back to default values -\n\nconst filterTags = (\n\ttags: CAPIArticleType['tags'],\n\ttagType: 'Contributor' | 'Keyword' | 'Tone' | 'Series', // Let’s make a decision to keep this tag getter small and well defined, we don't really want to use tags\n): TagType['id'] | '' => {\n\tconst tagArr = tags.filter((tag) => tag.type === tagType);\n\tconst arrOfvalues =\n\t\ttagArr.length > 0 &&\n\t\ttagArr.reduce(\n\t\t\t(prev: Array<TagType['id']>, tag) => prev.concat(tag.id),\n\t\t\t[],\n\t\t);\n\n\treturn (arrOfvalues && arrOfvalues.join(',')) || '';\n};\n\n// Annoyingly we ping GA with commissioningdesk as the title of the tag, not the id so handle that separately\nconst getCommissioningDesk = (\n\ttags: CAPIArticleType['tags'],\n): TagType['title'] | '' => {\n\tconst tag = tags.find((thisTag) =>\n\t\tthisTag.id.includes('tracking/commissioningdesk'),\n\t);\n\treturn (tag && tag.title) || '';\n};\n\nconst convertToLegacyPillar = (theme: CAPITheme): LegacyPillar => {\n\tswitch (theme) {\n\t\tcase 'NewsPillar':\n\t\t\treturn 'news';\n\t\tcase 'OpinionPillar':\n\t\t\treturn 'opinion';\n\t\tcase 'SportPillar':\n\t\t\treturn 'sport';\n\t\tcase 'CulturePillar':\n\t\t\treturn 'culture';\n\t\tcase 'LifestylePillar':\n\t\t\treturn 'lifestyle';\n\t\tdefault:\n\t\t\treturn 'news';\n\t}\n};\n\nconst formatStringForGa = (string: string): string =>\n\tstring.toLowerCase().split(' ').join('');\n\n// we should not bring down the website if a trackable field is missing!\nexport const extract = (data: CAPIArticleType): GADataType => ({\n\twebTitle: data.webTitle,\n\tpillar: convertToLegacyPillar(data.format.theme),\n\tsection: data.sectionName || '',\n\tcontentType: formatStringForGa(data.contentType),\n\tcommissioningDesks: formatStringForGa(getCommissioningDesk(data.tags)),\n\tcontentId: data.pageId,\n\tauthorIds: filterTags(data.tags, 'Contributor'),\n\tkeywordIds: filterTags(data.tags, 'Keyword'),\n\ttoneIds: filterTags(data.tags, 'Tone'),\n\tseriesId: filterTags(data.tags, 'Series'),\n\tisHosted: 'false', // TODO - This is missing from the Frontend Data model\n\tedition: data.editionId.toLowerCase() as Edition,\n\tbeaconUrl: data.beaconURL,\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/extract-nav.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":4,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":4,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[113,116],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[113,116],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":11,"column":8,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":11,"endColumn":34},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":20,"column":45,"nodeType":"Identifier","messageId":"invalidType","endLine":20,"endColumn":50},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":31,"column":8,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":31,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any[]` typed value.","line":34,"column":3,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":34,"endColumn":16},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":41,"column":44,"nodeType":"Identifier","messageId":"invalidType","endLine":41,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":75,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1813,1816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1813,1816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":76,"column":32,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":76,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":77,"column":32,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":77,"endColumn":36},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":78,"column":34,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":78,"endColumn":38},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":79,"column":35,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":79,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":80,"column":35,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":80,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'data' should be typed with a non-any type.","line":84,"column":28,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":84,"endColumn":37},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":84,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2202,2205],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2202,2205],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":85,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2245,2248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2245,2248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":85,"column":30,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":85,"endColumn":34},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":87,"column":42,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":87,"endColumn":46},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":89,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2409,2412],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2409,2412],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":98,"column":35,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":98,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":102,"column":41,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":102,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":105,"column":29,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":105,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `ObjectType`.","line":109,"column":17,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":109,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import get from 'lodash-es/get';\nimport { findPillar } from './find-pillar';\n\ntype ObjectType = { [key: string]: any };\n\nconst getString = (\n\tobj: ObjectType,\n\tselector: string,\n\tfallbackValue?: string,\n): string => {\n\tconst found = get(obj, selector);\n\tif (typeof found === 'string') {\n\t\treturn found;\n\t}\n\tif (fallbackValue !== undefined) {\n\t\treturn fallbackValue;\n\t}\n\n\tthrow new Error(\n\t\t`expected string at '${selector}', got '${found}', in '${JSON.stringify(\n\t\t\tobj,\n\t\t)}'`,\n\t);\n};\n\nconst getArray = <T>(\n\tobj: ObjectType,\n\tselector: string,\n\tfallbackValue?: T[],\n): T[] => {\n\tconst found = get(obj, selector);\n\n\tif (Array.isArray(found)) {\n\t\treturn found;\n\t}\n\tif (fallbackValue !== undefined) {\n\t\treturn fallbackValue;\n\t}\n\n\tthrow new Error(\n\t\t`expected array at '${selector}', got '${found}', in '${JSON.stringify(\n\t\t\tobj,\n\t\t)}'`,\n\t);\n};\n\nconst getLink = (\n\tdata: ObjectType,\n\t{ isPillar }: { isPillar: boolean },\n): LinkType => {\n\tconst title = getString(data, 'title');\n\treturn {\n\t\ttitle,\n\t\tlongTitle: getString(data, 'longTitle', '') || title,\n\t\turl: getString(data, 'url'),\n\t\tpillar: isPillar ? findPillar(getString(data, 'title')) : undefined,\n\t\tchildren: getArray<ObjectType>(data, 'children', []).map(\n\t\t\t(l) => getLink(l, { isPillar: false }), // children are never pillars\n\t\t),\n\t\tmobileOnly: false,\n\t};\n};\n\nconst rrLinkConfig = 'readerRevenueLinks';\nconst buildRRLinkCategories = (\n\tdata: ObjectType,\n\tposition: ReaderRevenuePosition,\n): ReaderRevenueCategories => ({\n\tsubscribe: getString(data, `${rrLinkConfig}.${position}.subscribe`, ''),\n\tsupport: getString(data, `${rrLinkConfig}.${position}.support`, ''),\n\tcontribute: getString(data, `${rrLinkConfig}.${position}.contribute`, ''),\n\tsupporter: getString(data, `${rrLinkConfig}.${position}.supporter`, ''),\n});\n\nconst buildRRLinkModel = (data: any): ReaderRevenuePositions => ({\n\theader: buildRRLinkCategories(data, 'header'),\n\tfooter: buildRRLinkCategories(data, 'footer'),\n\tsideMenu: buildRRLinkCategories(data, 'sideMenu'),\n\tampHeader: buildRRLinkCategories(data, 'ampHeader'),\n\tampFooter: buildRRLinkCategories(data, 'ampFooter'),\n});\n\n// TODO refactor now that we know data must be CAPINavType.\nexport const extractNAV = (data: any): NavType => {\n\tlet pillars = getArray<any>(data, 'pillars');\n\n\tpillars = pillars.map((link) => getLink(link, { isPillar: true }));\n\n\tconst subnav = get(data, 'subNavSections') as undefined | { parent?: any };\n\n\treturn {\n\t\tpillars,\n\t\totherLinks: {\n\t\t\turl: '', // unused\n\t\t\ttitle: 'More',\n\t\t\tlongTitle: 'More',\n\t\t\tmore: true,\n\t\t\tchildren: getArray<ObjectType>(data, 'otherLinks', []).map((l) =>\n\t\t\t\tgetLink(l, { isPillar: false }),\n\t\t\t),\n\t\t},\n\t\tbrandExtensions: getArray<ObjectType>(data, 'brandExtensions', []).map(\n\t\t\t(l) => getLink(l, { isPillar: false }),\n\t\t),\n\t\tcurrentNavLink: getString(data, 'currentNavLinkTitle', ''),\n\t\tsubNavSections: subnav\n\t\t\t? {\n\t\t\t\t\tparent: subnav.parent\n\t\t\t\t\t\t? getLink(subnav.parent, { isPillar: false })\n\t\t\t\t\t\t: undefined,\n\t\t\t\t\tlinks: getArray<ObjectType>(subnav, 'links').map((l) =>\n\t\t\t\t\t\tgetLink(l, { isPillar: false }),\n\t\t\t\t\t),\n\t\t\t  }\n\t\t\t: undefined,\n\t\treaderRevenueLinks: buildRRLinkModel(data),\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/find-pillar.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/find-pillar.ts","messages":[{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":11,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":11,"endColumn":38,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[352,384],"text":"tags?.some(isPaidContent)"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticlePillar, ArticleSpecial } from '@guardian/libs';\n\nexport const findPillar: (\n\tname: string,\n\ttags?: TagType[],\n) => ArticleTheme | undefined = (name, tags?) => {\n\t// Flag paid content for Labs pillar (for styling purposes)\n\tconst isPaidContent = (tag: TagType) =>\n\t\ttag.type === 'Tone' && tag.id === 'tone/advertisement-features';\n\n\tif (tags && tags.some(isPaidContent)) {\n\t\treturn ArticleSpecial.Labs;\n\t}\n\n\tconst pillar: string = name.toLowerCase();\n\n\tswitch (pillar) {\n\t\t// The pillar name is \"arts\" in CAPI, but \"culture\" everywhere else\n\t\tcase 'arts':\n\t\tcase 'culture':\n\t\t\treturn ArticlePillar.Culture;\n\t\tcase 'opinion':\n\t\t\treturn ArticlePillar.Opinion;\n\t\tcase 'news':\n\t\t\treturn ArticlePillar.News;\n\t\tcase 'sport':\n\t\t\treturn ArticlePillar.Sport;\n\t\tcase 'lifestyle':\n\t\t\treturn ArticlePillar.Lifestyle;\n\t\tdefault:\n\t\t\treturn undefined;\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/sanitise.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/sanitise.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/transformDots.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/unwrapHtml.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/unwrapHtml.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":48,"column":57,"nodeType":"Punctuator","messageId":"preferNullish","endLine":48,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1380,1382],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"type HTMLTag = keyof HTMLElementTagNameMap;\n\ntype Prefix = `<${HTMLTag}${'' | ` ${string}`}>`;\ntype Suffix = `</${HTMLTag}>`;\n\nconst stripTags = (html: string, prefix: Prefix, suffix: Suffix) =>\n\thtml.slice(prefix.length, html.length - suffix.length);\n\n/**\n * This method unwraps a string of HTML from an enclosing tag.\n *\n * If the HTML passed in matches any of the fixes, in order, we will unwrap.\n * A fix matches if it starts with the prefix and ends with the suffix provided.\n *\n * - `willUnwrap === true`:\n * \tReturn the html with the prefix and suffix stripped off,\n * \tas well as the matching element that we want to rewrap the HTML in.\n *\n * - `willUnwrap === false`:\n * \tReturn the original HTML string and the `p` unwrappedElement.\n */\nexport const unwrapHtml = ({\n\tfixes,\n\thtml,\n}: {\n\tfixes: {\n\t\tprefix: Prefix;\n\t\tsuffix: Suffix;\n\t\tunwrappedElement?: HTMLTag;\n\t}[];\n\thtml: string;\n}): {\n\tunwrappedHtml: string;\n\twillUnwrap: boolean;\n\tunwrappedElement: HTMLTag;\n} => {\n\tconst matchingFix = fixes.find(\n\t\t({ prefix, suffix }) =>\n\t\t\thtml.startsWith(prefix) && html.endsWith(suffix),\n\t);\n\n\tconst unwrappedHtml = matchingFix\n\t\t? // Chop off the start and end tags if we have matches to unwrap the html\n\t\t  stripTags(html, matchingFix.prefix, matchingFix.suffix)\n\t\t: html;\n\n\t/** `p` is the default unwrappedElement */\n\tconst unwrappedElement = matchingFix?.unwrappedElement || 'p';\n\n\treturn {\n\t\tunwrappedHtml,\n\t\twillUnwrap: !!matchingFix,\n\t\tunwrappedElement,\n\t};\n};\n\nexport type { HTMLTag };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/validate.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `{ [key: string]: any; }`.","line":25,"column":32,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":25,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fetch from 'node-fetch';\nimport { validateAsCAPIType } from './validate';\n\n// TODO avoid fetch, write script to fetch new version in gen-schema.js and store as fixture files\nconst urlsToTest = [\n\t'https://www.theguardian.com/politics/2020/jan/16/long-bailey-says-abortion-limit-should-not-be-different-for-disability.json?dcr',\n\t'https://www.theguardian.com/uk-news/2020/jan/16/benita-mehra-grenfell-inquiry-boris-johnson-appoints-engineer-with-links-to-cladding-firm.json?dcr',\n\t'https://www.theguardian.com/commentisfree/2020/jan/16/boris-johnson-scottish-independence-nicola-sturgeon-snp.json?dcr',\n\t'https://www.theguardian.com/sport/2020/jan/16/south-africa-england-third-test-day-one-match-report.json?dcr',\n\t'https://www.theguardian.com/society/2020/jan/16/the-agony-of-weekend-loneliness-i-wont-speak-to-another-human-until-monday.json?dcr',\n\t'https://www.theguardian.com/uk-news/2020/jan/22/man-74-was-shot-with-crossbow-as-he-fixed-satellite-dish-court-told.json?dcr',\n];\n\ndescribe('validate', () => {\n\tit('throws on invalid data', () => {\n\t\tconst data = { foo: 'bar' };\n\t\texpect(() => validateAsCAPIType(data)).toThrowError(TypeError);\n\t});\n\n\turlsToTest.forEach((url) => {\n\t\tit('confirm valid data', () => {\n\t\t\treturn fetch(`${url}&purge=${Date.now()}`)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((myJson) => {\n\t\t\t\t\texpect(validateAsCAPIType(myJson)).toBe(myJson);\n\t\t\t\t});\n\t\t});\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/validate.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[489,492],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[489,492],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":26,"column":3,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":26,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":27,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":27,"endColumn":43},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":30,"column":47,"nodeType":"Identifier","messageId":"invalidType","endLine":30,"endColumn":50},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":44,"column":3,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":44,"endColumn":22},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":45,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":45,"endColumn":43},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":48,"column":47,"nodeType":"Identifier","messageId":"invalidType","endLine":48,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Options } from 'ajv';\nimport Ajv from 'ajv';\nimport addFormats from 'ajv-formats';\nimport schema from './article-schema.json';\nimport frontSchema from './front-schema.json';\n\nconst options: Options = {\n\tverbose: false,\n\tallErrors: false,\n\tlogger: false,\n\tuseDefaults: 'empty',\n};\n\nconst ajv = new Ajv(options);\naddFormats(ajv);\n\nconst validate = ajv.compile(schema);\nconst validateFront = ajv.compile(frontSchema);\n\nexport const validateAsCAPIType = (data: {\n\t[key: string]: any;\n}): CAPIArticleType => {\n\tconst isValid = validate(data);\n\n\tif (!isValid) {\n\t\t// @ts-expect-error\n\t\tconst url = data.webURL || 'unknown url';\n\n\t\tthrow new TypeError(\n\t\t\t`Unable to validate request body for url ${url}.\\n\n            ${JSON.stringify(validate.errors, null, 2)}`,\n\t\t);\n\t}\n\n\treturn data as CAPIArticleType;\n};\n\nexport const validateAsFrontType = (\n\tdata: Record<string, unknown>,\n): FEFrontType => {\n\tconst isValid = validateFront(data);\n\n\tif (!isValid) {\n\t\t// @ts-expect-error\n\t\tconst url = data.webURL || 'unknown url';\n\n\t\tthrow new TypeError(\n\t\t\t`Unable to validate request body for url ${url}.\\n\n            ${JSON.stringify(validateFront.errors, null, 2)}`,\n\t\t);\n\t}\n\n\treturn data as unknown as FEFrontType;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/model/window-guardian.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":109,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":109,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2810,2813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2810,2813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":180,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":180,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4634,4637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4634,4637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface WindowGuardianConfig {\n\tisDotcomRendering: boolean;\n\tisDev: boolean;\n\tstage: StageType;\n\tfrontendAssetsFullURL: string;\n\tpage: {\n\t\tdcrCouldRender: boolean;\n\t\tcontentType: string;\n\t\tedition: Edition;\n\t\trevisionNumber: string;\n\t\tdcrSentryDsn: string;\n\t\tsentryHost: string;\n\t\tsentryPublicApiKey: string;\n\t\tkeywordIds: string;\n\t\tdfpAccountId: string;\n\t\tadUnit: string;\n\t\tshowRelatedContent: boolean;\n\t\tajaxUrl: string;\n\t\tshouldHideReaderRevenue: boolean;\n\t} & ConfigType;\n\tlibs: {\n\t\tgoogletag: string;\n\t};\n\tswitches: { [key: string]: boolean };\n\ttests: ServerSideTests;\n\tophan: {\n\t\tpageViewId: string;\n\t\tbrowserId: string;\n\t};\n}\n\ninterface WindowGuardianFrontConfig {\n\tisDotcomRendering: boolean;\n\tisDev: boolean;\n\tstage: StageType;\n\tfrontendAssetsFullURL: string;\n\tpage: {\n\t\tdcrCouldRender: boolean;\n\t\tcontentType: string;\n\t\tedition: Edition;\n\t\trevisionNumber: string;\n\t\tdcrSentryDsn: string;\n\t\tsentryHost: string;\n\t\tsentryPublicApiKey: string;\n\t\tkeywordIds: string;\n\t\tdfpAccountId: string;\n\t\tadUnit: string;\n\t\tshowRelatedContent: boolean;\n\t\tajaxUrl: string;\n\t\tshouldHideReaderRevenue: boolean;\n\t};\n\tlibs: {\n\t\tgoogletag: string;\n\t};\n\tswitches: { [key: string]: boolean };\n\ttests: ServerSideTests;\n\tophan: {\n\t\tpageViewId: string;\n\t\tbrowserId: string;\n\t};\n}\n\nconst makeWindowGuardianConfig = (\n\tdcrDocumentData: DCRServerDocumentData,\n): WindowGuardianConfig => {\n\tconst { config } = dcrDocumentData.CAPIArticle;\n\treturn {\n\t\t// This indicates to the client side code that we are running a dotcom-rendering rendered page.\n\t\tisDotcomRendering: true,\n\t\tisDev: process.env.NODE_ENV !== 'production',\n\t\tstage: config.stage,\n\t\tfrontendAssetsFullURL: config.frontendAssetsFullURL,\n\t\tpage: Object.assign(config, {\n\t\t\tdcrCouldRender: true,\n\t\t\tcontentType: dcrDocumentData.CAPIArticle.contentType,\n\t\t\tedition: dcrDocumentData.CAPIArticle.editionId,\n\t\t\trevisionNumber: config.revisionNumber,\n\t\t\tdcrSentryDsn:\n\t\t\t\t'https://1937ab71c8804b2b8438178dfdd6468f@sentry.io/1377847',\n\t\t\tsentryPublicApiKey: config.sentryPublicApiKey,\n\t\t\tsentryHost: config.sentryHost,\n\t\t\tkeywordIds: config.keywordIds,\n\t\t\tdfpAccountId: config.dfpAccountId,\n\t\t\tadUnit: config.adUnit,\n\t\t\tshowRelatedContent: true,\n\t\t\tajaxUrl: config.ajaxUrl,\n\t\t}),\n\t\tlibs: {\n\t\t\tgoogletag: config.googletagUrl,\n\t\t},\n\t\tswitches: config.switches,\n\t\ttests: config.abTests,\n\t\tophan: {\n\t\t\tpageViewId: '',\n\t\t\tbrowserId: '',\n\t\t},\n\t} as WindowGuardianConfig;\n};\n\nexport const makeWindowGuardian = (\n\tdcrDocumentData: DCRServerDocumentData,\n): {\n\t// The 'config' attribute is derived from DCRServerDocumentData and contains\n\t// all the data that, for legacy reasons, for instance compatibility\n\t// with the frontend commercial stack, or other scripts, we want to find\n\t// at window.guardian.config\n\tconfig: WindowGuardianConfig;\n\tpolyfilled: boolean;\n\tadBlockers: any;\n\tmodules: {\n\t\tsentry: {\n\t\t\treportError: (error: Error, feature: string) => void;\n\t\t};\n\t};\n\tGAData: GADataType;\n} => {\n\treturn {\n\t\tconfig: makeWindowGuardianConfig(dcrDocumentData),\n\t\tpolyfilled: false,\n\t\tadBlockers: {\n\t\t\tactive: undefined,\n\t\t\tonDetect: [],\n\t\t},\n\t\tmodules: {\n\t\t\tsentry: {\n\t\t\t\treportError: () => null,\n\t\t\t},\n\t\t},\n\t\tGAData: dcrDocumentData.GA,\n\t};\n};\n\nconst makeFrontWindowGuardianConfig = ({\n\tconfig,\n\teditionId,\n}: DCRFrontType): WindowGuardianFrontConfig => {\n\treturn {\n\t\t// This indicates to the client side code that we are running a dotcom-rendering rendered page.\n\t\tisDotcomRendering: true,\n\t\tisDev: process.env.NODE_ENV !== 'production',\n\t\tstage: config.stage,\n\t\tfrontendAssetsFullURL: config.frontendAssetsFullURL,\n\t\tpage: {\n\t\t\tdcrCouldRender: true,\n\t\t\tcontentType: 'TODO: Do we need this?',\n\t\t\tedition: editionId,\n\t\t\trevisionNumber: config.revisionNumber,\n\t\t\tdcrSentryDsn:\n\t\t\t\t'https://1937ab71c8804b2b8438178dfdd6468f@sentry.io/1377847',\n\t\t\tsentryPublicApiKey: config.sentryPublicApiKey,\n\t\t\tsentryHost: config.sentryHost,\n\t\t\tkeywordIds: config.keywordIds,\n\t\t\tdfpAccountId: config.dfpAccountId,\n\t\t\tadUnit: config.adUnit,\n\t\t\tshowRelatedContent: true,\n\t\t\tajaxUrl: config.ajaxUrl,\n\t\t\tshouldHideReaderRevenue: false, // TODO Pass this in\n\t\t},\n\t\tlibs: {\n\t\t\tgoogletag: config.googletagUrl,\n\t\t},\n\t\tswitches: config.switches,\n\t\ttests: config.abTests,\n\t\tophan: {\n\t\t\tpageViewId: '',\n\t\t\tbrowserId: '',\n\t\t},\n\t};\n};\n\nexport const makeFrontWindowGuardian = (\n\tfront: DCRFrontType,\n): {\n\t// The 'config' attribute is derived from DCRServerDocumentData and contains\n\t// all the data that, for legacy reasons, for instance compatibility\n\t// with the frontend commercial stack, or other scripts, we want to find\n\t// at window.guardian.config\n\tconfig: WindowGuardianFrontConfig;\n\tpolyfilled: boolean;\n\tadBlockers: any;\n\tmodules: {\n\t\tsentry: {\n\t\t\treportError: (error: Error, feature: string) => void;\n\t\t};\n\t};\n} => {\n\treturn {\n\t\tconfig: makeFrontWindowGuardianConfig(front),\n\t\tpolyfilled: false,\n\t\tadBlockers: {\n\t\t\tactive: undefined,\n\t\t\tonDetect: [],\n\t\t},\n\t\tmodules: {\n\t\t\tsentry: {\n\t\t\t\treportError: () => null,\n\t\t\t},\n\t\t},\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/server/dev-server.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":9,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":67},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of async arrow function.","line":15,"column":65,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":15,"endColumn":67},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":15,"column":65,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":15,"endColumn":67}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { NextFunction, Request, Response } from 'express';\nimport { render as renderAMPArticle } from '../amp/server';\nimport {\n\trenderArticle,\n\trenderArticleJson,\n\trenderBlocks,\n\trenderFront,\n\trenderInteractive,\n\trenderKeyEvents,\n} from '../web/server';\n\n// see https://www.npmjs.com/package/webpack-hot-server-Middleware\n// for more info\nexport const devServer = () => {\n\treturn async (req: Request, res: Response, next: NextFunction) => {\n\t\tswitch (req.path) {\n\t\t\tcase '/Article':\n\t\t\t\treturn renderArticle(req, res);\n\t\t\tcase '/ArticleJson':\n\t\t\t\treturn renderArticleJson(req, res);\n\t\t\tcase '/AMPArticle':\n\t\t\t\treturn renderAMPArticle(req, res);\n\t\t\tcase '/Interactive':\n\t\t\t\treturn renderInteractive(req, res);\n\t\t\tcase '/AMPInteractive':\n\t\t\t\treturn renderAMPArticle(req, res);\n\t\t\tcase '/Blocks':\n\t\t\t\treturn renderBlocks(req, res);\n\t\t\tcase '/KeyEvents':\n\t\t\t\treturn renderKeyEvents(req, res);\n\t\t\tcase '/Front':\n\t\t\t\treturn renderFront(req, res);\n\t\t\tdefault:\n\t\t\t\tnext();\n\t\t}\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/server/index.ts","messages":[],"suppressedMessages":[{"ruleId":"import/no-default-export","severity":2,"message":"Prefer named exports.","line":7,"column":8,"nodeType":"ExportDefaultDeclaration","endLine":7,"endColumn":15,"suppressions":[{"kind":"directive","justification":"it is what Webpack wants"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/server/lib/aws/aws-metrics.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[426,429],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[426,429],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[653,656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[653,656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":34,"column":0,"nodeType":null,"endLine":34,"endColumn":74},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":4,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":17},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":42,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":42,"endColumn":59},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":50,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":73},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":84,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":84,"endColumn":72}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .stack on an `any` value.","line":35,"column":23,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":35,"endColumn":32,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { PutMetricDataInput } from '@aws-sdk/client-cloudwatch';\nimport {\n\tCloudWatchClient,\n\tPutMetricDataCommand,\n} from '@aws-sdk/client-cloudwatch';\n\ninterface Metric {\n\tsend: () => void;\n}\n\nprocess.env.AWS_PROFILE = 'frontend';\n\nconst cloudWatchClient = new CloudWatchClient({ region: 'eu-west-1' });\n\n// how frequently we send metrics to aws in ms\nconst METRICS_TIME_RESOLUTION = 60 * 1000;\n\nconst sendMetric = (m: any[]) => {\n\tif (m.length === 0) {\n\t\treturn;\n\t}\n\n\tconst params: PutMetricDataInput = {\n\t\tMetricData: m,\n\t\tNamespace: 'Application',\n\t};\n\n\tconst command = new PutMetricDataCommand(params);\n\n\tcloudWatchClient.send(command, (err: any) => {\n\t\tif (err) {\n\t\t\t// `err` is typed as `any` in the library:\n\t\t\t// https://github.com/aws/aws-sdk-js-v3/blob/main/packages/smithy-client/src/client.ts#L41-L43\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\tconsole.error(err, err.stack);\n\t\t}\n\t});\n};\n\n// handles sending matrics to AWS\n\nconst collectAndSendAWSMetrics = (...metrics: Metric[]) => {\n\tsetInterval(() => {\n\t\tmetrics.forEach((m) => m.send());\n\t}, METRICS_TIME_RESOLUTION);\n};\n\n// to record things like latency\n\nconst TimingMetric = (app: string, stage: string, metricName: string) => {\n\tconst values: number[] = [];\n\n\treturn {\n\t\trecordDuration: (n: number) => {\n\t\t\tvalues.push(n);\n\t\t},\n\n\t\tsend: () => {\n\t\t\tsendMetric(\n\t\t\t\tvalues.map((v) => ({\n\t\t\t\t\tDimensions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tName: 'ApplicationName',\n\t\t\t\t\t\t\tValue: app,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tName: 'Stage',\n\t\t\t\t\t\t\tValue: stage,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tMetricName: metricName,\n\t\t\t\t\tUnit: 'Milliseconds',\n\t\t\t\t\tValue: v,\n\t\t\t\t})),\n\t\t\t);\n\n\t\t\tvalues.length = 0;\n\t\t},\n\t};\n};\n\n// to record memory or file sizes\n\nconst BytesMetric = (app: string, stage: string, metricName: string) => {\n\tconst values: number[] = [];\n\n\treturn {\n\t\trecord: (n: number) => {\n\t\t\tvalues.push(n);\n\t\t},\n\n\t\tsend: () => {\n\t\t\tsendMetric(\n\t\t\t\tvalues.map((v) => ({\n\t\t\t\t\tDimensions: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tName: 'ApplicationName',\n\t\t\t\t\t\t\tValue: app,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tName: 'Stage',\n\t\t\t\t\t\t\tValue: stage,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tMetricName: metricName,\n\t\t\t\t\tUnit: 'Bytes',\n\t\t\t\t\tValue: v,\n\t\t\t\t})),\n\t\t\t);\n\n\t\t\tvalues.length = 0;\n\t\t},\n\t};\n};\n\nexport { collectAndSendAWSMetrics, BytesMetric, TimingMetric };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/server/lib/aws/aws-parameters.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[353,356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[353,356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[460,463],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[460,463],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":53,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":53,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1460,1462],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":78,"column":5,"nodeType":"MemberExpression","messageId":"unsafeReturn","endLine":78,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type {\n\tGetParametersByPathCommandOutput,\n\tGetParametersByPathRequest,\n\tParameter,\n} from '@aws-sdk/client-ssm';\nimport { GetParametersByPathCommand, SSMClient } from '@aws-sdk/client-ssm';\n\nprocess.env.AWS_PROFILE = 'frontend';\nconst ssm = new SSMClient({ region: 'eu-west-1' });\nconst STACK = 'frontend';\n\ninterface ConfigMap {\n\t[key: string]: any;\n}\n\ninterface GuardianConfiguration {\n\tgetParameter: (key: string) => string;\n\tgetAllParameters: () => any;\n\tsize: () => number;\n}\n\n// gets params from AWS parameter store. This is a PAGED api, the token\n// indicates the next set of results to get (or undefined for the first call)\n\nconst getParams = function getAWSParameterStoreParameters(\n\tstage: string,\n\ttoken: string | undefined = undefined,\n): Promise<GetParametersByPathCommandOutput> {\n\tconst params: GetParametersByPathRequest = {\n\t\tPath: `/${STACK}/${stage}/`,\n\t\tRecursive: true,\n\t\tWithDecryption: true,\n\t\tNextToken: token,\n\t};\n\n\tconst command = new GetParametersByPathCommand(params);\n\treturn ssm.send(command);\n};\n\n// a recursive function to retrieve all pages of guardian configuration\n\nconst getAllParams = function getGuardianConfigurationRecursiveStep(\n\tstage: string,\n\tparams: Parameter[] = [],\n\ttoken: string | undefined = undefined,\n): Promise<Parameter[]> {\n\treturn getParams(stage, token).then((response) => {\n\t\tif (!response.NextToken) {\n\t\t\treturn params;\n\t\t}\n\t\treturn getAllParams(\n\t\t\tstage,\n\t\t\tparams.concat(response.Parameters || []),\n\t\t\tresponse.NextToken === '' ? undefined : response.NextToken,\n\t\t);\n\t});\n};\n\n// returns a configuration object\n\nconst getGuardianConfiguration = (\n\tstage: string,\n): Promise<GuardianConfiguration> => {\n\treturn getAllParams(stage).then((params) => {\n\t\tconst configuration: ConfigMap = params.reduce(\n\t\t\t(map, p) =>\n\t\t\t\tp.Name\n\t\t\t\t\t? {\n\t\t\t\t\t\t\t...map,\n\t\t\t\t\t\t\t[p.Name]: p.Value,\n\t\t\t\t\t  }\n\t\t\t\t\t: { ...map },\n\t\t\t{},\n\t\t);\n\n\t\treturn {\n\t\t\tgetParameter: (key: string) =>\n\t\t\t\tconfiguration[`/${STACK}/${stage}/${key}`],\n\t\t\tgetAllParameters: () => configuration,\n\t\t\tsize: () => params.length,\n\t\t};\n\t});\n};\n\nexport { getGuardianConfiguration, GuardianConfiguration };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/server/lib/aws/metrics-baseline.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":29,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":29,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import os from 'os';\nimport { BytesMetric, collectAndSendAWSMetrics } from './aws-metrics';\n\nconst stage =\n\ttypeof process.env.GU_STAGE === 'string'\n\t\t? process.env.GU_STAGE.toUpperCase()\n\t\t: 'DEV';\n\nconst maxHeapMemory = BytesMetric('rendering', stage, 'max-heap-memory');\nconst usedHeapMemory = BytesMetric('rendering', stage, 'used-heap-memory');\nconst freePhysicalMemory = BytesMetric(\n\t'rendering',\n\tstage,\n\t'free-physical-memory',\n);\nconst totalPhysicalMemory = BytesMetric(\n\t'rendering',\n\tstage,\n\t'total-physical-memory',\n);\n\ncollectAndSendAWSMetrics(\n\tmaxHeapMemory,\n\tusedHeapMemory,\n\ttotalPhysicalMemory,\n\tfreePhysicalMemory,\n);\n\nexport const recordBaselineCloudWatchMetrics = () => {\n\tmaxHeapMemory.record(process.memoryUsage().heapTotal);\n\tusedHeapMemory.record(process.memoryUsage().heapUsed);\n\ttotalPhysicalMemory.record(os.totalmem());\n\tfreePhysicalMemory.record(os.freemem());\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/server/lib/get-content-from-url.test.ts","messages":[{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":4,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":4,"endColumn":61},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":17,"column":67,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":17,"endColumn":69},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":30,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":30,"endColumn":61},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":42,"column":71,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":42,"endColumn":73},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":54,"column":55,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":54,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { parseURL } from './get-content-from-url';\n\ndescribe('URL parser', () => {\n\ttest('parse DEV URL when one query is present', async () => {\n\t\tconst req = {\n\t\t\turl: '/Article?url=https%3A%2F%2Fwww.theguardian.com%2Fpolitics%2Flive%2F2022%2Fapr%2F13%2Fboris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown&filterKeyEvents=true',\n\t\t\tpath: '/Article',\n\t\t};\n\t\tconst parsedURL =\n\t\t\t'https://www.theguardian.com/politics/live/2022/apr/13/boris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown?filterKeyEvents=true';\n\n\t\tconst url = parseURL(req.url, req.path);\n\n\t\texpect(url).toEqual(parsedURL);\n\t});\n\n\ttest('parse DEV URL when multiple queries are present', async () => {\n\t\tconst req = {\n\t\t\turl: '/Article?url=https%3A%2F%2Fwww.theguardian.com%2Fpolitics%2Flive%2F2022%2Fapr%2F13%2Fboris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown&filterKeyEvents=true&dcr=true&live=true',\n\t\t\tpath: '/Article',\n\t\t};\n\t\tconst parsedURL =\n\t\t\t'https://www.theguardian.com/politics/live/2022/apr/13/boris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown?filterKeyEvents=true&dcr=true&live=true';\n\n\t\tconst url = parseURL(req.url, req.path);\n\n\t\texpect(url).toEqual(parsedURL);\n\t});\n\n\ttest('parse URL when there are 2 query string', async () => {\n\t\tconst req = {\n\t\t\turl: '/Article?url=https%3A%2F%2Fwww.theguardian.com%2Fpolitics%2Flive%2F2022%2Fapr%2F13%2Fboris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown?filterKeyEvents=true',\n\t\t\tpath: '/Article',\n\t\t};\n\t\tconst parsedURL =\n\t\t\t'https://www.theguardian.com/politics/live/2022/apr/13/boris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown?filterKeyEvents=true';\n\n\t\tconst url = parseURL(req.url, req.path);\n\t\texpect(url).toEqual(parsedURL);\n\t});\n\n\ttest('parse URL when there is a query but no query string', async () => {\n\t\tconst req = {\n\t\t\turl: 'https%3A%2F%2Fwww.theguardian.com%2Fpolitics%2Flive%2F2022%2Fapr%2F13%2Fboris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown&filterKeyEvents=true&dcr=true&live=true',\n\t\t\tpath: '',\n\t\t};\n\t\tconst parsedURL =\n\t\t\t'https://www.theguardian.com/politics/live/2022/apr/13/boris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown?filterKeyEvents=true&dcr=true&live=true';\n\n\t\tconst url = parseURL(req.url, req.path);\n\t\texpect(url).toEqual(parsedURL);\n\t});\n\n\ttest('parse URL when there are no queries', async () => {\n\t\tconst req = {\n\t\t\turl: 'https%3A%2F%2Fwww.theguardian.com%2Fpolitics%2Flive%2F2022%2Fapr%2F13%2Fboris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown',\n\t\t\tpath: '',\n\t\t};\n\t\tconst parsedURL =\n\t\t\t'https://www.theguardian.com/politics/live/2022/apr/13/boris-johnson-uk-politics-live-rishi-sunak-partygate-lockdown';\n\n\t\tconst url = parseURL(req.url, req.path);\n\n\t\texpect(url).toEqual(parsedURL);\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/server/lib/logging.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[499,502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[499,502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":91,"column":7,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":91,"endColumn":8},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":4,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import path from 'path';\nimport type { LoggingEvent } from 'log4js';\nimport { addLayout, configure, getLogger, shutdown } from 'log4js';\n\nconst logLocation =\n\tprocess.env.NODE_ENV === 'production' &&\n\t!process.env.DISABLE_LOGGING_AND_METRICS\n\t\t? '/var/log/dotcom-rendering/dotcom-rendering.log'\n\t\t: `${path.resolve('logs')}/dotcom-rendering.log`;\n\nconst stage =\n\ttypeof process.env.GU_STAGE === 'string'\n\t\t? process.env.GU_STAGE.toUpperCase()\n\t\t: 'DEV';\n\nconst logFields = (logEvent: LoggingEvent): any => {\n\tconst coreFields = {\n\t\tstack: 'frontend',\n\t\tapp: 'dotcom-rendering',\n\t\tstage,\n\t\t'@timestamp': logEvent.startTime,\n\t\t'@version': 1,\n\t\tlevel: logEvent.level.levelStr,\n\t\tlevel_value: logEvent.level.level,\n\t};\n\t// log4js uses any[] to type data but we want to coerce it here\n\t// because we now depend on the type to log the result properly\n\tconst data = logEvent.data[0] as unknown as\n\t\t| Record<string, unknown>\n\t\t| string;\n\n\tif (typeof data === 'string') {\n\t\treturn {\n\t\t\t...coreFields,\n\t\t\tmessage: data,\n\t\t};\n\t}\n\treturn {\n\t\tmessage: 'DCR Render event',\n\t\t...coreFields,\n\t\t...data,\n\t};\n};\n\naddLayout('json', () => {\n\treturn (logEvent) => {\n\t\treturn JSON.stringify(logFields(logEvent));\n\t};\n});\n\nconst disableLog4js = {\n\tappenders: {\n\t\tconsole: { type: 'console' },\n\t},\n\tcategories: {\n\t\tdefault: { appenders: ['console'], level: 'off' },\n\t\toff: { appenders: ['console'], level: 'off' },\n\t},\n};\n\nconst enableLog4j = {\n\tappenders: {\n\t\tconsole: { type: 'console' },\n\t\tfileAppender: {\n\t\t\ttype: 'file',\n\t\t\tfilename: logLocation,\n\t\t\tmaxLogSize: 10000,\n\t\t\tbackups: 5,\n\t\t\tcompress: true,\n\t\t\tlayout: { type: 'json', separator: ',' },\n\t\t},\n\t},\n\tcategories: {\n\t\tdefault: { appenders: ['fileAppender'], level: 'info' },\n\t\tproduction: { appenders: ['fileAppender'], level: 'info' },\n\t\tdevelopment: { appenders: ['console'], level: 'info' },\n\t},\n\tpm2: true,\n};\n\nif (process.env.DISABLE_LOGGING_AND_METRICS === 'true') {\n\tconfigure(disableLog4js);\n} else {\n\tconfigure(enableLog4j);\n}\n\n// We do this to ensure no memory leaks during development as hot reloading\n// doesn't clear up old listeners.\nif (process.env.NODE_ENV === 'development') {\n\tshutdown((e) => {\n\t\tif (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t});\n}\n\nexport const logger =\n\tprocess.env.DISABLE_LOGGING_AND_METRICS === 'true'\n\t\t? getLogger('off')\n\t\t: getLogger(process.env.NODE_ENV);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/server/prod-server.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":29,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":29,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":37,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":45,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1460,1463],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1460,1463],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of async arrow function.","line":80,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":80,"endColumn":41},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":80,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":80,"endColumn":41},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":85,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":85,"endColumn":18},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of async arrow function.","line":94,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":94,"endColumn":41},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":94,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":94,"endColumn":41},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":99,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":99,"endColumn":18},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of async arrow function.","line":109,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":109,"endColumn":41},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":109,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":109,"endColumn":41},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":114,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":114,"endColumn":18},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":144,"column":33,"nodeType":"MemberExpression","messageId":"invalidType","endLine":144,"endColumn":44},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":149,"column":0,"nodeType":null,"endLine":149,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4611,4614],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4611,4614],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4621,4624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4621,4624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":150,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":150,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4647,4650],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4647,4650],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":152,"column":32,"nodeType":"MemberExpression","messageId":"invalidType","endLine":152,"endColumn":43},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":161,"column":32,"nodeType":"Punctuator","messageId":"preferNullish","endLine":161,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4915,4917],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":164,"column":2,"nodeType":"MemberExpression","messageId":"unexpected","endLine":164,"endColumn":13}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'next' is defined but never used.","line":150,"column":44,"nodeType":"Identifier","messageId":"unusedVar","endLine":150,"endColumn":53,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import compression from 'compression';\nimport type { Request, Response } from 'express';\nimport express from 'express';\nimport responseTime from 'response-time';\nimport { log, warn } from '../../scripts/env/log';\nimport {\n\trender as renderAMPArticle,\n\trenderPerfTest as renderAMPArticlePerfTest,\n} from '../amp/server';\nimport {\n\trenderArticle,\n\trenderArticleJson,\n\trenderPerfTest as renderArticlePerfTest,\n\trenderBlocks,\n\trenderFront,\n\trenderInteractive,\n\trenderKeyEvents,\n} from '../web/server';\nimport type { GuardianConfiguration } from './lib/aws/aws-parameters';\nimport { getGuardianConfiguration } from './lib/aws/aws-parameters';\nimport { recordBaselineCloudWatchMetrics } from './lib/aws/metrics-baseline';\nimport { getContentFromURLMiddleware } from './lib/get-content-from-url';\nimport { logger } from './lib/logging';\n\n// Middleware to track route performance using 'response-time' lib\n// Usage: app.post('/Article', logRenderTime, renderArticle);\nconst logRenderTime = responseTime(\n\t(req: Request, _: Response, time: number) => {\n\t\tconst body: CAPIArticleType = req.body;\n\t\tlogger.info({\n\t\t\tpageId: body.pageId,\n\t\t\trenderTime: time,\n\t\t});\n\t},\n);\n\nexport const prodServer = () => {\n\tlogger.info('dotcom-rendering is GO.');\n\n\tif (process.env.DISABLE_LOGGING_AND_METRICS !== 'true') {\n\t\tgetGuardianConfiguration('prod')\n\t\t\t.then((config: GuardianConfiguration) => {\n\t\t\t\tlog(`loaded ${config.size()} configuration parameters`);\n\t\t\t})\n\t\t\t.catch((err: any) => {\n\t\t\t\twarn('Failed to get configuration. Bad AWS credentials?');\n\t\t\t\twarn(err);\n\t\t\t});\n\t}\n\n\tconst app = express();\n\n\tapp.use(express.json({ limit: '50mb' }));\n\tapp.use(compression());\n\n\tapp.get('/_healthcheck', (req: Request, res: Response) => {\n\t\tres.status(200).send('OKAY');\n\t});\n\n\t// if running prod server locally, serve local assets\n\tif (!process.env.GU_PUBLIC) {\n\t\tapp.use('/static/frontend', express.static(__dirname));\n\n\t\tapp.use('/assets', express.static(__dirname));\n\t}\n\n\tapp.post('/Article', logRenderTime, renderArticle);\n\tapp.post('/AMPArticle', logRenderTime, renderAMPArticle);\n\tapp.post('/Interactive', logRenderTime, renderInteractive);\n\tapp.post('/AMPInteractive', logRenderTime, renderAMPArticle);\n\tapp.post('/Blocks', logRenderTime, renderBlocks);\n\tapp.post('/KeyEvents', logRenderTime, renderKeyEvents);\n\tapp.post('/Front', logRenderTime, renderFront);\n\n\t// These GET's are for checking any given URL directly from PROD\n\tapp.get(\n\t\t'/Article',\n\t\tlogRenderTime,\n\t\tgetContentFromURLMiddleware,\n\t\tasync (req: Request, res: Response) => {\n\t\t\t// Eg. http://localhost:9000/Article?url=https://www.theguardian.com/commentisfree/...\n\t\t\ttry {\n\t\t\t\treturn renderArticle(req, res);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t},\n\t);\n\n\tapp.get(\n\t\t'/AMPArticle',\n\t\tlogRenderTime,\n\t\tgetContentFromURLMiddleware,\n\t\tasync (req: Request, res: Response) => {\n\t\t\t// Eg. http://localhost:9000/AMPArticle?url=https://www.theguardian.com/commentisfree/...\n\t\t\ttry {\n\t\t\t\treturn renderAMPArticle(req, res);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t},\n\t);\n\n\tapp.get(\n\t\t'/Front',\n\t\tlogRenderTime,\n\t\t// TODO: ensure getContentFromURLMiddleware supports fronts\n\t\tgetContentFromURLMiddleware,\n\t\tasync (req: Request, res: Response) => {\n\t\t\t// Eg. http://localhost:9000/Front?url=https://www.theguardian.com/uk/sport\n\t\t\ttry {\n\t\t\t\treturn renderFront(req, res);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t},\n\t);\n\n\tapp.use('/ArticlePerfTest', renderArticlePerfTest);\n\tapp.use('/AMPArticlePerfTest', renderAMPArticlePerfTest);\n\tapp.use('/ArticleJson', renderArticleJson);\n\n\tapp.get('/', (req: Request, res: Response) => {\n\t\ttry {\n\t\t\tres.send(`\n                <!DOCTYPE html>\n                <html>\n                <body>\n                    <ul>\n                        <li><a href=\"/Article\">Article</a></li>\n                        <li><a href=\"/AMPArticle\">⚡️Article</a></li>\n                        <li><a href=\"/ArticlePerfTest\">⚡Article (perf test example)</a></li>\n                        <li><a href=\"/AMPArticlePerfTest\">⚡️Article (perf test example)</a></li>\n                    </ul>\n                    <ul>\n                        <li><a href=\"/ArticlePerfTest\">⚡Article (perf test example)</a></li>\n                        <li><a href=\"/AMPArticlePerfTest\">⚡️Article (perf test example)</a></li>\n                    </ul>\n                </body>\n                </html>\n            `);\n\t\t} catch (e) {\n\t\t\tconst error = e as Error;\n\t\t\tres.status(500).send(`<pre>${error.stack}</pre>`);\n\t\t}\n\t});\n\n\t// express requires all 4 args here:\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tapp.use((e: any, req: any, res: Response, next: any) => {\n\t\tconst error = e as Error;\n\t\tres.status(500).send(`<pre>${error.stack}</pre>`);\n\t});\n\n\tif (process.env.DISABLE_LOGGING_AND_METRICS !== 'true') {\n\t\tsetInterval(() => {\n\t\t\trecordBaselineCloudWatchMetrics();\n\t\t}, 10 * 1000);\n\t}\n\n\tconst port = process.env.PORT || 9000;\n\tapp.listen(port);\n\n\tconsole.log(`Started production server on port ${port}\\nready`);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/static/icons/Star.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":3,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { neutral } from '@guardian/source-foundations';\n\nexport const Star = ({\n\tstarId,\n\tisEmpty,\n}: {\n\tstarId: string;\n\tisEmpty: boolean;\n}) => {\n\tif (isEmpty)\n\t\treturn (\n\t\t\t<svg width=\"14\" height=\"13\" viewBox=\"0 0 14 13\">\n\t\t\t\t<path\n\t\t\t\t\tid={`star-${starId}`}\n\t\t\t\t\tclipPath={`url(#clip-${starId})`}\n\t\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\t\tstroke={neutral[7]}\n\t\t\t\t\tfill=\"transparent\"\n\t\t\t\t\td=\"M0 5.2L3.7 8l-1.4 4.6.5.4 3.7-2.8 3.7 2.8.5-.4L9.3 8 13 5.2l-.2-.6H8.2L6.8 0h-.6L4.8 4.6H.2l-.2.6z\"\n\t\t\t\t/>\n\t\t\t\t<clipPath id={`clip-${starId}`}>\n\t\t\t\t\t<use xlinkHref={`#star-${starId}`} stroke=\"none\" />\n\t\t\t\t</clipPath>\n\t\t\t</svg>\n\t\t);\n\n\treturn (\n\t\t<svg width=\"14\" height=\"13\" viewBox=\"0 0 14 13\">\n\t\t\t<path\n\t\t\t\tfill={neutral[7]}\n\t\t\t\tstrokeWidth=\"0\"\n\t\t\t\td=\"M0 5.2L3.7 8l-1.4 4.6.5.4 3.7-2.8 3.7 2.8.5-.4L9.3 8 13 5.2l-.2-.6H8.2L6.8 0h-.6L4.8 4.6H.2l-.2.6z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/atomIframe/atomIframe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/atomIframe/init.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/bootCmp/init.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[651,654],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[651,654],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":22,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":22,"endColumn":9},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":26,"column":6,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":26,"endColumn":24},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":26,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":26,"endColumn":50,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[747,791],"text":"window.performance?.now"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":26,"column":28,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":26,"endColumn":50},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":57,"column":57,"nodeType":"Identifier","messageId":"invalidType","endLine":57,"endColumn":58},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":61,"column":8,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":61,"endColumn":20},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":106,"column":60,"nodeType":"Punctuator","messageId":"preferNullish","endLine":106,"endColumn":62,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3691,3693],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":115,"column":54,"nodeType":"Punctuator","messageId":"preferNullish","endLine":115,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3931,3933],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":120,"column":54,"nodeType":"Punctuator","messageId":"preferNullish","endLine":120,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4144,4146],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":122,"column":43,"nodeType":"Punctuator","messageId":"preferNullish","endLine":122,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4219,4221],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":156,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":156,"endColumn":32},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":156,"column":48,"nodeType":"Identifier","messageId":"invalidType","endLine":156,"endColumn":49},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":161,"column":4,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":161,"endColumn":23},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":183,"column":36,"nodeType":"Punctuator","messageId":"preferNullish","endLine":183,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5808,5810],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"consistent-return","severity":1,"message":"Async arrow function expected no return value.","line":187,"column":2,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":187,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tcmp,\n\tgetConsentFor,\n\tonConsentChange,\n} from '@guardian/consent-management-platform';\nimport type { ConsentState } from '@guardian/consent-management-platform/dist/types';\nimport { getCookie, log } from '@guardian/libs';\nimport { getLocaleCode } from '../../lib/getCountryCode';\nimport { injectPrivacySettingsLink } from '../../lib/injectPrivacySettingsLink';\nimport { loadScript } from '../../lib/loadScript';\nimport type { OphanAction, OphanComponentType } from '../ophan/ophan';\nimport { submitComponentEvent } from '../ophan/ophan';\nimport { startup } from '../startup';\n\nconst trackPerformance = (\n\ttimingCategory: string,\n\ttimingVar: any,\n\ttimingLabel: string,\n): void => {\n\tconst { ga } = window;\n\n\tif (!ga) {\n\t\treturn;\n\t}\n\n\tif (window.performance && window.performance.now) {\n\t\tga(\n\t\t\t'allEditorialPropertyTracker.send',\n\t\t\t'timing',\n\t\t\ttimingCategory,\n\t\t\ttimingVar,\n\t\t\tMath.round(window.performance.now()),\n\t\t\ttimingLabel,\n\t\t);\n\t}\n};\n\nconst init = async (): Promise<void> => {\n\t/**\n\t * Keep this file in sync with CONSENT_TIMING in static/src/javascripts/boot.js in frontend\n\t * mark: CONSENT_TIMING\n\t */\n\tif (!window.guardian.config.switches.consentManagement) return; // CMP turned off!\n\tconst browserId = getCookie({ name: 'bwid', shouldMemoize: true });\n\tconst { pageViewId } = window.guardian.config.ophan;\n\n\t// Track when CMP will show with GA\n\tcmp.willShowPrivacyMessage()\n\t\t.then((willShow) => {\n\t\t\ttrackPerformance(\n\t\t\t\t'consent',\n\t\t\t\t'acquired',\n\t\t\t\twillShow ? 'new' : 'existing',\n\t\t\t);\n\t\t})\n\t\t.catch((e) =>\n\t\t\tlog('dotcom', `CMP willShowPrivacyMessage - error: ${e}`),\n\t\t);\n\n\tonConsentChange((consentState: ConsentState) => {\n\t\tif (!consentState) return;\n\t\t// Register changes in consent state with Ophan\n\n\t\t/*\n\t\t\t(Date: February 2022. Author: Pascal. This is a work in progress...)\n\n\t\t\t### General Context\n\n\t\t\tWe are sending consent data from the client side to the datalake through Ophan, using Ophan Component Events.\n\n\t\t\tWe are using Ophan Component Events because consent events do not have a first class type in the Ophan pipeline\n\t\t\t(this may change in the future)\n\n\t\t\tAt the moment we are using MANAGE_CONSENT as the default action while we develop this code.\n\n\t\t\t### Encoding Conventions\n\n\t\t\tAt the moment, the payload is essentially contained in the `labels` attribute (an array of strings) of the\n\t\t\tcomponent object. We are going to encode consent data for more than one jusridiction. To make this unambiguous\n\t\t\twe are going to use a specific convention.\n\n\t\t\tEach element of the array represents a particular attribute. Note that the collection of attributes is different\n\t\t\tfrom one jurisdiction to another. To have an unambiguous reading we prefix each attribute value with a code\n\t\t\tthat helps identify the attribute type.\n\n\t\t\tAn element of the array is then always of the form \"<code>:<value>\"\n\n\t\t\tCodes:\n\t\t\t\t01: Specify the jurisdiction. Accepted values: \"TCF.v2\", \"CCPA\" and \"AUS\"\n\t\t\t\t02: TCF.v2 Consent UUID\n\t\t\t\t03: TCF.v2 Consent string\n\t\t\t\t04: CCPA (Consent) UUID\n\t\t\t\t05: CCPA Do not sell, boolean, with the serialization: true -> \"true\", false -> \"false\"\n\t\t\t    06: AUS (Consent) UUID # Note that the cookie is called \"ccpaUUID\"\n\t\t\t\t07: AUS consentStatus\n\n\t\t\tFor TCF.v2, an exmaple of array is [\"01:TCF.v2\", \"02:<consent UUID>\"\", \"03:<consent string>\"\"]\n\t\t\tFor CCPA,   an exmaple of array is [\"01:CCPA\", \"04:<consent UUID>\", \"05:true\"]\n\t\t\tFor AUS,    an exmaple of array is [\"01:AUS\", \"06:<consent UUID>\", \"07:consentedAll\"]\n\n\t\t\tNote: it is possible to deprecate CODES, but they cannot the reused.\n\t\t*/\n\n\t\tconst decideConsentCarrierLabels = () => {\n\t\t\tif (consentState.tcfv2) {\n\t\t\t\tconst consentUUID = getCookie({ name: 'consentUUID' }) || '';\n\t\t\t\tconst consentString = consentState.tcfv2.tcString;\n\t\t\t\treturn [\n\t\t\t\t\t'01:TCF.v2',\n\t\t\t\t\t`02:${consentUUID}`,\n\t\t\t\t\t`03:${consentString}`,\n\t\t\t\t];\n\t\t\t}\n\t\t\tif (consentState.ccpa) {\n\t\t\t\tconst ccpaUUID = getCookie({ name: 'ccpaUUID' }) || '';\n\t\t\t\tconst flag = consentState.ccpa.doNotSell ? 'true' : 'false';\n\t\t\t\treturn ['01:CCPA', `04:${ccpaUUID}`, `05:${flag}`];\n\t\t\t}\n\t\t\tif (consentState.aus) {\n\t\t\t\tconst ccpaUUID = getCookie({ name: 'ccpaUUID' }) || '';\n\t\t\t\tconst consentStatus =\n\t\t\t\t\tgetCookie({ name: 'consentStatus' }) || '';\n\t\t\t\treturn ['01:AUS', `06:${ccpaUUID}`, `07:${consentStatus}`];\n\t\t\t}\n\t\t\treturn [];\n\t\t};\n\n\t\tconst componentType: OphanComponentType = 'CONSENT';\n\n\t\tconst action: OphanAction = 'MANAGE_CONSENT';\n\t\tconst event = {\n\t\t\tcomponent: {\n\t\t\t\tcomponentType,\n\t\t\t\tproducts: [],\n\t\t\t\tlabels: decideConsentCarrierLabels(),\n\t\t\t},\n\t\t\taction,\n\t\t};\n\n\t\tsubmitComponentEvent(event);\n\n\t\t// Check if we have consent for GA so that if the reader removes consent for tracking we\n\t\t// remove ga from the page\n\t\tconst consentGivenForGA = getConsentFor(\n\t\t\t'google-analytics',\n\t\t\tconsentState,\n\t\t);\n\t\tif (consentGivenForGA) {\n\t\t\tPromise.all([\n\t\t\t\tloadScript('https://www.google-analytics.com/analytics.js'),\n\t\t\t\tloadScript(window.guardian.gaPath),\n\t\t\t])\n\t\t\t\t.then(() => {\n\t\t\t\t\tlog('dotcom', 'GA script loaded');\n\t\t\t\t})\n\t\t\t\t.catch((e) => console.error(`GA - error: ${e}`));\n\t\t} else {\n\t\t\t// Disable Google Analytics\n\t\t\t// Note. We should never be able to directly set things to the global window object\n\t\t\t// but in this case we want to stub things for testing, so it's ok to ignore this rule\n\t\t\t// @ts-expect-error\n\t\t\twindow.ga = null;\n\t\t}\n\t});\n\n\tdocument.onreadystatechange = () => {\n\t\tif (\n\t\t\tdocument.readyState === 'interactive' ||\n\t\t\tdocument.readyState === 'complete'\n\t\t) {\n\t\t\t// Manually updates the footer DOM because it's not hydrated\n\t\t\tinjectPrivacySettingsLink();\n\t\t}\n\t};\n\n\tcmp.init({\n\t\tpubData: {\n\t\t\tplatform: 'next-gen',\n\t\t\t// If `undefined`, the resulting consent signal cannot be joined to a page view.\n\t\t\tbrowserId: browserId ?? undefined,\n\t\t\tpageViewId,\n\t\t},\n\t\tcountry: (await getLocaleCode()) || undefined,\n\t});\n\tlog('dotcom', 'CMP initialised');\n\n\treturn Promise.resolve();\n};\n\nstartup('bootCmp', null, init);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/dynamicImport/init.ts","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":9,"column":0,"nodeType":null,"endLine":9,"endColumn":65},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[489,492],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[489,492],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":15,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":15,"endColumn":35}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-implied-eval","severity":2,"message":"Implied eval. Do not use the Function constructor to create functions.","line":10,"column":37,"nodeType":"NewExpression","messageId":"noFunctionConstructor","endLine":13,"endColumn":4,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import '../webpackPublicPath';\nimport dynamicImportPolyfill from 'dynamic-import-polyfill';\nimport { startup } from '../startup';\n\n// Provides an import function to use for dynamic imports. **Only works on\n// browsers that cut the mustard (support modules).**\nconst initialiseDynamicImport = () => {\n\ttry {\n\t\t// eslint-disable-next-line @typescript-eslint/no-implied-eval\n\t\twindow.guardianPolyfilledImport = new Function(\n\t\t\t'url',\n\t\t\t`return import(url)`,\n\t\t) as (url: string) => Promise<any>;\n\t} catch (e) {\n\t\tdynamicImportPolyfill.initialize({\n\t\t\timportFunctionName: 'guardianPolyfilledImport', // must be a direct property of the window\n\t\t});\n\t}\n};\n\n// Provides an import function to use for dynamic imports. **Designed for\n// legacy browsers. Dynamic loads a ~4k bundle.**\nconst initialiseDynamicImportLegacy = () => {\n\treturn import(/* webpackChunkName: \"shimport\" */ '@guardian/shimport').then(\n\t\t(shimport) => {\n\t\t\tshimport.initialise(); // note this adds a __shimport__ global\n\t\t\twindow.guardianPolyfilledImport = shimport.load;\n\t\t},\n\t);\n};\n\nconst init = (): Promise<void> => {\n\twindow.guardianPolyfilledImport = (url: string) =>\n\t\tPromise.reject(\n\t\t\tnew Error(`import not polyfilled; attempted import(${url})`),\n\t\t);\n\n\tif (window.guardian.mustardCut) {\n\t\treturn Promise.resolve(initialiseDynamicImport());\n\t}\n\n\treturn initialiseDynamicImportLegacy();\n};\n\nstartup('dynamicImport', null, init);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/embedIframe/embedIframe.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/embedIframe/init.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/ga/ga.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[830,833],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[830,833],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":34,"column":18,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":34,"endColumn":29},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":37,"column":14,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":37,"endColumn":23},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":58,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":58,"endColumn":9},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":103,"column":40,"nodeType":"Literal","messageId":"alwaysTruthy","endLine":103,"endColumn":46},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":129,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":131,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4601,4604],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4601,4604],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":130,"column":21,"nodeType":"Punctuator","messageId":"preferNullish","endLine":130,"endColumn":23,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4641,4643],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":179,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":179,"endColumn":8},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":199,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":199,"endColumn":8},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":212,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":218,"endColumn":6},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":221,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":221,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getCookie } from '@guardian/libs';\nimport { getCLS, getFID, getLCP } from 'web-vitals';\n\ninterface TrackerConfig {\n\tname: string;\n\tid: string;\n\tsampleRate: number;\n\tsiteSpeedSampleRate: number;\n}\n\nconst tracker: TrackerConfig = {\n\tname: 'allEditorialPropertyTracker',\n\tid: 'UA-78705427-1',\n\tsampleRate: 100,\n\tsiteSpeedSampleRate: 1, // TODO Should be set to 0.1 when rolling out to wider audience\n};\nconst set = `${tracker.name}.set`;\nconst send = `${tracker.name}.send`;\n\nconst getQueryParam = (\n\tkey: string,\n\tqueryString: string,\n): string | undefined => {\n\tconst params = queryString.substring(1).split('&');\n\tconst pairs = params.map((x) => x.split('='));\n\n\treturn pairs\n\t\t.filter((xs) => xs.length === 2 && xs[0] === key)\n\t\t.map((xs) => xs[1])[0];\n};\n\nexport const init = (): void => {\n\tconst coldQueue = (...args: any[]) => {\n\t\t(window.ga.q = window.ga.q || []).push(args);\n\t};\n\n\twindow.ga = window.ga || (coldQueue as UniversalAnalytics.ga);\n\n\twindow.GoogleAnalyticsObject = 'ga';\n\twindow.ga.l = +new Date();\n\n\twindow.ga('create', tracker.id, 'auto', tracker.name, {\n\t\tsampleRate: tracker.sampleRate,\n\t\tsiteSpeedSampleRate: tracker.siteSpeedSampleRate,\n\t});\n};\n\ntype CoreVitalsArgsType = {\n\tname: string;\n\tdelta: number;\n\tid: string;\n};\n\n// https://www.npmjs.com/package/web-vitals#using-analyticsjs\nconst sendCoreVital = ({ name, delta, id }: CoreVitalsArgsType): void => {\n\tconst { ga } = window;\n\n\tif (!ga) {\n\t\treturn;\n\t}\n\n\tga(send, 'event', {\n\t\teventCategory: 'Web Vitals',\n\t\teventAction: name,\n\t\t// Google Analytics metrics must be integers, so the value is rounded.\n\t\t// For CLS the value is first multiplied by 1000 for greater precision\n\t\t// (note: increase the multiplier for greater precision if needed).\n\t\teventValue: Math.round(name === 'CLS' ? delta * 1000 : delta),\n\t\t// The `id` value will be unique to the current page load. When sending\n\t\t// multiple values from the same page (e.g. for CLS), Google Analytics can\n\t\t// compute a total by grouping on this ID (note: requires `eventLabel` to\n\t\t// be a dimension in your report).\n\t\teventLabel: id,\n\t\t// Use a non-interaction event to avoid affecting bounce rate.\n\t\tnonInteraction: true,\n\t});\n};\n\nexport const sendPageView = (): void => {\n\tconst { GAData } = window.guardian;\n\tconst userCookie = getCookie({ name: 'GU_U', shouldMemoize: true });\n\tconst { ga } = window;\n\n\tga(set, 'forceSSL', true);\n\tga(set, 'title', GAData.webTitle);\n\tga(set, 'anonymizeIp', true);\n\t/** *************************************************************************************\n\t * Custom dimensions common to all platforms across the whole Guardian estate          *\n\t ************************************************************************************** */\n\tga(set, 'dimension3', 'theguardian.com'); /* Platform */\n\t/** *************************************************************************************\n\t * Custom dimensions for 'editorial' platforms (this site, the mobile apps, etc.)      *\n\t * Some of these will be undefined for non-content pages, but that's fine.             *\n\t ************************************************************************************** */\n\tga(set, 'dimension4', GAData.section);\n\tga(set, 'dimension5', GAData.contentType);\n\tga(set, 'dimension6', GAData.commissioningDesks);\n\tga(set, 'dimension7', GAData.contentId);\n\tga(set, 'dimension8', GAData.authorIds);\n\tga(set, 'dimension9', GAData.keywordIds);\n\tga(set, 'dimension10', GAData.toneIds);\n\tga(set, 'dimension11', GAData.seriesId);\n\tga(set, 'dimension16', (userCookie && 'true') || 'false');\n\tga(set, 'dimension21', getQueryParam('INTCMP', window.location.search)); // internal campaign code\n\tga(set, 'dimension22', getQueryParam('CMP_BUNIT', window.location.search)); // campaign business unit\n\tga(set, 'dimension23', getQueryParam('CMP_TU', window.location.search)); // campaign team\n\tga(set, 'dimension26', GAData.isHosted);\n\tga(set, 'dimension27', navigator.userAgent); // I bet you a pint\n\tga(set, 'dimension29', window.location.href); // That both of these are already tracked.\n\tga(set, 'dimension30', GAData.edition);\n\n\t// TODO: sponsor logos\n\t// ga(set, 'dimension31', GAData.sponsorLogos);\n\n\t// TODO: commercial branding\n\t// ga(set, 'dimension42', 'GAData.brandingType');\n\n\tga(set, 'dimension43', 'dotcom-rendering');\n\tga(set, 'dimension50', GAData.pillar);\n\n\tif (window.location.hash === '#fbLogin') {\n\t\tga(set, 'referrer', null);\n\t\twindow.location.hash = '';\n\t}\n\n\ttry {\n\t\tconst NG_STORAGE_KEY = 'gu.analytics.referrerVars';\n\t\tconst referrerVarsData = window.sessionStorage.getItem(NG_STORAGE_KEY);\n\t\tconst referrerVars: { [key: string]: any } = JSON.parse(\n\t\t\treferrerVarsData || '{}',\n\t\t);\n\t\tif (referrerVars.value) {\n\t\t\tconst value = referrerVars.value as {\n\t\t\t\ttime: number;\n\t\t\t\ttag: string;\n\t\t\t\tpath: string;\n\t\t\t};\n\t\t\tconst d = new Date().getTime();\n\t\t\tif (d - value.time < 60 * 1000) {\n\t\t\t\t// One minute\n\t\t\t\tga(send, 'event', 'Click', 'Internal', value.tag, {\n\t\t\t\t\tnonInteraction: true, // to avoid affecting bounce rate\n\t\t\t\t\tdimension12: value.path,\n\t\t\t\t});\n\t\t\t}\n\t\t\twindow.sessionStorage.removeItem(NG_STORAGE_KEY);\n\t\t}\n\t} catch (e) {\n\t\t// do nothing\n\t}\n\n\tga(send, 'pageview');\n\n\t// //////////////////////\n\t// Core Vitals Reporting\n\t// Supported only in Chromium but npm module tested in all our supported browsers\n\t// https://www.npmjs.com/package/web-vitals#browser-support\n\n\t// Only send for roughly 5% of users\n\t// We want all or nothing on the corevitals so that they can be easily compared for a single pageview\n\t// so we do this here rather than in the sendCoreVital function\n\tconst randomPerc = Math.random() * 100;\n\tconst coreVitalsSampleRate = 5;\n\n\tif (coreVitalsSampleRate >= randomPerc) {\n\t\t// CLS and LCP are captured when the page lifecycle changes to 'hidden'.\n\t\t// https://developers.google.com/web/updates/2018/07/page-lifecycle-api#advice-hidden\n\t\tgetCLS(sendCoreVital); // https://github.com/GoogleChrome/web-vitals#getcls (This is actually DCLS, as doesn't track CLS in iframes, see https://github.com/WICG/layout-instability#cumulative-scores)\n\t\tgetLCP(sendCoreVital); // https://github.com/GoogleChrome/web-vitals#getlcp\n\n\t\t// FID is captured when a user interacts with the page\n\t\tgetFID(sendCoreVital); // https://github.com/GoogleChrome/web-vitals#getfid\n\t}\n};\n\nexport const trackNonClickInteraction = (actionName: string): void => {\n\tconst { ga } = window;\n\n\tif (ga) {\n\t\tga(send, 'event', 'Interaction', actionName, {\n\t\t\t/**\n\t\t\t * set nonInteraction to avoid affecting bounce rate\n\t\t\t * https://support.google.com/analytics/answer/1033068#NonInteractionEvents\n\t\t\t */\n\t\t\tnonInteraction: true,\n\t\t});\n\t} else {\n\t\tconst error = new Error(\"window.ga doesn't exist\");\n\t\twindow.guardian.modules.sentry.reportError(\n\t\t\terror,\n\t\t\t'trackNonClickInteraction',\n\t\t);\n\t}\n};\n\nexport const trackSponsorLogoLinkClick = (sponsorName: string): void => {\n\tconst { ga } = window;\n\n\tif (ga) {\n\t\tga(send, 'event', 'click', 'sponsor logo', sponsorName, {\n\t\t\tnonInteraction: true,\n\t\t});\n\t} else {\n\t\tconst error = new Error(\"window.ga doesn't exist\");\n\t\twindow.guardian.modules.sentry.reportError(\n\t\t\terror,\n\t\t\t'trackSponsorLogoLinkClick',\n\t\t);\n\t}\n};\n\nexport const trackVideoInteraction = ({\n\ttrackingEvent,\n\telementId,\n}: {\n\ttrackingEvent: string;\n\telementId: string;\n}) => {\n\tconst { ga } = window;\n\n\tif (!ga) {\n\t\treturn;\n\t}\n\n\tga(send, 'event', {\n\t\teventCategory: 'media',\n\t\teventAction: 'video content',\n\t\teventLabel: `${trackingEvent}:${elementId}`,\n\t\tdimension19: elementId,\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/ga/init.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/initDiscussion/init.ts","messages":[{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":37,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":37,"endColumn":46,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1032,1072],"text":"hashLink?.includes('comment')"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import '../webpackPublicPath';\nimport { doHydration } from '../islands/doHydration';\nimport { getProps } from '../islands/getProps';\nimport { startup } from '../startup';\n\nfunction forceHydration() {\n\ttry {\n\t\tconst name = 'DiscussionContainer';\n\n\t\t// Select the Discussion island element\n\t\tconst guElement = document.querySelector<HTMLElement>(\n\t\t\t`gu-island[name=${name}]`,\n\t\t);\n\t\tif (!guElement) return;\n\n\t\t// Read the props from where they have been serialised in the dom using an Island\n\t\tconst props = getProps(guElement);\n\n\t\t// Now that we have the props as an object, tell Discussion we want it to expand itself\n\t\tprops.expanded = true;\n\n\t\t// Force hydration\n\t\tdoHydration(name, props, guElement);\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n}\n\nconst init = (): Promise<void> => {\n\t/**\n\t * If we have either a #comment-123456 permalink or the #comments link in the url\n\t * then we want to hydrate and expand the discussion without waiting for the\n\t * reader to scroll down to it\n\t *\n\t */\n\tconst hashLink = window.location.hash;\n\tif (hashLink && hashLink.includes('comment')) forceHydration();\n\n\treturn Promise.resolve();\n};\n\nstartup('initDiscussion', null, init);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/initPerf.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":12,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":12,"endColumn":11},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":12,"column":16,"nodeType":"MemberExpression","messageId":"alwaysFalsy","endLine":12,"endColumn":37},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":33,"column":5,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":33,"endColumn":19},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":33,"column":5,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":35,"endColumn":31,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[801,874],"text":"measureEntries?.[0]?.duration"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { log } from '@guardian/libs';\n\nexport const initPerf = (\n\tname: string,\n): { start: () => void; end: () => number; clear: () => void } => {\n\ttype TimeTakenInMilliseconds = number;\n\n\tconst perf = window.performance;\n\tconst startKey = `${name}-start`;\n\tconst endKey = `${name}-end`;\n\n\tif (!perf || !perf.getEntriesByName) {\n\t\t// Return noops if window.performance or the required functions don't exist\n\t\treturn {\n\t\t\tstart: () => {},\n\t\t\tend: () => 0,\n\t\t\tclear: () => {},\n\t\t};\n\t}\n\n\tconst start = () => {\n\t\tperf.mark(startKey);\n\t};\n\n\tconst end = (): TimeTakenInMilliseconds => {\n\t\tperf.mark(endKey);\n\t\tperf.measure(name, startKey, endKey);\n\n\t\tlog('dotcom', JSON.stringify(perf.getEntriesByName(name)));\n\n\t\tconst measureEntries = perf.getEntriesByName(name, 'measure');\n\t\tconst timeTakenFloat =\n\t\t\t(measureEntries &&\n\t\t\t\tmeasureEntries[0] &&\n\t\t\t\tmeasureEntries[0].duration) ||\n\t\t\t0;\n\t\tconst timeTakenInt = Math.round(timeTakenFloat);\n\n\t\treturn timeTakenInt;\n\t};\n\n\tconst clear = () => {\n\t\tperf.clearMarks(startKey);\n\t\tperf.clearMarks(endKey);\n\t\tperf.clearMeasures(name);\n\t};\n\n\treturn {\n\t\tstart,\n\t\tend,\n\t\tclear,\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/islands/doHydration.ts","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":1,"column":0,"nodeType":null,"endLine":1,"endColumn":64},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":78},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Argument 'data' should be typed with a non-any type.","line":17,"column":43,"nodeType":"Identifier","messageId":"anyTypedArg","endLine":17,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[712,715],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[712,715],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":36,"column":14,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":36,"endColumn":26},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `(HTMLAttributes<EventTarget> & SVGAttributes<SVGElement> & Record<string, any>) | null`.","line":36,"column":28,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":36,"endColumn":32},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":39,"column":15,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":39,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `(HTMLAttributes<EventTarget> & SVGAttributes<SVGElement> & Record<string, any>) | null`.","line":39,"column":29,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":39,"endColumn":33},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":46,"column":16,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":46,"endColumn":38},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":47,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":47,"endColumn":18}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [name] on an `any` value.","line":36,"column":14,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":36,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [name] on an `any` value.","line":39,"column":15,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":39,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .message on an `any` value.","line":46,"column":16,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":46,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-unsafe-member-access */\nimport { log } from '@guardian/libs';\nimport { h, hydrate, render } from 'preact';\nimport { initPerf } from '../initPerf';\n\n/**\n * This function dynamically imports and then hydrates a specific component in\n * a specific part of the page\n *\n * If the content being hydrated is not present in the dom then React renders\n * it. This is how portals (non server side rendered content) work\n *\n * @param name The name of the component we want to hydrate\n * @param data The deserialised props we want to use for hydration\n * @param element The location on the DOM where the component to hydrate exists\n */\nexport const doHydration = (name: string, data: any, element: HTMLElement) => {\n\t// If this function has already been run for an element then don't try to\n\t// run it a second time\n\tconst alreadyHydrated = element.dataset.guReady;\n\tif (alreadyHydrated) return;\n\n\tconst { start, end } = initPerf(`hydrate-${name}`);\n\tstart();\n\timport(\n\t\t/* webpackInclude: /\\.importable\\.tsx$/ */\n\t\t/* webpackChunkName: \"[request]\" */\n\t\t`../../components/${name}.importable`\n\t)\n\t\t.then((module) => {\n\t\t\tconst clientOnly = element.getAttribute('clientOnly') === 'true';\n\n\t\t\tif (clientOnly) {\n\t\t\t\telement.querySelector('[data-name=\"placeholder\"]')?.remove();\n\t\t\t\tlog('dotcom', `Rendering island ${name}`);\n\t\t\t\trender(h(module[name], data), element);\n\t\t\t} else {\n\t\t\t\tlog('dotcom', `Hydrating island ${name}`);\n\t\t\t\thydrate(h(module[name], data), element);\n\t\t\t}\n\n\t\t\telement.setAttribute('data-gu-ready', 'true');\n\t\t\tend();\n\t\t})\n\t\t.catch((error) => {\n\t\t\tif (name && error.message.includes(name)) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t`🚨 Error importing ${name}. Components must live in the root of /components and follow the [MyComponent].importable.tsx naming convention 🚨`,\n\t\t\t\t);\n\t\t\t}\n\t\t\tthrow error;\n\t\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/islands/getName.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":12,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":12,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * getName takes the given html element and returns its name attribute\n *\n * We expect the element to always be a `gu-*` custom element\n *\n * @param marker : The html element that we want to read the name attribute from;\n * @returns\n */\nexport const getName = (marker: HTMLElement): string | null => {\n\tconst name = marker.getAttribute('name');\n\tif (!name) {\n\t\tconsole.error(\n\t\t\t`🚨 Error - no name attribute supplied. We need name to know what component to import 🚨`,\n\t\t);\n\t}\n\treturn name;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/islands/getProps.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":13,"column":3,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":13,"endColumn":47},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":15,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":15,"endColumn":16},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | null\" of template literal expression.","line":16,"column":58,"nodeType":"Identifier","messageId":"invalidType","endLine":16,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * getProps takes the given html element and returns its props attibute\n *\n * We expect the element to always be a `gu-*` custom element\n *\n * @param marker : The html element that we want to read the props attribute from;\n * @returns\n */\nexport const getProps = (marker: HTMLElement): { [key: string]: unknown } => {\n\tconst serialised = marker.getAttribute('props');\n\tlet props: { [key: string]: unknown };\n\ttry {\n\t\tprops = serialised && JSON.parse(serialised);\n\t} catch (error: unknown) {\n\t\tconsole.error(\n\t\t\t`🚨 Error parsing props. Is this data serialisable? ${serialised} 🚨`,\n\t\t);\n\t\tthrow error;\n\t}\n\treturn props;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/islands/init.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/islands/initHydration.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":7,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":7,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { doHydration } from './doHydration';\nimport { getName } from './getName';\nimport { getProps } from './getProps';\nimport { whenIdle } from './whenIdle';\nimport { whenVisible } from './whenVisible';\n\nexport const initHydration = (elements: NodeListOf<Element>) => {\n\t/**\n\t * Partial Hydration / React Islands\n\t *\n\t * The code here looks for parts of the dom that have been marked using the `gu-island`\n\t * marker, hydrating/rendering each one using the following properties:\n\t *\n\t * deferUntil - Used to optionally defer execution\n\t * name - The name of the component. Used to dynamically import the code\n\t * props - The data for the component that has been serialised in the dom\n\t * element - The `gu-island` custom element which is wrapping the content\n\t */\n\telements.forEach((element) => {\n\t\tif (element instanceof HTMLElement) {\n\t\t\tconst name = getName(element);\n\t\t\tconst props = getProps(element);\n\n\t\t\tif (!name) return;\n\n\t\t\tconst deferUntil = element.getAttribute('deferuntil');\n\t\t\tswitch (deferUntil) {\n\t\t\t\tcase 'idle': {\n\t\t\t\t\twhenIdle(() => {\n\t\t\t\t\t\tdoHydration(name, props, element);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'visible': {\n\t\t\t\t\twhenVisible(element, () => {\n\t\t\t\t\t\tdoHydration(name, props, element);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tdoHydration(name, props, element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/islands/whenIdle.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":6,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":6,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * whenIdle exectures the given callback when the browser is 'idle'\n *\n * @param callback Fired when requestIdleCallback runs. If requestIdleCallback is not available after 300ms\n */\nexport const whenIdle = (callback: () => void) => {\n\tif ('requestIdleCallback' in window) {\n\t\twindow.requestIdleCallback(callback, { timeout: 500 });\n\t} else {\n\t\tsetTimeout(callback, 300);\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/islands/whenVisible.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":75}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Use this function to delay execution of something until an element is visible\n * in the viewport\n *\n * @param element : The html element that we want to observe;\n * @param callback : This is fired when the element is visible in the viewport\n */\nexport const whenVisible = (element: HTMLElement, callback: () => void) => {\n\tif ('IntersectionObserver' in window) {\n\t\tconst io = new IntersectionObserver(([entry]) => {\n\t\t\tif (!entry.isIntersecting) return;\n\t\t\t// Disconnect this IntersectionObserver once seen\n\t\t\tio.disconnect();\n\t\t\tcallback();\n\t\t});\n\n\t\tio.observe(element);\n\t} else {\n\t\t// IntersectionObserver is not supported so failover to calling back at the end of the call stack\n\t\tsetTimeout(() => callback(), 0);\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/newsletterEmbedIframe/init.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":16,"column":7,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":16,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":16,"column":7,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":16,"endColumn":37,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[558,588],"text":"iframe?.contentWindow"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":38,"column":41,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":38,"endColumn":51},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":57,"column":0,"nodeType":null,"endLine":57,"endColumn":41}],"suppressedMessages":[{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":58,"column":16,"nodeType":"BlockStatement","messageId":"unexpected","endLine":58,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import '../webpackPublicPath';\nimport { isObject } from '@guardian/libs';\nimport { startup } from '../startup';\n\n// No trailing slash!\nconst allowedOrigins = ['https://www.theguardian.com'];\nconst init = (): Promise<void> => {\n\tconst allIframes: HTMLIFrameElement[] = [].slice.call(\n\t\tdocument.querySelectorAll('.email-sub__iframe'),\n\t);\n\n\t// Tell the iframes to resize once this script is loaded\n\t// Otherwise, earlier resize events might be missed\n\t// So we don't have to load this script as a priority on each load\n\tallIframes.forEach((iframe) => {\n\t\tif (iframe && iframe.contentWindow)\n\t\t\tiframe.contentWindow.postMessage(\n\t\t\t\t'resize',\n\t\t\t\t'https://www.theguardian.com',\n\t\t\t);\n\t});\n\n\twindow.addEventListener('message', (event) => {\n\t\tif (!allowedOrigins.includes(event.origin)) return;\n\n\t\tconst iframes: HTMLIFrameElement[] = allIframes.filter((i) => {\n\t\t\ttry {\n\t\t\t\tif (i.contentWindow !== null && event.source !== null) {\n\t\t\t\t\treturn i.contentWindow === event.source;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (iframes.length !== 0) {\n\t\t\ttry {\n\t\t\t\tconst message: unknown = JSON.parse(event.data);\n\t\t\t\tif (!isObject(message) || typeof message.type !== 'string')\n\t\t\t\t\treturn;\n\n\t\t\t\tswitch (message.type) {\n\t\t\t\t\tcase 'set-height':\n\t\t\t\t\t\tiframes.forEach((iframe) => {\n\t\t\t\t\t\t\tif (typeof message.value === 'number') {\n\t\t\t\t\t\t\t\tiframe.height = `${message.value}`;\n\t\t\t\t\t\t\t} else if (typeof message.value === 'string') {\n\t\t\t\t\t\t\t\tconst value = parseInt(message.value, 10);\n\t\t\t\t\t\t\t\tif (Number.isInteger(value)) {\n\t\t\t\t\t\t\t\t\tiframe.height = `${value}`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line no-empty\n\t\t\t} catch (e) {}\n\t\t}\n\t});\n\n\treturn Promise.resolve();\n};\n\nstartup('newsletterEmbedIframe', null, init);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/ophan/init.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/ophan/ophan.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/ophan/ophan.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":14,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[278,281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[278,281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":23,"column":2,"nodeType":"MemberExpression","messageId":"unexpected","endLine":23,"endColumn":14},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":67,"column":28,"nodeType":"Punctuator","messageId":"preferNullish","endLine":67,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1569,1571],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":94,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":94,"endColumn":45},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":98,"column":6,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":98,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":105,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":39},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":108,"column":3,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":108,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type {\n\tOphanABEvent,\n\tOphanABPayload,\n\tOphanABTestMeta,\n\tOphanAction,\n\tOphanComponent,\n\tOphanComponentEvent,\n\tOphanComponentType,\n\tOphanProduct,\n} from '@guardian/libs';\nimport { log } from '@guardian/libs';\n\nexport type OphanRecordFunction = (\n\tevent: { [key: string]: any },\n\tcallback?: () => void,\n) => void;\n\nexport const getOphanRecordFunction = (): OphanRecordFunction => {\n\tconst record = window.guardian.ophan?.record;\n\n\tif (record) return record;\n\n\tconsole.warn('window.guardian.ophan.record is not available');\n\treturn () => {};\n};\n\nexport const record: OphanRecordFunction = (event) => {\n\tif (window.guardian.ophan?.record) {\n\t\twindow.guardian.ophan.record(event, () =>\n\t\t\tlog('dotcom', '🧿 Ophan event recorded:', event),\n\t\t);\n\t} else {\n\t\tthrow new Error(\"window.guardian.ophan.record doesn't exist\");\n\t}\n};\n\nexport const submitComponentEvent = (\n\tcomponentEvent: OphanComponentEvent,\n\tophanRecord: OphanRecordFunction = record, // TODO - migrate uses and make this mandatory\n): void => {\n\tophanRecord({ componentEvent });\n};\n\nexport interface SdcTestMeta extends OphanABTestMeta {\n\tlabels?: string[];\n}\n\nexport const sendOphanComponentEvent = (\n\taction: OphanAction,\n\ttestMeta: SdcTestMeta,\n\tophanRecord: OphanRecordFunction = record, // TODO - migrate uses and make this mandatory\n): void => {\n\tconst {\n\t\tabTestName,\n\t\tabTestVariant,\n\t\tcomponentType,\n\t\tproducts = [],\n\t\tcampaignCode,\n\t\tlabels,\n\t} = testMeta;\n\n\tconst componentEvent: OphanComponentEvent = {\n\t\tcomponent: {\n\t\t\tcomponentType,\n\t\t\tproducts,\n\t\t\tcampaignCode,\n\t\t\tid: testMeta.campaignId || testMeta.campaignCode,\n\t\t\tlabels,\n\t\t},\n\t\tabTest: {\n\t\t\tname: abTestName,\n\t\t\tvariant: abTestVariant,\n\t\t},\n\t\taction,\n\t};\n\n\tsubmitComponentEvent(componentEvent, ophanRecord);\n};\n\nexport const abTestPayload = (tests: {\n\t[key: string]: string;\n}): OphanABPayload => {\n\tconst records: { [key: string]: OphanABEvent } = {};\n\tObject.keys(tests).forEach((testName) => {\n\t\trecords[`ab${testName}`] = {\n\t\t\tvariantName: tests[testName],\n\t\t\tcomplete: false,\n\t\t};\n\t});\n\n\treturn { abTestRegister: records };\n};\n\nexport const sendOphanPlatformRecord = () => {\n\trecord({ experiences: 'dotcom-rendering' });\n\n\t// Record server-side AB test variants (i.e. control or variant)\n\tif (window.guardian.config.tests) {\n\t\tconst { tests } = window.guardian.config;\n\n\t\trecord(abTestPayload(tests));\n\t}\n};\n\nexport const recordPerformance = () => {\n\tconst { performance: performanceAPI } = window;\n\tconst supportsPerformanceProperties =\n\t\tperformanceAPI &&\n\t\t'navigation' in performanceAPI &&\n\t\t'timing' in performanceAPI;\n\n\tif (!supportsPerformanceProperties) {\n\t\treturn;\n\t}\n\n\tconst { timing } = performanceAPI;\n\n\tconst performance = {\n\t\tdns: timing.domainLookupEnd - timing.domainLookupStart,\n\t\tconnection: timing.connectEnd - timing.connectStart,\n\t\tfirstByte: timing.responseStart - timing.connectEnd,\n\t\tlastByte: timing.responseEnd - timing.responseStart,\n\t\tdomContentLoadedEvent:\n\t\t\ttiming.domContentLoadedEventStart - timing.responseEnd,\n\t\tloadEvent: timing.loadEventStart - timing.domContentLoadedEventStart,\n\t\tnavType: performanceAPI.navigation.type,\n\t\tredirectCount: performanceAPI.navigation.redirectCount,\n\t};\n\n\trecord({\n\t\tperformance,\n\t});\n};\n\nexport {\n\tOphanABEvent,\n\tOphanABPayload,\n\tOphanAction,\n\tOphanComponent,\n\tOphanComponentEvent,\n\tOphanComponentType,\n\tOphanProduct,\n\tOphanABTestMeta,\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/relativeTime/init.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/relativeTime/updateTimeElements.test.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":7,"column":15,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":7,"endColumn":57},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":25,"column":102,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":25,"endColumn":104},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":48,"column":55,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":48,"endColumn":57},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":56,"column":76,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":56,"endColumn":78},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":73,"column":51,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":73,"endColumn":53},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":81,"column":52,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":81,"endColumn":54}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render, screen } from '@testing-library/react';\nimport MockDate from 'mockdate';\nimport { updateTimeElements } from './updateTimeElements';\n\nfunction setup(html: string) {\n\tfunction TestComponent() {\n\t\treturn <div dangerouslySetInnerHTML={{ __html: html }} />;\n\t}\n\treturn render(<TestComponent />);\n}\n\nconst now = new Date().valueOf();\nconst nowIso = new Date(now).toISOString();\n\nconst oneMinute = 60 * 1000 * 1;\nconst fifteenSeconds = 1000 * 15;\nconst twentySeconds = 20 * 1000;\nconst thirtySeconds = 30 * 1000;\n\ndescribe('updateTimeElements', () => {\n\tbeforeEach(() => {\n\t\tMockDate.reset();\n\t});\n\n\tit('only updates time elements that have the data-relativeformat and datetime attributes', async () => {\n\t\tconst html = `\n\t\t\t<div>\n\t\t\t\t<time data-testid=\"1\" datetime=\"${nowIso}\">I am missing data-relativeformat</time>\n\t\t\t\t<div data-testid=\"2\" datetime=\"${nowIso}\" data-relativeformat=\"med\">I am a div, not time</div>\n\t\t\t\t<time data-testid=\"3\" data-relativeformat=\"med\">I am missing datatime</time>\n\t\t\t\t<time data-testid=\"4\" datetime=\"${nowIso}\" data-relativeformat=\"med\">Original value</time>\n\t\t\t</div>`;\n\t\tsetup(html);\n\t\tMockDate.set(now + fifteenSeconds);\n\t\tupdateTimeElements();\n\t\texpect(screen.getByTestId('1')).toHaveTextContent(\n\t\t\t'I am missing data-relativeformat',\n\t\t);\n\t\texpect(screen.getByTestId('2')).toHaveTextContent(\n\t\t\t'I am a div, not time',\n\t\t);\n\t\texpect(screen.getByTestId('3')).toHaveTextContent(\n\t\t\t'I am missing datatime',\n\t\t);\n\t\texpect(screen.getByTestId('4')).toHaveTextContent('15s');\n\t});\n\n\tit('fails gracefully if format is invalid', async () => {\n\t\tconst html = `<time data-testid=\"1\" datetime=\"${nowIso}\" data-relativeformat=\"INVALID\">Original value</time>`;\n\t\tsetup(html);\n\t\tMockDate.set(now + fifteenSeconds);\n\t\tupdateTimeElements();\n\t\texpect(screen.getByTestId('1')).toHaveTextContent('Original value');\n\t});\n\n\tit('updates the text shown in time elements as time progresses', async () => {\n\t\tconst html = `<time data-testid=\"1\" datetime=\"${nowIso}\" data-relativeformat=\"med\">now</time>`;\n\t\tsetup(html);\n\t\tMockDate.set(now);\n\t\tupdateTimeElements();\n\t\texpect(screen.getByTestId('1')).toHaveTextContent('now');\n\t\tMockDate.set(now + fifteenSeconds);\n\t\tupdateTimeElements();\n\t\texpect(screen.getByTestId('1')).toHaveTextContent('15s');\n\t\tMockDate.set(now + thirtySeconds);\n\t\tupdateTimeElements();\n\t\texpect(screen.getByTestId('1')).toHaveTextContent('30s');\n\t\tMockDate.set(now + oneMinute);\n\t\tupdateTimeElements();\n\t\texpect(screen.getByTestId('1')).toHaveTextContent('1m');\n\t});\n\n\tit('respects if long format is passed', async () => {\n\t\tconst html = `<time data-testid=\"1\" datetime=\"${nowIso}\" data-relativeformat=\"long\">1 second ago</time>`;\n\t\tsetup(html);\n\t\tMockDate.set(now + fifteenSeconds);\n\t\tupdateTimeElements();\n\t\texpect(screen.getByTestId('1')).toHaveTextContent('15 seconds ago');\n\t});\n\n\tit('respects if short format is passed', async () => {\n\t\tconst html = `<time data-testid=\"1\" datetime=\"${nowIso}\" data-relativeformat=\"short\">now</time>`;\n\t\tsetup(html);\n\t\tMockDate.set(now + twentySeconds);\n\t\tupdateTimeElements();\n\t\texpect(screen.getByTestId('1')).toHaveTextContent('20s');\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/relativeTime/updateTimeElements.ts","messages":[{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":11,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":23,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { timeAgo } from '@guardian/libs';\n\nexport const updateTimeElement = (element: Element): void => {\n\tif (element instanceof HTMLElement) {\n\t\t// Get required values\n\t\tconst { relativeformat: relativeFormat } = element.dataset;\n\t\tconst absoluteTime = element.getAttribute('datetime');\n\t\tif (!absoluteTime || !relativeFormat) return;\n\n\t\tlet newTime;\n\t\tswitch (relativeFormat) {\n\t\t\tcase 'short':\n\t\t\tcase 'med':\n\t\t\t\tnewTime = timeAgo(new Date(absoluteTime).getTime(), {\n\t\t\t\t\tverbose: false,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'long':\n\t\t\t\tnewTime = timeAgo(new Date(absoluteTime).getTime(), {\n\t\t\t\t\tverbose: true,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\n\t\tconst oldTime = element.innerText;\n\t\tif (newTime && newTime !== oldTime) element.innerHTML = newTime;\n\t}\n};\n\nexport const updateTimeElements = (): void => {\n\tdocument\n\t\t.querySelectorAll('time[data-relativeformat]')\n\t\t.forEach(updateTimeElement);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/sentryLoader/init.ts","messages":[{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function 'init' has no 'await' expression.","line":5,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":5,"endColumn":40},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":17,"column":4,"nodeType":"MemberExpression","messageId":"unexpected","endLine":17,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2803,2806],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2803,2806],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error | undefined`.","line":72,"column":26,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":72,"endColumn":38},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":75,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":75,"endColumn":18},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":75,"column":44,"nodeType":"Identifier","messageId":"invalidType","endLine":75,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import '../webpackPublicPath';\nimport { isAdBlockInUse } from '@guardian/commercial-core';\nimport { startup } from '../startup';\n\nconst init = async (): Promise<void> => {\n\t// Sentry lets you configure sampleRate to reduce the volume of events sent\n\t// but this filter only happens _after_ the library is loaded. The Guardian\n\t// measures page views in the billions so we only want to log 1% of errors that\n\t// happen but if we used sampleRate to do this we'd be needlessly downloading\n\t// Sentry 99% of the time. So instead we just do some basic math here\n\t// and use that to prevent the Sentry script from ever loading.\n\tconst randomCentile = Math.floor(Math.random() * 100) + 1; // A number between 1 - 100\n\tif (randomCentile <= 99) {\n\t\t// 99% of the time we don't want to remotely log errors with Sentry and so\n\t\t// we just console them out\n\t\twindow.guardian.modules.sentry.reportError = (error) => {\n\t\t\tconsole.error(error);\n\t\t};\n\t\treturn; // Don't initialise Sentry\n\t}\n\t// The other 1% of the time (randomCentile === 100) we continue\n\ttry {\n\t\t// Downloading and initiliasing Sentry is asynchronous so we need a way\n\t\t// to ensure injection only happens once and to capture any other errors that\n\t\t// might happen while this script is loading\n\t\tlet injected = false;\n\t\tconst queue: Error[] = [];\n\n\t\t// Function that gets called when an error happens before Sentry is ready\n\t\tconst injectSentry = async (error?: Error) => {\n\t\t\t// Remember this error for later\n\t\t\tif (error) queue.push(error);\n\n\t\t\t// Only inject once\n\t\t\tif (injected) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tinjected = true;\n\n\t\t\t// Make this call blocking. We are queing errors while we wait for this code to run\n\t\t\t// so we won't miss any and by waiting here we ensure we will never make calls we\n\t\t\t// expect to be blocked\n\t\t\tconst adBlockInUse: boolean = await isAdBlockInUse();\n\t\t\tif (adBlockInUse) {\n\t\t\t\t// Ad Blockers prevent calls to Sentry from working so don't try to load the lib\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Load sentry.ts\n\t\t\tconst { reportError } = await import(\n\t\t\t\t/* webpackChunkName: \"sentry\" */ './sentry'\n\t\t\t);\n\n\t\t\t// Sentry takes over control of the window.onerror and\n\t\t\t// window.onunhandledrejection listeners but we need to\n\t\t\t// manually redefine our own custom error reporting function\n\t\t\twindow.guardian.modules.sentry.reportError = reportError;\n\n\t\t\t// Now that we have the real reportError function available,\n\t\t\t// send any queued errors\n\t\t\twhile (queue.length) {\n\t\t\t\tconst queuedError = queue.shift();\n\t\t\t\tif (queuedError) reportError(queuedError);\n\t\t\t}\n\t\t};\n\n\t\t// This is how we lazy load Sentry. We setup custom functions and\n\t\t// listeners to inject Sentry when an error happens\n\t\twindow.onerror = (message, url, line, column, error) =>\n\t\t\tinjectSentry(error);\n\t\twindow.onunhandledrejection = (event: undefined | { reason?: any }) =>\n\t\t\tevent && injectSentry(event.reason);\n\t\twindow.guardian.modules.sentry.reportError = (error) => {\n\t\t\tinjectSentry(error).catch((e) =>\n\t\t\t\tconsole.error(`injectSentry - error: ${e}`),\n\t\t\t);\n\t\t};\n\t} catch {\n\t\t// We failed to setup Sentry :(\n\t}\n};\n\nstartup('sentryLoader', null, init);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/sentryLoader/sentry.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":40,"column":15,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":40,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as Sentry from '@sentry/browser';\nimport { CaptureConsole } from '@sentry/integrations';\n\n// Only send errors matching these regexes\nconst whitelistUrls = [\n\t/webpack-internal/,\n\tnew RegExp(`/$(process.env.HOSTNAME || 'localhost')/`),\n\t/assets\\.guim\\.co\\.uk/,\n\t/ophan\\.co\\.uk/,\n];\n\n// Ignore these errors\nconst ignoreErrors = [\n\t// https://docs.sentry.io/platforms/javascript/#decluttering-sentry\n\t\"Can't execute code from a freed script\",\n\t/InvalidStateError/gi,\n\t/Fetch error:/gi,\n\t'Network request failed',\n\t'NetworkError',\n\t'Failed to fetch',\n\t'This video is no longer available.',\n\t'UnknownError',\n\t'TypeError: Failed to fetch',\n\t'TypeError: NetworkError when attempting to fetch resource',\n\t'The quota has been exceeded',\n];\n\nconst { config } = window.guardian;\nconst {\n\tswitches: { enableSentryReporting },\n\tisDev,\n\tpage: { dcrSentryDsn },\n\tstage,\n} = config;\n\nSentry.init({\n\tignoreErrors,\n\twhitelistUrls,\n\tdsn: dcrSentryDsn,\n\tenvironment: stage || 'DEV',\n\tintegrations: [new CaptureConsole({ levels: ['error'] })],\n\tmaxBreadcrumbs: 50,\n\t// sampleRate: // We use Math.random in init.ts to sample errors\n\tbeforeSend(event) {\n\t\t// Skip sending events in certain situations\n\t\tconst dontSend = isDev || !enableSentryReporting;\n\t\tif (dontSend) {\n\t\t\treturn null;\n\t\t}\n\t\treturn event;\n\t},\n});\n\nexport const reportError = (error: Error, feature?: string): void => {\n\tSentry.withScope(() => {\n\t\tif (feature) {\n\t\t\tSentry.setTag('feature', feature);\n\t\t}\n\t\tSentry.captureException(error);\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/startup.ts","messages":[{"ruleId":"no-shadow","severity":1,"message":"'helpers' is already declared in the upper scope on line 27 column 2.","line":28,"column":9,"nodeType":"Identifier","messageId":"noShadow","endLine":28,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { initPerf } from './initPerf';\n\nexport interface Reporter {\n\treport: (err: Error, tags: { [key: string]: string }) => void;\n}\n\nconst measure = (name: string, task: () => Promise<void>): void => {\n\tconst { start, end } = initPerf(name);\n\n\tstart();\n\n\ttask()\n\t\t// You could use 'finally' here to prevent this duplication but finally isn't supported\n\t\t// in Chrome 59 which is used by Cypress in headless mode so if you do it will\n\t\t// break the Cypress tests on CI\n\t\t// See: https://github.com/cypress-io/cypress/issues/2651#issuecomment-432698837\n\t\t.then(() => {\n\t\t\tend();\n\t\t})\n\t\t.catch(() => {\n\t\t\tend();\n\t\t});\n};\n\nexport const startup = <A>(\n\tname: string,\n\thelpers: A,\n\ttask: (helpers: A) => Promise<void>,\n): void => {\n\tconst measureMe = () => {\n\t\tmeasure(name, task.bind(null, helpers));\n\t};\n\tif (window.guardian.mustardCut || window.guardian.polyfilled) {\n\t\tmeasureMe();\n\t} else {\n\t\twindow.guardian.queue.push(measureMe);\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/updateIframeHeight.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":18,"column":32,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":18,"endColumn":42},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":28,"column":0,"nodeType":null,"endLine":28,"endColumn":41},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":34,"column":46,"nodeType":"Punctuator","messageId":"preferNullish","endLine":34,"endColumn":48,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[852,854],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":29,"column":16,"nodeType":"BlockStatement","messageId":"unexpected","endLine":29,"endColumn":18,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"type HeightEventType = { source: { name: string } };\n\nexport const updateIframeHeight = (queryString: string): Promise<void> => {\n\tconst iframes: HTMLIFrameElement[] = [].slice.call(\n\t\tdocument.querySelectorAll(queryString),\n\t);\n\n\twindow.addEventListener('message', (event) => {\n\t\tconst iframe: HTMLIFrameElement | undefined = iframes.find((i) => {\n\t\t\ttry {\n\t\t\t\treturn i.name === (event as HeightEventType).source.name;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tif (iframe) {\n\t\t\ttry {\n\t\t\t\tconst message = JSON.parse(event.data) as {\n\t\t\t\t\ttype: string;\n\t\t\t\t\tvalue: string;\n\t\t\t\t};\n\t\t\t\tswitch (message.type) {\n\t\t\t\t\tcase 'set-height':\n\t\t\t\t\t\tiframe.height = message.value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t}\n\t\t\t\t// eslint-disable-next-line no-empty\n\t\t\t} catch (e) {}\n\t\t}\n\t});\n\n\tiframes.forEach((iframe) => {\n\t\tconst src = (iframe.getAttribute('srcdoc') || '')\n\t\t\t.replace(/<gu-script>/g, '<script>')\n\n\t\t\t.replace(/<\\/gu-script>/g, '<' + '/script>');\n\t\tiframe.setAttribute('srcdoc', src);\n\t});\n\treturn Promise.resolve();\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/browser/webpackPublicPath.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/AdSlot.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":229,"column":48,"nodeType":"Punctuator","messageId":"preferNullish","endLine":229,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4744,4746],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":280,"column":50,"nodeType":"Punctuator","messageId":"preferNullish","endLine":280,"endColumn":52,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5751,5753],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":283,"column":52,"nodeType":"Punctuator","messageId":"preferNullish","endLine":283,"endColumn":54,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5867,5869],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":286,"column":52,"nodeType":"Punctuator","messageId":"preferNullish","endLine":286,"endColumn":54,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5983,5985],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":322,"column":45,"nodeType":"Punctuator","messageId":"preferNullish","endLine":322,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6974,6976],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":327,"column":46,"nodeType":"Punctuator","messageId":"preferNullish","endLine":327,"endColumn":48,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7113,7115],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":357,"column":48,"nodeType":"Punctuator","messageId":"preferNullish","endLine":357,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7795,7797],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":360,"column":48,"nodeType":"Punctuator","messageId":"preferNullish","endLine":360,"endColumn":50,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7905,7907],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":363,"column":50,"nodeType":"Punctuator","messageId":"preferNullish","endLine":363,"endColumn":52,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8017,8019],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":366,"column":50,"nodeType":"Punctuator","messageId":"preferNullish","endLine":366,"endColumn":52,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8129,8131],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":393,"column":49,"nodeType":"Punctuator","messageId":"preferNullish","endLine":393,"endColumn":51,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8770,8772],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":420,"column":54,"nodeType":"Punctuator","messageId":"preferNullish","endLine":420,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9377,9379],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":442,"column":49,"nodeType":"Punctuator","messageId":"preferNullish","endLine":442,"endColumn":51,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9859,9861],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { adSizes, sizeMappings } from '@guardian/commercial-core';\nimport { ArticleDisplay } from '@guardian/libs';\nimport {\n\tborder,\n\tfrom,\n\tneutral,\n\tspace,\n\ttext,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { Island } from './Island';\nimport { TopRightAdSlot } from './TopRightAdSlot.importable';\n\ntype Props = {\n\tdisplay: ArticleDisplay;\n\tposition: AdSlotType;\n\tshouldHideReaderRevenue?: boolean;\n\tisPaidContent?: boolean;\n};\n\nexport const labelHeight = 24;\n\nconst adSlotLabelStyles = css`\n\t${textSans.xxsmall()};\n\tposition: relative;\n\theight: ${labelHeight}px;\n\tmax-height: ${labelHeight}px;\n\tbackground-color: ${neutral[97]};\n\tpadding: 0 8px;\n\tborder-top: 1px solid ${border.secondary};\n\tcolor: ${text.supporting};\n\ttext-align: left;\n\tbox-sizing: border-box;\n\t&.visible {\n\t\tvisibility: initial;\n\t}\n\t&.hidden {\n\t\tvisibility: hidden;\n\t}\n\t&.ad-slot__label--toggle {\n\t\tmargin: 0 auto;\n\t\t${until.tablet} {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n`;\n\nconst outOfPageStyles = css`\n\theight: 0;\n`;\n\nexport const labelStyles = css`\n\t.ad-slot__label,\n\t.ad-slot__scroll {\n\t\t${adSlotLabelStyles}\n\t}\n\n\t.ad-slot__close-button {\n\t\tdisplay: none;\n\t}\n\n\t.ad-slot__scroll {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\twidth: 100%;\n\t}\n`;\n\nexport const adCollapseStyles = css`\n\t& .ad-slot.ad-slot--collapse {\n\t\tdisplay: none;\n\t}\n`;\n\n/**\n * For implementation in Frontend, see mark: dca5c7dd-dda4-4922-9317-a55a3789fe4c\n * These styles come mostly from RichLink in DCR.\n */\nexport const carrotAdStyles = css`\n\t.ad-slot--carrot {\n\t\tfloat: left;\n\t\tclear: both;\n\t\twidth: 140px;\n\t\tmargin-right: 20px;\n\t\tmargin-bottom: ${space[1]}px;\n\t\t${from.leftCol} {\n\t\t\tposition: relative;\n\t\t\tmargin-left: -160px;\n\t\t\twidth: 140px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t\twidth: 220px;\n\t\t}\n\t}\n`;\n\n/**\n * For CSS in Frontend, see mark: 9473ae05-a901-4a8d-a51d-1b9c894d6e1f\n */\nconst fluidAdStyles = css`\n\t&.ad-slot--fluid {\n\t\tmin-height: 250px;\n\t\tline-height: 10px;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t}\n`;\n\n/**\n * Usage according to DAP (Digital Ad Production)\n *\n * #### Desktop\n * - `fabric` &rarr; `top-above-nav`,`merchandising-high`,`merchandising`\n * - `fabric-custom` &rarr; `top-above-nav`,`merchandising-high`,`merchandising`\n * - `fabric-expandable` &rarr; `merchandising-high`\n * - `fabric-third-party` &rarr; `top-above-nav`,`merchandising-high`,`merchandising`\n * - `fabric-video` &rarr; `top-above-nav`,`merchandising-high`\n * - `fabric-video-expandable` &rarr; `merchandising-high`\n *\n * #### Mobile\n * - `interscroller` &rarr; `top-above-nav`\n * - `mobile-revealer` &rarr; `top-above-nav`\n */\nconst fluidFullWidthAdStyles = css`\n\t&.ad-slot--fluid {\n\t\twidth: 100%;\n\t}\n`;\n\nconst mobileStickyAdStyles = css`\n\tposition: fixed;\n\tbottom: 0;\n\twidth: 320px;\n\tmargin: 0 auto;\n\tright: 0;\n\tleft: 0;\n\tz-index: 1010;\n\t${from.phablet} {\n\t\tdisplay: none;\n\t}\n\t.ad-slot__close-button {\n\t\tdisplay: none;\n\t\tposition: absolute;\n\t\tright: 3px;\n\t\ttop: 3px;\n\t\tpadding: 0;\n\t\tborder: 0;\n\t\theight: 21px;\n\t\twidth: 21px;\n\t\tbackground-color: transparent;\n\t}\n\t.ad-slot__close-button svg {\n\t\theight: 0.75rem;\n\t\twidth: 0.75rem;\n\t\tstroke: ${neutral[7]};\n\t\tfill: ${neutral[7]};\n\t\tstroke-linecap: round;\n\t\tstroke-width: 0;\n\t\ttext-align: center;\n\t}\n\t.ad-slot--mobile-sticky .ad-slot__label .ad-slot__close-button {\n\t\tdisplay: block;\n\t}\n\t.ad-slot__close-button__x {\n\t\tstroke: ${neutral[7]};\n\t\tfill: transparent;\n\t\tstroke-linecap: round;\n\t\tstroke-width: 2;\n\t\ttext-align: center;\n\t}\n\t.ad-slot__label {\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1.25rem;\n\t\tposition: relative;\n\t\theight: 1.5rem;\n\t\tbackground-color: ${neutral[97]};\n\t\tpadding: 0 0.5rem;\n\t\tborder-top: 0.0625rem solid ${border.secondary};\n\t\tcolor: ${neutral[60]};\n\t\ttext-align: left;\n\t\tbox-sizing: border-box;\n\t\t${textSans.xxsmall()};\n\t}\n`;\n\nconst adStyles = [labelStyles, fluidAdStyles];\n\nconst AdSlotLabelToggled: React.FC = () => (\n\t<div\n\t\tclassName={['ad-slot__label', 'ad-slot__label--toggle', 'hidden'].join(\n\t\t\t' ',\n\t\t)}\n\t\tcss={adSlotLabelStyles}\n\t>\n\t\tAdvertisement\n\t</div>\n);\n\nexport const AdSlot: React.FC<Props> = ({\n\tposition,\n\tdisplay,\n\tshouldHideReaderRevenue = false,\n\tisPaidContent = false,\n}) => {\n\tswitch (position) {\n\t\tcase 'right':\n\t\t\tswitch (display) {\n\t\t\t\tcase ArticleDisplay.Immersive:\n\t\t\t\tcase ArticleDisplay.Showcase:\n\t\t\t\tcase ArticleDisplay.NumberedList: {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tid=\"dfp-ad--right\"\n\t\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t\t'js-ad-slot',\n\t\t\t\t\t\t\t\t'ad-slot',\n\t\t\t\t\t\t\t\t'ad-slot--right',\n\t\t\t\t\t\t\t\t'ad-slot--mpu-banner-ad',\n\t\t\t\t\t\t\t\t'ad-slot--rendered',\n\t\t\t\t\t\t\t\t'js-sticky-mpu',\n\t\t\t\t\t\t\t].join(' ')}\n\t\t\t\t\t\t\tcss={adStyles}\n\t\t\t\t\t\t\tdata-link-name=\"ad slot right\"\n\t\t\t\t\t\t\tdata-name=\"right\"\n\t\t\t\t\t\t\t// mark: 01303e88-ef1f-462d-9b6e-242419435cec\n\t\t\t\t\t\t\tdata-mobile={(sizeMappings.right.mobile || [])\n\t\t\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t\t\t.join('|')}\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcase ArticleDisplay.Standard: {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Island>\n\t\t\t\t\t\t\t<TopRightAdSlot\n\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tisPaidContent={isPaidContent}\n\t\t\t\t\t\t\t\tadStyles={adStyles}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\tcase 'comments': {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tposition: static;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"dfp-ad--comments\"\n\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t'js-ad-slot',\n\t\t\t\t\t\t\t'ad-slot',\n\t\t\t\t\t\t\t'ad-slot--comments',\n\t\t\t\t\t\t\t'ad-slot--mpu-banner-ad',\n\t\t\t\t\t\t\t'ad-slot--rendered',\n\t\t\t\t\t\t\t'js-sticky-mpu',\n\t\t\t\t\t\t].join(' ')}\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\tposition: sticky;\n\t\t\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\t\t\twidth: 300px;\n\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\tadStyles,\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tdata-link-name=\"ad slot comments\"\n\t\t\t\t\t\tdata-name=\"comments\"\n\t\t\t\t\t\tdata-mobile={(sizeMappings.comments.mobile || [])\n\t\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t\t.join('|')}\n\t\t\t\t\t\tdata-desktop={(sizeMappings.comments.desktop || [])\n\t\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t\t.join('|')}\n\t\t\t\t\t\tdata-phablet={(sizeMappings.comments.phablet || [])\n\t\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t\t.join('|')}\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\tcase 'top-above-nav': {\n\t\t\tconst adSlotAboveNav = css`\n\t\t\t\tposition: relative;\n\t\t\t\tmargin: 0 auto;\n\t\t\t\tmin-height: ${adSizes.leaderboard.height}px;\n\t\t\t\ttext-align: left;\n\t\t\t\tdisplay: block;\n\t\t\t\tmin-width: 728px;\n\t\t\t`;\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<AdSlotLabelToggled />\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"dfp-ad--top-above-nav\"\n\t\t\t\t\t\tclassName={[\n\t\t\t\t\t\t\t'js-ad-slot',\n\t\t\t\t\t\t\t'ad-slot',\n\t\t\t\t\t\t\t'ad-slot--top-above-nav',\n\t\t\t\t\t\t\t'ad-slot--mpu-banner-ad',\n\t\t\t\t\t\t\t'ad-slot--rendered',\n\t\t\t\t\t\t].join(' ')}\n\t\t\t\t\t\tcss={[adStyles, fluidFullWidthAdStyles, adSlotAboveNav]}\n\t\t\t\t\t\tdata-link-name=\"ad slot top-above-nav\"\n\t\t\t\t\t\tdata-name=\"top-above-nav\"\n\t\t\t\t\t\t// The sizes here come from two places in the frontend code\n\t\t\t\t\t\t// 1. file mark: 432b3a46-90c1-4573-90d3-2400b51af8d0\n\t\t\t\t\t\t// 2. file mark: c66fae4e-1d29-467a-a081-caad7a90cacd\n\t\t\t\t\t\tdata-tablet={(\n\t\t\t\t\t\t\tsizeMappings['top-above-nav'].tablet || []\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t\t.join('|')}\n\t\t\t\t\t\tdata-desktop={(\n\t\t\t\t\t\t\tsizeMappings['top-above-nav'].desktop || []\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t\t.join('|')}\n\t\t\t\t\t\t// Values from file mark: c66fae4e-1d29-467a-a081-caad7a90cacd\n\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t\tcase 'mostpop': {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tid=\"dfp-ad--mostpop\"\n\t\t\t\t\tclassName={[\n\t\t\t\t\t\t'js-ad-slot',\n\t\t\t\t\t\t'ad-slot',\n\t\t\t\t\t\t'ad-slot--mostpop',\n\t\t\t\t\t\t'ad-slot--mpu-banner-ad',\n\t\t\t\t\t\t'ad-slot--rendered',\n\t\t\t\t\t].join(' ')}\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t`,\n\t\t\t\t\t\tadStyles,\n\t\t\t\t\t]}\n\t\t\t\t\tdata-link-name=\"ad slot mostpop\"\n\t\t\t\t\tdata-name=\"mostpop\"\n\t\t\t\t\t// mirror frontend file mark: 432b3a46-90c1-4573-90d3-2400b51af8d0\n\t\t\t\t\tdata-mobile={(sizeMappings.mostpop.mobile || [])\n\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t.join('|')}\n\t\t\t\t\tdata-tablet={(sizeMappings.mostpop.tablet || [])\n\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t.join('|')}\n\t\t\t\t\tdata-phablet={(sizeMappings.mostpop.phablet || [])\n\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t.join('|')}\n\t\t\t\t\tdata-desktop={(sizeMappings.mostpop.desktop || [])\n\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t.join('|')}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tcase 'merchandising-high': {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tid=\"dfp-ad--merchandising-high\"\n\t\t\t\t\tclassName={[\n\t\t\t\t\t\t'js-ad-slot',\n\t\t\t\t\t\t'ad-slot',\n\t\t\t\t\t\t'ad-slot--merchandising-high',\n\t\t\t\t\t].join(' ')}\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t`,\n\t\t\t\t\t\tadStyles,\n\t\t\t\t\t\tfluidFullWidthAdStyles,\n\t\t\t\t\t]}\n\t\t\t\t\tdata-link-name=\"ad slot merchandising-high\"\n\t\t\t\t\tdata-name=\"merchandising-high\"\n\t\t\t\t\t// mirror frontend file mark: 432b3a46-90c1-4573-90d3-2400b51af8d0\n\t\t\t\t\tdata-mobile={(\n\t\t\t\t\t\tsizeMappings['merchandising-high'].mobile || []\n\t\t\t\t\t)\n\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t.join('|')}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tcase 'merchandising': {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tid=\"dfp-ad--merchandising\"\n\t\t\t\t\tclassName={[\n\t\t\t\t\t\t'js-ad-slot',\n\t\t\t\t\t\t'ad-slot',\n\t\t\t\t\t\t'ad-slot--merchandising',\n\t\t\t\t\t].join(' ')}\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t`,\n\t\t\t\t\t\tadStyles,\n\t\t\t\t\t\tfluidFullWidthAdStyles,\n\t\t\t\t\t]}\n\t\t\t\t\tdata-link-name=\"ad slot merchandising\"\n\t\t\t\t\tdata-name=\"merchandising\"\n\t\t\t\t\t// mirror frontend file mark: 432b3a46-90c1-4573-90d3-2400b51af8d0\n\t\t\t\t\tdata-mobile={(sizeMappings.merchandising.mobile || [])\n\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t.join('|')}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tcase 'survey': {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tid=\"dfp-ad--survey\"\n\t\t\t\t\tclassName={[\n\t\t\t\t\t\t'js-ad-slot',\n\t\t\t\t\t\t'ad-slot',\n\t\t\t\t\t\t'ad-slot--survey',\n\t\t\t\t\t].join(' ')}\n\t\t\t\t\tcss={outOfPageStyles}\n\t\t\t\t\tdata-link-name=\"ad slot survey\"\n\t\t\t\t\tdata-name=\"survey\"\n\t\t\t\t\tdata-label=\"false\"\n\t\t\t\t\tdata-refresh=\"false\"\n\t\t\t\t\tdata-out-of-page=\"true\"\n\t\t\t\t\tdata-desktop={(sizeMappings.survey.desktop || [])\n\t\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t\t.join('|')}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n\nexport const MobileStickyContainer: React.FC = () => {\n\treturn (\n\t\t<div className=\"mobilesticky-container\" css={mobileStickyAdStyles} />\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/AgeWarning.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":13,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":18,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":23,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AgeWarning } from './AgeWarning';\n\nexport default {\n\tcomponent: AgeWarning,\n\ttitle: 'Components/AgeWarning',\n};\n\nexport const defaultStory = () => {\n\treturn <AgeWarning age=\"10 years old\" />;\n};\ndefaultStory.story = { name: 'default' };\n\nexport const SmallWarning = () => {\n\treturn <AgeWarning age=\"5 months old\" size=\"small\" />;\n};\nSmallWarning.story = { name: 'with size set to small' };\n\nexport const ScreenReaderVersion = () => {\n\treturn <AgeWarning age=\"20 million years old\" isScreenReader={true} />;\n};\nScreenReaderVersion.story = { name: 'with screen reader true (invisible)' };\n\nexport const MissingOldText = () => {\n\treturn <AgeWarning age=\"5 years\" />;\n};\nMissingOldText.story = { name: 'with old text missing from input' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/AgeWarning.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":45,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":45,"endColumn":79}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbrandAltBackground,\n\tbrandAltText,\n\tfrom,\n\ttextSans,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport ClockIcon from '../../static/icons/clock.svg';\n\ntype Props = {\n\tage: string;\n\tisScreenReader?: boolean;\n\tsize?: 'small' | 'medium';\n};\n\nconst ageWarningStyles = (isSmall: boolean) => css`\n\t${isSmall ? textSans.xxsmall() : textSans.medium()};\n\tcolor: ${brandAltText.primary};\n\tbackground-color: ${brandAltBackground.primary};\n\tdisplay: inline-block;\n\n\t> strong {\n\t\tfont-weight: bold;\n\t}\n\n\tpadding: ${isSmall ? '3px 5px' : '6px 10px'};\n\n\t${from.mobileLandscape} {\n\t\tpadding-left: ${isSmall ? '6px' : '12px'};\n\t}\n\n\t${from.leftCol} {\n\t\tpadding-left: ${isSmall ? '5px' : '10px'};\n\t}\n`;\n\nconst ageWarningScreenReader = css`\n\t${visuallyHidden};\n`;\n\nconst ensureOldText = (age: string) =>\n\tage.endsWith('old') ? age : `${age} old`;\n\nexport const AgeWarning = ({ age, isScreenReader, size = 'medium' }: Props) => {\n\tconst warningPrefix = 'This article is more than ';\n\tconst isSmall = size === 'small';\n\tconst ageOld = ensureOldText(age);\n\n\tif (isScreenReader) {\n\t\treturn <div css={ageWarningScreenReader}>{warningPrefix + age}</div>;\n\t}\n\n\treturn (\n\t\t<div css={ageWarningStyles(isSmall)} aria-hidden=\"true\">\n\t\t\t<ClockIcon /> {warningPrefix}\n\t\t\t<strong>{ageOld}</strong>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/AlreadyVisited.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect } from 'react';\nimport { incrementAlreadyVisited } from '../lib/alreadyVisited';\n\nexport const AlreadyVisited = () => {\n\tuseEffect(() => {\n\t\tincrementAlreadyVisited();\n\t}, []);\n\t// Nothing is rendered by this component\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Article.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":32,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":32,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css, Global } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { brandAlt, focusHalo, neutral } from '@guardian/source-foundations';\nimport { StrictMode } from 'react';\nimport { filterABTestSwitches } from '../../model/enhance-switches';\nimport { DecideLayout } from '../layouts/DecideLayout';\nimport { AlreadyVisited } from './AlreadyVisited.importable';\nimport { BrazeMessaging } from './BrazeMessaging.importable';\nimport { CommercialMetrics } from './CommercialMetrics.importable';\nimport { CoreVitals } from './CoreVitals.importable';\nimport { FocusStyles } from './FocusStyles.importable';\nimport { Island } from './Island';\nimport { ReaderRevenueDev } from './ReaderRevenueDev.importable';\nimport { SetABTests } from './SetABTests.importable';\nimport { SkipTo } from './SkipTo';\n\ntype Props = {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n};\n\n/**\n * @description\n * Article is a high level wrapper for pages on Dotcom. Sets strict mode and some globals\n *\n * @param {Props} props\n * @param {CAPIArticleType} props.CAPIArticle - The article JSON data\n * @param {NAVType} props.NAV - The article JSON data\n * @param {ArticleFormat} props.format - The format model for the article\n * */\nexport const Article = ({ CAPIArticle, NAV, format }: Props) => {\n\treturn (\n\t\t<StrictMode>\n\t\t\t<Global\n\t\t\t\tstyles={css`\n\t\t\t\t\t/* Crude but effective mechanism. Specific components may need to improve on this behaviour. */\n\t\t\t\t\t/* The not(.src...) selector is to work with Source's FocusStyleManager. */\n\t\t\t\t\t*:focus {\n\t\t\t\t\t\t${focusHalo}\n\t\t\t\t\t}\n\t\t\t\t\t::selection {\n\t\t\t\t\t\tbackground: ${brandAlt[400]};\n\t\t\t\t\t\tcolor: ${neutral[7]};\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t/>\n\t\t\t<SkipTo id=\"maincontent\" label=\"Skip to main content\" />\n\t\t\t<SkipTo id=\"navigation\" label=\"Skip to navigation\" />\n\t\t\t{(format.design === ArticleDesign.LiveBlog ||\n\t\t\t\tformat.design === ArticleDesign.DeadBlog) && (\n\t\t\t\t<SkipTo id=\"keyevents\" label=\"Skip to key events\" />\n\t\t\t)}\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<AlreadyVisited />\n\t\t\t</Island>\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<FocusStyles />\n\t\t\t</Island>\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<CommercialMetrics\n\t\t\t\t\tenabled={CAPIArticle.config.switches.commercialMetrics}\n\t\t\t\t/>\n\t\t\t</Island>\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<CoreVitals />\n\t\t\t</Island>\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<BrazeMessaging idApiUrl={CAPIArticle.config.idApiUrl} />\n\t\t\t</Island>\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<ReaderRevenueDev\n\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Island>\n\t\t\t<Island clientOnly={true}>\n\t\t\t\t<SetABTests\n\t\t\t\t\tabTestSwitches={filterABTestSwitches(\n\t\t\t\t\t\tCAPIArticle.config.switches,\n\t\t\t\t\t)}\n\t\t\t\t\tpageIsSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\tisDev={!!CAPIArticle.config.isDev}\n\t\t\t\t/>\n\t\t\t</Island>\n\t\t\t<DecideLayout CAPIArticle={CAPIArticle} NAV={NAV} format={format} />\n\t\t</StrictMode>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleBody.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":90,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":113,"endColumn":13},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, both sides of the expression are literal values.","line":135,"column":8,"nodeType":"BinaryExpression","messageId":"literalBooleanExpression","endLine":135,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay } from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { between, body, headline, space } from '@guardian/source-foundations';\nimport { ArticleRenderer } from '../lib/ArticleRenderer';\nimport { decidePalette } from '../lib/decidePalette';\nimport { LiveBlogRenderer } from '../lib/LiveBlogRenderer';\nimport { revealStyles } from '../lib/revealStyles';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tblocks: Block[];\n\tpinnedPost?: Block;\n\tadTargeting: AdTargeting;\n\thost?: string;\n\tpageId: string;\n\twebTitle: string;\n\tajaxUrl: string;\n\tisAdFreeUser: boolean;\n\tswitches: { [key: string]: boolean };\n\tsection: string;\n\tshouldHideReaderRevenue: boolean;\n\ttags: TagType[];\n\tisPaidContent: boolean;\n\tcontributionsServiceUrl: string;\n\tcontentType: string;\n\tsectionName: string;\n\tisPreview?: boolean;\n\tidUrl: string;\n\tisSensitive: boolean;\n\tisDev: boolean;\n\tonFirstPage?: boolean;\n};\n\nconst globalH2Styles = (display: ArticleDisplay) => css`\n\th2:not([data-ignore='global-h2-styling']) {\n\t\t${display === ArticleDisplay.Immersive\n\t\t\t? headline.medium({ fontWeight: 'light' })\n\t\t\t: headline.xxsmall({ fontWeight: 'bold' })};\n\t}\n`;\n\nconst globalOlStyles = () => css`\n\tol:not([data-ignore='global-ol-styling']) {\n\t\tcounter-reset: li;\n\t\tli:before {\n\t\t\t${body.medium({ lineHeight: 'tight' })};\n\t\t\tcontent: counter(li);\n\t\t\tcounter-increment: li;\n\t\t\tmargin-right: ${space[1]}px;\n\t\t}\n\t}\n`;\n\nconst globalH3Styles = (display: ArticleDisplay) => {\n\tif (display !== ArticleDisplay.NumberedList) return null;\n\treturn css`\n\t\th3 {\n\t\t\t${headline.xsmall({ fontWeight: 'bold' })};\n\t\t\tmargin-bottom: ${space[2]}px;\n\t\t}\n\t`;\n};\n\nconst globalStrongStyles = css`\n\tstrong {\n\t\tfont-weight: bold;\n\t}\n`;\n\nconst bodyPadding = css`\n\t${between.tablet.and.desktop} {\n\t\tpadding-right: 80px;\n\t}\n`;\n\nconst globalLinkStyles = (palette: Palette) => css`\n\ta:not([data-ignore='global-link-styling']) {\n\t\ttext-decoration: none;\n\t\tborder-bottom: 1px solid ${palette.border.articleLink};\n\t\tcolor: ${palette.text.articleLink};\n\n\t\t:hover {\n\t\t\tcolor: ${palette.text.articleLinkHover};\n\t\t\tborder-bottom: 1px solid ${palette.border.articleLinkHover};\n\t\t}\n\t}\n`;\n\nexport const ArticleBody = ({\n\tformat,\n\tblocks,\n\tpinnedPost,\n\tadTargeting,\n\thost,\n\tpageId,\n\twebTitle,\n\tajaxUrl,\n\tswitches,\n\tisAdFreeUser,\n\tsection,\n\tshouldHideReaderRevenue,\n\ttags,\n\tisPaidContent,\n\tcontributionsServiceUrl,\n\tcontentType,\n\tsectionName,\n\tisPreview,\n\tidUrl,\n\tisSensitive,\n\tisDev,\n\tonFirstPage,\n}: Props) => {\n\tconst isInteractive = format.design === ArticleDesign.Interactive;\n\tconst palette = decidePalette(format);\n\n\tif (\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog\n\t) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\ttabIndex={0}\n\t\t\t\t\tid=\"liveblog-body\"\n\t\t\t\t\t// This classname is used by Spacefinder as the container in which it'll attempt to insert inline ads\n\t\t\t\t\tclassName=\"js-liveblog-body\"\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tglobalStrongStyles,\n\t\t\t\t\t\tglobalH2Styles(format.display),\n\t\t\t\t\t\tglobalH3Styles(format.display),\n\t\t\t\t\t\tglobalLinkStyles(palette),\n\t\t\t\t\t\t// revealStyles is used to animate the reveal of new blocks\n\t\t\t\t\t\t(format.design === ArticleDesign.DeadBlog ||\n\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog) &&\n\t\t\t\t\t\t\trevealStyles,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<LiveBlogRenderer\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tblocks={blocks}\n\t\t\t\t\t\tpinnedPost={pinnedPost}\n\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\thost={host}\n\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\twebTitle={webTitle}\n\t\t\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\t\t\tswitches={switches}\n\t\t\t\t\t\tisAdFreeUser={isAdFreeUser}\n\t\t\t\t\t\tisSensitive={isSensitive}\n\t\t\t\t\t\tisLiveUpdate={false}\n\t\t\t\t\t\tsection={section}\n\t\t\t\t\t\tshouldHideReaderRevenue={shouldHideReaderRevenue}\n\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\tisPaidContent={isPaidContent}\n\t\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\t\tonFirstPage={onFirstPage}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n\treturn (\n\t\t<div\n\t\t\ttabIndex={0}\n\t\t\tid=\"maincontent\"\n\t\t\tcss={[\n\t\t\t\tisInteractive ? null : bodyPadding,\n\t\t\t\tglobalH2Styles(format.display),\n\t\t\t\tglobalH3Styles(format.display),\n\t\t\t\tglobalOlStyles(),\n\t\t\t\tglobalStrongStyles,\n\t\t\t\tglobalLinkStyles(palette),\n\t\t\t]}\n\t\t>\n\t\t\t<ArticleRenderer\n\t\t\t\tformat={format}\n\t\t\t\telements={blocks[0] ? blocks[0].elements : []}\n\t\t\t\tadTargeting={adTargeting}\n\t\t\t\thost={host}\n\t\t\t\tpageId={pageId}\n\t\t\t\twebTitle={webTitle}\n\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\tcontentType={contentType}\n\t\t\t\tsectionName={sectionName}\n\t\t\t\ttags={tags}\n\t\t\t\tisPaidContent={isPaidContent}\n\t\t\t\tisPreview={isPreview}\n\t\t\t\tidUrl={idUrl}\n\t\t\t\tswitches={switches}\n\t\t\t\tisDev={isDev}\n\t\t\t\tisAdFreeUser={isAdFreeUser}\n\t\t\t\tisSensitive={isSensitive}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleContainer.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":162,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":162,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { from, neutral, space, until } from '@guardian/source-foundations';\nimport { carrotAdStyles, labelStyles } from './AdSlot';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tchildren: React.ReactNode;\n};\n\nconst articleWidth = (format: ArticleFormat) => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Interactive: {\n\t\t\t// These articles use a special template which manages it's own width\n\t\t\treturn null;\n\t\t}\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog: {\n\t\t\treturn css`\n\t\t\t\t${from.desktop} {\n\t\t\t\t\twidth: 700px;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t\tdefault: {\n\t\t\treturn css`\n\t\t\t\t${from.desktop} {\n\t\t\t\t\twidth: 620px;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t}\n};\n\nconst articleWrapper = css`\n\t${until.leftCol} {\n\t\t/* below 1140 */\n\t\tpadding-left: 0;\n\t}\n\n\tflex-grow: 1;\n\n\t/* Due to MainMedia using position: relative, this seems to effect the rendering order\n    To mitigate we use z-index\n    TODO: find a cleaner solution */\n\tz-index: 1;\n`;\n\nconst adStyles = css`\n\t.ad-slot {\n\t\t@media print {\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tdisplay: none !important;\n\t\t}\n\t\t&.ad-slot--collapse {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\t.ad-slot--mostpop {\n\t\t${from.desktop} {\n\t\t\tmargin: 0;\n\t\t\twidth: auto;\n\t\t}\n\t}\n\t.ad-slot-container {\n\t\tmax-width: 300px;\n\t}\n\t.ad-slot--fluid {\n\t\twidth: 100%;\n\t}\n\t.ad-slot--liveblog-inline {\n\t\tmargin: 0 auto ${space[3]}px;\n\n\t\t.ad-slot__label {\n\t\t\tcolor: ${neutral[46]};\n\t\t\tborder-top-color: ${neutral[86]};\n\t\t}\n\n\t\t&.ad-slot--outstream {\n\t\t\t${from.tablet} {\n\t\t\t\twidth: 620px;\n\t\t\t}\n\t\t}\n\n\t\t&:not(.ad-slot--outstream) {\n\t\t\twidth: 300px;\n\t\t\tbackground-color: ${neutral[93]};\n\t\t\ttext-align: center;\n\n\t\t\t${from.tablet} {\n\t\t\t\twidth: 100%;\n\t\t\t\tpadding-bottom: ${space[6]}px;\n\n\t\t\t\t& > div:not(.ad-slot__label) {\n\t\t\t\t\twidth: 300px;\n\t\t\t\t\tmargin-left: auto;\n\t\t\t\t\tmargin-right: auto;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t&.ad-slot--fluid {\n\t\t\tbackground-color: green;\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\t/** ad-slot-offset-right is only added to inline2+ slots */\n\t.ad-slot--offset-right {\n\t\t${from.desktop} {\n\t\t\tfloat: right;\n\t\t\twidth: auto;\n\t\t\tmargin-right: -318px;\n\t\t}\n\n\t\t${from.wide} {\n\t\t\tmargin-right: -398px;\n\t\t}\n\t}\n\t/* Unlike other inlines do not float right inline1 */\n\t.ad-slot--inline1 {\n\t\tmargin: 12px auto;\n\t\ttext-align: center;\n\t\t${until.tablet} {\n\t\t\t/* Prevent merger with any nearby float left elements e.g. rich-links */\n\t\t\tclear: left;\n\t\t\twidth: 300px;\n\t\t}\n\t\t${from.tablet} {\n\t\t\tbackground-color: ${neutral[97]};\n\t\t}\n\t\t&.ad-slot--fluid {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\t.ad-slot--inline:not(.ad-slot--inline1),\n\t.ad-slot-liveblog--inline:not(.ad-slot--inline1) {\n\t\twidth: 300px;\n\t\tmargin: 12px auto;\n\t\tmin-width: 300px;\n\t\tmin-height: 274px;\n\t\ttext-align: center;\n\t\t${from.tablet} {\n\t\t\tmargin-right: -100px;\n\t\t\twidth: auto;\n\t\t\tfloat: right;\n\t\t\tmargin-top: 4px;\n\t\t\tmargin-left: 20px;\n\t\t}\n\t\t${from.desktop} {\n\t\t\twidth: auto;\n\t\t\tfloat: right;\n\t\t\tmargin: 0;\n\t\t\tmargin-top: 4px;\n\t\t\tmargin-left: 20px;\n\t\t}\n\t\t&.ad-slot--fluid {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n`;\n\nexport const ArticleContainer = ({ children, format }: Props) => {\n\treturn (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\tarticleWrapper,\n\t\t\t\tarticleWidth(format),\n\t\t\t\tadStyles,\n\t\t\t\tcarrotAdStyles,\n\t\t\t\tlabelStyles,\n\t\t\t]}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleHeadline.mocks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleHeadline.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":23,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":49,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":49,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":75,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":75,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":119,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":119,"endColumn":47},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":165,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":165,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":207,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":207,"endColumn":44},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":251,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":251,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":295,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":295,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":321,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":321,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":362,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":362,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":388,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":388,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":414,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":414,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":440,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":440,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":466,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":466,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":492,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":492,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":518,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":518,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":544,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":544,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":574,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":574,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":600,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":600,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":626,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":626,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":652,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":652,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":691,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":691,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":717,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":717,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":748,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":748,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { news } from '@guardian/source-foundations';\nimport { ArticleContainer } from './ArticleContainer';\nimport { ArticleHeadline } from './ArticleHeadline';\nimport { mainMediaElements } from './ArticleHeadline.mocks';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { LeftColumn } from './LeftColumn';\nimport { MainMedia } from './MainMedia';\nimport { Standfirst } from './Standfirst';\n\nexport default {\n\tcomponent: ArticleHeadline,\n\ttitle: 'Components/ArticleHeadline',\n};\n\nexport const ArticleStory = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Standard,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is how the default headline looks\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nArticleStory.story = { name: 'Article' };\n\nexport const Feature = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Feature,\n\t\ttheme: ArticlePillar.Lifestyle,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is a Feature headline, it has colour applied based on pillar\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nFeature.story = { name: 'Feature' };\n\nexport const ShowcaseInterview = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Showcase,\n\t\tdesign: ArticleDesign.Interview,\n\t\ttheme: ArticlePillar.Culture,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tmargin-bottom: -100px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\theadlineString=\"This is an Interview headline. It has a black background, white text and overlays the image below it (as a sibling)\"\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t\t\tbyline=\"Byline text\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<MainMedia\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\telements={mainMediaElements}\n\t\t\t\t\t\tpageId=\"testID\"\n\t\t\t\t\t\twebTitle=\"story article\"\n\t\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\t\tisSensitive={false}\n\t\t\t\t\t\tswitches={{}}\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nShowcaseInterview.story = { name: 'Interview (with showcase)' };\n\nexport const ShowcaseInterviewNobyline = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Showcase,\n\t\tdesign: ArticleDesign.Interview,\n\t\ttheme: ArticlePillar.Culture,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tmargin-bottom: -100px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\theadlineString=\"This is an Interview headline. It has a black background, white text and overlays the image below it (as a sibling)\"\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t\t\tbyline=\"\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<MainMedia\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\telements={mainMediaElements}\n\t\t\t\t\t\tpageId=\"testID\"\n\t\t\t\t\t\twebTitle=\"story article\"\n\t\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\t\tisSensitive={false}\n\t\t\t\t\t\tswitches={{}}\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nShowcaseInterviewNobyline.story = {\n\tname: 'Interview (with showcase and NO BYLINE)',\n};\n\nexport const Interview = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Interview,\n\t\ttheme: ArticlePillar.Culture,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is an Interview headline. It has a black background, white text and overlays the image below it (as a sibling)\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t\tbyline=\"Byline text\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Standfirst\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tstandfirst=\"This is the standfirst text. We include here to demonstrate spacing in this case where we have a Interview type article that does not have a showcase main media element\"\n\t\t\t\t\t/>\n\t\t\t\t\t<MainMedia\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\telements={mainMediaElements}\n\t\t\t\t\t\tpageId=\"testID\"\n\t\t\t\t\t\twebTitle=\"story article\"\n\t\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\t\tisSensitive={false}\n\t\t\t\t\t\tswitches={{}}\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nInterview.story = { name: 'Interview (without showcase)' };\n\nexport const InterviewSpecialReport = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Interview,\n\t\ttheme: ArticleSpecial.SpecialReport,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is an Interview headline. It has a black background, white text and overlays the image below it (as a sibling)\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t\tbyline=\"Byline text\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Standfirst\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tstandfirst=\"This is the standfirst text. We include here to demonstrate spacing in this case where we have a Interview type article that does not have a showcase main media element\"\n\t\t\t\t\t/>\n\t\t\t\t\t<MainMedia\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\telements={mainMediaElements}\n\t\t\t\t\t\tpageId=\"testID\"\n\t\t\t\t\t\twebTitle=\"story article\"\n\t\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\t\tisSensitive={false}\n\t\t\t\t\t\tswitches={{}}\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nInterviewSpecialReport.story = {\n\tname: 'Interview Special Report (without showcase)',\n};\n\nexport const InterviewNoByline = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Interview,\n\t\ttheme: ArticlePillar.Culture,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is an Interview headline. It has a black background, white text and overlays the image below it (as a sibling)\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t\tbyline=\"\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Standfirst\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tstandfirst=\"This is the standfirst text. We include here to demonstrate spacing in this case where we have a Interview type article that does not have a showcase main media element\"\n\t\t\t\t\t/>\n\t\t\t\t\t<MainMedia\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\telements={mainMediaElements}\n\t\t\t\t\t\tpageId=\"testID\"\n\t\t\t\t\t\twebTitle=\"story article\"\n\t\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\t\tisSensitive={false}\n\t\t\t\t\t\tswitches={{}}\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nInterviewNoByline.story = {\n\tname: 'Interview (without showcase with NO BYLINE)',\n};\n\nexport const Comment = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Showcase,\n\t\tdesign: ArticleDesign.Comment,\n\t\ttheme: ArticlePillar.Opinion,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"Yes, the billionaire club is one we really need to shut down\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nComment.story = { name: 'Comment' };\n\nexport const Analysis = () => {\n\tconst themes: [string, ArticleTheme][] = [\n\t\t['News', ArticlePillar.News],\n\t\t['Opinion', ArticlePillar.Opinion],\n\t\t['Sport', ArticlePillar.Sport],\n\t\t['Culture', ArticlePillar.Culture],\n\t\t['Lifestyle', ArticlePillar.Lifestyle],\n\t];\n\tconst format = (theme: ArticleTheme): ArticleFormat => ({\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Analysis,\n\t\ttheme,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{themes.map(([themeName, theme]) => (\n\t\t\t\t<>\n\t\t\t\t\t<ElementContainer>\n\t\t\t\t\t\t<Flex>\n\t\t\t\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t</LeftColumn>\n\t\t\t\t\t\t\t<ArticleContainer format={format(theme)}>\n\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\theadlineString={`This is an Analysis headline in ${themeName}, it's underlined. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor`}\n\t\t\t\t\t\t\t\t\tformat={format(theme)}\n\t\t\t\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ArticleContainer>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t<br />\n\t\t\t\t</>\n\t\t\t))}\n\t\t</>\n\t);\n};\nAnalysis.story = { name: 'Analysis' };\n\nexport const Gallery = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Gallery,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is Gallery\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nGallery.story = { name: 'Gallery' };\n\nexport const Review = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Review,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is Review\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nReview.story = { name: 'Review' };\n\nexport const PhotoEssay = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.PhotoEssay,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is PhotoEssay\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nPhotoEssay.story = { name: 'PhotoEssay' };\n\nexport const Quiz = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Quiz,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is Quiz\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nQuiz.story = { name: 'Quiz' };\n\nexport const Recipe = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Recipe,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is Recipe\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nRecipe.story = { name: 'Recipe' };\n\nexport const Immersive = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Immersive,\n\t\tdesign: ArticleDesign.Standard,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when display type is Immersive\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nImmersive.story = { name: 'Immersive' };\n\nexport const ImmersiveNoMainMedia = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Immersive,\n\t\tdesign: ArticleDesign.PrintShop,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is PrintShop, which has no main media\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nImmersiveNoMainMedia.story = { name: 'Printshop (with no main media)' };\n\nexport const ImmersiveComment = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Immersive,\n\t\tdesign: ArticleDesign.Comment,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer\n\t\t\tshowSideBorders={false}\n\t\t\tshowTopBorder={false}\n\t\t\tbackgroundColour=\"orange\"\n\t\t>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when display type is Immersive and design Comment\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nImmersiveComment.story = { name: 'Immersive opinion piece' };\n\nexport const Editorial = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Editorial,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is Editorial\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nEditorial.story = { name: 'Editorial' };\n\nexport const MatchReport = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.MatchReport,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is MatchReport\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nMatchReport.story = { name: 'MatchReport' };\n\nexport const SpecialReport = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Standard,\n\t\ttheme: ArticleSpecial.SpecialReport,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when pillar is SpecialReport\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nSpecialReport.story = { name: 'SpecialReport' };\n\nexport const LiveBlog = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is LiveBlog\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nLiveBlog.story = {\n\tname: 'LiveBlog',\n\tparameters: {\n\t\tbackgrounds: {\n\t\t\tdefault: 'red',\n\t\t\tvalues: [\n\t\t\t\t{\n\t\t\t\t\tname: 'red',\n\t\t\t\t\tvalue: news[300],\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n};\n\nexport const DeadBlog = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.DeadBlog,\n\t\ttheme: ArticlePillar.News,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is the headline you see when design type is DeadBlog\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nDeadBlog.story = { name: 'DeadBlog' };\n\nexport const ReviewWithoutStars = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Review,\n\t\ttheme: ArticlePillar.Culture,\n\t};\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString=\"This is a Review headline.\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[]}\n\t\t\t\t\t\twebPublicationDateDeprecated=\"\"\n\t\t\t\t\t\tbyline=\"Byline text\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Standfirst\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tstandfirst=\"This is the standfirst text. We include here to demonstrate we have the correct amount of padding below the headline when there are no stars.\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nReviewWithoutStars.story = { name: 'Review without stars' };\n\nexport const AgeWarning = () => {\n\tconst designs: [string, ArticleDesign][] = [\n\t\t['Comment', ArticleDesign.Comment],\n\t\t['Interview', ArticleDesign.Interview],\n\t\t['MatchReport', ArticleDesign.MatchReport],\n\t\t['Feature', ArticleDesign.Feature],\n\t\t['Interactive', ArticleDesign.Interactive],\n\t\t['Gallery', ArticleDesign.Gallery],\n\t\t['Analysis', ArticleDesign.Analysis],\n\t\t['Review', ArticleDesign.Review],\n\t];\n\tconst format = (design: ArticleDesign): ArticleFormat => ({\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign,\n\t\ttheme: ArticlePillar.News,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{designs.map(([themeName, design]) => (\n\t\t\t\t<>\n\t\t\t\t\t<ElementContainer>\n\t\t\t\t\t\t<Flex>\n\t\t\t\t\t\t\t<LeftColumn>\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t</LeftColumn>\n\t\t\t\t\t\t\t<ArticleContainer format={format(design)}>\n\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\theadlineString={`This is a headline in ${themeName} with an age warning showing`}\n\t\t\t\t\t\t\t\t\tformat={format(design)}\n\t\t\t\t\t\t\t\t\ttags={[\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tid: 'tone/news',\n\t\t\t\t\t\t\t\t\t\t\ttype: '',\n\t\t\t\t\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated=\"2020-03-28T07:27:19.000Z\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ArticleContainer>\n\t\t\t\t\t\t</Flex>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t<br />\n\t\t\t\t</>\n\t\t\t))}\n\t\t</>\n\t);\n};\nAgeWarning.story = { name: 'with age warning' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleHeadline.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[852,855],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[852,855],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":29,"column":27,"nodeType":"Identifier","messageId":"unsafeReturn","endLine":29,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":358,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":366,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tfrom,\n\theadline,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { getAgeWarning } from '../../lib/age-warning';\nimport { interactiveLegacyClasses } from '../layouts/lib/interactiveLegacyStyling';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getZIndex } from '../lib/getZIndex';\nimport { AgeWarning } from './AgeWarning';\nimport { HeadlineByline } from './HeadlineByline';\nimport { HeadlineTag } from './HeadlineTag';\n\ntype Props = {\n\theadlineString: string;\n\tformat: ArticleFormat;\n\tbyline?: string;\n\ttags: TagType[];\n\twebPublicationDateDeprecated: string;\n\thasStarRating?: boolean;\n\thasAvatar?: boolean;\n};\n\nconst curly = (x: any) => x;\n\nconst topPadding = css`\n\t${from.leftCol} {\n\t\tpadding-top: ${space[1]}px;\n\t}\n`;\n\nconst standardFont = css`\n\t${headline.medium()};\n\t${until.tablet} {\n\t\t${headline.small()};\n\t}\n`;\n\nconst labsFont = css`\n\t${textSans.xlarge({ fontWeight: 'bold' })};\n\tline-height: 32px;\n\t${from.tablet} {\n\t\t${textSans.xxxlarge({ fontWeight: 'bold' })};\n\t\tline-height: 38px;\n\t}\n`;\n\nconst boldFont = css`\n\t${headline.medium({ fontWeight: 'bold' })};\n\t${until.tablet} {\n\t\t${headline.small({ fontWeight: 'bold' })};\n\t}\n`;\n\nconst jumboFont = css`\n\t${headline.xlarge({ fontWeight: 'bold' })};\n\tline-height: 56px;\n\t${until.desktop} {\n\t\t${headline.medium({ fontWeight: 'bold' })};\n\t}\n`;\n\nconst jumboLabsFont = css`\n\t${textSans.xxxlarge({ fontWeight: 'bold' })};\n\tfont-size: 50px;\n\tline-height: 56px;\n\t${until.desktop} {\n\t\t${textSans.xxlarge({ fontWeight: 'bold' })};\n\t\tfont-size: 34px;\n\t\tline-height: 38px;\n\t}\n`;\n\nconst invertedFont = css`\n\t${headline.medium({ fontWeight: 'bold' })};\n\tline-height: 42px;\n\t${until.tablet} {\n\t\t${headline.small({ fontWeight: 'bold' })};\n\t\tline-height: 35px;\n\t}\n`;\n\nconst lightFont = css`\n\t${headline.medium({ fontWeight: 'light' })};\n\tfont-size: 2.125rem;\n\tline-height: 2.375rem;\n\t${until.mobileMedium} {\n\t\t${headline.small({ fontWeight: 'light' })};\n\t}\n`;\n\nconst underlinedStyles = (colour: string) => css`\n\tbackground-image: repeating-linear-gradient(\n\t\tto bottom,\n\t\ttransparent,\n\t\ttransparent 47px,\n\t\t${colour}\n\t);\n\tline-height: 48px;\n\tbackground-size: 1rem 48px;\n\t${until.tablet} {\n\t\tbackground-image: repeating-linear-gradient(\n\t\t\tto bottom,\n\t\t\ttransparent,\n\t\t\ttransparent 39px,\n\t\t\t${colour}\n\t\t);\n\t\tline-height: 40px;\n\t\tbackground-size: 1px 40px;\n\t}\n\n\tbackground-position: top left;\n\tbackground-clip: content-box;\n\tbackground-origin: content-box;\n`;\n\nconst displayBlock = css`\n\tdisplay: block;\n`;\n\nconst displayInline = css`\n\tdisplay: inline;\n`;\n\nconst displayFlex = css`\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst shiftSlightly = css`\n\tmargin-bottom: 16px;\n`;\n\nconst invertedStyles = (palette: Palette) => css`\n\tposition: relative;\n\twhite-space: pre-wrap;\n\tpadding-bottom: ${space[1]}px;\n\tpadding-right: ${space[1]}px;\n\tbox-shadow: -6px 0 0 ${palette.background.headline};\n\t/* Box decoration is required to push the box shadow out on Firefox */\n\tbox-decoration-break: clone;\n`;\n\nconst immersiveStyles = css`\n\tmin-height: 112px;\n\tpadding-bottom: ${space[9]}px;\n\tpadding-left: ${space[1]}px;\n\t${from.mobileLandscape} {\n\t\tpadding-left: ${space[3]}px;\n\t}\n\t${from.tablet} {\n\t\tpadding-left: ${space[1]}px;\n\t}\n\tmargin-right: ${space[5]}px;\n`;\n\nconst reducedBottomPadding = css`\n\tpadding-bottom: ${space[4]}px;\n`;\n\nconst darkBackground = (palette: Palette) => css`\n\tbackground-color: ${palette.background.headline};\n`;\n\nconst invertedText = css`\n\twhite-space: pre-wrap;\n\tpadding-bottom: ${space[1]}px;\n\tpadding-right: ${space[1]}px;\n`;\n\nconst maxWidth = css`\n\t${from.desktop} {\n\t\tmax-width: 620px;\n\t}\n`;\n\nconst invertedWrapper = css`\n\t/*\n        Because we use box-shadow (to get clean and even background styles\n        even when lines wrap) we need a margin on this wrapper div to\n        shift everything back to the right\n    */\n\tmargin-left: 6px;\n`;\n\nconst immersiveWrapper = css`\n\t/*\n        Make sure we vertically align the headline font with the body font\n    */\n\tmargin-left: 6px;\n\t${from.tablet} {\n\t\tmargin-left: 16px;\n\t}\n\t${from.leftCol} {\n\t\tmargin-left: 25px;\n\t}\n\t/*\n        We need this grow to ensure the headline fills the main content column\n    */\n\tflex-grow: 1;\n\t/*\n        This z-index is what ensures the headline text shows above the pseudo black\n        box that extends the black background to the right\n    */\n\t${getZIndex('articleHeadline')}\n\t${until.mobileLandscape} {\n\t\tmargin-right: 40px;\n\t}\n`;\n\n// Due to MainMedia using position: relative, this seems to effect the rendering order\n// To mitigate we use z-index\n// TODO: find a cleaner solution\nconst zIndex = css`\n\tz-index: 1;\n`;\n\nconst ageWarningMargins = (format: ArticleFormat) =>\n\tformat.display === ArticleDisplay.Immersive\n\t\t? css`\n\t\t\t\tmargin-left: 0px;\n\t\t\t\tmargin-bottom: 0px;\n\n\t\t\t\t${from.tablet} {\n\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t}\n\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t}\n\t\t  `\n\t\t: css`\n\t\t\t\tmargin-top: 12px;\n\t\t\t\tmargin-left: -10px;\n\t\t\t\tmargin-bottom: 6px;\n\n\t\t\t\t${from.tablet} {\n\t\t\t\t\tmargin-left: -20px;\n\t\t\t\t}\n\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\tmargin-left: -10px;\n\t\t\t\t\tmargin-top: 0;\n\t\t\t\t}\n\t\t  `;\n\nconst backgroundStyles = (palette: Palette) => css`\n\tbackground-color: ${palette.background.ageWarning};\n`;\n\nconst WithAgeWarning = ({\n\ttags,\n\twebPublicationDateDeprecated,\n\tformat,\n\tchildren,\n}: {\n\ttags: TagType[];\n\twebPublicationDateDeprecated: string;\n\tformat: ArticleFormat;\n\tchildren: React.ReactNode;\n}) => {\n\tconst palette = decidePalette(format);\n\tconst age = getAgeWarning(tags, webPublicationDateDeprecated);\n\n\tif (age) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div\n\t\t\t\t\tcss={[backgroundStyles(palette), ageWarningMargins(format)]}\n\t\t\t\t>\n\t\t\t\t\t<AgeWarning age={age} />\n\t\t\t\t</div>\n\t\t\t\t{children}\n\t\t\t\t<AgeWarning age={age} isScreenReader={true} />\n\t\t\t</>\n\t\t);\n\t}\n\n\treturn <>{children}</>;\n};\n\nconst decideBottomPadding = ({\n\tformat,\n\thasStarRating,\n\thasAvatar,\n}: {\n\tformat: ArticleFormat;\n\thasStarRating?: boolean;\n\thasAvatar?: boolean;\n}) => {\n\tconst defaultPadding = css`\n\t\tpadding-bottom: ${space[6]}px;\n\t\t${from.tablet} {\n\t\t\tpadding-bottom: ${space[9]}px;\n\t\t}\n\t`;\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\t// Immersive articles have no padding\n\t\t\treturn '';\n\t\tcase ArticleDisplay.Showcase:\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\t\t// Opinion pieces with an avatar have no padding\n\t\t\t\t\t// Those with no avatar always have 43 pixels of bottom padding\n\t\t\t\t\treturn hasAvatar\n\t\t\t\t\t\t? ''\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tpadding-bottom: 43px;\n\t\t\t\t\t\t  `;\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\t// Don't add extra padding\n\t\t\t\t\treturn '';\n\t\t\t\tdefault:\n\t\t\t\t\t// Non opinion showcase articles always have 24 pixels\n\t\t\t\t\treturn css`\n\t\t\t\t\t\tpadding-bottom: ${space[6]}px;\n\t\t\t\t\t`;\n\t\t\t}\n\t\tdefault: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Review:\n\t\t\t\t\tif (hasStarRating) {\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t\treturn defaultPadding;\n\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\t\t// Opinion pieces with an avatar have no padding\n\t\t\t\t\t// Those with no avatar always have 43 pixels of bottom padding\n\t\t\t\t\treturn hasAvatar\n\t\t\t\t\t\t? ''\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tpadding-bottom: 43px;\n\t\t\t\t\t\t  `;\n\t\t\t\tcase ArticleDesign.Interview:\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\t// Don't add extra padding\n\t\t\t\t\treturn '';\n\t\t\t\tdefault:\n\t\t\t\t\treturn defaultPadding;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport const ArticleHeadline = ({\n\theadlineString,\n\tformat,\n\ttags,\n\tbyline,\n\twebPublicationDateDeprecated,\n\thasStarRating,\n\thasAvatar,\n}: Props) => {\n\tconst palette = decidePalette(format);\n\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.PrintShop:\n\t\t\t\t\t// Immersive headlines have two versions, with main media, and (this one) without\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tjumboFont,\n\t\t\t\t\t\t\t\t\t\tmaxWidth,\n\t\t\t\t\t\t\t\t\t\timmersiveStyles,\n\t\t\t\t\t\t\t\t\t\tdisplayBlock,\n\t\t\t\t\t\t\t\t\t\treducedBottomPadding,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tlightFont,\n\t\t\t\t\t\t\t\t\t\tinvertedText,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t\t{byline && (\n\t\t\t\t\t\t\t\t<HeadlineByline\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tbyline={byline}\n\t\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tdefault:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t// Immersive headlines with main media present, are large and inverted with\n\t\t\t\t\t\t// a black background. They also have no padding and we want to avoid any\n\t\t\t\t\t\t// wrapper div as this affects the z-index stack\n\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\timmersiveWrapper,\n\t\t\t\t\t\t\t\t\tdarkBackground(palette),\n\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tformat.theme === ArticleSpecial.Labs\n\t\t\t\t\t\t\t\t\t\t\t? jumboLabsFont\n\t\t\t\t\t\t\t\t\t\t\t: jumboFont,\n\t\t\t\t\t\t\t\t\t\tmaxWidth,\n\t\t\t\t\t\t\t\t\t\tinvertedStyles(palette),\n\t\t\t\t\t\t\t\t\t\timmersiveStyles,\n\t\t\t\t\t\t\t\t\t\tdisplayBlock,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\tcase ArticleDisplay.NumberedList:\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\tformat,\n\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t>\n\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\tboldFont,\n\t\t\t\t\t\t\t\ttopPadding,\n\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t</div>\n\t\t\t);\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.Standard:\n\t\tdefault: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Review:\n\t\t\t\tcase ArticleDesign.Recipe:\n\t\t\t\tcase ArticleDesign.Feature:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tboldFont,\n\t\t\t\t\t\t\t\t\t\ttopPadding,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tlightFont,\n\t\t\t\t\t\t\t\t\t\ttopPadding,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t\t{byline && (\n\t\t\t\t\t\t\t\t<HeadlineByline\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tbyline={byline}\n\t\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tlightFont,\n\t\t\t\t\t\t\t\t\t\ttopPadding,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase ArticleDesign.Analysis:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tstandardFont,\n\t\t\t\t\t\t\t\t\t\ttopPadding,\n\t\t\t\t\t\t\t\t\t\tunderlinedStyles(\n\t\t\t\t\t\t\t\t\t\t\tpalette.background\n\t\t\t\t\t\t\t\t\t\t\t\t.analysisUnderline,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase ArticleDesign.Interview:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t// Inverted headlines have a wrapper div for positioning\n\t\t\t\t\t\t// and a black background (only for the text)\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\tshiftSlightly,\n\t\t\t\t\t\t\t\tmaxWidth,\n\t\t\t\t\t\t\t\tdisplayFlex,\n\t\t\t\t\t\t\t\tdecideBottomPadding({\n\t\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<HeadlineTag\n\t\t\t\t\t\t\t\t\ttagText=\"Interview\"\n\t\t\t\t\t\t\t\t\tpalette={palette}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tinvertedFont,\n\t\t\t\t\t\t\t\t\t\tinvertedWrapper,\n\t\t\t\t\t\t\t\t\t\tzIndex,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\t\tdarkBackground(palette),\n\t\t\t\t\t\t\t\t\t\t\tinvertedStyles(palette),\n\t\t\t\t\t\t\t\t\t\t\tdisplayInline,\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t\t{byline && (\n\t\t\t\t\t\t\t\t<HeadlineByline\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tbyline={byline}\n\t\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tstandardFont,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t\tpadding-bottom: ${space[9]}px;\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase ArticleDesign.Interactive:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\tdecideBottomPadding({\n\t\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\t\tinteractiveLegacyClasses.headline\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tstandardFont,\n\t\t\t\t\t\t\t\t\t\ttopPadding,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tdefault:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={decideBottomPadding({\n\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\thasStarRating,\n\t\t\t\t\t\t\t\thasAvatar,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<WithAgeWarning\n\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<h1\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tformat.theme === ArticleSpecial.Labs\n\t\t\t\t\t\t\t\t\t\t\t? labsFont\n\t\t\t\t\t\t\t\t\t\t\t: standardFont,\n\t\t\t\t\t\t\t\t\t\ttopPadding,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text.headline};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{curly(headlineString)}\n\t\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t</WithAgeWarning>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleLastUpdated.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":11,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":11,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { decidePalette } from '../lib/decidePalette';\nimport { ArticleLastUpdated } from './ArticleLastUpdated';\n\nexport default {\n\tcomponent: ArticleLastUpdated,\n\ttitle: 'Components/ArticleLastUpdated',\n};\n\nexport const LiveBlog = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\ttheme: ArticlePillar.News,\n\t};\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tbackground: ${palette.background.standfirst};\n\t\t\t`}\n\t\t>\n\t\t\t<ArticleLastUpdated format={format} lastUpdated={1641038370000} />\n\t\t</div>\n\t);\n};\n\nexport const DeadBlog = () => {\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.DeadBlog,\n\t\ttheme: ArticlePillar.News,\n\t};\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tbackground: ${palette.background.standfirst};\n\t\t\t`}\n\t\t>\n\t\t\t<ArticleLastUpdated format={format} lastUpdated={1641038370000} />\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleLastUpdated.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, timeAgo } from '@guardian/libs';\nimport { textSans } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Island } from './Island';\nimport { PulsingDot } from './PulsingDot.importable';\n\nconst lastUpdatedStyles = (palette: Palette) => css`\n\t${textSans.small()}\n\tpadding-bottom: 0.125rem;\n\tpadding-top: 0.125rem;\n\tcolor: ${palette.text.lastUpdated};\n`;\n\nconst livePulseIconStyles = (palette: Palette) => css`\n\t${textSans.small({ fontWeight: 'bold' })}\n\tcolor: ${palette.text.standfirst};\n`;\n\ntype Props = {\n\tformat: ArticleFormat;\n\tlastUpdated: number;\n};\n\nexport const ArticleLastUpdated = ({ format, lastUpdated }: Props) => {\n\tconst palette = decidePalette(format);\n\tconst displayString = timeAgo(lastUpdated);\n\tconst date = new Date(lastUpdated);\n\n\treturn (\n\t\t<div css={lastUpdatedStyles(palette)}>\n\t\t\t{format.design === ArticleDesign.LiveBlog && (\n\t\t\t\t<span css={livePulseIconStyles(palette)}>\n\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t<PulsingDot />\n\t\t\t\t\t</Island>\n\t\t\t\t\tLIVE\n\t\t\t\t</span>\n\t\t\t)}\n\t\t\t&nbsp;Updated&nbsp;\n\t\t\t<time\n\t\t\t\tdateTime={date.toString()}\n\t\t\t\tdata-relativeformat=\"med\"\n\t\t\t\tdata-gu-marker=\"liveblog-last-updated\"\n\t\t\t>\n\t\t\t\t{displayString}\n\t\t\t</time>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleMeta.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":71,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":99,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":99,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":146,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":146,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":175,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":175,"endColumn":54},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":205,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":205,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":234,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":234,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":263,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":263,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":292,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":292,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":321,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":321,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":350,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":350,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":383,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":383,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport {\n\tgetAllThemes,\n\tgetThemeNameAsString,\n} from '../../../../common-rendering/src/fixtures/article';\nimport { ArticleMeta } from './ArticleMeta';\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 220px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst tagsWithLargeBylineImage = [\n\t{\n\t\tid: 'profile/lanre-bakare',\n\t\ttype: 'Contributor',\n\t\ttitle: 'Lanre Bakare',\n\t\ttwitterHandle: 'lanre_bakare',\n\t\tbylineImageUrl:\n\t\t\t'https://i.guim.co.uk/img/uploads/2017/10/06/Lanre-Bakare,-L.png?width=300&quality=85&auto=format&fit=max&s=afa36cd9b80bea5e98f10280aea4d0e4',\n\t\tbylineLargeImageUrl:\n\t\t\t'https://i.guim.co.uk/img/uploads/2017/10/06/Lanre-Bakare,-L.png?width=300&quality=85&auto=format&fit=max&s=afa36cd9b80bea5e98f10280aea4d0e4',\n\t},\n];\n\nconst tagsWithSmallBylineImage = [\n\t{\n\t\tid: 'profile/nicola-slawson',\n\t\ttype: 'Contributor',\n\t\ttitle: 'Nicola Slawson',\n\t\tbylineImageUrl:\n\t\t\t'https://i.guim.co.uk/img/uploads/2016/11/01/Nicola_Slawson.jpg?width=140&height=140&quality=85&auto=format&fit=max&s=a1490a494f98d261b6300f865cb60d79',\n\t},\n];\n\nconst tagsWithByTwoContributors = [\n\t{\n\t\tid: 'profile/lanre-bakare',\n\t\ttype: 'Contributor',\n\t\ttitle: 'Lanre Bakare',\n\t\ttwitterHandle: 'lanre_bakare',\n\t\tbylineImageUrl:\n\t\t\t'https://i.guim.co.uk/img/uploads/2017/10/06/Lanre-Bakare,-L.png?width=300&quality=85&auto=format&fit=max&s=afa36cd9b80bea5e98f10280aea4d0e4',\n\t\tbylineLargeImageUrl:\n\t\t\t'https://i.guim.co.uk/img/uploads/2017/10/06/Lanre-Bakare,-L.png?width=300&quality=85&auto=format&fit=max&s=afa36cd9b80bea5e98f10280aea4d0e4',\n\t},\n\t{\n\t\tid: 'profile/another-author',\n\t\ttype: 'Contributor',\n\t\ttitle: 'Another Author',\n\t},\n];\n\nexport default {\n\tcomponent: ArticleMeta,\n\ttitle: 'Components/ArticleMeta',\n};\n\nexport const ArticleStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithLargeBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\nexport const BrandingStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tbranding={{\n\t\t\t\t\tsponsorName: 'Humanity United',\n\t\t\t\t\tlogo: {\n\t\t\t\t\t\tsrc: 'https://static.theguardian.com/commercial/sponsor/14/May/2018/533d381b-ac99-4e10-83be-8b64a1da9710-hu.png',\n\t\t\t\t\t\tdimensions: { width: 140, height: 90 },\n\t\t\t\t\t\tlink: 'http://www.humanityunited.org/ ',\n\t\t\t\t\t\tlabel: 'Supported by',\n\t\t\t\t\t},\n\t\t\t\t\tlogoForDarkBackground: {\n\t\t\t\t\t\tsrc: 'https://static.theguardian.com/commercial/sponsor/14/May/2018/4192d462-d794-4f07-a43c-6b546f4dcd93-hu-white.png',\n\t\t\t\t\t\tdimensions: { width: 140, height: 39 },\n\t\t\t\t\t\tlink: 'http://www.humanityunited.org/ ',\n\t\t\t\t\t\tlabel: 'Supported by',\n\t\t\t\t\t},\n\t\t\t\t\taboutThisLink:\n\t\t\t\t\t\t'https://www.theguardian.com/info/2016/jan/25/content-funding',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithLargeBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\n\nArticleStory.story = { name: 'Article' };\n\nexport const FeatureStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithLargeBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nFeatureStory.story = { name: 'Feature' };\n\nexport const FeatureStoryWithSmallBylineImage = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Nicola Slawson',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithSmallBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nFeatureStoryWithSmallBylineImage.story = {\n\tname: 'Feature with Small Byline Image',\n};\n\nexport const SpecialReportStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithLargeBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nSpecialReportStory.story = { name: 'SpecialReport' };\n\nexport const CommentStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithLargeBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nCommentStory.story = { name: 'Comment' };\n\nexport const InterviewStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Interview,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithLargeBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nInterviewStory.story = { name: 'Interview' };\n\nexport const ImmersiveStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithLargeBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nImmersiveStory.story = { name: 'Immersive' };\n\nexport const TwoContributorsStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithByTwoContributors}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nTwoContributorsStory.story = { name: 'Feature, with two contributors' };\n\nexport const DeadBlogStory = () => {\n\treturn (\n\t\t<>\n\t\t\t{getAllThemes({\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t}).map((format) => (\n\t\t\t\t<Container>\n\t\t\t\t\t<p>{getThemeNameAsString(format)}</p>\n\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tpageId=\"\"\n\t\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\t\tauthor={{\n\t\t\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttags={tagsWithByTwoContributors}\n\t\t\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\t\t\tsecondaryDateline=\"Last modified on Sun 12 Jan 2020 21.00 GMT\"\n\t\t\t\t\t\tisCommentable={false}\n\t\t\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\t\t\tshortUrlId=\"\"\n\t\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\t\tshowShareCount={true}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t))}\n\t\t</>\n\t);\n};\nDeadBlogStory.story = { name: 'Deadblog - All pillars' };\n\nexport const Dateline = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tauthor={{\n\t\t\t\t\tbyline: 'Lanre Bakare',\n\t\t\t\t\ttwitterHandle: 'lanre_bakare',\n\t\t\t\t}}\n\t\t\t\ttags={tagsWithLargeBylineImage}\n\t\t\t\tprimaryDateline=\"Sun 12 Jan 2020 18.00 GMT\"\n\t\t\t\tsecondaryDateline=\"\"\n\t\t\t\tisCommentable={false}\n\t\t\t\tdiscussionApiUrl=\"\"\n\t\t\t\tshortUrlId=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tshowShareCount={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nDateline.story = { name: 'With no secondary dateline' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleMeta.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleMeta.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":153,"column":47,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":153,"endColumn":49},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":164,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":197,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":210,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":210,"endColumn":52},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":211,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":227,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":230,"column":55,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":230,"endColumn":57},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":231,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":246,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":300,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":314,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":375,"column":31,"nodeType":"Punctuator","messageId":"preferNullish","endLine":375,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7631,7633],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tbetween,\n\tborder,\n\tfrom,\n\tspace,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { StraightLines } from '@guardian/source-react-components-development-kitchen';\nimport { interactiveLegacyClasses } from '../layouts/lib/interactiveLegacyStyling';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Avatar } from './Avatar';\nimport { Branding } from './Branding.importable';\nimport { CommentCount } from './CommentCount.importable';\nimport { Contributor } from './Contributor';\nimport { Counts } from './Counts';\nimport { Dateline } from './Dateline';\nimport { Island } from './Island';\nimport { ShareCount } from './ShareCount.importable';\nimport { ShareIcons } from './ShareIcons';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tpageId: string;\n\twebTitle: string;\n\tauthor: AuthorType;\n\ttags: TagType[];\n\tprimaryDateline: string;\n\tsecondaryDateline: string;\n\tbranding?: Branding;\n\tdiscussionApiUrl: string;\n\tshortUrlId: string;\n\tisCommentable: boolean;\n\tajaxUrl: string;\n\tshowShareCount: boolean;\n};\n\nconst meta = (format: ArticleFormat) => {\n\tif (\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog\n\t) {\n\t\treturn css`\n\t\t\t${between.tablet.and.leftCol} {\n\t\t\t\torder: 3;\n\t\t\t}\n\n\t\t\tpadding-top: 2px;\n\t\t`;\n\t}\n\n\treturn css`\n\t\t${between.tablet.and.leftCol} {\n\t\t\torder: 3;\n\t\t}\n\n\t\t${until.mobileLandscape} {\n\t\t\tpadding-left: 10px;\n\t\t\tpadding-right: 10px;\n\t\t}\n\n\t\t${from.mobileLandscape} {\n\t\t\tpadding-left: 20px;\n\t\t\tpadding-right: 20px;\n\t\t}\n\n\t\t${from.phablet} {\n\t\t\tpadding-left: 0px;\n\t\t\tpadding-right: 0px;\n\t\t}\n\n\t\tpadding-top: 2px;\n\t`;\n};\n\nconst metaFlex = css`\n\tmargin-bottom: 6px;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tflex-wrap: wrap;\n`;\n\nconst stretchLines = css`\n\tdisplay: block;\n\n\t${until.phablet} {\n\t\tmargin-left: -20px;\n\t\tmargin-right: -20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n`;\n\nconst borderColourWhenBackgroundDark = css`\n\t${until.desktop} {\n\t\tborder-top: 1px solid rgba(255, 255, 255, 0.4);\n\t}\n`;\n\nconst metaExtras = (palette: Palette) => css`\n\tborder-top: 1px solid ${palette.border.article};\n\tflex-grow: 1;\n\tpadding-top: 6px;\n\n\t${until.phablet} {\n\t\tmargin-left: -20px;\n\t\tmargin-right: -20px;\n\t\tpadding-left: 20px;\n\t\tpadding-right: 20px;\n\t}\n\n\t${until.mobileLandscape} {\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t\tpadding-left: 10px;\n\t\tpadding-right: 10px;\n\t}\n\n\t${between.leftCol.and.wide} {\n\t\tpadding-bottom: 6px;\n\t}\n`;\n\nconst metaNumbers = (palette: Palette) => css`\n\tborder-top: 1px solid ${palette.border.article};\n\tdisplay: flex;\n\tflex-grow: 1;\n\n\tjustify-content: flex-end;\n\t${between.leftCol.and.wide} {\n\t\tjustify-content: flex-start;\n\t}\n\n\t${until.phablet} {\n\t\tmargin-left: -20px;\n\t\tmargin-right: -20px;\n\t\tpadding-left: 20px;\n\t\tpadding-right: 20px;\n\t}\n\n\t${until.mobileLandscape} {\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t\tpadding-left: 10px;\n\t\tpadding-right: 10px;\n\t}\n`;\n\nconst metaContainer = (format: ArticleFormat) => {\n\tconst defaultMargins = css`\n\t\t${until.phablet} {\n\t\t\tmargin-left: -20px;\n\t\t\tmargin-right: -20px;\n\t\t}\n\t\t${until.mobileLandscape} {\n\t\t\tmargin-left: -10px;\n\t\t\tmargin-right: -10px;\n\t\t}\n\t`;\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.PhotoEssay:\n\t\t\t\t\treturn format.theme === ArticleSpecial.Labs\n\t\t\t\t\t\t? defaultMargins\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\t${until.phablet} {\n\t\t\t\t\t\t\t\t\tmargin-left: -20px;\n\t\t\t\t\t\t\t\t\tmargin-right: -20px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t${until.mobileLandscape} {\n\t\t\t\t\t\t\t\t\tmargin-left: -10px;\n\t\t\t\t\t\t\t\t\tmargin-right: -10px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t${from.wide} {\n\t\t\t\t\t\t\t\t\tmargin-left: 40px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t  `;\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\tcase ArticleDesign.DeadBlog: {\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn defaultMargins;\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst getBylineImageUrl = (tags: TagType[]) => {\n\tconst contributorTag = tags.find((tag) => tag.type === 'Contributor');\n\treturn contributorTag?.bylineLargeImageUrl;\n};\n\nconst getAuthorName = (tags: TagType[]) => {\n\tconst contributorTag = tags.find((tag) => tag.type === 'Contributor');\n\treturn contributorTag?.title;\n};\n\nconst shouldShowAvatar = (format: ArticleFormat) => {\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn false;\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Feature:\n\t\t\t\tcase ArticleDesign.Review:\n\t\t\t\tcase ArticleDesign.Recipe:\n\t\t\t\tcase ArticleDesign.Interview:\n\t\t\t\t\treturn true;\n\t\t\t\tdefault:\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst shouldShowContributor = (format: ArticleFormat) => {\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.NumberedList:\n\t\t\treturn true;\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn false;\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.Standard: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\t\treturn false;\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst AvatarContainer = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 140px;\n\t\t\theight: 140px;\n\t\t\tmargin-top: 6px;\n\t\t\tmargin-right: 10px;\n\t\t\tmargin-bottom: 12px;\n\t\t\tmargin-left: 0px;\n\n\t\t\t${until.leftCol} {\n\t\t\t\twidth: 60px;\n\t\t\t\theight: 60px;\n\t\t\t\tmargin-top: 3px;\n\t\t\t\tmargin-right: 10px;\n\t\t\t\tmargin-bottom: 12px;\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst RowBelowLeftCol = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\n\t\t\t${until.leftCol} {\n\t\t\t\tflex-direction: row;\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst metaExtrasLiveBlog = css`\n\t${until.phablet} {\n\t\tmargin-right: 0;\n\t}\n`;\n\nconst metaNumbersExtrasLiveBlog = css`\n\t${until.phablet} {\n\t\tmargin-left: 0;\n\t}\n`;\n\nexport const ArticleMeta = ({\n\tbranding,\n\tformat,\n\tpageId,\n\twebTitle,\n\tauthor,\n\ttags,\n\tprimaryDateline,\n\tsecondaryDateline,\n\tdiscussionApiUrl,\n\tshortUrlId,\n\tisCommentable,\n\tajaxUrl,\n\tshowShareCount,\n}: Props) => {\n\tconst bylineImageUrl = getBylineImageUrl(tags);\n\tconst authorName = getAuthorName(tags);\n\n\tconst showAvatarFromAuthor = () => {\n\t\tif (\n\t\t\tauthor.byline === undefined ||\n\t\t\t!author.byline ||\n\t\t\tauthor.byline === ''\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tconst onlyOneContributor: boolean =\n\t\ttags.filter((tag) => tag.type === 'Contributor').length === 1;\n\n\tconst showAvatar =\n\t\tonlyOneContributor &&\n\t\tshowAvatarFromAuthor() &&\n\t\tshouldShowAvatar(format);\n\tconst isInteractive = format.design === ArticleDesign.Interactive;\n\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={\n\t\t\t\tisInteractive ? interactiveLegacyClasses.metaContainer : ''\n\t\t\t}\n\t\t\tcss={metaContainer(format)}\n\t\t>\n\t\t\t<div css={meta(format)}>\n\t\t\t\t{branding && (\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<Branding branding={branding} palette={palette} />\n\t\t\t\t\t</Island>\n\t\t\t\t)}\n\t\t\t\t{format.theme === ArticleSpecial.Labs ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\tcssOverrides={stretchLines}\n\t\t\t\t\t\t\tcount={1}\n\t\t\t\t\t\t\tcolor={border.primary}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\theight: ${space[1]}px;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t''\n\t\t\t\t)}\n\t\t\t\t<RowBelowLeftCol>\n\t\t\t\t\t<>\n\t\t\t\t\t\t{showAvatar && bylineImageUrl && (\n\t\t\t\t\t\t\t<AvatarContainer>\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\timageSrc={bylineImageUrl}\n\t\t\t\t\t\t\t\t\timageAlt={authorName || 'Author image'}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</AvatarContainer>\n\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{shouldShowContributor(format) && (\n\t\t\t\t\t\t\t\t<Contributor\n\t\t\t\t\t\t\t\t\tauthor={author}\n\t\t\t\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Dateline\n\t\t\t\t\t\t\t\tprimaryDateline={primaryDateline}\n\t\t\t\t\t\t\t\tsecondaryDateline={secondaryDateline}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t</RowBelowLeftCol>\n\t\t\t\t<div data-print-layout=\"hide\" css={metaFlex}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tisInteractive\n\t\t\t\t\t\t\t\t? interactiveLegacyClasses.shareIcons\n\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tmetaExtras(palette),\n\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog &&\n\t\t\t\t\t\t\t\tcss(\n\t\t\t\t\t\t\t\t\tborderColourWhenBackgroundDark,\n\t\t\t\t\t\t\t\t\tmetaExtrasLiveBlog,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ShareIcons\n\t\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\t\twebTitle={webTitle}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tdisplayIcons={['facebook', 'twitter', 'email']}\n\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\tcontext=\"ArticleMeta\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tisInteractive\n\t\t\t\t\t\t\t\t? interactiveLegacyClasses.shareAndCommentCounts\n\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tmetaNumbers(palette),\n\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog &&\n\t\t\t\t\t\t\t\tcss(\n\t\t\t\t\t\t\t\t\tborderColourWhenBackgroundDark,\n\t\t\t\t\t\t\t\t\tmetaNumbersExtrasLiveBlog,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Counts format={format}>\n\t\t\t\t\t\t\t{/* The meta-number css is needed by Counts.tsx */}\n\t\t\t\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t\t\t\t{showShareCount && (\n\t\t\t\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t\t\t<ShareCount\n\t\t\t\t\t\t\t\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\t\t\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t\t\t\t{isCommentable && (\n\t\t\t\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t\t\t<CommentCount\n\t\t\t\t\t\t\t\t\t\t\tdiscussionApiUrl={discussionApiUrl}\n\t\t\t\t\t\t\t\t\t\t\tshortUrlId={shortUrlId}\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Counts>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleTitle.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":63,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":63,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":79,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":79,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":95,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":95,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":116,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":116,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":144,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":144,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":167,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":167,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":190,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":190,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":243,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":243,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":266,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":266,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":289,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":289,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":312,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":312,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":328,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":328,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":351,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":351,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":374,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":374,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":397,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":397,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport {\n\tgetAllThemes,\n\tgetThemeNameAsString,\n} from '../../../../common-rendering/src/fixtures/article';\nimport { ArticleTitle } from './ArticleTitle';\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 200px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\nconst CAPIArticle = {\n\ttags: [],\n\tguardianBaseURL: 'https://theguardian.com',\n\tinLeftCol: true,\n\tfallbackToSection: true,\n\tsectionLabel: 'Section label',\n\tsectionUrl: '/section_url',\n};\nconst brexitCAPI = {\n\t...CAPIArticle,\n\t...{\n\t\tsectionLabel: 'Brexit',\n\t\tsectionUrl: '/brexit',\n\t\tbadge: {\n\t\t\tseriesTag: 'politics/series/brexit-how-it-came-to-this',\n\t\t\timageUrl:\n\t\t\t\t'https://assets.guim.co.uk/images/badges/05c6ace4e60dd0209a3f80eb03e16524/EUReferendumBadge.svg',\n\t\t},\n\t},\n};\n\nconst beyondTheBladeCAPI = {\n\t...CAPIArticle,\n\t...{\n\t\tsectionLabel: 'Beyond the blade',\n\t\tsectionUrl: '/beyond-the-blade',\n\t\tbadge: {\n\t\t\tseriesTag: 'membership/series/beyond-the-blade',\n\t\t\timageUrl:\n\t\t\t\t'https://assets.guim.co.uk/images/badges/bfc00bc58eb966845ccf1200fd8c54e0/beyondthebladebadge.svg',\n\t\t},\n\t},\n};\n\nexport default {\n\tcomponent: ArticleTitle,\n\ttitle: 'Components/ArticleTitle',\n};\n\nexport const defaultStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...brexitCAPI}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\ndefaultStory.story = { name: 'Brexit badge' };\n\nexport const beyondTheBlade = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...beyondTheBladeCAPI}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nbeyondTheBlade.story = { name: 'Beyond the blade badge' };\n\nexport const immersiveComment = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tbackground-color: lightgray;\n\t\t\t\tpadding: 20px;\n\t\t\t`}\n\t\t>\n\t\t\t<ArticleTitle\n\t\t\t\t{...brexitCAPI}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nimmersiveComment.story = { name: 'Immersive comment piece' };\n\nexport const immersiveCommentTag = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tbackground-color: lightgray;\n\t\t\t\tpadding: 20px;\n\t\t\t`}\n\t\t>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: 'Tag title',\n\t\t\t\t\t\ttype: 'Blog',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nimmersiveCommentTag.story = { name: 'Immersive comment piece with Blog tag' };\n\nexport const ImmersiveSeriesTag = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Review,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: 'Series title with the addition of some more text to see how this wraps',\n\t\t\t\t\t\ttype: 'Series',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nImmersiveSeriesTag.story = { name: 'Immersive with a Series tag' };\n\nexport const ArticleBlogTag = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: 'Blog title',\n\t\t\t\t\t\ttype: 'Blog',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nArticleBlogTag.story = { name: 'Article with a Blog tag' };\n\nexport const LiveblogTitle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\t\t\tbackground-color: #005689;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<ArticleTitle\n\t\t\t\t\t{...CAPIArticle}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\ttitle: 'Liveblog title',\n\t\t\t\t\t\t\ttype: 'Blog',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\t\t\tbackground-color: #ffe500;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<ArticleTitle\n\t\t\t\t\t{...CAPIArticle}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\ttitle: 'Match liveblog title',\n\t\t\t\t\t\t\ttype: 'Blog',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t\tisMatch={true}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Container>\n\t);\n};\nLiveblogTitle.story = { name: 'Liveblog title' };\n\nexport const ArticleOpinionTag = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: 'Opinion title',\n\t\t\t\t\t\ttype: 'Opinion',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nArticleOpinionTag.story = { name: 'Article with a Opinion tag' };\n\nexport const ArticleSeriesTag = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: 'Series title',\n\t\t\t\t\t\ttype: 'Series',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nArticleSeriesTag.story = { name: 'Article with a Series tag' };\n\nexport const SpecialReportTitle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: 'Special',\n\t\t\t\t\t\ttype: 'Series',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nSpecialReportTitle.story = { name: 'Special report' };\n\nexport const ArticleNoTags = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nArticleNoTags.story = { name: 'Article with no tags' };\n\nexport const LabsStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: 'Series title',\n\t\t\t\t\t\ttype: 'Series',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nLabsStory.story = { name: 'Labs' };\n\nexport const LongStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: \"Edward Snowden's choice of Hong Kong as haven is a high-stakes gamble\",\n\t\t\t\t\t\ttype: 'Series',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nLongStory.story = { name: 'Long title' };\n\nexport const LongWord = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ArticleTitle\n\t\t\t\t{...CAPIArticle}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '',\n\t\t\t\t\t\ttitle: 'Antidisestablishmentarianism',\n\t\t\t\t\t\ttype: 'Series',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nLongWord.story = { name: 'Long word' };\n\nexport const ArticleDeadBlogTitle = () => {\n\treturn (\n\t\t<>\n\t\t\t{getAllThemes({\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t}).map((format) => (\n\t\t\t\t<div>\n\t\t\t\t\t<p>{getThemeNameAsString(format)}</p>\n\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t{...CAPIArticle}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\t\ttitle: 'Deadblog title',\n\t\t\t\t\t\t\t\ttype: 'Blog',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]}\n\t\t\t\t\t/>\n\t\t\t\t\t<br />\n\t\t\t\t\t<br />\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</>\n\t);\n};\n\nArticleDeadBlogTitle.story = { name: 'Deadblog - All pillars' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ArticleTitle.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":59,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":67,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay } from '@guardian/libs';\nimport { from, until } from '@guardian/source-foundations';\nimport { Badge } from './Badge';\nimport { SeriesSectionLink } from './SeriesSectionLink';\n\ntype Props = {\n\tformat: ArticleFormat;\n\ttags: TagType[];\n\tsectionLabel: string;\n\tsectionUrl: string;\n\tguardianBaseURL: string;\n\tbadge?: BadgeType;\n\tisMatch?: boolean;\n};\n\nconst sectionStyles = css`\n\tpadding-top: 8px;\n\tdisplay: flex;\n\tflex-direction: row;\n\t${from.leftCol} {\n\t\tflex-direction: column;\n\t}\n`;\n\nconst titleBadgeWrapper = css`\n\tmargin-bottom: 6px;\n\tmargin-top: 6px;\n\t${until.leftCol} {\n\t\tdisplay: flex;\n\t\tmargin-right: 10px;\n\t}\n`;\n\nconst badgeContainer = css`\n\tdisplay: flex;\n\tpadding-top: 3px;\n\tpadding-bottom: 6px;\n`;\n\nconst marginTop = css`\n\tmargin-top: 6px;\n`;\n\nconst immersiveMargins = css`\n\tmax-width: 400px;\n\tmargin-bottom: 4px;\n\t/*\n        Make sure we vertically align the title font with the body font\n    */\n\t${from.tablet} {\n\t\tmargin-left: 16px;\n\t}\n\t${from.leftCol} {\n\t\tmargin-left: 25px;\n\t}\n`;\n\nexport const ArticleTitle = ({\n\tformat,\n\ttags,\n\tsectionLabel,\n\tsectionUrl,\n\tguardianBaseURL,\n\tbadge,\n\tisMatch,\n}: Props) => (\n\t<div css={[sectionStyles, badge && badgeContainer]}>\n\t\t{badge && format.display !== ArticleDisplay.Immersive && (\n\t\t\t<div css={titleBadgeWrapper}>\n\t\t\t\t<Badge imageUrl={badge.imageUrl} seriesTag={badge.seriesTag} />\n\t\t\t</div>\n\t\t)}\n\t\t<div\n\t\t\tcss={[\n\t\t\t\tbadge && marginTop,\n\t\t\t\tformat.display === ArticleDisplay.Immersive &&\n\t\t\t\t\tformat.design !== ArticleDesign.PrintShop &&\n\t\t\t\t\timmersiveMargins,\n\t\t\t]}\n\t\t>\n\t\t\t<SeriesSectionLink\n\t\t\t\tformat={format}\n\t\t\t\ttags={tags}\n\t\t\t\tsectionLabel={sectionLabel}\n\t\t\t\tsectionUrl={sectionUrl}\n\t\t\t\tguardianBaseURL={guardianBaseURL}\n\t\t\t\tbadge={badge}\n\t\t\t\tisMatch={isMatch}\n\t\t\t/>\n\t\t</div>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/AudioAtomWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AudioAtom } from '@guardian/atoms-rendering';\nimport {\n\tgetConsentFor,\n\tonConsentChange,\n} from '@guardian/consent-management-platform';\nimport { useEffect, useState } from 'react';\n\ntype Props = {\n\tid: string;\n\ttrackUrl: string;\n\tkicker: string;\n\ttitle?: string | undefined;\n\tduration: number;\n\tpillar: ArticleTheme;\n\tcontentIsNotSensitive: boolean;\n\taCastisEnabled: boolean;\n\treaderCanBeShownAds: boolean;\n};\n\nexport const AudioAtomWrapper = ({\n\tid,\n\ttrackUrl,\n\tkicker,\n\ttitle,\n\tpillar,\n\tduration,\n\tcontentIsNotSensitive,\n\taCastisEnabled,\n\treaderCanBeShownAds,\n}: Props) => {\n\t// *****************\n\t// *     ACast     *\n\t// *****************\n\tconst [shouldUseAcast, setShouldUseAcast] = useState<boolean>(false);\n\tuseEffect(() => {\n\t\tonConsentChange((state) => {\n\t\t\t// Should we use ad enabled audio? If so, then set the shouldUseAcast\n\t\t\t// state to true, triggering a rerender of AudioAtom using a new track url\n\t\t\t// (one with adverts)\n\t\t\tconst consentGiven = getConsentFor('acast', state);\n\t\t\tif (\n\t\t\t\taCastisEnabled &&\n\t\t\t\tconsentGiven &&\n\t\t\t\treaderCanBeShownAds && // Eg. Not a subscriber\n\t\t\t\tcontentIsNotSensitive\n\t\t\t) {\n\t\t\t\tsetShouldUseAcast(true);\n\t\t\t}\n\t\t});\n\t}, [contentIsNotSensitive, aCastisEnabled, readerCanBeShownAds]);\n\n\treturn (\n\t\t<AudioAtom\n\t\t\tid={id}\n\t\t\ttrackUrl={trackUrl}\n\t\t\tkicker={kicker}\n\t\t\ttitle={title}\n\t\t\tpillar={pillar}\n\t\t\tduration={duration}\n\t\t\tshouldUseAcast={shouldUseAcast}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Avatar.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":28,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":42,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":42,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":56,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":56,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":67,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":67,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":81,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":81,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":95,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":95,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { Avatar } from './Avatar';\n\nexport default {\n\tcomponent: Avatar,\n\ttitle: 'Components/Avatar',\n};\n\nconst imageSrc173 =\n\t'https://i.guim.co.uk/img/uploads/2017/10/06/George-Monbiot,-L.png?width=173&quality=85&auto=format&fit=max&s=be5b0d3f3aa55682e4930057fc3929a3';\nconst imageSrc300 =\n\t'https://i.guim.co.uk/img/uploads/2017/10/06/Leah-Harper,-L.png?width=300&quality=85&auto=format&fit=max&s=4530b8769ac9f0b655d77a155ea13852';\nconst imageSrc300Sport =\n\t'https://i.guim.co.uk/img/uploads/2018/05/25/Sid_Lowe,_L.png?width=300&quality=85&auto=format&fit=max&s=4e058df05bd09dd029abe3d23bddb27c';\n\nconst format: ArticleFormat = {\n\ttheme: ArticlePillar.News,\n\tdesign: ArticleDesign.Standard,\n\tdisplay: ArticleDisplay.Standard,\n};\n\nexport const defaultStory = () => (\n\t<div style={{ width: '136px', height: '136px' }}>\n\t\t<Avatar\n\t\t\timageSrc={imageSrc173}\n\t\t\timageAlt=\"The alt of the image\"\n\t\t\tformat={{\n\t\t\t\t...format,\n\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t}}\n\t\t/>\n\t</div>\n);\ndefaultStory.story = { name: 'Medium, Opinion (Rich Links)' };\n\nexport const largeStory = () => (\n\t<div style={{ width: '140px', height: '140px' }}>\n\t\t<Avatar\n\t\t\timageSrc={imageSrc300}\n\t\t\timageAlt=\"The alt of the image\"\n\t\t\tformat={{\n\t\t\t\t...format,\n\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t}}\n\t\t/>\n\t</div>\n);\nlargeStory.story = { name: 'Large, Lifestyle (Byline image - Desktop)' };\n\nexport const largeStoryNews = () => (\n\t<div style={{ width: '140px', height: '140px' }}>\n\t\t<Avatar\n\t\t\timageSrc={imageSrc300}\n\t\t\timageAlt=\"The alt of the image\"\n\t\t\tformat={format}\n\t\t/>\n\t</div>\n);\nlargeStoryNews.story = { name: 'Large, News (Byline image - Desktop)' };\n\nexport const largeStoryCulture = () => (\n\t<div style={{ width: '140px', height: '140px' }}>\n\t\t<Avatar\n\t\t\timageSrc={imageSrc300}\n\t\t\timageAlt=\"The alt of the image\"\n\t\t\tformat={{\n\t\t\t\t...format,\n\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t}}\n\t\t/>\n\t</div>\n);\nlargeStoryCulture.story = { name: 'Large, Culture (Byline image - Desktop)' };\n\nexport const SpecialReport = () => (\n\t<div style={{ width: '140px', height: '140px' }}>\n\t\t<Avatar\n\t\t\timageSrc={imageSrc300}\n\t\t\timageAlt=\"The alt of the image\"\n\t\t\tformat={{\n\t\t\t\t...format,\n\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t}}\n\t\t/>\n\t</div>\n);\nSpecialReport.story = { name: 'Large SpecialReport' };\n\nexport const smallStory = () => (\n\t<div style={{ width: '60px', height: '60px' }}>\n\t\t<Avatar\n\t\t\timageSrc={imageSrc300Sport}\n\t\t\timageAlt=\"The alt of the image\"\n\t\t\tformat={{\n\t\t\t\t...format,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t}}\n\t\t/>\n\t</div>\n);\nsmallStory.story = { name: 'Small, Sport (Byline image - Mobile)' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/BackToTop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Badge.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":31,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":31,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from } from '@guardian/source-foundations';\n\nconst badgeSizingStyles = css`\n\theight: 42px;\n\t${from.leftCol} {\n\t\theight: 54px;\n\t}\n`;\n\nconst badgeWrapper = css`\n\tfloat: left;\n\t${badgeSizingStyles}\n`;\n\nconst imageStyles = css`\n\tdisplay: block;\n\twidth: auto;\n\t${badgeSizingStyles}\n`;\n\nconst badgeLink = css`\n\ttext-decoration: none;\n`;\n\ntype Props = {\n\timageUrl: string;\n\tseriesTag: string;\n};\n\nexport const Badge = ({ imageUrl, seriesTag }: Props) => {\n\tconst urlPath = `/${seriesTag}`;\n\treturn (\n\t\t<div css={badgeWrapper}>\n\t\t\t<a href={urlPath} css={badgeLink} role=\"button\">\n\t\t\t\t<img css={imageStyles} src={imageUrl} alt=\"\" />\n\t\t\t</a>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/BigNumber/BigNumber.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Number0 from './0.svg';\nimport Number1 from './1.svg';\nimport Number10 from './10.svg';\nimport Number2 from './2.svg';\nimport Number3 from './3.svg';\nimport Number4 from './4.svg';\nimport Number5 from './5.svg';\nimport Number6 from './6.svg';\nimport Number7 from './7.svg';\nimport Number8 from './8.svg';\nimport Number9 from './9.svg';\n\n// This file contains an array of elements, but only exposes one.\n\nexport const BigNumber = ({ index }: { index: number }) => {\n\tconst numbers = [\n\t\t<Number0 />,\n\t\t<Number1 />,\n\t\t<Number2 />,\n\t\t<Number3 />,\n\t\t<Number4 />,\n\t\t<Number5 />,\n\t\t<Number6 />,\n\t\t<Number7 />,\n\t\t<Number8 />,\n\t\t<Number9 />,\n\t\t<Number10 />,\n\t];\n\n\treturn numbers[index];\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/BlockquoteBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":26,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":26,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":52,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":52,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { decidePalette } from '../lib/decidePalette';\nimport { BlockquoteBlockComponent } from './BlockquoteBlockComponent';\n\nconst shortQuoteHtml =\n\t'<blockquote class=\"quoted\"> \\n <p>We’ve now got evidence</blockquote>';\nconst blockquoteHtml =\n\t'<blockquote class=\"quoted\"> \\n <p>We’ve now got evidence that under <a href=\"https://www.theguardian.com/politics/boris-johnson\">Boris Johnson</a> the NHS is on the table and will be up for sale. He tried to cover it up in a secret agenda but today it’s been exposed.</p> \\n</blockquote>';\n\nexport default {\n\tcomponent: BlockquoteBlockComponent,\n\ttitle: 'Components/BlockquoteComponent',\n};\n\nconst containerStyles = css`\n\tmax-width: 620px;\n\tmargin: 20px;\n`;\n\nexport const Unquoted = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<h1>Long</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t/>\n\t\t\t<h1>Short</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={shortQuoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nUnquoted.story = { name: 'Unquoted' };\n\nexport const Quoted = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<h1>News</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>Sport</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>Culture</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>Lifestyle</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>Opinion</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>SpecialReport</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>Labs</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>LiveBlog News</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>DeadBlog News</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>LiveBlog News</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t\t<h1>DeadBlog Sport</h1>\n\t\t\t<BlockquoteBlockComponent\n\t\t\t\thtml={blockquoteHtml}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t})}\n\t\t\t\tquoted={true}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nQuoted.story = { name: 'Quoted' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/BlockquoteBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Border.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":5,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":5,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\n\nexport const Border = ({ format }: { format: ArticleFormat }) => (\n\t<div\n\t\tcss={css`\n\t\t\t${from.leftCol} {\n\t\t\t\tborder-left: 1px solid ${decidePalette(format).border.article};\n\t\t\t\theight: 100%;\n\t\t\t}\n\t\t`}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Branding.importable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":40,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":40,"endColumn":15},{"ruleId":"react/jsx-curly-newline","severity":1,"message":"Unexpected newline before '}'.","line":54,"column":6,"nodeType":"Punctuator","messageId":"unexpectedBefore","endLine":54,"endColumn":7,"fix":{"range":[1216,1222],"text":""}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport { neutral, textSans, until } from '@guardian/source-foundations';\nimport { trackSponsorLogoLinkClick } from '../browser/ga/ga';\n\nconst brandingStyle = css`\n\tpadding-bottom: 10px;\n`;\n\nconst brandingLabelStyle = css`\n\t${textSans.xxsmall()};\n\tcolor: ${neutral[20]};\n`;\n\nconst brandingLogoStyle = css`\n\t${until.phablet} {\n\t\tmax-width: 140px;\n\t}\n\tmax-width: 280px;\n\twidth: 100%;\n\tpadding: 10px 0;\n\timg {\n\t\tmax-width: 100%;\n\t}\n`;\n\nconst brandingAboutLink = (palette: Palette) => css`\n\tcolor: ${palette.text.branding};\n\t${textSans.xxsmall()}\n\tdisplay: block;\n\ttext-decoration: none;\n\t&:hover {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nexport const Branding: React.FC<{\n\tbranding: Branding;\n\tpalette: Palette;\n}> = ({ branding, palette }) => {\n\tif (!branding) return null;\n\treturn (\n\t\t<div css={brandingStyle}>\n\t\t\t<div css={brandingLabelStyle}>{branding.logo.label}</div>\n\t\t\t<div css={brandingLogoStyle}>\n\t\t\t\t<a\n\t\t\t\t\thref={branding.logo.link}\n\t\t\t\t\tdata-sponsor={branding.sponsorName.toLowerCase()}\n\t\t\t\t\trel=\"nofollow\"\n\t\t\t\t\taria-label={`Visit the ${branding.sponsorName} website`}\n\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\ttrackSponsorLogoLinkClick(\n\t\t\t\t\t\t\tbranding.sponsorName.toLowerCase(),\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t\tdata-cy=\"branding-logo\"\n\t\t\t\t>\n\t\t\t\t\t<img src={branding.logo.src} alt={branding.sponsorName} />\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t\t<a href={branding.aboutThisLink} css={brandingAboutLink(palette)}>\n\t\t\t\tAbout this content\n\t\t\t</a>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/BrazeMessaging.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { log } from '@guardian/libs';\nimport { useBraze } from '../lib/useBraze';\n\ntype Props = {\n\tidApiUrl: string;\n};\n\n/**\n * This component ensures we call buildBrazeMessaging at least once\n * on every page\n */\nexport const BrazeMessaging = ({ idApiUrl }: Props) => {\n\tconst { brazeMessages } = useBraze(idApiUrl);\n\n\tif (brazeMessages) {\n\t\tlog('tx', 'Braze Messages Interface loaded', brazeMessages);\n\t}\n\n\t// we don’t render anything\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Byline.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":86,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":92,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleSpecial } from '@guardian/libs';\nimport { headline, textSans, until } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\ttext: string;\n\tformat: ArticleFormat;\n\tcontainerPalette?: DCRContainerPalette;\n\tsize: SmallHeadlineSize;\n\tisCard?: boolean;\n};\n\nconst bylineStyles = (size: SmallHeadlineSize, format: ArticleFormat) => {\n\tconst baseStyles = css`\n\t\tdisplay: block;\n\t\tfont-style: italic;\n\t`;\n\n\tswitch (size) {\n\t\tcase 'large': {\n\t\t\tif (format.theme === ArticleSpecial.Labs) {\n\t\t\t\treturn css`\n\t\t\t\t\t${baseStyles};\n\t\t\t\t\t${textSans.large()};\n\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\tline-height: 24px;\n\t\t\t\t\t${until.desktop} {\n\t\t\t\t\t\t${textSans.large()};\n\t\t\t\t\t\tline-height: 20px;\n\t\t\t\t\t}\n\t\t\t\t`;\n\t\t\t}\n\t\t\treturn css`\n\t\t\t\t${baseStyles};\n\t\t\t\t${headline.xsmall()};\n\t\t\t\t${until.desktop} {\n\t\t\t\t\t${headline.xxsmall()};\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t\tcase 'medium': {\n\t\t\tif (format.theme === ArticleSpecial.Labs) {\n\t\t\t\treturn css`\n\t\t\t\t\t${baseStyles};\n\t\t\t\t\t${textSans.large()};\n\t\t\t\t\tline-height: 20px;\n\t\t\t\t\t${until.desktop} {\n\t\t\t\t\t\t${textSans.medium()};\n\t\t\t\t\t\tline-height: 18px;\n\t\t\t\t\t}\n\t\t\t\t`;\n\t\t\t}\n\t\t\treturn css`\n\t\t\t\t${baseStyles};\n\t\t\t\t${headline.xxsmall()};\n\t\t\t\t${until.desktop} {\n\t\t\t\t\t${headline.xxxsmall()};\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t\tcase 'small': {\n\t\t\tif (format.theme === ArticleSpecial.Labs) {\n\t\t\t\treturn css`\n\t\t\t\t\t${baseStyles};\n\t\t\t\t\t${textSans.medium()};\n\t\t\t\t\tline-height: 18px;\n\t\t\t\t`;\n\t\t\t}\n\t\t\treturn css`\n\t\t\t\t${baseStyles};\n\t\t\t\t${headline.xxxsmall()};\n\t\t\t`;\n\t\t}\n\t\tdefault:\n\t\t\treturn css``;\n\t}\n};\n\nconst colourStyles = (palette: Palette, isCard: Props['isCard']) => {\n\treturn css`\n\t\tcolor: ${isCard ? palette.text.cardByline : palette.text.byline};\n\t`;\n};\n\nexport const Byline = ({\n\ttext,\n\tformat,\n\tcontainerPalette,\n\tsize,\n\tisCard,\n}: Props) => {\n\tconst palette = decidePalette(format, containerPalette);\n\treturn (\n\t\t<span css={[bylineStyles(size, format), colourStyles(palette, isCard)]}>\n\t\t\t{text}\n\t\t</span>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/BylineLink.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/BylineLink.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":76,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":76,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tgetBylineComponentsFromTokens,\n\tgetContributorTags,\n} from '../../lib/byline';\n\ntype Props = {\n\tbyline: string;\n\ttags: TagType[];\n};\n\nconst applyCleverOrderingForMatching = (titles: string[]): string[] => {\n\t/*\n\t\tQ: Why does this function exist ?\n\n\t\tA: We had a case where the byline was \"Sam Levin in Los Angeles and Sam Levine in New York\",\n\t\twhich would lead to the regex: Sam Levin|Sam Levine. Unfortunately the first expression would take priority and we would end up\n\t\twith a bylineAsTokens equal to [\n\t\t\t'',\n\t\t\t'Sam Levin',\n\t\t\t' in Los Angeles and ',\n\t\t\t'Sam Levin',\n\t\t\t'e in New York'\n\t\t]\n\n\t\tThe solution here is simply to order the titles in decreasing length. This ensures that in a case where one name is a substring or another\n\t\tname, then the longest name is tried first, preventing the problem we had. We now have a bylineAsTokens equals to [\n\t\t\t'',\n\t\t\t'Sam Levin',\n\t\t\t' in Los Angeles and ',\n\t\t\t'Sam Levine',\n\t\t\t' in New York'\n\t\t]\n\n\t\tThis function doesn't change any thing for the \"standard\" case, but solves the \"Sam Levin|Sam Levine\" case and similar cases.\n\n\t\tps: If one day another problem comes up whose solution would be incompatible with this correction, then a better solution for the matching\n\t\twill have to be invented from the ground up, but for the moment, this will do :)\n\t*/\n\n\treturn titles\n\t\t.sort((a, b) => {\n\t\t\treturn a.length - b.length;\n\t\t})\n\t\t.reverse();\n};\n\n// This crazy function aims to split bylines such as\n// 'Harry Potter in Hogwarts' to ['Harry Potter', 'in Hogwarts']\n// Or\n// 'Jane Doe and John Smith` to ['Jane Doe', ' and ', 'John Smith']\n// It does this so we can have separate links to both contributors\nexport const bylineAsTokens = (byline: string, tags: TagType[]): string[] => {\n\tconst titles = getContributorTags(tags).map((c) => c.title);\n\t// The contributor tag title should exist inside the byline for this regex to work\n\n\tconst regex = new RegExp(\n\t\t`(${applyCleverOrderingForMatching(titles).join('|')})`,\n\t);\n\n\treturn byline.split(regex);\n};\n\nconst ContributorLink: React.FC<{\n\tcontributor: string;\n\tcontributorTagId: string;\n}> = ({ contributor, contributorTagId }) => (\n\t<a\n\t\trel=\"author\"\n\t\tdata-link-name=\"auto tag link\"\n\t\thref={`//www.theguardian.com/${contributorTagId}`}\n\t>\n\t\t{contributor}\n\t</a>\n);\n\nexport const BylineLink = ({ byline, tags }: Props) => {\n\tconst tokens = bylineAsTokens(byline, tags);\n\n\tconst bylineComponents = getBylineComponentsFromTokens(tokens, tags);\n\n\tconst renderedTokens = bylineComponents.map((bylineComponent) => {\n\t\tif (typeof bylineComponent === 'string') {\n\t\t\treturn bylineComponent;\n\t\t}\n\t\treturn (\n\t\t\t<ContributorLink\n\t\t\t\tcontributor={bylineComponent.token}\n\t\t\t\tcontributorTagId={bylineComponent.tag.id}\n\t\t\t\tkey={bylineComponent.tag.id}\n\t\t\t/>\n\t\t);\n\t});\n\n\treturn <>{renderedTokens}</>;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/CheckboxSelect.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[278,281],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[278,281],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":10,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":10,"endColumn":79},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":37,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":37,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Checkbox, CheckboxGroup } from '@guardian/source-react-components';\nimport { FieldLabel } from './FieldLabel';\n\ntype Props = {\n\tformField: CampaignFieldCheckbox;\n\tformData: { [key in string]: string[] };\n\tsetFormData: React.Dispatch<React.SetStateAction<{ [x: string]: any }>>;\n};\n\nexport const CheckboxSelect = ({ formField, formData, setFormData }: Props) => (\n\t<>\n\t\t<FieldLabel formField={formField} />\n\t\t<CheckboxGroup name={formField.name}>\n\t\t\t{formField.options.map((option, index) => {\n\t\t\t\t// data related to this field is mapped to `formData` using `formField.id`\n\t\t\t\t// We cannot assume that the data exists, so we need to check if `formField.id` key exists in `formData`\n\t\t\t\tconst selectedCheckboxesArray =\n\t\t\t\t\tformField.id in formData ? formData[formField.id] : [];\n\n\t\t\t\tconst isCheckboxChecked = !!selectedCheckboxesArray.find(\n\t\t\t\t\t(ele: string) => ele === option.value,\n\t\t\t\t);\n\n\t\t\t\tconst filterOutCheckboxFromArray = () =>\n\t\t\t\t\tselectedCheckboxesArray.filter(\n\t\t\t\t\t\t(ele: string) => ele !== option.value,\n\t\t\t\t\t);\n\n\t\t\t\tconst addCheckboxToArray = () => [\n\t\t\t\t\t...selectedCheckboxesArray,\n\t\t\t\t\toption.value,\n\t\t\t\t];\n\n\t\t\t\treturn (\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tdata-testid={`form-field-${option.value}`}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tlabel={option.label}\n\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\tchecked={isCheckboxChecked}\n\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\tsetFormData({\n\t\t\t\t\t\t\t\t...formData,\n\t\t\t\t\t\t\t\t[formField.id]: isCheckboxChecked\n\t\t\t\t\t\t\t\t\t? filterOutCheckboxFromArray()\n\t\t\t\t\t\t\t\t\t: addCheckboxToArray(),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t</CheckboxGroup>\n\t</>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/FieldLabel.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":18,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":75}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { neutral, textSans } from '@guardian/source-foundations';\n\nconst fieldLabelStyles = css`\n\t${textSans.medium({ fontWeight: 'bold' })}\n`;\n\nconst fieldDescription = css`\n\t${textSans.medium()}\n`;\n\nconst optionalTextStyles = css`\n\t${textSans.small({ fontStyle: 'italic' })}\n\tcolor: ${neutral[46]};\n\tpadding-left: 5px;\n`;\n\nexport const FieldLabel = ({ formField }: { formField: CampaignField }) => (\n\t<label css={fieldLabelStyles} htmlFor={formField.name}>\n\t\t{formField.label}\n\t\t{!formField.required && <span css={optionalTextStyles}>Optional</span>}\n\t\t{formField.description && (\n\t\t\t<div>\n\t\t\t\t<span css={fieldDescription}>\n\t\t\t\t\t{`(${formField.description})`}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t)}\n\t</label>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/FileUpload.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[546,549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[546,549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[618,621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[618,621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":24,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":24,"endColumn":75},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":27,"column":7,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":27,"endColumn":50,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[833,876],"text":"event.target.files?.[0]"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":27,"column":29,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":27,"endColumn":50},{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to attribute where a void return was expected.","line":54,"column":14,"nodeType":"JSXExpressionContainer","messageId":"voidReturnAttribute","endLine":54,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { space, text, textSans } from '@guardian/source-foundations';\nimport { useState } from 'react';\nimport { stringifyFileBase64 } from '../../lib/stringifyFileBase64';\nimport { FieldLabel } from './FieldLabel';\n\nconst fileUploadInputStyles = css`\n\tpadding-top: 10px;\n\tpadding-bottom: 10px;\n`;\n\nconst errorMessagesStyles = css`\n\tpadding-top: ${space[2]}px;\n\tcolor: ${text.error};\n\t${textSans.small({ fontWeight: 'bold' })};\n`;\n\ntype Props = {\n\tformField: CampaignFieldFile;\n\tformData: { [key in string]: any };\n\tsetFormData: React.Dispatch<React.SetStateAction<{ [x: string]: any }>>;\n};\n\nexport const FileUpload = ({ formField, formData, setFormData }: Props) => {\n\tconst [error, setError] = useState('');\n\tconst onSelectFile = async (event: React.ChangeEvent<HTMLInputElement>) => {\n\t\tif (event.target.files && event.target.files[0]) {\n\t\t\tsetError('');\n\t\t\ttry {\n\t\t\t\tconst stringifiedFile = await stringifyFileBase64(\n\t\t\t\t\tevent.target.files[0],\n\t\t\t\t);\n\t\t\t\tsetFormData({\n\t\t\t\t\t...formData,\n\t\t\t\t\t[formField.id]: stringifiedFile,\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\tsetError(\n\t\t\t\t\t'Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files',\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<FieldLabel formField={formField} />\n\t\t\t<input\n\t\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\t\tcss={fileUploadInputStyles}\n\t\t\t\ttype=\"file\"\n\t\t\t\taccept=\"image/*, .pdf\"\n\t\t\t\trequired={formField.required}\n\t\t\t\tonChange={onSelectFile}\n\t\t\t/>\n\t\t\t<p>We accept images and pdfs. Maximum total file size: 6MB</p>\n\t\t\t{error && <div css={errorMessagesStyles}>{error}</div>}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/Form.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":13,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":27,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":44,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tcalloutCampaign,\n\tcalloutCampaignOnlyTwoRadio,\n} from '../../../../fixtures/manual/calloutCampaign';\nimport { Form } from './Form';\n\nexport default {\n\tcomponent: Form,\n\ttitle: 'Components/Callout/Form',\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 630px;\n\t\t\t\tpadding: 15px;\n\t\t\t`}\n\t\t>\n\t\t\t<Form formFields={calloutCampaign.formFields} onSubmit={() => {}} />\n\t\t</div>\n\t);\n};\nDefault.story = { name: 'default' };\n\nexport const WithOnlyTwoRadio = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 630px;\n\t\t\t\tpadding: 15px;\n\t\t\t`}\n\t\t>\n\t\t\t<Form\n\t\t\t\tformFields={calloutCampaignOnlyTwoRadio.formFields}\n\t\t\t\tonSubmit={() => {}}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nWithOnlyTwoRadio.story = { name: 'with only two radio' };\n\nexport const WithError = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 630px;\n\t\t\t\tpadding: 15px;\n\t\t\t`}\n\t\t>\n\t\t\t<Form\n\t\t\t\tformFields={calloutCampaign.formFields}\n\t\t\t\tonSubmit={() => {}}\n\t\t\t\terror=\"I am a form error\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\nWithError.story = { name: 'with errors' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/Form.test.tsx","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":123,"column":0,"nodeType":null,"endLine":123,"endColumn":73},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":152,"column":0,"nodeType":null,"endLine":152,"endColumn":73},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":184,"column":0,"nodeType":null,"endLine":184,"endColumn":73},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":216,"column":0,"nodeType":null,"endLine":216,"endColumn":73},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":269,"column":0,"nodeType":null,"endLine":269,"endColumn":73},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":309,"column":0,"nodeType":null,"endLine":309,"endColumn":73}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [0] on an `any` value.","line":124,"column":10,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":124,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [0] on an `any` value.","line":153,"column":10,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":153,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [0] on an `any` value.","line":185,"column":10,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":185,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [0] on an `any` value.","line":217,"column":10,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":217,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [0] on an `any` value.","line":270,"column":10,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":270,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [0] on an `any` value.","line":310,"column":10,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":310,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { fireEvent, render, screen } from '@testing-library/react';\nimport user from '@testing-library/user-event';\nimport { Form } from './Form';\n\nconst textField = {\n\ttextSize: 50,\n\tname: 'which_event_did_you_attend_and_when',\n\thideLabel: false,\n\tlabel: 'Which event did you attend and when?',\n\tid: '91884886',\n\ttype: 'text',\n\trequired: true,\n} as CampaignFieldText;\n\nconst textAreaField = {\n\tname: 'share_your_experiences_here',\n\tdescription: 'Please include as much detail as possible',\n\thideLabel: false,\n\tlabel: 'Share your experiences here',\n\tid: '91884874',\n\ttype: 'textarea',\n\trequired: true,\n} as CampaignFieldTextArea;\n\nconst fileField = {\n\tname: 'you_can_upload_a_photo_here_if_you_think_it_will_add_to_your_story',\n\thideLabel: false,\n\tlabel: 'You can upload a photo here if you think it will add to your story',\n\tid: '91884877',\n\ttype: 'file',\n\trequired: false,\n} as CampaignFieldFile;\n\nconst radioField = {\n\tname: 'can_we_publish_your_response',\n\toptions: [\n\t\t{\n\t\t\tlabel: 'radio 1',\n\t\t\tvalue: 'radio 1',\n\t\t},\n\t\t{\n\t\t\tlabel: 'radio 2',\n\t\t\tvalue: 'radio 2',\n\t\t},\n\t\t{\n\t\t\tlabel: 'radio 3',\n\t\t\tvalue: 'radio 3',\n\t\t},\n\t],\n\thideLabel: false,\n\tlabel: 'Can we publish your response?',\n\tid: '91884878',\n\ttype: 'radio',\n\trequired: true,\n} as CampaignFieldRadio;\n\nconst checkboxField = {\n\tname: 'can_we_publish_your_response',\n\toptions: [\n\t\t{\n\t\t\tlabel: 'checkbox 1',\n\t\t\tvalue: 'checkbox 1',\n\t\t},\n\t\t{\n\t\t\tlabel: 'checkbox 2',\n\t\t\tvalue: 'checkbox 2',\n\t\t},\n\t\t{\n\t\t\tlabel: 'checkbox 3',\n\t\t\tvalue: 'checkbox 3',\n\t\t},\n\t],\n\thideLabel: false,\n\tlabel: 'Can we publish your response?',\n\tid: '91884871',\n\ttype: 'checkbox',\n\trequired: true,\n} as CampaignFieldCheckbox;\n\nconst selectField = {\n\tname: 'do_you_have_anything_else_to_add',\n\thideLabel: false,\n\tlabel: 'Do you have anything else to add?',\n\tid: '91884881',\n\ttype: 'select',\n\toptions: [\n\t\t{\n\t\t\tlabel: 'selection 1',\n\t\t\tvalue: 'selection 1',\n\t\t},\n\t\t{\n\t\t\tlabel: 'selection 2',\n\t\t\tvalue: 'selection 2',\n\t\t},\n\t],\n\trequired: false,\n} as CampaignFieldSelect;\n\ndescribe('Callout from', () => {\n\tit('should submit text input', () => {\n\t\tconst mockSubmit = jest.fn();\n\t\tconst { getByTestId, queryByText } = render(\n\t\t\t<Form formFields={[textField]} onSubmit={mockSubmit} />,\n\t\t);\n\t\tconst getByFieldId = (fieldId: number | string) =>\n\t\t\tgetByTestId(`form-field-${fieldId}`);\n\n\t\tconst textFieldComponent = getByFieldId(\n\t\t\ttextField.id,\n\t\t) as HTMLInputElement;\n\t\tconst textFieldValue = 'textInput';\n\t\tfireEvent.change(textFieldComponent, {\n\t\t\ttarget: { value: textFieldValue },\n\t\t});\n\t\texpect(textFieldComponent.value).toBe(textFieldValue);\n\n\t\tconst submitButton = queryByText(\n\t\t\t'Share with the Guardian',\n\t\t) as HTMLButtonElement;\n\t\tfireEvent.click(submitButton);\n\n\t\texpect(mockSubmit.mock.calls.length).toBe(1);\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\texpect(mockSubmit.mock.calls[0][0]).toMatchObject({\n\t\t\t[textField.id]: 'textInput',\n\t\t});\n\t});\n\n\tit('should submit textarea input', () => {\n\t\tconst mockSubmit = jest.fn();\n\t\tconst { getByTestId, queryByText } = render(\n\t\t\t<Form formFields={[textAreaField]} onSubmit={mockSubmit} />,\n\t\t);\n\t\tconst getByFieldId = (fieldId: number | string) =>\n\t\t\tgetByTestId(`form-field-${fieldId}`);\n\n\t\tconst textAreaFieldComponent = getByFieldId(\n\t\t\ttextAreaField.id,\n\t\t) as HTMLTextAreaElement;\n\t\tconst textAreaFieldValue = 'textAreaInput';\n\t\tfireEvent.change(textAreaFieldComponent, {\n\t\t\ttarget: { value: textAreaFieldValue },\n\t\t});\n\t\texpect(textAreaFieldComponent.value).toBe(textAreaFieldValue);\n\n\t\tconst submitButton = queryByText(\n\t\t\t'Share with the Guardian',\n\t\t) as HTMLButtonElement;\n\t\tfireEvent.click(submitButton);\n\n\t\texpect(mockSubmit.mock.calls.length).toBe(1);\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\texpect(mockSubmit.mock.calls[0][0]).toMatchObject({\n\t\t\t[textAreaField.id]: 'textAreaInput',\n\t\t});\n\t});\n\n\tit('should submit radio', () => {\n\t\tconst mockSubmit = jest.fn();\n\t\tconst { getByTestId, queryByText } = render(\n\t\t\t<Form formFields={[radioField]} onSubmit={mockSubmit} />,\n\t\t);\n\t\tconst getByFieldId = (fieldId: number | string) =>\n\t\t\tgetByTestId(`form-field-${fieldId}`);\n\n\t\tconst radioFieldComponent1 = getByFieldId(\n\t\t\tradioField.options[0].value,\n\t\t) as HTMLInputElement;\n\t\tfireEvent.click(radioFieldComponent1);\n\t\texpect(radioFieldComponent1.checked).toBe(true);\n\n\t\tconst radioFieldComponent2 = getByFieldId(\n\t\t\tradioField.options[1].value,\n\t\t) as HTMLInputElement;\n\t\tfireEvent.click(radioFieldComponent2);\n\t\texpect(radioFieldComponent2.checked).toBe(true);\n\n\t\tconst submitButton = queryByText(\n\t\t\t'Share with the Guardian',\n\t\t) as HTMLButtonElement;\n\t\tfireEvent.click(submitButton);\n\n\t\texpect(mockSubmit.mock.calls.length).toBe(1);\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\texpect(mockSubmit.mock.calls[0][0]).toMatchObject({\n\t\t\t[radioField.id]: 'radio 2',\n\t\t});\n\t});\n\n\tit('should submit checkbox', () => {\n\t\tconst mockSubmit = jest.fn();\n\t\tconst { getByTestId, queryByText } = render(\n\t\t\t<Form formFields={[checkboxField]} onSubmit={mockSubmit} />,\n\t\t);\n\t\tconst getByFieldId = (fieldId: number | string) =>\n\t\t\tgetByTestId(`form-field-${fieldId}`);\n\n\t\tconst checkBoxFieldComponent1 = getByFieldId(\n\t\t\tcheckboxField.options[0].value,\n\t\t) as HTMLInputElement;\n\t\tfireEvent.click(checkBoxFieldComponent1);\n\t\texpect(checkBoxFieldComponent1.checked).toBe(true);\n\n\t\tconst checkBoxFieldComponent3 = getByFieldId(\n\t\t\tcheckboxField.options[2].value,\n\t\t) as HTMLInputElement;\n\t\tfireEvent.click(checkBoxFieldComponent3);\n\t\texpect(checkBoxFieldComponent3.checked).toBe(true);\n\n\t\tconst submitButton = queryByText(\n\t\t\t'Share with the Guardian',\n\t\t) as HTMLButtonElement;\n\t\tfireEvent.click(submitButton);\n\n\t\texpect(mockSubmit.mock.calls.length).toBe(1);\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\texpect(mockSubmit.mock.calls[0][0]).toMatchObject({\n\t\t\t[checkboxField.id]: ['checkbox 1', 'checkbox 3'],\n\t\t});\n\t});\n\ttest('should upload the file', () => {\n\t\tconst file = new File(['hello'], 'hello.png', { type: 'image/png' });\n\t\tconst mockSubmit = jest.fn();\n\t\tconst { queryByText } = render(\n\t\t\t<Form formFields={[fileField]} onSubmit={mockSubmit} />,\n\t\t);\n\n\t\tconst input = screen.getByTestId(\n\t\t\t`form-field-${fileField.id}`,\n\t\t) as HTMLInputElement;\n\t\tuser.upload(input, file);\n\n\t\tconst inputFiles = input.files ? input.files : [];\n\n\t\texpect(inputFiles[0]).toStrictEqual(file);\n\t\texpect(inputFiles).toHaveLength(1);\n\n\t\tconst submitButton = queryByText(\n\t\t\t'Share with the Guardian',\n\t\t) as HTMLButtonElement;\n\t\tfireEvent.click(submitButton);\n\n\t\texpect(mockSubmit.mock.calls.length).toBe(1);\n\t\t// TODO: test mockSubmit internal\n\t});\n\n\tit('should submit select', () => {\n\t\tconst mockSubmit = jest.fn();\n\t\tconst { getByTestId, queryByText } = render(\n\t\t\t<Form formFields={[selectField]} onSubmit={mockSubmit} />,\n\t\t);\n\t\tconst getByFieldId = (fieldId: number | string) =>\n\t\t\tgetByTestId(`form-field-${fieldId}`);\n\n\t\tconst selectText = 'selection 1';\n\t\tconst selectFieldComponent = getByFieldId(\n\t\t\tselectField.id,\n\t\t) as HTMLSelectElement;\n\t\tfireEvent.change(selectFieldComponent, {\n\t\t\ttarget: { value: selectText },\n\t\t});\n\n\t\tconst submitButton = queryByText(\n\t\t\t'Share with the Guardian',\n\t\t) as HTMLButtonElement;\n\t\tfireEvent.click(submitButton);\n\n\t\texpect(mockSubmit.mock.calls.length).toBe(1);\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\texpect(mockSubmit.mock.calls[0][0]).toMatchObject({\n\t\t\t[selectField.id]: selectText,\n\t\t});\n\t});\n\n\tit('submit multiple values', () => {\n\t\tconst mockSubmit = jest.fn();\n\t\tconst { getByTestId, queryByText } = render(\n\t\t\t<Form\n\t\t\t\tformFields={[radioField, checkboxField]}\n\t\t\t\tonSubmit={mockSubmit}\n\t\t\t/>,\n\t\t);\n\t\tconst getByFieldId = (fieldId: number | string) =>\n\t\t\tgetByTestId(`form-field-${fieldId}`);\n\n\t\tconst radioFieldComponent = getByFieldId(\n\t\t\tradioField.options[0].value,\n\t\t) as HTMLInputElement;\n\t\tfireEvent.click(radioFieldComponent);\n\t\texpect(radioFieldComponent.checked).toBe(true);\n\n\t\tconst checkBoxFieldComponent1 = getByFieldId(\n\t\t\tcheckboxField.options[0].value,\n\t\t) as HTMLInputElement;\n\t\tfireEvent.click(checkBoxFieldComponent1);\n\t\texpect(checkBoxFieldComponent1.checked).toBe(true);\n\n\t\tconst checkBoxFieldComponent2 = getByFieldId(\n\t\t\tcheckboxField.options[1].value,\n\t\t) as HTMLInputElement;\n\t\tfireEvent.click(checkBoxFieldComponent2);\n\t\texpect(checkBoxFieldComponent2.checked).toBe(true);\n\n\t\tconst submitButton = queryByText(\n\t\t\t'Share with the Guardian',\n\t\t) as HTMLButtonElement;\n\t\tfireEvent.click(submitButton);\n\t\texpect(mockSubmit.mock.calls.length).toBe(1);\n\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\texpect(mockSubmit.mock.calls[0][0]).toMatchObject({\n\t\t\t[checkboxField.id]: ['checkbox 1', 'checkbox 2'],\n\t\t\t[radioField.id]: 'radio 1',\n\t\t});\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/Form.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[929,932],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[929,932],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":114,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":114,"endColumn":68},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":116,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":116,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2428,2431],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2428,2431],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":135,"column":11,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":135,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { text, textSans } from '@guardian/source-foundations';\nimport { Button, Link } from '@guardian/source-react-components';\nimport { useState } from 'react';\nimport { FileUpload } from './FileUpload';\nimport { MultiSelect } from './MultiSelect';\nimport { Select } from './Select';\nimport { TextArea } from './TextArea';\nimport { TextInput } from './TextInput';\n\nconst formStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n`;\n\nconst footerPaddingStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tpadding-bottom: 15px;\n`;\n\nconst errorMessagesStyles = css`\n\tpadding-bottom: 10px;\n\tcolor: ${text.error};\n\t${textSans.medium({ fontWeight: 'bold' })};\n`;\n\nconst formFieldWrapperStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\ntype FormDataType = { [key in string]: any };\n\ntype FormFieldProp = {\n\tformField: CampaignFieldType;\n\tformData: FormDataType;\n\tsetFormData: React.Dispatch<React.SetStateAction<FormDataType>>;\n};\n\nconst FormField = ({ formField, formData, setFormData }: FormFieldProp) => {\n\tswitch (formField.type) {\n\t\tcase 'textarea':\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<TextArea\n\t\t\t\t\t\tformField={formField}\n\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\tsetFormData={setFormData}\n\t\t\t\t\t/>\n\t\t\t\t\t<hr />\n\t\t\t\t</>\n\t\t\t);\n\t\tcase 'file':\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<FileUpload\n\t\t\t\t\t\tformField={formField}\n\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\tsetFormData={setFormData}\n\t\t\t\t\t/>\n\t\t\t\t\t<hr />\n\t\t\t\t</>\n\t\t\t);\n\t\tcase 'select':\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tformField={formField}\n\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\tsetFormData={setFormData}\n\t\t\t\t\t/>\n\t\t\t\t\t<hr />\n\t\t\t\t</>\n\t\t\t);\n\t\tcase 'checkbox':\n\t\tcase 'radio':\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\tformField={formField}\n\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\tsetFormData={setFormData}\n\t\t\t\t\t\tmultiple={formField.type === 'checkbox'}\n\t\t\t\t\t/>\n\t\t\t\t\t<hr />\n\t\t\t\t</>\n\t\t\t);\n\t\tdefault: {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tformField={formField}\n\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\tsetFormData={setFormData}\n\t\t\t\t\t/>\n\t\t\t\t\t<hr />\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t}\n};\n\ntype FormProps = {\n\tonSubmit: (formData: FormDataType) => void;\n\tformFields: CampaignFieldType[];\n\terror?: string;\n};\n\nexport const Form = ({ onSubmit, formFields, error }: FormProps) => {\n\tconst [twitterHandle, setTwitterHandle] = useState('');\n\tconst [formData, setFormData] = useState<{ [key in string]: any }>({});\n\n\treturn (\n\t\t<form\n\t\t\taction=\"/formstack-campaign/submit\"\n\t\t\tmethod=\"post\"\n\t\t\tcss={formStyles}\n\t\t\tonSubmit={(e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonSubmit(formData);\n\t\t\t}}\n\t\t>\n\t\t\t{formFields.map((formField, index) => (\n\t\t\t\t<div\n\t\t\t\t\tcss={formFieldWrapperStyles}\n\t\t\t\t\t// we use custom-guardian to find 1st field for accessibility\n\t\t\t\t\t// ideally we should useRef but need to wait for Source to\n\t\t\t\t\t// support React references\n\t\t\t\t\tcustom-guardian=\"callout-form-field\"\n\t\t\t\t\tkey={index}\n\t\t\t\t>\n\t\t\t\t\t<FormField\n\t\t\t\t\t\tformField={formField}\n\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\tsetFormData={setFormData}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\n\t\t\t{/* this element is a H O N £ Y - P 0 T */}\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tleft: -62.5rem;\n\t\t\t\t`}\n\t\t\t\taria-hidden=\"true\"\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\tname=\"twitter-handle\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tid=\"twitter-handle\"\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\tplaceholder=\"@mytwitterhandle\"\n\t\t\t\t\tvalue={twitterHandle}\n\t\t\t\t\tonChange={(e) => setTwitterHandle(e.target.value)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{error && <div css={errorMessagesStyles}>{error}</div>}\n\t\t\t<div css={footerPaddingStyles}>\n\t\t\t\t<Button priority=\"secondary\" size=\"xsmall\" type=\"submit\">\n\t\t\t\t\tShare with the Guardian\n\t\t\t\t</Button>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\ta,\n\t\t\t\t\t\ta:hover {\n\t\t\t\t\t\t\tborder: 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttext-align: right;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tsubdued={true}\n\t\t\t\t\t\tpriority=\"secondary\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\thref=\"https://www.theguardian.com/help/terms-of-service\"\n\t\t\t\t\t>\n\t\t\t\t\t\tTerms and conditions\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/MultiSelect.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[198,201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[198,201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[270,273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[270,273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":11,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CheckboxSelect } from './CheckboxSelect';\nimport { RadioSelect } from './RadioSelect';\n\ntype Props = {\n\tformField: CampaignFieldCheckbox | CampaignFieldRadio;\n\tformData: { [key in string]: any };\n\tsetFormData: React.Dispatch<React.SetStateAction<{ [x: string]: any }>>;\n\tmultiple: boolean;\n};\n\nexport const MultiSelect = ({\n\tformField,\n\tformData,\n\tsetFormData,\n\tmultiple,\n}: Props) => (\n\t<div data-testid={`form-field-${formField.id}`}>\n\t\t{multiple ? (\n\t\t\t<CheckboxSelect\n\t\t\t\tformField={formField as CampaignFieldCheckbox}\n\t\t\t\tformData={formData}\n\t\t\t\tsetFormData={setFormData}\n\t\t\t/>\n\t\t) : (\n\t\t\t<RadioSelect\n\t\t\t\tformField={formField as CampaignFieldRadio}\n\t\t\t\tformData={formData}\n\t\t\t\tsetFormData={setFormData}\n\t\t\t/>\n\t\t)}\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/RadioSelect.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[234,237],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[234,237],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[306,309],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[306,309],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":11,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":17},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":39,"column":12,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":39,"endColumn":17},{"ruleId":"react/jsx-curly-newline","severity":1,"message":"Unexpected newline before '}'.","line":49,"column":7,"nodeType":"Punctuator","messageId":"unexpectedBefore","endLine":49,"endColumn":8,"fix":{"range":[1233,1240],"text":""}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport { Radio, RadioGroup } from '@guardian/source-react-components';\nimport { FieldLabel } from './FieldLabel';\n\ntype FieldProp = {\n\tformField: CampaignFieldRadio;\n\tformData: { [key in string]: any };\n\tsetFormData: React.Dispatch<React.SetStateAction<{ [x: string]: any }>>;\n};\n\nexport const RadioSelect = ({\n\tformField,\n\tformData,\n\tsetFormData,\n}: FieldProp) => (\n\t// work around to enforce `display: flex;` to `RadioGroup`'s fieldset tag\n\t// https://github.com/guardian/source/issues/580\n\t<div\n\t\tcss={css`\n\t\t\tfieldset {\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t`}\n\t>\n\t\t<FieldLabel formField={formField} />\n\t\t<RadioGroup\n\t\t\tname={formField.name}\n\t\t\torientation={\n\t\t\t\tformField.options.length > 2 ? 'vertical' : 'horizontal'\n\t\t\t}\n\t\t>\n\t\t\t{formField.options.map((option, index) => {\n\t\t\t\tconst isRadioChecked =\n\t\t\t\t\tformField.id in formData &&\n\t\t\t\t\tformData[formField.id] === option.value;\n\t\t\t\treturn (\n\t\t\t\t\t<Radio\n\t\t\t\t\t\tdata-testid={`form-field-${option.value}`}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tlabel={option.label}\n\t\t\t\t\t\tvalue={option.value}\n\t\t\t\t\t\tname={`${formField.id}`}\n\t\t\t\t\t\tchecked={!!isRadioChecked}\n\t\t\t\t\t\tonChange={() =>\n\t\t\t\t\t\t\tsetFormData({\n\t\t\t\t\t\t\t\t...formData,\n\t\t\t\t\t\t\t\t[formField.id]: option.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t</RadioGroup>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/Select.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[122,125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[122,125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[194,197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[194,197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":16,"column":5,"nodeType":"ConditionalExpression","messageId":"anyAssignment","endLine":18,"endColumn":10},{"ruleId":"react/jsx-curly-newline","severity":1,"message":"Unexpected newline before '}'.","line":25,"column":4,"nodeType":"Punctuator","messageId":"unexpectedBefore","endLine":25,"endColumn":5,"fix":{"range":[612,616],"text":""}},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":27,"column":5,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":27,"endColumn":22},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":27,"column":5,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":32,"endColumn":7,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[626,783],"text":"formField.options?.map((option, index) => (\n\t\t\t\t\t<option key={index} value={option.value}>\n\t\t\t\t\t\t{option.value}\n\t\t\t\t\t</option>\n\t\t\t\t))"},"desc":"Change to an optional chain."}]},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":29,"column":19,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":29,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { FieldLabel } from './FieldLabel';\n\ntype Props = {\n\tformField: CampaignFieldSelect;\n\tformData: { [key in string]: any };\n\tsetFormData: React.Dispatch<React.SetStateAction<{ [x: string]: any }>>;\n};\n\nexport const Select = ({ formField, formData, setFormData }: Props) => (\n\t<>\n\t\t<FieldLabel formField={formField} />\n\t\t<select\n\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\trequired={formField.required}\n\t\t\tvalue={\n\t\t\t\tformField.id && formField.id in formData\n\t\t\t\t\t? formData[formField.id]\n\t\t\t\t\t: ''\n\t\t\t}\n\t\t\tonChange={(e) =>\n\t\t\t\tsetFormData({\n\t\t\t\t\t...formData,\n\t\t\t\t\t[formField.id]: e.target.value,\n\t\t\t\t})\n\t\t\t}\n\t\t>\n\t\t\t{formField.options &&\n\t\t\t\tformField.options.map((option, index) => (\n\t\t\t\t\t<option key={index} value={option.value}>\n\t\t\t\t\t\t{option.value}\n\t\t\t\t\t</option>\n\t\t\t\t))}\n\t\t</select>\n\t</>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/TextArea.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[327,330],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[327,330],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[399,402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[399,402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":16,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":73},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":23,"column":11,"nodeType":"ConditionalExpression","messageId":"anyAssignment","endLine":23,"endColumn":65},{"ruleId":"react/jsx-curly-newline","severity":1,"message":"Unexpected newline before '}'.","line":29,"column":4,"nodeType":"Punctuator","messageId":"unexpectedBefore","endLine":29,"endColumn":5,"fix":{"range":[805,809],"text":""}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport { space } from '@guardian/source-foundations';\nimport { TextArea as SourceTextArea } from '@guardian/source-react-components';\n\nconst textAreaStyles = css`\n\twidth: 100%;\n\tmargin-top: ${space[2]}px;\n`;\n\ntype Props = {\n\tformField: CampaignFieldTextArea;\n\tformData: { [key in string]: any };\n\tsetFormData: React.Dispatch<React.SetStateAction<{ [x: string]: any }>>;\n};\n\nexport const TextArea = ({ formField, formData, setFormData }: Props) => (\n\t<>\n\t\t<SourceTextArea\n\t\t\tdata-testid={`form-field-${formField.id}`}\n\t\t\tlabel={formField.label}\n\t\t\tcss={textAreaStyles}\n\t\t\toptional={!formField.required}\n\t\t\tvalue={formField.id in formData ? formData[formField.id] : ''}\n\t\t\tonChange={(e) =>\n\t\t\t\tsetFormData({\n\t\t\t\t\t...formData,\n\t\t\t\t\t[formField.id]: e.target.value,\n\t\t\t\t})\n\t\t\t}\n\t\t/>\n\t</>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Callout/TextInput.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":11,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[312,315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[312,315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[384,387],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[384,387],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":23,"column":10,"nodeType":"ConditionalExpression","messageId":"anyAssignment","endLine":23,"endColumn":64},{"ruleId":"react/jsx-curly-newline","severity":1,"message":"Unexpected newline before '}'.","line":29,"column":3,"nodeType":"Punctuator","messageId":"unexpectedBefore","endLine":29,"endColumn":4,"fix":{"range":[839,842],"text":""}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport { space } from '@guardian/source-foundations';\nimport { TextInput as SourceTextInput } from '@guardian/source-react-components';\n\nconst textInputStyles = css`\n\tmargin-top: ${space[2]}px;\n`;\n\ntype Props = {\n\tformField: CampaignFieldText;\n\tformData: { [key in string]: any };\n\tsetFormData: React.Dispatch<React.SetStateAction<{ [x: string]: any }>>;\n};\n\nexport const TextInput = ({ formField, formData, setFormData }: Props) => (\n\t<SourceTextInput\n\t\tcss={textInputStyles}\n\t\tdata-testid={`form-field-${formField.id}`}\n\t\ttype={formField.type}\n\t\tlabel={formField.label}\n\t\tsupporting={formField.description}\n\t\toptional={!formField.required}\n\t\tvalue={formField.id in formData ? formData[formField.id] : ''}\n\t\tonChange={(e) =>\n\t\t\tsetFormData({\n\t\t\t\t...formData,\n\t\t\t\t[formField.id]: e.target.value,\n\t\t\t})\n\t\t}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CalloutBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":125,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3149,3152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3149,3152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":127,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":133,"endColumn":6},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":158,"column":5,"nodeType":"Property","messageId":"anyAssignment","endLine":158,"endColumn":36},{"ruleId":"consistent-return","severity":1,"message":"Async arrow function expected no return value.","line":163,"column":3,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":193,"endColumn":7},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":187,"column":6,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":187,"endColumn":15},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":204,"column":0,"nodeType":null,"endLine":204,"endColumn":58},{"ruleId":"eslint-comments/no-unused-disable","message":"'react-hooks/exhaustive-deps' rule is disabled but never reported.","line":204,"column":31,"severity":1,"nodeType":null,"fix":{"range":[5200,5255],"text":" "},"suggestions":[{"desc":"Remove `eslint-disable` comment.","fix":{"range":[5200,5255],"text":""}}],"endLine":204,"endColumn":58},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":208,"column":0,"nodeType":null,"endLine":208,"endColumn":58},{"ruleId":"eslint-comments/no-unused-disable","message":"'react-hooks/exhaustive-deps' rule is disabled but never reported.","line":208,"column":31,"severity":1,"nodeType":null,"fix":{"range":[5368,5423],"text":" "},"suggestions":[{"desc":"Remove `eslint-disable` comment.","fix":{"range":[5368,5423],"text":""}}],"endLine":208,"endColumn":58},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":213,"column":0,"nodeType":null,"endLine":213,"endColumn":58},{"ruleId":"eslint-comments/no-unused-disable","message":"'react-hooks/exhaustive-deps' rule is disabled but never reported.","line":213,"column":31,"severity":1,"nodeType":null,"fix":{"range":[5634,5689],"text":" "},"suggestions":[{"desc":"Remove `eslint-disable` comment.","fix":{"range":[5634,5689],"text":""}}],"endLine":213,"endColumn":58},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":228,"column":0,"nodeType":null,"endLine":228,"endColumn":74},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":229,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":229,"endColumn":26},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":229,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":229,"endColumn":58,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[6399,6451],"text":"firstFieldElementRef?.focus()"},"desc":"Change to an optional chain."}]},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":237,"column":0,"nodeType":null,"endLine":237,"endColumn":74},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":238,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":238,"endColumn":20},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":238,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":238,"endColumn":46,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[6653,6693],"text":"lastElementRef?.focus()"},"desc":"Change to an optional chain."}]},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":250,"column":0,"nodeType":null,"endLine":250,"endColumn":72},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":251,"column":4,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":251,"endColumn":24},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":251,"column":4,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":251,"endColumn":56,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[7125,7177],"text":"firstFieldElementRef?.focus()"},"desc":"Change to an optional chain."}]},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":258,"column":0,"nodeType":null,"endLine":258,"endColumn":72},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":259,"column":4,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":259,"endColumn":23},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":259,"column":4,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":259,"endColumn":54,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[7433,7483],"text":"expandFormButtonRef?.focus()"},"desc":"Change to an optional chain."}]},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":332,"column":10,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":334,"endColumn":12},{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to attribute where a void return was expected.","line":366,"column":15,"nodeType":"JSXExpressionContainer","messageId":"voidReturnAttribute","endLine":366,"endColumn":25}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":229,"column":6,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":229,"endColumn":59,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":238,"column":6,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":238,"endColumn":47,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":251,"column":4,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":251,"endColumn":57,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":2,"message":"Expected an assignment or function call and instead saw an expression.","line":259,"column":4,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":259,"endColumn":55,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":25,"fixableErrorCount":0,"fixableWarningCount":3,"source":"import { css } from '@emotion/react';\nimport { neutral, textSans } from '@guardian/source-foundations';\nimport { Button } from '@guardian/source-react-components';\nimport { useEffect, useState } from 'react';\nimport MinusIcon from '../../static/icons/minus.svg';\nimport PlusIcon from '../../static/icons/plus.svg';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Form } from './Callout/Form';\n\nconst wrapperStyles = css`\n\tmargin-bottom: 26px;\n\tmargin-top: 16px;\n`;\n\nconst calloutDetailsStyles = css`\n\tborder-top: 1px ${neutral[86]} solid;\n\tborder-bottom: 1px ${neutral[86]} solid;\n\tposition: relative;\n\tpadding-bottom: 10px;\n\n\t/* IE does not support summary HTML elements, so we need to hide children ourself */\n\t:not([open]) > *:not(summary) {\n\t\tdisplay: none;\n\t}\n`;\n\nconst backgroundColorStyle = css`\n\tbackground-color: ${neutral[97]};\n`;\n\nconst speechBubbleWrapperStyles = css`\n\tmargin-right: 10px;\n`;\n\nconst successTextStyles = css`\n\t${textSans.medium({ fontWeight: 'bold' })}\n`;\n\nconst summeryStyles = css`\n\t/* Removing default styles from summery tag */\n\t::-webkit-details-marker {\n\t\tdisplay: none;\n\t}\n\toutline: none;\n\n\t/* We don't want the summary to open when we click anything but the button, so we pointer-event: none the summary */\n\t/* 176da211-05aa-4280-859b-1e3157b3f19e */\n\tpointer-events: none;\n\n\t/*\n        why hide visibility?\n        because we want to prevent the user for tabbing to the summery HTML element\n        without using tabIndex={-1} which would disable focus on all child DOM elements\n\n        NOTE: requires \"visibility: visible;\" on child elements to display and enable focus\n    */\n\tvisibility: hidden;\n\n\ta {\n\t\t/* but we do want to allow click on links */\n\t\tpointer-events: all;\n\t}\n`;\n\nconst summeryContentWrapper = css`\n\tvisibility: visible;\n\tmin-height: 70px;\n\tdisplay: flex;\n\tflex-direction: row;\n`;\n\nconst speechBubbleStyles = (palette: Palette) => css`\n\t${textSans.medium({ fontWeight: 'bold' })}\n\tcolor: ${neutral[100]};\n\tbackground-color: ${palette.background.speechBubble};\n\tmin-width: 88px;\n\tpadding-bottom: 6px;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\t::after {\n\t\tcontent: '';\n\t\twidth: 20px;\n\t\theight: 22px;\n\t\tborder-bottom-right-radius: 18px;\n\t\tposition: absolute;\n\t\tbackground-color: ${palette.background.speechBubble};\n\t}\n`;\n\nconst headingTextHeaderStyles = css`\n\t${textSans.medium({ fontWeight: 'bold' })}\n`;\n\nconst descriptionStyles = css`\n\t${textSans.xxsmall({ fontWeight: 'bold' })}\n`;\n\nconst headingTextStyles = (palette: Palette) => css`\n\ta {\n\t\tcolor: ${palette.text.calloutHeading};\n\t\ttext-decoration: none;\n\t\t:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t}\n`;\n\nconst buttonWrapperStyles = css`\n\tposition: absolute;\n\tcursor: pointer;\n\tmargin-top: -5px;\n\n\tvisibility: visible;\n\n\t/* We need to ensure our pointer-events are turned back on on the button */\n\t/* 176da211-05aa-4280-859b-1e3157b3f19e */\n\tpointer-events: all;\n`;\n\n// Normally forms are in Modals, but here they are embedded into the page\n// we therefore need to only focus on expandFormButtonRef if the form has been closed\n// after it was opened\nlet hasFormBeenOpened = true;\n\ntype FormDataType = { [key in string]: any };\n\nexport const CalloutBlockComponent = ({\n\tcallout,\n\tformat,\n}: {\n\tcallout: CalloutBlockElement;\n\tformat: ArticleFormat;\n}) => {\n\tlet expandFormButtonRef: HTMLButtonElement | null = null;\n\tlet firstFieldElementRef: HTMLElement | null = null;\n\tlet lastElementRef: HTMLButtonElement | null = null;\n\n\tconst [isExpanded, setIsExpanded] = useState(false);\n\tconst [error, setError] = useState('');\n\tconst [submissionSuccess, setSubmissionSuccess] = useState(false);\n\n\tconst palette = decidePalette(format);\n\n\tconst { title, description, formFields } = callout;\n\n\tconst onSubmit = async (formData: FormDataType) => {\n\t\t// Reset error for new submission attempt\n\t\tsetError('');\n\n\t\tif (formData.twitterHandle) {\n\t\t\tsetError('Sorry we think you are a robot.');\n\t\t\treturn;\n\t\t}\n\t\t// need to add prefix `field_` to all keys in form\n\t\tconst formDataWithFieldPrefix = Object.keys(formData).reduce(\n\t\t\t(acc, cur) => ({\n\t\t\t\t...acc,\n\t\t\t\t[`field_${cur}`]: formData[cur],\n\t\t\t}),\n\t\t\t{},\n\t\t);\n\n\t\treturn fetch(callout.calloutsUrl, {\n\t\t\tmethod: 'POST',\n\t\t\tbody: JSON.stringify({\n\t\t\t\tformId: callout.formId,\n\t\t\t\t// TODO: check if we need to send this\n\t\t\t\t'twitter-handle': '',\n\t\t\t\t...formDataWithFieldPrefix,\n\t\t\t}),\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t\t\t},\n\t\t})\n\t\t\t.then((resp) => {\n\t\t\t\tif (resp.status === 201) {\n\t\t\t\t\tsetSubmissionSuccess(true);\n\t\t\t\t\tsetIsExpanded(false);\n\t\t\t\t} else {\n\t\t\t\t\tsetError(\n\t\t\t\t\t\t'Sorry, there was a problem submitting your form. Please try again later.',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((respError) => {\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\trespError,\n\t\t\t\t\t'callout-embed-submission',\n\t\t\t\t);\n\t\t\t\tsetError(\n\t\t\t\t\t'Sorry, there was a problem submitting your form. Please try again later.',\n\t\t\t\t);\n\t\t\t});\n\t};\n\n\t// ***************************\n\t// *     Accessibility       *\n\t// ***************************\n\tuseEffect(() => {\n\t\t// we have to use document.querySelector to find DOM elements\n\t\t// as Source library does not yet support react ref\n\t\t// TODO: use `useRef` once supported in Source\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\texpandFormButtonRef = document.querySelector(\n\t\t\t'button[custom-guardian=\"callout-form-open-button\"]',\n\t\t);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\tfirstFieldElementRef = document.querySelector(`\n            *[custom-guardian=\"callout-form-field\"]:first-of-type input,\n            *[custom-guardian=\"callout-form-field\"]:first-of-type select\n        `);\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\tlastElementRef = document.querySelector(\n\t\t\t'button[custom-guardian=\"callout-form-close-button\"]',\n\t\t);\n\n\t\t// lock shift to the form\n\t\tconst keyListener = (e: KeyboardEvent) => {\n\t\t\t// keyCode 9 is tab key\n\t\t\tif (e.keyCode === 9) {\n\t\t\t\t// If firstElement or lastElement are not defined, do not continue\n\t\t\t\tif (!firstFieldElementRef || !lastElementRef) return;\n\n\t\t\t\t// we use `e.shiftKey` internally to determin the direction of the highlighting\n\t\t\t\t// using document.activeElement and e.shiftKey we can check what should be the next element to be highlighted\n\t\t\t\tif (!e.shiftKey && document.activeElement === lastElementRef) {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\t\t\tfirstFieldElementRef && firstFieldElementRef.focus();\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\te.shiftKey &&\n\t\t\t\t\tdocument.activeElement === firstFieldElementRef\n\t\t\t\t) {\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\t\t\tlastElementRef && lastElementRef.focus(); // The shift key is down so loop focus back to the last item\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener('keydown', keyListener);\n\t\treturn () => document.removeEventListener('keydown', keyListener);\n\t}, [isExpanded]);\n\n\t// on open form, focus on firstFieldElementRef\n\tuseEffect(() => {\n\t\tif (isExpanded && firstFieldElementRef) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\tfirstFieldElementRef && firstFieldElementRef.focus();\n\t\t}\n\t}, [isExpanded, firstFieldElementRef]);\n\n\t// on close form, focus on expandFormButtonRef\n\tuseEffect(() => {\n\t\tif (!isExpanded && expandFormButtonRef && !hasFormBeenOpened) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\texpandFormButtonRef && expandFormButtonRef.focus();\n\t\t}\n\t}, [isExpanded, expandFormButtonRef]);\n\n\t// Normally forms are in Modals, but here they are embedded into the page\n\t// we therefore need to only focus on expandFormButtonRef if the form has been closed\n\t// after it was opened\n\tuseEffect(() => {\n\t\tif (isExpanded) {\n\t\t\thasFormBeenOpened = false;\n\t\t}\n\t}, [isExpanded]);\n\n\t// be able to close the form using the escape key for accessibility\n\tuseEffect(() => {\n\t\tconst keyListener = (e: KeyboardEvent) => {\n\t\t\t// keyCode 27 is the escape key, we want to be able to close the form using it\n\t\t\tif (e.keyCode === 27) {\n\t\t\t\tsetIsExpanded(false);\n\t\t\t}\n\t\t};\n\t\tif (isExpanded) {\n\t\t\tdocument.addEventListener('keydown', keyListener);\n\t\t}\n\t\treturn () => document.removeEventListener('keydown', keyListener);\n\t}, [isExpanded, setIsExpanded]);\n\n\tif (submissionSuccess) {\n\t\treturn (\n\t\t\t<figure data-print-layout=\"hide\" css={wrapperStyles}>\n\t\t\t\t<details\n\t\t\t\t\tcss={[calloutDetailsStyles, backgroundColorStyle]}\n\t\t\t\t\taria-hidden={true}\n\t\t\t\t\topen={isExpanded}\n\t\t\t\t>\n\t\t\t\t\t<summary css={summeryStyles}>\n\t\t\t\t\t\t<div css={summeryContentWrapper}>\n\t\t\t\t\t\t\t<div css={speechBubbleWrapperStyles}>\n\t\t\t\t\t\t\t\t<div css={speechBubbleStyles(palette)}>\n\t\t\t\t\t\t\t\t\t<h4>Share your story</h4>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div css={headingTextStyles(palette)}>\n\t\t\t\t\t\t\t\t<p css={successTextStyles}>\n\t\t\t\t\t\t\t\t\tThank you for your contribution\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</summary>\n\t\t\t\t</details>\n\t\t\t</figure>\n\t\t);\n\t}\n\n\treturn (\n\t\t<figure data-print-layout=\"hide\" css={wrapperStyles}>\n\t\t\t<details\n\t\t\t\tcss={[calloutDetailsStyles, isExpanded && backgroundColorStyle]}\n\t\t\t\taria-hidden={true}\n\t\t\t\topen={isExpanded}\n\t\t\t>\n\t\t\t\t<summary css={summeryStyles}>\n\t\t\t\t\t<div css={summeryContentWrapper}>\n\t\t\t\t\t\t<div css={speechBubbleWrapperStyles}>\n\t\t\t\t\t\t\t<div css={speechBubbleStyles(palette)}>\n\t\t\t\t\t\t\t\t<h4>Share your story</h4>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div css={headingTextStyles(palette)}>\n\t\t\t\t\t\t\t<h4 css={headingTextHeaderStyles}>{title}</h4>\n\t\t\t\t\t\t\t{description && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcss={descriptionStyles}\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t__html: description,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{!isExpanded && (\n\t\t\t\t\t\t<span css={buttonWrapperStyles} aria-hidden=\"true\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t/* TODO: need to find an nicer way of dynamically setting svg dimensions */\n\t\t\t\t\t\t\t\t\tsvg {\n\t\t\t\t\t\t\t\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\t\t\t\t\t\t\t\twidth: 15px !important;\n\t\t\t\t\t\t\t\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\t\t\t\t\t\t\t\theight: 15px !important;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t\t\ticon={<PlusIcon />}\n\t\t\t\t\t\t\t\tonClick={() => setIsExpanded(true)}\n\t\t\t\t\t\t\t\tcustom-guardian=\"callout-form-open-button\"\n\t\t\t\t\t\t\t\ttabIndex={0}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tTell us\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t)}\n\t\t\t\t</summary>\n\n\t\t\t\t<Form\n\t\t\t\t\tformFields={formFields}\n\t\t\t\t\tonSubmit={onSubmit}\n\t\t\t\t\terror={error}\n\t\t\t\t/>\n\n\t\t\t\t<span css={buttonWrapperStyles} aria-hidden=\"true\">\n\t\t\t\t\t{isExpanded && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t\ticon={<MinusIcon />}\n\t\t\t\t\t\t\tonClick={() => setIsExpanded(false)}\n\t\t\t\t\t\t\tcustom-guardian=\"callout-form-close-button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tHide\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t</span>\n\t\t\t</details>\n\t\t</figure>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CalloutBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport fetchMock from 'fetch-mock';\nimport { calloutCampaign } from '../../../fixtures/manual/calloutCampaign';\nimport { CalloutBlockComponent } from './CalloutBlockComponent.importable';\n\nexport default {\n\tcomponent: CalloutBlockComponent,\n\ttitle: 'Components/CalloutBlockComponent',\n};\n\nexport const Default = () => {\n\tfetchMock\n\t\t.restore()\n\t\t.post(\n\t\t\t'https://callouts.code.dev-guardianapis.com/formstack-campaign/submit',\n\t\t\t{\n\t\t\t\tstatus: 201,\n\t\t\t\tbody: null,\n\t\t\t},\n\t\t);\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 630px;\n\t\t\t\tpadding: 15px;\n\t\t\t`}\n\t\t>\n\t\t\t<CalloutBlockComponent\n\t\t\t\tcallout={calloutCampaign}\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nDefault.story = { name: 'default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Caption.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":44,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":58,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":58,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":72,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":72,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":86,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":86,"endColumn":44},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":101,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":101,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":117,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":117,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":132,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":132,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":147,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":147,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":181,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":181,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":224,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":224,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { breakpoints } from '@guardian/source-foundations';\nimport { Caption } from './Caption';\nimport { ElementContainer } from './ElementContainer';\nimport { StarRating } from './StarRating/StarRating';\n\nexport default {\n\tcomponent: Caption,\n\ttitle: 'Components/Caption',\n};\n\n/**\n    display: Display;\n    design: Design;\n    captionText?: string;\n    pillar: Theme;\n    padCaption?: boolean;\n    credit?: string;\n    displayCredit?: boolean;\n    shouldLimitWidth?: boolean;\n    isOverlayed?: boolean; // Not tested here as this option only works in the context of the ImageComponent\n */\n\nexport const Article = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"This is how an Article caption looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t/>\n\t</ElementContainer>\n);\nArticle.story = { name: 'Article' };\n\nexport const Analysis = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"This is how an Analysis caption looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t/>\n\t</ElementContainer>\n);\nAnalysis.story = { name: 'Analysis' };\n\nexport const PhotoEssay = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"<ul><li>This is how a PhotoEssay caption looks</li></ul>\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\tdesign: ArticleDesign.PhotoEssay,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t/>\n\t</ElementContainer>\n);\nPhotoEssay.story = { name: 'PhotoEssay' };\n\nexport const SpecialReport = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"This is how a SpecialReport caption looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t}}\n\t\t/>\n\t</ElementContainer>\n);\nSpecialReport.story = { name: 'SpecialReport' };\n\nexport const PhotoEssayLimitedWidth = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"<ul><li>This is how a PhotoEssay caption looks when width is limited</li></ul>\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\tdesign: ArticleDesign.PhotoEssay,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshouldLimitWidth={true}\n\t\t/>\n\t</ElementContainer>\n);\nPhotoEssayLimitedWidth.story = { name: 'PhotoEssay with width limited' };\n\nexport const Credit = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"This is how a Feature caption looks with credit showing\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tcredit=\"Credited to Able Jones\"\n\t\t\tdisplayCredit={true}\n\t\t/>\n\t</ElementContainer>\n);\nCredit.story = { name: 'with credit' };\n\nexport const WidthLimited = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"This is how a caption looks with width limited\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshouldLimitWidth={true}\n\t\t/>\n\t</ElementContainer>\n);\nWidthLimited.story = { name: 'with width limited' };\n\nexport const Padded = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"This is how a caption looks when padded\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tpadCaption={true}\n\t\t/>\n\t</ElementContainer>\n);\nPadded.story = { name: 'when padded' };\n\nexport const Overlayed = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tposition: relative;\n\t\t\t\theight: 600px;\n\t\t\t\twidth: 800px;\n\n\t\t\t\timg {\n\t\t\t\t\theight: 100%;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tobject-fit: cover;\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t<img\n\t\t\t\talt=\"\"\n\t\t\t\tsrc=\"https://i.guim.co.uk/img/media/eaecb92d15c7e9691274226d0935038bfcc9de53/0_0_6720_4480/master/6720.jpg?width=880&quality=45&auto=format&fit=max&dpr=2&s=452e8da9ad0b2ba274ae8987b3799fd4\"\n\t\t\t/>\n\t\t\t<Caption\n\t\t\t\tisOverlayed={true}\n\t\t\t\tcaptionText=\"This is how a caption looks when it's overlayed\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tpadCaption={true}\n\t\t\t/>\n\t\t</div>\n\t</ElementContainer>\n);\nOverlayed.story = { name: 'when overlayed' };\n\nexport const OverlayedWithStars = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tposition: relative;\n\t\t\t\theight: 600px;\n\t\t\t\twidth: 800px;\n\n\t\t\t\timg {\n\t\t\t\t\theight: 100%;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tobject-fit: cover;\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t<img\n\t\t\t\talt=\"\"\n\t\t\t\tsrc=\"https://i.guim.co.uk/img/media/eaecb92d15c7e9691274226d0935038bfcc9de53/0_0_6720_4480/master/6720.jpg?width=880&quality=45&auto=format&fit=max&dpr=2&s=452e8da9ad0b2ba274ae8987b3799fd4\"\n\t\t\t/>\n\t\t\t<Caption\n\t\t\t\tisOverlayed={true}\n\t\t\t\tcaptionText=\"This is how a caption looks when it's overlayed with stars\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Showcase,\n\t\t\t\t\tdesign: ArticleDesign.Review,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tpadCaption={true}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tbackground-color: yellow;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<StarRating rating={3} size=\"large\" />\n\t\t\t</div>\n\t\t</div>\n\t</ElementContainer>\n);\nOverlayedWithStars.story = { name: 'when overlayed on stars' };\n\nexport const VideoCaption = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<Caption\n\t\t\tcaptionText=\"This is how an Article caption looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tmediaType=\"Video\"\n\t\t/>\n\t</ElementContainer>\n);\nVideoCaption.story = {\n\tname: 'for videos',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t],\n\t\t},\n\t},\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Caption.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":225,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":236,"endColumn":13},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":268,"column":6,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":270,"endColumn":8},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":308,"column":8,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":310,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tbetween,\n\tfrom,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport CameraSvg from '../../static/icons/camera.svg';\nimport VideoSvg from '../../static/icons/video-icon.svg';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tcaptionText?: string;\n\tformat: ArticleFormat;\n\tpadCaption?: boolean;\n\tcredit?: string;\n\tdisplayCredit?: boolean;\n\tshouldLimitWidth?: boolean;\n\tisOverlayed?: boolean;\n\tisLeftCol?: boolean;\n\tmediaType?: MediaType;\n\tisMainMedia?: boolean;\n};\n\ntype IconProps = {\n\tpalette: Palette;\n\tformat: ArticleFormat;\n};\n\nconst captionStyle = (palette: Palette) => css`\n\t${textSans.xsmall()};\n\tline-height: 135%;\n\tpadding-top: 6px;\n\tword-wrap: break-all;\n\tcolor: ${palette.text.caption};\n`;\n\nconst bottomMarginStyles = css`\n\tmargin-bottom: 6px;\n`;\n\nconst overlayedBottomPadding = (format: ArticleFormat) => {\n\tif (\n\t\tformat.display === ArticleDisplay.Showcase &&\n\t\tformat.design === ArticleDesign.Review\n\t) {\n\t\treturn css`\n\t\t\tpadding-bottom: 2.5rem;\n\t\t`;\n\t}\n\treturn css`\n\t\tpadding-bottom: 0.375rem;\n\t`;\n};\n\nconst overlayedStyles = (palette: Palette, format: ArticleFormat) => css`\n\tposition: absolute;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground: rgba(18, 18, 18, 0.8);\n\n\tspan {\n\t\tcolor: ${palette.text.overlayedCaption};\n\t\tfont-size: 0.75rem;\n\t\tline-height: 1rem;\n\t}\n\n\tsvg {\n\t\tfill: ${palette.text.overlayedCaption};\n\t}\n\tcolor: ${palette.text.overlayedCaption};\n\tfont-size: 0.75rem;\n\tline-height: 1rem;\n\tpadding-top: 0.375rem;\n\tpadding-right: 2.5rem;\n\tpadding-left: 0.75rem;\n\t${overlayedBottomPadding(format)};\n\n\tflex-grow: 1;\n\tmin-height: 2.25rem;\n`;\n\nconst limitedWidth = css`\n\t${from.leftCol} {\n\t\twidth: 140px;\n\t\t/* use absolute position here to allow the article text to push up alongside\n           the caption when it is limited in width */\n\t\tposition: absolute;\n\t}\n\t${from.wide} {\n\t\twidth: 220px;\n\t}\n`;\n\nconst veryLimitedWidth = css`\n\t${from.leftCol} {\n\t\twidth: 120px;\n\t\t/* use absolute position here to allow the article text to push up alongside\n           the caption when it is limited in width */\n\t\tposition: absolute;\n\t}\n\t${from.wide} {\n\t\twidth: 184px;\n\t}\n`;\n\nconst captionPadding = css`\n\tpadding-left: 8px;\n\tpadding-right: 8px;\n`;\n\nconst tabletCaptionPadding = css`\n\t${until.desktop} {\n\t\t${captionPadding}\n\t}\n`;\n\nconst videoPadding = css`\n\t${until.mobileLandscape} {\n\t\tmargin-left: 10px;\n\t}\n\t${between.mobileLandscape.and.phablet} {\n\t\tmargin-left: ${space[5]}px;\n\t}\n`;\n\nconst bigLeftMargin = css`\n\twidth: inherit;\n\tmargin-left: ${space[9]}px;\n\t${until.wide} {\n\t\tmargin-left: 20px;\n\t\tmargin-right: 20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: 10px;\n\t\tmargin-right: 10px;\n\t}\n`;\n\nconst hideIconBelowLeftCol = css`\n\t${until.leftCol} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst pictureRatio = (13 / 18) * 100;\nconst videoRatio = (23 / 36) * 100;\n\nconst iconStyle = (palette: Palette) => css`\n\tfill: ${palette.fill.cameraCaptionIcon};\n\tmargin-right: ${space[1]}px;\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 1em;\n\tvertical-align: baseline;\n\t::before {\n\t\tcontent: ' ';\n\t\tdisplay: block;\n\t\tpadding-top: ${pictureRatio}%;\n\t}\n\tsvg {\n\t\ttop: 0px;\n\t\tright: 0px;\n\t\tbottom: 0px;\n\t\tleft: 0px;\n\t\twidth: 100%;\n\t\tposition: absolute;\n\t\theight: 100%;\n\t}\n`;\n\nconst videoIconStyle = css`\n\twidth: 1.1em;\n\t::before {\n\t\tpadding-top: ${videoRatio}%;\n\t}\n`;\n\nconst captionLink = (palette: Palette) => css`\n\ta {\n\t\tcolor: ${palette.text.captionLink};\n\t\ttext-decoration: none;\n\t}\n\ta:hover {\n\t\ttext-decoration: underline;\n\t}\n\tstrong {\n\t\tfont-weight: bold;\n\t}\n`;\n\nconst CameraIcon = ({ palette, format }: IconProps) => {\n\treturn (\n\t\t<span\n\t\t\tcss={[\n\t\t\t\ticonStyle(palette),\n\t\t\t\tformat.display === ArticleDisplay.Immersive &&\n\t\t\t\t\thideIconBelowLeftCol,\n\t\t\t]}\n\t\t>\n\t\t\t<CameraSvg />\n\t\t</span>\n\t);\n};\n\nconst VideoIcon = ({ palette, format }: IconProps) => {\n\treturn (\n\t\t<span\n\t\t\tcss={[\n\t\t\t\ticonStyle(palette),\n\t\t\t\tformat.display === ArticleDisplay.Immersive &&\n\t\t\t\t\thideIconBelowLeftCol,\n\t\t\t\tvideoIconStyle,\n\t\t\t]}\n\t\t>\n\t\t\t<VideoSvg />\n\t\t</span>\n\t);\n};\n\nexport const Caption = ({\n\tcaptionText,\n\tformat,\n\tpadCaption = false,\n\tcredit,\n\tdisplayCredit = true,\n\tshouldLimitWidth = false,\n\tisOverlayed,\n\tisLeftCol,\n\tmediaType = 'Gallery',\n\tisMainMedia = false,\n}: Props) => {\n\t// Sometimes captions come thorough as a single blank space, so we trim here to ignore those\n\tconst noCaption = !captionText?.trim();\n\tconst noCredit = !credit;\n\tconst hideCredit = !displayCredit;\n\tif (noCaption && (noCredit || hideCredit)) return null;\n\n\tconst palette = decidePalette(format);\n\tconst isBlog =\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog;\n\n\tconst defaultCaption = (\n\t\t<figcaption\n\t\t\tcss={[\n\t\t\t\tcaptionStyle(palette),\n\t\t\t\tshouldLimitWidth && limitedWidth,\n\t\t\t\t!isOverlayed && bottomMarginStyles,\n\t\t\t\tisOverlayed && overlayedStyles(palette, format),\n\t\t\t\tisMainMedia && isBlog && tabletCaptionPadding,\n\t\t\t\tpadCaption && captionPadding,\n\t\t\t\tmediaType === 'Video' && videoPadding,\n\t\t\t]}\n\t\t>\n\t\t\t{mediaType === 'Video' ? (\n\t\t\t\t<VideoIcon palette={palette} format={format} />\n\t\t\t) : (\n\t\t\t\t<CameraIcon palette={palette} format={format} />\n\t\t\t)}\n\t\t\t{captionText && (\n\t\t\t\t<span\n\t\t\t\t\tcss={captionLink(palette)}\n\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t__html: captionText || '',\n\t\t\t\t\t}}\n\t\t\t\t\tkey=\"caption\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{credit && displayCredit && ` ${credit}`}\n\t\t</figcaption>\n\t);\n\n\tswitch (format.design) {\n\t\tcase ArticleDesign.PhotoEssay:\n\t\t\tif (format.theme === ArticleSpecial.Labs && isLeftCol) {\n\t\t\t\treturn defaultCaption;\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<figcaption\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t${textSans.xxsmall({ lineHeight: 'tight' })};\n\t\t\t\t\t\t\tcolor: ${palette.text.caption};\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t\t\t\t\tli:not(:first-child) {\n\t\t\t\t\t\t\t\tmargin-top: ${space[3]}px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tli {\n\t\t\t\t\t\t\t\tpadding-top: ${space[2]}px;\n\t\t\t\t\t\t\t\tborder-top: 1px solid ${palette.text.caption};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`,\n\t\t\t\t\t\tbottomMarginStyles,\n\t\t\t\t\t\tpadCaption && captionPadding,\n\t\t\t\t\t\tshouldLimitWidth && veryLimitedWidth,\n\t\t\t\t\t\tshouldLimitWidth && bigLeftMargin,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t{captionText && (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={captionLink(palette)}\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: captionText || '',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey=\"caption\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{credit && displayCredit && ` ${credit}`}\n\t\t\t\t</figcaption>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn defaultCaption;\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CaptionBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":50,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":68,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":68,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":91,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":91,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":114,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":114,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":137,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":137,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":160,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":160,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":183,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":183,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { CaptionBlockComponent } from './CaptionBlockComponent';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { LeftColumn } from './LeftColumn';\nimport { RightColumn } from './RightColumn';\n\nexport default {\n\tcomponent: CaptionBlockComponent,\n\ttitle: 'Components/CaptionBlockComponent',\n};\n\n/*\n    type Props = {\n        display: Display;\n        design: Design;\n        captionText?: string;\n        pillar: Theme;\n        padCaption?: boolean;\n        credit?: string;\n        displayCredit?: boolean;\n        shouldLimitWidth?: boolean;\n        isOverlayed?: boolean;\n    };\n */\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<ElementContainer showTopBorder={false}>\n\t\t<Flex>\n\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t<></>\n\t\t\t</LeftColumn>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\twidth: 620px;\n\t\t\t\t\tpadding: 20px;\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t<RightColumn>\n\t\t\t\t<></>\n\t\t\t</RightColumn>\n\t\t</Flex>\n\t</ElementContainer>\n);\n\nexport const StandardArticle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CaptionBlockComponent\n\t\t\t\tcaptionText=\"Caption text\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nStandardArticle.story = {\n\tname: 'with defaults',\n};\n\nexport const PhotoEssay = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CaptionBlockComponent\n\t\t\t\tcaptionText=\"Caption text\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\tdesign: ArticleDesign.PhotoEssay,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t}}\n\t\t\t\tpadCaption={false}\n\t\t\t\tcredit=\"Credit text\"\n\t\t\t\tdisplayCredit={false}\n\t\t\t\tshouldLimitWidth={false}\n\t\t\t\tisOverlayed={false}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nPhotoEssay.story = {\n\tname: 'PhotoEssay',\n};\n\nexport const PhotoEssayHTML = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CaptionBlockComponent\n\t\t\t\tcaptionText=\"<ul><li>Line 1 text</li><li>Line 2 text</li><li>Line 3 text</li></ul>\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\tdesign: ArticleDesign.PhotoEssay,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t}}\n\t\t\t\tpadCaption={false}\n\t\t\t\tcredit=\"Credit text\"\n\t\t\t\tdisplayCredit={false}\n\t\t\t\tshouldLimitWidth={false}\n\t\t\t\tisOverlayed={false}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nPhotoEssayHTML.story = {\n\tname: 'PhotoEssay using html',\n};\n\nexport const Padded = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CaptionBlockComponent\n\t\t\t\tcaptionText=\"Caption text\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tpadCaption={true}\n\t\t\t\tcredit=\"Credit text\"\n\t\t\t\tdisplayCredit={false}\n\t\t\t\tshouldLimitWidth={false}\n\t\t\t\tisOverlayed={false}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nPadded.story = {\n\tname: 'when padded',\n};\n\nexport const WidthLimited = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CaptionBlockComponent\n\t\t\t\tcaptionText=\"Caption textQuas repellat sapiente nobis vel. Expedita veniam ut officiis. Omnis tempore natus est distinctio sapiente aliquid dolores soluta. Vel facere vitae velit et non. Eveniet omnis impedit mollitia voluptas omnis sit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Review,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tpadCaption={false}\n\t\t\t\tcredit=\"Credit text\"\n\t\t\t\tdisplayCredit={false}\n\t\t\t\tshouldLimitWidth={true}\n\t\t\t\tisOverlayed={false}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nWidthLimited.story = {\n\tname: 'with width limited',\n};\n\nexport const Credited = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CaptionBlockComponent\n\t\t\t\tcaptionText=\"Caption textQuas repellat sapiente nobis vel. Expedita veniam ut officiis. Omnis tempore natus est distinctio sapiente aliquid dolores soluta. Vel facere vitae velit et non. Eveniet omnis impedit mollitia voluptas omnis sit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.MatchReport,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tpadCaption={false}\n\t\t\t\tcredit=\"Credit text\"\n\t\t\t\tdisplayCredit={true}\n\t\t\t\tshouldLimitWidth={false}\n\t\t\t\tisOverlayed={false}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nCredited.story = {\n\tname: 'with credit',\n};\n\nexport const Overlayed = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CaptionBlockComponent\n\t\t\t\tcaptionText=\"Caption textQuas repellat sapiente nobis vel. Expedita veniam ut officiis. Omnis tempore natus est distinctio sapiente aliquid dolores soluta. Vel facere vitae velit et non. Eveniet omnis impedit mollitia voluptas omnis sit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Showcase,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t}}\n\t\t\t\tpadCaption={false}\n\t\t\t\tcredit=\"Credit text\"\n\t\t\t\tdisplayCredit={false}\n\t\t\t\tshouldLimitWidth={false}\n\t\t\t\tisOverlayed={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nOverlayed.story = {\n\tname: 'when overlayed',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CaptionBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":13,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Caption } from './Caption';\n\ntype Props = {\n\tcaptionText?: string;\n\tformat: ArticleFormat;\n\tpadCaption?: boolean;\n\tcredit?: string;\n\tdisplayCredit?: boolean;\n\tshouldLimitWidth?: boolean;\n\tisOverlayed?: boolean;\n};\n\nexport const CaptionBlockComponent = ({\n\tcaptionText,\n\tformat,\n\tpadCaption = false,\n\tcredit,\n\tdisplayCredit = true,\n\tshouldLimitWidth = false,\n\tisOverlayed,\n}: Props) => (\n\t<Caption\n\t\tformat={format}\n\t\tcaptionText={captionText}\n\t\tpadCaption={padCaption}\n\t\tcredit={credit}\n\t\tdisplayCredit={displayCredit}\n\t\tshouldLimitWidth={shouldLimitWidth}\n\t\tisOverlayed={isOverlayed}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/Card.stories.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/Card.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":109,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":138,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":139,"column":40,"nodeType":"Punctuator","messageId":"preferNullish","endLine":139,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4159,4161],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":144,"column":24,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":144,"endColumn":69,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[4411,4456],"text":"supportingContent?.length"},"desc":"Change to an optional chain."}]},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":231,"column":10,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":233,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { brandAltBackground } from '@guardian/source-foundations';\nimport { StraightLines } from '@guardian/source-react-components-development-kitchen';\nimport { decidePalette } from '../../lib/decidePalette';\nimport { formatCount } from '../../lib/formatCount';\nimport { Avatar } from '../Avatar';\nimport { CardCommentCount } from '../CardCommentCount';\nimport { CardHeadline } from '../CardHeadline';\nimport { Flex } from '../Flex';\nimport { Hide } from '../Hide';\nimport { MediaMeta } from '../MediaMeta';\nimport { StarRating } from '../StarRating/StarRating';\nimport { SupportingContent } from '../SupportingContent';\nimport { AvatarContainer } from './components/AvatarContainer';\nimport { CardAge } from './components/CardAge';\nimport { CardBranding } from './components/CardBranding';\nimport { CardFooter } from './components/CardFooter';\nimport { CardLayout } from './components/CardLayout';\nimport { CardLink } from './components/CardLink';\nimport { CardWrapper } from './components/CardWrapper';\nimport { ContentWrapper } from './components/ContentWrapper';\nimport { HeadlineWrapper } from './components/HeadlineWrapper';\nimport { ImageWrapper } from './components/ImageWrapper';\nimport { TrailTextWrapper } from './components/TrailTextWrapper';\n\nexport type Props = {\n\tlinkTo: string;\n\tformat: ArticleFormat;\n\theadlineText: string;\n\theadlineSize?: SmallHeadlineSize;\n\tshowQuotes?: boolean; // Even with design !== Comment, a piece can be opinion\n\tbyline?: string;\n\tshowByline?: boolean;\n\twebPublicationDate?: string;\n\timageUrl?: string;\n\timagePosition?: ImagePositionType;\n\timagePositionOnMobile?: ImagePositionType;\n\timageSize?: ImageSizeType; // Size is ignored when position = 'top' because in that case the image flows based on width\n\ttrailText?: string;\n\tavatar?: AvatarType;\n\tshowClock?: boolean;\n\tmediaType?: MediaType;\n\tmediaDuration?: number;\n\t// Kicker\n\tkickerText?: string;\n\tshowPulsingDot?: boolean;\n\tshowSlash?: boolean;\n\tcommentCount?: number;\n\tstarRating?: number;\n\tminWidthInPixels?: number;\n\t/** Used for Ophan tracking */\n\tdataLinkName?: string;\n\t// Labs\n\tbranding?: Branding;\n\tsupportingContent?: DCRSupportingContent[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n};\n\nconst starWrapper = css`\n\tbackground-color: ${brandAltBackground.primary};\n\tposition: absolute;\n\tbottom: 0;\n\tmargin-top: 2px;\n`;\n\nconst StarRatingComponent: React.FC<{ rating: number }> = ({ rating }) => (\n\t<>\n\t\t<Hide when=\"above\" breakpoint=\"desktop\">\n\t\t\t<div css={starWrapper}>\n\t\t\t\t<StarRating rating={rating} size=\"small\" />\n\t\t\t</div>\n\t\t</Hide>\n\t\t<Hide when=\"below\" breakpoint=\"desktop\">\n\t\t\t<div css={starWrapper}>\n\t\t\t\t<StarRating rating={rating} size=\"medium\" />\n\t\t\t</div>\n\t\t</Hide>\n\t</>\n);\n\n/**\n * This functions contains the business logic that decides when the card age should be\n * shown. It uses the format of the article the card links to as well as information\n * about the container where the card sits.\n *\n */\nconst decideIfAgeShouldShow = ({\n\tcontainerPalette,\n\tformat,\n\tshowAge,\n}: {\n\tcontainerPalette?: DCRContainerPalette;\n\tformat: ArticleFormat;\n\tshowAge: boolean;\n}): boolean => {\n\t// Some containers force all cards to show age. E.g., The articles in the headlines\n\t// container are typically very recent so we want to display age there\n\tif (showAge) return true;\n\t// Palettes are time sensitive so show age if one is being used\n\tif (containerPalette) return true;\n\t// Liveblogs are evidently time sensitive\n\tif (format.design === ArticleDesign.LiveBlog) return true;\n\t// Otherwise, do not show the article age on the Card\n\treturn false;\n};\n\nexport const Card = ({\n\tlinkTo,\n\tformat,\n\theadlineText,\n\theadlineSize,\n\tshowQuotes,\n\tbyline,\n\tshowByline,\n\twebPublicationDate,\n\timageUrl,\n\timagePosition = 'top',\n\timagePositionOnMobile = 'left',\n\timageSize,\n\ttrailText,\n\tavatar,\n\tshowClock,\n\tmediaType,\n\tmediaDuration,\n\tkickerText,\n\tshowPulsingDot,\n\tshowSlash,\n\tcommentCount,\n\tstarRating,\n\tminWidthInPixels,\n\tdataLinkName,\n\tbranding,\n\tsupportingContent,\n\tcontainerPalette,\n\tshowAge = false,\n}: Props) => {\n\tconst showCommentCount = commentCount || commentCount === 0;\n\tconst palette = decidePalette(format, containerPalette);\n\tconst { long: longCount, short: shortCount } = formatCount(commentCount);\n\n\tconst hasSublinks = supportingContent && supportingContent.length > 0;\n\tconst noOfSublinks = (supportingContent && supportingContent.length) || 0;\n\n\tconst isOpinion =\n\t\tformat.design === ArticleDesign.Comment ||\n\t\tformat.design === ArticleDesign.Editorial ||\n\t\tformat.design === ArticleDesign.Letter;\n\n\tconst renderAge = decideIfAgeShouldShow({\n\t\tcontainerPalette,\n\t\tformat,\n\t\tshowAge,\n\t});\n\n\treturn (\n\t\t<CardWrapper format={format} containerPalette={containerPalette}>\n\t\t\t<CardLink\n\t\t\t\tlinkTo={linkTo}\n\t\t\t\tdataLinkName={dataLinkName}\n\t\t\t\tformat={format}\n\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t/>\n\t\t\t<CardLayout\n\t\t\t\timagePosition={imagePosition}\n\t\t\t\timagePositionOnMobile={imagePositionOnMobile}\n\t\t\t\tminWidthInPixels={minWidthInPixels}\n\t\t\t>\n\t\t\t\t{imageUrl && (\n\t\t\t\t\t<ImageWrapper\n\t\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\t\timagePosition={imagePosition}\n\t\t\t\t\t\timagePositionOnMobile={imagePositionOnMobile}\n\t\t\t\t\t>\n\t\t\t\t\t\t<img src={imageUrl} alt=\"\" role=\"presentation\" />\n\t\t\t\t\t\t{starRating !== undefined ? (\n\t\t\t\t\t\t\t<StarRatingComponent rating={starRating} />\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</ImageWrapper>\n\t\t\t\t)}\n\t\t\t\t<ContentWrapper\n\t\t\t\t\timageSize={imageSize}\n\t\t\t\t\timagePosition={imagePosition}\n\t\t\t\t>\n\t\t\t\t\t<Flex>\n\t\t\t\t\t\t<HeadlineWrapper>\n\t\t\t\t\t\t\t<CardHeadline\n\t\t\t\t\t\t\t\theadlineText={headlineText}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\tsize={headlineSize}\n\t\t\t\t\t\t\t\tshowQuotes={showQuotes}\n\t\t\t\t\t\t\t\tkickerText={\n\t\t\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t\t\t\t\t? 'Live'\n\t\t\t\t\t\t\t\t\t\t: kickerText\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\t\t\t\t\t\t\t\tshowPulsingDot\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tshowSlash={\n\t\t\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\t\t\t\t\t\t\t\tshowSlash\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbyline={byline}\n\t\t\t\t\t\t\t\tshowByline={showByline}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</HeadlineWrapper>\n\t\t\t\t\t\t{avatar && (\n\t\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"tablet\">\n\t\t\t\t\t\t\t\t<AvatarContainer>\n\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\timageSrc={avatar.src}\n\t\t\t\t\t\t\t\t\t\timageAlt={avatar.alt}\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</AvatarContainer>\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Flex>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{trailText && (\n\t\t\t\t\t\t\t<TrailTextWrapper\n\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t__html: trailText,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</TrailTextWrapper>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{avatar && (\n\t\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"tablet\">\n\t\t\t\t\t\t\t\t<AvatarContainer>\n\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\timageSrc={avatar.src}\n\t\t\t\t\t\t\t\t\t\timageAlt={avatar.alt}\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</AvatarContainer>\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<CardFooter\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tage={\n\t\t\t\t\t\t\t\trenderAge && webPublicationDate ? (\n\t\t\t\t\t\t\t\t\t<CardAge\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\twebPublicationDate={webPublicationDate}\n\t\t\t\t\t\t\t\t\t\tshowClock={showClock}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmediaMeta={\n\t\t\t\t\t\t\t\t(format.design === ArticleDesign.Gallery ||\n\t\t\t\t\t\t\t\t\tformat.design === ArticleDesign.Audio ||\n\t\t\t\t\t\t\t\t\tformat.design === ArticleDesign.Video) &&\n\t\t\t\t\t\t\t\tmediaType ? (\n\t\t\t\t\t\t\t\t\t<MediaMeta\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tmediaType={mediaType}\n\t\t\t\t\t\t\t\t\t\tmediaDuration={mediaDuration}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcommentCount={\n\t\t\t\t\t\t\t\tshowCommentCount && longCount && shortCount ? (\n\t\t\t\t\t\t\t\t\t<CardCommentCount\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tlong={longCount}\n\t\t\t\t\t\t\t\t\t\tshort={shortCount}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcardBranding={\n\t\t\t\t\t\t\t\tbranding ? (\n\t\t\t\t\t\t\t\t\t<CardBranding\n\t\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{hasSublinks && noOfSublinks <= 2 ? (\n\t\t\t\t\t\t\t<SupportingContent\n\t\t\t\t\t\t\t\tsupportingContent={supportingContent}\n\t\t\t\t\t\t\t\talignment=\"vertical\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</ContentWrapper>\n\t\t\t</CardLayout>\n\t\t\t{hasSublinks && noOfSublinks > 2 ? (\n\t\t\t\t<SupportingContent\n\t\t\t\t\tsupportingContent={supportingContent}\n\t\t\t\t\talignment={\n\t\t\t\t\t\timagePosition === 'top' || imagePosition === 'bottom'\n\t\t\t\t\t\t\t? 'vertical'\n\t\t\t\t\t\t\t: 'horizontal'\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<></>\n\t\t\t)}\n\t\t\t{isOpinion && (\n\t\t\t\t<StraightLines color={palette.border.lines} count={4} />\n\t\t\t)}\n\t\t</CardWrapper>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/AvatarContainer.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":37,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from, until } from '@guardian/source-foundations';\n\ntype Props = {\n\tchildren: React.ReactNode;\n};\n\nconst containerStyles = css`\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\n\tmargin-right: 10px;\n\t${until.tablet} {\n\t\tmargin-top: 5px;\n\t}\n\t${from.tablet} {\n\t\tmargin-top: 50px;\n\t}\n`;\n\nconst sizingStyles = css`\n\t/* Below 980 */\n\t${until.desktop} {\n\t\theight: 108px;\n\t\twidth: 108px;\n\t}\n\t/* Below 740 */\n\t${until.tablet} {\n\t\theight: 84px;\n\t\twidth: 84px;\n\t}\n\t/* Otherwise */\n\theight: 132px;\n\twidth: 132px;\n`;\n\nexport const AvatarContainer = ({ children }: Props) => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<div css={sizingStyles}>{children}</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/CardAge.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":48,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":53,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, timeAgo } from '@guardian/libs';\nimport { textSans, until } from '@guardian/source-foundations';\nimport ClockIcon from '../../../../static/icons/clock.svg';\nimport { decidePalette } from '../../../lib/decidePalette';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tcontainerPalette?: DCRContainerPalette;\n\twebPublicationDate: string;\n\tshowClock?: boolean;\n};\n\nconst ageStyles = (format: ArticleFormat, palette: Palette) => {\n\treturn css`\n\t\t${textSans.xxsmall()};\n\t\tcolor: ${palette.text.cardFooter};\n\n\t\t/* Provide side padding for positioning and also to keep spacing\n    between any sibings (like Lines) */\n\t\tpadding-left: 5px;\n\t\tpadding-right: 5px;\n\t\t${until.tablet} {\n\t\t\tline-height: 1.25;\n\t\t}\n\n\t\tsvg {\n\t\t\tfill: ${palette.text.cardFooter};\n\t\t\tmargin-bottom: -1px;\n\t\t\theight: 11px;\n\t\t\twidth: 11px;\n\t\t\tmargin-right: 2px;\n\t\t}\n\n\t\t> time {\n\t\t\t${textSans.xxsmall({\n\t\t\t\tfontWeight:\n\t\t\t\t\tformat.design === ArticleDesign.Gallery ||\n\t\t\t\t\tformat.design === ArticleDesign.Audio ||\n\t\t\t\t\tformat.design === ArticleDesign.Video\n\t\t\t\t\t\t? `bold`\n\t\t\t\t\t\t: `regular`,\n\t\t\t})};\n\t\t}\n\t`;\n};\n\nexport const CardAge = ({\n\tformat,\n\tcontainerPalette,\n\twebPublicationDate,\n\tshowClock,\n}: Props) => {\n\tconst displayString = timeAgo(new Date(webPublicationDate).getTime());\n\tconst palette = decidePalette(format, containerPalette);\n\n\tif (!displayString) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<span css={ageStyles(format, palette)}>\n\t\t\t<span>\n\t\t\t\t{showClock && <ClockIcon />}\n\t\t\t\t<time dateTime={webPublicationDate} data-relativeformat=\"med\">\n\t\t\t\t\t{displayString}\n\t\t\t\t</time>\n\t\t\t</span>\n\t\t</span>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/CardBranding.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":38,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":61},{"ruleId":"react/jsx-curly-newline","severity":1,"message":"Unexpected newline before '}'.","line":62,"column":5,"nodeType":"Punctuator","messageId":"unexpectedBefore","endLine":62,"endColumn":6,"fix":{"range":[1716,1721],"text":""}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport { space, textSans, visuallyHidden } from '@guardian/source-foundations';\nimport { trackSponsorLogoLinkClick } from '../../../browser/ga/ga';\nimport { decideLogo } from '../../../lib/decideLogo';\nimport { decidePalette } from '../../../lib/decidePalette';\nimport { getZIndex } from '../../../lib/getZIndex';\n\ntype Props = {\n\tbranding: Branding;\n\tformat: ArticleFormat;\n};\n\nconst logoImageStyle = css`\n\tmax-height: 60px;\n\tmargin-left: ${space[3]}px;\n\tvertical-align: middle;\n\theight: auto;\n\twidth: auto;\n`;\n\nconst brandingWrapperStyle = css`\n\tpadding-right: ${space[3]}px;\n\tpadding-bottom: ${space[3]}px;\n\ttext-align: right;\n\tflex: auto;\n\t/* See: https://css-tricks.com/nested-links/ */\n\t${getZIndex('card-nested-link')};\n\tposition: relative;\n`;\n\nconst labelStyle = (palette: Palette) => {\n\treturn css`\n\t\t${textSans.xxsmall()}\n\t\tcolor: ${palette.text.cardFooter};\n\t`;\n};\n\nexport const CardBranding = ({ branding, format }: Props) => {\n\tconst logo = decideLogo(format, branding);\n\tconst palette = decidePalette(format);\n\treturn (\n\t\t<div css={brandingWrapperStyle}>\n\t\t\t<div css={labelStyle(palette)}>{logo.label}</div>\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{branding.sponsorName\n\t\t\t\t\t? `This content was paid for by ${branding.sponsorName} and produced by the Guardian Labs team.`\n\t\t\t\t\t: 'This content has been paid for by an advertiser and produced by the Guardian Labs team.'}\n\t\t\t</span>\n\t\t\t<a\n\t\t\t\thref={logo.link}\n\t\t\t\tdata-sponsor={branding.sponsorName.toLowerCase()}\n\t\t\t\trel=\"nofollow\"\n\t\t\t\taria-label={`Visit the ${branding.sponsorName} website`}\n\t\t\t\tonClick={() =>\n\t\t\t\t\ttrackSponsorLogoLinkClick(\n\t\t\t\t\t\tbranding.sponsorName.toLowerCase(),\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tdata-cy=\"card-branding-logo\"\n\t\t\t>\n\t\t\t\t<img\n\t\t\t\t\tcss={logoImageStyle}\n\t\t\t\t\tsrc={logo.src}\n\t\t\t\t\talt={branding.sponsorName}\n\t\t\t\t\twidth={logo.dimensions.width}\n\t\t\t\t\theight={logo.dimensions.height}\n\t\t\t\t/>\n\t\t\t</a>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/CardFooter.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":24,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":31,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":47,"column":11,"nodeType":"Punctuator","messageId":"preferNullish","endLine":47,"endColumn":13,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[991,993],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tage?: JSX.Element;\n\tmediaMeta?: JSX.Element;\n\tcommentCount?: JSX.Element;\n\tcardBranding?: JSX.Element;\n\tsupportingContent?: JSX.Element;\n};\n\nconst spaceBetween = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n`;\n\nconst flexEnd = css`\n\tdisplay: flex;\n\tjustify-content: flex-end;\n`;\n\nexport const CardFooter = ({\n\tformat,\n\tage,\n\tmediaMeta,\n\tcommentCount,\n\tcardBranding,\n\tsupportingContent,\n}: Props) => {\n\tif (format.theme === ArticleSpecial.Labs && cardBranding) {\n\t\treturn <footer>{cardBranding}</footer>;\n\t}\n\n\tif (\n\t\tformat.design === ArticleDesign.Gallery ||\n\t\tformat.design === ArticleDesign.Audio ||\n\t\tformat.design === ArticleDesign.Video\n\t) {\n\t\treturn (\n\t\t\t<footer>\n\t\t\t\t{supportingContent}\n\t\t\t\t<div css={spaceBetween}>\n\t\t\t\t\t{mediaMeta}\n\t\t\t\t\t{/* Show age if we have it otherwise try for commentCount */}\n\t\t\t\t\t{age || commentCount}\n\t\t\t\t</div>\n\t\t\t</footer>\n\t\t);\n\t}\n\n\tif (age) {\n\t\treturn (\n\t\t\t<footer>\n\t\t\t\t{supportingContent}\n\t\t\t\t<div css={spaceBetween}>\n\t\t\t\t\t{age}\n\t\t\t\t\t{commentCount}\n\t\t\t\t</div>\n\t\t\t</footer>\n\t\t);\n\t}\n\n\treturn (\n\t\t<footer>\n\t\t\t{supportingContent}\n\t\t\t<div css={flexEnd}>\n\t\t\t\t<>{commentCount}</>\n\t\t\t</div>\n\t\t</footer>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/CardLayout.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":50,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":55,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { until } from '@guardian/source-foundations';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\timagePosition: ImagePositionType;\n\timagePositionOnMobile: ImagePositionType;\n\tminWidthInPixels?: number;\n};\n\nconst decideDirection = (imagePosition?: ImagePositionType) => {\n\tswitch (imagePosition) {\n\t\tcase 'top':\n\t\t\treturn 'column';\n\t\tcase 'bottom':\n\t\t\treturn 'column-reverse';\n\t\tcase 'left':\n\t\t\treturn 'row';\n\t\tcase 'right':\n\t\t\treturn 'row-reverse';\n\t\t// If there's no image (so no imagePosition) default to top down\n\t\tdefault:\n\t\t\treturn 'column';\n\t}\n};\n\nconst decideWidth = (minWidthInPixels?: number) => {\n\tif (minWidthInPixels) {\n\t\treturn css`\n\t\t\tmin-width: ${minWidthInPixels}px;\n\t\t`;\n\t}\n\treturn css`\n\t\twidth: 100%;\n\t`;\n};\n\nconst decidePosition = (\n\timagePosition: ImagePositionType,\n\timagePositionOnMobile: ImagePositionType,\n) => {\n\treturn css`\n\t\tflex-direction: ${decideDirection(imagePosition)};\n\t\t${until.tablet} {\n\t\t\tflex-direction: ${decideDirection(imagePositionOnMobile)};\n\t\t}\n\t`;\n};\n\nexport const CardLayout = ({\n\tchildren,\n\timagePosition,\n\timagePositionOnMobile,\n\tminWidthInPixels,\n}: Props) => (\n\t<div\n\t\tcss={[\n\t\t\tcss`\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-basis: 100%;\n\t\t\t`,\n\t\t\tdecideWidth(minWidthInPixels),\n\t\t\tdecidePosition(imagePosition, imagePositionOnMobile),\n\t\t]}\n\t>\n\t\t{children}\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/CardLink.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":102,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":107,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport { neutral } from '@guardian/source-foundations';\nimport { decidePalette } from '../../../lib/decidePalette';\nimport { getZIndex } from '../../../lib/getZIndex';\n\nconst fauxLinkStyles = css`\n\tposition: absolute;\n\t${getZIndex('card-link')};\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\tleft: 0;\n\topacity: 0;\n`;\n\nconst linkStyles = (format: ArticleFormat, palette: Palette) => {\n\tconst baseLinkStyles = css`\n\t\tdisplay: flex;\n\t\t/* a tag specific styles */\n\t\tcolor: inherit;\n\t\ttext-decoration: none;\n\t\tbackground-color: ${palette.background.card};\n\n\t\t/* The whole card is one link so we card level styles here */\n\t\twidth: 100%;\n\n\t\t/* Sometimes a headline contains it's own link so we use the\n       approach described below to deal with nested links\n       See: https://css-tricks.com/nested-links/ */\n\t\t:before {\n\t\t\tcontent: '';\n\t\t\tposition: absolute;\n\t\t\tleft: 0;\n\t\t\ttop: 0;\n\t\t\tright: 0;\n\t\t\tbottom: 0;\n\t\t}\n\n\t\t:hover .image-overlay {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tleft: 0;\n\t\t\tbackground-color: ${neutral[7]};\n\t\t\topacity: 0.1;\n\t\t}\n\t`;\n\n\tif (format.theme === ArticleSpecial.SpecialReport) {\n\t\treturn css`\n\t\t\t${baseLinkStyles};\n\t\t\t:hover {\n\t\t\t\tfilter: brightness(90%);\n\t\t\t}\n\t\t`;\n\t}\n\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Editorial:\n\t\tcase ArticleDesign.Letter:\n\t\tcase ArticleDesign.Comment:\n\t\t\treturn css`\n\t\t\t\t${baseLinkStyles};\n\t\t\t\t:hover {\n\t\t\t\t\t/* TODO: This colour is hard coded here because it does not yet\n                           exist in source-foundations. Once it's been added, please\n                           remove this. @siadcock is aware. */\n\t\t\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\t\t\tbackground-color: #fdf0e8;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase ArticleDesign.Gallery:\n\t\tcase ArticleDesign.Audio:\n\t\tcase ArticleDesign.Video:\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\treturn css`\n\t\t\t\t${baseLinkStyles};\n\t\t\t\t:hover {\n\t\t\t\t\tfilter: brightness(90%);\n\t\t\t\t}\n\t\t\t`;\n\t\tdefault:\n\t\t\treturn css`\n\t\t\t\t${baseLinkStyles};\n\t\t\t\t:hover {\n\t\t\t\t\tbackground-color: ${neutral[93]};\n\t\t\t\t}\n\t\t\t`;\n\t}\n};\n\ntype Props = {\n\tlinkTo: string;\n\tformat: ArticleFormat;\n\tcontainerPalette?: DCRContainerPalette;\n\tdataLinkName?: string;\n};\n\nexport const CardLink = ({\n\tlinkTo,\n\tformat,\n\tcontainerPalette,\n\tdataLinkName = 'article',\n}: Props) => {\n\tconst palette = decidePalette(format, containerPalette);\n\treturn (\n\t\t<a\n\t\t\thref={linkTo}\n\t\t\tcss={[fauxLinkStyles, linkStyles(format, palette)]}\n\t\t\tdata-link-name={dataLinkName}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/CardWrapper.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":14,"column":30,"nodeType":"Punctuator","messageId":"preferNullish","endLine":14,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[480,482],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":91,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":91,"endColumn":78}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport { neutral } from '@guardian/source-foundations';\nimport { decidePalette } from '../../../lib/decidePalette';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tformat: ArticleFormat;\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nconst cardStyles = (format: ArticleFormat, palette?: Palette) => {\n\tconst cardPalette = palette || decidePalette(format);\n\tconst baseCardStyles = css`\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-between;\n\t\twidth: 100%;\n\t\t/* We absolutely position the faux link\n\t\tso this is required here */\n\t\tposition: relative;\n\n\t\t/* Styling for top bar */\n\t\t:before {\n\t\t\tbackground-color: ${cardPalette.topBar.card};\n\t\t\tcontent: '';\n\t\t\theight: 1px;\n\t\t\tz-index: 2;\n\t\t}\n\n\t\t:hover .image-overlay {\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\twidth: 100%;\n\t\t\theight: 100%;\n\t\t\tleft: 0;\n\t\t\tbackground-color: ${neutral[7]};\n\t\t\topacity: 0.1;\n\t\t}\n\n\t\t/* a tag specific styles */\n\t\tcolor: inherit;\n\t\ttext-decoration: none;\n\t\tbackground-color: ${cardPalette.background.card};\n\t`;\n\n\tif (format.theme === ArticleSpecial.SpecialReport) {\n\t\treturn css`\n\t\t\t${baseCardStyles};\n\t\t\t:hover {\n\t\t\t\tfilter: brightness(90%);\n\t\t\t}\n\t\t`;\n\t}\n\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Editorial:\n\t\tcase ArticleDesign.Letter:\n\t\tcase ArticleDesign.Comment:\n\t\t\treturn css`\n\t\t\t\t${baseCardStyles};\n\t\t\t\t:hover {\n\t\t\t\t\t/* TODO: This colour is hard coded here because it does not yet\n                           exist in source-foundations. Once it's been added, please\n                           remove this. @siadcock is aware. */\n\t\t\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\t\t\tbackground-color: #fdf0e8;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase ArticleDesign.Gallery:\n\t\tcase ArticleDesign.Audio:\n\t\tcase ArticleDesign.Video:\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\treturn css`\n\t\t\t\t${baseCardStyles};\n\t\t\t\t:hover {\n\t\t\t\t\tfilter: brightness(90%);\n\t\t\t\t}\n\t\t\t`;\n\t\tdefault:\n\t\t\treturn css`\n\t\t\t\t${baseCardStyles};\n\t\t\t\t:hover {\n\t\t\t\t\tbackground-color: ${neutral[93]};\n\t\t\t\t}\n\t\t\t`;\n\t}\n};\n\nexport const CardWrapper = ({ children, format, containerPalette }: Props) => {\n\tconst palette = decidePalette(format, containerPalette);\n\treturn <div css={cardStyles(format, palette)}>{children}</div>;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/ContentWrapper.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":20,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":20,"endColumn":24},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":21,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":44,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":53,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":57,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport { between, from } from '@guardian/source-foundations';\n\nconst sizingStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n`;\n\n/**\n * This function works in partnership with its sibling in `ImageWrapper`. If you\n * change any values here be sure to update that file as well.\n *\n */\nconst flexBasisStyles = ({\n\timageSize,\n}: {\n\timageSize: ImageSizeType;\n}): SerializedStyles => {\n\tswitch (imageSize) {\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 75%;\n\t\t\t\t${between.tablet.and.desktop} {\n\t\t\t\t\tflex-basis: 60%;\n\t\t\t\t}\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tflex-basis: 70%;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'medium':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 50%;\n\t\t\t`;\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 34%;\n\t\t\t`;\n\t\tcase 'jumbo':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 25%;\n\t\t\t`;\n\t}\n};\n\ntype Props = {\n\tchildren: React.ReactNode;\n\timageSize?: ImageSizeType;\n\timagePosition: ImagePositionType;\n};\n\nexport const ContentWrapper = ({\n\tchildren,\n\timageSize = 'small',\n\timagePosition,\n}: Props) => {\n\tconst isHorizontal = imagePosition === 'left' || imagePosition === 'right';\n\tconst isVertical = imagePosition === 'top' || imagePosition === 'bottom';\n\treturn (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\tsizingStyles,\n\t\t\t\tisHorizontal && flexBasisStyles({ imageSize }),\n\t\t\t\t/* If the image is top or bottom positioned then it takes 100% of the width and\n\t\t\t\t   we want the content to grow into the remaining vertical space */\n\t\t\t\tisVertical &&\n\t\t\t\t\tcss`\n\t\t\t\t\t\tflex-grow: 1;\n\t\t\t\t\t`,\n\t\t\t]}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/HeadlineWrapper.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":7,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":7,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\n\ntype Props = {\n\tchildren: React.ReactNode;\n};\n\nexport const HeadlineWrapper = ({ children }: Props) => (\n\t<div\n\t\tcss={css`\n\t\t\tpadding-bottom: 8px;\n\t\t\tpadding-left: 5px;\n\t\t\tpadding-right: 5px;\n\t\t\tpadding-top: 1px;\n\t\t\tflex-grow: 1;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/ImageWrapper.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":21,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":21,"endColumn":24},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":22,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":45,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":48,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":53,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport { between, from, until } from '@guardian/source-foundations';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\timageSize?: ImageSizeType;\n\timagePosition: ImagePositionType;\n\timagePositionOnMobile: ImagePositionType;\n};\n\n/**\n * This function works in partnership with its sibling in `ContentWrapper`. If you\n * change any values here be sure to update that file as well.\n *\n */\nconst flexBasisStyles = ({\n\timageSize,\n}: {\n\timageSize: ImageSizeType;\n}): SerializedStyles => {\n\tswitch (imageSize) {\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 25%;\n\t\t\t\t${between.tablet.and.desktop} {\n\t\t\t\t\tflex-basis: 40%;\n\t\t\t\t}\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tflex-basis: 30%;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'medium':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 50%;\n\t\t\t`;\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 66%;\n\t\t\t`;\n\t\tcase 'jumbo':\n\t\t\treturn css`\n\t\t\t\tflex-basis: 75%;\n\t\t\t`;\n\t}\n};\n\nexport const ImageWrapper = ({\n\tchildren,\n\timageSize = 'large',\n\timagePosition,\n\timagePositionOnMobile,\n}: Props) => {\n\tconst isHorizontal = imagePosition === 'left' || imagePosition === 'right';\n\tconst isHorizontalOnMobile =\n\t\timagePositionOnMobile === 'left' || imagePositionOnMobile === 'right';\n\treturn (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\tisHorizontal &&\n\t\t\t\t\tflexBasisStyles({\n\t\t\t\t\t\timageSize,\n\t\t\t\t\t}),\n\t\t\t\t/* If no image position for mobile is provided then hide the image */\n\t\t\t\timagePositionOnMobile === 'none' &&\n\t\t\t\t\tcss`\n\t\t\t\t\t\t${until.tablet} {\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t`,\n\t\t\t\t/* Below tablet, we fix the size of the image and add a margin\n\t\t\t\t   around it. The corresponding content flex grows to fill the space */\n\t\t\t\tisHorizontalOnMobile &&\n\t\t\t\t\tcss`\n\t\t\t\t\t\t${until.tablet} {\n\t\t\t\t\t\t\twidth: 119px;\n\t\t\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t\t\t\tmargin-top: 4px;\n\t\t\t\t\t\t\tmargin-right: 0;\n\t\t\t\t\t\t\tmargin-bottom: 4px;\n\t\t\t\t\t\t\tmargin-left: 4px;\n\t\t\t\t\t\t\tflex-basis: unset;\n\t\t\t\t\t\t}\n\t\t\t\t\t`,\n\t\t\t\tcss`\n\t\t\t\t\t/* position relative is required here to bound the image overlay */\n\t\t\t\t\tposition: relative;\n\t\t\t\t\timg {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t`,\n\t\t\t]}\n\t\t>\n\t\t\t<>\n\t\t\t\t{children}\n\t\t\t\t{/* This image overlay is styled when the CardLink is hovered */}\n\t\t\t\t<div className=\"image-overlay\" />\n\t\t\t</>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/LI.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":77,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":88,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from, until } from '@guardian/source-foundations';\nimport { verticalDivider } from '../../../lib/verticalDivider';\n\nconst liStyles = css`\n\t/* This position relative is needed to contain the veritcal divider */\n\tposition: relative;\n\n\tdisplay: flex;\n`;\n\nconst sidePaddingStyles = (padSidesOnMobile: boolean) => css`\n\t/* Set spacing on the li element */\n\t${padSidesOnMobile && until.tablet} {\n\t\tpadding-left: 10px;\n\t\tpadding-right: 10px;\n\t}\n\n\t${from.tablet} {\n\t\tpadding-left: 10px;\n\t\tpadding-right: 10px;\n\t}\n`;\n\nconst snapAlignStartStyles = css`\n\t/* Snap start of card */\n\tscroll-snap-align: start;\n`;\n\nconst paddingBottomStyles = css`\n\tpadding-bottom: 10px;\n`;\n\nconst mobilePaddingBottomStyles = css`\n\t${until.tablet} {\n\t\tpadding-bottom: 10px;\n\t}\n`;\n\nconst marginTopStyles = css`\n\t${until.tablet} {\n\t\tmargin-top: 12px;\n\t}\n`;\n\nconst decideSize = (percentage?: CardPercentageType, stretch?: boolean) => {\n\tlet sizeStyle;\n\tif (percentage) {\n\t\tsizeStyle = css`\n\t\t\tflex-basis: ${percentage};\n\t\t`;\n\t} else if (stretch) {\n\t\tsizeStyle = css`\n\t\t\tflex-grow: 1;\n\t\t`;\n\t} else {\n\t\tsizeStyle = css`\n\t\t\tflex: 1;\n\t\t`;\n\t}\n\treturn sizeStyle;\n};\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tpercentage?: CardPercentageType; // Used to give a particular LI more or less weight / space\n\tstretch?: boolean; // When true, the card stretches based on content\n\tshowDivider?: boolean; // If this LI wraps a card in a row this should be true\n\tpadSides?: boolean; // If this LI directly wraps a card this should be true\n\tpadSidesOnMobile?: boolean; // Should be true if spacing between cards is desired on mobile devices\n\tpadBottom?: boolean;\n\tpadBottomOnMobile?: boolean; // Should be true if spacing below is desired on mobile devices\n\tshowTopMarginWhenStacked?: boolean;\n\tsnapAlignStart?: boolean; // True when snapping card when scrolling e.g. in carousel\n};\n\nexport const LI = ({\n\tchildren,\n\tpercentage,\n\tstretch,\n\tshowDivider,\n\tpadSides = false,\n\tpadSidesOnMobile = false,\n\tpadBottom,\n\tpadBottomOnMobile,\n\tshowTopMarginWhenStacked,\n\tsnapAlignStart = false,\n}: Props) => {\n\t// Decide sizing\n\tconst sizeStyles = decideSize(percentage, stretch);\n\n\treturn (\n\t\t<li\n\t\t\tcss={[\n\t\t\t\tliStyles,\n\t\t\t\tsizeStyles,\n\t\t\t\tshowDivider && verticalDivider,\n\t\t\t\tpadSides && sidePaddingStyles(padSidesOnMobile),\n\t\t\t\tpadBottom && paddingBottomStyles,\n\t\t\t\tpadBottomOnMobile && mobilePaddingBottomStyles,\n\t\t\t\tshowTopMarginWhenStacked && marginTopStyles,\n\t\t\t\tsnapAlignStart && snapAlignStartStyles,\n\t\t\t]}\n\t\t>\n\t\t\t{children}\n\t\t</li>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/TrailTextWrapper.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":11,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { body, until } from '@guardian/source-foundations';\nimport { decidePalette } from '../../../lib/decidePalette';\n\ntype Props = {\n\tchildren: string | React.ReactNode;\n\tformat: ArticleFormat;\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nexport const TrailTextWrapper = ({\n\tchildren,\n\tformat,\n\tcontainerPalette,\n}: Props) => {\n\tconst palette = decidePalette(format, containerPalette);\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tcolor: ${palette.text.cardStandfirst};\n\n\t\t\t\t${body.small()};\n\t\t\t\tfont-size: 14px;\n\n\t\t\t\tpadding-left: 5px;\n\t\t\t\tpadding-right: 5px;\n\t\t\t\tpadding-bottom: 6px;\n\n\t\t\t\t${until.tablet} {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Card/components/UL.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":35,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":41,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from, until } from '@guardian/source-foundations';\nimport { verticalDivider } from '../../../lib/verticalDivider';\n\ntype Direction = 'row' | 'column' | 'row-reverse';\n\nconst ulStyles = (direction?: Direction) => css`\n\tposition: relative;\n\tdisplay: flex;\n\tflex-direction: ${direction};\n\t${until.tablet} {\n\t\tflex-direction: column;\n\t\twidth: 100%;\n\t}\n`;\n\nconst marginBottomStyles = css`\n\tmargin-bottom: 10px;\n`;\n\nconst wrapStyles = css`\n\t${from.tablet} {\n\t\tflex-wrap: wrap;\n\t}\n`;\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tdirection?: Direction; // Passed to flex-direction\n\tshowDivider?: boolean; // If this UL is a column and not the left most column\n\tpadBottom?: boolean; // If this UL is a row, add spacing below\n\twrapCards?: boolean; // Used to keep cards aligned in adjacent columns\n};\n\nexport const UL = ({\n\tchildren,\n\tdirection = 'column',\n\tshowDivider = false,\n\tpadBottom = false,\n\twrapCards = false,\n}: Props) => {\n\treturn (\n\t\t<ul\n\t\t\tcss={[\n\t\t\t\tulStyles(direction),\n\t\t\t\tshowDivider && verticalDivider,\n\t\t\t\tpadBottom && marginBottomStyles,\n\t\t\t\twrapCards && wrapStyles,\n\t\t\t]}\n\t\t>\n\t\t\t{children}\n\t\t</ul>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CardCommentCount.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":20,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":37,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { CardCommentCount } from './CardCommentCount';\n\nexport default {\n\tcomponent: CardCommentCount,\n\ttitle: 'Components/CardCommentCount',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin: 40px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const CommentCountStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CardCommentCount\n\t\t\t\tformat={{\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tshort=\"11k\"\n\t\t\t\tlong=\"10,899\"\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nCommentCountStory.story = { name: 'default' };\n\nexport const GalleryStory = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<CardCommentCount\n\t\t\t\tformat={{\n\t\t\t\t\tdesign: ArticleDesign.Gallery,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tshort=\"11k\"\n\t\t\t\tlong=\"10,899\"\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nGalleryStory.story = { name: 'Gallery' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CardCommentCount.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":48,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":53,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { between, textSans } from '@guardian/source-foundations';\nimport CommentIcon from '../../static/icons/comment.svg';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tcontainerPalette?: DCRContainerPalette;\n\tformat: ArticleFormat;\n\tshort: string;\n\tlong: string;\n};\n\nconst containerStyles = (palette: Palette) => css`\n\tdisplay: flex;\n\tflex-direction: row;\n\t${textSans.xxsmall()};\n\tpadding-left: 5px;\n\tpadding-right: 5px;\n\tcolor: ${palette.text.cardFooter};\n`;\n\nconst svgStyles = (palette: Palette) => css`\n\tsvg {\n\t\tmargin-bottom: -5px;\n\t\theight: 14px;\n\t\twidth: 14px;\n\t\tmargin-right: 2px;\n\t\tfill: ${palette.text.cardFooter};\n\t}\n`;\n\nconst longStyles = css`\n\tdisplay: block;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst shortStyles = css`\n\tdisplay: none;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: block;\n\t}\n`;\n\nexport const CardCommentCount = ({\n\tcontainerPalette,\n\tformat,\n\tshort,\n\tlong,\n}: Props) => {\n\tconst palette = decidePalette(format, containerPalette);\n\treturn (\n\t\t<div css={containerStyles(palette)} aria-label={`${short} Comments`}>\n\t\t\t<div css={svgStyles(palette)}>\n\t\t\t\t<CommentIcon />\n\t\t\t</div>\n\t\t\t<div css={longStyles} aria-hidden=\"true\">\n\t\t\t\t{long}\n\t\t\t</div>\n\t\t\t<div css={shortStyles} aria-hidden=\"true\">\n\t\t\t\t{short}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CardHeadline.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":23,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":37,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":118,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":118,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":132,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":132,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":154,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":154,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":169,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":169,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":185,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":185,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":201,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":201,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":216,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":216,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":232,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":232,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":249,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":249,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":270,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":270,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":287,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":287,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { specialReport } from '@guardian/source-foundations';\nimport { CardHeadline } from './CardHeadline';\nimport { ElementContainer } from './ElementContainer';\n\nexport default {\n\tcomponent: CardHeadline,\n\ttitle: 'Components/CardHeadline',\n};\n\nconst smallHeadlineSizes: SmallHeadlineSize[] = [\n\t'large',\n\t'medium',\n\t'small',\n\t'tiny',\n];\n\nexport const Article = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how an Article card headline looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t/>\n\t</ElementContainer>\n);\nArticle.story = { name: 'Article' };\n\nexport const Analysis = () => (\n\t<>\n\t\t{smallHeadlineSizes.map((size) => (\n\t\t\t<div key={size}>\n\t\t\t\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t\t\t\t<CardHeadline\n\t\t\t\t\t\theadlineText={`This is how a ${size} Analysis card headline looks`}\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsize={size}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\t\t\t\t<br />\n\t\t\t</div>\n\t\t))}\n\t\t<br />\n\t\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"This is how an Sport Analysis card headline looks\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"This is how an Culture Analysis card headline looks\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"This is how an Opinion Analysis card headline looks\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"This is how an Lifestyle Analysis card headline looks\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer\n\t\t\tshowTopBorder={false}\n\t\t\tshowSideBorders={false}\n\t\t\tbackgroundColour={specialReport[300]}\n\t\t>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"This is how an Special Report Analysis card headline looks\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t</>\n);\nAnalysis.story = { name: 'Analysis (Underline)' };\n\nexport const Feature = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how a Feature card headline looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t/>\n\t</ElementContainer>\n);\nFeature.story = { name: 'Feature' };\n\nexport const Size = () => (\n\t<>\n\t\t{smallHeadlineSizes.map((size) => (\n\t\t\t<div key={size}>\n\t\t\t\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t\t\t\t<CardHeadline\n\t\t\t\t\t\theadlineText={`This is how a ${size} card headline looks`}\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsize={size}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\t\t\t\t<br />\n\t\t\t</div>\n\t\t))}\n\t</>\n);\nSize.story = { name: 'Size' };\n\nexport const liveStory = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how a card headline with a live kicker looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tkickerText=\"Live\"\n\t\t/>\n\t</ElementContainer>\n);\nliveStory.story = { name: 'With Live kicker' };\n\nexport const noSlash = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how a card headline with no kicker slash looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tkickerText=\"Live\"\n\t\t\tshowSlash={false}\n\t\t/>\n\t</ElementContainer>\n);\nnoSlash.story = { name: 'With Live kicker but no slash' };\n\nexport const pulsingDot = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how a card headline with a pulsing dot looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tkickerText=\"Live\"\n\t\t\tshowPulsingDot={true}\n\t\t/>\n\t</ElementContainer>\n);\npulsingDot.story = { name: 'With pulsing dot' };\n\nexport const cultureVariant = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how a Feature card headline with the culture pillar looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t}}\n\t\t\tkickerText=\"Art and stuff\"\n\t\t/>\n\t</ElementContainer>\n);\ncultureVariant.story = { name: 'With a culture kicker' };\n\nexport const Opinion = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how small card headline for opinion articles look\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tsize=\"small\"\n\t\t/>\n\t</ElementContainer>\n);\nOpinion.story = { name: 'Opinion (Quotes)' };\n\nexport const OpinionKicker = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how an opinion card headline with a kicker and quotes looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"George Monbiot\"\n\t\t\tshowSlash={true}\n\t\t/>\n\t</ElementContainer>\n);\nOpinionKicker.story = { name: 'With an opinion kicker' };\n\nexport const SpecialReport = () => (\n\t<ElementContainer\n\t\tshowTopBorder={false}\n\t\tshowSideBorders={false}\n\t\tbackgroundColour=\"grey\"\n\t>\n\t\t<CardHeadline\n\t\t\theadlineText=\"This is how a Special Report card headline with kicker and quotes looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Special Report\"\n\t\t\tshowSlash={true}\n\t\t/>\n\t</ElementContainer>\n);\nSpecialReport.story = { name: 'With theme SpecialReport' };\n\nexport const Busy = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<CardHeadline\n\t\t\theadlineText=\"I look life a buffoon. I feel incredible. And then I vomit\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Aerial Yoga\"\n\t\t\tshowSlash={true}\n\t\t/>\n\t</ElementContainer>\n);\nBusy.story = { name: 'Lifestyle opinion' };\n\nexport const Byline = () => (\n\t<>\n\t\t<ElementContainer showTopBorder={true} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"I look life a buffoon. I feel incredible. And then I vomit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t}}\n\t\t\t\tbyline=\"Labs byline\"\n\t\t\t\tshowByline={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer showTopBorder={true} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"I look life a buffoon. I feel incredible. And then I vomit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tbyline=\"News byline\"\n\t\t\t\tshowByline={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer showTopBorder={true} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"I look life a buffoon. I feel incredible. And then I vomit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t}}\n\t\t\t\tbyline=\"Sport byline\"\n\t\t\t\tshowByline={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer showTopBorder={true} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"I look life a buffoon. I feel incredible. And then I vomit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tbyline=\"Culture byline\"\n\t\t\t\tshowByline={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer showTopBorder={true} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"I look life a buffoon. I feel incredible. And then I vomit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t}}\n\t\t\t\tbyline=\"Lifestyle byline\"\n\t\t\t\tshowByline={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer showTopBorder={true} showSideBorders={false}>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"I look life a buffoon. I feel incredible. And then I vomit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t}}\n\t\t\t\tbyline=\"Opinion byline\"\n\t\t\t\tshowByline={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<br />\n\t\t<ElementContainer\n\t\t\tshowTopBorder={true}\n\t\t\tshowSideBorders={false}\n\t\t\tbackgroundColour={specialReport[300]}\n\t\t>\n\t\t\t<CardHeadline\n\t\t\t\theadlineText=\"I look life a buffoon. I feel incredible. And then I vomit\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t}}\n\t\t\t\tbyline=\"SpecialReport byline\"\n\t\t\t\tshowByline={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t</>\n);\nByline.story = { name: 'With byline' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CardHeadline.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":27,"column":46,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":27,"endColumn":48},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":28,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":52,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":55,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":55,"endColumn":51},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":56,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":81,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":84,"column":68,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":84,"endColumn":70},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":114,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":123,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":178,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":191,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport { headline, space, textSans, until } from '@guardian/source-foundations';\nimport { Link } from '@guardian/source-react-components';\nimport React from 'react';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getZIndex } from '../lib/getZIndex';\nimport { Byline } from './Byline';\nimport { Kicker } from './Kicker';\nimport { QuoteIcon } from './QuoteIcon';\n\ntype Props = {\n\theadlineText: string; // The text shown\n\tformat: ArticleFormat; // Used to decide when to add type specific styles\n\tcontainerPalette?: DCRContainerPalette;\n\tkickerText?: string;\n\tshowPulsingDot?: boolean;\n\tshowSlash?: boolean;\n\tshowQuotes?: boolean; // Even with design !== Comment, a piece can be opinion\n\tsize?: SmallHeadlineSize;\n\tbyline?: string;\n\tshowByline?: boolean;\n\tshowLine?: boolean; // If true a short line is displayed above, used for sublinks\n\tlinkTo?: string; // If provided, the headline is wrapped in a link\n};\n\nconst fontStyles = (size: SmallHeadlineSize) => {\n\tswitch (size) {\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\t${headline.xsmall()};\n\t\t\t\t${until.desktop} {\n\t\t\t\t\t${headline.xxsmall()};\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'medium':\n\t\t\treturn css`\n\t\t\t\t${headline.xxsmall()};\n\t\t\t\t${until.desktop} {\n\t\t\t\t\t${headline.xxxsmall()};\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\t${headline.xxxsmall()};\n\t\t\t`;\n\t\tcase 'tiny':\n\t\t\treturn css`\n\t\t\t\t${headline.xxxsmall()};\n\t\t\t\tfont-size: 14px;\n\t\t\t`;\n\t}\n};\n\nconst labTextStyles = (size: SmallHeadlineSize) => {\n\tswitch (size) {\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\t${textSans.large()};\n\t\t\t\t${until.desktop} {\n\t\t\t\t\t${textSans.medium()};\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'medium':\n\t\t\treturn css`\n\t\t\t\t${textSans.large({ lineHeight: 'tight' })};\n\t\t\t\t${until.desktop} {\n\t\t\t\t\t${textSans.medium({ lineHeight: 'tight' })};\n\t\t\t\t}\n\t\t\t\tpadding-bottom: ${space[1]}px;\n\t\t\t`;\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\t${textSans.small()};\n\t\t\t`;\n\t\tcase 'tiny':\n\t\t\treturn css`\n\t\t\t\t${textSans.xxsmall()};\n\t\t\t\tfont-size: 14px;\n\t\t\t`;\n\t}\n};\n\nconst underlinedStyles = (size: SmallHeadlineSize, colour: string) => {\n\tfunction underlinedCss(baseSize: number) {\n\t\treturn css`\n\t\t\tbackground-image: linear-gradient(\n\t\t\t\tto bottom,\n\t\t\t\ttransparent,\n\t\t\t\ttransparent ${baseSize - 1}px,\n\t\t\t\t${colour}\n\t\t\t);\n\t\t\tline-height: ${baseSize}px;\n\t\t\tbackground-size: 1px ${baseSize}px;\n\t\t\tbackground-origin: content-box;\n\t\t\tbackground-clip: content-box;\n\t\t\tmargin-right: -5px;\n\t\t`;\n\t}\n\n\tfunction underlinedCssWithMediaQuery(\n\t\tbaseSize: number,\n\t\tuntilDesktopSize: number,\n\t) {\n\t\treturn css`\n\t\t\t${until.desktop} {\n\t\t\t\t${underlinedCss(untilDesktopSize)}\n\t\t\t}\n\n\t\t\t${underlinedCss(baseSize)}\n\t\t`;\n\t}\n\n\tswitch (size) {\n\t\tcase 'large':\n\t\t\treturn underlinedCssWithMediaQuery(29, 29);\n\t\tcase 'medium':\n\t\t\treturn underlinedCssWithMediaQuery(25, 25);\n\t\tcase 'small':\n\t\t\treturn underlinedCss(22);\n\t\tcase 'tiny':\n\t\t\treturn underlinedCss(24);\n\t}\n};\n\nconst lineStyles = (palette: Palette) => css`\n\tpadding-top: 1px;\n\t:before {\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tcontent: '';\n\t\twidth: 120px;\n\t\tborder-top: 1px solid ${palette.border.cardSupporting};\n\t}\n`;\n\nconst WithLink = ({\n\tlinkTo,\n\tchildren,\n}: {\n\tlinkTo?: string;\n\tchildren: React.ReactNode;\n}) => {\n\tif (linkTo) {\n\t\treturn (\n\t\t\t<Link\n\t\t\t\thref={linkTo}\n\t\t\t\tsubdued={true}\n\t\t\t\tcssOverrides={css`\n\t\t\t\t\t/* See: https://css-tricks.com/nested-links/ */\n\t\t\t\t\t${getZIndex('card-nested-link')};\n\t\t\t\t\t/* The following styles turn off those provided by Link */\n\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t/* stylelint-disable-next-line property-disallowed-list */\n\t\t\t\t\tfont-family: inherit;\n\t\t\t\t\tfont-size: inherit;\n\t\t\t\t\tline-height: inherit;\n\t\t\t\t\t/* This css is used to remove any underline from the kicker but still\n\t\t\t\t\t   have it applied to the headline when the kicker is hovered */\n\t\t\t\t\t:hover {\n\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\t.show-underline {\n\t\t\t\t\t\t\ttext-decoration: underline;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</Link>\n\t\t);\n\t}\n\treturn <>{children}</>;\n};\n\nexport const CardHeadline = ({\n\theadlineText,\n\tformat,\n\tcontainerPalette,\n\tshowQuotes,\n\tkickerText,\n\tshowPulsingDot,\n\tshowSlash,\n\tsize = 'medium',\n\tbyline,\n\tshowByline,\n\tshowLine,\n\tlinkTo,\n}: Props) => {\n\tconst palette = decidePalette(format, containerPalette);\n\treturn (\n\t\t<>\n\t\t\t<h4\n\t\t\t\tcss={[\n\t\t\t\t\tformat.theme === ArticleSpecial.Labs\n\t\t\t\t\t\t? labTextStyles(size)\n\t\t\t\t\t\t: fontStyles(size),\n\t\t\t\t\tformat.design === ArticleDesign.Analysis &&\n\t\t\t\t\t\tunderlinedStyles(\n\t\t\t\t\t\t\tsize,\n\t\t\t\t\t\t\tpalette.background.analysisUnderline,\n\t\t\t\t\t\t),\n\t\t\t\t\tshowLine && lineStyles(palette),\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<WithLink linkTo={linkTo}>\n\t\t\t\t\t{kickerText && (\n\t\t\t\t\t\t<Kicker\n\t\t\t\t\t\t\ttext={kickerText}\n\t\t\t\t\t\t\tpalette={palette}\n\t\t\t\t\t\t\tshowPulsingDot={showPulsingDot}\n\t\t\t\t\t\t\tshowSlash={showSlash}\n\t\t\t\t\t\t\tinCard={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{showQuotes && (\n\t\t\t\t\t\t<QuoteIcon colour={palette.text.cardKicker} />\n\t\t\t\t\t)}\n\n\t\t\t\t\t<span\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tcolor: ${palette.text.cardHeadline};\n\t\t\t\t\t\t`}\n\t\t\t\t\t\tclassName=\"show-underline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{headlineText}\n\t\t\t\t\t</span>\n\t\t\t\t</WithLink>\n\t\t\t</h4>\n\t\t\t{byline && showByline && (\n\t\t\t\t<Byline\n\t\t\t\t\ttext={byline}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\tsize={size}\n\t\t\t\t\tisCard={true}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Carousel.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":182,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":182,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":214,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":214,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":233,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":233,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { breakpoints } from '@guardian/source-foundations';\nimport { Carousel } from './Carousel';\nimport { ElementContainer } from './ElementContainer';\n\nexport default {\n\tcomponent: Carousel,\n\ttitle: 'Components/Carousel',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.tablet,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t],\n\t\t},\n\t},\n};\n\nconst convertToImmersive = (trails: TrailType[]): TrailType[] => {\n\treturn trails.map((trail) => {\n\t\tconst format = {\n\t\t\t...trail.format,\n\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t};\n\t\treturn {\n\t\t\t...trail,\n\t\t\tformat,\n\t\t};\n\t});\n};\n\nconst trails: TrailType[] = [\n\t{\n\t\turl: 'https://www.theguardian.com/politics/live/2021/feb/17/uk-covid-nationwide-rapid-testing-lockdown-coronavirus-latest-update',\n\t\tlinkText:\n\t\t\t'UK Covid live: England lockdown to be eased in stages, says PM, amid reports of nationwide mass testing',\n\t\tshowByline: false,\n\t\tbyline: 'Yohannes Lowe',\n\t\timage: 'https://i.guim.co.uk/img/media/77e960298d4339e047eac5c1986d0f3214f6285d/419_447_4772_2863/master/4772.jpg?width=300&quality=85&auto=format&fit=max&s=9a17ef5d7a6240caa29965407ef912e0',\n\t\tformat: {\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t},\n\t\twebPublicationDate: '2021-02-17T12:45:05.000Z',\n\t\theadline:\n\t\t\t'UK Covid live: England lockdown to be eased in stages, says PM, amid reports of nationwide mass testing',\n\t\tshortUrl: 'https://gu.com/p/gekj6',\n\t\tdataLinkName: 'news | group-2 | card-@1',\n\t},\n\t{\n\t\turl: 'https://www.theguardian.com/world/2021/feb/17/uk-to-begin-worlds-first-covid-human-challenge-study-within-weeks',\n\t\tlinkText:\n\t\t\t'UK to infect up to 90 healthy volunteers with Covid in world first trial',\n\t\tshowByline: false,\n\t\tbyline: 'Nicola Davis and agency',\n\t\timage: 'https://i.guim.co.uk/img/media/56d554a7c453dc1040f70453a01fefcb227f2055/0_0_3060_1836/master/3060.jpg?width=300&quality=85&auto=format&fit=max&s=501112ecfd78672fc4a19133053fe04a',\n\t\tformat: {\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.Standard,\n\t\t},\n\t\twebPublicationDate: '2021-02-17T10:03:02.000Z',\n\t\theadline:\n\t\t\t'UK to infect up to 90 healthy volunteers with Covid in world first trial',\n\t\tshortUrl: 'https://gu.com/p/gey5n',\n\t\tdataLinkName: 'news | group-2 | card-@2',\n\t},\n\t{\n\t\turl: 'https://www.theguardian.com/world/2021/feb/17/scottish-government-inadequately-prepared-for-covid-audit-scotland-report',\n\t\tlinkText:\n\t\t\t'Scottish government inadequately prepared for Covid – watchdog',\n\t\tshowByline: false,\n\t\tbyline: 'Libby Brooks Scotland correspondent',\n\t\timage: 'https://i.guim.co.uk/img/media/df5aea6391e21b5a5d2d25fd9aad81d497f99d42/0_45_3062_1837/master/3062.jpg?width=300&quality=85&auto=format&fit=max&s=4de26576c2388e49ee9c9414d5c46d6d',\n\t\tformat: {\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.Standard,\n\t\t},\n\t\twebPublicationDate: '2021-02-17T11:11:43.000Z',\n\t\theadline:\n\t\t\t'Scottish government inadequately prepared for Covid, says watchdog',\n\t\tshortUrl: 'https://gu.com/p/gey2h',\n\t\tdataLinkName: 'news | group-1 | card-@3',\n\t},\n\t{\n\t\turl: 'https://www.theguardian.com/society/2021/feb/16/encouraging-signs-covid-vaccine-over-80s-deaths-fall-england',\n\t\tlinkText:\n\t\t\t'‘Encouraging’ signs for Covid vaccine as over-80s deaths fall in England',\n\t\tshowByline: false,\n\t\tbyline: 'Anna Leach, Ashley Kirk and Pamela Duncan',\n\t\timage: 'https://i.guim.co.uk/img/media/5ebec1a8d662f0da39887dae16e4b2720379246e/0_0_5000_3000/master/5000.jpg?width=300&quality=85&auto=format&fit=max&s=51c9ef2f26b312a7c057d86e9a53f365',\n\t\tformat: {\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.Standard,\n\t\t},\n\t\twebPublicationDate: '2021-02-16T16:00:55.000Z',\n\t\theadline:\n\t\t\t'‘Encouraging’ signs for Covid vaccine as over-80s deaths fall in England',\n\t\tshortUrl: 'https://gu.com/p/g94y7',\n\t\tdataLinkName: 'news | group-0 | card-@4',\n\t},\n\t{\n\t\turl: 'https://www.theguardian.com/world/2021/feb/16/contact-tracing-alone-has-little-impact-on-curbing-covid-spread-report-finds',\n\t\tlinkText:\n\t\t\t'Contact tracing alone has little impact on curbing Covid spread, report finds',\n\t\tshowByline: false,\n\t\tbyline: 'Nicola Davis and Natalie Grover',\n\t\timage: 'https://i.guim.co.uk/img/media/046002abfc13c8cf7f0c40454349eb0e95d842b2/0_147_3884_2331/master/3884.jpg?width=300&quality=85&auto=format&fit=max&s=63ca0f0e218f3c7d886231b544a82cbd',\n\t\tformat: {\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.Standard,\n\t\t},\n\t\twebPublicationDate: '2021-02-16T18:22:53.000Z',\n\t\theadline:\n\t\t\t'Contact tracing alone has little impact on curbing Covid spread, report finds',\n\t\tshortUrl: 'https://gu.com/p/geeq2',\n\t\tdataLinkName: 'news | group-0 | card-@5',\n\t},\n\t{\n\t\turl: 'https://www.theguardian.com/world/2021/feb/16/covid-almost-2m-more-people-asked-shield-england',\n\t\tlinkText:\n\t\t\t'Ethnicity and poverty are Covid risk factors, new Oxford modelling tool shows',\n\t\tshowByline: false,\n\t\tbyline: 'Sarah Boseley Health editor and Aamna Mohdin Community affairs correspondent',\n\t\timage: 'https://i.guim.co.uk/img/media/9e47ac13c7ffc63ee56235e8ef64301d6ed96d03/0_90_3520_2111/master/3520.jpg?width=300&quality=85&auto=format&fit=max&s=206ae21754ca45db0f098b08091562ef',\n\t\tformat: {\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.Standard,\n\t\t},\n\t\twebPublicationDate: '2021-02-16T16:35:45.000Z',\n\t\theadline:\n\t\t\t'Ethnicity and poverty are Covid risk factors, new Oxford modelling tool shows',\n\t\tshortUrl: 'https://gu.com/p/gee2t',\n\t\tdataLinkName: 'news | group-0 | card-@6',\n\t},\n\t{\n\t\turl: 'https://www.theguardian.com/politics/live/2021/feb/16/uk-covid-live-coronavirus-sturgeon-return-scottish-schools-latest-updates',\n\t\tlinkText:\n\t\t\t'UK Covid: 799 more deaths and 10,625 new cases reported; Scottish schools in phased return from Monday – as it happened',\n\t\tshowByline: false,\n\t\tbyline: 'Nicola Slawson',\n\t\timage: 'https://i.guim.co.uk/img/media/c01ad5ee63034e0f478959fc7a705c93debf8ba7/0_220_4104_2462/master/4104.jpg?width=300&quality=85&auto=format&fit=max&s=5dbe0a813852f2ce7304f2eddd0b6e45',\n\t\tformat: {\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t},\n\t\twebPublicationDate: '2021-02-16T17:00:15.000Z',\n\t\theadline:\n\t\t\t'UK Covid: 799 more deaths and 10,625 new cases reported; Scottish schools in phased return from Monday – as it happened',\n\t\tshortUrl: 'https://gu.com/p/geczb',\n\t\tdataLinkName: 'news | group-0 | card-@7',\n\t},\n\t{\n\t\turl: 'https://www.theguardian.com/uk-news/2021/feb/16/qcovid-how-improved-algorithm-can-identify-more-higher-risk-adults',\n\t\tlinkText:\n\t\t\t'QCovid: how improved algorithm can identify more higher-risk adults',\n\t\tshowByline: false,\n\t\tbyline: 'Sarah Boseley Health editor',\n\t\timage: 'https://i.guim.co.uk/img/media/6d152e60fdb37dbbc063a68e2cffccf97cdab183/0_40_5458_3275/master/5458.jpg?width=300&quality=85&auto=format&fit=max&s=de76d3ccfb81477fa0ec3e24a93a0daf',\n\t\tformat: {\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.Analysis,\n\t\t},\n\t\twebPublicationDate: '2021-02-16T18:42:44.000Z',\n\t\theadline:\n\t\t\t'QCovid: how improved algorithm can identify more higher-risk adults',\n\t\tshortUrl: 'https://gu.com/p/gefev',\n\t\tdataLinkName: 'news | group-0 | card-@8',\n\t},\n];\n\nconst immersiveTrails = convertToImmersive(trails);\n\nexport const Headlines = () => (\n\t<>\n\t\t<ElementContainer showTopBorder={true}>\n\t\t\t<Carousel\n\t\t\t\theading=\"More on this story\"\n\t\t\t\ttrails={trails}\n\t\t\t\tophanComponentName=\"curated-content\"\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<ElementContainer showTopBorder={true}>\n\t\t\t<Carousel\n\t\t\t\theading=\"Sport\"\n\t\t\t\ttrails={trails}\n\t\t\t\tophanComponentName=\"curated-content\"\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisCuratedContent={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t</>\n);\n\nHeadlines.story = 'Headlines carousel';\n\nexport const SingleItemCarousel = () => (\n\t<>\n\t\t<ElementContainer showTopBorder={true}>\n\t\t\t<Carousel\n\t\t\t\theading=\"More on this story\"\n\t\t\t\ttrails={trails.slice(1, 2)}\n\t\t\t\tophanComponentName=\"curated-content\"\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t</>\n);\n\nHeadlines.story = 'Carousel with single item';\n\nexport const Immersive = () => (\n\t<>\n\t\t<ElementContainer showTopBorder={true}>\n\t\t\t<Carousel\n\t\t\t\theading=\"More on this story\"\n\t\t\t\ttrails={immersiveTrails}\n\t\t\t\tophanComponentName=\"curated-content\"\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t\t<ElementContainer showTopBorder={true}>\n\t\t\t<Carousel\n\t\t\t\theading=\"Sport\"\n\t\t\t\ttrails={immersiveTrails}\n\t\t\t\tophanComponentName=\"curated-content\"\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t}}\n\t\t\t\tisCuratedContent={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t</>\n);\n\nImmersive.story = 'Immersive carousel';\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Carousel.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":353,"column":27,"nodeType":"Punctuator","messageId":"preferNullish","endLine":353,"endColumn":29,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7263,7265],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":354,"column":23,"nodeType":"Punctuator","messageId":"preferNullish","endLine":354,"endColumn":25,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7292,7294],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":399,"column":11,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":399,"endColumn":21},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":508,"column":15,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":508,"endColumn":17},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":548,"column":5,"nodeType":"JSXElement","messageId":"missingType","endLine":555,"endColumn":14},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":559,"column":5,"nodeType":"JSXElement","messageId":"missingType","endLine":566,"endColumn":14},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":584,"column":8,"nodeType":"JSXElement","messageId":"missingType","endLine":591,"endColumn":17},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":592,"column":8,"nodeType":"JSXElement","messageId":"missingType","endLine":602,"endColumn":17},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":626,"column":14,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":626,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport {\n\tbrandAlt,\n\tfrom,\n\theadline,\n\tneutral,\n\tspace,\n\ttext,\n\tuntil,\n} from '@guardian/source-foundations';\nimport libDebounce from 'lodash-es/debounce';\nimport { useEffect, useRef, useState } from 'react';\nimport { decidePalette } from '../lib/decidePalette';\nimport { formatAttrString } from '../lib/formatAttrString';\nimport { getZIndex } from '../lib/getZIndex';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { Hide } from './Hide';\nimport { LeftColumn } from './LeftColumn';\n\n// Carousel icons - need replicating from source for centring\n\nconst SvgChevronLeftSingle = () => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 32 32\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M18.4 4L8 14.4V15.45L18.4 25.8499L19.375 24.8999L11.05 14.925L19.375 4.95L18.4 4Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n\nconst SvgChevronRightSingle = () => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 32 32\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\twidth=\"24\"\n\t\t\theight=\"24\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M9.975 4L9 4.95L17.325 14.925L9 24.8999L9.975 25.8499L20.375 15.45V14.4L9.975 4Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n\nconst wrapperStyle = (length: number) => css`\n\tdisplay: flex;\n\t/* Remove space-between where there is a single item, so that it is left-aligned */\n\t${length > 1 && 'justify-content: space-between'}\n\toverflow: hidden;\n\t${from.desktop} {\n\t\tpadding-right: 40px;\n\t}\n`;\n\n// For desktop and above, are we at the last card. Is one less than the dots style equivalent\nconst isLastCardShowing = (index: number, totalStories: number) =>\n\tindex >= totalStories - 4;\n\nconst containerMargins = css`\n\tmargin-top: 6px;\n\tmargin-bottom: 24px;\n\n\tmargin-left: 0px;\n\tmargin-right: 0px;\n\n\t${from.tablet} {\n\t\t/* Shrink the container to remove the leading and\n       \t\t\t\t   trailing side margins from the list of cards */\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n\n\t${from.leftCol} {\n\t\tmargin-left: -1px;\n\t\tmargin-right: -10px;\n\t\tmargin-top: 6px;\n\t}\n`;\n\nconst containerStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tposition: relative;\n\n\toverflow: hidden; /* Needed for scrolling to work */\n`;\n\nconst carouselStyle = css`\n\tmin-height: 227px;\n\tposition: relative; /* must set position for offset(Left) calculations of children to be relative to this box */\n\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: stretch;\n\n\tscroll-snap-type: x mandatory;\n\tscroll-behavior: smooth;\n\toverflow-x: auto; /* Scrollbar is less intrusive visually on non-desktop devices typically */\n\toverflow-y: hidden; /*Fixes small problem with 1px vertical scroll on immersive due to top bar */\n\t${from.tablet} {\n\t\t&::-webkit-scrollbar {\n\t\t\tdisplay: none;\n\t\t}\n\n\t\tscrollbar-width: none;\n\t}\n\n\t${until.tablet} {\n\t\tmargin-left: -10px; /* Align firstcard on mobile devices */\n\t}\n`;\n\nconst dotsStyle = css`\n\tmargin-bottom: ${space[2]}px;\n`;\n\nconst dotStyle = css`\n\tcursor: pointer;\n\tdisplay: inline-block;\n\theight: ${space[3]}px;\n\twidth: ${space[3]}px;\n\tbackground-color: ${neutral[93]};\n\tborder-radius: 100%;\n\tborder: 0 none;\n\tpadding: 0;\n\tmargin-right: ${space[1]}px;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ${neutral[86]};\n\t\toutline: none;\n\t}\n`;\n\nconst dotActiveStyle = (palette: Palette) => css`\n\tbackground-color: ${palette.background.carouselDot};\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ${palette.background.carouselDotFocus};\n\t}\n`;\n\nconst adjustNumberOfDotsStyle = (index: number, totalStories: number) => {\n\treturn css`\n\t\t${from.phablet} {\n\t\t\tdisplay: ${index >= totalStories - 1 ? 'none' : 'auto'};\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\tdisplay: ${index >= totalStories - 2 ? 'none' : 'auto'};\n\t\t}\n\n\t\t${from.desktop} {\n\t\t\tdisplay: ${index >= totalStories - 3 ? 'none' : 'auto'};\n\t\t}\n\t`;\n};\n\n// Not used for buttons above carousel\nconst buttonContainerStyle = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tposition: absolute;\n\t${getZIndex('onwardsCarousel')}\n\theight: 100%;\n\tpadding-bottom: 36px; /* Align buttons centrally with cards */\n\n\t${until.leftCol} {\n\t\tdisplay: none;\n\t}\n`;\nconst prevButtonContainerStyle = (format: ArticleFormat) => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog: {\n\t\t\treturn css`\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\tleft: 205px;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t\tdefault: {\n\t\t\treturn css`\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\tleft: 120px;\n\t\t\t\t}\n\n\t\t\t\t${from.wide} {\n\t\t\t\t\tleft: 205px;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t}\n};\n\nconst nextButtonContainerStyle = css`\n\tright: 10px;\n`;\n\nconst buttonStyle = css`\n\tborder: 0 none;\n\tborder-radius: 100%;\n\theight: 34px;\n\twidth: 34px;\n\tcursor: pointer;\n\tmargin-top: 10px;\n\tpadding: 0;\n\tbackground-color: ${neutral[0]};\n\n\t&:active,\n\t&:hover {\n\t\toutline: none;\n\t\tbackground-color: ${brandAlt[400]};\n\t\tsvg {\n\t\t\tfill: ${neutral[7]};\n\t\t}\n\t}\n\n\t&:focus {\n\t\toutline: none;\n\t}\n\n\tsvg {\n\t\tfill: ${neutral[100]};\n\t\theight: 34px;\n\t}\n`;\n\nconst prevButtonStyle = (index: number) => css`\n\tbackground-color: ${index !== 0 ? neutral[0] : neutral[60]};\n\tcursor: ${index !== 0 ? 'pointer' : 'default'};\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ${index !== 0 ? brandAlt[400] : neutral[60]};\n\n\t\tsvg {\n\t\t\tfill: ${neutral[100]};\n\t\t}\n\t}\n`;\n\nconst nextButtonStyle = (index: number, totalStories: number) => css`\n\tpadding-left: 5px; /* Fix centering of SVG*/\n\tmargin-left: 10px;\n\tbackground-color: ${!isLastCardShowing(index, totalStories)\n\t\t? neutral[0]\n\t\t: neutral[60]};\n\tcursor: ${!isLastCardShowing(index, totalStories) ? 'pointer' : 'default'};\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: ${!isLastCardShowing(index, totalStories)\n\t\t\t? brandAlt[400]\n\t\t\t: neutral[60]};\n\n\t\tsvg {\n\t\t\tfill: ${neutral[100]};\n\t\t}\n\t}\n`;\n\nconst headerRowStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\t${from.tablet} {\n\t\tpadding-right: 10px;\n\t}\n\n\t${from.tablet} {\n\t\tmargin-left: 10px;\n\t}\n`;\n\nconst headerStyles = css`\n\t${headline.xsmall({ fontWeight: 'bold' })};\n\tcolor: ${text.primary};\n\t${headline.xsmall({ fontWeight: 'bold' })};\n\tpadding-bottom: ${space[2]}px;\n\tpadding-top: ${space[1]}px;\n\tmargin-left: 0;\n`;\n\nconst titleStyle = (palette: Palette, isCuratedContent?: boolean) => css`\n\tcolor: ${isCuratedContent ? palette.text.carouselTitle : text.primary};\n`;\n\nconst Title = ({\n\ttitle,\n\tpalette,\n\tisCuratedContent,\n}: {\n\ttitle: string;\n\tpalette: Palette;\n\tisCuratedContent?: boolean;\n}) => (\n\t<h2 css={headerStyles}>\n\t\t{isCuratedContent ? 'More from ' : ''}\n\t\t<span css={titleStyle(palette, isCuratedContent)}>{title}</span>\n\t</h2>\n);\n\ntype CarouselCardProps = {\n\tisFirst: boolean;\n\tformat: ArticleFormat;\n\tlinkTo: string;\n\theadlineText: string;\n\twebPublicationDate: string;\n\tkickerText?: string;\n\timageUrl?: string;\n\tdataLinkName?: string;\n};\n\nexport const CarouselCard: React.FC<CarouselCardProps> = ({\n\tformat,\n\tlinkTo,\n\timageUrl,\n\theadlineText,\n\twebPublicationDate,\n\tkickerText,\n\tisFirst,\n\tdataLinkName,\n}: CarouselCardProps) => (\n\t<LI\n\t\tstretch={true}\n\t\tpercentage=\"25%\"\n\t\tshowDivider={!isFirst}\n\t\tpadSides={true}\n\t\tpadSidesOnMobile={true}\n\t\tsnapAlignStart={true}\n\t>\n\t\t<Card\n\t\t\tlinkTo={linkTo}\n\t\t\tformat={format}\n\t\t\theadlineText={headlineText}\n\t\t\twebPublicationDate={webPublicationDate}\n\t\t\tkickerText={kickerText || ''}\n\t\t\timageUrl={imageUrl || ''}\n\t\t\tshowClock={true}\n\t\t\tshowAge={true}\n\t\t\timagePositionOnMobile=\"top\"\n\t\t\tminWidthInPixels={220}\n\t\t\tshowQuotes={\n\t\t\t\tformat.design === ArticleDesign.Comment ||\n\t\t\t\tformat.design === ArticleDesign.Letter\n\t\t\t}\n\t\t\tdataLinkName={dataLinkName}\n\t\t/>\n\t</LI>\n);\n\ntype HeaderAndNavProps = {\n\theading: string;\n\ttrails: TrailType[];\n\tpalette: Palette;\n\tindex: number;\n\tisCuratedContent?: boolean;\n\tgoToIndex: (newIndex: number) => void;\n};\n\nconst HeaderAndNav: React.FC<HeaderAndNavProps> = ({\n\theading,\n\ttrails,\n\tpalette,\n\tindex,\n\tisCuratedContent,\n\tgoToIndex,\n}) => (\n\t<div>\n\t\t<Title\n\t\t\ttitle={heading}\n\t\t\tpalette={palette}\n\t\t\tisCuratedContent={isCuratedContent}\n\t\t/>\n\t\t<div css={dotsStyle}>\n\t\t\t{trails.map((_, i) => (\n\t\t\t\t<span\n\t\t\t\t\tonClick={() => goToIndex(i)}\n\t\t\t\t\t// This button is not particularly useful for keyboard users as the stories\n\t\t\t\t\t// are tabb-able themselves so we hide them with aria and make them\n\t\t\t\t\t// not available to keyboard\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tkey={`dot-${i}`}\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tdotStyle,\n\t\t\t\t\t\ti === index && dotActiveStyle(palette),\n\t\t\t\t\t\tadjustNumberOfDotsStyle(i, trails.length),\n\t\t\t\t\t]}\n\t\t\t\t\tdata-link-name={`carousel-small-nav-dot-${i}`}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t</div>\n);\n\nexport const Carousel: React.FC<OnwardsType> = ({\n\theading,\n\ttrails,\n\tophanComponentName,\n\tformat,\n\tisCuratedContent,\n}: OnwardsType) => {\n\tconst palette = decidePalette(format);\n\tconst carouselRef = useRef<HTMLUListElement>(null);\n\n\tconst [index, setIndex] = useState(0);\n\tconst [maxIndex, setMaxIndex] = useState(0);\n\n\tconst arrowName = 'carousel-small-arrow';\n\n\tconst notPresentation = (el: HTMLElement): boolean =>\n\t\tel.getAttribute('role') !== 'presentation';\n\n\tconst getItems = (): HTMLElement[] => {\n\t\tconst { current } = carouselRef;\n\t\tif (current === null) return [];\n\n\t\treturn Array.from(current.children) as HTMLElement[];\n\t};\n\n\tconst getIndex = (): number => {\n\t\tconst { current } = carouselRef;\n\t\tif (current === null) return 0;\n\n\t\tconst offsets = getItems()\n\t\t\t.filter(notPresentation)\n\t\t\t.map((el) => el.offsetLeft);\n\n\t\tconst scrolled = (current.scrollLeft || 0) + offsets[0];\n\t\tconst active = offsets.findIndex((el) => el >= scrolled);\n\n\t\treturn Math.max(0, active);\n\t};\n\n\tconst getSetIndex = () => {\n\t\tsetIndex(getIndex());\n\t};\n\n\tconst goToIndex = (newIndex: number) => {\n\t\tconst { current } = carouselRef;\n\t\tif (current === null) return;\n\n\t\tconst offsets = getItems()\n\t\t\t.filter(notPresentation)\n\t\t\t.map((el) => el.offsetLeft);\n\n\t\tcurrent.scrollTo({ left: offsets[newIndex] });\n\n\t\tgetSetIndex();\n\t};\n\n\tconst prev = () => {\n\t\tconst { current } = carouselRef;\n\t\tif (current === null) return;\n\n\t\tconst offsets = getItems()\n\t\t\t.filter(notPresentation)\n\t\t\t.map((el) => el.offsetLeft);\n\n\t\tconst scrolled = (current.scrollLeft || 0) + offsets[0];\n\n\t\tconst nextOffset = offsets\n\t\t\t.reverse()\n\t\t\t.find((offset) => offset < scrolled);\n\n\t\tif (nextOffset) {\n\t\t\tcurrent.scrollTo({ left: nextOffset });\n\t\t} else {\n\t\t\tcurrent.scrollTo({ left: 0 });\n\t\t}\n\t\tgetSetIndex();\n\t};\n\n\tconst next = () => {\n\t\tconst { current } = carouselRef;\n\t\tif (current === null) return;\n\n\t\tconst offsets = getItems()\n\t\t\t.filter(notPresentation)\n\t\t\t.map((el) => el.offsetLeft);\n\n\t\tconst scrolled = (current.scrollLeft || 0) + offsets[0];\n\t\tconst nextOffset = offsets.find((offset) => offset > scrolled);\n\n\t\tif (nextOffset) {\n\t\t\tcurrent.scrollTo({ left: nextOffset });\n\t\t}\n\n\t\tgetSetIndex();\n\t};\n\n\tuseEffect(() => {\n\t\tconst carousel = carouselRef.current;\n\t\tif (carousel) {\n\t\t\tcarousel.addEventListener('scroll', libDebounce(getSetIndex, 100));\n\t\t\treturn carousel.removeEventListener(\n\t\t\t\t'scroll',\n\t\t\t\tlibDebounce(getSetIndex, 100),\n\t\t\t);\n\t\t}\n\t});\n\n\t// No idea if this is the best approach but it prevents issues with libDebounce\n\t// using old data to determine the max index. Instead we say update maxIndex\n\t// when index changes and compare it against the prior maxIndex only.\n\tuseEffect(() => setMaxIndex((m) => Math.max(index, m)), [index]);\n\n\treturn (\n\t\t<div\n\t\t\tcss={wrapperStyle(trails.length)}\n\t\t\tdata-link-name={formatAttrString(heading)}\n\t\t>\n\t\t\t<LeftColumn\n\t\t\t\tborderType=\"partial\"\n\t\t\t\tsize={\n\t\t\t\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\t\t\t\tformat.design === ArticleDesign.DeadBlog\n\t\t\t\t\t\t? 'wide'\n\t\t\t\t\t\t: 'compact'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<HeaderAndNav\n\t\t\t\t\theading={heading}\n\t\t\t\t\ttrails={trails}\n\t\t\t\t\tpalette={palette}\n\t\t\t\t\tindex={index}\n\t\t\t\t\tisCuratedContent={isCuratedContent}\n\t\t\t\t\tgoToIndex={goToIndex}\n\t\t\t\t/>\n\t\t\t</LeftColumn>\n\t\t\t<div css={[buttonContainerStyle, prevButtonContainerStyle(format)]}>\n\t\t\t\t<button\n\t\t\t\t\tonClick={prev}\n\t\t\t\t\taria-label=\"Move carousel backwards\"\n\t\t\t\t\tcss={[buttonStyle, prevButtonStyle(index)]}\n\t\t\t\t\tdata-link-name={`${arrowName}-prev`}\n\t\t\t\t>\n\t\t\t\t\t<SvgChevronLeftSingle />\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div css={[buttonContainerStyle, nextButtonContainerStyle]}>\n\t\t\t\t<button\n\t\t\t\t\tonClick={next}\n\t\t\t\t\taria-label=\"Move carousel forwards\"\n\t\t\t\t\tcss={[buttonStyle, nextButtonStyle(index, trails.length)]}\n\t\t\t\t\tdata-link-name={`${arrowName}-next`}\n\t\t\t\t>\n\t\t\t\t\t<SvgChevronRightSingle />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tcss={[containerStyles, containerMargins]}\n\t\t\t\tdata-component={ophanComponentName}\n\t\t\t\tdata-link={formatAttrString(heading)}\n\t\t\t>\n\t\t\t\t<Hide when=\"above\" breakpoint=\"leftCol\">\n\t\t\t\t\t<div css={headerRowStyles}>\n\t\t\t\t\t\t<HeaderAndNav\n\t\t\t\t\t\t\theading={heading}\n\t\t\t\t\t\t\ttrails={trails}\n\t\t\t\t\t\t\tpalette={palette}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\tisCuratedContent={isCuratedContent}\n\t\t\t\t\t\t\tgoToIndex={goToIndex}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"desktop\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={prev}\n\t\t\t\t\t\t\t\taria-label=\"Move carousel backwards\"\n\t\t\t\t\t\t\t\tcss={[buttonStyle, prevButtonStyle(index)]}\n\t\t\t\t\t\t\t\tdata-link-name={`${arrowName}-prev`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SvgChevronLeftSingle />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonClick={next}\n\t\t\t\t\t\t\t\taria-label=\"Move carousel forwards\"\n\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\tbuttonStyle,\n\t\t\t\t\t\t\t\t\tnextButtonStyle(index, trails.length),\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tdata-link-name={`${arrowName}-next`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<SvgChevronRightSingle />\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t</div>\n\t\t\t\t</Hide>\n\n\t\t\t\t<ul\n\t\t\t\t\tcss={carouselStyle}\n\t\t\t\t\tref={carouselRef}\n\t\t\t\t\tdata-component={`carousel-small | maxIndex-${maxIndex}`}\n\t\t\t\t>\n\t\t\t\t\t{trails.map((trail, i) => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\turl: linkTo,\n\t\t\t\t\t\t\theadline: headlineText,\n\t\t\t\t\t\t\twebPublicationDate,\n\t\t\t\t\t\t\tformat: trailFormat,\n\t\t\t\t\t\t\timage,\n\t\t\t\t\t\t\tkickerText,\n\t\t\t\t\t\t} = trail;\n\t\t\t\t\t\t// Don't try to render cards that have no publication date. This property is technically optional\n\t\t\t\t\t\t// but we rarely if ever expect it not to exist\n\t\t\t\t\t\tif (!webPublicationDate) return null;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<CarouselCard\n\t\t\t\t\t\t\t\tkey={`${trail.url}${i}`}\n\t\t\t\t\t\t\t\tisFirst={i === 0}\n\t\t\t\t\t\t\t\tformat={trailFormat}\n\t\t\t\t\t\t\t\tlinkTo={linkTo}\n\t\t\t\t\t\t\t\theadlineText={headlineText}\n\t\t\t\t\t\t\t\twebPublicationDate={webPublicationDate}\n\t\t\t\t\t\t\t\timageUrl={image}\n\t\t\t\t\t\t\t\tkickerText={kickerText}\n\t\t\t\t\t\t\t\tdataLinkName={`carousel-small-card-position-${i}`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ChartAtomWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ChartAtom } from '@guardian/atoms-rendering';\nimport type { ChartAtomType } from '@guardian/atoms-rendering/dist/types/types';\n\nexport const ChartAtomWrapper = (props: ChartAtomType) => {\n\treturn <ChartAtom {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ClickToView.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":113,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":113,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":127,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":127,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":141,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":141,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":155,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":155,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":169,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":169,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":466,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":466,"endColumn":46},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":672,"column":47,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":672,"endColumn":52},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":706,"column":36,"nodeType":"Punctuator","messageId":"preferNullish","endLine":706,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[34134,34136],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":732,"column":31,"nodeType":"Punctuator","messageId":"preferNullish","endLine":732,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[34842,34844],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":759,"column":33,"nodeType":"Punctuator","messageId":"preferNullish","endLine":759,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[35623,35625],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":786,"column":33,"nodeType":"Punctuator","messageId":"preferNullish","endLine":786,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[36437,36439],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":813,"column":34,"nodeType":"Punctuator","messageId":"preferNullish","endLine":813,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[37204,37206],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":830,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":830,"endColumn":46},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":893,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":893,"endColumn":49},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":950,"column":46,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":950,"endColumn":51},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1029,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1029,"endColumn":48},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1095,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1095,"endColumn":46},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1144,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1144,"endColumn":50},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1191,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1191,"endColumn":44},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1254,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1254,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { textSans } from '@guardian/source-foundations';\nimport { ClickToView } from './ClickToView';\nimport { ContainerLayout } from './ContainerLayout';\nimport { DocumentBlockComponent } from './DocumentBlockComponent.importable';\nimport { EmbedBlockComponent } from './EmbedBlockComponent.importable';\nimport { Figure } from './Figure';\nimport { InstagramBlockComponent } from './InstagramBlockComponent.importable';\nimport { MapEmbedBlockComponent } from './MapEmbedBlockComponent.importable';\nimport { SoundcloudBlockComponent } from './SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from './SpotifyBlockComponent.importable';\nimport { TweetBlockComponent } from './TweetBlockComponent.importable';\nimport { UnsafeEmbedBlockComponent } from './UnsafeEmbedBlockComponent.importable';\nimport { VimeoBlockComponent } from './VimeoBlockComponent';\nimport { VineBlockComponent } from './VineBlockComponent.importable';\n\nexport default {\n\tcomponent: ClickToView,\n\ttitle: 'Components/ClickToView',\n};\n\nconst paragraphStyle = css`\n\t${textSans.medium()};\n\tfont-weight: 300;\n\tmargin-top: 0;\n\tmargin-bottom: 8px;\n`;\n\nconst RoleStory = ({\n\tchildren,\n\trole,\n}: {\n\tchildren: React.ReactNode;\n\trole: RoleType;\n}) => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Click To View\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tLo-fi scenester ethical readymade. Hoodie marfa palo santo\n\t\t\t\t\tfixie hot chicken art party hell of thundercats skateboard\n\t\t\t\t\tsynth. Skateboard thundercats hoodie pitchfork neutra\n\t\t\t\t\tpinterest kitsch literally polaroid irony mumblecore next\n\t\t\t\t\tlevel. Truffaut street art edison bulb, banh mi cliche\n\t\t\t\t\tpost-ironic mixtape\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole={role}\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\trole={role}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource=\"A Thirdparty Provider\"\n\t\t\t\t\t\tsourceDomain=\"thirdparty.com\"\n\t\t\t\t\t\tonAccept={() => {}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{children}\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tTruffaut deep v before they sold out shoreditch. Enamel pin\n\t\t\t\t\tvenmo gochujang shaman +1 try-hard keffiyeh freegan godard\n\t\t\t\t\tair plant humblebrag brooklyn meggings.\n\t\t\t\t</p>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tLo-fi scenester ethical readymade. Hoodie marfa palo santo\n\t\t\t\t\tfixie hot chicken art party hell of thundercats skateboard\n\t\t\t\t\tsynth. Skateboard thundercats hoodie pitchfork neutra\n\t\t\t\t\tpinterest kitsch literally polaroid irony mumblecore next\n\t\t\t\t\tlevel. Truffaut street art edison bulb, banh mi cliche\n\t\t\t\t\tpost-ironic mixtape\n\t\t\t\t</p>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tLo-fi scenester ethical readymade. Hoodie marfa palo santo\n\t\t\t\t\tfixie hot chicken art party hell of thundercats skateboard\n\t\t\t\t\tsynth. Skateboard thundercats hoodie pitchfork neutra\n\t\t\t\t\tpinterest kitsch literally polaroid irony mumblecore next\n\t\t\t\t\tlevel. Truffaut street art edison bulb, banh mi cliche\n\t\t\t\t\tpost-ironic mixtape\n\t\t\t\t</p>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tLo-fi scenester ethical readymade. Hoodie marfa palo santo\n\t\t\t\t\tfixie hot chicken art party hell of thundercats skateboard\n\t\t\t\t\tsynth. Skateboard thundercats hoodie pitchfork neutra\n\t\t\t\t\tpinterest kitsch literally polaroid irony mumblecore next\n\t\t\t\t\tlevel. Truffaut street art edison bulb, banh mi cliche\n\t\t\t\t\tpost-ironic mixtape\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const InlineStory = () => {\n\treturn (\n\t\t<RoleStory role=\"inline\">\n\t\t\t<img\n\t\t\t\tsrc=\"http://placekitten.com/g/620/400\"\n\t\t\t\twidth=\"620\"\n\t\t\t\theight=\"400\"\n\t\t\t\talt=\"\"\n\t\t\t/>\n\t\t</RoleStory>\n\t);\n};\nInlineStory.story = { name: \"Click to view in 'inline' role\" };\n\nexport const SupportingStory = () => {\n\treturn (\n\t\t<RoleStory role=\"supporting\">\n\t\t\t<img\n\t\t\t\tsrc=\"http://placekitten.com/g/380/300\"\n\t\t\t\twidth=\"380\"\n\t\t\t\theight=\"300\"\n\t\t\t\talt=\"\"\n\t\t\t/>\n\t\t</RoleStory>\n\t);\n};\nSupportingStory.story = { name: \"Click to view in 'supporting' role\" };\n\nexport const ShowcaseStory = () => {\n\treturn (\n\t\t<RoleStory role=\"showcase\">\n\t\t\t<img\n\t\t\t\tsrc=\"http://placekitten.com/g/860/560\"\n\t\t\t\twidth=\"860\"\n\t\t\t\theight=\"560\"\n\t\t\t\talt=\"\"\n\t\t\t/>\n\t\t</RoleStory>\n\t);\n};\nShowcaseStory.story = { name: \"Click to view in 'showcase' role\" };\n\nexport const HalfWidthStory = () => {\n\treturn (\n\t\t<RoleStory role=\"halfWidth\">\n\t\t\t<img\n\t\t\t\tsrc=\"http://placekitten.com/g/860/560\"\n\t\t\t\twidth=\"310\"\n\t\t\t\theight=\"200\"\n\t\t\t\talt=\"\"\n\t\t\t/>\n\t\t</RoleStory>\n\t);\n};\nHalfWidthStory.story = { name: \"Click to view in 'halfWidth' role\" };\n\nexport const ThumbnailStory = () => {\n\treturn (\n\t\t<RoleStory role=\"thumbnail\">\n\t\t\t<img\n\t\t\t\tsrc=\"http://placekitten.com/g/140/105\"\n\t\t\t\twidth=\"140\"\n\t\t\t\theight=\"105\"\n\t\t\t\talt=\"\"\n\t\t\t/>\n\t\t</RoleStory>\n\t);\n};\nThumbnailStory.story = { name: \"Click to view in 'thumbnail' role\" };\n\nconst Inline: RoleType = 'inline';\n\nconst instagramEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Instagram',\n\tsourceDomain: 'instagram.com',\n\theight: undefined,\n\twidth: undefined,\n\tisThirdPartyTracking: true,\n\tsafe: false,\n\talt: 'Idris Elba wedding',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<blockquote class=\"instagram-media\" data-instgrm-captioned data-instgrm-permalink=\"https://www.instagram.com/p/BwwONCplEyj/\" data-instgrm-version=\"12\" style=\" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);\"><div style=\"padding:16px;\"> <a href=\"https://www.instagram.com/p/BwwONCplEyj/\" style=\" background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;\" target=\"_blank\"> <div style=\" display: flex; flex-direction: row; align-items: center;\"> <div style=\"background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;\"></div> <div style=\"display: flex; flex-direction: column; flex-grow: 1; justify-content: center;\"> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;\"></div> <div style=\" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;\"></div></div></div><div style=\"padding: 19% 0;\"></div> <div style=\"display:block; height:50px; margin:0 auto 12px; width:50px;\"><svg width=\"50px\" height=\"50px\" viewBox=\"0 0 60 60\" version=\"1.1\" xmlns=\"https://www.w3.org/2000/svg\" xmlns:xlink=\"https://www.w3.org/1999/xlink\"><g stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\"><g transform=\"translate(-511.000000, -20.000000)\" fill=\"#000000\"><g><path d=\"M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631\"></path></g></g></g></svg></div><div style=\"padding-top: 8px;\"> <div style=\" color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;\"> View this post on Instagram</div></div><div style=\"padding: 12.5% 0;\"></div> <div style=\"display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;\"><div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);\"></div> <div style=\"background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;\"></div> <div style=\"background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);\"></div></div><div style=\"margin-left: 8px;\"> <div style=\" background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;\"></div> <div style=\" width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)\"></div></div><div style=\"margin-left: auto;\"> <div style=\" width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);\"></div> <div style=\" background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);\"></div> <div style=\" width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);\"></div></div></div></a> <p style=\" margin:8px 0 0 0; padding:0 4px;\"> <a href=\"https://www.instagram.com/p/BwwONCplEyj/\" style=\" color:#000; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none; word-wrap:break-word;\" target=\"_blank\">Congratulations to newlyweds #IdrisElba and #SabrinaDhowre who exchanged vows in Morocco on April 26 2019. Celebrations were spread over three days in Marrakech. See more in the world exclusive in the July 2019 issue of #BritishVogue. Photographed by @SeanThomas_Photo.</a></p> <p style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;\">A post shared by <a href=\"https://www.instagram.com/britishvogue/\" style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px;\" target=\"_blank\"> British Vogue</a> (@britishvogue) on <time style=\" font-family:Arial,sans-serif; font-size:14px; line-height:17px;\" datetime=\"2019-04-27T09:10:49+00:00\">Apr 27, 2019 at 2:10am PDT</time></p></div></blockquote> <script async src=\"//www.instagram.com/embed.js\"></script>',\n\tisMandatory: false,\n};\n\nconst instagramInstramEmbed: InstagramBlockElement = {\n\tisThirdPartyTracking: true,\n\t_type: 'model.dotcomrendering.pageElements.InstagramBlockElement',\n\thtml: '<blockquote class=\"instagram-media\" data-instgrm-version=\"7\" style=\" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:658px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);\"><div style=\"padding:8px;\"> <div style=\" background:#F8F8F8; line-height:0; margin-top:40px; padding:50.0% 0; text-align:center; width:100%;\"> <div style=\" background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURczMzPf399fX1+bm5mzY9AMAAADiSURBVDjLvZXbEsMgCES5/P8/t9FuRVCRmU73JWlzosgSIIZURCjo/ad+EQJJB4Hv8BFt+IDpQoCx1wjOSBFhh2XssxEIYn3ulI/6MNReE07UIWJEv8UEOWDS88LY97kqyTliJKKtuYBbruAyVh5wOHiXmpi5we58Ek028czwyuQdLKPG1Bkb4NnM+VeAnfHqn1k4+GPT6uGQcvu2h2OVuIf/gWUFyy8OWEpdyZSa3aVCqpVoVvzZZ2VTnn2wU8qzVjDDetO90GSy9mVLqtgYSy231MxrY6I2gGqjrTY0L8fxCxfCBbhWrsYYAAAAAElFTkSuQmCC); display:block; height:44px; margin:0 auto -44px; position:relative; top:-22px; width:44px;\"></div></div><p style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;\"><a href=\"https://www.instagram.com/p/BYJLF9SnA7I/\" style=\" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;\" target=\"_blank\">A post shared by Taylor Swift (@taylorswift)</a> on <time style=\" font-family:Arial,sans-serif; font-size:14px; line-height:17px;\" datetime=\"2017-08-23T16:39:48+00:00\">Aug 23, 2017 at 9:39am PDT</time></p></div></blockquote>\\n<script async defer src=\"//platform.instagram.com/en_US/embeds.js\"></script>',\n\telementId: 'mockId',\n\tsource: 'Instagram',\n\tsourceDomain: 'platform.instagram.com',\n\turl: 'https://www.instagram.com/p/BYJLF9SnA7I/',\n\thasCaption: true,\n};\n\nconst formStackEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Formstack',\n\tsourceDomain: 'formstack.com',\n\theight: undefined,\n\twidth: undefined,\n\tisThirdPartyTracking: true,\n\tsafe: false,\n\talt: 'Book clinic form',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<script type=\"text/javascript\" src=\"https://guardiannewsandmedia.formstack.com/forms/js.php/observer_book_clinic\"></script>',\n\tisMandatory: true,\n};\n\nconst facebookEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Facebook',\n\tsourceDomain: 'facebook.com',\n\theight: 221,\n\twidth: 500,\n\tisThirdPartyTracking: true,\n\tsafe: true,\n\talt: 'Facebook post',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<iframe src=\"https://www.facebook.com/plugins/post.php?href=https%3A%2F%2Fwww.facebook.com%2Fmaureen.shrimpton%2Fposts%2F2165642433537707&width=500\" width=\"500\" height=\"211\" style=\"border:none;overflow:hidden\" scrolling=\"no\" frameborder=\"0\" allowTransparency=\"true\" allow=\"encrypted-media\"></iframe>',\n\tisMandatory: false,\n};\n\nconst vimeoEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Vimeo',\n\tsourceDomain: 'vimeo.com',\n\tisThirdPartyTracking: false,\n\tsafe: true,\n\talt: 'the documentary Injustice',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<iframe src=\"https://player.vimeo.com/video/34633260?dnt=true\" width=\"640\" height=\"360\" frameborder=\"0\" allow=\"autoplay; fullscreen\" allowfullscreen></iframe>',\n\tisMandatory: false,\n};\n\nconst vimeoVideoEmbed: VideoVimeoBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Vimeo',\n\tsourceDomain: 'vimeo.com',\n\tembedUrl: 'https://player.vimeo.com/video/21693673?app_id=122963&dnt=true',\n\trole: 'inline',\n\tisThirdPartyTracking: false,\n\twidth: 460,\n\t_type: 'model.dotcomrendering.pageElements.VideoVimeoBlockElement',\n\tcaption: 'How many beers is that?',\n\toriginalUrl: 'https://vimeo.com/21693673',\n\turl: 'https://vimeo.com/21693673',\n\theight: 259,\n\tcredit: undefined,\n\ttitle: undefined,\n};\n\nconst scribdDocumentEmbed: DocumentBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Scribd',\n\tsourceDomain: 'scribd.com',\n\tembedUrl: 'https://www.scribd.com/embeds/469886680/content',\n\tisThirdPartyTracking: true,\n\twidth: 613,\n\t_type: 'model.dotcomrendering.pageElements.DocumentBlockElement',\n\ttitle: 'Russia Report',\n\theight: 460,\n};\n\nconst scribdEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Scribd',\n\tsourceDomain: 'scribd.com',\n\tisThirdPartyTracking: true,\n\tsafe: false,\n\talt: 'Letter',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<p  style=\" margin: 12px auto 6px auto; font-family: Helvetica,Arial,Sans-serif; font-style: normal; font-variant: normal; font-weight: normal; font-size: 14px; line-height: normal; font-size-adjust: none; font-stretch: normal; -x-system-font: none; display: block;\"> <a title=\"View Climate Change Letter UN on Scribd\" href=\"https://www.scribd.com/document/482633239/Climate-Change-Letter-UN#from_embed\"  style=\"text-decoration: underline;\" >Climate Change Letter UN</a> by <a title=\"View The Guardian\\'s profile on Scribd\" href=\"https://www.scribd.com/user/17081734/The-Guardian#from_embed\"  style=\"text-decoration: underline;\" >The Guardian</a> on Scribd</p><iframe class=\"scribd_iframe_embed\" title=\"Climate Change Letter UN\" src=\"https://www.scribd.com/embeds/482633239/content?start_page=1&view_mode=scroll&access_key=key-u8wwc0Osw6NCcbfolTy0\" data-auto-height=\"false\" data-aspect-ratio=\"0.7080062794348508\" scrolling=\"no\" id=\"doc_24425\" width=\"100%\" height=\"600\" frameborder=\"0\"></iframe>',\n\tisMandatory: false,\n};\n\nconst tiktokEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'TikTok',\n\tsourceDomain: 'tiktok.com',\n\tisThirdPartyTracking: true,\n\tsafe: false,\n\talt: 'Everything is cake on TikTok',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<blockquote class=\"tiktok-embed\" cite=\"https://www.tiktok.com/@danbanbam/video/6849106362224413958\" data-video-id=\"6849106362224413958\" style=\"max-width: 605px;min-width: 325px;\" > <section> <a target=\"_blank\" title=\"@danbanbam\" href=\"https://www.tiktok.com/@danbanbam\">@danbanbam</a> <p>Cake: The Movie. Coming this Fall. <a title=\"cake\" target=\"_blank\" href=\"https://www.tiktok.com/tag/cake\">##cake</a> <a title=\"serve\" target=\"_blank\" href=\"https://www.tiktok.com/tag/serve\">##serve</a> <a title=\"vibezone\" target=\"_blank\" href=\"https://www.tiktok.com/tag/vibezone\">##VibeZone</a> <a title=\"movie\" target=\"_blank\" href=\"https://www.tiktok.com/tag/movie\">##movie</a></p> <a target=\"_blank\" title=\"♬ original sound - Daniel Spencer\" href=\"https://www.tiktok.com/music/original-sound-6849097596150303493\">♬ original sound - Daniel Spencer</a> </section> </blockquote> <script async src=\"https://www.tiktok.com/embed.js\"></script>',\n\tisMandatory: false,\n};\n\nconst soundcloudAudioEmbed: SoundcloudBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Soundcloud',\n\tsourceDomain: 'soundcloud.com',\n\tisTrack: true,\n\tisThirdPartyTracking: true,\n\t_type: 'model.dotcomrendering.pageElements.SoundcloudBlockElement',\n\thtml: '\\n            <iframe\\n                height=\"460\"\\n                width=\"460\"\\n                src=\"https://w.soundcloud.com/player/?visual=true&url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F875169979&show_artwork=true\"\\n                frameborder=\"0\"\\n                allowfullscreen\\n            ></iframe>\\n        ',\n\tid: '875169979',\n\tisMandatory: true,\n};\n\nconst soundcloudEmbedEmbed: SoundcloudBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Soundcloud',\n\tsourceDomain: 'soundcloud.com',\n\tisTrack: true,\n\tisThirdPartyTracking: true,\n\t_type: 'model.dotcomrendering.pageElements.SoundcloudBlockElement',\n\thtml: '<iframe width=\"100%\" height=\"300\" scrolling=\"no\" frameborder=\"no\" allow=\"autoplay\" src=\"https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/881588431&color=%23ff5500&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true\"></iframe><div style=\"font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;\"><a href=\"https://soundcloud.com/planetmurecords\" title=\"Planet Mu Records\" target=\"_blank\" style=\"color: #cccccc; text-decoration: none;\">Planet Mu Records</a> · <a href=\"https://soundcloud.com/planetmurecords/john-frusciante-amethblowl-timesig\" title=\"John Frusciante - Amethblowl (TIMESIG011)\" target=\"_blank\" style=\"color: #cccccc; text-decoration: none;\">John Frusciante - Amethblowl (TIMESIG011)</a></div>',\n\tid: '881588431',\n\tisMandatory: false,\n};\n\nconst youtubeEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Youtube',\n\tsourceDomain: 'youtube.com',\n\theight: 315,\n\twidth: undefined,\n\tisThirdPartyTracking: false,\n\tsafe: true,\n\talt: 'Watch the video for Sleaford Mods’ Second',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<iframe width=\"100%\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/IT09DGuXwYQ\" frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>',\n\tisMandatory: false,\n};\n\nconst spotifyAudioEmbed: SpotifyBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Spotify',\n\tsourceDomain: 'spotify.com',\n\tembedUrl:\n\t\t'https://embed.spotify.com/?uri=spotify:user:matthew.holmes.guardian:playlist:6UQ1JOduKGyS46SThaxy0B',\n\tisThirdPartyTracking: true,\n\twidth: 300,\n\t_type: 'model.dotcomrendering.pageElements.SpotifyBlockElement',\n\tcaption: 'Listen to the list on Spotify.',\n\ttitle: \"Fuel RR playlist: 'love is...', a playlist by matthew.holmes.guardian on Spotify\",\n\theight: 380,\n};\n\nconst spotifyEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Spotify',\n\tsourceDomain: 'spotify.com',\n\theight: 380,\n\twidth: 300,\n\tisThirdPartyTracking: true,\n\tsafe: true,\n\talt: 'Joy Division Ranked Spotify Playlist',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<iframe src=\"https://embed.spotify.com/?uri=spotify%3Auser%3Aguardianmusic%3Aplaylist%3A1XUwszj7DC0uRY5L7Anj6I\" width=\"300\" height=\"380\" frameborder=\"0\" allowtransparency=\"true\"></iframe>',\n\tisMandatory: true,\n};\n\nconst bandcampEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Bandcamp',\n\tsourceDomain: 'bandcamp.com',\n\theight: undefined,\n\twidth: undefined,\n\tisThirdPartyTracking: true,\n\tsafe: true,\n\talt: 'Isaac by Jonny and the Baptists',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<iframe style=\"border: 0; width: 100%; height: 120px;\" src=\"https://bandcamp.com/EmbeddedPlayer/album=1077257657/size=large/bgcol=ffffff/linkcol=0687f5/tracklist=false/artwork=small/track=2222104579/transparent=true/\" seamless><a href=\"https://jonnyandthebaptists.bandcamp.com/album/love-you-hate-bastards\">Love You &amp; Hate Bastards by Jonny &amp; The Baptists</a></iframe>',\n\tisMandatory: true,\n};\n\nconst twitterTweetEmbed: TweetBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Twitter',\n\tsourceDomain: 'twitter.com',\n\trole: Inline,\n\tisThirdPartyTracking: false,\n\t_type: 'model.dotcomrendering.pageElements.TweetBlockElement',\n\thtml: '<blockquote class=\"nojs-tweet\"><p lang=\"en\" dir=\"ltr\">A staff member at MSNBC has died of coronavirus. It’s hitting them pretty hard as you can see from <a href=\"https://twitter.com/maddow?ref_src=twsrc%5Etfw\">@maddow</a>’s sign-off today <a href=\"https://t.co/nbqRRaammr\">pic.twitter.com/nbqRRaammr</a></p>&mdash; Matt Bevan 🎙 (@MatthewBevan) <a href=\"https://twitter.com/MatthewBevan/status/1241244758653071360?ref_src=twsrc%5Etfw\">March 21, 2020</a></blockquote>\\n',\n\thasMedia: false,\n\tid: '1241244758653071360',\n\turl: 'https://twitter.com/MatthewBevan/status/1241244758653071360',\n};\n\nconst twitterEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'Twitter',\n\tsourceDomain: 'twitter.com',\n\theight: undefined,\n\twidth: undefined,\n\tisThirdPartyTracking: false,\n\tsafe: false,\n\talt: 'Video: social distancing',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<blockquote class=\"nojs-tweet\"><p lang=\"en\" dir=\"ltr\">Confused about the difference between self-isolation and social distancing - and who should do it? 🤷🏻‍♀️ Watch this as <a href=\"https://twitter.com/robosborneitv?ref_src=twsrc%5Etfw\">@robosborneitv</a> explains, with the help of his mum, and <a href=\"https://twitter.com/ckkhaira?ref_src=twsrc%5Etfw\">@ckkhaira</a> <a href=\"https://t.co/SNzpDRFxsz\">https://t.co/SNzpDRFxsz</a> <a href=\"https://twitter.com/hashtag/coronavirus?src=hash&amp;ref_src=twsrc%5Etfw\">#coronavirus</a> <a href=\"https://twitter.com/hashtag/covid19?src=hash&amp;ref_src=twsrc%5Etfw\">#covid19</a> <a href=\"https://t.co/wC6ezmAqRC\">pic.twitter.com/wC6ezmAqRC</a></p>&mdash; ITV Wales News (@ITVWales) <a href=\"https://twitter.com/ITVWales/status/1241068501076410376?ref_src=twsrc%5Etfw\">March 20, 2020</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>',\n\tisMandatory: false,\n};\n\nconst ourworldindataEmbedEmbed = {\n\tsource: undefined,\n\tsourceDomain: 'ourworldindata.com',\n\theight: undefined,\n\twidth: undefined,\n\tisThirdPartyTracking: true,\n\tsafe: true,\n\talt: 'Our World in Data',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<iframe src=\"https://ourworldindata.org/grapher/daily-covid-deaths-3-day-average\" style=\"width: 100%; height: 600px; border: 0px none;\"></iframe>',\n\tisMandatory: false,\n};\n\nconst bbcEmbedEmbed: EmbedBlockElement = {\n\telementId: 'mockId',\n\tsource: 'BBC',\n\tsourceDomain: 'bbc.co.uk',\n\theight: 500,\n\twidth: undefined,\n\tisThirdPartyTracking: true,\n\tsafe: true,\n\talt: 'Watch a trailer for Enslaved',\n\t_type: 'model.dotcomrendering.pageElements.EmbedBlockElement',\n\thtml: '<iframe width=\"fullwidth\" height=\"500\" frameborder=\"0\" src=\"https://www.bbc.co.uk/programmes/p08tfnfb/player\"></iframe>',\n\tisMandatory: false,\n};\n\nconst mapEmbedEmbed: MapBlockElement = {\n\t_type: 'model.dotcomrendering.pageElements.MapBlockElement',\n\telementId: 'mockId',\n\tembedUrl:\n\t\t'https://www.google.com/maps/d/embed?mid=1e_aGDEcGY9Lu3UMKQKhR-itRBDg&hl=en_US',\n\toriginalUrl:\n\t\t'https://www.google.com/maps/d/embed?mid=1e_aGDEcGY9Lu3UMKQKhR-itRBDg&hl=en_US',\n\ttitle: \"Women's March on London\",\n\theight: 345,\n\twidth: 460,\n\tcaption: 'Google Maps',\n\tsource: 'Google',\n\tsourceDomain: 'google.com',\n\tisThirdPartyTracking: false,\n};\n\nconst vineEmbedEmbed: VineBlockElement = {\n\t_type: 'model.dotcomrendering.pageElements.VineBlockElement',\n\telementId: 'mockId',\n\turl: 'https://vine.co/v/MIH3hdTKujE/embed/simple',\n\toriginalUrl: 'https://vine.co/v/MIH3hdTKujE',\n\ttitle: 'Joe Hart Wants The Ball',\n\theight: 600,\n\twidth: 600,\n\tsource: 'Vine',\n\tsourceDomain: 'vine.co',\n\tisThirdPartyTracking: false,\n};\n\nexport const EmbedBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a facebook post embed, the source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/uk-news/2019/aug/16/police-officers-death-sparks-sweeping-inquiry\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<EmbedBlockComponent\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\thtml={facebookEmbed.html}\n\t\t\t\t\t\tcaption={facebookEmbed.caption}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={facebookEmbed.source}\n\t\t\t\t\t\tsourceDomain={facebookEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a vimeo embed from &apos;embed&apos; element\n\t\t\t\t\ttype, the source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/film/2020/oct/12/ultraviolence-ken-fero-documentary-injustice-deaths-police\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<EmbedBlockComponent\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\thtml={vimeoEmbedEmbed.html}\n\t\t\t\t\t\tcaption={vimeoEmbedEmbed.caption}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={vimeoEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={vimeoEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a youtube embed from an &apos;embed&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/music/2020/may/17/sleaford-mods-all-that-glue-review-scattergun-fury\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<EmbedBlockComponent\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\thtml={youtubeEmbedEmbed.html}\n\t\t\t\t\t\tcaption={youtubeEmbedEmbed.caption}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={youtubeEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={youtubeEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a spotify embed from an &apos;embed&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/film/2020/oct/29/david-bowie-biopic-trailer-stardust\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<EmbedBlockComponent\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\thtml={spotifyEmbedEmbed.html}\n\t\t\t\t\t\tcaption={spotifyEmbedEmbed.caption}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={spotifyEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={spotifyEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a bandcamp embed from an &apos;embed&apos;\n\t\t\t\t\telement type, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/culture/2020/oct/29/alice-fraser-the-10-funniest-things-i-have-ever-seen-on-the-internet\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<EmbedBlockComponent\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\thtml={bandcampEmbedEmbed.html}\n\t\t\t\t\t\tcaption={bandcampEmbedEmbed.caption}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={bandcampEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={bandcampEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a Our World In Data embed from an\n\t\t\t\t\t&apos;embed&apos; element type, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/world/2020/apr/12/coronavirus-statistics-what-can-we-trust-and-what-should-we-ignore\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<EmbedBlockComponent\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\thtml={ourworldindataEmbedEmbed.html}\n\t\t\t\t\t\tcaption={ourworldindataEmbedEmbed.alt}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={ourworldindataEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={ourworldindataEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a BBC embed from an &apos;embed&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/tv-and-radio/2020/oct/20/samuel-l-jackson-interview-enslavement-africa-roots-race-latanya-richardson\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<EmbedBlockComponent\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\thtml={bbcEmbedEmbed.html}\n\t\t\t\t\t\tcaption={bbcEmbedEmbed.caption}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={bbcEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={bbcEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>,\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nEmbedBlockComponentStory.story = {\n\tname: 'Click to view wrapping EmbedBlockComponent',\n};\n\nexport const UnsafeEmbedBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of an instagram embed, the source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/culture/2019/apr/27/idris-elba-marries-sabrina-dhowre-in-morocco\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<UnsafeEmbedBlockComponent\n\t\t\t\t\t\tkey=\"1\"\n\t\t\t\t\t\thtml={instagramEmbedEmbed.html}\n\t\t\t\t\t\talt={instagramEmbedEmbed.alt || ''}\n\t\t\t\t\t\tindex={1}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={instagramEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={instagramEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a formstack embed, the source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/books/2019/nov/23/utopian-novels-for-dystopian-times\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<UnsafeEmbedBlockComponent\n\t\t\t\t\t\tkey=\"2\"\n\t\t\t\t\t\thtml={formStackEmbed.html}\n\t\t\t\t\t\talt={formStackEmbed.alt || ''}\n\t\t\t\t\t\tindex={2}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={formStackEmbed.source}\n\t\t\t\t\t\tsourceDomain={formStackEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a scribd embed from a &apos;embed&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/politics/2020/jul/21/what-does-the-russia-report-mean-for-british-people-and-politics\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<UnsafeEmbedBlockComponent\n\t\t\t\t\t\tkey=\"3\"\n\t\t\t\t\t\thtml={scribdEmbedEmbed.html}\n\t\t\t\t\t\talt={scribdEmbedEmbed.alt || ''}\n\t\t\t\t\t\tindex={3}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={scribdEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={scribdEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a tiktok embed from a &apos;embed&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/tv-and-radio/2020/oct/28/junior-masterchef-weekly-recap-children-routinely-combust-with-joy-and-everything-is-cake\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<UnsafeEmbedBlockComponent\n\t\t\t\t\t\tkey=\"4\"\n\t\t\t\t\t\thtml={tiktokEmbedEmbed.html}\n\t\t\t\t\t\talt={tiktokEmbedEmbed.alt || ''}\n\t\t\t\t\t\tindex={4}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={scribdEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={scribdEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a twitter embed from an &apos;embed&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/world/2020/mar/21/biggest-story-how-journalists-coping-covid-19\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<UnsafeEmbedBlockComponent\n\t\t\t\t\t\tkey=\"5\"\n\t\t\t\t\t\thtml={twitterEmbedEmbed.html}\n\t\t\t\t\t\talt={twitterEmbedEmbed.alt || ''}\n\t\t\t\t\t\tindex={5}\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={scribdEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={scribdEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>,\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nUnsafeEmbedBlockComponentStory.story = {\n\tname: 'Click to view wrapping UnsafeEmbedBlockComponent',\n};\n\nexport const VimeoBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css=\"para\">\n\t\t\t\t\tExample of a vimeo embed from &apos;video&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/culture/2020/oct/29/alice-fraser-the-10-funniest-things-i-have-ever-seen-on-the-internet\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={vimeoVideoEmbed.source}\n\t\t\t\t\t\tsourceDomain={vimeoVideoEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<VimeoBlockComponent\n\t\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tembedUrl={vimeoVideoEmbed.embedUrl}\n\t\t\t\t\t\t\theight={vimeoVideoEmbed.height}\n\t\t\t\t\t\t\twidth={vimeoVideoEmbed.width}\n\t\t\t\t\t\t\tcaption={vimeoVideoEmbed.caption}\n\t\t\t\t\t\t\tcredit={vimeoVideoEmbed.credit}\n\t\t\t\t\t\t\ttitle={vimeoVideoEmbed.title}\n\t\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>,\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nVimeoBlockComponentStory.story = {\n\tname: 'Click to view wrapping VimeoBlockComponent',\n};\n\nexport const DocumentBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a scribd embed from a &apos;document&apos;\n\t\t\t\t\telement type, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/politics/2020/jul/21/what-does-the-russia-report-mean-for-british-people-and-politics\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={scribdDocumentEmbed.source}\n\t\t\t\t\t\tsourceDomain={scribdDocumentEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<DocumentBlockComponent\n\t\t\t\t\t\t\tembedUrl={scribdDocumentEmbed.embedUrl}\n\t\t\t\t\t\t\theight={scribdDocumentEmbed.height}\n\t\t\t\t\t\t\twidth={scribdDocumentEmbed.width}\n\t\t\t\t\t\t\ttitle={scribdDocumentEmbed.title}\n\t\t\t\t\t\t\tisTracking={false}\n\t\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nDocumentBlockComponentStory.story = {\n\tname: 'Click to view wrapping DocumentBlockComponentStory',\n};\n\nexport const SoundCloudBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a soundcloud embed from an &apos;audio&apos;\n\t\t\t\t\telement type, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/culture/2020/aug/31/house-music-flora-willson-watching-and-listening-highlights\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={soundcloudAudioEmbed.source}\n\t\t\t\t\t\tsourceDomain={soundcloudAudioEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<SoundcloudBlockComponent\n\t\t\t\t\t\t\telement={soundcloudAudioEmbed}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a soundcloud embed from an &apos;embed&apos;\n\t\t\t\t\telement type, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/music/2020/sep/11/deep-sea-diver-best-track-of-week\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={soundcloudEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={soundcloudEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<SoundcloudBlockComponent\n\t\t\t\t\t\t\telement={soundcloudEmbedEmbed}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>,\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nSoundCloudBlockComponentStory.story = {\n\tname: 'Click to view wrapping SoundCloudBlockComponent',\n};\n\nexport const SpotifyBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a spotify embed from an &apos;audio&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/film/2020/oct/29/david-bowie-biopic-trailer-stardust\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={spotifyAudioEmbed.source}\n\t\t\t\t\t\tsourceDomain={spotifyAudioEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<SpotifyBlockComponent\n\t\t\t\t\t\t\tembedUrl={spotifyAudioEmbed.embedUrl}\n\t\t\t\t\t\t\theight={spotifyAudioEmbed.height}\n\t\t\t\t\t\t\twidth={spotifyAudioEmbed.width}\n\t\t\t\t\t\t\ttitle={spotifyAudioEmbed.title}\n\t\t\t\t\t\t\tcaption={spotifyAudioEmbed.caption}\n\t\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tcredit=\"Spotify\"\n\t\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t\t\tisTracking={false}\n\t\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>,\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\n\nSpotifyBlockComponentStory.story = {\n\tname: 'Click to view wrapping SpotifyBlockComponent',\n};\n\nexport const TweetBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a twitter embed from an &apos;tweet&apos; element\n\t\t\t\t\ttype, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/world/2020/mar/21/biggest-story-how-journalists-coping-covid-19\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={twitterTweetEmbed.source}\n\t\t\t\t\t\tsourceDomain={twitterTweetEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<TweetBlockComponent element={twitterTweetEmbed} />\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>,\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nTweetBlockComponentStory.story = {\n\tname: 'Click to view wrapping TweetBlockComponent',\n};\nexport const InstagramBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a instagram embed from an &apos;instagram&apos;\n\t\t\t\t\telement type, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/music/2017/aug/23/taylor-swift-reputation-new-album\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<InstagramBlockComponent\n\t\t\t\t\t\tkey={1}\n\t\t\t\t\t\telement={instagramInstramEmbed}\n\t\t\t\t\t\tindex={1}\n\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t/>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>,\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nInstagramBlockComponentStory.story = {\n\tname: 'Click to view wrapping InstagramBlockComponent',\n};\nexport const MapBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a map embed, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/world/2017/jan/19/womens-marches-across-the-uk-what-you-need-to-know\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={mapEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={mapEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<MapEmbedBlockComponent\n\t\t\t\t\t\t\tembedUrl={mapEmbedEmbed.embedUrl}\n\t\t\t\t\t\t\theight={mapEmbedEmbed.height}\n\t\t\t\t\t\t\twidth={mapEmbedEmbed.width}\n\t\t\t\t\t\t\ttitle={mapEmbedEmbed.title}\n\t\t\t\t\t\t\tcaption={mapEmbedEmbed.caption}\n\t\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tcredit=\"Google Maps\"\n\t\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t\t\tisTracking={false}\n\t\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nMapBlockComponentStory.story = {\n\tname: 'Click to view wrapping MapEmbedBlockComponent',\n};\nexport const VineBlockComponentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\tsideBorders={true}\n\t\t\ttitle=\"Embedded Content\"\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tclear: left;\n\t\t\t\t\tstrong {\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<p css={paragraphStyle}>\n\t\t\t\t\tExample of a vine embed, the embed source article is{' '}\n\t\t\t\t\t<a href=\"https://www.theguardian.com/football/2020/feb/13/ballboys-and-ballgirls-football-good-bad-bizarre-memorable-moments\">\n\t\t\t\t\t\there\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t\t<Figure\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\trole=\"inline\"\n\t\t\t\t>\n\t\t\t\t\t<ClickToView\n\t\t\t\t\t\tisTracking={true}\n\t\t\t\t\t\tsource={vineEmbedEmbed.source}\n\t\t\t\t\t\tsourceDomain={vineEmbedEmbed.sourceDomain}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<VineBlockComponent\n\t\t\t\t\t\t\telement={vineEmbedEmbed}\n\t\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t\t\tisTracking={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ClickToView>\n\t\t\t\t</Figure>\n\t\t\t\t<p css={paragraphStyle}>The end.</p>\n\t\t\t</div>\n\t\t</ContainerLayout>\n\t);\n};\nVineBlockComponentStory.story = {\n\tname: 'Click to view wrapping VineBlockComponent',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ClickToView.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ClickToView.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":21,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":21,"endColumn":41},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":22,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":33,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":36,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":36,"endColumn":45},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":37,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":54,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":57,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":57,"endColumn":43},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":58,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":70,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":73,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":73,"endColumn":43},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":74,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":85,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":106,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":114,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbackground,\n\tborder,\n\tspace,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { Button, SvgCheckmark } from '@guardian/source-react-components';\nimport { useState } from 'react';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\trole?: RoleType;\n\tonAccept?: () => void;\n\tisTracking: boolean;\n\tisMainMedia?: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nconst roleTextSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn textSans.medium({ lineHeight: 'regular' });\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\tcase 'thumbnail': {\n\t\t\treturn textSans.small({ lineHeight: 'regular' });\n\t\t}\n\t}\n};\n\nconst roleHeadlineSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn textSans.large({\n\t\t\t\tfontWeight: 'bold',\n\t\t\t\tlineHeight: 'regular',\n\t\t\t});\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\tcase 'thumbnail': {\n\t\t\treturn textSans.medium({\n\t\t\t\tfontWeight: 'bold',\n\t\t\t\tlineHeight: 'regular',\n\t\t\t});\n\t\t}\n\t}\n};\n\nconst roleButtonSize = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase': {\n\t\t\treturn 'default';\n\t\t}\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\t\treturn 'small';\n\t\tcase 'thumbnail': {\n\t\t\treturn 'xsmall';\n\t\t}\n\t}\n};\n\nconst roleButtonText = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'immersive':\n\t\tcase 'inline':\n\t\tcase 'showcase':\n\t\tcase 'halfWidth':\n\t\tcase 'supporting': {\n\t\t\treturn 'Allow and continue';\n\t\t}\n\t\tcase 'thumbnail': {\n\t\t\treturn 'Allow';\n\t\t}\n\t}\n};\n\nconst shouldDisplayOverlay = ({\n\tisTracking,\n\tisOverlayClicked,\n\tisMainMedia,\n}: {\n\tisTracking: boolean;\n\tisOverlayClicked: boolean;\n\tisMainMedia?: boolean;\n}) => {\n\tif (isMainMedia || !isTracking) {\n\t\treturn false;\n\t}\n\tif (isOverlayClicked) {\n\t\treturn false;\n\t}\n\treturn true;\n};\n\nexport const ClickToView = ({\n\tchildren,\n\trole = 'inline',\n\tonAccept,\n\tisTracking,\n\tisMainMedia,\n\tsource,\n\tsourceDomain = 'unknown',\n}: Props) => {\n\tconst [isOverlayClicked, setIsOverlayClicked] = useState<boolean>(false);\n\n\tconst handleClick = () => {\n\t\tsetIsOverlayClicked(true);\n\t\tif (onAccept) {\n\t\t\tsetTimeout(() => onAccept());\n\t\t}\n\t};\n\n\tconst textSize = roleTextSize(role);\n\n\tif (\n\t\tshouldDisplayOverlay({\n\t\t\tisTracking,\n\t\t\tisOverlayClicked,\n\t\t\tisMainMedia,\n\t\t})\n\t) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tbackground: ${background.secondary};\n\t\t\t\t\tborder: 1px solid ${border.secondary};\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tpadding: ${space[1]}px ${space[6]}px ${space[3]}px;\n\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t`}\n\t\t\t\tdata-component={`click-to-view:${sourceDomain}`}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${roleHeadlineSize(role)}\n\t\t\t\t\t\tmargin-bottom: ${space[1]}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{source\n\t\t\t\t\t\t? `Allow ${source} content?`\n\t\t\t\t\t\t: 'Allow content provided by a third party?'}\n\t\t\t\t</div>\n\t\t\t\t<p\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${textSize}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{source ? (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\tThis article includes content provided by {source}.\n\t\t\t\t\t\t\tWe ask for your permission before anything is\n\t\t\t\t\t\t\tloaded, as they may be using cookies and other\n\t\t\t\t\t\t\ttechnologies. To view this content,{' '}\n\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\tclick &apos;Allow and continue&apos;\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\tThis article includes content hosted on{' '}\n\t\t\t\t\t\t\t{sourceDomain}. We ask for your permission before\n\t\t\t\t\t\t\tanything is loaded, as the provider may be using\n\t\t\t\t\t\t\tcookies and other technologies. To view this\n\t\t\t\t\t\t\tcontent,{' '}\n\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\tclick &apos;Allow and continue&apos;\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t.\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</p>\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-top: ${space[5]}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\tsize={roleButtonSize(role)}\n\t\t\t\t\t\ticon={<SvgCheckmark />}\n\t\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\t\tonClick={() => handleClick()}\n\t\t\t\t\t\tdata-cy=\"click-to-view-button\"\n\t\t\t\t\t\tdata-link-name=\"allow-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{roleButtonText(role)}\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\treturn <>{children}</>;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CodeBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { CodeBlockComponent } from './CodeBlockComponent';\nimport { ContainerLayout } from './ContainerLayout';\n\nexport default {\n\tcomponent: CodeBlockComponent,\n\ttitle: 'Components/CodeBlockComponent',\n};\n\nexport const CodeStory = () => {\n\tconst code = `\nwget https://github.com/buger/goreplay/releases/download/v0.16.0.2/gor_0.16.0_x64.tar.gz\n\ntar -xzf gor_0.16.0_x64.tar.gz gor\n\nsudo gor --input-raw :80 --output-http http://apiv2.code.co.uk\n    `;\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<CodeBlockComponent code={code} language=\"text\" />\n\t\t</ContainerLayout>\n\t);\n};\nCodeStory.story = {\n\tname: 'default',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CodeBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":52,"endColumn":13},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":50,"column":0,"nodeType":null,"endLine":50,"endColumn":63},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":56,"column":10,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":56,"endColumn":52}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'language' is assigned a value but never used.","line":51,"column":2,"nodeType":"Identifier","messageId":"unusedVar","endLine":51,"endColumn":10,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// We don't want to build our own theme from the GU palette so disable this rule\n// stylelint-disable color-no-hex\n\nimport { css } from '@emotion/react';\nimport { space } from '@guardian/source-foundations';\n\ntype Props = {\n\tcode: string;\n\tlanguage?: string;\n};\n\nconst codeStyles = css`\n\t/**\n    * Adapted from prism.js default theme for JavaScript, CSS and HTML\n    * Based on dabblet (http://dabblet.com)\n    * @author Lea Verou\n    */\n\tcolor: black;\n\ttext-shadow: 0 1px white;\n\t/* The GU fonts don't work here */\n\t/* stylelint-disable-next-line property-disallowed-list */\n\tfont-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;\n\ttext-align: left;\n\twhite-space: pre;\n\tword-spacing: normal;\n\tword-break: normal;\n\tword-wrap: normal;\n\tline-height: 1.5;\n\n\ttab-size: 4;\n\thyphens: none;\n\n\tpadding: ${space[3]}px;\n\toverflow: auto;\n\n\tbackground: #f5f2f0;\n\n\t@media print {\n\t\ttext-shadow: none;\n\t}\n`;\n\nexport const CodeBlockComponent = ({\n\tcode,\n\t// Date: May 2021\n\t//     The CodeBlockComponent is taking a `language` attribute which comes from CAPI\n\t//     for the purpose of syntaxt highlighting, but we decided to not perform that highlighting\n\t//     for the moment. Feel free to implement it in the future, for instance using\n\t//     https://prismjs.com\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tlanguage = 'text',\n}: Props) => {\n\treturn (\n\t\t<pre css={codeStyles}>\n\t\t\t<code>\n\t\t\t\t<div dangerouslySetInnerHTML={{ __html: code }} />\n\t\t\t</code>\n\t\t</pre>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CommentBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":29,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":29,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { CommentBlockComponent } from './CommentBlockComponent';\n\nexport default {\n\tcomponent: CommentBlockComponent,\n\ttitle: 'Components/CommentBlockComponent',\n};\n\nexport const defaultStory = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tpadding: 20px;\n\t\t\t`}\n\t\t>\n\t\t\t<CommentBlockComponent\n\t\t\t\tprofileURL=\"http://www.theguardian.com/discussion/user/id/13107777\"\n\t\t\t\tprofileName=\"Stieve\"\n\t\t\t\tdateTime=\"30 January 2017 11:13pm\"\n\t\t\t\tavatarURL=\"https://avatar.guim.co.uk/user/13107777\"\n\t\t\t\tbody=\"<p>I agree with many of the comments below. Capaldi is right for the role of The Doctor but it seems almost that the writing and/or settings are too small for him. Danny Pink was the most pathetic character in the show's entire history! I've not seen all of the present series but I do think they've wasted their opportunity with Mr Capaldi who can really pull off both the silliness and the profoundity.</p>\"\n\t\t\t\tpermalink=\"http://www.theguardian.com/music/2016/apr/21/readers-recommend-songs-about-climate-change#comment-72957994\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\ndefaultStory.story = { name: 'default' };\n\nexport const embeddedBlockquoteStory = () => {\n\tconst bodyContent = `\n\t\t<blockquote>\n\t\t\t<p>\n\t\t\t\tChildren and youth are striking to demand action. But many of not most are\n\t\t\t\tthemselves involved in one of the most damaging practices towards earth's\n\t\t\t\tclimate, I mean consuming massive amounts of meat and diary in their diets.\n\t\t\t</p>\n\t\t\t<p>What is their thought on this regard ?</p>\n\t\t</blockquote>\n\t\t<p>\n\t\t\tAre they? I see young people leading on this. There's been a massive surge\n\t\t\ttowards veganism by young people, which has resulted in a sevenfold increase\n\t\t\tin the UK within 5 years. Quite remarkable. And it should be recognised.\n\t\t</p>\n\t`;\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tpadding: 20px;\n\t\t\t\twidth: 700px;\n\t\t\t`}\n\t\t>\n\t\t\t<CommentBlockComponent\n\t\t\t\tprofileURL=\"https://profile.theguardian.com/user/id/1395989\"\n\t\t\t\tprofileName=\"George Monbiot\"\n\t\t\t\tdateTime=\"15 March 2019 11:00am\"\n\t\t\t\tavatarURL=\"https://avatar.guim.co.uk/user/1395989\"\n\t\t\t\tbody={bodyContent}\n\t\t\t\tpermalink=\"https://www.theguardian.com/commentisfree/live/2019/mar/15/webchat-share-questions-for-george-monbiot-and-climate-strike-activists?dcr&page=with:block-5c8b9709e4b0cf92e5a57a5f#block-5c8b9709e4b0cf92e5a57a5f\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\nembeddedBlockquoteStory.story = {\n\tname: 'Comment block which contains a blockquote',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CommentBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":87,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":94,"endColumn":13},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":99,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":99,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tneutral,\n\tspace,\n\ttext as textColor,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { unescapeData } from '../../lib/escapeData';\n\ntype Props = {\n\tbody: string;\n\tavatarURL: string;\n\tprofileURL: string;\n\tprofileName: string;\n\tdateTime: string;\n\tpermalink: string;\n};\n\nconst commentWrapperStyles = css`\n\t${textSans.medium()};\n\tborder-left: 1px ${neutral[86]} solid;\n\tborder-top: 1px ${neutral[86]} solid;\n\tpadding-top: ${space[1]}px;\n\tpadding-left: ${space[2]}px;\n\tmargin-top: ${space[3]}px;\n`;\n\nconst bodyContentStyles = css`\n\tp {\n\t\tword-break: break-word;\n\t\tmargin-bottom: ${space[2]}px;\n\t}\n\n\tblockquote {\n\t\tfont-style: italic;\n\t\tcolor: ${textColor.supporting};\n\t\tborder-left: ${space[1]}px ${neutral[86]} solid;\n\t\tmargin-top: ${space[1]}px;\n\t\tmargin-right: 0;\n\t\tmargin-bottom: ${space[4]}px;\n\t\tmargin-left: 0;\n\t\tpadding-left: ${space[3]}px;\n\t}\n`;\n\nconst profileWrapperStyles = css`\n\tdisplay: flex;\n\tmargin-top: ${space[4]}px;\n\tmargin-bottom: ${space[12]}px;\n\t/* in order to overwrite the a tag style we had to add a second class to give higher order specificity */\n\t& > a.avatarLink {\n\t\tborder-bottom: none;\n\t}\n\n\t& > a.avatarLink:hover {\n\t\tborder-bottom: none;\n\t}\n`;\n\nconst usernameWrapperStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: ${space[12]}px;\n\t/* in order to overwrite the a tag style we had to add a second class to give higher order specificity */\n\t& > a.permalink {\n\t\tcolor: ${neutral[46]};\n\t\tborder-bottom: none;\n\t}\n\t& > a.permalink:hover {\n\t\tcolor: ${neutral[46]};\n\t\tborder-bottom: 1px solid ${neutral[46]};\n\t}\n`;\n\nconst avatarStyles = css`\n\twidth: ${space[12]}px;\n\theight: ${space[12]}px;\n\tmargin-right: ${space[2]}px;\n`;\n\nconst imageStyles = css`\n\tborder-radius: 50%;\n\twidth: 100%;\n\theight: 100%;\n`;\n\nexport const CommentBlockComponent = ({\n\tbody,\n\tavatarURL,\n\tprofileURL,\n\tprofileName,\n\tdateTime,\n\tpermalink,\n}: Props) => {\n\treturn (\n\t\t<div css={commentWrapperStyles}>\n\t\t\t<div\n\t\t\t\tcss={bodyContentStyles}\n\t\t\t\tdangerouslySetInnerHTML={{ __html: unescapeData(body) }}\n\t\t\t/>\n\t\t\t<div css={profileWrapperStyles}>\n\t\t\t\t<a\n\t\t\t\t\tcss={avatarStyles}\n\t\t\t\t\t// TODO: remove avatarLink\n\t\t\t\t\tclassName=\"avatarLink\"\n\t\t\t\t\thref={profileURL}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t>\n\t\t\t\t\t<img css={imageStyles} src={avatarURL} alt=\"avatar\" />\n\t\t\t\t</a>\n\t\t\t\t<div css={usernameWrapperStyles}>\n\t\t\t\t\t<a\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${textSans.medium({ fontWeight: 'bold' })};\n\t\t\t\t\t\t\twidth: max-content;\n\t\t\t\t\t\t`}\n\t\t\t\t\t\thref={profileURL}\n\t\t\t\t\t>\n\t\t\t\t\t\t{profileName}\n\t\t\t\t\t</a>\n\t\t\t\t\t{/* TODO: remove permalink */}\n\t\t\t\t\t<a href={permalink} className=\"permalink\">\n\t\t\t\t\t\t<time\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t${textSans.small()};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{dateTime}\n\t\t\t\t\t\t</time>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CommentCount.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":74,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":78,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { joinUrl } from '@guardian/libs';\nimport { between, textSans, until } from '@guardian/source-foundations';\nimport CommentIcon from '../../static/icons/comment.svg';\nimport { decidePalette } from '../lib/decidePalette';\nimport { formatCount } from '../lib/formatCount';\nimport { useDiscussion } from '../lib/useDiscussion';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tdiscussionApiUrl: string;\n\tshortUrlId: string;\n};\n\nconst containerStyles = (palette: Palette) => css`\n\tdisplay: flex;\n\talign-self: flex-end;\n\tflex-direction: column;\n\t${textSans.medium()};\n\tfont-weight: bold;\n\tcolor: ${palette.fill.commentCount};\n\tpadding-top: 5px;\n\n\t${until.desktop} {\n\t\tcolor: ${palette.fill.commentCountUntilDesktop};\n\t}\n`;\n\nconst iconContainerStyles = css`\n\theight: 15px;\n\tmargin: 0;\n\ttext-align: right;\n\tmargin-bottom: -2px;\n\tsvg {\n\t\theight: 18px;\n\t\twidth: 18px;\n\t}\n`;\n\nconst iconStyles = (palette: Palette) => css`\n\tfill: ${palette.fill.commentCount};\n\t${until.desktop} {\n\t\tfill: ${palette.fill.commentCountUntilDesktop};\n\t}\n`;\n\nconst longStyles = css`\n\tdisplay: block;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst shortStyles = css`\n\tdisplay: none;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst linkStyles = css`\n\tcolor: inherit;\n\ttext-decoration: none;\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n\t:visited {\n\t\tcolor: inherit;\n\t}\n`;\n\nexport const CommentCount = ({\n\tformat,\n\tdiscussionApiUrl,\n\tshortUrlId,\n}: Props) => {\n\tconst { commentCount } = useDiscussion(\n\t\tjoinUrl(discussionApiUrl, 'discussion', shortUrlId),\n\t);\n\n\tif (!commentCount && commentCount !== 0) return null;\n\n\tconst { short, long } = formatCount(commentCount);\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<data\n\t\t\tcss={containerStyles(palette)}\n\t\t\tdata-cy=\"comment-counts\"\n\t\t\tvalue={`${long} comments on this article`}\n\t\t>\n\t\t\t<a\n\t\t\t\thref=\"#comments\"\n\t\t\t\tcss={linkStyles}\n\t\t\t\taria-label={`${short} Comments`}\n\t\t\t>\n\t\t\t\t<div css={iconContainerStyles}>\n\t\t\t\t\t<CommentIcon css={iconStyles(palette)} />\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-testid=\"long-comment-count\"\n\t\t\t\t\tcss={longStyles}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t>\n\t\t\t\t\t{long}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-testid=\"short-comment-count\"\n\t\t\t\t\tcss={shortStyles}\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t>\n\t\t\t\t\t{short}\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</data>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CommercialMetrics.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":57},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":50,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":50,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1582,1584],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":52,"column":26,"nodeType":"Punctuator","messageId":"preferNullish","endLine":52,"endColumn":28,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1648,1650],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":57,"column":25,"nodeType":"Punctuator","messageId":"preferNullish","endLine":57,"endColumn":27,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1736,1738],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":72,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":72,"endColumn":18},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":72,"column":61,"nodeType":"Identifier","messageId":"invalidType","endLine":72,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { ABTest } from '@guardian/ab-core';\nimport {\n\tinitCommercialMetrics,\n\tbypassCommercialMetricsSampling as switchOffSampling,\n} from '@guardian/commercial-core';\nimport { getCookie } from '@guardian/libs';\nimport { tests } from '../experiments/ab-tests';\nimport { prebidPriceGranularity } from '../experiments/tests/prebid-price-granularity';\nimport { useAB } from '../lib/useAB';\nimport { useAdBlockInUse } from '../lib/useAdBlockInUse';\nimport { useOnce } from '../lib/useOnce';\n\ntype Props = {\n\tenabled: boolean;\n};\n\nexport const CommercialMetrics = ({ enabled }: Props) => {\n\tconst ABTestAPI = useAB();\n\tconst adBlockerInUse = useAdBlockInUse();\n\n\tuseOnce(() => {\n\t\tconst browserId = getCookie({ name: 'bwid', shouldMemoize: true });\n\t\tconst pageViewId = window.guardian.config.ophan.pageViewId;\n\n\t\t// Only send metrics if the switch is enabled\n\t\tif (!enabled) return;\n\n\t\t// For these tests switch off sampling and collect metrics for 100% of views\n\t\tconst clientSideTestsToForceMetrics: ABTest[] = [\n\t\t\t/* keep array multi-line */\n\t\t\tprebidPriceGranularity,\n\t\t];\n\n\t\tconst userInClientSideTestToForceMetrics = ABTestAPI?.allRunnableTests(\n\t\t\ttests,\n\t\t).some((test) =>\n\t\t\tclientSideTestsToForceMetrics.map((t) => t.id).includes(test.id),\n\t\t);\n\n\t\tconst serverSideTestsToForceMetrics: Array<keyof ServerSideTests> = [\n\t\t\t/* keep array multi-line */\n\t\t];\n\n\t\tconst userInServerSideTestToForceMetrics =\n\t\t\tserverSideTestsToForceMetrics.some((test) =>\n\t\t\t\tObject.keys(window.guardian.config.tests).includes(test),\n\t\t\t);\n\n\t\tconst isDev =\n\t\t\twindow.guardian.config.page.isDev ||\n\t\t\twindow.location.hostname.includes(\n\t\t\t\tprocess.env.HOSTNAME || 'localhost',\n\t\t\t);\n\n\t\tinitCommercialMetrics({\n\t\t\tpageViewId,\n\t\t\tbrowserId: browserId || undefined,\n\t\t\tisDev,\n\t\t\tadBlockerInUse,\n\t\t})\n\t\t\t.then(() => {\n\t\t\t\tif (\n\t\t\t\t\tuserInClientSideTestToForceMetrics ||\n\t\t\t\t\tuserInServerSideTestToForceMetrics\n\t\t\t\t) {\n\t\t\t\t\t// TODO: rename this in commercial-core and update here\n\n\t\t\t\t\tvoid switchOffSampling();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((e) =>\n\t\t\t\tconsole.error(`Error initialising commercial metrics: ${e}`),\n\t\t\t);\n\t}, [ABTestAPI, adBlockerInUse, enabled]);\n\n\t// We don’t render anything\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ContainerLayout.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":38,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":43,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":52,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":52,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":61,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":75,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":75,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":92,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":92,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":110,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":110,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":130,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":130,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":151,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":151,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":169,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":169,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":183,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":183,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":199,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":199,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":234,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":234,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbrandAltBackground,\n\tbrandBackground,\n\tbrandBorder,\n\tbreakpoints,\n} from '@guardian/source-foundations';\nimport { ContainerLayout } from './ContainerLayout';\n\nexport default {\n\tcomponent: ContainerLayout,\n\ttitle: 'Components/ContainerLayout',\n\tparameters: {\n\t\tviewport: {\n\t\t\t// This has the effect of turning off the viewports addon by default\n\t\t\tdefaultViewport: 'doesNotExist',\n\t\t},\n\t},\n};\n\nconst Grey = ({ heightInPixels = 400 }: { heightInPixels?: number }) => (\n\t<div\n\t\tcss={css`\n\t\t\tbackground-color: lightgrey;\n\t\t\twidth: 100%;\n\t\t\theight: ${heightInPixels}px;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tfont-size: 2em;\n\t\t\tfont-weight: 200;\n\t\t`}\n\t>\n\t\tInsert content here\n\t</div>\n);\n\nexport const PageTitleStory = () => {\n\treturn <ContainerLayout title=\"No Children\" />;\n};\nPageTitleStory.story = { name: 'with no children' };\n\nexport const ContainerStory = () => {\n\treturn (\n\t\t<ContainerLayout title=\"Default Container\">\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nContainerStory.story = { name: 'default container' };\n\nexport const NoTitleStory = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nNoTitleStory.story = { name: 'with no title' };\n\nexport const BordersStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\ttitle=\"Borders\"\n\t\t\tshowTopBorder={true}\n\t\t\tsideBorders={true}\n\t\t\tcentralBorder=\"full\"\n\t\t>\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nBordersStory.story = { name: 'with all borders' };\n\nexport const LeftContentStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\ttitle=\"Borders\"\n\t\t\tshowTopBorder={true}\n\t\t\tsideBorders={true}\n\t\t\tcentralBorder=\"full\"\n\t\t\tleftContent={<Grey heightInPixels={200} />}\n\t\t>\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nLeftContentStory.story = {\n\tname: 'with an element passed into the left column',\n};\n\nexport const BackgroundStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\ttitle=\"Background Colour\"\n\t\t\tdescription=\"About this content\"\n\t\t\tfontColour={brandBackground.ctaPrimary}\n\t\t\tshowTopBorder={true}\n\t\t\tsideBorders={true}\n\t\t\tcentralBorder=\"full\"\n\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\tborderColour={brandBorder.primary}\n\t\t>\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nBackgroundStory.story = { name: 'with a blue background' };\n\nexport const InnerBackgroundStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\ttitle=\"Inner Background\"\n\t\t\tdescription=\"About this content\"\n\t\t\tfontColour={brandBackground.ctaPrimary}\n\t\t\tshowTopBorder={true}\n\t\t\tsideBorders={true}\n\t\t\tcentralBorder=\"full\"\n\t\t\tinnerBackgroundColour={brandBackground.primary}\n\t\t\tborderColour={brandBorder.primary}\n\t\t>\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nInnerBackgroundStory.story = {\n\tname: 'with a blue inner background',\n};\n\nexport const DifferentBackgrounds = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\ttitle=\"Tip us off\"\n\t\t\tshowTopBorder={true}\n\t\t\tsideBorders={true}\n\t\t\tcentralBorder=\"full\"\n\t\t\tbackgroundColour=\"#FFF280\"\n\t\t\tborderColour={brandBorder.primary}\n\t\t\tinnerBackgroundColour=\"#FFE501\"\n\t\t>\n\t\t\t<h1>\n\t\t\t\t👀 Share stories with the Guardian securely and confidentially\n\t\t\t</h1>\n\t\t</ContainerLayout>\n\t);\n};\nDifferentBackgrounds.story = {\n\tname: 'with inner background different to main background',\n};\n\nexport const StretchRightStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\ttitle=\"Stretched Right\"\n\t\t\tdescription=\"About this content\"\n\t\t\tshowTopBorder={true}\n\t\t\tsideBorders={true}\n\t\t\tcentralBorder=\"full\"\n\t\t\tstretchRight={true}\n\t\t>\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nStretchRightStory.story = {\n\tname: 'with content stretched to the right (no margin)',\n};\n\nexport const PartialStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\ttitle=\"Borders\"\n\t\t\tshowTopBorder={false}\n\t\t\tsideBorders={true}\n\t\t\tcentralBorder=\"partial\"\n\t\t>\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nPartialStory.story = { name: 'with a partial border divider' };\n\nexport const SidesStory = () => {\n\treturn (\n\t\t<ContainerLayout\n\t\t\ttitle=\"NoSides\"\n\t\t\tshowTopBorder={false}\n\t\t\tsideBorders={true}\n\t\t\tcentralBorder=\"full\"\n\t\t\tpadSides={false}\n\t\t\tpadContent={false}\n\t\t>\n\t\t\t<Grey />\n\t\t</ContainerLayout>\n\t);\n};\nSidesStory.story = { name: 'with a full border divider' };\n\nexport const MarginsStory = () => {\n\treturn (\n\t\t<>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"No Vertical Margins\"\n\t\t\t\tsideBorders={true}\n\t\t\t\tshowTopBorder={true}\n\t\t\t\tcentralBorder=\"full\"\n\t\t\t\tverticalMargins={false}\n\t\t\t>\n\t\t\t\t<Grey />\n\t\t\t</ContainerLayout>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"No Vertical Margins\"\n\t\t\t\tsideBorders={true}\n\t\t\t\tshowTopBorder={true}\n\t\t\t\tcentralBorder=\"full\"\n\t\t\t\tverticalMargins={false}\n\t\t\t>\n\t\t\t\t<Grey />\n\t\t\t</ContainerLayout>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"No Vertical Margins\"\n\t\t\t\tsideBorders={true}\n\t\t\t\tshowTopBorder={true}\n\t\t\t\tcentralBorder=\"full\"\n\t\t\t\tverticalMargins={false}\n\t\t\t>\n\t\t\t\t<Grey />\n\t\t\t</ContainerLayout>\n\t\t</>\n\t);\n};\nMarginsStory.story = { name: 'with no vertical margins' };\n\nexport const MultipleStory = () => {\n\treturn (\n\t\t<>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"Page Title\"\n\t\t\t\tshowTopBorder={false}\n\t\t\t\tsideBorders={true}\n\t\t\t/>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"Headlines\"\n\t\t\t\tshowTopBorder={true}\n\t\t\t\tsideBorders={true}\n\t\t\t\tcentralBorder=\"partial\"\n\t\t\t>\n\t\t\t\t<Grey />\n\t\t\t</ContainerLayout>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"Useful links\"\n\t\t\t\tshowTopBorder={true}\n\t\t\t\tsideBorders={true}\n\t\t\t\tcentralBorder=\"partial\"\n\t\t\t/>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"Around the World - I'm a link\"\n\t\t\t\turl=\"https://www.theguardian.com/world\"\n\t\t\t\tshowTopBorder={true}\n\t\t\t\tsideBorders={true}\n\t\t\t\tcentralBorder=\"partial\"\n\t\t\t>\n\t\t\t\t<Grey />\n\t\t\t</ContainerLayout>\n\t\t\t<ContainerLayout\n\t\t\t\tshowTopBorder={false}\n\t\t\t\tsideBorders={false}\n\t\t\t\tbackgroundColour={brandAltBackground.primary}\n\t\t\t>\n\t\t\t\t<h2>Insert call to action here</h2>\n\t\t\t</ContainerLayout>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"Videos\"\n\t\t\t\tfontColour=\"white\"\n\t\t\t\tshowTopBorder={false}\n\t\t\t\tbackgroundColour=\"black\"\n\t\t\t>\n\t\t\t\t<Grey />\n\t\t\t</ContainerLayout>\n\t\t\t<ContainerLayout\n\t\t\t\ttitle=\"Coronavirus\"\n\t\t\t\tdescription=\"A collection of stories about Coronavirus\"\n\t\t\t\tshowTopBorder={true}\n\t\t\t\tsideBorders={true}\n\t\t\t\tcentralBorder=\"partial\"\n\t\t\t>\n\t\t\t\t<Grey />\n\t\t\t</ContainerLayout>\n\t\t</>\n\t);\n};\nMultipleStory.story = {\n\tname: 'with multiple sections',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t\tbreakpoints.tablet,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t\tbreakpoints.leftCol,\n\t\t\t\tbreakpoints.wide,\n\t\t\t],\n\t\t},\n\t},\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ContainerLayout.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":102,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":125,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":134,"column":31,"nodeType":"Punctuator","messageId":"preferNullish","endLine":134,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2817,2819],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":136,"column":22,"nodeType":"Punctuator","messageId":"preferNullish","endLine":136,"endColumn":24,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2892,2894],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":146,"column":33,"nodeType":"Punctuator","messageId":"preferNullish","endLine":146,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3182,3184],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":152,"column":31,"nodeType":"Punctuator","messageId":"preferNullish","endLine":152,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3325,3327],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":168,"column":31,"nodeType":"Punctuator","messageId":"preferNullish","endLine":168,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3719,3721],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign } from '@guardian/libs';\nimport { from, space } from '@guardian/source-foundations';\nimport { decideContainerOverrides } from '../lib/decideContainerOverrides';\nimport { ContainerTitle } from './ContainerTitle';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { Hide } from './Hide';\nimport { LeftColumn } from './LeftColumn';\n\ntype Props = {\n\ttitle?: string;\n\tfontColour?: string;\n\tdescription?: string;\n\turl?: string;\n\tsectionId?: string;\n\tsideBorders?: boolean;\n\tcentralBorder?: 'partial' | 'full';\n\tshowTopBorder?: boolean;\n\tpadSides?: boolean;\n\tpadContent?: boolean;\n\tverticalMargins?: boolean;\n\tbackgroundColour?: string;\n\tborderColour?: string;\n\tleftContent?: React.ReactNode;\n\tchildren?: React.ReactNode;\n\tstretchRight?: boolean;\n\tleftColSize?: LeftColSize;\n\tformat?: ArticleFormat;\n\tophanComponentName?: string;\n\tophanComponentLink?: string;\n\tcontainerPalette?: DCRContainerPalette;\n\tinnerBackgroundColour?: string;\n};\n\nconst containerStyles = css`\n\tdisplay: flex;\n\tflex-grow: 1;\n\tflex-direction: column;\n\twidth: 100%;\n`;\n\nconst margins = css`\n\tmargin-top: ${space[2]}px;\n\t/*\n   Keep spacing at the bottom of the container consistent at 36px, regardless of\n   breakpoint, based on chat with Harry Fisher\n*/\n\tmargin-bottom: ${space[9]}px;\n`;\n\nconst rightMargin = css`\n\t${from.wide} {\n\t\tmargin-right: 68px;\n\t}\n`;\n\nconst padding = (format?: ArticleFormat) => {\n\tswitch (format?.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog:\n\t\t\treturn css`\n\t\t\t\tpadding: 0;\n\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tpadding: 0 10px;\n\t\t\t\t}\n\t\t\t`;\n\t\tdefault:\n\t\t\treturn css`\n\t\t\t\tpadding: 0 10px;\n\t\t\t`;\n\t}\n};\n\nconst Container = ({\n\tchildren,\n\tpadded,\n\tverticalMargins,\n\tstretchRight,\n\tformat,\n}: {\n\tchildren: React.ReactNode;\n\tpadded: boolean;\n\tverticalMargins: boolean;\n\tstretchRight: boolean;\n\tformat?: ArticleFormat;\n}) => (\n\t<div\n\t\tcss={[\n\t\t\tcontainerStyles,\n\t\t\tpadded && padding(format),\n\t\t\tverticalMargins && margins,\n\t\t\t!stretchRight && rightMargin,\n\t\t]}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const ContainerLayout = ({\n\ttitle,\n\tfontColour,\n\tdescription,\n\turl,\n\tsectionId,\n\tsideBorders = false,\n\tcentralBorder,\n\tshowTopBorder = false,\n\tpadSides = true,\n\tpadContent = true,\n\tverticalMargins = true,\n\tborderColour,\n\tbackgroundColour,\n\tchildren,\n\tleftContent,\n\tstretchRight = false,\n\tleftColSize,\n\tformat,\n\tophanComponentLink,\n\tophanComponentName,\n\tcontainerPalette,\n\tinnerBackgroundColour,\n}: Props) => {\n\tconst overrides =\n\t\tcontainerPalette && decideContainerOverrides(containerPalette);\n\treturn (\n\t\t<ElementContainer\n\t\t\tsectionId={sectionId}\n\t\t\tshowSideBorders={sideBorders}\n\t\t\tshowTopBorder={showTopBorder}\n\t\t\tpadded={padSides}\n\t\t\tborderColour={borderColour || overrides?.border.container}\n\t\t\tbackgroundColour={\n\t\t\t\tbackgroundColour || overrides?.background.container\n\t\t\t}\n\t\t\telement=\"section\"\n\t\t\tophanComponentLink={ophanComponentLink}\n\t\t\tophanComponentName={ophanComponentName}\n\t\t\tinnerBackgroundColour={innerBackgroundColour}\n\t\t>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn\n\t\t\t\t\tborderType={centralBorder}\n\t\t\t\t\tborderColour={borderColour || overrides?.border.container}\n\t\t\t\t\tsize={leftColSize}\n\t\t\t\t>\n\t\t\t\t\t<>\n\t\t\t\t\t\t<ContainerTitle\n\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\tfontColour={fontColour || overrides?.text.container}\n\t\t\t\t\t\t\tdescription={description}\n\t\t\t\t\t\t\turl={url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{leftContent}\n\t\t\t\t\t</>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<Container\n\t\t\t\t\tpadded={padContent}\n\t\t\t\t\tverticalMargins={verticalMargins}\n\t\t\t\t\tstretchRight={stretchRight}\n\t\t\t\t\tformat={format}\n\t\t\t\t>\n\t\t\t\t\t<Hide when=\"above\" breakpoint=\"leftCol\">\n\t\t\t\t\t\t<ContainerTitle\n\t\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\t\tfontColour={fontColour || overrides?.text.container}\n\t\t\t\t\t\t\tdescription={description}\n\t\t\t\t\t\t\turl={url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Hide>\n\t\t\t\t\t{children}\n\t\t\t\t</Container>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ContainerTitle.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":26,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":26,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":37,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ContainerTitle } from './ContainerTitle';\n\nexport default {\n\tcomponent: ContainerTitle,\n\ttitle: 'Components/ContainerTitle',\n\tparameters: {\n\t\tviewport: {\n\t\t\t// This has the effect of turning off the viewports addon by default\n\t\t\tdefaultViewport: 'doesNotExist',\n\t\t},\n\t},\n};\n\nexport const DefaultStory = () => {\n\treturn <ContainerTitle title=\"Title text\" />;\n};\nDefaultStory.story = { name: 'with defaults' };\n\nexport const DescriptionStory = () => {\n\treturn (\n\t\t<ContainerTitle title=\"Title text\" description=\"About this content\" />\n\t);\n};\nDescriptionStory.story = { name: 'with description' };\n\nexport const ColouredStory = () => {\n\treturn (\n\t\t<ContainerTitle\n\t\t\ttitle=\"Title text\"\n\t\t\tdescription=\"About this content\"\n\t\t\tfontColour=\"green\"\n\t\t/>\n\t);\n};\nColouredStory.story = { name: 'with colour' };\n\nexport const LinkStory = () => {\n\treturn (\n\t\t<ContainerTitle\n\t\t\ttitle=\"Title text\"\n\t\t\tdescription=\"About this content\"\n\t\t\turl=\"https://www.theguardian.com\"\n\t\t/>\n\t);\n};\nLinkStory.story = { name: 'with a link' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ContainerTitle.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":22,"column":22,"nodeType":"Punctuator","messageId":"preferNullish","endLine":22,"endColumn":24,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[384,386],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":38,"column":22,"nodeType":"Punctuator","messageId":"preferNullish","endLine":38,"endColumn":24,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[694,696],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":56,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":66,"endColumn":6},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":80,"column":6,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":80,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbetween,\n\tfrom,\n\theadline,\n\tspace,\n\ttext,\n\tuntil,\n} from '@guardian/source-foundations';\n\nconst linkStyles = css`\n\ttext-decoration: none;\n\tcolor: ${text.anchorSecondary};\n\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nconst headerStyles = (fontColour?: string) => css`\n\t${headline.xsmall({ fontWeight: 'bold' })};\n\tcolor: ${fontColour || text.primary};\n\tpadding-bottom: ${space[2]}px;\n\tpadding-top: ${space[1]}px;\n\tmargin-left: 0;\n\n\t${from.tablet} {\n\t\tmargin-left: 10px;\n\t}\n\n\t${from.leftCol} {\n\t\tmargin-left: 0;\n\t}\n`;\n\nconst descriptionStyles = (fontColour?: string) => css`\n\t${headline.xxxsmall({ fontWeight: 'medium' })};\n\tcolor: ${fontColour || text.supporting};\n\tp {\n\t\t/* Handle paragraphs in the description */\n\t\tmargin-bottom: ${space[3]}px;\n\t}\n\ta {\n\t\tcolor: ${text.primary};\n\t\ttext-decoration: none;\n\t}\n\t${between.tablet.and.leftCol} {\n\t\tmargin-left: 10px;\n\t}\n\n\t${until.leftCol} {\n\t\tmargin-bottom: ${space[4]}px;\n\t}\n`;\n\nexport const ContainerTitle = ({\n\ttitle,\n\tfontColour,\n\tdescription,\n\turl,\n}: {\n\ttitle?: string;\n\tfontColour?: string;\n\tdescription?: string;\n\turl?: string;\n}) => {\n\tif (!title) return null;\n\treturn (\n\t\t<>\n\t\t\t{url ? (\n\t\t\t\t<a css={linkStyles} href={url}>\n\t\t\t\t\t<h2 css={headerStyles(fontColour)}>{title}</h2>\n\t\t\t\t</a>\n\t\t\t) : (\n\t\t\t\t<h2 css={headerStyles(fontColour)}>{title}</h2>\n\t\t\t)}\n\t\t\t{description && (\n\t\t\t\t<p\n\t\t\t\t\tcss={descriptionStyles(fontColour)}\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: description }}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Contributor.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Contributor.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ContributorAvatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CoreVitals.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":32},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":15,"column":54,"nodeType":"Punctuator","messageId":"preferNullish","endLine":15,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[473,475],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":42,"column":2,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":48,"endColumn":5,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[1273,1363],"text":"void initCoreWebVitals({\n\t\tbrowserId,\n\t\tpageViewId,\n\t\tisDev,\n\t\tsampling,\n\t\tteam: 'dotcom',\n\t});"},"desc":"Add void operator to ignore."}],"suppressions":[{"kind":"directive","justification":"they’re async methods"}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":51,"column":3,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":51,"endColumn":41,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[1442,1480],"text":"void bypassCoreWebVitalsSampling('dotcom');"},"desc":"Add void operator to ignore."}],"suppressions":[{"kind":"directive","justification":"they’re async methods"}]},{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":57,"column":3,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":57,"endColumn":45,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[1574,1616],"text":"void bypassCoreWebVitalsSampling('commercial');"},"desc":"Add void operator to ignore."}],"suppressions":[{"kind":"directive","justification":"they’re async methods"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { ABTest } from '@guardian/ab-core';\nimport {\n\tbypassCoreWebVitalsSampling,\n\tgetCookie,\n\tinitCoreWebVitals,\n} from '@guardian/libs';\nimport { useAB } from '../lib/useAB';\n\nexport const CoreVitals = () => {\n\tconst browserId = getCookie({ name: 'bwid', shouldMemoize: true });\n\tconst { pageViewId } = window.guardian.config.ophan;\n\n\tconst isDev =\n\t\twindow.location.hostname === 'm.code.dev-theguardian.com' ||\n\t\twindow.location.hostname === (process.env.HOSTNAME || 'localhost') ||\n\t\twindow.location.hostname === 'preview.gutools.co.uk';\n\tconst sampling = 1 / 100;\n\n\tconst ABTestAPI = useAB();\n\n\t// For these tests switch off sampling and collect metrics for 100% of views\n\tconst clientSideTestsToForceMetrics: ABTest[] = [\n\t\t/* keep array multi-line */\n\t];\n\n\tconst userInClientSideTestToForceMetrics =\n\t\tclientSideTestsToForceMetrics.some((test) =>\n\t\t\tABTestAPI?.runnableTest(test),\n\t\t);\n\n\tconst serverSideTestsToForceMetrics: Array<keyof ServerSideTests> = [\n\t\t/* linter, please keep this array multi-line */\n\t];\n\n\tconst userInServerSideTestToForceMetrics =\n\t\tserverSideTestsToForceMetrics.some((test) =>\n\t\t\tObject.keys(window.guardian.config.tests).includes(test),\n\t\t);\n\n\t/* eslint-disable @typescript-eslint/no-floating-promises -- they’re async methods */\n\n\tinitCoreWebVitals({\n\t\tbrowserId,\n\t\tpageViewId,\n\t\tisDev,\n\t\tsampling,\n\t\tteam: 'dotcom',\n\t});\n\n\tif (window.location.hostname === (process.env.HOSTNAME || 'localhost')) {\n\t\tbypassCoreWebVitalsSampling('dotcom');\n\t}\n\tif (\n\t\tuserInClientSideTestToForceMetrics ||\n\t\tuserInServerSideTestToForceMetrics\n\t) {\n\t\tbypassCoreWebVitalsSampling('commercial');\n\t}\n\n\t/* eslint-enable @typescript-eslint/no-floating-promises */\n\n\t// don’t render anything\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Counts.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":34,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":88,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":88,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":244,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":244,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":298,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":298,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":352,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":352,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":406,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":406,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport fetchMock from 'fetch-mock';\nimport { CommentCount } from './CommentCount.importable';\nimport { Counts } from './Counts';\nimport { ShareCount } from './ShareCount.importable';\n\nexport default {\n\tcomponent: Counts,\n\ttitle: 'Components/Counts',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin: 40px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst format = {\n\ttheme: ArticlePillar.News,\n\tdesign: ArticleDesign.Standard,\n\tdisplay: ArticleDisplay.Standard,\n};\n\nexport const Both = () => {\n\tfetchMock\n\t\t.restore()\n\t\t// Share count\n\t\t.getOnce(\n\t\t\t'begin:https://api.nextgen.guardianapps.co.uk/sharecount/',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tpath: 'lifeandstyle/2015/jan/25/deborah-orr-parents-jailers-i-loved',\n\t\t\t\t\tshare_count: 80,\n\t\t\t\t\trefreshStatus: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t)\n\t\t// Comment count\n\t\t.getOnce(\n\t\t\t'begin:https://discussion.theguardian.com/discussion/p/fmmj65',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tdiscussion: {\n\t\t\t\t\t\tcommentCount: 239,\n\t\t\t\t\t\tisClosedForComments: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t);\n\n\treturn (\n\t\t<Container>\n\t\t\t<Counts format={format}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2015/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/fmmj65\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t</Container>\n\t);\n};\nBoth.story = { name: 'with both results' };\n\nexport const Themes = () => {\n\tfetchMock\n\t\t.restore()\n\t\t// Share count\n\t\t.getOnce(\n\t\t\t'begin:https://api.nextgen.guardianapps.co.uk/sharecount/',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tpath: 'lifeandstyle/2010/jan/25/deborah-orr-parents-jailers-i-loved',\n\t\t\t\t\tshare_count: 80,\n\t\t\t\t\trefreshStatus: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t)\n\t\t// Comment count\n\t\t.getOnce(\n\t\t\t'begin:https://discussion.theguardian.com/discussion/p/3bdii8',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tdiscussion: {\n\t\t\t\t\t\tcommentCount: 239,\n\t\t\t\t\t\tisClosedForComments: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t);\n\n\treturn (\n\t\t<Container>\n\t\t\t<Counts format={{ ...format, theme: ArticlePillar.News }}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2010/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.News }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/3bdii8\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.News }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t\t<Counts format={{ ...format, theme: ArticlePillar.Culture }}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2010/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.Culture }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/3bdii8\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.Culture }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t\t<Counts format={{ ...format, theme: ArticlePillar.Sport }}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2010/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.Sport }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/3bdii8\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.Sport }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t\t<Counts format={{ ...format, theme: ArticlePillar.Lifestyle }}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2010/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.Lifestyle }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/3bdii8\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.Lifestyle }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t\t<Counts format={{ ...format, theme: ArticlePillar.Opinion }}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2010/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.Opinion }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/3bdii8\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticlePillar.Opinion }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t\t<Counts format={{ ...format, theme: ArticleSpecial.Labs }}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2010/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticleSpecial.Labs }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/3bdii8\"\n\t\t\t\t\t\tformat={{ ...format, theme: ArticleSpecial.Labs }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t\t<Counts format={{ ...format, theme: ArticleSpecial.SpecialReport }}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2010/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t...format,\n\t\t\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/3bdii8\"\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t...format,\n\t\t\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t</Container>\n\t);\n};\nThemes.story = { name: 'with different themes' };\n\nexport const CommentOnly = () => {\n\tfetchMock\n\t\t.restore()\n\t\t// Share count\n\t\t.getOnce(\n\t\t\t'begin:https://api.nextgen.guardianapps.co.uk/sharecount/',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tpath: 'lifeandstyle/2020/jan/25/deborah-orr-parents-jailers-i-loved',\n\t\t\t\t\tshare_count: 0,\n\t\t\t\t\trefreshStatus: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t)\n\t\t// Comment count\n\t\t.getOnce(\n\t\t\t'begin:https://discussion.theguardian.com/discussion/p/sd4lki',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tdiscussion: {\n\t\t\t\t\t\tcommentCount: 239,\n\t\t\t\t\t\tisClosedForComments: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t);\n\n\treturn (\n\t\t<Container>\n\t\t\t<Counts format={format}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2020/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/sd4lki\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t</Container>\n\t);\n};\nCommentOnly.story = { name: 'with zero shares' };\n\nexport const ZeroComments = () => {\n\tfetchMock\n\t\t.restore()\n\t\t// Share count\n\t\t.getOnce(\n\t\t\t'begin:https://api.nextgen.guardianapps.co.uk/sharecount/',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tpath: 'money/2017/mar/10/ministers-to-criminalise-use-of-ticket-tout-harvesting-software',\n\t\t\t\t\tshare_count: 60,\n\t\t\t\t\trefreshStatus: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t)\n\t\t// Comment count\n\t\t.getOnce(\n\t\t\t'begin:https://discussion.theguardian.com/discussion/p/u7ytrg',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tdiscussion: {\n\t\t\t\t\t\tcommentCount: 0,\n\t\t\t\t\t\tisClosedForComments: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t);\n\n\treturn (\n\t\t<Container>\n\t\t\t<Counts format={format}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"money/2017/mar/10/ministers-to-criminalise-use-of-ticket-tout-harvesting-software\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/u7ytrg\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t</Container>\n\t);\n};\nZeroComments.story = { name: 'with zero comments' };\n\nexport const BigNumbers = () => {\n\tfetchMock\n\t\t.restore()\n\t\t// Share count\n\t\t.getOnce(\n\t\t\t'begin:https://api.nextgen.guardianapps.co.uk/sharecount/',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tpath: '/lifeandstyle/2019/jan/25/deborah-orr-parents-jailers-i-loved',\n\t\t\t\t\tshare_count: 204320,\n\t\t\t\t\trefreshStatus: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t)\n\t\t// Comment count\n\t\t.getOnce(\n\t\t\t'begin:https://discussion.theguardian.com/discussion/p/bhgyt',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tdiscussion: {\n\t\t\t\t\t\tcommentCount: 4320,\n\t\t\t\t\t\tisClosedForComments: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t);\n\n\treturn (\n\t\t<Container>\n\t\t\t<Counts format={format}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"/lifeandstyle/2019/jan/25/deborah-orr-parents-jailers-i-loved\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<CommentCount\n\t\t\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com\"\n\t\t\t\t\t\tshortUrlId=\"p/bhgyt\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Counts>\n\t\t</Container>\n\t);\n};\nBigNumbers.story = { name: 'with long numbers' };\n\nexport const CommentsOff = () => {\n\tfetchMock\n\t\t.restore()\n\t\t// Share count\n\t\t.getOnce(\n\t\t\t'begin:https://api.nextgen.guardianapps.co.uk/sharecount/',\n\t\t\t{\n\t\t\t\tstatus: 200,\n\t\t\t\tbody: {\n\t\t\t\t\tpath: 'money/2017/mar/10/ministers-to-criminalise-use-of-ticket-tout-harvesting-software',\n\t\t\t\t\tshare_count: 60,\n\t\t\t\t\trefreshStatus: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ overwriteRoutes: false },\n\t\t);\n\n\treturn (\n\t\t<Container>\n\t\t\t<Counts format={format}>\n\t\t\t\t<div className=\"meta-number\">\n\t\t\t\t\t<ShareCount\n\t\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t\t\tpageId=\"money/2017/mar/10/ministers-to-criminalise-use-of-ticket-tout-harvesting-software\"\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{/* When commenting is off the CommentCount component won't render at all */}\n\t\t\t\t<div className=\"meta-number\" />\n\t\t\t</Counts>\n\t\t</Container>\n\t);\n};\nCommentsOff.story = { name: 'with commentting off' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Counts.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":33,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign } from '@guardian/libs';\nimport { border, until } from '@guardian/source-foundations';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tformat: ArticleFormat;\n};\nconst containerStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: flex-start;\n\t.meta-number:not(:empty) + .meta-number:not(:empty) {\n\t\t/* This css to show a vertical divider  will only be applied to the second\n           non empty meta-number element. (We only want the border to show when both share\n           and comment counts are displayed) */\n\t\tborder-left: 1px solid ${border.secondary};\n\t\tmargin-left: 4px;\n\t\tpadding-left: 4px;\n\t\theight: 40px;\n\t}\n`;\n\nconst standfirstColouring = css`\n\t${until.desktop} {\n\t\t.meta-number:not(:empty) + .meta-number:not(:empty) {\n\t\t\tborder-left: 1px solid rgba(255, 255, 255, 0.4);\n\t\t}\n\t}\n`;\n\nexport const Counts = ({ children, format }: Props) => (\n\t<div\n\t\tcss={[\n\t\t\tcontainerStyles,\n\t\t\tformat.design === ArticleDesign.LiveBlog && standfirstColouring,\n\t\t]}\n\t>\n\t\t{/* The containerStyles css is expecting children to be two divs with the\n            'meta-number' class */}\n\t\t{children}\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CricketScoreboard.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":16,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { breakpoints } from '@guardian/source-foundations';\nimport { match } from '../../../fixtures/manual/cricket-scoreboard';\nimport { CricketScoreboard } from './CricketScoreboard';\n\nexport default {\n\tcomponent: CricketScoreboard,\n\ttitle: 'Components/CricketScoreboard',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [breakpoints.mobileLandscape],\n\t\t},\n\t},\n};\n\nexport const defaultStory = () => {\n\treturn (\n\t\t<div>\n\t\t\t<CricketScoreboard\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t}}\n\t\t\t\tmatch={match}\n\t\t\t\tscorecardUrl=\"/test\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\ndefaultStory.story = { name: 'Cricket Scoreboard' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CricketScoreboard.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/CricketScoreboard.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":94,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":100,"endColumn":6},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":129,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":129,"endColumn":77}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { between, space, textSans, until } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\n\nconst ALL_OUT_WICKETS = 10;\n\ntype Props = {\n\tscorecardUrl: string;\n\tmatch: CricketMatch;\n\tformat: ArticleFormat;\n};\n\nconst screenReaderOnlyStyle = css`\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n`;\n\nconst containerStyle = css`\n\t${until.mobileLandscape} {\n\t\tpadding: 10px 10px 0 10px;\n\t}\n\t${between.mobileLandscape.and.desktop} {\n\t\tpadding: 10px 20px 0 20px;\n\t}\n`;\n\nconst tableStyle = css`\n\twidth: 100%;\n\t${textSans.xsmall()}\n`;\n\nconst captionStyle = (palette: Palette) => css`\n\ttext-align: left;\n\tfont-weight: bold;\n\tborder-top: 1px solid ${palette.border.cricketScoreboardTop};\n\tborder-collapse: inherit;\n\tpadding-top: ${space[2]}px;\n\tpadding-bottom: ${space[2]}px;\n`;\n\nconst rowStyle = (palette: Palette) => css`\n\tborder-top: 1px solid ${palette.border.cricketScoreboardDivider};\n`;\n\nconst cellStyle = css`\n\tpadding-top: ${space[3]}px;\n\tpadding-bottom: ${space[3]}px;\n`;\n\nconst boldStlye = css`\n\tfont-weight: bold;\n`;\n\nconst linkPaddingStlye = css`\n\tpadding-top: ${space[3]}px;\n\tpadding-bottom: ${space[2]}px;\n`;\n\nconst linkStyle = (palette: Palette) => css`\n\tcolor: ${palette.text.cricketScoreboardLink};\n\ttext-decoration: none;\n\n\t:hover {\n\t\tcolor: ${palette.text.cricketScoreboardLink};\n\t\ttext-decoration: underline;\n\t}\n`;\n\nexport const cricketScore = ({\n\tinnings,\n\tshort,\n}: {\n\tinnings: CricketInnings;\n\tshort?: boolean;\n}): string => {\n\tif (innings.declared) {\n\t\treturn `${innings.runsScored} - ${innings.fallOfWicket.length} declared`;\n\t}\n\tif (innings.forfeited) {\n\t\treturn `${innings.runsScored} - ${innings.fallOfWicket.length} forfeited`;\n\t}\n\tif (innings.fallOfWicket.length === ALL_OUT_WICKETS) {\n\t\treturn short ? innings.runsScored : `${innings.runsScored} all out`;\n\t}\n\treturn `${innings.runsScored} - ${innings.fallOfWicket.length}`;\n};\n\nexport const CricketInnings = ({\n\tmatch,\n\thome,\n}: {\n\tmatch: CricketMatch;\n\thome: boolean;\n}) => {\n\tconst teamName = match.teams.find((team) => team.home === home)?.name;\n\tconst teamInnings = match.innings.filter(\n\t\t(innings) => innings.battingTeam === teamName,\n\t);\n\n\t// There can be up to 2 innings per team in a cricket match\n\tswitch (teamInnings.length) {\n\t\tcase 1:\n\t\t\treturn (\n\t\t\t\t<p>\n\t\t\t\t\t{cricketScore({ innings: teamInnings[0] })} (\n\t\t\t\t\t{teamInnings[0].overs} overs)\n\t\t\t\t</p>\n\t\t\t);\n\t\tcase 2:\n\t\t\treturn (\n\t\t\t\t<p>\n\t\t\t\t\t{cricketScore({ innings: teamInnings[0], short: true })}\n\t\t\t\t\t{' & '}\n\t\t\t\t\t{cricketScore({ innings: teamInnings[1] })} (\n\t\t\t\t\t{teamInnings[1].overs} overs)\n\t\t\t\t</p>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn <p>Yet to bat</p>;\n\t}\n};\n\nexport const CricketScoreboard = ({ scorecardUrl, match, format }: Props) => {\n\tconst palette = decidePalette(format);\n\tconst date = new Date(match.gameDate);\n\treturn (\n\t\t<div css={containerStyle}>\n\t\t\t<h2 css={screenReaderOnlyStyle}>\n\t\t\t\t<time dateTime={date.toISOString()}>{date.toDateString()}</time>\n\t\t\t\t{match.competitionName}, {match.venueName}\n\t\t\t</h2>\n\t\t\t<table css={tableStyle}>\n\t\t\t\t<thead css={screenReaderOnlyStyle}>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>Team name</td>\n\t\t\t\t\t\t<td>Score</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{/* Home team */}\n\t\t\t\t\t<tr css={rowStyle(palette)}>\n\t\t\t\t\t\t<td css={[cellStyle, boldStlye]}>\n\t\t\t\t\t\t\t{match.teams.find((team) => !!team.home)?.name}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td css={cellStyle}>\n\t\t\t\t\t\t\t<CricketInnings match={match} home={true} />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t{/* Away team */}\n\t\t\t\t\t<tr css={rowStyle(palette)}>\n\t\t\t\t\t\t<td css={[cellStyle, boldStlye]}>\n\t\t\t\t\t\t\t{match.teams.find((team) => !team.home)?.name}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td css={cellStyle}>\n\t\t\t\t\t\t\t<CricketInnings match={match} home={false} />\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t\t<caption css={captionStyle(palette)}>\n\t\t\t\t\t{match.competitionName}, {match.venueName}\n\t\t\t\t</caption>\n\t\t\t\t<tfoot>\n\t\t\t\t\t<tr css={rowStyle(palette)}>\n\t\t\t\t\t\t<td css={linkPaddingStlye} colSpan={2}>\n\t\t\t\t\t\t\t<a css={linkStyle(palette)} href={scorecardUrl}>\n\t\t\t\t\t\t\t\tView full scorecard\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tfoot>\n\t\t\t</table>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Dateline.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DisclaimerBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":27,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { DisclaimerBlockComponent } from './DisclaimerBlockComponent';\n\nexport default {\n\tcomponent: DisclaimerBlockComponent,\n\ttitle: 'Components/DisclaimerBlockComponent',\n};\n\nconst containerStyles = css`\n\tmax-width: 620px;\n\tmargin: 20px;\n`;\n\nexport const defaultStory = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<DisclaimerBlockComponent\n\t\t\t\thtml={\n\t\t\t\t\t'<p><sup>This is a disclaimer and it could have <a href=\"#\">link text in it</a>.</sup></p>'\n\t\t\t\t}\n\t\t\t/>\n\t\t</div>\n\t);\n};\ndefaultStory.story = { name: 'Default Disclaimer' };\n\nexport const OpinionStory = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<DisclaimerBlockComponent\n\t\t\t\thtml={\n\t\t\t\t\t'<p><sup>This is an Opinion disclaimer and it could have <a href=\"#\">link text in it</a>.</sup></p>'\n\t\t\t\t}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nOpinionStory.story = { name: 'Opinion Disclaimer' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DisclaimerBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":20,"column":3,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":22,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { body } from '@guardian/source-foundations';\n\nconst disclaimerStyles = css`\n\t${body.small()};\n\n\tsup {\n\t\tfont-size: 85%;\n\t}\n\n\tmargin-bottom: 16px;\n`;\n\nexport const DisclaimerBlockComponent: React.FC<{\n\thtml: string;\n}> = ({ html }) => (\n\t<footer\n\t\tcss={disclaimerStyles}\n\t\tdata-cy=\"affiliate-disclaimer\"\n\t\tdangerouslySetInnerHTML={{\n\t\t\t__html: html,\n\t\t}}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Discussion.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":22,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { useEffect } from 'react';\nimport { doStorybookHydration } from '../browser/islands/doStorybookHydration';\nimport { DiscussionLayout } from './DiscussionLayout';\n\nconst HydratedLayout = ({ children }: { children: React.ReactNode }) => {\n\tuseEffect(() => {\n\t\tdoStorybookHydration();\n\t});\n\treturn <>{children}</>;\n};\n\nexport default {\n\tcomponent: DiscussionLayout,\n\ttitle: 'Components/DiscussionLayout',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tpauseAnimationAtEnd: true,\n\t\t},\n\t},\n};\nexport const Basic = () => {\n\treturn (\n\t\t<HydratedLayout>\n\t\t\t<DiscussionLayout\n\t\t\t\tdiscussionApiUrl=\"https://discussion.theguardian.com/discussion-api\"\n\t\t\t\tshortUrlId=\"/p/4v8kk\"\n\t\t\t\tformat={{\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tdiscussionD2Uid=\"zHoBy6HNKsk\"\n\t\t\t\tdiscussionApiClientHeader=\"nextgen\"\n\t\t\t\tenableDiscussionSwitch={true}\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tshouldHideAds={false}\n\t\t\t/>\n\t\t</HydratedLayout>\n\t);\n};\n\nBasic.story = { name: 'A discussion with short comments' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Discussion.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Arrow function expected no return value.","line":56,"column":2,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":56,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":59,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":67,"endColumn":13},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":86,"column":3,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":86,"endColumn":18},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":111,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":111,"endColumn":32},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":111,"column":63,"nodeType":"Identifier","messageId":"invalidType","endLine":111,"endColumn":64},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":168,"column":28,"nodeType":"Punctuator","messageId":"preferNullish","endLine":168,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4697,4699],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { App as Comments } from '@guardian/discussion-rendering';\nimport { joinUrl } from '@guardian/libs';\nimport { neutral, space } from '@guardian/source-foundations';\nimport { SvgPlus } from '@guardian/source-react-components';\nimport { EditorialButton } from '@guardian/source-react-components-development-kitchen';\nimport { useEffect, useState } from 'react';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getCommentContext } from '../lib/getCommentContext';\nimport { revealStyles } from '../lib/revealStyles';\nimport { useDiscussion } from '../lib/useDiscussion';\nimport { Hide } from './Hide';\nimport { SignedInAs } from './SignedInAs';\n\nexport type Props = {\n\tformat: ArticleFormat;\n\tdiscussionApiUrl: string;\n\tshortUrlId: string;\n\tdiscussionD2Uid: string;\n\tdiscussionApiClientHeader: string;\n\tenableDiscussionSwitch: boolean;\n\tuser?: UserProfile;\n};\n\nconst overlayStyles = css`\n\tbackground-image: linear-gradient(\n\t\t0deg,\n\t\t${neutral[100]},\n\t\t${neutral[100]} 40%,\n\t\trgba(255, 255, 255, 0)\n\t);\n\theight: 80px;\n\tposition: absolute;\n\tbottom: 0;\n\tright: 0;\n\twidth: 100%;\n\tdisplay: block;\n`;\n\nconst fixHeight = css`\n\tmax-height: 280px;\n\tmin-height: 280px;\n\toverflow: hidden;\n`;\n\nconst positionRelative = css`\n\tposition: relative;\n`;\n\nconst commentIdFromUrl = () => {\n\tif (typeof window === 'undefined') return;\n\tconst { hash } = window.location;\n\tif (!hash) return;\n\tif (!hash.includes('comment')) return;\n\tif (!hash.split('-')[1]) return;\n\treturn parseInt(hash.split('-')[1], 10);\n};\n\nexport const Discussion = ({\n\tformat,\n\tdiscussionApiUrl,\n\tshortUrlId,\n\tdiscussionD2Uid,\n\tdiscussionApiClientHeader,\n\tenableDiscussionSwitch,\n\tuser,\n}: Props) => {\n\tconst [commentPage, setCommentPage] = useState<number>();\n\tconst [commentPageSize, setCommentPageSize] = useState<25 | 50 | 100>();\n\tconst [commentOrderBy, setCommentOrderBy] = useState<\n\t\t'newest' | 'oldest' | 'recommendations'\n\t>();\n\tconst [isExpanded, setIsExpanded] = useState<boolean>(false);\n\tconst [hashCommentId, setHashCommentId] = useState<number | undefined>(\n\t\tcommentIdFromUrl(),\n\t);\n\n\tconst { commentCount, isClosedForComments } = useDiscussion(\n\t\tjoinUrl(discussionApiUrl, 'discussion', shortUrlId),\n\t);\n\n\tconst palette = decidePalette(format);\n\n\tconst hasCommentsHash =\n\t\ttypeof window !== 'undefined' &&\n\t\twindow.location &&\n\t\twindow.location.hash === '#comments';\n\n\tconst handlePermalink = (commentId: number) => {\n\t\tif (typeof window === 'undefined') return false;\n\t\twindow.location.hash = `#comment-${commentId}`;\n\t\t// Put this comment id into the hashCommentId state which will\n\t\t// trigger an api call to get the comment context and then expand\n\t\t// and reload the discussion based on the resuts\n\t\tsetHashCommentId(commentId);\n\t\treturn false;\n\t};\n\n\t// Check the url to see if there is a comment hash, e.g. ...crisis#comment-139113120\n\t// If so, make a call to get the context of this comment so we know what page it is\n\t// on.\n\tuseEffect(() => {\n\t\tif (hashCommentId) {\n\t\t\tgetCommentContext(discussionApiUrl, hashCommentId)\n\t\t\t\t.then((context) => {\n\t\t\t\t\tsetCommentPage(context.page);\n\t\t\t\t\tsetCommentPageSize(context.pageSize);\n\t\t\t\t\tsetCommentOrderBy(context.orderBy);\n\t\t\t\t\tsetIsExpanded(true);\n\t\t\t\t})\n\t\t\t\t.catch((e) => console.error(`getCommentContext - error: ${e}`));\n\t\t}\n\t}, [discussionApiUrl, hashCommentId]);\n\n\tuseEffect(() => {\n\t\tif (hasCommentsHash) {\n\t\t\tsetIsExpanded(true);\n\t\t}\n\t}, [hasCommentsHash]);\n\n\tuseEffect(() => {\n\t\tconst pendingElements = document.querySelectorAll<HTMLElement>(\n\t\t\t'.discussion > .pending',\n\t\t);\n\t\tpendingElements.forEach((element) => {\n\t\t\telement.classList.add('reveal');\n\t\t\telement.classList.remove('pending');\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\t// There's no point showing the view more button if there isn't much more to view\n\t\tif (commentCount === 0 || commentCount === 1 || commentCount === 2) {\n\t\t\tsetIsExpanded(true);\n\t\t}\n\t}, [commentCount]);\n\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tcss={[positionRelative, revealStyles, !isExpanded && fixHeight]}\n\t\t\t\tclassName=\"discussion\"\n\t\t\t>\n\t\t\t\t<div className=\"pending\">\n\t\t\t\t\t<Hide when=\"above\" breakpoint=\"leftCol\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdata-cy=\"discussion\"\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tpadding-bottom: ${space[2]}px;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SignedInAs\n\t\t\t\t\t\t\t\tpalette={palette}\n\t\t\t\t\t\t\t\tenableDiscussionSwitch={enableDiscussionSwitch}\n\t\t\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\t\t\tcommentCount={commentCount}\n\t\t\t\t\t\t\t\tisClosedForComments={isClosedForComments}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Hide>\n\t\t\t\t\t<Comments\n\t\t\t\t\t\tuser={user}\n\t\t\t\t\t\tbaseUrl={discussionApiUrl}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\tinitialPage={commentPage}\n\t\t\t\t\t\tpageSizeOverride={commentPageSize}\n\t\t\t\t\t\tisClosedForComments={\n\t\t\t\t\t\t\tisClosedForComments || !enableDiscussionSwitch\n\t\t\t\t\t\t}\n\t\t\t\t\t\torderByOverride={commentOrderBy}\n\t\t\t\t\t\tshortUrl={shortUrlId}\n\t\t\t\t\t\tadditionalHeaders={{\n\t\t\t\t\t\t\t'D2-X-UID': discussionD2Uid,\n\t\t\t\t\t\t\t'GU-Client': discussionApiClientHeader,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\texpanded={isExpanded}\n\t\t\t\t\t\tcommentToScrollTo={hashCommentId}\n\t\t\t\t\t\tonPermalinkClick={handlePermalink}\n\t\t\t\t\t\tapiKey=\"dotcom-rendering\"\n\t\t\t\t\t\tonExpand={() => {\n\t\t\t\t\t\t\tsetIsExpanded(true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{!isExpanded && (\n\t\t\t\t\t\t<div id=\"discussion-overlay\" css={overlayStyles} />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{!isExpanded && (\n\t\t\t\t<EditorialButton\n\t\t\t\t\tformat={format}\n\t\t\t\t\tonClick={() => setIsExpanded(true)}\n\t\t\t\t\ticon={<SvgPlus />}\n\t\t\t\t>\n\t\t\t\t\tView more comments\n\t\t\t\t</EditorialButton>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DiscussionContainer.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":63}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getCookie } from '@guardian/libs';\nimport type { Props as DiscussionProps } from './Discussion';\nimport { Discussion } from './Discussion';\nimport { DiscussionWhenSignedIn } from './DiscussionWhenSignedIn';\n\n/**\n * DiscussionContainer\n *\n * A wrapper component that decides if the user is signed in or not.\n *\n * If they\n * are, it renders DiscussionWhenSignedIn which includes an api call to fetch\n * the user profile.\n *\n * If not, it simply renders Discussion\n *\n * We use component composition like this here because you cannoy call react\n * hooks conditionally and we're using a hook to make the fetch request\n *\n * Note. We allow the ...props pattern here because it makes sense when we're\n * just passing them through\n *\n */\n\nexport const DiscussionContainer = (props: DiscussionProps) => {\n\tconst isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\n\tif (isSignedIn) return <DiscussionWhenSignedIn {...props} />;\n\n\treturn <Discussion {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DiscussionLayout.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":23,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":32,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDisplay } from '@guardian/libs';\nimport { from } from '@guardian/source-foundations';\nimport { AdSlot } from './AdSlot';\nimport { ContainerLayout } from './ContainerLayout';\nimport { DiscussionContainer } from './DiscussionContainer.importable';\nimport { DiscussionMeta } from './DiscussionMeta.importable';\nimport { Flex } from './Flex';\nimport { Island } from './Island';\nimport { RightColumn } from './RightColumn';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tdiscussionApiUrl: string;\n\tshortUrlId: string;\n\tdiscussionD2Uid: string;\n\tdiscussionApiClientHeader: string;\n\tenableDiscussionSwitch: boolean;\n\tisAdFreeUser: boolean;\n\tshouldHideAds: boolean;\n};\n\nexport const DiscussionLayout = ({\n\tformat,\n\tdiscussionApiUrl,\n\tshortUrlId,\n\tdiscussionD2Uid,\n\tdiscussionApiClientHeader,\n\tenableDiscussionSwitch,\n\tisAdFreeUser,\n\tshouldHideAds,\n}: Props) => {\n\tconst hideAd = isAdFreeUser || shouldHideAds;\n\treturn (\n\t\t<>\n\t\t\t<ContainerLayout\n\t\t\t\tpadSides={false}\n\t\t\t\tpadContent={false}\n\t\t\t\t// If we're not hiding an advert stretch to the right\n\t\t\t\tstretchRight={!hideAd}\n\t\t\t\tleftContent={\n\t\t\t\t\t<Island clientOnly={true} deferUntil=\"visible\">\n\t\t\t\t\t\t<DiscussionMeta\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tdiscussionApiUrl={discussionApiUrl}\n\t\t\t\t\t\t\tshortUrlId={shortUrlId}\n\t\t\t\t\t\t\tenableDiscussionSwitch={enableDiscussionSwitch}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t}\n\t\t\t\tleftColSize={\n\t\t\t\t\tformat.display === ArticleDisplay.Standard\n\t\t\t\t\t\t? 'wide'\n\t\t\t\t\t\t: 'compact'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Flex>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\t\tpadding-left: 10px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\tmax-width: 100%;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\t\tplaceholderHeight={324}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DiscussionContainer\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tdiscussionApiUrl={discussionApiUrl}\n\t\t\t\t\t\t\t\tshortUrlId={shortUrlId}\n\t\t\t\t\t\t\t\tdiscussionD2Uid={discussionD2Uid}\n\t\t\t\t\t\t\t\tdiscussionApiClientHeader={\n\t\t\t\t\t\t\t\t\tdiscussionApiClientHeader\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tenableDiscussionSwitch={enableDiscussionSwitch}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</div>\n\t\t\t\t\t<>\n\t\t\t\t\t\t{!hideAd && (\n\t\t\t\t\t\t\t<RightColumn>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t\tposition: static;\n\t\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\t\tpadding-left: 20px;\n\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<AdSlot\n\t\t\t\t\t\t\t\t\t\tposition=\"comments\"\n\t\t\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</RightColumn>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</Flex>\n\t\t\t</ContainerLayout>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DiscussionMeta.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { joinUrl } from '@guardian/libs';\nimport { decidePalette } from '../lib/decidePalette';\nimport { useApi } from '../lib/useApi';\nimport { useDiscussion } from '../lib/useDiscussion';\nimport { SignedInAs } from './SignedInAs';\n\nexport type Props = {\n\tformat: ArticleFormat;\n\tdiscussionApiUrl: string;\n\tshortUrlId: string;\n\tenableDiscussionSwitch: boolean;\n};\n\nexport const DiscussionMeta = ({\n\tformat,\n\tdiscussionApiUrl,\n\tshortUrlId,\n\tenableDiscussionSwitch,\n}: Props) => {\n\tconst { commentCount, isClosedForComments } = useDiscussion(\n\t\tjoinUrl(discussionApiUrl, 'discussion', shortUrlId),\n\t);\n\n\tconst { data } = useApi<{ userProfile: UserProfile }>(\n\t\tjoinUrl(discussionApiUrl, 'profile/me?strict_sanctions_check=false'),\n\t\t{},\n\t\t{\n\t\t\tcredentials: 'include',\n\t\t},\n\t);\n\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<SignedInAs\n\t\t\tpalette={palette}\n\t\t\tenableDiscussionSwitch={enableDiscussionSwitch}\n\t\t\tuser={data?.userProfile}\n\t\t\tcommentCount={commentCount}\n\t\t\tisClosedForComments={isClosedForComments}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DiscussionWhenSignedIn.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":6,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":6,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { joinUrl } from '@guardian/libs';\nimport type { Props as DiscussionProps } from 'src/web/components/Discussion';\nimport { useApi } from '../lib/useApi';\nimport { Discussion } from './Discussion';\n\nexport const DiscussionWhenSignedIn = (props: DiscussionProps) => {\n\tconst { discussionApiUrl } = props;\n\tconst { data } = useApi<{ userProfile: UserProfile }>(\n\t\tjoinUrl(discussionApiUrl, 'profile/me?strict_sanctions_check=false'),\n\t\t{},\n\t\t{\n\t\t\tcredentials: 'include',\n\t\t},\n\t);\n\tif (!data) return null;\n\n\treturn <Discussion user={data.userProfile} {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Distribution.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":39,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":39,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":57,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":57,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":75,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":75,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":93,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":93,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Distribution } from './Distribution';\n\nexport default {\n\tcomponent: Distribution,\n\ttitle: 'Components/Distribution',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 300px;\n\t\t\tpadding: 20px;\n\t\t\tbackground: lightgray;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const Basic = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Distribution\n\t\t\t\tleft={{\n\t\t\t\t\tvalue: 29,\n\t\t\t\t\tcolor: '#eb121a',\n\t\t\t\t}}\n\t\t\t\tright={{\n\t\t\t\t\tvalue: 71,\n\t\t\t\t\tcolor: '#e3f45a',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nBasic.story = { name: 'with values adding up to 100' };\n\nexport const Unbalanced = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Distribution\n\t\t\t\tleft={{\n\t\t\t\t\tvalue: 9,\n\t\t\t\t\tcolor: '#a23d45',\n\t\t\t\t}}\n\t\t\t\tright={{\n\t\t\t\t\tvalue: 171,\n\t\t\t\t\tcolor: '#543cde',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nUnbalanced.story = { name: \"with numbers that don't work as percentages\" };\n\nexport const Zero = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Distribution\n\t\t\t\tleft={{\n\t\t\t\t\tvalue: 9,\n\t\t\t\t\tcolor: '#a23d45',\n\t\t\t\t}}\n\t\t\t\tright={{\n\t\t\t\t\tvalue: 0,\n\t\t\t\t\tcolor: '#543cde',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nZero.story = { name: 'with one side set to zero' };\n\nexport const ZeroZero = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Distribution\n\t\t\t\tleft={{\n\t\t\t\t\tvalue: 0,\n\t\t\t\t\tcolor: '#a23d45',\n\t\t\t\t}}\n\t\t\t\tright={{\n\t\t\t\t\tvalue: 0,\n\t\t\t\t\tcolor: '#543cde',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nZeroZero.story = { name: 'with both sides set to zero' };\n\nexport const FiftyFifty = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Distribution\n\t\t\t\tleft={{\n\t\t\t\t\tvalue: 50,\n\t\t\t\t\tcolor: '#a23d45',\n\t\t\t\t}}\n\t\t\t\tright={{\n\t\t\t\t\tvalue: 50,\n\t\t\t\t\tcolor: '#543cde',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nFiftyFifty.story = { name: 'with both sides set to fifty' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Distribution.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":60,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":60,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline, text } from '@guardian/source-foundations';\nimport { isLight } from '../lib/isLight';\n\ntype Props = {\n\tleft: Section;\n\tright: Section;\n};\n\ntype Section = {\n\tvalue: number;\n\tcolor: string;\n};\n\nconst Row = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Bar = ({\n\tdisplayText,\n\tbackground,\n\tposition,\n\twidth,\n}: {\n\tdisplayText: string;\n\tbackground: string;\n\tposition: 'left' | 'right';\n\twidth: number;\n}) => (\n\t<div\n\t\tcss={css`\n\t\t\t${headline.medium({ fontWeight: 'bold' })}\n\t\t\tcolor: ${isLight(background) ? text.ctaSecondary : text.ctaPrimary};\n\t\t\tbackground: ${background};\n\t\t\tflex-grow: ${width};\n\t\t\tline-height: 0.8;\n\n\t\t\tpadding-top: 1px;\n\t\t\tpadding-left: 6px;\n\t\t\tpadding-right: 6px;\n\t\t\tpadding-bottom: 9px;\n\n\t\t\tmargin-right: ${position === 'left' && '1px'};\n\t\t\tmargin-left: ${position === 'right' && '1px'};\n\n\t\t\ttext-align: ${position === 'left' ? 'left' : 'right'};\n\t\t`}\n\t>\n\t\t{displayText}\n\t</div>\n);\n\nexport const Distribution = ({ left, right }: Props) => {\n\treturn (\n\t\t<Row>\n\t\t\t<Bar\n\t\t\t\tposition=\"left\"\n\t\t\t\twidth={left.value === right.value ? 1 : left.value}\n\t\t\t\tdisplayText={left.value.toString()}\n\t\t\t\tbackground={left.color}\n\t\t\t/>\n\t\t\t<Bar\n\t\t\t\tposition=\"right\"\n\t\t\t\twidth={left.value === right.value ? 1 : right.value}\n\t\t\t\tdisplayText={right.value.toString()}\n\t\t\t\tbackground={right.color}\n\t\t\t/>\n\t\t</Row>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DividerBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":20,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { DividerBlockComponent } from './DividerBlockComponent';\nimport { TextBlockComponent } from './TextBlockComponent';\n\nexport default {\n\tcomponent: DividerBlockComponent,\n\ttitle: 'Components/DividerBlockComponent',\n};\n\nconst format = {\n\tdisplay: ArticleDisplay.Standard,\n\tdesign: ArticleDesign.Standard,\n\ttheme: ArticlePillar.News,\n};\n\nconst lorem =\n\t\"<p>I'm baby bespoke neutra austin, banjo affogato man braid cardigan kombucha ugh semiotics letterpress direct trade twee literally tofu. Tousled bitters banjo, messenger bag williamsburg farm-to-table celiac church-key pork belly. Master cleanse af snackwave occupy hashtag offal hexagon squid. Letterpress normcore hoodie, echo park edison bulb poke lyft knausgaard iceland next level fingerstache jianbing af pabst. Iceland semiotics helvetica tumeric schlitz gluten-free taiyaki air plant yuccie single-origin coffee bicycle rights typewriter</p>\";\n\nexport const Default = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tpadding: 20px;\n\t\t\t`}\n\t\t>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={lorem}\n\t\t\t\tformat={format}\n\t\t\t\tisFirstParagraph={true}\n\t\t\t/>\n\t\t\t<DividerBlockComponent />\n\t\t\t<p>Partial (default)</p>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={lorem}\n\t\t\t\tformat={format}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t\t<DividerBlockComponent size=\"full\" />\n\t\t\t<p>Full</p>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={lorem}\n\t\t\t\tformat={format}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nDefault.story = { name: 'default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DividerBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":44,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":47,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { border, from, space } from '@guardian/source-foundations';\n\ntype Props = {\n\tsize?: 'full' | 'partial';\n\tspaceAbove?: 'tight' | 'loose';\n};\n\nconst baseStyles = css`\n\theight: 1px;\n\tborder: 0;\n\tmargin-bottom: 3px;\n\tbackground-color: ${border.secondary};\n`;\nconst sizeFullStyle = css`\n\twidth: 100%;\n\t${from.tablet} {\n\t\tmargin-left: -20px;\n\t\twidth: calc(100% + 20px);\n\t}\n\t${from.leftCol} {\n\t\tmargin-left: -10px;\n\t\twidth: calc(100% + 10px);\n\t}\n`;\nconst sizePartialStyle = css`\n\twidth: 150px;\n\tmargin-left: 0px;\n\t${from.tablet} {\n\t\tmargin-left: -20px;\n\t}\n\t${from.leftCol} {\n\t\tmargin-left: -10px;\n\t}\n`;\n\nconst tightSpaceAboveStyle = css`\n\tmargin-top: ${space[6]}px;\n`;\nconst looseSpaceAboveStyle = css`\n\tmargin-top: ${space[12]}px;\n`;\n\nexport const DividerBlockComponent = ({\n\tsize = 'partial',\n\tspaceAbove = 'loose',\n}: Props) => (\n\t<hr\n\t\tcss={[\n\t\t\tbaseStyles,\n\t\t\tsize === 'partial' ? sizePartialStyle : sizeFullStyle,\n\t\t\tspaceAbove === 'loose'\n\t\t\t\t? looseSpaceAboveStyle\n\t\t\t\t: tightSpaceAboveStyle,\n\t\t]}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DocumentBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":17,"column":3,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":24,"endColumn":4,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[404,596],"text":"embedUrl?.replace(\n\t\t\tnew RegExp(\n\t\t\t\t'https://embed.documentcloud.org/documents/([0-9]+)-([^/]+).*',\n\t\t\t\t'g',\n\t\t\t),\n\t\t\t'https://assets.documentcloud.org/documents/$1/$2.pdf',\n\t\t)"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":40,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { LinkButton } from '@guardian/source-react-components';\nimport { ClickToView } from './ClickToView';\n\nconst widthOverride = css`\n\tiframe {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tmin-width: 300px !important;\n\t\tmax-width: 100%;\n\t}\n`;\n\nexport const getDocumentCloudAssetUrl = (\n\tembedUrl?: string,\n): string | undefined => {\n\treturn (\n\t\tembedUrl &&\n\t\tembedUrl.replace(\n\t\t\tnew RegExp(\n\t\t\t\t'https://embed.documentcloud.org/documents/([0-9]+)-([^/]+).*',\n\t\t\t\t'g',\n\t\t\t),\n\t\t\t'https://assets.documentcloud.org/documents/$1/$2.pdf',\n\t\t)\n\t);\n};\n\ntype Props = {\n\tembedUrl?: string;\n\theight: number;\n\tisMainMedia: boolean;\n\tisTracking: boolean;\n\trole?: RoleType;\n\tsource?: string;\n\tsourceDomain?: string;\n\ttitle?: string;\n\twidth: number;\n};\n\nexport const DocumentBlockComponent = ({\n\tembedUrl,\n\theight,\n\tisMainMedia,\n\tisTracking,\n\trole,\n\tsource,\n\tsourceDomain,\n\ttitle,\n\twidth,\n}: Props) => {\n\treturn (\n\t\t<ClickToView\n\t\t\trole={role}\n\t\t\tisTracking={isTracking}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tsource={source}\n\t\t\tsourceDomain={sourceDomain}\n\t\t>\n\t\t\t<div css={widthOverride}>\n\t\t\t\t<iframe\n\t\t\t\t\tsrc={embedUrl}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\theight={height}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tallowFullScreen={true}\n\t\t\t\t\tdata-cy=\"document-embed\"\n\t\t\t\t/>\n\t\t\t\t{source === 'DocumentCloud' ? (\n\t\t\t\t\t<LinkButton\n\t\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\thref={getDocumentCloudAssetUrl(embedUrl)}\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\tdownload={true}\n\t\t\t\t\t>\n\t\t\t\t\t\tDownload original document\n\t\t\t\t\t</LinkButton>\n\t\t\t\t) : (\n\t\t\t\t\t<></>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</ClickToView>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DocumentBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":20,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { DocumentBlockComponent } from './DocumentBlockComponent.importable';\n\nexport default {\n\tcomponent: DocumentBlockComponent,\n\ttitle: 'Components/DocumentBlockComponent',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmax-width: 620px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const documentEmbed = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>Scribd Document</p>\n\t\t\t<DocumentBlockComponent\n\t\t\t\tembedUrl=\"https://www.scribd.com/embeds/431975393/content\"\n\t\t\t\theight={613}\n\t\t\t\twidth={460}\n\t\t\t\ttitle=\"\"\n\t\t\t\tisTracking={false}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<p>DocumentCloud Document</p>\n\t\t\t<DocumentBlockComponent\n\t\t\t\tembedUrl=\"https://embed.documentcloud.org/documents/20417938-test-pdf\"\n\t\t\t\theight={700}\n\t\t\t\twidth={990}\n\t\t\t\ttitle=\"TEST PDF (Hosted by DocumentCloud)\"\n\t\t\t\tsource=\"DocumentCloud\"\n\t\t\t\tisTracking={false}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\ndocumentEmbed.story = { name: 'document embed' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DocumentBlockComponent.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Doughnut.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":72,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":72,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":81,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":81,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":90,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":90,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":99,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":99,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":108,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":108,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Doughnut } from './Doughnut';\n\nexport default {\n\tcomponent: Doughnut,\n\ttitle: 'Components/Doughnut',\n};\n\nconst ninetyNineToOne = [\n\t{\n\t\tvalue: 99,\n\t\tlabel: 'Dat1',\n\t\tcolor: '#ce070c ',\n\t},\n\t{\n\t\tvalue: 1,\n\t\tlabel: 'Dat2',\n\t\tcolor: '#ea770d ',\n\t},\n];\n\nconst oneSection = [\n\t{\n\t\tvalue: 100,\n\t\tlabel: 'All',\n\t\tcolor: '#FFE500',\n\t},\n];\n\nconst twoSections = [\n\t{\n\t\tvalue: 29,\n\t\tlabel: 'Dat1',\n\t\tcolor: '#9fe111',\n\t},\n\t{\n\t\tvalue: 71,\n\t\tlabel: 'Dat2',\n\t\tcolor: '#ce070c ',\n\t},\n];\n\nconst threeSections = [\n\t{\n\t\tvalue: 29,\n\t\tlabel: 'Dat1',\n\t\tcolor: '#eb199a',\n\t},\n\t{\n\t\tvalue: 51,\n\t\tlabel: 'Dat2',\n\t\tcolor: '#ce070c ',\n\t},\n\t{\n\t\tvalue: 20,\n\t\tlabel: 'Dat3',\n\t\tcolor: '#ce770c ',\n\t},\n];\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 620px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const NinetyNineToOne = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Doughnut sections={ninetyNineToOne} />\n\t\t</Container>\n\t);\n};\nNinetyNineToOne.story = { name: 'with one section at 99 and the other at 1' };\n\nexport const One = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Doughnut sections={oneSection} />\n\t\t</Container>\n\t);\n};\nOne.story = { name: 'with one section' };\n\nexport const Two = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Doughnut sections={twoSections} />\n\t\t</Container>\n\t);\n};\nTwo.story = { name: 'with two sections' };\n\nexport const Three = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Doughnut sections={threeSections} />\n\t\t</Container>\n\t);\n};\nThree.story = { name: 'with three sections' };\n\nexport const Smaller = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Doughnut sections={twoSections} percentCutout={20} size={200} />\n\t\t</Container>\n\t);\n};\nSmaller.story = { name: 'with props used to change size' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Doughnut.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Doughnut.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":40,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline, text, textSans } from '@guardian/source-foundations';\nimport { isLight } from '../lib/isLight';\n\ntype Props = {\n\tsections: Section[];\n\tpercentCutout?: number;\n\tsize?: number;\n};\n\ntype Section = {\n\tlabel: string;\n\tvalue: number;\n\tcolor: string;\n};\n\n/** set decimal places */\nconst PRECISION = 6;\n\nconst unitStyles = css`\n\t${headline.medium({ fontWeight: 'bold' })}\n\ttext-anchor: middle;\n`;\n\nconst valueStyles = (background: string) => css`\n\t${headline.small({ fontWeight: 'bold' })}\n\tfill: ${isLight(background) ? text.ctaSecondary : text.ctaPrimary};\n\ttext-anchor: middle;\n`;\n\nconst labelStyles = (background: string) => css`\n\t${textSans.small()}\n\tfill: ${isLight(background) ? text.ctaSecondary : text.ctaPrimary};\n\ttext-anchor: middle;\n`;\n\nconst withoutZeroSections = (sections: Section[]) =>\n\tsections.filter((section) => section.value !== 0);\n\nexport const Doughnut = ({\n\tsections,\n\tpercentCutout = 35,\n\tsize = 300,\n}: Props) => {\n\t// TODO: Support displaying 0% for sections where value is zero\n\t// We handle these at the moment by filtering them out using withoutZeroSections()\n\n\tconst outerRadius = size / 2;\n\tconst innerRadius = outerRadius * (percentCutout / 100);\n\tconst radius = (innerRadius + outerRadius) / 2;\n\n\tconst totalValue = sections\n\t\t.map((section) => section.value)\n\t\t.reduce((runningTotal, currentValue) => runningTotal + currentValue);\n\n\t/** τ = 2π https://en.wikipedia.org/wiki/Turn_(angle)#Tau_proposals */\n\tconst tau = Math.PI * 2;\n\tconst quarterTurn = Math.PI / 2;\n\n\tconst center = size / 2;\n\n\t// Segments\n\tconst segments: {\n\t\tdasharray: string;\n\t\tdashoffset: string;\n\t\tcolor: string;\n\t\ttransform: string;\n\t\tlabel: string;\n\t\tvalue: number;\n\t}[] = [];\n\n\tlet angleStart = -quarterTurn;\n\tfor (const { color, label, value } of withoutZeroSections(sections)) {\n\t\tconst angleLength = (value / totalValue) * tau;\n\n\t\tconst angleEnd = angleStart + angleLength;\n\t\tconst angleMid = angleStart + angleLength / 2;\n\n\t\tconst dasharray = [angleLength * radius, (tau - angleLength) * radius]\n\t\t\t.map((dash) => dash.toFixed(PRECISION))\n\t\t\t.join(',');\n\t\t/**\n\t\t * The offset is turned one quarter and rotated\n\t\t * with a transform to keep the top join as crisp\n\t\t * as possible.\n\t\t */\n\t\tconst dashoffset = (-(quarterTurn + angleStart) * radius).toFixed(\n\t\t\tPRECISION,\n\t\t);\n\n\t\tsegments.push({\n\t\t\tdasharray,\n\t\t\tdashoffset,\n\t\t\tlabel,\n\t\t\tvalue,\n\t\t\ttransform: [\n\t\t\t\t'translate(',\n\t\t\t\t(Math.cos(angleMid) * radius + center).toFixed(PRECISION),\n\t\t\t\t', ',\n\t\t\t\t(Math.sin(angleMid) * radius + center).toFixed(PRECISION),\n\t\t\t\t')',\n\t\t\t].join(''),\n\t\t\tcolor,\n\t\t});\n\n\t\tangleStart = angleEnd;\n\t}\n\n\treturn (\n\t\t<svg width={size} height={size} viewBox={`0 0 ${size} ${size}`}>\n\t\t\t{segments.map((segment) => (\n\t\t\t\t<g>\n\t\t\t\t\t<circle\n\t\t\t\t\t\tcx={center}\n\t\t\t\t\t\tcy={center}\n\t\t\t\t\t\tr={radius}\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke={segment.color}\n\t\t\t\t\t\tstrokeWidth={outerRadius - innerRadius}\n\t\t\t\t\t\tstrokeDasharray={segment.dasharray}\n\t\t\t\t\t\tstrokeDashoffset={segment.dashoffset}\n\t\t\t\t\t\t// rotate back a quarter turn\n\t\t\t\t\t\ttransform={`rotate(-90 ${center} ${center})`}\n\t\t\t\t\t/>\n\t\t\t\t\t<text transform={segment.transform}>\n\t\t\t\t\t\t<tspan css={labelStyles(segment.color)} x=\"0\" dy=\"0\">\n\t\t\t\t\t\t\t{segment.label}\n\t\t\t\t\t\t</tspan>\n\t\t\t\t\t\t<tspan css={valueStyles(segment.color)} x=\"0\" dy=\".9em\">\n\t\t\t\t\t\t\t{segment.value}\n\t\t\t\t\t\t</tspan>\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\t\t\t))}\n\t\t\t<text\n\t\t\t\tcss={unitStyles}\n\t\t\t\ttransform={`translate(${center}, ${center})`}\n\t\t\t\tdy=\"0.4em\"\n\t\t\t>\n\t\t\t\t%\n\t\t\t</text>\n\t\t</svg>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DropCap.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":48,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":48,"endColumn":54}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { headline, space } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tletter: string;\n\tformat: ArticleFormat;\n};\n\nconst outerStyles = (palette: Palette) => css`\n\t${headline.large({\n\t\tfontWeight: 'light',\n\t})}\n\tfloat: left;\n\ttext-transform: uppercase;\n\tbox-sizing: border-box;\n\tmargin-right: ${space[1]}px;\n\tcolor: ${palette.text.dropCap};\n`;\n\nconst innerStyles = (format: ArticleFormat) => {\n\tconst baseStyles = css`\n\t\t${headline.large({ fontWeight: 'bold' })}\n\t\tfont-size: 118px;\n\t\tline-height: 99px;\n\t\tvertical-align: text-top;\n\t\tpointer-events: none;\n\t\tmargin-right: ${space[1]}px;\n\t`;\n\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Editorial:\n\t\tcase ArticleDesign.Letter:\n\t\tcase ArticleDesign.Comment:\n\t\t\treturn css`\n\t\t\t\t${baseStyles};\n\t\t\t\tfont-weight: 200;\n\t\t\t`;\n\t\tdefault:\n\t\t\treturn css`\n\t\t\t\t${baseStyles};\n\t\t\t\tfont-weight: 700;\n\t\t\t`;\n\t}\n};\n\nexport const DropCap = ({ letter, format }: Props) => {\n\tconst palette = decidePalette(format);\n\treturn (\n\t\t<span css={outerStyles(palette)}>\n\t\t\t<span css={innerStyles(format)}>{letter}</span>\n\t\t</span>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Dropcap.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":22,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":52,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":52,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":82,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":82,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":112,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":112,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":142,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":142,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":172,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":172,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":202,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":202,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":232,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":232,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { body } from '@guardian/source-foundations';\nimport { DropCap } from './DropCap';\n\nexport default {\n\tcomponent: DropCap,\n\ttitle: 'Components/DropCap',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 620px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const Article = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p\n\t\t\t\tcss={css`\n\t\t\t\t\t${body.medium()};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<DropCap\n\t\t\t\t\tletter=\"T\"\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\there once was a dropcap. Lorem ipsum dolor sit amet, consectetur\n\t\t\t\tadipiscing elit, sed do eiusmod tempor incididunt ut labore et\n\t\t\t\tdolore magna aliqua. Ut enim ad minim veniam, quis nostrud\n\t\t\t\texercitation ullamco laboris nisi ut aliquip ex ea commodo\n\t\t\t\tconsequat. Duis aute irure dolor in reprehenderit in voluptate\n\t\t\t\tvelit esse cillum dolore eu fugiat nulla pariatur. Excepteur\n\t\t\t\tsint occaecat cupidatat non proident, sunt in culpa qui officia\n\t\t\t\tdeserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nArticle.story = { name: 'Article | news' };\n\nexport const OpinionArticle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p\n\t\t\t\tcss={css`\n\t\t\t\t\t${body.medium()};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<DropCap\n\t\t\t\t\tletter=\"L\"\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\tong, long ago, there lived a dropcap. Lorem ipsum dolor sit\n\t\t\t\tamet, consectetur adipiscing elit, sed do eiusmod tempor\n\t\t\t\tincididunt ut labore et dolore magna aliqua. Ut enim ad minim\n\t\t\t\tveniam, quis nostrud exercitation ullamco laboris nisi ut\n\t\t\t\taliquip ex ea commodo consequat. Duis aute irure dolor in\n\t\t\t\treprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nOpinionArticle.story = { name: 'Article | opinion' };\n\nexport const Feature = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p\n\t\t\t\tcss={css`\n\t\t\t\t\t${body.medium()};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<DropCap\n\t\t\t\t\tletter=\"O\"\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\tnce upon a time there was a dropcap. Lorem ipsum dolor sit amet,\n\t\t\t\tconsectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n\t\t\t\tlabore et dolore magna aliqua. Ut enim ad minim veniam, quis\n\t\t\t\tnostrud exercitation ullamco laboris nisi ut aliquip ex ea\n\t\t\t\tcommodo consequat. Duis aute irure dolor in reprehenderit in\n\t\t\t\tvoluptate velit esse cillum dolore eu fugiat nulla pariatur.\n\t\t\t\tExcepteur sint occaecat cupidatat non proident, sunt in culpa\n\t\t\t\tqui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nFeature.story = { name: 'Feature | culture' };\n\nexport const PhotoEssay = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p\n\t\t\t\tcss={css`\n\t\t\t\t\t${body.medium()};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<DropCap\n\t\t\t\t\tletter=\"O\"\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdesign: ArticleDesign.PhotoEssay,\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\tnce upon a time there was a dropcap. Lorem ipsum dolor sit amet,\n\t\t\t\tconsectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n\t\t\t\tlabore et dolore magna aliqua. Ut enim ad minim veniam, quis\n\t\t\t\tnostrud exercitation ullamco laboris nisi ut aliquip ex ea\n\t\t\t\tcommodo consequat. Duis aute irure dolor in reprehenderit in\n\t\t\t\tvoluptate velit esse cillum dolore eu fugiat nulla pariatur.\n\t\t\t\tExcepteur sint occaecat cupidatat non proident, sunt in culpa\n\t\t\t\tqui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nPhotoEssay.story = { name: 'PhotoEssay | sport' };\n\nexport const Interview = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p\n\t\t\t\tcss={css`\n\t\t\t\t\t${body.medium()};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<DropCap\n\t\t\t\t\tletter=\"O\"\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdesign: ArticleDesign.Interview,\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\tnce upon a time there was a dropcap. Lorem ipsum dolor sit amet,\n\t\t\t\tconsectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n\t\t\t\tlabore et dolore magna aliqua. Ut enim ad minim veniam, quis\n\t\t\t\tnostrud exercitation ullamco laboris nisi ut aliquip ex ea\n\t\t\t\tcommodo consequat. Duis aute irure dolor in reprehenderit in\n\t\t\t\tvoluptate velit esse cillum dolore eu fugiat nulla pariatur.\n\t\t\t\tExcepteur sint occaecat cupidatat non proident, sunt in culpa\n\t\t\t\tqui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nInterview.story = { name: 'Interview | lifestyle' };\n\nexport const Comment = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p\n\t\t\t\tcss={css`\n\t\t\t\t\t${body.medium()};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<DropCap\n\t\t\t\t\tletter=\"O\"\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\tnce upon a time there was a dropcap. Lorem ipsum dolor sit amet,\n\t\t\t\tconsectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n\t\t\t\tlabore et dolore magna aliqua. Ut enim ad minim veniam, quis\n\t\t\t\tnostrud exercitation ullamco laboris nisi ut aliquip ex ea\n\t\t\t\tcommodo consequat. Duis aute irure dolor in reprehenderit in\n\t\t\t\tvoluptate velit esse cillum dolore eu fugiat nulla pariatur.\n\t\t\t\tExcepteur sint occaecat cupidatat non proident, sunt in culpa\n\t\t\t\tqui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nComment.story = { name: 'Comment | opinion' };\n\nexport const CommentSport = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p\n\t\t\t\tcss={css`\n\t\t\t\t\t${body.medium()};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<DropCap\n\t\t\t\t\tletter=\"O\"\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\tnce upon a time there was a dropcap. Lorem ipsum dolor sit amet,\n\t\t\t\tconsectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n\t\t\t\tlabore et dolore magna aliqua. Ut enim ad minim veniam, quis\n\t\t\t\tnostrud exercitation ullamco laboris nisi ut aliquip ex ea\n\t\t\t\tcommodo consequat. Duis aute irure dolor in reprehenderit in\n\t\t\t\tvoluptate velit esse cillum dolore eu fugiat nulla pariatur.\n\t\t\t\tExcepteur sint occaecat cupidatat non proident, sunt in culpa\n\t\t\t\tqui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nCommentSport.story = { name: 'Comment | sport' };\n\nexport const CommentCulture = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p\n\t\t\t\tcss={css`\n\t\t\t\t\t${body.medium()};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<DropCap\n\t\t\t\t\tletter=\"O\"\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\tnce upon a time there was a dropcap. Lorem ipsum dolor sit amet,\n\t\t\t\tconsectetur adipiscing elit, sed do eiusmod tempor incididunt ut\n\t\t\t\tlabore et dolore magna aliqua. Ut enim ad minim veniam, quis\n\t\t\t\tnostrud exercitation ullamco laboris nisi ut aliquip ex ea\n\t\t\t\tcommodo consequat. Duis aute irure dolor in reprehenderit in\n\t\t\t\tvoluptate velit esse cillum dolore eu fugiat nulla pariatur.\n\t\t\t\tExcepteur sint occaecat cupidatat non proident, sunt in culpa\n\t\t\t\tqui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nCommentCulture.story = { name: 'Comment | culture' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Dropdown.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":74,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":74,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":88,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":88,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brandBackground } from '@guardian/source-foundations';\nimport { Dropdown } from './Dropdown';\n\nconst Header = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\theight: 300px;\n\t\t\twidth: 100%;\n\t\t\tbackground-color: ${brandBackground.primary};\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Nav = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\theight: 20px;\n\t\t\tposition: absolute;\n\t\t\ttop: 10px;\n\t\t\tdisplay: block;\n\t\t\tright: 258px;\n\t\t\twidth: 197px;\n\t\t\tz-index: 1072;\n\t\t\ttransform: translateX(100%);\n\t\t\tpadding-top: 7px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst links = [\n\t{\n\t\turl: '/preference/edition/uk',\n\t\ttitle: 'UK edition',\n\t\tisActive: true,\n\t\tdataLinkName: 'linkname-UK',\n\t},\n\t{\n\t\turl: '/preference/edition/us',\n\t\ttitle: 'US edition',\n\t\tdataLinkName: 'linkname-US',\n\t},\n\t{\n\t\turl: '/preference/edition/au',\n\t\ttitle: 'Australian edition',\n\t\tdataLinkName: 'linkname-AU',\n\t},\n\t{\n\t\turl: '/preference/edition/int',\n\t\ttitle: 'International edition',\n\t\tdataLinkName: 'linkname-INT',\n\t},\n];\n\nconst linksWithNoneActive = [\n\t{\n\t\t...links[0],\n\t\tisActive: false,\n\t},\n\t{ ...links[1] },\n\t{ ...links[2] },\n\t{ ...links[3] },\n];\n\nexport default {\n\tcomponent: Dropdown,\n\ttitle: 'Components/Dropdown',\n};\n\nexport const DropdownActive = () => (\n\t<Header>\n\t\t<Nav>\n\t\t\t<Dropdown\n\t\t\t\tid=\"d1\"\n\t\t\t\tlabel=\"UK edition\"\n\t\t\t\tlinks={links}\n\t\t\t\tdataLinkName=\"linkname1\"\n\t\t\t/>\n\t\t</Nav>\n\t</Header>\n);\nDropdownActive.story = { name: 'Dropdown with first item active' };\n\nexport const DropdownNoActive = () => (\n\t<Header>\n\t\t<Nav>\n\t\t\t<Dropdown\n\t\t\t\tid=\"d2\"\n\t\t\t\tlabel=\"UK edition\"\n\t\t\t\tlinks={linksWithNoneActive}\n\t\t\t\tdataLinkName=\"linkname2\"\n\t\t\t/>\n\t\t</Nav>\n\t</Header>\n);\nDropdownNoActive.story = { name: 'Dropdown with nothing active' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Dropdown.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Dropdown.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":136,"column":25,"nodeType":"Punctuator","messageId":"preferNullish","endLine":136,"endColumn":27,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2520,2522],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":174,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":181,"endColumn":13},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":275,"column":6,"nodeType":"JSXElement","messageId":"missingType","endLine":286,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tborder,\n\tbrandAlt,\n\tbrandText,\n\tfrom,\n\tneutral,\n\tnews,\n\ttext,\n\ttextSans,\n\tuntil,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport { useEffect, useState } from 'react';\nimport { getZIndex } from '../lib/getZIndex';\n\nexport interface DropdownLinkType {\n\turl: string;\n\ttitle: string;\n\tisActive?: boolean;\n\tdataLinkName: string;\n}\n\ninterface Props {\n\tid: string;\n\tlabel: string;\n\tlinks: DropdownLinkType[];\n\tdataLinkName: string;\n\toverrideColor?: string;\n\tchildren?: React.ReactNode;\n}\n\nconst ulStyles = css`\n\t${getZIndex('dropdown')}\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tbackground-color: white;\n\tpadding: 6px 0;\n\tbox-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n\n\t${until.tablet} {\n\t\tposition: fixed;\n\t\tborder-radius: 0;\n\t\ttop: 32px;\n\t\tleft: 0;\n\t\tright: 0;\n\t\twidth: auto;\n\t\tmax-height: calc(100% - 50px);\n\t\toverflow: auto;\n\t}\n\n\t${from.tablet} {\n\t\tposition: absolute;\n\t\tright: 0;\n\t\twidth: 200px;\n\t\tborder-radius: 3px;\n\t}\n`;\n\nconst displayBlock = css`\n\tdisplay: block;\n`;\n\nconst displayNone = css`\n\tdisplay: none;\n`;\n\nconst linkStyles = css`\n\t${textSans.small()};\n\tcolor: ${text.anchorSecondary};\n\tposition: relative;\n\ttransition: color 80ms ease-out;\n\tmargin: -1px 0 0 0;\n\ttext-decoration: none;\n\tdisplay: block;\n\tpadding: 10px 18px 15px 30px;\n\n\t:hover {\n\t\tbackground-color: ${neutral[93]};\n\t\ttext-decoration: none;\n\t}\n\n\t:focus {\n\t\ttext-decoration: underline;\n\t}\n\n\t:before {\n\t\tcontent: '';\n\t\tborder-top: 1px solid ${border.secondary};\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\ttop: 0px;\n\t\tleft: 30px;\n\t\tright: 0px;\n\t}\n`;\n\nconst linkActive = css`\n\tfont-weight: bold;\n\n\t:after {\n\t\tcontent: '';\n\t\tborder: 2px solid ${news[400]};\n\t\tborder-top: 0px;\n\t\tborder-right: 0px;\n\t\tposition: absolute;\n\t\ttop: 19px;\n\t\tleft: 12px;\n\t\twidth: 10px;\n\t\theight: 4px;\n\t\ttransform: rotate(-45deg);\n\t}\n`;\n\nconst linkFirst = css`\n\t:before {\n\t\tcontent: none;\n\t}\n`;\n\nconst buttonStyles = (overrideColor?: string) => css`\n\t${textSans.medium()};\n\tdisplay: block;\n\tcursor: pointer;\n\tbackground: none;\n\tborder: none;\n\t/* Design System: The buttons should be components that handle their own layout using primitives  */\n\tline-height: 1.2;\n\tcolor: ${overrideColor || brandText.primary};\n\ttransition: color 80ms ease-out;\n\tpadding: 0px 10px 6px 5px;\n\tmargin: 1px 0 0;\n\ttext-decoration: none;\n\n\t:hover {\n\t\tcolor: ${brandAlt[400]};\n\n\t\t:after {\n\t\t\ttransform: translateY(0) rotate(45deg);\n\t\t}\n\t}\n\n\t:after {\n\t\tcontent: '';\n\t\tdisplay: inline-block;\n\t\twidth: 5px;\n\t\theight: 5px;\n\t\ttransform: translateY(-2px) rotate(45deg);\n\t\tborder: 1px solid currentColor;\n\t\tborder-left: transparent;\n\t\tborder-top: transparent;\n\t\tmargin-left: 5px;\n\t\tvertical-align: middle;\n\t\ttransition: transform 250ms ease-out;\n\t}\n`;\n\nconst buttonExpanded = css`\n\t:hover:after {\n\t\ttransform: translateY(-1px) rotate(-135deg);\n\t}\n\t:after {\n\t\ttransform: translateY(1px) rotate(-135deg);\n\t}\n`;\n\nexport const Dropdown = ({\n\tid,\n\tlabel,\n\tlinks,\n\tdataLinkName,\n\toverrideColor,\n\tchildren,\n}: Props) => {\n\tconst [isExpanded, setIsExpanded] = useState(false);\n\tconst [noJS, setNoJS] = useState(true);\n\n\tuseEffect(() => {\n\t\t// If hook runs we know client-side JS is enabled\n\t\tsetNoJS(false);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconst dismissOnEsc = (event: KeyboardEvent) => {\n\t\t\tif (isExpanded && event.code === 'Escape') {\n\t\t\t\tsetIsExpanded(false);\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('keydown', dismissOnEsc, false);\n\n\t\t// Remove listener on unmount\n\t\treturn () => document.removeEventListener('keydown', dismissOnEsc);\n\t}, [isExpanded]);\n\n\tuseEffect(() => {\n\t\tconst dismissOnClick = (event: MouseEvent) => {\n\t\t\tif (isExpanded) {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tsetIsExpanded(false);\n\t\t\t}\n\t\t};\n\n\t\tdocument.addEventListener('click', dismissOnClick, false);\n\n\t\t// Remove listener on unmount\n\t\treturn () => document.removeEventListener('click', dismissOnClick);\n\t}, [isExpanded]);\n\n\tconst handleToggle = () => setIsExpanded(!isExpanded);\n\n\t// needs to be unique to allow multiple dropdowns on same page\n\tconst dropdownID = `dropbox-id-${id}`;\n\tconst checkboxID = `checkbox-id-${id}`;\n\n\treturn (\n\t\t<>\n\t\t\t{noJS ? (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${`#${checkboxID}`} {\n\t\t\t\t\t\t\t/* Never show the input */\n\t\t\t\t\t\t\t${visuallyHidden}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t${`#${dropdownID}`} {\n\t\t\t\t\t\t\t/* Hide caption by default */\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* stylelint-disable-next-line selector-type-no-unknown */\n\t\t\t\t\t\t${`#${checkboxID}`}:checked + ${`#${dropdownID}`} {\n\t\t\t\t\t\t\t/* Show the caption if the input is checked */\n\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor={checkboxID}\n\t\t\t\t\t\tcss={buttonStyles(overrideColor)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\tid={checkboxID}\n\t\t\t\t\t\taria-checked=\"false\"\n\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t/>\n\t\t\t\t\t<ul id={dropdownID} css={ulStyles}>\n\t\t\t\t\t\t{links.map((l, index) => (\n\t\t\t\t\t\t\t<li key={l.title}>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={l.url}\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tlinkStyles,\n\t\t\t\t\t\t\t\t\t\t!!l.isActive && linkActive,\n\t\t\t\t\t\t\t\t\t\tindex === 0 && linkFirst,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\tdata-link-name={l.dataLinkName}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{l.title}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={handleToggle}\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tbuttonStyles(overrideColor),\n\t\t\t\t\t\t\tisExpanded && buttonExpanded,\n\t\t\t\t\t\t]}\n\t\t\t\t\t\taria-expanded={isExpanded ? 'true' : 'false'}\n\t\t\t\t\t\tdata-link-name={dataLinkName}\n\t\t\t\t\t\tdata-cy=\"dropdown-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</button>\n\t\t\t\t\t<div css={isExpanded ? displayBlock : displayNone}>\n\t\t\t\t\t\t{children ? (\n\t\t\t\t\t\t\t<>{children}</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<ul css={ulStyles} data-cy=\"dropdown-options\">\n\t\t\t\t\t\t\t\t{links.map((l, index) => (\n\t\t\t\t\t\t\t\t\t<li key={l.title}>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={l.url}\n\t\t\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\t\t\tlinkStyles,\n\t\t\t\t\t\t\t\t\t\t\t\t!!l.isActive && linkActive,\n\t\t\t\t\t\t\t\t\t\t\t\tindex === 0 && linkFirst,\n\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\tdata-link-name={l.dataLinkName}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{l.title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DynamicFast.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { breakpoints } from '@guardian/source-foundations';\nimport { trails } from '../../../fixtures/manual/trails';\nimport { ContainerLayout } from './ContainerLayout';\nimport { DynamicFast } from './DynamicFast';\n\nexport default {\n\tcomponent: DynamicFast,\n\ttitle: 'Components/DynamicFast',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t\tbreakpoints.tablet,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t\tbreakpoints.leftCol,\n\t\t\t\tbreakpoints.wide,\n\t\t\t],\n\t\t},\n\t},\n};\n\nexport const Default = () => (\n\t<ContainerLayout\n\t\ttitle=\"DynamicFast\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t>\n\t\t<DynamicFast trails={trails} showAge={true} />\n\t</ContainerLayout>\n);\nDefault.story = {\n\tname: 'DynamicFast',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DynamicFast.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":77}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { UL } from './Card/components/UL';\n\ntype Props = {\n\ttrails: TrailType[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n};\n\nexport const DynamicFast = ({ trails, containerPalette, showAge }: Props) => {\n\tconst primary = trails[0];\n\tconst secondary = trails[1];\n\tconst bigCards = trails.slice(2, 4);\n\tconst smallCards = trails.slice(4, 10);\n\n\treturn (\n\t\t<>\n\t\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t\t<LI padSides={true} percentage=\"75%\">\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tlinkTo={primary.url}\n\t\t\t\t\t\tformat={primary.format}\n\t\t\t\t\t\theadlineText={primary.headline}\n\t\t\t\t\t\ttrailText={primary.trailText}\n\t\t\t\t\t\theadlineSize=\"large\"\n\t\t\t\t\t\tbyline={primary.byline}\n\t\t\t\t\t\tshowByline={primary.showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={primary.webPublicationDate}\n\t\t\t\t\t\tkickerText={primary.kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={primary.image}\n\t\t\t\t\t\timagePosition=\"right\"\n\t\t\t\t\t\timagePositionOnMobile=\"top\"\n\t\t\t\t\t\timageSize=\"large\"\n\t\t\t\t\t\tmediaType={primary.mediaType}\n\t\t\t\t\t\tmediaDuration={primary.mediaDuration}\n\t\t\t\t\t\tcommentCount={primary.commentCount}\n\t\t\t\t\t\tstarRating={primary.starRating}\n\t\t\t\t\t\tbranding={primary.branding}\n\t\t\t\t\t\tsupportingContent={primary.supportingContent}\n\t\t\t\t\t\tdataLinkName={primary.dataLinkName}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t\t<LI\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tshowTopMarginWhenStacked={true}\n\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tlinkTo={secondary.url}\n\t\t\t\t\t\tformat={secondary.format}\n\t\t\t\t\t\theadlineText={secondary.headline}\n\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\tbyline={secondary.byline}\n\t\t\t\t\t\tshowByline={secondary.showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={secondary.webPublicationDate}\n\t\t\t\t\t\tkickerText={secondary.kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={secondary.image}\n\t\t\t\t\t\tmediaType={secondary.mediaType}\n\t\t\t\t\t\tmediaDuration={secondary.mediaDuration}\n\t\t\t\t\t\tcommentCount={secondary.commentCount}\n\t\t\t\t\t\tstarRating={secondary.starRating}\n\t\t\t\t\t\tbranding={secondary.branding}\n\t\t\t\t\t\tsupportingContent={secondary.supportingContent}\n\t\t\t\t\t\tdataLinkName={secondary.dataLinkName}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t</UL>\n\t\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t\t{bigCards.map((card, cardIndex) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<LI\n\t\t\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\t\tpadBottom={false}\n\t\t\t\t\t\t\tshowTopMarginWhenStacked={cardIndex > 0}\n\t\t\t\t\t\t\tshowDivider={cardIndex > 0}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\t\t\tlinkTo={card.url}\n\t\t\t\t\t\t\t\tformat={card.format}\n\t\t\t\t\t\t\t\theadlineText={card.headline}\n\t\t\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\t\t\tbyline={card.byline}\n\t\t\t\t\t\t\t\tshowByline={card.showByline}\n\t\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\t\t\tcard.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twebPublicationDate={card.webPublicationDate}\n\t\t\t\t\t\t\t\tkickerText={card.kickerText}\n\t\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\t\timageUrl={card.image}\n\t\t\t\t\t\t\t\tmediaType={card.mediaType}\n\t\t\t\t\t\t\t\tmediaDuration={card.mediaDuration}\n\t\t\t\t\t\t\t\tcommentCount={card.commentCount}\n\t\t\t\t\t\t\t\tstarRating={card.starRating}\n\t\t\t\t\t\t\t\tbranding={card.branding}\n\t\t\t\t\t\t\t\tsupportingContent={card.supportingContent}\n\t\t\t\t\t\t\t\tdataLinkName={card.dataLinkName}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</LI>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t<LI percentage=\"50%\" showTopMarginWhenStacked={true}>\n\t\t\t\t\t<UL direction=\"row\" wrapCards={true}>\n\t\t\t\t\t\t{smallCards.map((card, cardIndex) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<LI\n\t\t\t\t\t\t\t\t\tpercentage=\"50%\"\n\t\t\t\t\t\t\t\t\tshowDivider={true}\n\t\t\t\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\t\t\t\tpadBottom={\n\t\t\t\t\t\t\t\t\t\t// No bottom margin on the last two cards\n\t\t\t\t\t\t\t\t\t\tcardIndex < smallCards.length - 2\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpadBottomOnMobile={\n\t\t\t\t\t\t\t\t\t\tcardIndex < smallCards.length - 1\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\t\t\t\t\tlinkTo={card.url}\n\t\t\t\t\t\t\t\t\t\tformat={card.format}\n\t\t\t\t\t\t\t\t\t\theadlineText={card.headline}\n\t\t\t\t\t\t\t\t\t\theadlineSize=\"small\"\n\t\t\t\t\t\t\t\t\t\tbyline={card.byline}\n\t\t\t\t\t\t\t\t\t\tshowByline={card.showByline}\n\t\t\t\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Letter\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twebPublicationDate={\n\t\t\t\t\t\t\t\t\t\t\tcard.webPublicationDate\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkickerText={card.kickerText}\n\t\t\t\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\t\t\t\tmediaType={card.mediaType}\n\t\t\t\t\t\t\t\t\t\tmediaDuration={card.mediaDuration}\n\t\t\t\t\t\t\t\t\t\tcommentCount={card.commentCount}\n\t\t\t\t\t\t\t\t\t\tstarRating={card.starRating}\n\t\t\t\t\t\t\t\t\t\tbranding={card.branding}\n\t\t\t\t\t\t\t\t\t\tsupportingContent={\n\t\t\t\t\t\t\t\t\t\t\tcard.supportingContent\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdataLinkName={card.dataLinkName}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</LI>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</UL>\n\t\t\t\t</LI>\n\t\t\t</UL>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DynamicSlow.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { breakpoints } from '@guardian/source-foundations';\nimport { trails } from '../../../fixtures/manual/trails';\nimport { ContainerLayout } from './ContainerLayout';\nimport { DynamicSlow } from './DynamicSlow';\n\nexport default {\n\tcomponent: DynamicSlow,\n\ttitle: 'Components/DynamicSlow',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t\tbreakpoints.tablet,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t\tbreakpoints.leftCol,\n\t\t\t\tbreakpoints.wide,\n\t\t\t],\n\t\t},\n\t},\n};\n\nexport const Default = () => (\n\t<ContainerLayout\n\t\ttitle=\"DynamicSlow\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t>\n\t\t<DynamicSlow trails={trails} showAge={true} />\n\t</ContainerLayout>\n);\nDefault.story = { name: 'DynamicSlow' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/DynamicSlow.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":77}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { UL } from './Card/components/UL';\n\ntype Props = {\n\ttrails: TrailType[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n};\n\n/**\n * A `Card` container for up to 8 trails.\n *\n * @see {@link https://www.figma.com/file/sx2vMFHbL7SsUo0LcpsKNe/%E2%AC%A3--Front-container?node-id=123%3A137122 Figma designs}\n */\nexport const DynamicSlow = ({ trails, containerPalette, showAge }: Props) => {\n\tconst primary = trails[0];\n\tconst secondary = trails[1];\n\tconst bigCards = trails.slice(2, 4);\n\tconst smallCards = trails.slice(4, 8);\n\n\treturn (\n\t\t<>\n\t\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t\t<LI padSides={true} percentage=\"75%\">\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tlinkTo={primary.url}\n\t\t\t\t\t\tformat={primary.format}\n\t\t\t\t\t\theadlineText={primary.headline}\n\t\t\t\t\t\ttrailText={primary.trailText}\n\t\t\t\t\t\theadlineSize=\"large\"\n\t\t\t\t\t\tbyline={primary.byline}\n\t\t\t\t\t\tshowByline={primary.showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={primary.webPublicationDate}\n\t\t\t\t\t\tkickerText={primary.kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={primary.image}\n\t\t\t\t\t\timagePosition=\"right\"\n\t\t\t\t\t\timagePositionOnMobile=\"top\"\n\t\t\t\t\t\timageSize=\"large\"\n\t\t\t\t\t\tmediaType={primary.mediaType}\n\t\t\t\t\t\tmediaDuration={primary.mediaDuration}\n\t\t\t\t\t\tcommentCount={primary.commentCount}\n\t\t\t\t\t\tstarRating={primary.starRating}\n\t\t\t\t\t\tbranding={primary.branding}\n\t\t\t\t\t\tsupportingContent={primary.supportingContent}\n\t\t\t\t\t\tdataLinkName={primary.dataLinkName}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t\t<LI\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tshowTopMarginWhenStacked={true}\n\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tlinkTo={secondary.url}\n\t\t\t\t\t\tformat={secondary.format}\n\t\t\t\t\t\theadlineText={secondary.headline}\n\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\tbyline={secondary.byline}\n\t\t\t\t\t\tshowByline={secondary.showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={secondary.webPublicationDate}\n\t\t\t\t\t\tkickerText={secondary.kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={secondary.image}\n\t\t\t\t\t\tmediaType={secondary.mediaType}\n\t\t\t\t\t\tmediaDuration={secondary.mediaDuration}\n\t\t\t\t\t\tcommentCount={secondary.commentCount}\n\t\t\t\t\t\tstarRating={secondary.starRating}\n\t\t\t\t\t\tbranding={secondary.branding}\n\t\t\t\t\t\tsupportingContent={secondary.supportingContent}\n\t\t\t\t\t\tdataLinkName={secondary.dataLinkName}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t</UL>\n\t\t\t<UL direction=\"row-reverse\" padBottom={true}>\n\t\t\t\t<LI percentage=\"50%\" showTopMarginWhenStacked={true}>\n\t\t\t\t\t<UL direction=\"row\" wrapCards={true} showDivider={true}>\n\t\t\t\t\t\t{bigCards.map((card, cardIndex) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<LI\n\t\t\t\t\t\t\t\t\tpercentage=\"50%\"\n\t\t\t\t\t\t\t\t\tshowDivider={cardIndex !== 0}\n\t\t\t\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\t\t\t\tpadBottom={false}\n\t\t\t\t\t\t\t\t\tpadBottomOnMobile={\n\t\t\t\t\t\t\t\t\t\tcardIndex < bigCards.length\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\t\t\t\t\tlinkTo={card.url}\n\t\t\t\t\t\t\t\t\t\tformat={card.format}\n\t\t\t\t\t\t\t\t\t\ttrailText={card.trailText}\n\t\t\t\t\t\t\t\t\t\theadlineText={card.headline}\n\t\t\t\t\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\t\t\t\t\tbyline={card.byline}\n\t\t\t\t\t\t\t\t\t\tshowByline={card.showByline}\n\t\t\t\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Letter\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twebPublicationDate={\n\t\t\t\t\t\t\t\t\t\t\tcard.webPublicationDate\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkickerText={card.kickerText}\n\t\t\t\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\t\t\t\timageUrl={card.image}\n\t\t\t\t\t\t\t\t\t\tmediaType={card.mediaType}\n\t\t\t\t\t\t\t\t\t\tmediaDuration={card.mediaDuration}\n\t\t\t\t\t\t\t\t\t\tcommentCount={card.commentCount}\n\t\t\t\t\t\t\t\t\t\tstarRating={card.starRating}\n\t\t\t\t\t\t\t\t\t\tbranding={card.branding}\n\t\t\t\t\t\t\t\t\t\tsupportingContent={\n\t\t\t\t\t\t\t\t\t\t\tcard.supportingContent\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\timagePositionOnMobile=\"none\"\n\t\t\t\t\t\t\t\t\t\tdataLinkName={card.dataLinkName}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</LI>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</UL>\n\t\t\t\t</LI>\n\t\t\t\t<LI percentage=\"50%\" showTopMarginWhenStacked={false}>\n\t\t\t\t\t<UL direction=\"column\" wrapCards={true}>\n\t\t\t\t\t\t{smallCards.map((card, cardIndex) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<LI\n\t\t\t\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\t\t\t\tshowTopMarginWhenStacked={false}\n\t\t\t\t\t\t\t\t\tpadBottom={\n\t\t\t\t\t\t\t\t\t\t// No bottom margin on the last card\n\t\t\t\t\t\t\t\t\t\tcardIndex < smallCards.length - 1\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpadBottomOnMobile={false}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\t\t\t\t\tlinkTo={card.url}\n\t\t\t\t\t\t\t\t\t\tformat={card.format}\n\t\t\t\t\t\t\t\t\t\theadlineText={card.headline}\n\t\t\t\t\t\t\t\t\t\timageUrl={card.image}\n\t\t\t\t\t\t\t\t\t\timagePosition=\"left\"\n\t\t\t\t\t\t\t\t\t\timageSize=\"small\"\n\t\t\t\t\t\t\t\t\t\theadlineSize=\"small\"\n\t\t\t\t\t\t\t\t\t\tbyline={card.byline}\n\t\t\t\t\t\t\t\t\t\tshowByline={card.showByline}\n\t\t\t\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Letter\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twebPublicationDate={\n\t\t\t\t\t\t\t\t\t\t\tcard.webPublicationDate\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkickerText={card.kickerText}\n\t\t\t\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\t\t\t\tmediaType={card.mediaType}\n\t\t\t\t\t\t\t\t\t\tmediaDuration={card.mediaDuration}\n\t\t\t\t\t\t\t\t\t\tcommentCount={card.commentCount}\n\t\t\t\t\t\t\t\t\t\tstarRating={card.starRating}\n\t\t\t\t\t\t\t\t\t\tbranding={card.branding}\n\t\t\t\t\t\t\t\t\t\tdataLinkName={card.dataLinkName}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</LI>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</UL>\n\t\t\t\t</LI>\n\t\t\t</UL>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/EditionDropdown.importable.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":63,"column":57,"nodeType":"Punctuator","messageId":"preferNullish","endLine":63,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1425,1427],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brand, from } from '@guardian/source-foundations';\nimport { getZIndex } from '../lib/getZIndex';\nimport { Dropdown } from './Dropdown';\n\nconst editionDropdown = css`\n\tdisplay: flex;\n\tposition: absolute;\n\tright: 11px;\n\t${getZIndex('editionDropdown')}\n\ttransform: translateX(100%);\n\n\t:before {\n\t\tcontent: '';\n\t\tborder-left: 1px solid ${brand[600]};\n\t\tdisplay: block;\n\t\tfloat: left;\n\t\theight: 24px;\n\t}\n\n\t${from.desktop} {\n\t\tright: 121px;\n\t\twidth: 110px;\n\t}\n\t${from.wide} {\n\t\tright: 198px;\n\t\twidth: 197px;\n\t}\n`;\n\nexport const EditionDropdown: React.FC<{\n\tedition: Edition;\n\tdataLinkName: string;\n}> = ({ edition, dataLinkName }) => {\n\tconst links = [\n\t\t{\n\t\t\turl: '/preference/edition/uk',\n\t\t\tisActive: edition === 'UK',\n\t\t\ttitle: 'UK edition',\n\t\t\tdataLinkName: 'nav2 : topbar : edition-picker: UK',\n\t\t},\n\t\t{\n\t\t\turl: '/preference/edition/us',\n\t\t\tisActive: edition === 'US',\n\t\t\ttitle: 'US edition',\n\t\t\tdataLinkName: 'nav2 : topbar : edition-picker: US',\n\t\t},\n\t\t{\n\t\t\turl: '/preference/edition/au',\n\t\t\tisActive: edition === 'AU',\n\t\t\ttitle: 'Australian edition',\n\t\t\tdataLinkName: 'nav2 : topbar : edition-picker: AU',\n\t\t},\n\t\t{\n\t\t\turl: '/preference/edition/int',\n\t\t\tisActive: edition === 'INT',\n\t\t\ttitle: 'International edition',\n\t\t\tdataLinkName: 'nav2 : topbar : edition-picker: INT',\n\t\t},\n\t];\n\n\t// Find active link, default to UK\n\tconst activeLink = links.find((link) => link.isActive) || links[0];\n\n\t// Remove the active link and add it back to the top of the list\n\tconst linksToDisplay = links.filter((link) => !link.isActive);\n\tlinksToDisplay.unshift(activeLink);\n\n\treturn (\n\t\t<div css={editionDropdown}>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tpadding-top: 7px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Dropdown\n\t\t\t\t\tlabel={activeLink.title}\n\t\t\t\t\tlinks={linksToDisplay}\n\t\t\t\t\tid=\"edition\"\n\t\t\t\t\tdataLinkName={dataLinkName}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ElementContainer.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":3,"column":1,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":3,"endColumn":20},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":54,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":68,"endColumn":13},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":91,"column":4,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":96,"endColumn":7},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":91,"column":11,"nodeType":"Identifier","messageId":"unsafeCall","endLine":91,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ClassNames, css as emoCss } from '@emotion/react';\nimport { border, from } from '@guardian/source-foundations';\n// @ts-expect-error\nimport { jsx as _jsx } from 'react/jsx-runtime';\nimport { center } from '../lib/center';\n\nconst padding = emoCss`\n\tpadding: 0 10px;\n\n\t${from.mobileLandscape} {\n\t\tpadding: 0 20px;\n\t}\n`;\n\nconst sideBorders = (colour: string) => emoCss`\n\t${from.tablet} {\n\t\tborder-left: 1px solid ${colour};\n\t\tborder-right: 1px solid ${colour};\n\t}\n`;\n\nconst topBorder = (colour: string) => emoCss`\n\tborder-top: 1px solid ${colour};\n`;\n\nconst setBackgroundColour = (colour: string) => emoCss`\n\tbackground-color: ${colour};\n`;\n\ntype Props = {\n\tsectionId?: string;\n\tshowSideBorders?: boolean;\n\tshowTopBorder?: boolean;\n\tpadded?: boolean;\n\tbackgroundColour?: string;\n\tinnerBackgroundColour?: string;\n\tborderColour?: string;\n\tchildren?: React.ReactNode;\n\tshouldCenter?: boolean;\n\telement?:\n\t\t| 'div'\n\t\t| 'article'\n\t\t| 'aside'\n\t\t| 'nav'\n\t\t| 'main'\n\t\t| 'header'\n\t\t| 'section'\n\t\t| 'footer'; // ElementContainer is generally a top-level wrapper\n\tclassName?: string;\n\tophanComponentName?: string;\n\tophanComponentLink?: string;\n};\n\nexport const ElementContainer = ({\n\tsectionId,\n\tshowSideBorders = true,\n\tshowTopBorder = true,\n\tpadded = true,\n\tborderColour = border.secondary,\n\tbackgroundColour,\n\tinnerBackgroundColour,\n\tshouldCenter = true,\n\tchildren,\n\telement = 'div',\n\tclassName,\n\tophanComponentName,\n\tophanComponentLink,\n}: Props) => (\n\t<ClassNames>\n\t\t{({ css }) => {\n\t\t\tconst child = (\n\t\t\t\t<div\n\t\t\t\t\tid={sectionId}\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tshouldCenter && center,\n\t\t\t\t\t\tshowSideBorders && sideBorders(borderColour),\n\t\t\t\t\t\tshowTopBorder && topBorder(borderColour),\n\t\t\t\t\t\tinnerBackgroundColour &&\n\t\t\t\t\t\t\tsetBackgroundColour(innerBackgroundColour),\n\t\t\t\t\t\tpadded && padding,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t{children && children}\n\t\t\t\t</div>\n\t\t\t);\n\t\t\tconst style = css`\n\t\t\t\t${backgroundColour && setBackgroundColour(backgroundColour)};\n\t\t\t`;\n\t\t\t// Create a react element from the tagName passed in OR\n\t\t\t// default to <div>\n\t\t\treturn _jsx(`${element}`, {\n\t\t\t\t'data-link-name': ophanComponentLink,\n\t\t\t\t'data-component': ophanComponentName,\n\t\t\t\tclassName: className ? `${style} ${className}` : style,\n\t\t\t\tchildren: child,\n\t\t\t});\n\t\t}}\n\t</ClassNames>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/EmbedBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":32,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":40,"endColumn":13},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":55,"column":10,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":55,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { space, text, textSans } from '@guardian/source-foundations';\nimport { unescapeData } from '../../lib/escapeData';\nimport { ClickToView } from './ClickToView';\n\ntype Props = {\n\thtml: string;\n\tcaption?: string;\n\trole?: RoleType;\n\tisTracking: boolean;\n\tisMainMedia?: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nconst emailCaptionStyle = css`\n\t${textSans.xxsmall()};\n\tword-break: break-all;\n\tcolor: ${text.supporting};\n\tpadding-bottom: ${space[1]}px;\n`;\n\nconst embedContainerStyles = (isEmailEmbed: boolean) => css`\n\tiframe {\n\t\t/* Some embeds can hijack the iframe and calculate an incorrect width, which pushes the body out */\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\twidth: 100% !important;\n\t\t${isEmailEmbed && `min-height: 60px;`}\n\t}\n`;\n\nexport const EmbedBlockComponent = ({\n\thtml,\n\tcaption,\n\trole,\n\tisTracking,\n\tisMainMedia,\n\tsource,\n\tsourceDomain,\n}: Props) => {\n\t// TODO: Email embeds are being turned into atoms, so we can remove this hack when that happens\n\tconst isEmailEmbed = html.includes('email/form');\n\treturn (\n\t\t<ClickToView\n\t\t\trole={role}\n\t\t\tisTracking={isTracking}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tsource={source}\n\t\t\tsourceDomain={sourceDomain}\n\t\t>\n\t\t\t<div data-cy=\"embed-block\" css={embedContainerStyles(isEmailEmbed)}>\n\t\t\t\t{isEmailEmbed && caption && (\n\t\t\t\t\t<div css={emailCaptionStyle}>{caption}</div>\n\t\t\t\t)}\n\t\t\t\t<div dangerouslySetInnerHTML={{ __html: unescapeData(html) }} />\n\t\t\t</div>\n\t\t</ClickToView>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/EnhancePinnedPost.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":71,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":39},{"ruleId":"consistent-return","severity":1,"message":"Arrow function expected no return value.","line":99,"column":3,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":99,"endColumn":38},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":126,"column":30,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":126,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useRef, useState } from 'react';\nimport { initPerf } from '../browser/initPerf';\nimport { submitComponentEvent } from '../browser/ophan/ophan';\nimport { useIsInView } from '../lib/useIsInView';\n\nconst isServer = typeof window === 'undefined';\n\nconst pinnedPost: HTMLElement | null = !isServer\n\t? window.document.querySelector('[data-gu-marker=pinned-post]')\n\t: null;\n\nconst pinnedPostCheckBox: HTMLElement | null = !isServer\n\t? window.document.querySelector('input[name=pinned-post-checkbox]')\n\t: null;\n\nconst pinnedPostContent: HTMLElement | null = !isServer\n\t? window.document.querySelector('#collapsible-body')\n\t: null;\n\n/**\n * hide show more button and overlay on pinned post\n */\nfunction hideShowMore() {\n\tconst pinnedPostButton = document.querySelector<HTMLElement>(\n\t\t'#pinned-post-button',\n\t);\n\tconst pinnedPostOverlay = document.querySelector<HTMLElement>(\n\t\t'#pinned-post-overlay',\n\t);\n\tif (pinnedPostButton) pinnedPostButton.style.display = 'none';\n\tif (pinnedPostOverlay) pinnedPostOverlay.style.display = 'none';\n}\n\n/**\n * Scroll to the top of the main content when the pinned post is collapsed if the top of the post is out of view\n */\nfunction scrollOnCollapse() {\n\tconst position = pinnedPost?.getBoundingClientRect();\n\tif (position && position.top < 0) {\n\t\tpinnedPost?.scrollIntoView({\n\t\t\tbehavior: 'smooth',\n\t\t});\n\t}\n}\n\nconst handleClickTracking = () => {\n\tif (pinnedPostCheckBox instanceof HTMLInputElement) {\n\t\tif (pinnedPostCheckBox.checked) {\n\t\t\tsubmitComponentEvent({\n\t\t\t\tcomponent: {\n\t\t\t\t\tcomponentType: 'LIVE_BLOG_PINNED_POST',\n\t\t\t\t\tid: pinnedPost?.id,\n\t\t\t\t},\n\t\t\t\taction: 'CLICK',\n\t\t\t\tvalue: 'show-more',\n\t\t\t});\n\t\t} else {\n\t\t\tsubmitComponentEvent({\n\t\t\t\tcomponent: {\n\t\t\t\t\tcomponentType: 'LIVE_BLOG_PINNED_POST',\n\t\t\t\t\tid: pinnedPost?.id,\n\t\t\t\t},\n\t\t\t\taction: 'CLICK',\n\t\t\t\tvalue: 'show-less',\n\t\t\t});\n\t\t\tscrollOnCollapse();\n\t\t}\n\t}\n};\n\nexport const EnhancePinnedPost = () => {\n\tconst [hasBeenSeen, setHasBeenSeen] = useState(false);\n\tconst [isInView] = useIsInView({\n\t\tthreshold: 0.1,\n\t\trepeat: true,\n\t\tnode: pinnedPost ?? undefined,\n\t});\n\n\tconst pinnedPostTiming = useRef<ReturnType<typeof initPerf>>();\n\n\tconst checkContentHeight = () => {\n\t\tconst contentFitsContainer =\n\t\t\tpinnedPostContent &&\n\t\t\tpinnedPostContent.scrollHeight <= pinnedPostContent.clientHeight;\n\t\tif (contentFitsContainer) hideShowMore();\n\t};\n\n\t/**\n\t * Checks for dom updates (embeds loading etc) and updates content height\n\t */\n\tuseEffect(() => {\n\t\tif (!pinnedPost) return;\n\n\t\tconst observer = new MutationObserver(checkContentHeight);\n\t\tconst config = { childList: true };\n\n\t\tobserver.observe(pinnedPost, config);\n\n\t\treturn () => observer.disconnect();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tpinnedPostCheckBox?.addEventListener('change', handleClickTracking);\n\n\t\treturn () => {\n\t\t\tpinnedPostCheckBox?.removeEventListener(\n\t\t\t\t'change',\n\t\t\t\thandleClickTracking,\n\t\t\t);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tpinnedPostTiming.current = initPerf('pinned-post-view-duration');\n\t}, []);\n\n\t// calculate duration when user is viewing pinned post\n\t// and emit ophan events when the pinned post goes out of view\n\tuseEffect(() => {\n\t\tif (!pinnedPost) return;\n\n\t\tif (isInView) {\n\t\t\tsetHasBeenSeen(true);\n\t\t\tpinnedPostTiming.current?.clear();\n\t\t\tpinnedPostTiming.current?.start();\n\t\t} else if (hasBeenSeen && !isInView) {\n\t\t\tconst timeTaken = pinnedPostTiming.current?.end();\n\t\t\tif (timeTaken) {\n\t\t\t\tconst timeTakenInSeconds = timeTaken / 1000;\n\t\t\t\tsubmitComponentEvent({\n\t\t\t\t\tcomponent: {\n\t\t\t\t\t\tcomponentType: 'LIVE_BLOG_PINNED_POST',\n\t\t\t\t\t\tid: pinnedPost.id,\n\t\t\t\t\t},\n\t\t\t\t\taction: 'VIEW',\n\t\t\t\t\tvalue: timeTakenInSeconds.toString(),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [isInView, hasBeenSeen]);\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ExactlyFive.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":11,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":11,"endColumn":69}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { UL } from './Card/components/UL';\n\ntype Props = {\n\tcontent: TrailType[];\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nexport const ExactlyFive = ({ content, containerPalette }: Props) => (\n\t<>\n\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t<LI padSides={true} percentage=\"34%\">\n\t\t\t\t<Card\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\tshowAge={true}\n\t\t\t\t\tlinkTo={content[0].url}\n\t\t\t\t\tformat={content[0].format}\n\t\t\t\t\theadlineText={content[0].headline}\n\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\tbyline={content[0].byline}\n\t\t\t\t\tshowByline={content[0].showByline}\n\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\tcontent[0].format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\tcontent[0].format.design === ArticleDesign.Letter\n\t\t\t\t\t}\n\t\t\t\t\twebPublicationDate={content[0].webPublicationDate}\n\t\t\t\t\tkickerText={content[0].kickerText}\n\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\tcontent[0].format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t}\n\t\t\t\t\tshowSlash={true}\n\t\t\t\t\tshowClock={false}\n\t\t\t\t\timageUrl={content[0].image}\n\t\t\t\t\tmediaType={content[0].mediaType}\n\t\t\t\t\tmediaDuration={content[0].mediaDuration}\n\t\t\t\t\tcommentCount={content[0].commentCount}\n\t\t\t\t\tstarRating={content[0].starRating}\n\t\t\t\t\tbranding={content[0].branding}\n\t\t\t\t/>\n\t\t\t</LI>\n\t\t\t<LI\n\t\t\t\tpadSides={true}\n\t\t\t\tshowDivider={true}\n\t\t\t\tshowTopMarginWhenStacked={true}\n\t\t\t\tpercentage=\"34%\"\n\t\t\t>\n\t\t\t\t<Card\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\tshowAge={true}\n\t\t\t\t\tlinkTo={content[1].url}\n\t\t\t\t\tformat={content[1].format}\n\t\t\t\t\theadlineText={content[1].headline}\n\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\tbyline={content[1].byline}\n\t\t\t\t\tshowByline={content[1].showByline}\n\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\tcontent[1].format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\tcontent[1].format.design === ArticleDesign.Letter\n\t\t\t\t\t}\n\t\t\t\t\twebPublicationDate={content[1].webPublicationDate}\n\t\t\t\t\tkickerText={content[1].kickerText}\n\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\tcontent[1].format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t}\n\t\t\t\t\tshowSlash={true}\n\t\t\t\t\tshowClock={false}\n\t\t\t\t\timageUrl={content[1].image}\n\t\t\t\t\tmediaType={content[1].mediaType}\n\t\t\t\t\tmediaDuration={content[1].mediaDuration}\n\t\t\t\t\tcommentCount={content[1].commentCount}\n\t\t\t\t\tstarRating={content[1].starRating}\n\t\t\t\t\tbranding={content[1].branding}\n\t\t\t\t/>\n\t\t\t</LI>\n\t\t\t<LI\n\t\t\t\tpadSides={true}\n\t\t\t\tshowDivider={true}\n\t\t\t\tshowTopMarginWhenStacked={true}\n\t\t\t\tpercentage=\"34%\"\n\t\t\t>\n\t\t\t\t<UL direction=\"column\">\n\t\t\t\t\t<LI padBottom={true} stretch={true}>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\t\tlinkTo={content[2].url}\n\t\t\t\t\t\t\tformat={content[2].format}\n\t\t\t\t\t\t\theadlineText={content[2].headline}\n\t\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\t\tbyline={content[2].byline}\n\t\t\t\t\t\t\tshowByline={content[2].showByline}\n\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\tcontent[2].format.design ===\n\t\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\t\tcontent[2].format.design ===\n\t\t\t\t\t\t\t\t\tArticleDesign.Letter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twebPublicationDate={content[2].webPublicationDate}\n\t\t\t\t\t\t\tkickerText={content[2].kickerText}\n\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\tcontent[2].format.design ===\n\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\tmediaType={content[2].mediaType}\n\t\t\t\t\t\t\tmediaDuration={content[2].mediaDuration}\n\t\t\t\t\t\t\tcommentCount={content[2].commentCount}\n\t\t\t\t\t\t\tstarRating={content[2].starRating}\n\t\t\t\t\t\t\tbranding={content[2].branding}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LI>\n\t\t\t\t\t<LI padBottom={true} stretch={true}>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\t\tlinkTo={content[3].url}\n\t\t\t\t\t\t\tformat={content[3].format}\n\t\t\t\t\t\t\theadlineText={content[3].headline}\n\t\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\t\tbyline={content[3].byline}\n\t\t\t\t\t\t\tshowByline={content[3].showByline}\n\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\tcontent[3].format.design ===\n\t\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\t\tcontent[3].format.design ===\n\t\t\t\t\t\t\t\t\tArticleDesign.Letter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twebPublicationDate={content[3].webPublicationDate}\n\t\t\t\t\t\t\tkickerText={content[3].kickerText}\n\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\tcontent[3].format.design ===\n\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\tmediaType={content[3].mediaType}\n\t\t\t\t\t\t\tmediaDuration={content[3].mediaDuration}\n\t\t\t\t\t\t\tcommentCount={content[3].commentCount}\n\t\t\t\t\t\t\tstarRating={content[3].starRating}\n\t\t\t\t\t\t\tbranding={content[3].branding}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LI>\n\t\t\t\t\t<LI padBottom={false} stretch={true}>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\t\tlinkTo={content[4].url}\n\t\t\t\t\t\t\tformat={content[4].format}\n\t\t\t\t\t\t\theadlineText={content[4].headline}\n\t\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\t\tbyline={content[4].byline}\n\t\t\t\t\t\t\tshowByline={content[4].showByline}\n\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\tcontent[4].format.design ===\n\t\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\t\tcontent[4].format.design ===\n\t\t\t\t\t\t\t\t\tArticleDesign.Letter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twebPublicationDate={content[4].webPublicationDate}\n\t\t\t\t\t\t\tkickerText={content[4].kickerText}\n\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\tcontent[4].format.design ===\n\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\tmediaType={content[4].mediaType}\n\t\t\t\t\t\t\tmediaDuration={content[4].mediaDuration}\n\t\t\t\t\t\t\tcommentCount={content[4].commentCount}\n\t\t\t\t\t\t\tstarRating={content[4].starRating}\n\t\t\t\t\t\t\tbranding={content[4].branding}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LI>\n\t\t\t\t</UL>\n\t\t\t</LI>\n\t\t</UL>\n\t</>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Figure.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":56,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":56,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":92,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":92,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":134,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":134,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":171,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":171,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":209,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":209,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":246,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":246,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { breakpoints } from '@guardian/source-foundations';\nimport { ArticleContainer } from './ArticleContainer';\nimport { ElementContainer } from './ElementContainer';\nimport { Figure } from './Figure';\nimport { Flex } from './Flex';\nimport { LeftColumn } from './LeftColumn';\nimport { RightColumn } from './RightColumn';\nimport { TextBlockComponent } from './TextBlockComponent';\n\nconst textHtml =\n\t'<p>US and British intelligence agencies have successfully cracked much of the online encryption relied upon by hundreds of millions of people to protect the privacy of their personal data, online transactions and emails, according to top-secret documents revealed by former contractor Edward Snowden.</p>';\n\nconst SomeText = () => (\n\t<TextBlockComponent\n\t\thtml={textHtml}\n\t\tformat={{\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.Standard,\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t}}\n\t\tisFirstParagraph={false}\n\t/>\n);\n\nconst Grey = ({ heightInPixels = 400 }: { heightInPixels?: number }) => (\n\t<div\n\t\tcss={css`\n\t\t\tbackground-color: grey;\n\t\t\twidth: 100%;\n\t\t\theight: ${heightInPixels}px;\n\t\t`}\n\t/>\n);\n\nexport default {\n\tcomponent: Figure,\n\ttitle: 'Components/Figure',\n\tparameters: {\n\t\t// Set the viewports in Chromatic at a component level.\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t\tbreakpoints.tablet,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t\tbreakpoints.leftCol,\n\t\t\t\tbreakpoints.wide,\n\t\t\t],\n\t\t},\n\t},\n};\n\nexport const InlineStory = () => {\n\treturn (\n\t\t<ElementContainer showTopBorder={false}>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<Figure\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grey />\n\t\t\t\t\t</Figure>\n\t\t\t\t\t<SomeText />\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nInlineStory.story = { name: 'Inline' };\n\nexport const SupportingStory = () => {\n\treturn (\n\t\t<ElementContainer showTopBorder={false}>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<Figure\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\trole=\"supporting\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grey heightInPixels={500} />\n\t\t\t\t\t</Figure>\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<SomeText />\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nSupportingStory.story = { name: 'Supporting' };\n\nexport const ImmersiveStory = () => {\n\treturn (\n\t\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<Figure\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\trole=\"immersive\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grey heightInPixels={700} />\n\t\t\t\t\t</Figure>\n\t\t\t\t\t<SomeText />\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nImmersiveStory.story = { name: 'Immersive' };\n\nexport const ThumbnailStory = () => {\n\treturn (\n\t\t<ElementContainer showTopBorder={false}>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<Figure\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\trole=\"thumbnail\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grey heightInPixels={200} />\n\t\t\t\t\t</Figure>\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<SomeText />\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nThumbnailStory.story = { name: 'Thumbnail' };\n\nexport const ShowcaseStory = () => {\n\treturn (\n\t\t<ElementContainer showTopBorder={false}>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<Figure\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\trole=\"showcase\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grey heightInPixels={500} />\n\t\t\t\t\t</Figure>\n\t\t\t\t\t<SomeText />\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nShowcaseStory.story = { name: 'Showcase' };\n\nexport const HalfWidthStory = () => {\n\treturn (\n\t\t<ElementContainer showTopBorder={false}>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<SomeText />\n\t\t\t\t\t<Figure\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tisMainMedia={false}\n\t\t\t\t\t\trole=\"halfWidth\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Grey />\n\t\t\t\t\t</Figure>\n\t\t\t\t\t<SomeText />\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nHalfWidthStory.story = { name: 'HalfWidth' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Figure.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":134,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":137,"endColumn":5},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":175,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":183,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { from, space, until } from '@guardian/source-foundations';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tformat: ArticleFormat;\n\tisMainMedia: boolean;\n\trole?: RoleType | 'richLink';\n\tid?: string;\n\tclassName?: string;\n\ttype?: CAPIElement['_type'];\n};\n\nconst roleCss = {\n\tinline: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t`,\n\n\tsupporting: css`\n\t\tclear: left;\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t\t${from.tablet} {\n\t\t\tposition: relative;\n\t\t\tfloat: left;\n\t\t\twidth: 300px;\n\t\t\tmargin-right: 20px;\n\t\t\tline-height: 0;\n\t\t\tmargin-top: ${space[2]}px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tmargin-left: -160px;\n\t\t}\n\t\t${from.wide} {\n\t\t\twidth: 380px;\n\t\t\tmargin-left: -240px;\n\t\t}\n\t`,\n\n\timmersive: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t\t${until.tablet} {\n\t\t\tmargin-left: -20px;\n\t\t\tmargin-right: -20px;\n\t\t}\n\t\t${until.mobileLandscape} {\n\t\t\tmargin-left: -10px;\n\t\t\tmargin-right: -10px;\n\t\t}\n\t\t${from.tablet} {\n\t\t\tmargin-left: -20px;\n\t\t\tmargin-right: -100px;\n\t\t}\n\t\t${from.desktop} {\n\t\t\tmargin-left: -20px;\n\t\t\tmargin-right: -340px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tmargin-left: -160px;\n\t\t\tmargin-right: -320px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t\tmargin-right: -400px;\n\t\t}\n\t`,\n\n\tshowcase: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t\tposition: relative;\n\t\t${from.leftCol} {\n\t\t\tmargin-left: -160px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t}\n\t`,\n\n\tthumbnail: css`\n\t\tmargin-top: ${space[2]}px;\n\t\tmargin-bottom: ${space[2]}px;\n\t\tfloat: left;\n\t\tclear: left;\n\t\twidth: 120px;\n\t\tmargin-right: 20px;\n\t\t${from.tablet} {\n\t\t\twidth: 140px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tposition: relative;\n\t\t\tmargin-left: -160px;\n\t\t}\n\t`,\n\n\t// This is a special use case where we want RichLinks to appear wider when in the left col\n\trichLink: css`\n\t\tmargin-bottom: ${space[1]}px;\n\t\tfloat: left;\n\t\tclear: left;\n\t\twidth: 140px;\n\t\tmargin-right: 20px;\n\t\t${from.tablet} {\n\t\t\twidth: 140px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tposition: relative;\n\t\t\tmargin-left: -160px;\n\t\t\twidth: 140px;\n\t\t}\n\t\t${from.wide} {\n\t\t\tmargin-left: -240px;\n\t\t\twidth: 220px;\n\t\t}\n\t`,\n\n\thalfWidth: css`\n\t\tmargin-top: ${space[3]}px;\n\t\tmargin-bottom: ${space[3]}px;\n\t\twidth: 50%;\n\t\tfloat: left;\n\t\tclear: left;\n\t\tmargin-right: 16px;\n\t`,\n};\n\n// Used for vast majority of layouts.\nexport const defaultRoleStyles = (\n\trole: RoleType | 'richLink',\n\tformat: ArticleFormat,\n) => {\n\tswitch (role) {\n\t\tcase 'inline':\n\t\t\treturn roleCss.inline;\n\t\tcase 'supporting':\n\t\t\treturn roleCss.supporting;\n\t\tcase 'immersive':\n\t\t\treturn roleCss.immersive;\n\t\tcase 'showcase':\n\t\t\treturn roleCss.showcase;\n\t\tcase 'thumbnail':\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\t// In blogs we don't want to use negative left margins\n\t\t\t\t\treturn css`\n\t\t\t\t\t\t${roleCss.thumbnail}\n\t\t\t\t\t\t/* It's important we use the media query here to ensure we override the default values */\n\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\tmargin-left: 0px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tdefault:\n\t\t\t\t\treturn roleCss.thumbnail;\n\t\t\t}\n\t\tcase 'richLink':\n\t\t\treturn roleCss.richLink;\n\t\tcase 'halfWidth':\n\t\t\treturn roleCss.halfWidth;\n\t\tdefault:\n\t\t\treturn roleCss.inline;\n\t}\n};\n\nconst mainMediaFigureStyles = css`\n\theight: 100%;\n`;\n\nexport const Figure = ({\n\trole = 'inline',\n\tformat,\n\tchildren,\n\tid,\n\tisMainMedia,\n\tclassName = '',\n\ttype,\n}: Props) => {\n\tif (isMainMedia) {\n\t\t// Don't add in-body styles for main media elements\n\t\t// TODO: If we want to support other element types having role position, such\n\t\t// as showcase twitter embeds, then we should remove the role positioning which\n\t\t// currently lives in ImageComponent and hoist it up to here, the same as we're\n\t\t// doing using decidePosition for in-body elements\n\t\treturn (\n\t\t\t<figure id={id} key={id} css={mainMediaFigureStyles}>\n\t\t\t\t{children}\n\t\t\t</figure>\n\t\t);\n\t}\n\n\treturn (\n\t\t<figure\n\t\t\tid={id}\n\t\t\tcss={defaultRoleStyles(role, format)}\n\t\t\tdata-spacefinder-role={role}\n\t\t\tdata-spacefinder-type={type}\n\t\t\tclassName={className}\n\t\t>\n\t\t\t{children}\n\t\t</figure>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/FilterKeyEventsToggle.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":28,"endColumn":73}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from, neutral, remSpace } from '@guardian/source-foundations';\nimport { ToggleSwitch } from '@guardian/source-react-components-development-kitchen';\nimport { useState } from 'react';\n\nconst cssOverrides = css`\n\tdisplay: inline-flex;\n\tpadding-bottom: ${remSpace[3]};\n\n\t${from.desktop} {\n\t\tpadding: ${remSpace[3]} 0;\n\t}\n`;\n\nconst toggleWrapperStyles = css`\n\tdisplay: flex;\n\n\t${from.desktop} {\n\t\tborder-top: 1px solid ${neutral[86]};\n\t}\n`;\n\ninterface Props {\n\tfilterKeyEvents: boolean;\n\tid: 'filter-toggle-mobile' | 'filter-toggle-desktop';\n}\n\nexport const FilterKeyEventsToggle = ({ filterKeyEvents, id }: Props) => {\n\tconst [checked, setChecked] = useState(filterKeyEvents);\n\n\tconst handleClick = () => {\n\t\tsetChecked(!checked);\n\n\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\turlParams.delete('page'); // direct to the first page\n\t\turlParams.set('filterKeyEvents', checked ? 'false' : 'true');\n\n\t\twindow.location.hash = id;\n\t\twindow.location.search = urlParams.toString();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<span id={id} />\n\t\t\t<div css={toggleWrapperStyles}>\n\t\t\t\t<ToggleSwitch\n\t\t\t\t\tlabel=\"Show key events only\"\n\t\t\t\t\tchecked={checked}\n\t\t\t\t\tonClick={() => handleClick()}\n\t\t\t\t\tcssOverrides={cssOverrides}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/FixedLargeSlowXIV.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { breakpoints } from '@guardian/source-foundations';\nimport { trails } from '../../../fixtures/manual/trails';\nimport { ContainerLayout } from './ContainerLayout';\nimport { FixedLargeSlowXIV } from './FixedLargeSlowXIV';\n\nexport default {\n\tcomponent: FixedLargeSlowXIV,\n\ttitle: 'Components/FixedLargeSlowXIV',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t\tbreakpoints.tablet,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t\tbreakpoints.leftCol,\n\t\t\t\tbreakpoints.wide,\n\t\t\t],\n\t\t},\n\t},\n};\n\nexport const Default = () => (\n\t<ContainerLayout\n\t\ttitle=\"FixedLargeSlowXIV\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t>\n\t\t<FixedLargeSlowXIV trails={trails} showAge={true} />\n\t</ContainerLayout>\n);\nDefault.story = { name: 'FixedLargeSlowXIV' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/FixedLargeSlowXIV.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { UL } from './Card/components/UL';\n\ntype Props = {\n\ttrails: TrailType[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n};\n\nexport const FixedLargeSlowXIV = ({\n\ttrails,\n\tcontainerPalette,\n\tshowAge,\n}: Props) => {\n\tconst primary = trails[0];\n\tconst secondary = trails[1];\n\tconst groups = [\n\t\ttrails.slice(2, 6),\n\t\ttrails.slice(7, 11),\n\t\ttrails.slice(12, 16),\n\t];\n\n\treturn (\n\t\t<>\n\t\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t\t<LI padSides={true} percentage=\"75%\">\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tlinkTo={primary.url}\n\t\t\t\t\t\tformat={primary.format}\n\t\t\t\t\t\theadlineText={primary.headline}\n\t\t\t\t\t\ttrailText={primary.trailText}\n\t\t\t\t\t\theadlineSize=\"large\"\n\t\t\t\t\t\tbyline={primary.byline}\n\t\t\t\t\t\tshowByline={primary.showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={primary.webPublicationDate}\n\t\t\t\t\t\tkickerText={primary.kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tprimary.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={primary.image}\n\t\t\t\t\t\timagePosition=\"right\"\n\t\t\t\t\t\timagePositionOnMobile=\"top\"\n\t\t\t\t\t\timageSize=\"large\"\n\t\t\t\t\t\tmediaType={primary.mediaType}\n\t\t\t\t\t\tmediaDuration={primary.mediaDuration}\n\t\t\t\t\t\tcommentCount={primary.commentCount}\n\t\t\t\t\t\tstarRating={primary.starRating}\n\t\t\t\t\t\tbranding={primary.branding}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t\t<LI\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tshowTopMarginWhenStacked={true}\n\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\tlinkTo={secondary.url}\n\t\t\t\t\t\tformat={secondary.format}\n\t\t\t\t\t\theadlineText={secondary.headline}\n\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\tbyline={secondary.byline}\n\t\t\t\t\t\tshowByline={secondary.showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={secondary.webPublicationDate}\n\t\t\t\t\t\tkickerText={secondary.kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tsecondary.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={secondary.image}\n\t\t\t\t\t\tmediaType={secondary.mediaType}\n\t\t\t\t\t\tmediaDuration={secondary.mediaDuration}\n\t\t\t\t\t\tcommentCount={secondary.commentCount}\n\t\t\t\t\t\tstarRating={secondary.starRating}\n\t\t\t\t\t\tbranding={secondary.branding}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t</UL>\n\t\t\t{groups.map((group, groupIndex) => {\n\t\t\t\treturn (\n\t\t\t\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t\t\t\t{group.map((card, cardIndex) => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<LI\n\t\t\t\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t\t\t\t\t\tshowDivider={cardIndex !== 0}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\t\t\t\t\tlinkTo={card.url}\n\t\t\t\t\t\t\t\t\t\tformat={card.format}\n\t\t\t\t\t\t\t\t\t\theadlineText={card.headline}\n\t\t\t\t\t\t\t\t\t\theadlineSize=\"small\"\n\t\t\t\t\t\t\t\t\t\timageUrl={\n\t\t\t\t\t\t\t\t\t\t\tgroupIndex === 0\n\t\t\t\t\t\t\t\t\t\t\t\t? card.image\n\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\timagePosition=\"top\"\n\t\t\t\t\t\t\t\t\t\tbyline={card.byline}\n\t\t\t\t\t\t\t\t\t\tshowByline={card.showByline}\n\t\t\t\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Letter\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\twebPublicationDate={\n\t\t\t\t\t\t\t\t\t\t\tcard.webPublicationDate\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tkickerText={card.kickerText}\n\t\t\t\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\t\t\t\tcard.format.design ===\n\t\t\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\t\t\t\tmediaType={card.mediaType}\n\t\t\t\t\t\t\t\t\t\tmediaDuration={card.mediaDuration}\n\t\t\t\t\t\t\t\t\t\tcommentCount={card.commentCount}\n\t\t\t\t\t\t\t\t\t\tstarRating={card.starRating}\n\t\t\t\t\t\t\t\t\t\tbranding={card.branding}\n\t\t\t\t\t\t\t\t\t\tdataLinkName={card.dataLinkName}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</LI>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</UL>\n\t\t\t\t);\n\t\t\t})}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/FixedSmallSlowIV.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { breakpoints } from '@guardian/source-foundations';\nimport { trails } from '../../../fixtures/manual/trails';\nimport { ContainerLayout } from './ContainerLayout';\nimport { FixedSmallSlowIV } from './FixedSmallSlowIV';\n\nexport default {\n\tcomponent: FixedSmallSlowIV,\n\ttitle: 'Components/FixedSmallSlowIV',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.mobileMedium,\n\t\t\t\tbreakpoints.mobileLandscape,\n\t\t\t\tbreakpoints.phablet,\n\t\t\t\tbreakpoints.tablet,\n\t\t\t\tbreakpoints.desktop,\n\t\t\t\tbreakpoints.leftCol,\n\t\t\t\tbreakpoints.wide,\n\t\t\t],\n\t\t},\n\t},\n};\n\nexport const Default = () => (\n\t<ContainerLayout\n\t\ttitle=\"FixedSmallSlowIV\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t>\n\t\t<FixedSmallSlowIV trails={trails} showAge={true} />\n\t</ContainerLayout>\n);\nDefault.story = { name: 'FixedSmallSlowIV' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/FixedSmallSlowIV.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { UL } from './Card/components/UL';\n\ntype Props = {\n\ttrails: TrailType[];\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n};\n\nexport const FixedSmallSlowIV = ({\n\ttrails,\n\tcontainerPalette,\n\tshowAge,\n}: Props) => {\n\tconst slicedTrails = trails.slice(0, 4);\n\n\treturn (\n\t\t<UL direction=\"row\">\n\t\t\t{slicedTrails.map((trail, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<LI\n\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\tshowDivider={index > 0}\n\t\t\t\t\t\tpadBottomOnMobile={true}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\tshowAge={showAge}\n\t\t\t\t\t\t\tlinkTo={trail.url}\n\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\t\ttrailText={trail.trailText}\n\t\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\t\tbyline={trail.byline}\n\t\t\t\t\t\t\tshowByline={trail.showByline}\n\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twebPublicationDate={trail.webPublicationDate}\n\t\t\t\t\t\t\tkickerText={trail.kickerText}\n\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\timageUrl={trail.image}\n\t\t\t\t\t\t\timagePosition=\"top\"\n\t\t\t\t\t\t\timagePositionOnMobile=\"left\"\n\t\t\t\t\t\t\timageSize=\"medium\"\n\t\t\t\t\t\t\tmediaType={trail.mediaType}\n\t\t\t\t\t\t\tmediaDuration={trail.mediaDuration}\n\t\t\t\t\t\t\tcommentCount={trail.commentCount}\n\t\t\t\t\t\t\tstarRating={trail.starRating}\n\t\t\t\t\t\t\tbranding={trail.branding}\n\t\t\t\t\t\t\tdataLinkName={trail.dataLinkName}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LI>\n\t\t\t\t);\n\t\t\t})}\n\t\t</UL>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Flex.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tdirection?: 'row' | 'column';\n\tjustify?: 'space-between' | 'flex-start'; // Extend as required\n};\n\nexport const Flex = ({\n\tchildren,\n\tdirection = 'row',\n\tjustify = 'space-between',\n}: Props) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: ${direction};\n\t\t\tjustify-content: ${justify};\n\t\t\t/* Fixes IE 10/11 bug that collapses this container by default: */\n\t\t\t/* stylelint-disable-next-line property-no-vendor-prefix */\n\t\t\t-ms-flex-positive: 1;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/FocusStyles.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { FocusStyleManager } from '@guardian/source-foundations';\nimport { useEffect } from 'react';\n\nexport const FocusStyles = () => {\n\t// Ensure the focus state of any buttons/inputs in any of the Source\n\t// components are only applied when navigating via keyboard.\n\t// READ: https://www.theguardian.design/2a1e5182b/p/6691bb-accessibility/t/32e9fb\n\tuseEffect(() => {\n\t\tFocusStyleManager.onlyShowFocusOnTabs();\n\t}, []);\n\t// Nothing is rendered by this component\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Footer.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":196,"column":13,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":196,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":235,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":249,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDisplay } from '@guardian/libs';\nimport {\n\tbrand,\n\tbrandAlt,\n\tbrandBackground,\n\tbrandText,\n\tfrom,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { clearFix } from '../../lib/mixins';\nimport { BackToTop } from './BackToTop';\nimport { Island } from './Island';\nimport { firstPillarWidth, Pillars, pillarWidth } from './Pillars';\nimport { ReaderRevenueLinks } from './ReaderRevenueLinks.importable';\n\n// CSS vars\nconst emailSignupSideMargins = 10;\nconst footerItemContainerPadding = 20;\nconst emailSignupWidth =\n\tpillarWidth +\n\tfirstPillarWidth -\n\t(emailSignupSideMargins * 2 + footerItemContainerPadding);\nconst footerBorders = `1px solid ${brand[600]}`;\n\n// CSS\nconst footer = css`\n\tbackground-color: ${brandBackground.primary};\n\tcolor: ${brandText.primary};\n\tpadding-bottom: 6px;\n\t${textSans.medium()};\n`;\n\nconst pillarWrap = css`\n\t${clearFix}\n\tborder-left: ${footerBorders};\n\tborder-right: ${footerBorders};\n\tpadding-bottom: 12px;\n\tposition: relative;\n\theight: 43px;\n\n\t> ul {\n\t\tclear: none;\n\n\t\t:after {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n`;\n\nconst emailSignup = css`\n\tpadding-top: 12px;\n\tmin-height: 150px;\n\toverflow: hidden;\n\tborder: 0;\n\n\t${from.desktop} {\n\t\tmargin: 0 ${emailSignupSideMargins}px;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tfloat: left;\n\t\twidth: ${emailSignupWidth}px;\n\t}\n\n\t${from.wide} {\n\t\tmargin-right: ${pillarWidth * 2 +\n\t\tfirstPillarWidth -\n\t\t(emailSignupWidth +\n\t\t\temailSignupSideMargins +\n\t\t\tfooterItemContainerPadding)}px;\n\t}\n`;\n\nconst footerLink = css`\n\tcolor: inherit;\n\ttext-decoration: none;\n\tpadding-bottom: 12px;\n\tdisplay: block;\n\tline-height: 19px;\n\n\t:hover {\n\t\ttext-decoration: underline;\n\t\tcolor: ${brandAlt[400]};\n\t}\n`;\n\nconst footerList = css`\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tflex-direction: row;\n\n\t${until.desktop} {\n\t\tborder-top: ${footerBorders};\n\t}\n\n\tul {\n\t\twidth: 50%;\n\t\tborder-left: ${footerBorders};\n\t\tpadding: 12px 0 0 10px;\n\n\t\t:nth-of-type(1) {\n\t\t\tborder-left: 0 none;\n\t\t}\n\n\t\t${until.tablet} {\n\t\t\tclear: left;\n\n\t\t\t:nth-of-type(odd) {\n\t\t\t\tborder-left: 0;\n\t\t\t\tpadding-left: 0;\n\t\t\t}\n\n\t\t\t:nth-of-type(3) {\n\t\t\t\tpadding-top: 0;\n\t\t\t}\n\n\t\t\t:nth-of-type(4) {\n\t\t\t\tpadding-top: 0;\n\t\t\t}\n\t\t}\n\n\t\t${from.tablet} {\n\t\t\tmargin: 0 10px 36px 0;\n\t\t\twidth: 150px;\n\t\t}\n\n\t\t${from.desktop} {\n\t\t\t:nth-of-type(1) {\n\t\t\t\tborder-left: ${footerBorders};\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst readerRevenueLinks = css`\n\tborder-left: ${footerBorders};\n\tflex: 1;\n\tpadding: 12px 0 0 10px;\n\tmargin: 0 10px 36px 0;\n\twidth: calc(50% - 10px);\n\t${until.tablet} {\n\t\twidth: 50%;\n\t\tborder-top: ${footerBorders};\n\t}\n`;\n\nconst copyright = css`\n\t${textSans.xxsmall()};\n\tpadding-left: 20px;\n\tpadding-right: 12px;\n\tpadding-top: 12px;\n\tpadding-bottom: 12px;\n\n\t${until.tablet} {\n\t\tmargin-top: 11px;\n\t}\n`;\n\nconst footerItemContainers = css`\n\t${from.leftCol} {\n\t\tdisplay: flex;\n\t}\n\n\twidth: 100%;\n\tpadding: 0 ${footerItemContainerPadding / 2}px;\n\tposition: relative;\n\tborder: ${footerBorders};\n\n\t${from.mobileLandscape} {\n\t\tpadding: 0 ${footerItemContainerPadding}px;\n\t}\n`;\n\nconst bttPosition = css`\n\tbackground-color: ${brandBackground.primary};\n\tpadding: 0 5px;\n\tposition: absolute;\n\tbottom: -21px;\n\tright: 20px;\n`;\n\nconst FooterLinks = ({\n\tpageFooter,\n\turls,\n\tedition,\n\tcontributionsServiceUrl,\n}: {\n\tpageFooter: FooterType;\n\turls: ReaderRevenueCategories;\n\tedition: Edition;\n\tcontributionsServiceUrl: string;\n}) => {\n\tconst linkGroups = pageFooter.footerLinks.map((linkGroup) => {\n\t\tconst linkList = linkGroup.map((l: FooterLink, index: number) => (\n\t\t\t<li key={`${l.url}${index}`}>\n\t\t\t\t<a\n\t\t\t\t\tcss={[footerLink, l.extraClasses]}\n\t\t\t\t\thref={l.url}\n\t\t\t\t\tdata-link-name={l.dataLinkName}\n\t\t\t\t>\n\t\t\t\t\t{l.text}\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t));\n\t\tconst key = linkGroup.reduce((acc, { text }) => `acc-${text}`, '');\n\t\treturn <ul key={key}>{linkList}</ul>;\n\t});\n\n\tconst rrLinks = (\n\t\t<div css={readerRevenueLinks}>\n\t\t\t<Island deferUntil=\"visible\" clientOnly={true}>\n\t\t\t\t<ReaderRevenueLinks\n\t\t\t\t\turls={urls}\n\t\t\t\t\tedition={edition}\n\t\t\t\t\tdataLinkNamePrefix=\"footer : \"\n\t\t\t\t\tinHeader={false}\n\t\t\t\t\tremoteHeader={false}\n\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t/>\n\t\t\t</Island>\n\t\t</div>\n\t);\n\n\treturn (\n\t\t<div css={footerList}>\n\t\t\t{linkGroups}\n\t\t\t{rrLinks}\n\t\t</div>\n\t);\n};\n\nconst year = new Date().getFullYear();\n\nexport const Footer = ({\n\tpillars,\n\tpillar,\n\tpageFooter,\n\turls,\n\tedition,\n\tcontributionsServiceUrl,\n}: {\n\tpillars: PillarType[];\n\tpillar: ArticleTheme;\n\tpageFooter: FooterType;\n\turls: ReaderRevenueCategories;\n\tedition: Edition;\n\tcontributionsServiceUrl: string;\n}) => (\n\t<div\n\t\tdata-print-layout=\"hide\"\n\t\tcss={footer}\n\t\tdata-link-name=\"footer\"\n\t\tdata-component=\"footer\"\n\t>\n\t\t<div css={pillarWrap}>\n\t\t\t<Pillars\n\t\t\t\tdisplay={ArticleDisplay.Standard}\n\t\t\t\tpillars={pillars}\n\t\t\t\tpillar={pillar}\n\t\t\t\tshowLastPillarDivider={false}\n\t\t\t\tdataLinkName=\"footer\"\n\t\t\t/>\n\t\t</div>\n\t\t<div css={footerItemContainers}>\n\t\t\t<iframe\n\t\t\t\ttitle=\"Guardian Email Sign-up Form\"\n\t\t\t\tsrc=\"https://www.theguardian.com/email/form/footer/today-uk\"\n\t\t\t\tid=\"footer__email-form\"\n\t\t\t\tcss={emailSignup}\n\t\t\t\tdata-form-success-desc=\"We will send you our picks of the most important headlines tomorrow morning.\"\n\t\t\t\tdata-node-uid=\"2\"\n\t\t\t\theight=\"100\"\n\t\t\t/>\n\n\t\t\t<FooterLinks\n\t\t\t\tpageFooter={pageFooter}\n\t\t\t\turls={urls}\n\t\t\t\tedition={edition}\n\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t/>\n\t\t\t<div css={bttPosition}>\n\t\t\t\t<BackToTop />\n\t\t\t</div>\n\t\t</div>\n\t\t<div css={copyright}>\n\t\t\t© {year} Guardian News & Media Limited or its affiliated companies.\n\t\t\tAll rights reserved. (modern)\n\t\t</div>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/FourOrLess.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { UL } from './Card/components/UL';\n\ntype Props = {\n\tcontent: TrailType[];\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nconst decidePercentage = (length: number) => {\n\tswitch (length) {\n\t\tcase 1:\n\t\t\treturn '100%';\n\t\tcase 2:\n\t\t\treturn '50%';\n\t\tcase 3:\n\t\t\treturn '34%';\n\t\tcase 4:\n\t\tdefault:\n\t\t\treturn '25%';\n\t}\n};\n\nexport const FourOrLess = ({ content, containerPalette }: Props) => {\n\tconst percentage = decidePercentage(content.length);\n\n\treturn (\n\t\t<>\n\t\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t\t{content.map((trail, index) => (\n\t\t\t\t\t<LI\n\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\tshowDivider={index > 0}\n\t\t\t\t\t\tshowTopMarginWhenStacked={index > 0}\n\t\t\t\t\t\tpercentage={percentage}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\t\tlinkTo={trail.url}\n\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\t\tbyline={trail.byline}\n\t\t\t\t\t\t\tshowByline={trail.showByline}\n\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twebPublicationDate={trail.webPublicationDate}\n\t\t\t\t\t\t\tkickerText={trail.kickerText}\n\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\timageUrl={trail.image}\n\t\t\t\t\t\t\tmediaType={trail.mediaType}\n\t\t\t\t\t\t\tmediaDuration={trail.mediaDuration}\n\t\t\t\t\t\t\tcommentCount={trail.commentCount}\n\t\t\t\t\t\t\tstarRating={trail.starRating}\n\t\t\t\t\t\t\tbranding={trail.branding}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LI>\n\t\t\t\t))}\n\t\t\t</UL>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/FrontPage.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":24,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":24,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css, Global } from '@emotion/react';\nimport { brandAlt, focusHalo, neutral } from '@guardian/source-foundations';\nimport { StrictMode } from 'react';\nimport { FrontLayout } from '../layouts/FrontLayout';\nimport { AlreadyVisited } from './AlreadyVisited.importable';\nimport { CoreVitals } from './CoreVitals.importable';\nimport { FocusStyles } from './FocusStyles.importable';\nimport { Island } from './Island';\nimport { SkipTo } from './SkipTo';\n\ntype Props = {\n\tfront: DCRFrontType;\n\tNAV: NavType;\n};\n\n/**\n * @description\n * Article is a high level wrapper for pages on Dotcom. Sets strict mode and some globals\n *\n * @param {Props} props\n * @param {DCRFrontType} props.front - The article JSON data\n * @param {NAVType} props.NAV - The article JSON data\n * */\nexport const FrontPage = ({ front, NAV }: Props) => {\n\treturn (\n\t\t<StrictMode>\n\t\t\t<Global\n\t\t\t\tstyles={css`\n\t\t\t\t\t/* Crude but effective mechanism. Specific components may need to improve on this behaviour. */\n\t\t\t\t\t/* The not(.src...) selector is to work with Source's FocusStyleManager. */\n\t\t\t\t\t*:focus {\n\t\t\t\t\t\t${focusHalo}\n\t\t\t\t\t}\n\t\t\t\t\t::selection {\n\t\t\t\t\t\tbackground: ${brandAlt[400]};\n\t\t\t\t\t\tcolor: ${neutral[7]};\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t/>\n\t\t\t<SkipTo id=\"maincontent\" label=\"Skip to main content\" />\n\t\t\t<SkipTo id=\"navigation\" label=\"Skip to navigation\" />\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<AlreadyVisited />\n\t\t\t</Island>\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<FocusStyles />\n\t\t\t</Island>\n\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t<CoreVitals />\n\t\t\t</Island>\n\t\t\t<FrontLayout front={front} NAV={NAV} />\n\t\t</StrictMode>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GetCricketScoreboard.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":69},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":35,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":35,"endColumn":32,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[959,985],"text":"data?.match.matchId"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport type { SWRConfiguration } from 'swr';\nimport { useApi } from '../lib/useApi';\nimport { CricketScoreboard } from './CricketScoreboard';\nimport { Placeholder } from './Placeholder';\n\ntype Props = {\n\tmatchUrl: string;\n\tformat: ArticleFormat;\n};\n\nconst Loading = () => <Placeholder height={172} />;\n\nexport const GetCricketScoreboard = ({ matchUrl, format }: Props) => {\n\tconst options: SWRConfiguration = {\n\t\terrorRetryCount: 1,\n\t};\n\t// If this blog is live then poll for new stats\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\toptions.refreshInterval = 14_000;\n\t}\n\n\tconst { data, error, loading } = useApi<{\n\t\tmatch: CricketMatch;\n\t\tscorecardUrl: string;\n\t}>(matchUrl, options);\n\n\tif (loading) return <Loading />;\n\tif (error) {\n\t\t// Send the error to Sentry and then prevent the element from rendering\n\t\twindow.guardian.modules.sentry.reportError(error, 'cricket-scoreboard');\n\n\t\treturn null;\n\t}\n\tif (data && data.match.matchId) {\n\t\treturn (\n\t\t\t<CricketScoreboard\n\t\t\t\tmatch={data.match}\n\t\t\t\tscorecardUrl={data.scorecardUrl}\n\t\t\t\tformat={format}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GetMatchNav.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":26,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { from } from '@guardian/source-foundations';\nimport type { SWRConfiguration } from 'swr';\nimport { useApi } from '../lib/useApi';\nimport { ArticleHeadline } from './ArticleHeadline';\nimport { MatchNav } from './MatchNav';\nimport { Placeholder } from './Placeholder';\n\ntype Props = {\n\tmatchUrl: string;\n\theadlineString: string;\n\tformat: ArticleFormat;\n\ttags: TagType[];\n\twebPublicationDateDeprecated: string;\n};\n\nconst Loading = () => <Placeholder height={230} />;\n\nexport const GetMatchNav = ({\n\tmatchUrl,\n\theadlineString,\n\tformat,\n\ttags,\n\twebPublicationDateDeprecated,\n}: Props) => {\n\tconst options: SWRConfiguration = { errorRetryCount: 1 };\n\t// If this blog is live then poll for new stats\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\toptions.refreshInterval = 16_000;\n\t}\n\tconst { data, error, loading } = useApi<{\n\t\thomeTeam: TeamType;\n\t\tawayTeam: TeamType;\n\t\tcomments?: string;\n\t\tminByMinUrl?: string;\n\t\tvenue?: string;\n\t}>(matchUrl, options);\n\n\tif (loading) return <Loading />;\n\tif (error) {\n\t\t// Send the error to Sentry and then render the headline in its place as a fallback\n\t\twindow.guardian.modules.sentry.reportError(error, 'match-nav');\n\n\t\tif (\n\t\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\t\tformat.design === ArticleDesign.DeadBlog\n\t\t)\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t${from.desktop} {\n\t\t\t\t\t\t\tmax-width: 700px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\theadlineString={headlineString}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\twebPublicationDateDeprecated\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t}\n\tif (data) {\n\t\treturn (\n\t\t\t<MatchNav\n\t\t\t\thomeTeam={data.homeTeam}\n\t\t\t\tawayTeam={data.awayTeam}\n\t\t\t\tcomments={data.comments}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GetMatchStats.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport type { SWRConfiguration } from 'swr';\nimport { useApi } from '../lib/useApi';\nimport { MatchStats } from './MatchStats';\nimport { Placeholder } from './Placeholder';\n\ntype Props = {\n\tmatchUrl: string;\n\tformat: ArticleFormat;\n};\n\nconst Loading = () => <Placeholder height={800} />;\n\nexport const GetMatchStats = ({ matchUrl, format }: Props) => {\n\tconst options: SWRConfiguration = {};\n\t// If this blog is live then poll for new stats\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\toptions.refreshInterval = 14_000;\n\t}\n\tconst { data, error, loading } = useApi<{\n\t\tid: string;\n\t\thomeTeam: TeamType;\n\t\tawayTeam: TeamType;\n\t}>(matchUrl, options);\n\n\tif (loading) return <Loading />;\n\tif (error) {\n\t\t// Send the error to Sentry and then prevent the element from rendering\n\t\twindow.guardian.modules.sentry.reportError(error, 'match=stats');\n\n\t\treturn null;\n\t}\n\tif (data) {\n\t\treturn (\n\t\t\t<MatchStats\n\t\t\t\thome={data.homeTeam}\n\t\t\t\taway={data.awayTeam}\n\t\t\t\tformat={format}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GetMatchTabs.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":61},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":25,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":25,"endColumn":30,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[646,670],"text":"data?.minByMinUrl"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useApi } from '../lib/useApi';\nimport { MatchTabs } from './MatchTabs';\nimport { Placeholder } from './Placeholder';\n\ntype Props = {\n\tmatchUrl: string;\n\tformat: ArticleFormat;\n};\n\nconst Loading = () => <Placeholder height={40} />;\n\nexport const GetMatchTabs = ({ matchUrl, format }: Props) => {\n\tconst { data, error, loading } = useApi<{\n\t\treportUrl?: string;\n\t\tminByMinUrl?: string;\n\t}>(matchUrl, { errorRetryCount: 1 });\n\n\tif (loading) return <Loading />;\n\tif (error) {\n\t\t// Send the error to Sentry and then prevent the element from rendering\n\t\twindow.guardian.modules.sentry.reportError(error, 'match-tabs');\n\n\t\treturn null;\n\t}\n\tif (data && data.minByMinUrl && data.reportUrl) {\n\t\treturn (\n\t\t\t<MatchTabs\n\t\t\t\tminByMinUrl={data.minByMinUrl}\n\t\t\t\treportUrl={data.reportUrl}\n\t\t\t\tformat={format}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GoalAttempts.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":22,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { GoalAttempts } from './GoalAttempts';\n\nexport default {\n\tcomponent: GoalAttempts,\n\ttitle: 'Components/GoalAttempts',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 340px;\n\t\t\tpadding: 20px;\n\t\t\tbackground: lightgray;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const Default = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<GoalAttempts\n\t\t\t\tleft={{\n\t\t\t\t\tonTarget: 23,\n\t\t\t\t\toffTarget: 11,\n\t\t\t\t\tcolor: '#eb121a',\n\t\t\t\t}}\n\t\t\t\tright={{\n\t\t\t\t\tonTarget: 6,\n\t\t\t\t\toffTarget: 4,\n\t\t\t\t\tcolor: '#e3f45a',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nDefault.story = { name: 'default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GoalAttempts.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":121,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":121,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline, text, textSans } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\nimport { isLight } from '../lib/isLight';\n\ntype Props = {\n\tleft: Section;\n\tright: Section;\n\tformat: ArticleFormat;\n};\n\ntype Section = {\n\tonTarget: number;\n\toffTarget: number;\n\tcolor: string;\n};\n\nconst svgBackground = encodeURIComponent(\n\t'<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"3\" height=\"3\" viewBox=\"0 0 3 3\"><circle fill=\"rgba(255, 255, 255, 0.3)\" cx=\"1.5\" cy=\"1.5\" r=\"1\"/></svg>',\n);\n\nconst Row = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Side = ({\n\toffTarget,\n\tonTarget,\n\tteamColours,\n\tposition,\n\tformat,\n}: {\n\toffTarget: number;\n\tonTarget: number;\n\tteamColours: string;\n\tposition: 'left' | 'right';\n\tformat: ArticleFormat;\n}) => {\n\tconst palette = decidePalette(format);\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tposition: relative;\n\t\t\t\t${headline.medium({ fontWeight: 'bold' })}\n\t\t\t\tcolor: ${isLight(teamColours)\n\t\t\t\t\t? text.ctaSecondary\n\t\t\t\t\t: text.ctaPrimary};\n\t\t\t\tbackground: ${teamColours};\n\t\t\t\tflex-basis: 50%;\n\t\t\t\tline-height: 0.8;\n\n\t\t\t\theight: 132px;\n\n\t\t\t\tbackground-image: url('data:image/svg+xml;utf-8,${svgBackground}');\n\t\t\t\tbackground-repeat: repeat;\n\t\t\t\tbackground-size: 3px;\n\t\t\t\tbackground-position-x: 0;\n\n\t\t\t\tpadding-top: 1px;\n\t\t\t\tpadding-left: 6px;\n\t\t\t\tpadding-right: 6px;\n\t\t\t\tpadding-bottom: 9px;\n\n\t\t\t\ttext-align: ${position === 'left' ? 'left' : 'right'};\n\t\t\t`}\n\t\t>\n\t\t\t{offTarget}\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\t${textSans.small()}\n\t\t\t\t\tpadding-top: 4px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{position === 'left' && 'Off target'}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tleft: ${position === 'right' && 0};\n\t\t\t\t\tright: ${position === 'left' && 0};\n\n\t\t\t\t\tbackground: ${teamColours};\n\n\t\t\t\t\ttext-align: ${position === 'left' ? 'left' : 'right'};\n\n\t\t\t\t\tpadding-left: 4px;\n\t\t\t\t\tpadding-right: 4px;\n\n\t\t\t\t\theight: 70px;\n\t\t\t\t\twidth: 92px;\n\n\t\t\t\t\tborder-top: 8px solid ${palette.background.matchStats};\n\t\t\t\t\tborder-left: ${position === 'left' &&\n\t\t\t\t\t`8px solid ${palette.background.matchStats}`};\n\t\t\t\t\tborder-right: ${position === 'right' &&\n\t\t\t\t\t`8px solid ${palette.background.matchStats}`};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{onTarget}\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${textSans.small()}\n\t\t\t\t\t\tpadding-top: 4px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{position === 'left' && 'On target'}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport const GoalAttempts = ({ left, right, format }: Props) => {\n\treturn (\n\t\t<Row>\n\t\t\t<Side\n\t\t\t\tposition=\"left\"\n\t\t\t\toffTarget={left.offTarget}\n\t\t\t\tonTarget={left.onTarget}\n\t\t\t\tteamColours={left.color}\n\t\t\t\tformat={format}\n\t\t\t/>\n\t\t\t<Side\n\t\t\t\tposition=\"right\"\n\t\t\t\toffTarget={right.offTarget}\n\t\t\t\tonTarget={right.onTarget}\n\t\t\t\tteamColours={right.color}\n\t\t\t\tformat={format}\n\t\t\t/>\n\t\t</Row>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GridItem.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":47,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { getZIndex } from '../lib/getZIndex';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tarea: string;\n\t/**\n\t * The element type to use.\n\t */\n\telement?: 'div' | 'article' | 'main' | 'aside' | 'section';\n};\n\nconst gridAreaStyles = (area: string) => {\n\tif (area === 'right-column') {\n\t\treturn css`\n\t\t\t/* IE Fallback */\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tright: 0;\n\t\t\t/* Pop me below the body */\n\t\t\t${getZIndex('rightColumnArea')}\n\n\t\t\t@supports (display: grid) {\n\t\t\t\tposition: relative;\n\t\t\t\tgrid-area: ${area};\n\t\t\t}\n\t\t`;\n\t}\n\n\tif (area === 'body') {\n\t\treturn css`\n\t\t\tgrid-area: ${area};\n\t\t\t/* Pop me above the right column */\n\t\t\t${getZIndex('bodyArea')}\n\t\t`;\n\t}\n\n\treturn css`\n\t\tgrid-area: ${area};\n\t`;\n};\n\nexport const GridItem = ({\n\tchildren,\n\tarea,\n\telement: Element = 'div',\n}: Props) => (\n\t<Element css={gridAreaStyles(area)} data-gu-name={area}>\n\t\t{children}\n\t</Element>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GuVideoBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":13,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":13},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":30,"column":9,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":30,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { unescapeData } from '../../lib/escapeData';\nimport { Caption } from './Caption';\n\ntype Props = {\n\thtml: string;\n\tformat: ArticleFormat;\n\tcredit: string;\n\tisMainMedia: boolean;\n\tcaption?: string;\n};\n\nexport const GuVideoBlockComponent = ({\n\thtml,\n\tformat,\n\tcredit,\n\tisMainMedia,\n\tcaption,\n}: Props) => {\n\tconst embedContainer = css`\n\t\twidth: 100%;\n\t\tmargin-bottom: ${caption ? `0px` : `6px`};\n\t\tvideo {\n\t\t\twidth: 100%;\n\t\t}\n\t`;\n\n\treturn (\n\t\t<div css={embedContainer}>\n\t\t\t<div dangerouslySetInnerHTML={{ __html: unescapeData(html) }} />\n\n\t\t\t{caption && (\n\t\t\t\t<Caption\n\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tcredit={credit}\n\t\t\t\t\tmediaType=\"Video\"\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GuardianLabsLines.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { border, space } from '@guardian/source-foundations';\nimport {\n\tDottedLines,\n\tStraightLines,\n} from '@guardian/source-react-components-development-kitchen';\n\nconst block = css`\n\tdisplay: block;\n`;\n\nexport const GuardianLabsLines = () => (\n\t<>\n\t\t<StraightLines cssOverrides={block} count={1} color={border.primary} />\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\theight: ${space[2]}px;\n\t\t\t`}\n\t\t/>\n\t\t<DottedLines cssOverrides={block} count={1} color={border.primary} />\n\t</>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GuardianRoundel.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GuardianRoundel } from './GuardianRoundel';\n\nexport default {\n\tcomponent: GuardianRoundel,\n\ttitle: 'Components/GuardianRoundel',\n};\n\nexport const defaultStory = () => {\n\treturn <GuardianRoundel />;\n};\ndefaultStory.story = { name: 'default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GuardianRoundel.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brand, neutral } from '@guardian/source-foundations';\n\nexport const GuardianRoundel = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\theight: 42px;\n\t\t\t\twidth: 42px;\n\t\t\t`}\n\t\t>\n\t\t\t<a href=\"https://www.theguardian.com\" data-link-name=\"nav2 : logo\">\n\t\t\t\t<svg viewBox=\"0 0 56 56\">\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M28 0a28 28 0 1 0 28 28A28 28 0 0 0 28 0\"\n\t\t\t\t\t\tfill={neutral[100]}\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M33 6.92c3.63.58 8.24 3.06 9.89 4.83v8h-1L33 7.82zm-3.34.5h-.09c-6.35 0-9.8 8.8-9.8 20.66 0 11.87 3.45 20.66 9.8 20.66h.09v.91c-9.56.65-22.42-6.63-22.09-21.58C7.23 13.14 20.09 5.86 29.66 6.51zm16.16 22.53l-3 1.3v13.44A24.26 24.26 0 0 1 33 49.52V31l-3.3-1.09V29h16.12z\"\n\t\t\t\t\t\tfill={brand[400]}\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t</a>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/GuideAtomWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GuideAtom } from '@guardian/atoms-rendering';\nimport type { GuideAtomType } from '@guardian/atoms-rendering/dist/types/types';\n\nexport const GuideAtomWrapper = (props: GuideAtomType) => {\n\treturn <GuideAtom {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Header.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":29,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brand } from '@guardian/source-foundations';\nimport { EditionDropdown } from './EditionDropdown.importable';\nimport { Hide } from './Hide';\nimport { Island } from './Island';\nimport { Links } from './Links.importable';\nimport { Logo } from './Logo';\nimport { ReaderRevenueLinks } from './ReaderRevenueLinks.importable';\n\nconst headerStyles = css`\n\t/* Ensure header height contains it's children */\n\toverflow: auto;\n\t/* Prevent a scrollbar appearing here on IE/Edge */\n\t-ms-overflow-style: none;\n\tbackground-color: ${brand[400]};\n`;\n\ntype Props = {\n\tedition: Edition;\n\tidUrl?: string;\n\tmmaUrl?: string;\n\tsupporterCTA: string;\n\tdiscussionApiUrl: string;\n\turls: ReaderRevenueCategories;\n\tremoteHeader: boolean;\n\tcontributionsServiceUrl: string;\n};\n\nexport const Header = ({\n\tedition,\n\tidUrl,\n\tmmaUrl,\n\tsupporterCTA,\n\tdiscussionApiUrl,\n\turls,\n\tremoteHeader,\n\tcontributionsServiceUrl,\n}: Props) => (\n\t<div css={headerStyles}>\n\t\t<Hide when=\"below\" breakpoint=\"desktop\">\n\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t<EditionDropdown\n\t\t\t\t\tedition={edition}\n\t\t\t\t\tdataLinkName=\"nav2 : topbar : edition-picker: toggle\"\n\t\t\t\t/>\n\t\t\t</Island>\n\t\t</Hide>\n\t\t<Logo />\n\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t<ReaderRevenueLinks\n\t\t\t\turls={urls}\n\t\t\t\tedition={edition}\n\t\t\t\tdataLinkNamePrefix=\"nav2 : \"\n\t\t\t\tinHeader={true}\n\t\t\t\tremoteHeader={remoteHeader}\n\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t/>\n\t\t</Island>\n\t\t<div id=\"links-root\">\n\t\t\t<Island>\n\t\t\t\t<Links\n\t\t\t\t\tsupporterCTA={supporterCTA}\n\t\t\t\t\tidUrl={idUrl}\n\t\t\t\t\tmmaUrl={mmaUrl}\n\t\t\t\t\tdiscussionApiUrl={discussionApiUrl}\n\t\t\t\t/>\n\t\t\t</Island>\n\t\t</div>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/HeaderAdSlot.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/HeadlineByline.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":45,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":45,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":60,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":60,"endColumn":49},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":85,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":85,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":106,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":106,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":134,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":134,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":165,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":165,"endColumn":44},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":193,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":193,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":208,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":208,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":229,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":229,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":250,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":250,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { HeadlineByline } from './HeadlineByline';\n\nexport default {\n\tcomponent: HeadlineByline,\n\ttitle: 'Components/HeadlineByline',\n};\n\nexport const interviewStory = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Interview,\n\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith\"\n\t\t\ttags={[]}\n\t\t/>\n\t);\n};\ninterviewStory.story = { name: 'Interview' };\n\nexport const commentStory = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith\"\n\t\t\ttags={[]}\n\t\t/>\n\t);\n};\ncommentStory.story = { name: 'Comment' };\n\nexport const specialStory = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith\"\n\t\t\ttags={[]}\n\t\t/>\n\t);\n};\nspecialStory.story = { name: 'SpecialReport' };\n\nexport const commentWithBylineImageStory = () => {\n\t// Not visibly different in storybook but will apply a width\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith\"\n\t\t\ttags={[\n\t\t\t\t{\n\t\t\t\t\tid: 'profile/marinahyde',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Marina Hyde',\n\t\t\t\t\ttwitterHandle: 'MarinaHyde',\n\t\t\t\t\tbylineLargeImageUrl:\n\t\t\t\t\t\t'https://i.guim.co.uk/img/uploads/2018/01/10/Marina_Hyde,_L.png?width=300&quality=85&auto=format&fit=max&s=6476202195914952e48ef41aadb116ff',\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n};\ncommentWithBylineImageStory.story = { name: 'Comment with byline image' };\n\nexport const immersiveStory = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith\"\n\t\t\ttags={[\n\t\t\t\t{\n\t\t\t\t\tid: '1',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Jane Smith',\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n};\nimmersiveStory.story = { name: 'Immersive' };\n\nexport const ImmersiveComment = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tbackground-color: lightgray;\n\t\t\t\tpadding: 20px;\n\t\t\t`}\n\t\t>\n\t\t\t<HeadlineByline\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t}}\n\t\t\t\tbyline=\"Jane Smith\"\n\t\t\t\ttags={[\n\t\t\t\t\t{\n\t\t\t\t\t\tid: '1',\n\t\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\t\ttitle: 'Jane Smith',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nImmersiveComment.story = { name: 'Immersive Comment' };\n\nexport const MultipleStory = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith, John Doe and Nae Bevan\"\n\t\t\ttags={[\n\t\t\t\t{\n\t\t\t\t\tid: '1',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Jane Smith',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: '2',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'John Doe',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: '3',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Nae Bevan',\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n};\nMultipleStory.story = { name: 'Immersive with multiple contributors' };\n\nexport const MultipleDuplicateStory = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t}}\n\t\t\tbyline=\"Duncan Campbell and Duncan Campbell\"\n\t\t\ttags={[\n\t\t\t\t{\n\t\t\t\t\tid: '1',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Duncan Campbell',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: '2',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Duncan Campbell',\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n};\nMultipleDuplicateStory.story = {\n\tname: 'Immersive with multiple contributors with distinct tags but identical names',\n};\n\nexport const noBylineStory = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Interview,\n\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t}}\n\t\t\tbyline=\"\"\n\t\t\ttags={[]}\n\t\t/>\n\t);\n};\nnoBylineStory.story = { name: 'No byline' };\n\nexport const LabsImmersive = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith\"\n\t\t\ttags={[\n\t\t\t\t{\n\t\t\t\t\tid: '1',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Jane Smith',\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n};\nLabsImmersive.story = { name: 'Labs Immersive' };\n\nexport const LabsComment = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith\"\n\t\t\ttags={[\n\t\t\t\t{\n\t\t\t\t\tid: '1',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Jane Smith',\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n};\nLabsComment.story = { name: 'Labs Comment' };\n\nexport const LabsInterview = () => {\n\treturn (\n\t\t<HeadlineByline\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Interview,\n\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t}}\n\t\t\tbyline=\"Jane Smith\"\n\t\t\ttags={[\n\t\t\t\t{\n\t\t\t\t\tid: '1',\n\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\ttitle: 'Jane Smith',\n\t\t\t\t},\n\t\t\t]}\n\t\t/>\n\t);\n};\nLabsInterview.story = { name: 'Labs Interview' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/HeadlineByline.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":115,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":115,"endColumn":67}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tbrandAltBackground,\n\theadline,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\nimport { BylineLink } from './BylineLink';\n\nconst wrapperStyles = css`\n\tmargin-left: 6px;\n\tmargin-top: 4px;\n\t/* Without z-index here the byline appears behind the main image for showcase views */\n\tz-index: 1;\n`;\n\nconst yellowBoxStyles = (format: ArticleFormat) => css`\n\t${format.theme === ArticleSpecial.Labs\n\t\t? textSans.large({ lineHeight: 'regular' })\n\t\t: headline.xxsmall({\n\t\t\t\tfontWeight: 'regular',\n\t\t\t\tlineHeight: 'loose',\n\t\t  })}\n\tfont-style: italic;\n\tbackground-color: ${brandAltBackground.primary};\n\tbox-shadow: 4px 0 0 ${brandAltBackground.primary},\n\t\t-6px 0 0 ${brandAltBackground.primary};\n\tdisplay: inline-block;\n\tbox-decoration-break: clone;\n\n\ta {\n\t\tcolor: inherit;\n\t\ttext-decoration: none;\n\t\t:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t}\n`;\n\nconst opinionWrapperStyles = css`\n\tdisplay: inline-block;\n`;\n\nconst opinionStyles = (palette: Palette, format: ArticleFormat) => css`\n\t${format.theme === ArticleSpecial.Labs\n\t\t? textSans.xxxlarge({ lineHeight: 'loose' })\n\t\t: headline.medium({\n\t\t\t\tfontWeight: 'light',\n\t\t  })}\n\tline-height: 38px;\n\t/* Used to prevent the byline stretching full width */\n\tdisplay: inline;\n\tfont-style: italic;\n\tcolor: ${palette.text.headlineByline};\n\tbackground: ${palette.background.headlineByline};\n\n\t${until.mobileMedium} {\n\t\t${headline.small({\n\t\t\tfontWeight: 'light',\n\t\t})}\n\t}\n\n\ta {\n\t\tcolor: inherit;\n\t\ttext-decoration: none;\n\t\t:hover {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t}\n`;\n\nconst immersiveStyles = (format: ArticleFormat) => css`\n\t${format.theme === ArticleSpecial.Labs\n\t\t? textSans.large({ lineHeight: 'tight' })\n\t\t: headline.xsmall({\n\t\t\t\tfontWeight: 'light',\n\t\t  })}\n\tmargin-bottom: ${space[6]}px;\n`;\n\nconst immersiveLinkStyles = (palette: Palette, format: ArticleFormat) => css`\n\ta {\n\t\tcolor: ${palette.text.headlineByline};\n\t\tborder-bottom: 1px solid\n\t\t\t${format.theme === ArticleSpecial.Labs\n\t\t\t\t? palette.border.articleLink\n\t\t\t\t: palette.text.headlineByline};\n\t\ttext-decoration: none;\n\t\t:hover {\n\t\t\tborder-bottom: 1px solid ${palette.hover.headlineByline};\n\t\t\tcolor: ${palette.hover.headlineByline};\n\t\t\ttext-decoration: none;\n\t\t}\n\t}\n`;\n\n// If there is an image reduce the width of the author div\nconst authorBylineWithImage = css`\n\twidth: 68%;\n`;\n\ntype Props = {\n\tformat: ArticleFormat;\n\tbyline: string;\n\ttags: TagType[];\n};\n\nconst hasSingleContributor = (tags: TagType[]) =>\n\ttags.filter((tag) => tag.type === 'Contributor').length === 1;\n\nexport const HeadlineByline = ({ format, byline, tags }: Props) => {\n\tif (byline === '') {\n\t\treturn null;\n\t}\n\n\tconst palette = decidePalette(format);\n\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn (\n\t\t\t\t<div css={immersiveStyles(format)}>\n\t\t\t\t\tby{' '}\n\t\t\t\t\t<span css={immersiveLinkStyles(palette, format)}>\n\t\t\t\t\t\t<BylineLink byline={byline} tags={tags} />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard:\n\t\tdefault: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Interview:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div css={wrapperStyles}>\n\t\t\t\t\t\t\t<div css={yellowBoxStyles(format)}>\n\t\t\t\t\t\t\t\t<BylineLink byline={byline} tags={tags} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\topinionWrapperStyles,\n\t\t\t\t\t\t\t\thasSingleContributor(tags) &&\n\t\t\t\t\t\t\t\t\tauthorBylineWithImage,\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div css={opinionStyles(palette, format)}>\n\t\t\t\t\t\t\t\t<BylineLink byline={byline} tags={tags} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/HeadlineTag.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":16,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":44,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { decidePalette } from '../lib/decidePalette';\nimport { HeadlineTag } from './HeadlineTag';\n\nexport default {\n\tcomponent: HeadlineTag,\n\ttitle: 'Components/HeadlineTag',\n};\n\nexport const defaultStory = () => {\n\treturn (\n\t\t<HeadlineTag\n\t\t\ttagText=\"Tag name\"\n\t\t\tpalette={decidePalette({\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t})}\n\t\t/>\n\t);\n};\ndefaultStory.story = { name: 'default' };\n\nexport const longTagNameStory = () => {\n\treturn (\n\t\t<HeadlineTag\n\t\t\ttagText=\"Slightly longer tag name\"\n\t\t\tpalette={decidePalette({\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t})}\n\t\t/>\n\t);\n};\nlongTagNameStory.story = { name: 'With a longer tag name' };\n\nexport const wrappedTagNameStory = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tmax-width: 400px;\n\t\t\t`}\n\t\t>\n\t\t\t<HeadlineTag\n\t\t\t\ttagText=\"Very long tag name with enough text to wrap to a second line\"\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t})}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nwrappedTagNameStory.story = { name: 'With wrapped tag name' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/HeadlineTag.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brandText, headline } from '@guardian/source-foundations';\n\nconst headlineTagWrapper = css`\n\tmargin-left: 6px;\n\tmargin-top: 6px;\n`;\n\nconst headlineTagStyles = (palette: Palette) => css`\n\tbackground-color: ${palette.background.headlineTag};\n\tcolor: ${brandText.primary};\n\t${headline.xxsmall({ fontWeight: 'bold', lineHeight: 'loose' })}\n\tbox-shadow: 0.25rem 0 0 ${palette.background\n\t\t.headlineTag}, -0.375rem 0 0 ${palette.background.headlineTag};\n\tdisplay: inline-block;\n\tbox-decoration-break: clone;\n`;\n\nexport const HeadlineTag = ({\n\ttagText,\n\tpalette,\n}: {\n\ttagText: string;\n\tpalette: Palette;\n}) => (\n\t<div css={headlineTagWrapper}>\n\t\t<div css={headlineTagStyles(palette)}>{tagText}</div>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Hide.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":18,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { Breakpoint } from '@guardian/source-foundations';\nimport { from, until } from '@guardian/source-foundations';\n\ninterface Props {\n\tchildren: React.ReactNode;\n\twhen: 'above' | 'below';\n\tbreakpoint: Breakpoint;\n}\n\ninterface PropsSpan extends Props {\n\tel?: 'span';\n}\ninterface PropsLi extends Props {\n\tel: 'li';\n}\n\nexport const Hide = ({\n\tchildren,\n\twhen,\n\tbreakpoint,\n\tel,\n}: PropsSpan | PropsLi) => {\n\tlet whenToHide;\n\tif (when === 'below') {\n\t\twhenToHide = css`\n\t\t\t${until[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n\t} else {\n\t\twhenToHide = css`\n\t\t\t${from[breakpoint]} {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t`;\n\t}\n\treturn el === 'li' ? (\n\t\t<li css={whenToHide}>{children}</li>\n\t) : (\n\t\t<span css={whenToHide}>{children}</span>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/HighlightBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":20,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":29,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":29,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { HighlightBlockComponent } from './HighlightBlockComponent';\n\nconst htmlwithBlockquotes =\n\t'<blockquote>We’ve now got evidence that under <a href=\"https://www.theguardian.com/politics/boris-johnson\">Boris Johnson</a> the NHS is on the table and will be up for sale. He tried to cover it up in a secret agenda but today it’s been exposed.</blockquote>';\n\nconst htmlwithPTags =\n\t'<p>We’ve now got evidence that under <a href=\"https://www.theguardian.com/politics/boris-johnson\">Boris Johnson</a> the NHS is on the table and will be up for sale. He tried to cover it up in a secret agenda but today it’s been exposed.</p>';\n\nexport default {\n\tcomponent: HighlightBlockComponent,\n\ttitle: 'Components/HighlightBlockComponent',\n};\n\nconst containerStyles = css`\n\tmax-width: 620px;\n\tmargin: 20px;\n`;\n\nexport const defaultStory = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<HighlightBlockComponent html={htmlwithBlockquotes} />\n\t\t</div>\n\t);\n};\ndefaultStory.story = { name: 'default' };\n\nexport const blockquoteStory = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<HighlightBlockComponent html={htmlwithPTags} />\n\t\t</div>\n\t);\n};\ndefaultStory.story = { name: 'default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/HighlightBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ImageBlockComponent.mocks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ImageBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":51,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":79,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":79,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":107,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":107,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":135,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":135,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":163,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":163,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":191,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":191,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":220,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":220,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":254,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":254,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":288,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":288,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":318,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":318,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":352,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":352,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":420,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":420,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":488,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":488,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { ElementContainer } from './ElementContainer';\nimport { Figure } from './Figure';\nimport { Flex } from './Flex';\nimport { ImageBlockComponent } from './ImageBlockComponent';\nimport { image } from './ImageBlockComponent.mocks';\nimport { LeftColumn } from './LeftColumn';\nimport { RightColumn } from './RightColumn';\n\nexport default {\n\tcomponent: ImageBlockComponent,\n\ttitle: 'Components/ImageBlockComponent',\n\tparameters: {\n\t\tchromatic: { diffThreshold: 0.4 },\n\t},\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<ElementContainer showTopBorder={false}>\n\t\t<Flex>\n\t\t\t<LeftColumn>\n\t\t\t\t<></>\n\t\t\t</LeftColumn>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tpadding: 20px;\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t<RightColumn>\n\t\t\t\t<></>\n\t\t\t</RightColumn>\n\t\t</Flex>\n\t</ElementContainer>\n);\n\n/**\n type Props = {\n    display: Display;\n    design: Design;\n    element: ImageBlockElement;\n    pillar: Theme;\n    hideCaption?: boolean;\n};\n */\n\nexport const StandardArticle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"inline\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'inline' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nStandardArticle.story = {\n\tname: 'with role inline',\n};\n\nexport const Immersive = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"immersive\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'immersive' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nImmersive.story = {\n\tname: 'with role immersive',\n};\n\nexport const Showcase = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"showcase\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'showcase' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nShowcase.story = {\n\tname: 'with role showcase',\n};\n\nexport const Thumbnail = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"thumbnail\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'thumbnail' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nThumbnail.story = {\n\tname: 'with role thumbnail',\n};\n\nexport const Supporting = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"supporting\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'supporting' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nSupporting.story = {\n\tname: 'with role supporting',\n};\n\nexport const HideCaption = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"inline\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'inline' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\thideCaption={true}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nHideCaption.story = {\n\tname: 'with hideCaption true',\n};\n\nexport const InlineTitle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"inline\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'inline' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\ttitle=\"This is the title text\"\n\t\t\t\t\thideCaption={true}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nInlineTitle.story = {\n\tname: 'with title and role inline',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t\tchromatic: { viewports: [1300] },\n\t},\n};\n\nexport const InlineTitleMobile = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"inline\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'inline' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\ttitle=\"This is the title text\"\n\t\t\t\t\thideCaption={true}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nInlineTitleMobile.story = {\n\tname: 'with title and role inline on mobile',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'mobileMedium' },\n\t\tchromatic: { viewports: [375] },\n\t},\n};\n\nexport const ImmersiveTitle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"immersive\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'immersive' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\ttitle=\"This is the title text\"\n\t\t\t\t\thideCaption={true}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nImmersiveTitle.story = {\n\tname: 'with title and role immersive',\n};\n\nexport const ShowcaseTitle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"showcase\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'showcase' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\ttitle=\"This is the title text\"\n\t\t\t\t\thideCaption={true}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</Container>\n\t);\n};\nShowcaseTitle.story = {\n\tname: 'with title and role showcase',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t\tchromatic: { viewports: [980] },\n\t},\n};\n\nexport const HalfWidth = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\tDuis aute irure dolor in reprehenderit in voluptate velit esse\n\t\t\t\tcillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n\t\t\t\tcupidatat non proident, sunt in culpa qui officia deserunt\n\t\t\t\tmollit anim id est laborum.\n\t\t\t</p>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"halfWidth\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'halfWidth' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nHalfWidth.story = {\n\tname: 'with role halfWidth on desktop',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t\tchromatic: { viewports: [980] },\n\t},\n};\n\nexport const HalfWidthMobile = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\tDuis aute irure dolor in reprehenderit in voluptate velit esse\n\t\t\t\tcillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat\n\t\t\t\tcupidatat non proident, sunt in culpa qui officia deserunt\n\t\t\t\tmollit anim id est laborum.\n\t\t\t</p>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"halfWidth\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'halfWidth' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nHalfWidthMobile.story = {\n\tname: 'with role halfWidth on mobile',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'mobileMedium' },\n\t\tchromatic: { viewports: [375] },\n\t},\n};\n\nexport const HalfWidthWide = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est\n\t\t\t\tlaborum.Duis aute irure dolor in reprehenderit in voluptate\n\t\t\t\tvelit esse cillum dolore eu fugiat nulla pariatur. Excepteur\n\t\t\t\tsint occaecat cupidatat non proident, sunt in culpa qui officia\n\t\t\t\tdeserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"halfWidth\"\n\t\t\t>\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\telement={{ ...image, role: 'halfWidth' }}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor\n\t\t\t\tin reprehenderit in voluptate velit esse cillum dolore eu fugiat\n\t\t\t\tnulla pariatur. Excepteur sint occaecat cupidatat non proident,\n\t\t\t\tsunt in culpa qui officia deserunt mollit anim id est laborum.\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nHalfWidthWide.story = {\n\tname: 'with role halfWidth',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'wide' },\n\t\tchromatic: { disable: true },\n\t},\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ImageBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":13,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ImageComponent } from './ImageComponent';\n\ntype Props = {\n\tformat: ArticleFormat;\n\telement: ImageBlockElement;\n\thideCaption?: boolean;\n\ttitle?: string;\n\tisMainMedia?: boolean;\n\tstarRating?: number;\n\tisAvatar?: boolean;\n};\n\nexport const ImageBlockComponent = ({\n\tformat,\n\telement,\n\thideCaption,\n\ttitle,\n\tisMainMedia,\n\tstarRating,\n\tisAvatar,\n}: Props) => {\n\tconst { role } = element;\n\treturn (\n\t\t<ImageComponent\n\t\t\telement={element}\n\t\t\tformat={format}\n\t\t\thideCaption={hideCaption}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tstarRating={starRating}\n\t\t\trole={role}\n\t\t\ttitle={title}\n\t\t\tisAvatar={isAvatar}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ImageComponent.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":142,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":142,"endColumn":35},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":143,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":158,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":210,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":219,"endColumn":13},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":233,"column":4,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":233,"endColumn":17},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":233,"column":4,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":235,"endColumn":43,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[4769,4861],"text":"element.media?.allImages[0]?.fields.width"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":238,"column":4,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":238,"endColumn":17},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":238,"column":4,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":240,"endColumn":44,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[4899,4992],"text":"element.media?.allImages[0]?.fields.height"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":276,"column":28,"nodeType":"Punctuator","messageId":"preferNullish","endLine":276,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5787,5789],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":307,"column":28,"nodeType":"Punctuator","messageId":"preferNullish","endLine":307,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6350,6352],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":339,"column":28,"nodeType":"Punctuator","messageId":"preferNullish","endLine":339,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6960,6962],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":370,"column":45,"nodeType":"Punctuator","messageId":"preferNullish","endLine":370,"endColumn":47,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7902,7904],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":391,"column":41,"nodeType":"Punctuator","messageId":"preferNullish","endLine":391,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8485,8487],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":401,"column":40,"nodeType":"Punctuator","messageId":"preferNullish","endLine":401,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8748,8750],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay } from '@guardian/libs';\nimport {\n\tbetween,\n\tbrandAltBackground,\n\tfrom,\n\theadline,\n\tneutral,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Caption } from './Caption';\nimport { Hide } from './Hide';\nimport { Picture } from './Picture';\nimport { StarRating } from './StarRating/StarRating';\n\ntype Props = {\n\telement: ImageBlockElement;\n\trole: RoleType;\n\tformat: ArticleFormat;\n\thideCaption?: boolean;\n\tisMainMedia?: boolean;\n\tstarRating?: number;\n\ttitle?: string;\n\tisAvatar?: boolean;\n};\n\nconst starsWrapper = css`\n\tbackground-color: ${brandAltBackground.primary};\n\n\tposition: absolute;\n\t${until.tablet} {\n\t\tbottom: 0;\n\t}\n\t${from.tablet} {\n\t\ttop: 0;\n\t}\n\n\t/* Stars Padding from largest to smallest width */\n\t${from.leftCol} {\n\t\tpadding-left: 5px;\n\t}\n\n\t${between.phablet.and.leftCol} {\n\t\tpadding-left: 0px;\n\t\tmargin-left: -0px;\n\t}\n\n\t${until.phablet} {\n\t\tpadding-left: 10px;\n\t\tmargin-left: 0px;\n\t}\n`;\n\nconst PositionStarRating: React.FC<{ rating: number }> = ({ rating }) => (\n\t<div css={starsWrapper}>\n\t\t<StarRating rating={rating} size=\"large\" />\n\t</div>\n);\n\nconst basicTitlePadding = css`\n\t${until.tablet} {\n\t\tpadding-top: 4px;\n\t\tpadding-bottom: 14px;\n\t\tpadding-left: 20px;\n\t\tpadding-right: 20px;\n\t}\n\n\t${from.tablet} {\n\t\tpadding-top: 4px;\n\t\tpadding-bottom: 17px;\n\t\tpadding-left: 20px;\n\t\tpadding-right: 20px;\n\t}\n`;\n\nconst moreTitlePadding = css`\n\tpadding-top: 4px;\n\n\t${until.tablet} {\n\t\tpadding-bottom: 14px;\n\t\tpadding-left: 20px;\n\t\tpadding-right: 40px;\n\t}\n\n\t${until.mobileLandscape} {\n\t\tpadding-left: 10px;\n\t}\n\n\t${from.tablet} {\n\t\tpadding-bottom: 17px;\n\t\tpadding-left: 20px;\n\t\tpadding-right: 20px;\n\t}\n\n\t${from.leftCol} {\n\t\tpadding-left: 160px;\n\t}\n\n\t${from.wide} {\n\t\tpadding-left: 240px;\n\t}\n`;\n\nconst titleWrapper = (palette: Palette) => css`\n\tposition: absolute;\n\tbottom: 0;\n\twidth: 100%;\n\n\t${until.desktop} {\n\t\t${headline.xxsmall({ fontWeight: 'light' })}\n\t}\n\t${until.phablet} {\n\t\t${headline.xxxsmall({ fontWeight: 'light' })}\n\t}\n\t${from.desktop} {\n\t\t${headline.xsmall({ fontWeight: 'light' })}\n\t}\n\tcolor: ${neutral[100]};\n\tbackground: linear-gradient(transparent, ${neutral[0]});\n\n\t:before {\n\t\tbackground-color: ${palette.background.imageTitle};\n\t\tdisplay: block;\n\t\tcontent: '';\n\t\twidth: 8.75rem;\n\t\t${until.desktop} {\n\t\t\theight: 0.5rem;\n\t\t}\n\t\t${from.desktop} {\n\t\t\theight: 0.75rem;\n\t\t}\n\n\t\tmargin-bottom: calc(1.25rem / 3);\n\t}\n`;\n\nconst ImageTitle: React.FC<{\n\ttitle: string;\n\trole: RoleType;\n\tpalette: Palette;\n}> = ({ title, role, palette }) => {\n\tswitch (role) {\n\t\tcase 'inline':\n\t\tcase 'thumbnail':\n\t\tcase 'halfWidth':\n\t\tcase 'supporting':\n\t\t\treturn (\n\t\t\t\t<h2 css={[titleWrapper(palette), basicTitlePadding]}>\n\t\t\t\t\t{title}\n\t\t\t\t</h2>\n\t\t\t);\n\t\tcase 'showcase':\n\t\tcase 'immersive':\n\t\t\treturn (\n\t\t\t\t<h2 css={[titleWrapper(palette), moreTitlePadding]}>{title}</h2>\n\t\t\t);\n\t}\n};\n\nconst Row = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst CaptionToggle = () => (\n\t<>\n\t\t{}\n\t\t<label\n\t\t\thtmlFor=\"the-checkbox\"\n\t\t\tcss={css`\n\t\t\t\tposition: absolute;\n\t\t\t\tright: 5px;\n\t\t\t\twidth: 32px;\n\t\t\t\theight: 32px;\n\t\t\t\tz-index: 1;\n\t\t\t\t/* We're using rgba here for the opactiy */\n\t\t\t\tbackground-color: rgba(18, 18, 18, 0.6);\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tbottom: 6px;\n\t\t\t\tborder: none;\n\t\t\t\tcursor: pointer;\n\n\t\t\t\tsvg {\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tmargin: auto;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tfill: white;\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t<svg width=\"6\" height=\"14\" fill=\"white\" viewBox=\"0 0 6 14\">\n\t\t\t\t<path d=\"M4.6 12l-.4 1.4c-.7.2-1.9.6-3 .6-.7 0-1.2-.2-1.2-.9 0-.2 0-.3.1-.5l2-6.7H.7l.4-1.5 4.2-.6h.2L3 12h1.6zm-.3-9.2c-.9 0-1.4-.5-1.4-1.3C2.9.5 3.7 0 4.6 0 5.4 0 6 .5 6 1.3c0 1-.8 1.5-1.7 1.5z\" />\n\t\t\t</svg>\n\t\t</label>\n\t\t{/* Hidden input used to toggle the caption using css */}\n\t\t<input type=\"checkbox\" id=\"the-checkbox\" />\n\t</>\n);\n\nexport const ImageComponent = ({\n\telement,\n\tformat,\n\thideCaption,\n\trole,\n\tisMainMedia,\n\tstarRating,\n\ttitle,\n\tisAvatar,\n}: Props) => {\n\tconst shouldLimitWidth =\n\t\t!isMainMedia &&\n\t\t(role === 'showcase' || role === 'supporting' || role === 'immersive');\n\tconst isNotOpinion =\n\t\tformat.design !== ArticleDesign.Comment &&\n\t\tformat.design !== ArticleDesign.Editorial;\n\n\t// We get the first 'media' height and width. This doesn't match the actual image height and width but that's ok\n\t// because the image sources and CSS deal with the sizing. What the height and width gives us is a true\n\t// ratio to apply to the image in the page, so the browser's pre-parser can reserve the space.\n\t//\n\t// The default is the 5:3 standard that The Grid suggests, at our wide breakpoint width.\n\tconst imageWidth =\n\t\t(element.media &&\n\t\t\telement.media.allImages[0] &&\n\t\t\telement.media.allImages[0].fields.width) ||\n\t\t'620';\n\tconst imageHeight =\n\t\t(element.media &&\n\t\t\telement.media.allImages[0] &&\n\t\t\telement.media.allImages[0].fields.height) ||\n\t\t'372';\n\n\tconst palette = decidePalette(format);\n\n\tif (\n\t\tisMainMedia &&\n\t\tformat.display === ArticleDisplay.Immersive &&\n\t\tisNotOpinion\n\t) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\t/* These styles depend on the containing layout component wrapping the main media\n                    with a div set to 100vh. This is the case for ImmersiveLayout which should\n                    always be used if display === 'immersive' */\n\t\t\t\t\theight: 80vh;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tmin-height: 25rem;\n\n\t\t\t\t\t${from.desktop} {\n\t\t\t\t\t\theight: 100vh;\n\t\t\t\t\t\tmin-height: 31.25rem;\n\t\t\t\t\t}\n\t\t\t\t\t${from.wide} {\n\t\t\t\t\t\tmin-height: 50rem;\n\t\t\t\t\t}\n\t\t\t\t\timg {\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Picture\n\t\t\t\t\trole={role}\n\t\t\t\t\tformat={format}\n\t\t\t\t\timageSources={element.imageSources}\n\t\t\t\t\talt={element.data.alt || ''}\n\t\t\t\t\twidth={imageWidth}\n\t\t\t\t\theight={imageHeight}\n\t\t\t\t\tisLazy={!isMainMedia}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t\t{title && (\n\t\t\t\t\t<ImageTitle title={title} role={role} palette={palette} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (hideCaption) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tposition: relative;\n\n\t\t\t\t\timg {\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t\t${isAvatar && 'border-radius: 50%;'}\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Picture\n\t\t\t\t\trole={role}\n\t\t\t\t\tformat={format}\n\t\t\t\t\timageSources={element.imageSources}\n\t\t\t\t\talt={element.data.alt || ''}\n\t\t\t\t\twidth={imageWidth}\n\t\t\t\t\theight={imageHeight}\n\t\t\t\t\tisLazy={!isMainMedia}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t\t{starRating && <PositionStarRating rating={starRating} />}\n\t\t\t\t{title && (\n\t\t\t\t\t<ImageTitle title={title} role={role} palette={palette} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tposition: relative;\n\n\t\t\t\t\timg {\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t\t${isAvatar && 'border-radius: 50%;'}\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<Picture\n\t\t\t\t\trole={role}\n\t\t\t\t\tformat={format}\n\t\t\t\t\timageSources={element.imageSources}\n\t\t\t\t\talt={element.data.alt || ''}\n\t\t\t\t\twidth={imageWidth}\n\t\t\t\t\theight={imageHeight}\n\t\t\t\t\tisLazy={!isMainMedia}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t\t{isMainMedia && (\n\t\t\t\t\t// Below tablet, main media images show an info toggle at the bottom right of\n\t\t\t\t\t// the image which, when clicked, toggles the caption as an overlay\n\t\t\t\t\t<Hide when=\"above\" breakpoint=\"tablet\">\n\t\t\t\t\t\t<Row>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t#the-checkbox {\n\t\t\t\t\t\t\t\t\t\t/* Never show the input */\n\t\t\t\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t#the-caption {\n\t\t\t\t\t\t\t\t\t\t/* Hide caption by default */\n\t\t\t\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t#the-checkbox:checked + #the-caption {\n\t\t\t\t\t\t\t\t\t\t/* Show the caption if the input is checked */\n\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{/* CaptionToggle contains the input with id #the-checkbox */}\n\t\t\t\t\t\t\t\t<CaptionToggle />{' '}\n\t\t\t\t\t\t\t\t<div id=\"the-caption\">\n\t\t\t\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\t\t\t\tcaptionText={element.data.caption || ''}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tcredit={element.data.credit}\n\t\t\t\t\t\t\t\t\t\tdisplayCredit={element.displayCredit}\n\t\t\t\t\t\t\t\t\t\tshouldLimitWidth={shouldLimitWidth}\n\t\t\t\t\t\t\t\t\t\tisOverlayed={true}\n\t\t\t\t\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Hide>\n\t\t\t\t)}\n\t\t\t\t{starRating && <PositionStarRating rating={starRating} />}\n\t\t\t\t{title && (\n\t\t\t\t\t<ImageTitle title={title} role={role} palette={palette} />\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{isMainMedia ? (\n\t\t\t\t<Hide when=\"below\" breakpoint=\"tablet\">\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tcaptionText={element.data.caption || ''}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tcredit={element.data.credit}\n\t\t\t\t\t\tdisplayCredit={element.displayCredit}\n\t\t\t\t\t\tshouldLimitWidth={shouldLimitWidth}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t</Hide>\n\t\t\t) : (\n\t\t\t\t<Caption\n\t\t\t\t\tcaptionText={element.data.caption || ''}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tcredit={element.data.credit}\n\t\t\t\t\tdisplayCredit={element.displayCredit}\n\t\t\t\t\tshouldLimitWidth={shouldLimitWidth}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/InstagramBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to attribute where a void return was expected.","line":26,"column":13,"nodeType":"JSXExpressionContainer","messageId":"voidReturnAttribute","endLine":28,"endColumn":5},{"ruleId":"react/jsx-curly-newline","severity":1,"message":"Unexpected newline before '}'.","line":28,"column":4,"nodeType":"Punctuator","messageId":"unexpectedBefore","endLine":28,"endColumn":5,"fix":{"range":[814,818],"text":""}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport { updateIframeHeight } from '../browser/updateIframeHeight';\nimport { ClickToView } from './ClickToView';\n\nconst fullWidthStyles = css`\n\twidth: 100%;\n`;\n\n/**\n * Note the iframe created in this component is dependent on the embedIFrame function being\n * called to be size correctly.\n * src/web/browser/embedIframe/embedIframe.ts\n */\nexport const InstagramBlockComponent: React.FC<{\n\telement: InstagramBlockElement;\n\tindex: number;\n\tisMainMedia: boolean;\n}> = ({ element, index, isMainMedia }) => {\n\treturn (\n\t\t<ClickToView\n\t\t\trole={element.role}\n\t\t\tisTracking={element.isThirdPartyTracking}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tsource={element.source}\n\t\t\tsourceDomain={element.sourceDomain}\n\t\t\tonAccept={() =>\n\t\t\t\tupdateIframeHeight(`iframe[name=\"instagram-embed-${index}\"]`)\n\t\t\t}\n\t\t>\n\t\t\t<iframe\n\t\t\t\tcss={fullWidthStyles}\n\t\t\t\tclassName=\"js-embed__iframe\"\n\t\t\t\tname={`instagram-embed-${index}`}\n\t\t\t\tdata-cy=\"instagram-embed\"\n\t\t\t\ttitle={`Instagram Post ${index}`}\n\t\t\t\tsrcDoc={`${element.html}\n\t\t\t<script src=\"https://interactive.guim.co.uk/libs/iframe-messenger/iframeMessenger.js\"></script>\n\t\t\t<gu-script>iframeMessenger.enableAutoResize();</gu-script>`}\n\t\t\t/>\n\t\t</ClickToView>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/InteractiveBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":138,"column":5,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":138,"endColumn":37},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":138,"column":26,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":138,"endColumn":36},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":141,"column":6,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":141,"endColumn":25},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":168,"column":4,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":223,"endColumn":5},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":229,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":238,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":306,"column":56,"nodeType":"Punctuator","messageId":"preferNullish","endLine":306,"endColumn":58,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8810,8812],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleSpecial } from '@guardian/libs';\nimport { body, space, textSans } from '@guardian/source-foundations';\nimport libDebounce from 'lodash-es/debounce';\nimport { useRef, useState } from 'react';\nimport { interactiveLegacyFigureClasses } from '../layouts/lib/interactiveLegacyStyling';\nimport { decidePalette } from '../lib/decidePalette';\nimport { useOnce } from '../lib/useOnce';\nimport { Caption } from './Caption';\nimport { defaultRoleStyles } from './Figure';\nimport { Placeholder } from './Placeholder';\n\ntype Props = {\n\turl?: string;\n\tscriptUrl?: string;\n\talt?: string;\n\trole?: RoleType;\n\tcaption?: string;\n\tformat: ArticleFormat;\n\telementId?: string;\n\tisMainMedia: boolean;\n};\n\n/*\nHISTORY\n\nA CAPI response for an interactive elements looks like:\n{\n\t\"type\": \"interactive\",\n\t\"assets\": [],\n\t\"interactiveTypeData\": {\n\t\t\"originalUrl\": \"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\",\n\t\t\"source\": \"Guardian\",\n\t\t\"alt\": \"china 1978 gdp\",\n\t\t\"scriptUrl\": \"https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\",\n\t\t\"html\": \"<a href=\\\"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\\\">china 1978 gdp</a>\",\n\t\t\"scriptName\": \"iframe-wrapper\",\n\t\t\"iframeUrl\": \"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\",\n\t\t\"role\": \"supporting\",\n\t\t\"isMandatory\": false\n\t\t}\n}\n\nOn Frontend, the HTML that we send to the browser is:\n<figure class=\"element element-interactive interactive element--supporting\" data-interactive=\"https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\" data-canonical-url=\"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\" data-alt=\"china 1978 gdp\">\n\t<a href=\"https://interactive.guim.co.uk/charts/embed/jan/2019-01-05T14:22:01/embed.html\" data-link-name=\"in body link\" class=\"u-underline\">china 1978 gdp</a>\n</figure>\n\nhttps://github.com/guardian/frontend/blob/e38da96c59eaaef143b9f89b2318eab9dcf2fc5a/common/app/views/fragments/inlineJSNonBlocking.scala.html#L52\nWe use the curl AMD loader to load the boot script from the data-interactive attribute:\n\trequire([el.getAttribute('data-interactive')], function (interactive) {\n\t\tinteractive.boot(el, document, window.guardian.config);\n\t}\n\nPulling from Kibana, 99% of articles use the standard iframe-wrapper/1.0/boot.js\nA vast minority of pre interactive atom use a customised boot.js\nhttps://gist.github.com/gtrufitt/c8f08caef0ae810a42fde5a4c0549ad0\n\n\nTHE STANDARD BOOT.js\nboot.js is defined from https://github.com/guardian/interactive-boot-scripts/blob/master/iframe-wrapper/boot.js\nand is sent with all interactive elements in the scriptUrl from CAPI to do a two simple things:\n- Create an iframe using the href of the anchor and set the src\n- Add event listener to the window to listen for 'message' of the following types\n\t- set-height\n\t- navigate\n\t- scroll-to\n\t- get-location\n\t- get-position\n\t- monitor-position\n\nIt has not been updated since 2016.\n\nMIGRATION FROM FRONTEND\n- For the standard boot.js, we have re-written the behavior in modern JS to avoid the requirement of an AMD loader\nand to avoid loading the boot.js file.\n- For all other files that do not load the standard boot.js, we'll add a AMD loader to the page\n\nFor the remaining few we dynamically load and AMD loader and support the contract as defined with curl AMD loader\n\n*/\nconst decideHeight = (role: RoleType) => {\n\tswitch (role) {\n\t\tcase 'supporting':\n\t\t\treturn 200;\n\t\tdefault:\n\t\t\treturn 500;\n\t}\n};\nconst getMinHeight = (role: RoleType, loaded: boolean) => {\n\tif (loaded) {\n\t\treturn `auto`;\n\t}\n\treturn `${decideHeight(role)}px`;\n};\nconst wrapperStyle = ({\n\tformat,\n\trole,\n\tloaded,\n\tpalette,\n}: {\n\tformat: ArticleFormat;\n\trole: RoleType;\n\tloaded: boolean;\n\tpalette: Palette;\n}) => css`\n\t${format.theme === ArticleSpecial.Labs ? textSans.medium() : body.medium()};\n\tbackground-color: ${palette.background.article};\n\tmin-height: ${getMinHeight(role, loaded)};\n\tposition: relative;\n`;\n\nconst placeholderLinkStyle = css`\n\tposition: absolute;\n\tbottom: ${space[1]}px;\n\tleft: ${space[1]}px;\n`;\n\n// https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\nconst setupWindowListeners = (iframe: HTMLIFrameElement) => {\n\t// Calls func on trailing edge of the wait period\n\n\tconst postMessage = (message: Record<string, unknown>) => {\n\t\tif (iframe.contentWindow) {\n\t\t\tiframe.contentWindow.postMessage(JSON.stringify(message), '*');\n\t\t}\n\t};\n\n\twindow.addEventListener(\n\t\t'message',\n\t\t(event) => {\n\t\t\tif (event.source !== iframe.contentWindow) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet message: Record<string, unknown> | undefined;\n\t\t\ttry {\n\t\t\t\tmessage = JSON.parse(event.data);\n\t\t\t} catch (e) {\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\te,\n\t\t\t\t\t'Json parse Failed on in interactiveBlockComponent',\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (message === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst postPositionMessage = (subscribe?: boolean) => {\n\t\t\t\tconst iframeBox = iframe.getBoundingClientRect();\n\t\t\t\tpostMessage({\n\t\t\t\t\tid: message?.id || '',\n\t\t\t\t\ttype: message?.type || '',\n\t\t\t\t\tsubscribe: !!subscribe,\n\t\t\t\t\tiframeTop: iframeBox.top,\n\t\t\t\t\tiframeRight: iframeBox.right,\n\t\t\t\t\tiframeBottom: iframeBox.bottom,\n\t\t\t\t\tiframeLeft: iframeBox.left,\n\t\t\t\t\tinnerHeight: window.innerHeight,\n\t\t\t\t\tinnerWidth: window.innerWidth,\n\t\t\t\t\tpageYOffset: window.pageYOffset,\n\t\t\t\t});\n\t\t\t};\n\n\t\t\t// Actions\n\t\t\tswitch (message.type) {\n\t\t\t\tcase 'set-height':\n\t\t\t\t\tif (typeof message.value === 'number') {\n\t\t\t\t\t\tiframe.height = message.value.toString();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'navigate':\n\t\t\t\t\tif (typeof message.value === 'string') {\n\t\t\t\t\t\tdocument.location.href = message.value;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'scroll-to':\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof message.x === 'number' &&\n\t\t\t\t\t\ttypeof message.y === 'number'\n\t\t\t\t\t) {\n\t\t\t\t\t\twindow.scrollTo(message.x, message.y);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'get-location':\n\t\t\t\t\tpostMessage({\n\t\t\t\t\t\tid: message.id,\n\t\t\t\t\t\ttype: message.type,\n\t\t\t\t\t\thash: window.location.hash,\n\t\t\t\t\t\thost: window.location.host,\n\t\t\t\t\t\thostname: window.location.hostname,\n\t\t\t\t\t\thref: window.location.href,\n\t\t\t\t\t\torigin: window.location.origin,\n\t\t\t\t\t\tpathname: window.location.pathname,\n\t\t\t\t\t\tport: window.location.port,\n\t\t\t\t\t\tprotocol: window.location.protocol,\n\t\t\t\t\t\tsearch: window.location.search,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'get-position':\n\t\t\t\t\tpostPositionMessage();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'monitor-position':\n\t\t\t\t\t// Send initial position\n\t\t\t\t\tpostPositionMessage(true);\n\n\t\t\t\t\t// Send updated position on scroll or resize\n\t\t\t\t\twindow.addEventListener(\n\t\t\t\t\t\t'scroll',\n\t\t\t\t\t\tlibDebounce(() => {\n\t\t\t\t\t\t\tpostPositionMessage(true);\n\t\t\t\t\t\t}, 50),\n\t\t\t\t\t);\n\t\t\t\t\twindow.addEventListener(\n\t\t\t\t\t\t'resize',\n\t\t\t\t\t\tlibDebounce(() => {\n\t\t\t\t\t\t\tpostPositionMessage(true);\n\t\t\t\t\t\t}, 50),\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\tfalse,\n\t);\n};\n\nexport const InteractiveBlockComponent = ({\n\turl,\n\tscriptUrl,\n\talt,\n\trole = 'inline',\n\tcaption,\n\tformat,\n\telementId = '',\n\tisMainMedia,\n}: Props) => {\n\tconst wrapperRef = useRef<HTMLDivElement>(null);\n\tconst placeholderLinkRef = useRef<HTMLAnchorElement>(null);\n\tconst [loaded, setLoaded] = useState(false);\n\tconst palette = decidePalette(format);\n\tuseOnce(() => {\n\t\t// We've brought the behavior from boot.js into this file to avoid loading 2 extra scripts\n\t\tif (\n\t\t\tscriptUrl ===\n\t\t\t\t'https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js' &&\n\t\t\turl &&\n\t\t\tplaceholderLinkRef.current\n\t\t) {\n\t\t\tconst iframe = document.createElement('iframe');\n\t\t\tiframe.style.width = '100%';\n\t\t\tiframe.style.border = 'none';\n\t\t\tiframe.height = decideHeight(role).toString();\n\t\t\tif (url.startsWith('http:')) {\n\t\t\t\tiframe.src = url.replace('http:', 'https:');\n\t\t\t} else {\n\t\t\t\tiframe.src = url;\n\t\t\t}\n\n\t\t\tsetupWindowListeners(iframe);\n\n\t\t\twrapperRef.current?.appendChild(iframe);\n\n\t\t\tsetLoaded(true);\n\t\t} else if (scriptUrl) {\n\t\t\t// We're going to use curl AMD loader to load the script that the\n\t\t\t// interactive has given us.\n\t\t\twindow.require(\n\t\t\t\t[scriptUrl],\n\t\t\t\t(interactive: {\n\t\t\t\t\tboot: (\n\t\t\t\t\t\tel: HTMLDivElement,\n\t\t\t\t\t\tdocument: Document,\n\t\t\t\t\t\tconfig: unknown,\n\t\t\t\t\t) => void;\n\t\t\t\t}) => {\n\t\t\t\t\tif (wrapperRef.current !== null) {\n\t\t\t\t\t\tinteractive.boot(\n\t\t\t\t\t\t\twrapperRef.current,\n\t\t\t\t\t\t\tdocument,\n\t\t\t\t\t\t\twindow.guardian.config,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tsetLoaded(true);\n\t\t}\n\t}, [loaded]);\n\n\treturn (\n\t\t<>\n\t\t\t<figure\n\t\t\t\tid={elementId} // boot scripts use id when inserting interactive content\n\t\t\t\tref={wrapperRef}\n\t\t\t\tcss={[\n\t\t\t\t\tdefaultRoleStyles(role, format),\n\t\t\t\t\twrapperStyle({ format, role, loaded, palette }),\n\t\t\t\t]}\n\t\t\t\tclassName={interactiveLegacyFigureClasses(\n\t\t\t\t\t'model.dotcomrendering.pageElements.InteractiveBlockElement',\n\t\t\t\t\trole,\n\t\t\t\t)}\n\t\t\t\tdata-alt={alt} // for compatibility with custom boot scripts\n\t\t\t\tdata-cypress={`interactive-element-${encodeURI(alt || '')}`}\n\t\t\t\tdata-spacefinder-role={role}\n\t\t\t>\n\t\t\t\t{!loaded && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Placeholder // removed by HydrateInteractiveOnce\n\t\t\t\t\t\t\theight={decideHeight(role)}\n\t\t\t\t\t\t\tshouldShimmer={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tref={placeholderLinkRef}\n\t\t\t\t\t\t\tdata-name=\"placeholder\" // removed by HydrateInteractiveOnce\n\t\t\t\t\t\t\tcss={placeholderLinkStyle}\n\t\t\t\t\t\t\thref={url}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{alt}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</figure>\n\t\t\t{caption && (\n\t\t\t\t<Caption\n\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/InteractiveBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":36,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":36,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":61,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":85,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":85,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":110,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":110,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":136,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":136,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { InteractiveBlockComponent } from './InteractiveBlockComponent.importable';\nimport { TextBlockComponent } from './TextBlockComponent';\n\nexport default {\n\tcomponent: InteractiveBlockComponent,\n\ttitle: 'Components/InteractiveBlockComponent',\n};\nconst textHtml =\n\t'<p>US and British intelligence agencies have successfully cracked much of the online encryption relied upon by hundreds of millions of people to protect the privacy of their personal data, online transactions and emails, according to top-secret documents revealed by former contractor Edward Snowden.</p>';\n\nconst SomeText = () => (\n\t<TextBlockComponent\n\t\thtml={textHtml}\n\t\tformat={{\n\t\t\ttheme: ArticlePillar.News,\n\t\t\tdesign: ArticleDesign.Standard,\n\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t}}\n\t\tisFirstParagraph={false}\n\t/>\n);\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tpadding-left: 250px;\n\t\t\tpadding-right: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const Default = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<InteractiveBlockComponent\n\t\t\t\turl=\"https://interactive.guim.co.uk/uploader/embed/2018/01/archive-zip/giv-3902O7VEVpcWiCO7/\"\n\t\t\t\tscriptUrl=\"https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\"\n\t\t\t\talt=\"map\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t</Container>\n\t);\n};\nDefault.story = { name: 'default' };\n\nexport const InlineMap = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<InteractiveBlockComponent\n\t\t\t\turl=\"https://interactive.guim.co.uk/uploader/embed/2020/11/nagorno_karabakh_map/giv-3902efc3KhF4zInV/\"\n\t\t\t\tscriptUrl=\"https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\"\n\t\t\t\talt=\"The agreement mediated by Russia in Nagorno-Karabakh\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t</Container>\n\t);\n};\nInlineMap.story = { name: 'Inline interactive Map' };\n\nexport const Showcase = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<InteractiveBlockComponent\n\t\t\t\turl=\"https://interactive.guim.co.uk/embed/from-tool/photo-collage/index.html?vertical=News&opinion-tint=false&left-image=https%3A%2F%2Fmedia.gutools.co.uk%2Fimages%2F84bd48ec5962601f8550286bfb5c2093fa0a3ffe%3Fcrop%3D0_70_3500_2100&left-caption=A%20woman%20stands%20during%20a%20song%20ahead%20of%20Trump’s%20remarks%20at%20the%20King%20Jesus%20International%20Ministry%20in%20Miami.%20Photo%3A%20Tom%20Brenner%2FReuters&right-image=https%3A%2F%2Fmedia.gutools.co.uk%2Fimages%2F9eb6381555963f1dc58c637adf2f3dc08f283e58%3Fcrop%3D0_26_3000_1800&right-caption=People%20give%20thumbs%20down%20to%20media%20covering%20the%20Trump%20campaign%20event%20held%20at%20the%20King%20Jesus%20International%20Ministry.%20Photo%3A%20Joe%20Raedle%2FGetty&always-place-captions-below=false\"\n\t\t\t\tscriptUrl=\"https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\"\n\t\t\t\talt=\"Photo collage\"\n\t\t\t\trole=\"showcase\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t</Container>\n\t);\n};\nShowcase.story = { name: 'Showcase interactive element' };\n\nexport const WithCaption = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<InteractiveBlockComponent\n\t\t\t\turl=\"https://interactive.guim.co.uk/uploader/embed/2020/11/nagorno_karabakh_map/giv-3902efc3KhF4zInV/\"\n\t\t\t\tscriptUrl=\"https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js\"\n\t\t\t\talt=\"The agreement mediated by Russia in Nagorno-Karabakh\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tcaption=\"There’s (normally) such a lovely atmosphere on this tee. A par start and you are happy. You don’t want to hit it right, with the bunker and worse out there. The ideal shot is a little fade off the left side with a driver. You have more chance with your second shot if missing it left. The second shot is a case of ‘don’t go long.’ It’s a common theme about not short-siding yourself at Augusta but it probably applies more at the 1st than elsewhere. Hit to the heart of the green and try to two putt. A couple of the back pins are OK but you can have swinging putts to the front ones.\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t</Container>\n\t);\n};\nWithCaption.story = { name: 'with caption' };\n\nexport const NonBootJs = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<InteractiveBlockComponent\n\t\t\t\turl=\"https://gdn-cdn.s3.amazonaws.com/quiz-builder/c65f1acf-eefd-4985-913d-74ae12eb1f35/boot.js\"\n\t\t\t\tscriptUrl=\"https://gdn-cdn.s3.amazonaws.com/quiz-builder/c65f1acf-eefd-4985-913d-74ae12eb1f35/boot.js\"\n\t\t\t\talt=\"Bird Quiz\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t\t<SomeText />\n\t\t</Container>\n\t);\n};\nNonBootJs.story = { name: 'Non-boot.js interactive element' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/InteractiveContentsBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { NumberedList } from '../../../fixtures/generated/articles/NumberedList';\nimport { enhanceInteractiveContentsElements } from '../../model/enhance-interactive-contents-elements';\nimport { InteractiveContentsBlockComponent } from './InteractiveContentsBlockComponent';\n\n// @ts-expect-error: we know that NumberedList fixture has an interactive content block\nconst interactiveContentsBlock: InteractiveContentsBlockElement =\n\tenhanceInteractiveContentsElements(NumberedList.blocks)[0].elements.find(\n\t\t(block) =>\n\t\t\tblock._type ===\n\t\t\t'model.dotcomrendering.pageElements.InteractiveContentsBlockElement',\n\t);\n\nexport default {\n\tcomponent: InteractiveContentsBlockComponent,\n\ttitle: 'Components/InteractiveContentsBlockElement',\n};\n\nexport const Default = () => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin: 20px;\n\t\t`}\n\t>\n\t\t<InteractiveContentsBlockComponent\n\t\t\tsubheadingLinks={interactiveContentsBlock.subheadingLinks}\n\t\t\tendDocumentElementId={interactiveContentsBlock.endDocumentElementId}\n\t\t/>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/InteractiveContentsBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":141,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":144,"endColumn":13},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":178,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":178,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4500,4503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4500,4503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":178,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":178,"endColumn":22},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":183,"column":61,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":183,"endColumn":63},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":191,"column":9,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":191,"endColumn":48,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[4956,4995],"text":"endElement?.isIntersecting"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":220,"column":9,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":220,"endColumn":37,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[5881,5909],"text":"element?.target.id"},"desc":"Change to an optional chain."}]},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":274,"column":5,"nodeType":"JSXElement","messageId":"missingType","endLine":287,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tborder,\n\tfrom,\n\theadline,\n\tneutral,\n\tspace,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { SvgChevronDownSingle } from '@guardian/source-react-components';\nimport { useCallback, useEffect, useState } from 'react';\nimport { getZIndex } from '../lib/getZIndex';\n\nconst liStyles = css`\n\tborder-top: 1px solid ${neutral[86]};\n\tborder-top-width: 1px;\n\tborder-top-style: solid;\n\tborder-top-color: ${neutral[86]};\n\t:hover {\n\t\tbackground-color: ${neutral[93]};\n\t}\n`;\n\nconst borderRightStyles = css`\n\t${from.mobileLandscape} {\n\t\tborder-right: 1px solid ${neutral[86]};\n\t\tborder-right-width: 1px;\n\t\tborder-right-style: solid;\n\t\tborder-right-color: ${neutral[86]};\n\t}\n`;\n\nconst linkStyles = css`\n\tdisplay: flex;\n\t${headline.xxsmall({ fontWeight: 'light' })}\n\n\tpadding-top: ${space[2]}px;\n\tpadding-bottom: ${space[2]}px;\n\tpadding-left: ${space[3]}px;\n\tpadding-right: ${space[3]}px;\n\n\t/* remove a tag link styling */\n\ttext-decoration: inherit;\n\tcolor: inherit;\n`;\n\nconst numberStyles = css`\n\tpadding-right: ${space[2]}px;\n\t${headline.xxsmall({ fontWeight: 'bold' })}\n`;\n\nconst headerStyles = css`\n\t${headline.medium({ fontWeight: 'bold' })}\n\tpadding-left: ${space[3]}px;\n\tpadding-bottom: ${space[3]}px;\n`;\n\nconst stickyNavBaseStyles = css`\n\twidth: 90%;\n\t${from.tablet} {\n\t\tmax-width: 650px;\n\t\tmargin-left: ${space[4]}px;\n\t}\n\tbackground-color: ${neutral[100]};\n\tborder: 1px solid ${border.secondary};\n\ttop: 0;\n\t${getZIndex('banner')}\n`;\n\nconst olStyles = css`\n\tdisplay: grid;\n\t${from.mobileLandscape} {\n\t\tgrid-template-columns: 1fr 1fr;\n\t}\n`;\n\nconst stickyOlStyles = (showStickyNavOption: boolean) => css`\n\t${stickyNavBaseStyles}\n\ttop: 0;\n\tposition: fixed;\n\tmargin-top: ${space[12]}px;\n\tmax-height: 90vh;\n\toverflow-y: auto;\n\tdisplay: none;\n\t${showStickyNavOption && 'display: grid;'}\n`;\n\nconst wrapperStyles = css`\n\tmargin-top: -5px; /* a hack to get tighter margin between interactive element and Divider */\n\n\t${from.tablet} {\n\t\tmargin-left: -20px;\n\t\twidth: calc(100% + 20px);\n\t}\n\t${from.leftCol} {\n\t\tmargin-left: -10px;\n\t\twidth: calc(100% + 10px);\n\t}\n`;\n\nconst stickyNavCurrentHeaderStyles = css`\n\theight: ${space[12]}px;\n\tpadding: ${space[4]}px;\n\n\tdisplay: flex;\n\talign-items: center;\n\t${headline.xxsmall({ fontWeight: 'bold' })}\n\n\t${until.mobileLandscape} {\n\t\t${headline.xxxsmall({ fontWeight: 'bold' })}\n\t}\n\tposition: fixed;\n\n\tcursor: pointer;\n\tborder-top: 0;\n\tbox-shadow: 0 4px 12px 0 rgb(0 0 0 / 5%);\n`;\n\nconst SVGStyles = css`\n\twidth: ${space[5]}px;\n\tdisplay: flex;\n\tmargin-right: ${space[2]}px;\n\ttransform: translateY(-3px) rotate(0deg);\n\ttransition: transform 250ms ease-out;\n`;\n\nconst SVGTransitionStyles = css`\n\ttransform: translateY(-3px) rotate(180deg);\n\ttransition: transform 250ms ease-out;\n`;\n\ntype Props = {\n\tsubheadingLinks: SubheadingBlockElement[];\n\tendDocumentElementId?: string;\n};\n\ninterface EnhancedSubheadingType extends SubheadingBlockElement {\n\tref?: HTMLElement | null;\n}\n\nexport const InteractiveContentsBlockComponent = ({\n\tsubheadingLinks,\n\tendDocumentElementId,\n}: Props) => {\n\tconst [showStickyNavOption, setShowStickyNavOption] =\n\t\tuseState<boolean>(false);\n\n\t// Loop through subheadingLinks and add a reference + reverse each object\n\tconst [enhancedSubheadings, setEnhancedSubheadings] = useState<\n\t\tEnhancedSubheadingType[]\n\t>([]);\n\tuseEffect(() => {\n\t\tsetEnhancedSubheadings(\n\t\t\tsubheadingLinks.map((subheadingLink) => ({\n\t\t\t\t...subheadingLink,\n\t\t\t\tref: document.getElementById(subheadingLink.elementId),\n\t\t\t})),\n\t\t);\n\t}, [subheadingLinks, setEnhancedSubheadings]);\n\n\t// set the height explicitly of the container as to make sure that when we detach\n\t// list elements we do not effect the page height\n\tconst [height, setHeight] = useState<number>();\n\tconst divRef = useCallback((node: HTMLDivElement | null) => {\n\t\tif (node) setHeight(node.getBoundingClientRect().height);\n\t}, []);\n\n\tconst [stickyNavCurrentHeader, setStickyNavCurrentHeader] =\n\t\tuseState<null | EnhancedSubheadingType>(null);\n\n\t// The sticky header needs to be based on the section of the article that is being view\n\t// We accomplish this by\n\t// -> Watching each of the elements with an intersection observer\n\t// -> If we've reached the 'endDocument' element stop displaying\n\t// -> If we stop intersecting with the current element, and its in view > show the preview element\n\t// -> If we're intersecting with an element set that to the active one\n\t// -> If the end element is in view, but the last element is not > show the last element\n\tuseEffect((): any => {\n\t\tif ('IntersectionObserver' in window) {\n\t\t\tconst getSubheadingIndexById = (id: string): number =>\n\t\t\t\tenhancedSubheadings.findIndex((item) => item.ref?.id === id);\n\n\t\t\tconst onObserve = (entries: IntersectionObserverEntry[]) => {\n\t\t\t\t// Check if we've reached the end of the document\n\t\t\t\tconst endElement = endDocumentElementId\n\t\t\t\t\t? entries.find(\n\t\t\t\t\t\t\t(entry) => entry.target.id === endDocumentElementId,\n\t\t\t\t\t  )\n\t\t\t\t\t: undefined;\n\n\t\t\t\tif (endElement && endElement.isIntersecting)\n\t\t\t\t\treturn setStickyNavCurrentHeader(null);\n\n\t\t\t\t// Check if the current element is in this update\n\t\t\t\tconst currentElement = entries.find(\n\t\t\t\t\t(entry) =>\n\t\t\t\t\t\tentry.target.id === stickyNavCurrentHeader?.elementId,\n\t\t\t\t);\n\n\t\t\t\t// If we're no longer intersecting with the current element &\n\t\t\t\t// it's still on the screen, switch to the preview element\n\t\t\t\tif (\n\t\t\t\t\tcurrentElement &&\n\t\t\t\t\t!currentElement.isIntersecting &&\n\t\t\t\t\tcurrentElement.boundingClientRect.y > 0\n\t\t\t\t) {\n\t\t\t\t\tconst index = getSubheadingIndexById(\n\t\t\t\t\t\tcurrentElement.target.id,\n\t\t\t\t\t);\n\t\t\t\t\tif (index > 0)\n\t\t\t\t\t\treturn setStickyNavCurrentHeader(\n\t\t\t\t\t\t\tenhancedSubheadings[index - 1],\n\t\t\t\t\t\t);\n\t\t\t\t\t// We've scrolled back past the top element\n\t\t\t\t\treturn setStickyNavCurrentHeader(null);\n\t\t\t\t}\n\n\t\t\t\t// Check for entry of new element\n\t\t\t\tconst element = entries.find((entry) => entry.isIntersecting);\n\t\t\t\tif (element && element.target.id)\n\t\t\t\t\treturn setStickyNavCurrentHeader(\n\t\t\t\t\t\tenhancedSubheadings[\n\t\t\t\t\t\t\tgetSubheadingIndexById(element.target.id)\n\t\t\t\t\t\t],\n\t\t\t\t\t);\n\n\t\t\t\t// Check if we're scrolling up past the end of the document and set sticky nav to the last element\n\t\t\t\tconst lastElement =\n\t\t\t\t\tenhancedSubheadings[enhancedSubheadings.length - 1];\n\t\t\t\tif (\n\t\t\t\t\tendElement &&\n\t\t\t\t\tendElement.boundingClientRect.y > 0 &&\n\t\t\t\t\tlastElement.ref &&\n\t\t\t\t\tlastElement.ref.getBoundingClientRect().y < 0\n\t\t\t\t) {\n\t\t\t\t\treturn setStickyNavCurrentHeader(\n\t\t\t\t\t\tenhancedSubheadings[enhancedSubheadings.length - 1],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst observer = new IntersectionObserver(onObserve, {\n\t\t\t\t// Move the 'observation area' to the top of the page\n\t\t\t\trootMargin: `0px 0px -100% 0px`,\n\t\t\t});\n\n\t\t\tenhancedSubheadings.forEach(\n\t\t\t\t(item) => item.ref && observer.observe(item.ref),\n\t\t\t);\n\n\t\t\tif (endDocumentElementId) {\n\t\t\t\tconst endDocumentRef =\n\t\t\t\t\tdocument.getElementById(endDocumentElementId);\n\t\t\t\tif (endDocumentRef) observer.observe(endDocumentRef);\n\t\t\t}\n\n\t\t\t// Disable the observer\n\t\t\treturn () => observer.disconnect();\n\t\t}\n\t}, [\n\t\tenhancedSubheadings,\n\t\tsetStickyNavCurrentHeader,\n\t\tstickyNavCurrentHeader,\n\t\tendDocumentElementId,\n\t]);\n\n\treturn (\n\t\t<div ref={divRef} css={wrapperStyles} style={height ? { height } : {}}>\n\t\t\t<h2 css={headerStyles} data-ignore=\"global-h2-styling\">\n\t\t\t\tContents\n\t\t\t</h2>\n\t\t\t{/* only show sticky nav header if defined */}\n\t\t\t{stickyNavCurrentHeader && (\n\t\t\t\t<button\n\t\t\t\t\tcss={[stickyNavBaseStyles, stickyNavCurrentHeaderStyles]}\n\t\t\t\t\tonClick={() => setShowStickyNavOption(!showStickyNavOption)}\n\t\t\t\t>\n\t\t\t\t\t<span\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tSVGStyles,\n\t\t\t\t\t\t\tshowStickyNavOption && SVGTransitionStyles,\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<SvgChevronDownSingle />\n\t\t\t\t\t</span>\n\t\t\t\t\t{stickyNavCurrentHeader.html}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t\t<ol\n\t\t\t\tdata-ignore=\"global-ol-styling\"\n\t\t\t\tcss={[\n\t\t\t\t\tolStyles,\n\t\t\t\t\t// we detach `ol` from the container when `stickyNavCurrentHeader` is defined\n\t\t\t\t\t// this allows us to reuse the list without redefining it\n\t\t\t\t\tstickyNavCurrentHeader &&\n\t\t\t\t\t\tstickyOlStyles(showStickyNavOption),\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t{subheadingLinks.map((subheadingLink, index) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\tliStyles,\n\t\t\t\t\t\t\t\tindex % 2 === 0 && borderRightStyles,\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t\t\t\tcss={linkStyles}\n\t\t\t\t\t\t\t\thref={`#${subheadingLink.elementId}`}\n\t\t\t\t\t\t\t\tdata-title={subheadingLink.html}\n\t\t\t\t\t\t\t\tonClick={() => setShowStickyNavOption(false)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span css={numberStyles}>{index + 1}</span>\n\t\t\t\t\t\t\t\t{subheadingLink.html}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ol>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Island.tsx","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":1,"column":0,"nodeType":null,"endLine":1,"endColumn":64},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":60,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":65,"endColumn":13},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":67,"column":9,"nodeType":"MemberExpression","messageId":"anyAssignment","endLine":67,"endColumn":27}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .name on an `any` value.","line":67,"column":9,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":67,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/* eslint-disable @typescript-eslint/no-unsafe-member-access */\n\nimport { Placeholder } from './Placeholder';\n\ntype When = 'idle' | 'visible';\n\ninterface HydrateProps {\n\tdeferUntil?: When;\n\tclientOnly?: false;\n\tplaceholderHeight?: never;\n\tchildren: JSX.Element;\n}\n\ninterface ClientOnlyProps {\n\tdeferUntil?: When;\n\tclientOnly: true;\n\tplaceholderHeight?: number;\n\tchildren: JSX.Element;\n}\n\n/**\n * Props\n *\n * We use a union type here to support conditional typing. This means you\n * can only supply placeholderHeight if clientOnly is true.\n */\ntype Props = HydrateProps | ClientOnlyProps;\n\nconst decideChildren = (\n\tchildren: JSX.Element,\n\tclientOnly?: boolean,\n\tplaceholderHeight?: number,\n) => {\n\tif (!clientOnly) return children; // Server side rendering\n\tif (placeholderHeight)\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\theight={placeholderHeight}\n\t\t\t\tshouldShimmer={false}\n\t\t\t\tbackgroundColor=\"transparent\"\n\t\t\t/>\n\t\t); // Portal using placeholder\n\treturn null; // Portal not using placeholder (this also includes placeholderHeight === 0 - this is intentional)\n};\n\n/**\n * Adds interactivity to the client by either hydrating or inserting content\n *\n * Note. The component passed as children must follow the [MyComponent].importable.tsx\n * namimg convention\n *\n * @param {HydrateProps | ClientOnlyProps} props - JSX Props\n * @param {When} props.deferUntil - Delay when client code should execute\n * \t\t- idle - Execute when browser idle\n * \t\t- visible - Execute when component appears in viewport\n * @param {boolean} props.clientOnly - Should the component be server side rendered\n * @param {number} props.placeholderHeight - The height for the placeholder element\n * @param {JSX.Element} props.children - The component being inserted. Must be a single JSX Element\n */\nexport const Island = ({\n\tdeferUntil,\n\tclientOnly,\n\tplaceholderHeight,\n\tchildren,\n}: Props) => (\n\t<gu-island\n\t\tname={children.type.name}\n\t\tdeferUntil={deferUntil}\n\t\tprops={JSON.stringify(children.props)}\n\t\tclientOnly={clientOnly}\n\t>\n\t\t{decideChildren(children, clientOnly, placeholderHeight)}\n\t</gu-island>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ItemLinkBlockElement.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ItemLinkBlockElement } from './ItemLinkBlockElement';\n\nexport default {\n\tcomponent: ItemLinkBlockElement,\n\ttitle: 'Components/ItemLinkBlockElement',\n};\n\nexport const Default = () => (\n\t<ItemLinkBlockElement html='<ul> <li><p><strong>Title:</strong> <a href=\"https://www.theguardian.com\">Link text</a></p></li> </ul>' />\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ItemLinkBlockElement.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":18,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":57},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":20,"column":29,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":20,"endColumn":71}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { textSans } from '@guardian/source-foundations';\n\ntype Props = {\n\thtml: string;\n};\n\nconst itemLinkStyles = css`\n\t${textSans.medium()}\n\ta {\n\t\t${textSans.medium({ fontWeight: 'bold' })}\n\t}\n\tstrong {\n\t\tdisplay: block;\n\t}\n`;\n\nexport const ItemLinkBlockElement = ({ html }: Props) => {\n\treturn (\n\t\t<div css={itemLinkStyles} dangerouslySetInnerHTML={{ __html: html }} />\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/KeyEventCard.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":73,"column":17,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":73,"endColumn":22},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":84,"column":18,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":84,"endColumn":23},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":95,"column":18,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":95,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { from, neutral } from '@guardian/source-foundations';\nimport { events } from '../../../fixtures/manual/key-events';\nimport type { KeyEvent as KeyEventType } from './KeyEventCard';\nimport { KeyEventCard } from './KeyEventCard';\n\nconst getFormat = (theme: ArticleTheme) => {\n\treturn {\n\t\tdesign: ArticleDesign.Standard,\n\t\tdisplay: ArticleDisplay.Standard,\n\t\ttheme,\n\t};\n};\n\nconst wrapperStyles = css`\n\tpadding-left: 20px;\n\tdisplay: inline-flex;\n\tbackground-color: ${neutral[97]};\n\tmargin: 10px 0;\n\n\t${from.desktop} {\n\t\tbackground-color: ${neutral[93]};\n\t}\n\n\tul {\n\t\toverflow-x: scroll;\n\t\tmargin: 20px 0;\n\n\t\t&::-webkit-scrollbar {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n`;\n\nconst SummaryCard = ({ theme }: { theme: ArticleTheme }) => (\n\t<ul css={wrapperStyles}>\n\t\t<KeyEventCard\n\t\t\ttext={events[0].text}\n\t\t\turl={events[0].url}\n\t\t\tdate={events[0].date}\n\t\t\tformat={getFormat(theme)}\n\t\t\tisSummary={true}\n\t\t/>\n\t</ul>\n);\n\nconst StandardCard = ({\n\ttheme,\n\tcount,\n}: {\n\ttheme: ArticleTheme;\n\tcount: number;\n}) => (\n\t<ul css={wrapperStyles}>\n\t\t{events.slice(0, count).map((event: KeyEventType) => (\n\t\t\t<KeyEventCard\n\t\t\t\ttext={event.text}\n\t\t\t\turl={event.url}\n\t\t\t\tdate={event.date}\n\t\t\t\tformat={getFormat(theme)}\n\t\t\t\tisSummary={event.isSummary}\n\t\t\t/>\n\t\t))}\n\t</ul>\n);\n\nconst Summary = () => (\n\t<>\n\t\t<SummaryCard theme={ArticlePillar.News} />\n\t\t<SummaryCard theme={ArticlePillar.Culture} />\n\t\t<SummaryCard theme={ArticlePillar.Lifestyle} />\n\t\t<SummaryCard theme={ArticlePillar.Sport} />\n\t\t<SummaryCard theme={ArticlePillar.Opinion} />\n\t\t<SummaryCard theme={ArticleSpecial.SpecialReport} />\n\t</>\n);\n\nconst KeyEvent = () => (\n\t<>\n\t\t<StandardCard theme={ArticlePillar.News} count={1} />\n\t\t<StandardCard theme={ArticlePillar.Culture} count={1} />\n\t\t<StandardCard theme={ArticlePillar.Lifestyle} count={1} />\n\t\t<StandardCard theme={ArticlePillar.Sport} count={1} />\n\t\t<StandardCard theme={ArticlePillar.Opinion} count={1} />\n\t\t<StandardCard theme={ArticleSpecial.SpecialReport} count={1} />\n\t</>\n);\n\nconst Multiple = () => (\n\t<>\n\t\t<StandardCard theme={ArticlePillar.News} count={7} />\n\t\t<StandardCard theme={ArticlePillar.Culture} count={7} />\n\t\t<StandardCard theme={ArticlePillar.Lifestyle} count={7} />\n\t\t<StandardCard theme={ArticlePillar.Sport} count={7} />\n\t\t<StandardCard theme={ArticlePillar.Culture} count={7} />\n\t\t<StandardCard theme={ArticlePillar.Opinion} count={7} />\n\t\t<StandardCard theme={ArticleSpecial.SpecialReport} count={7} />\n\t</>\n);\n\nexport default {\n\tcomponent: KeyEventCard,\n\ttitle: 'Components/KeyEventCard',\n};\n\nexport { Summary, KeyEvent, Multiple };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/KeyEventCard.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":99,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { timeAgo } from '@guardian/libs';\nimport { from, neutral, space, textSans } from '@guardian/source-foundations';\nimport { Link } from '@guardian/source-react-components';\nimport { decidePalette } from '../lib/decidePalette';\n\nexport interface KeyEvent {\n\tdate: Date;\n\ttext: string;\n\turl: string;\n\tformat: ArticleFormat;\n\tisSummary: boolean;\n}\n\nconst linkStyles = (palette: Palette) => css`\n\ttext-decoration: none;\n\tline-height: 1.35;\n\n\t&::before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: relative;\n\t\theight: 13px;\n\t\twidth: 13px;\n\t\tborder-radius: 50%;\n\t\tbackground-color: ${palette.background.keyEventBullet};\n\t\tmargin-bottom: ${space[1]}px;\n\t\tz-index: 2;\n\n\t\t${from.tablet} {\n\t\t\theight: 15px;\n\t\t\twidth: 15px;\n\t\t}\n\t}\n\n\t&:hover::before {\n\t\tbackground-color: ${palette.hover.keyEventBullet};\n\t}\n\n\t&:hover {\n\t\tspan {\n\t\t\tborder-bottom: 1px solid ${palette.hover.keyEventLink};\n\t\t}\n\t}\n`;\n\nconst summaryStyles = (palette: Palette) => css`\n\t&::before {\n\t\tbackground-color: ${palette.background.summaryEventBullet};\n\t}\n\n\t&:hover::before {\n\t\tbackground-color: ${palette.hover.summaryEventBullet};\n\t}\n`;\n\nconst listItemStyles = css`\n\tposition: relative;\n\tpadding-bottom: ${space[5]}px;\n\tpadding-top: ${space[3]}px;\n\tpadding-right: ${space[3]}px;\n\tbackground-color: ${neutral[97]};\n\tlist-style: none;\n\tdisplay: block;\n\twidth: 162px;\n\n\t${from.desktop} {\n\t\tbackground-color: ${neutral[93]};\n\t\twidth: 200px;\n\t\tpadding-right: ${space[5]}px;\n\t}\n\n\t&::before {\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\tposition: absolute;\n\t\tborder-top: 1px dotted ${neutral[46]};\n\t\tleft: 0;\n\t\tright: 0;\n\t\ttop: 18px;\n\t}\n\n\t&:last-child::before {\n\t\tborder-top: 0;\n\t}\n`;\n\nconst textStyles = (palette: Palette) => css`\n\t${textSans.small({ fontWeight: 'regular', lineHeight: 'regular' })};\n\tcolor: ${palette.text.keyEvent};\n`;\n\nconst timeStyles = css`\n\t${textSans.xsmall({ fontWeight: 'bold', lineHeight: 'tight' })};\n\tcolor: ${neutral[7]};\n\tdisplay: block;\n`;\n\nexport const KeyEventCard = ({\n\ttext,\n\tdate,\n\turl,\n\tformat,\n\tisSummary,\n}: KeyEvent) => {\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<li css={listItemStyles}>\n\t\t\t<Link\n\t\t\t\tpriority=\"secondary\"\n\t\t\t\tcss={[linkStyles(palette), isSummary && summaryStyles(palette)]}\n\t\t\t\thref={url}\n\t\t\t\tdata-link-name=\"key event card\"\n\t\t\t>\n\t\t\t\t<time\n\t\t\t\t\tdateTime={date.toISOString()}\n\t\t\t\t\tdata-relativeformat=\"med\"\n\t\t\t\t\ttitle={`${date.toLocaleDateString('en-GB', {\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit',\n\t\t\t\t\t\tweekday: 'long',\n\t\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\t\tmonth: 'long',\n\t\t\t\t\t\tday: 'numeric',\n\t\t\t\t\t\ttimeZoneName: 'long',\n\t\t\t\t\t})}`}\n\t\t\t\t\tcss={timeStyles}\n\t\t\t\t>\n\t\t\t\t\t{timeAgo(date.getTime())}\n\t\t\t\t</time>\n\t\t\t\t<span css={textStyles(palette)}>{text}</span>\n\t\t\t</Link>\n\t\t</li>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/KeyEventsContainer.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/KeyEventsContainer.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":23,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":13},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"boolean\" of template literal expression.","line":33,"column":30,"nodeType":"Identifier","messageId":"invalidType","endLine":33,"endColumn":45}],"suppressedMessages":[{"ruleId":"import/no-extraneous-dependencies","severity":2,"message":"'@guardian/common-rendering' should be listed in the project's dependencies. Run 'npm i -S @guardian/common-rendering' to add it","line":3,"column":1,"nodeType":"ImportDeclaration","endLine":3,"endColumn":77,"suppressions":[{"kind":"directive","justification":"it’s a yarn workspace"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { KeyEvent } from '@guardian/common-rendering/src/components/keyEvents';\n// eslint-disable-next-line import/no-extraneous-dependencies -- it’s a yarn workspace\nimport KeyEvents from '@guardian/common-rendering/src/components/keyEvents';\n\ntype Props = {\n\tkeyEvents: Block[];\n\tformat: ArticleFormat;\n\tfilterKeyEvents: boolean;\n};\n\ntype ValidBlock = Block & {\n\ttitle: string;\n\tblockFirstPublished: number;\n};\n\nconst isValidKeyEvent = (keyEvent: Block): keyEvent is ValidBlock => {\n\treturn (\n\t\ttypeof keyEvent.title === 'string' &&\n\t\ttypeof keyEvent.blockFirstPublished === 'number'\n\t);\n};\n\nexport const KeyEventsContainer = ({\n\tkeyEvents,\n\tformat,\n\tfilterKeyEvents,\n}: Props) => {\n\tconst transformedKeyEvents: KeyEvent[] = keyEvents\n\t\t.filter(isValidKeyEvent)\n\t\t.map((keyEvent) => {\n\t\t\treturn {\n\t\t\t\ttext: keyEvent.title,\n\t\t\t\turl: `?filterKeyEvents=${filterKeyEvents}&page=with:block-${keyEvent.id}#block-${keyEvent.id}`,\n\t\t\t\tdate: new Date(keyEvent.blockFirstPublished),\n\t\t\t};\n\t\t});\n\n\treturn (\n\t\t<KeyEvents\n\t\t\tformat={format}\n\t\t\tkeyEvents={transformedKeyEvents}\n\t\t\tsupportsDarkMode={false}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Kicker.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":27,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { PulsingDot } from './PulsingDot.importable';\n\n// Defines a prefix to be used with a headline (e.g. 'Live /')\ntype Props = {\n\ttext: string;\n\tpalette: Palette;\n\tshowPulsingDot?: boolean;\n\tshowSlash?: boolean;\n\tinCard?: boolean; // True when headline is showing inside a card (used to handle coloured backgrounds)\n};\n\nconst kickerStyles = (colour: string) => css`\n\tcolor: ${colour};\n\tfont-weight: 700;\n\tmargin-right: 4px;\n`;\n\nconst slashStyles = css`\n\t&::after {\n\t\tcontent: '/';\n\t\tdisplay: inline-block;\n\t\tmargin-left: 4px;\n\t}\n`;\n\nexport const Kicker = ({\n\ttext,\n\tpalette,\n\tshowPulsingDot,\n\tshowSlash = true,\n\tinCard,\n}: Props) => {\n\tconst kickerColour = inCard\n\t\t? palette.text.cardKicker\n\t\t: palette.text.linkKicker;\n\treturn (\n\t\t<span css={kickerStyles(kickerColour)}>\n\t\t\t{showPulsingDot && <PulsingDot colour={kickerColour} />}\n\t\t\t<span css={showSlash && slashStyles}>{text}</span>\n\t\t</span>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/KnowledgeQuizAtomWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":35,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { KnowledgeQuizAtom } from '@guardian/atoms-rendering';\nimport type { SharingUrlsType } from '@guardian/atoms-rendering/dist/types/types';\n\n// These types are duplicates of those defined in the atom file.\ntype AnswerType = {\n\tid: string;\n\ttext: string;\n\trevealText?: string;\n\tisCorrect: boolean;\n\tanswerBuckets: string[];\n};\n\ntype QuestionType = {\n\tid: string;\n\ttext: string;\n\tanswers: AnswerType[];\n\timageUrl?: string;\n};\n\ntype ResultGroupsType = {\n\ttitle: string;\n\tshareText: string;\n\tminScore: number;\n\tid: string;\n};\n\ntype QuizAtomType = {\n\tid: string;\n\tquestions: QuestionType[];\n\tresultGroups: ResultGroupsType[];\n\tsharingUrls: SharingUrlsType;\n\ttheme: ArticleTheme;\n};\n\nexport const KnowledgeQuizAtomWrapper = (props: QuizAtomType) => {\n\treturn <KnowledgeQuizAtom {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LabsHeader.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":157,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":157,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tborder,\n\tfrom,\n\tlabs,\n\tspace,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport {\n\tLink,\n\tLinkButton,\n\tSvgArrowRightStraight,\n} from '@guardian/source-react-components';\nimport LabsLogo from '../../static/logos/the-guardian-labs.svg';\nimport { Dropdown } from './Dropdown';\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tposition: relative;\n\t\t\theight: 55px;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Left = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Right = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tpadding: ${space[1]}px 0;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst HeaderSection = ({\n\tchildren,\n\tisFirst,\n}: {\n\tchildren: React.ReactNode;\n\tisFirst?: boolean;\n}) => (\n\t<div\n\t\tcss={css`\n\t\t\tborder-right: 1px solid ${border.primary};\n\t\t\theight: 100%;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\n\t\t\t${isFirst ? null : 'padding-left: 10px;'}\n\t\t\tpadding-right: 10px;\n\t\t\t${from.mobileLandscape} {\n\t\t\t\t${isFirst ? null : 'padding-left: 20px;'}\n\t\t\t\tpadding-right: 20px;\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Title = () => (\n\t<div\n\t\tcss={css`\n\t\t\t${textSans.small({ fontWeight: 'bold' })};\n\t\t\tmargin-bottom: 4px;\n\t\t`}\n\t>\n\t\tPaid content\n\t</div>\n);\n\nconst AboutDropdown = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tcolor: black;\n\t\t\t> button {\n\t\t\t\t${textSans.small()};\n\t\t\t\tcolor: black;\n\t\t\t\t:hover {\n\t\t\t\t\tcolor: black;\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst About = () => (\n\t<div\n\t\tcss={css`\n\t\t\t${textSans.small()};\n\t\t\tposition: absolute;\n\t\t\ttop: 55px;\n\t\t\tleft: 0;\n\t\t\tbackground-color: ${labs[400]};\n\t\t\tborder-top: 1px solid ${border.primary};\n\n\t\t\twidth: 100vw;\n\t\t\t${from.desktop} {\n\t\t\t\twidth: 235px;\n\t\t\t}\n\n\t\t\tmargin-left: -10px;\n\t\t\t${from.mobileLandscape} {\n\t\t\t\tmargin-left: -20px;\n\t\t\t}\n\t\t\tpadding: ${space[2]}px 10px;\n\t\t\t${from.mobileLandscape} {\n\t\t\t\tpadding: ${space[3]}px 20px;\n\t\t\t}\n\n\t\t\t> a {\n\t\t\t\tcolor: black;\n\t\t\t}\n\t\t`}\n\t>\n\t\t<p>\n\t\t\tPaid content is paid for and controlled by an advertiser and\n\t\t\tproduced by the Guardian Labs team.\n\t\t</p>\n\t\t<br />\n\t\t<LinkButton\n\t\t\ticonSide=\"right\"\n\t\t\tsize=\"xsmall\"\n\t\t\tpriority=\"subdued\"\n\t\t\ticon={<SvgArrowRightStraight />}\n\t\t\thref=\"https://www.theguardian.com/info/2016/jan/25/content-funding\"\n\t\t>\n\t\t\tLearn more\n\t\t</LinkButton>\n\t</div>\n);\n\nconst Logo = () => (\n\t<Link href=\"https://www.theguardian.com/guardian-labs\">\n\t\t<LabsLogo />\n\t</Link>\n);\n\nexport const LabsHeader = () => (\n\t<Container>\n\t\t<Left>\n\t\t\t<HeaderSection isFirst={true}>\n\t\t\t\t<Title />\n\t\t\t</HeaderSection>\n\t\t\t<HeaderSection>\n\t\t\t\t<AboutDropdown>\n\t\t\t\t\t<Dropdown\n\t\t\t\t\t\tlabel=\"About\"\n\t\t\t\t\t\tlinks={[]}\n\t\t\t\t\t\tid=\"paidfor\"\n\t\t\t\t\t\toverrideColor=\"black\"\n\t\t\t\t\t\tdataLinkName=\"\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<About />\n\t\t\t\t\t</Dropdown>\n\t\t\t\t</AboutDropdown>\n\t\t\t</HeaderSection>\n\t\t</Left>\n\t\t<Right>\n\t\t\t<Logo />\n\t\t</Right>\n\t</Container>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LabsHeader.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":10,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":10,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { border, labs } from '@guardian/source-foundations';\nimport { ElementContainer } from './ElementContainer';\nimport { LabsHeader } from './LabsHeader.importable';\n\nexport default {\n\tcomponent: LabsHeader,\n\ttitle: 'Components/LabsHeader',\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<ElementContainer\n\t\t\tshowSideBorders={true}\n\t\t\tshowTopBorder={false}\n\t\t\tbackgroundColour={labs[400]}\n\t\t\tborderColour={border.primary}\n\t\t>\n\t\t\t<LabsHeader />\n\t\t</ElementContainer>\n\t);\n};\nDefault.story = { name: 'Default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LastUpdated.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { LastUpdated } from './LastUpdated';\n\nexport default {\n\tcomponent: LastUpdated,\n\ttitle: 'Components/LastUpdated',\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<LastUpdated\n\t\t\tlastUpdated={1613763519000}\n\t\t\tlastUpdatedDisplay=\"19.38 GMT\"\n\t\t/>\n\t);\n};\n\nDefault.story = { name: 'Default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LastUpdated.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":10,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { neutral, textSans } from '@guardian/source-foundations';\n\nconst LastUpdated = ({\n\tlastUpdatedDisplay,\n\tlastUpdated,\n}: {\n\tlastUpdatedDisplay: string;\n\tlastUpdated: number;\n}) => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: flex-end;\n\t\t\t\t${textSans.xxsmall()};\n\t\t\t\tcolor: ${neutral[46]};\n\t\t\t`}\n\t\t>\n\t\t\t<time\n\t\t\t\tdateTime={new Date(lastUpdated).toISOString()}\n\t\t\t\ttitle={`Last updated ${new Date(lastUpdated).toLocaleDateString(\n\t\t\t\t\t'en-GB',\n\t\t\t\t\t{\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit',\n\t\t\t\t\t\tweekday: 'long',\n\t\t\t\t\t\tyear: 'numeric',\n\t\t\t\t\t\tmonth: 'long',\n\t\t\t\t\t\tday: 'numeric',\n\t\t\t\t\t\ttimeZoneName: 'long',\n\t\t\t\t\t},\n\t\t\t\t)}`}\n\t\t\t>\n\t\t\t\t{`Updated at ${lastUpdatedDisplay}`}\n\t\t\t</time>\n\t\t</div>\n\t);\n};\n\nexport { LastUpdated };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Lazy.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { useIsInView } from '../lib/useIsInView';\n\ntype Props = {\n\tchildren: JSX.Element;\n\tmargin: number;\n\tdisableFlexStyles?: boolean;\n};\n\n// Ensure the ref wrapper expands. This is used for componenents like\n// MostViewedRightWrapper that needs to check it's parent's height\nconst flexGrowStyles = css`\n\tdisplay: flex;\n\tflex-grow: 1;\n`;\n\nexport const Lazy = ({ children, margin, disableFlexStyles }: Props) => {\n\tconst [hasBeenSeen, setRef] = useIsInView({\n\t\trootMargin: `${margin}px`,\n\t});\n\n\t// Without this check below typescript complains because it thinks\n\t// setRef could be false.\n\tif (typeof setRef !== 'function') {\n\t\treturn null;\n\t}\n\n\t// Why do we check to see if we're disabled here? Because we\n\t// use this as a flag to know when a component is\n\t// being loaded as part of a Chromatic story or not so that\n\t// we can prevent lazy loading our storybook snapshots that we\n\t// use for visual regression\n\tconst renderChildren = hasBeenSeen || Lazy.disabled;\n\treturn (\n\t\t<div ref={setRef} css={!disableFlexStyles && flexGrowStyles}>\n\t\t\t{renderChildren && <>{children}</>}\n\t\t</div>\n\t);\n};\n\nLazy.disabled = false;\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LeftColumn.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":46,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":46,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { ArticleContainer } from './ArticleContainer';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { LeftColumn } from './LeftColumn';\nimport { Placeholder } from './Placeholder';\nimport { RightColumn } from './RightColumn';\n\nexport default {\n\tcomponent: LeftColumn,\n\ttitle: 'Components/LeftColumn',\n};\n\nexport const PartialRightBorder = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"partial\">\n\t\t\t\t\t<>\n\t\t\t\t\t\tThe border to my right is only partial, it does not\n\t\t\t\t\t\tstretch the whole height\n\t\t\t\t\t</>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\theight={500}\n\t\t\t\t\t\twidth={600}\n\t\t\t\t\t\tshouldShimmer={false}\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<>Right column content</>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nPartialRightBorder.story = { name: 'Partial right border' };\n\nexport const RightBorder = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<>The border to my right should stretch the whole height</>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Placeholder\n\t\t\t\t\t\theight={500}\n\t\t\t\t\t\twidth={600}\n\t\t\t\t\t\tshouldShimmer={false}\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<>Right column content</>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nRightBorder.story = { name: 'Full right border' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LeftColumn.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":77,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":82,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { between, border, from, until } from '@guardian/source-foundations';\n\nconst leftWidth = (size: LeftColSize) => {\n\tswitch (size) {\n\t\tcase 'wide': {\n\t\t\treturn css`\n\t\t\t\tpadding-right: 10px;\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\t/* below 1140 */\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\t/* above 1140 */\n\t\t\t\t\tflex-basis: 230px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t\tcase 'compact':\n\t\tdefault: {\n\t\t\treturn css`\n\t\t\t\tpadding-right: 10px;\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\t/* below 1140 */\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\n\t\t\t\t${between.leftCol.and.wide} {\n\t\t\t\t\t/* above 1140, below 1300 */\n\t\t\t\t\tflex-basis: 151px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\n\t\t\t\t${from.wide} {\n\t\t\t\t\t/* above 1300 */\n\t\t\t\t\tflex-basis: 230px;\n\t\t\t\t\tflex-grow: 0;\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\t}\n};\n\nconst positionRelative = css`\n\tposition: relative;\n`;\n\nconst partialRightBorder = (colour: string) => css`\n\t:before {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\theight: 30px;\n\t\twidth: 1px;\n\t\tbackground: ${colour};\n\t}\n`;\n\nconst fullRightBorder = (colour: string) => css`\n\tborder-right: 1px solid ${colour};\n`;\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tborderType?: 'full' | 'partial'; // if no borderType provided -> no border\n\tborderColour?: string;\n\tsize?: LeftColSize;\n};\n\nexport const LeftColumn = ({\n\tchildren,\n\tborderType,\n\tborderColour = border.secondary,\n\tsize = 'compact',\n}: Props) => {\n\treturn (\n\t\t<section\n\t\t\tcss={[\n\t\t\t\tpositionRelative,\n\t\t\t\tleftWidth(size),\n\t\t\t\tborderType === 'full' && fullRightBorder(borderColour),\n\t\t\t]}\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={\n\t\t\t\t\tborderType === 'partial' && partialRightBorder(borderColour)\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Lineup.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":134,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":134,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Lineup } from './Lineup';\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 340px;\n\t\t\tpadding: 20px;\n\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\tbackground: #d9edf6;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst players: PlayerType[] = [\n\t{\n\t\tid: '457037',\n\t\tname: 'Jan Oblak',\n\t\tposition: 'Goal Keeper',\n\t\tlastName: 'Oblak',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '125:47',\n\t\tshirtNumber: '13',\n\t\tevents: [],\n\t},\n\t{\n\t\tid: '412131',\n\t\tname: 'Kieran Trippier',\n\t\tposition: 'Defender',\n\t\tlastName: 'Trippier',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '94:00',\n\t\tshirtNumber: '23',\n\t\tevents: [],\n\t},\n\t{\n\t\tid: '436964',\n\t\tname: 'Stefan Savic',\n\t\tposition: 'Defender',\n\t\tlastName: 'Savic',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '125:47',\n\t\tshirtNumber: '15',\n\t\tevents: [],\n\t},\n\t{\n\t\tid: '489873',\n\t\tname: 'Augusto Felipe',\n\t\tposition: 'Defender',\n\t\tlastName: 'Felipe',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '125:47',\n\t\tshirtNumber: '18',\n\t\tevents: [],\n\t},\n\t{\n\t\tid: '575295',\n\t\tname: 'dos Santos Renan Lodi',\n\t\tposition: 'Defender',\n\t\tlastName: 'Renan Lodi',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '125:47',\n\t\tshirtNumber: '12',\n\t\tevents: [\n\t\t\t{\n\t\t\t\teventTime: '110',\n\t\t\t\teventType: 'booking',\n\t\t\t},\n\t\t\t{\n\t\t\t\teventTime: '120',\n\t\t\t\teventType: 'dismissal',\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tid: '507071',\n\t\tname: 'Angel Correa',\n\t\tposition: 'Midfielder',\n\t\tlastName: 'Correa',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '109:00',\n\t\tshirtNumber: '10',\n\t\tevents: [],\n\t},\n\t{\n\t\tid: '403345',\n\t\tname: 'Jorge Koke',\n\t\tposition: 'Midfielder',\n\t\tlastName: 'Koke',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '125:47',\n\t\tshirtNumber: '6',\n\t\tevents: [],\n\t},\n\t{\n\t\tid: '507070',\n\t\tname: 'Partey Thomas',\n\t\tposition: 'Midfielder',\n\t\tlastName: 'Thomas',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '125:47',\n\t\tshirtNumber: '5',\n\t\tevents: [\n\t\t\t{\n\t\t\t\teventTime: '120',\n\t\t\t\teventType: 'substitution',\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tid: '449616',\n\t\tname: 'Niguez Saul',\n\t\tposition: 'Midfielder',\n\t\tlastName: 'Saul',\n\t\tsubstitute: false,\n\t\ttimeOnPitch: '125:47',\n\t\tshirtNumber: '8',\n\t\tevents: [\n\t\t\t{\n\t\t\t\teventTime: '120',\n\t\t\t\teventType: 'booking',\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport default {\n\tcomponent: Lineup,\n\ttitle: 'Components/Lineup',\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Lineup players={players} />\n\t\t</Container>\n\t);\n};\nDefault.story = { name: 'default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Lineup.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":30,"column":4,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":30,"endColumn":6},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":31,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":62,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":65,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":65,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { textSans } from '@guardian/source-foundations';\n\ntype Props = {\n\tplayers: PlayerType[];\n};\n\nconst Row = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\tposition: relative;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst BackgroundRed = '#cc2b12';\n\nconst BackgroundYellow = '#fb0';\n\nconst Event = ({\n\ttype,\n\ttime,\n}: {\n\ttype: 'substitution' | 'dismissal' | 'booking';\n\ttime: string;\n}) => {\n\tswitch (type) {\n\t\tcase 'dismissal':\n\t\t\treturn (\n\t\t\t\t<i\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\tbackground-color: ${BackgroundRed};\n\t\t\t\t\t\tbackground-position: 0 0;\n\t\t\t\t\t\twidth: 0.5625rem;\n\t\t\t\t\t\theight: 0.75rem;\n\t\t\t\t\t\ttransform: rotate(8deg);\n\t\t\t\t\t\tbackground-size: contain;\n\t\t\t\t\t`}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'booking':\n\t\t\treturn (\n\t\t\t\t<i\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\tbackground-color: ${BackgroundYellow};\n\t\t\t\t\t\tbackground-position: 0 0;\n\t\t\t\t\t\twidth: 0.5625rem;\n\t\t\t\t\t\theight: 0.75rem;\n\t\t\t\t\t\ttransform: rotate(8deg);\n\t\t\t\t\t\tbackground-size: contain;\n\t\t\t\t\t`}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'substitution':\n\t\t\treturn <span>{`(s ${time}')`}</span>;\n\t}\n};\n\nexport const Lineup = ({ players }: Props) => {\n\treturn (\n\t\t<ul>\n\t\t\t{players.map((player) => (\n\t\t\t\t<li\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${textSans.small()}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t\t\t\twidth: 30px;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{player.shirtNumber}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<span>{player.name} </span>\n\t\t\t\t\t\t\t{player.events.map((event: EventType) => (\n\t\t\t\t\t\t\t\t<Event\n\t\t\t\t\t\t\t\t\ttype={event.eventType}\n\t\t\t\t\t\t\t\t\ttime={event.eventTime}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Row>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LinkHeadline.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":45,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":45,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":61,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":77,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":77,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":92,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":92,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":109,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":109,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":126,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":126,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":143,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":143,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":164,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":164,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":183,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":183,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":244,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":244,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":305,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":305,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { ElementContainer } from './ElementContainer';\nimport { LinkHeadline } from './LinkHeadline';\n\nexport default {\n\tcomponent: LinkHeadline,\n\ttitle: 'Components/LinkHeadline',\n};\n\nexport const xsmallStory = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how a large headline link looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tsize=\"large\"\n\t\t/>\n\t</ElementContainer>\n);\nxsmallStory.story = { name: 'Size | large' };\n\nexport const liveStory = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how a headline with a live kicker looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tkickerText=\"Live\"\n\t\t/>\n\t</ElementContainer>\n);\nliveStory.story = { name: 'With Live kicker' };\n\nexport const noSlash = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how a headline with no kicker slash looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tkickerText=\"Live\"\n\t\t\tshowSlash={false}\n\t\t/>\n\t</ElementContainer>\n);\nnoSlash.story = { name: 'With Live kicker but no slash' };\n\nexport const pulsingDot = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how a headline with a pulsing dot looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tkickerText=\"Live\"\n\t\t\tshowPulsingDot={true}\n\t\t/>\n\t</ElementContainer>\n);\npulsingDot.story = { name: 'With pulsing dot' };\n\nexport const cultureVariant = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how a headline with the culture pillar looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t}}\n\t\t\tkickerText=\"Art and stuff\"\n\t\t/>\n\t</ElementContainer>\n);\ncultureVariant.story = { name: 'With a culture kicker' };\n\nexport const opinionxxxsmall = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how small links to opinion articles look\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tsize=\"small\"\n\t\t\tbyline=\"Comment byline\"\n\t\t/>\n\t</ElementContainer>\n);\nopinionxxxsmall.story = { name: 'Quotes | small' };\n\nexport const OpinionKicker = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how an opinion headline with a kicker looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"George Monbiot\"\n\t\t\tshowSlash={true}\n\t\t/>\n\t</ElementContainer>\n);\nOpinionKicker.story = { name: 'With an opinion kicker' };\n\nexport const SpecialReport = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how a Special Report headline with a kicker looks\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Special Report\"\n\t\t\tshowSlash={true}\n\t\t/>\n\t</ElementContainer>\n);\nSpecialReport.story = { name: 'when Special Report' };\n\nexport const InUnderlinedState = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is the underlined state when showUnderline is true\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowUnderline={true}\n\t\t\tsize=\"small\"\n\t\t\tkickerText=\"I am never underlined\"\n\t\t\tshowSlash={true}\n\t\t\tlink={{\n\t\t\t\tto: 'https://www.theguardian.com/us-news/2019/nov/14/nancy-pelosi-trump-ukraine-bribery',\n\t\t\t}}\n\t\t/>\n\t</ElementContainer>\n);\nInUnderlinedState.story = { name: 'With showUnderline true' };\n\nexport const linkStory = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"This is how a headline looks as a link\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t}}\n\t\t\tkickerText=\"I am not a link\"\n\t\t\tshowSlash={true}\n\t\t\tlink={{\n\t\t\t\tto: 'https://www.theguardian.com/us-news/2019/nov/14/nancy-pelosi-trump-ukraine-bribery',\n\t\t\t}}\n\t\t/>\n\t</ElementContainer>\n);\nlinkStory.story = { name: 'With linkTo provided' };\n\nexport const LiveBlogSizes = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"Revealed: how US and UK spy agencies defeat internet privacy and security\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Large live\"\n\t\t\tshowSlash={true}\n\t\t\tshowPulsingDot={true}\n\t\t\tsize=\"large\"\n\t\t/>\n\t\t<br />\n\t\t<LinkHeadline\n\t\t\theadlineText=\"Revealed: how US and UK spy agencies defeat internet privacy and security\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Medium live\"\n\t\t\tshowSlash={true}\n\t\t\tshowPulsingDot={true}\n\t\t\tsize=\"medium\"\n\t\t/>\n\t\t<br />\n\t\t<LinkHeadline\n\t\t\theadlineText=\"Revealed: how US and UK spy agencies defeat internet privacy and security\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Small live\"\n\t\t\tshowSlash={true}\n\t\t\tshowPulsingDot={true}\n\t\t\tsize=\"small\"\n\t\t/>\n\t\t<br />\n\t\t<LinkHeadline\n\t\t\theadlineText=\"Revealed: how US and UK spy agencies defeat internet privacy and security\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Tiny live\"\n\t\t\tshowSlash={true}\n\t\t\tshowPulsingDot={true}\n\t\t\tsize=\"tiny\"\n\t\t/>\n\t</ElementContainer>\n);\nLiveBlogSizes.story = { name: 'With various sizes (live)' };\n\nexport const DeadBlogSizes = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"Revealed: how US and UK spy agencies defeat internet privacy and security\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Large dead\"\n\t\t\tshowSlash={true}\n\t\t\tshowPulsingDot={false}\n\t\t\tsize=\"large\"\n\t\t/>\n\t\t<br />\n\t\t<LinkHeadline\n\t\t\theadlineText=\"Revealed: how US and UK spy agencies defeat internet privacy and security\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Medium dead\"\n\t\t\tshowSlash={true}\n\t\t\tshowPulsingDot={false}\n\t\t\tsize=\"medium\"\n\t\t/>\n\t\t<br />\n\t\t<LinkHeadline\n\t\t\theadlineText=\"Revealed: how US and UK spy agencies defeat internet privacy and security\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Small dead\"\n\t\t\tshowSlash={true}\n\t\t\tshowPulsingDot={false}\n\t\t\tsize=\"small\"\n\t\t/>\n\t\t<br />\n\t\t<LinkHeadline\n\t\t\theadlineText=\"Revealed: how US and UK spy agencies defeat internet privacy and security\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowQuotes={true}\n\t\t\tkickerText=\"Tiny dead\"\n\t\t\tshowSlash={true}\n\t\t\tshowPulsingDot={false}\n\t\t\tsize=\"tiny\"\n\t\t/>\n\t</ElementContainer>\n);\nDeadBlogSizes.story = { name: 'With various sizes (dead)' };\n\nexport const Updated = () => (\n\t<ElementContainer showTopBorder={false} showSideBorders={false}>\n\t\t<LinkHeadline\n\t\t\theadlineText=\"\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t\tshowPulsingDot={true}\n\t\t\tshowSlash={false}\n\t\t\tkickerText=\"Updated 7m ago\"\n\t\t\tsize=\"tiny\"\n\t\t/>\n\t</ElementContainer>\n);\nUpdated.story = { name: 'Last updated' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LinkHeadline.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":21,"column":46,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":21,"endColumn":48},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":22,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":40,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":62,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":73,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Byline } from './Byline';\nimport { Kicker } from './Kicker';\nimport { QuoteIcon } from './QuoteIcon';\n\ntype Props = {\n\theadlineText: string; // The text shown\n\tformat: ArticleFormat;\n\tshowUnderline?: boolean; // Some headlines have text-decoration underlined when hovered\n\tkickerText?: string;\n\tshowPulsingDot?: boolean;\n\tshowSlash?: boolean;\n\tshowQuotes?: boolean; // When true the QuoteIcon is shown\n\tsize?: SmallHeadlineSize;\n\tlink?: HeadlineLink; // An optional link object configures if/how the component renders an anchor tag\n\tbyline?: string;\n};\n\nconst fontStyles = (size: SmallHeadlineSize) => {\n\tswitch (size) {\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\t${headline.xsmall()};\n\t\t\t`;\n\t\tcase 'medium':\n\t\t\treturn css`\n\t\t\t\t${headline.xxsmall()};\n\t\t\t`;\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\t${headline.xxxsmall()};\n\t\t\t`;\n\t\tcase 'tiny':\n\t\t\treturn css`\n\t\t\t\t${headline.xxxsmall()};\n\t\t\t\tfont-size: 14px;\n\t\t\t`;\n\t}\n};\n\nconst textDecorationUnderline = css`\n\ttext-decoration: underline;\n`;\n\nconst linkStyles = css`\n\tposition: relative;\n\tcolor: inherit;\n\ttext-decoration: none;\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nconst visitedStyles = (visitedColour: string) => css`\n\t:visited {\n\t\tcolor: ${visitedColour};\n\t}\n`;\n\nexport const LinkHeadline = ({\n\theadlineText,\n\tformat,\n\tshowUnderline = false,\n\tkickerText,\n\tshowPulsingDot,\n\tshowSlash,\n\tshowQuotes = false,\n\tsize = 'medium',\n\tlink,\n\tbyline,\n}: Props) => {\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<h4 css={fontStyles(size)}>\n\t\t\t{kickerText && (\n\t\t\t\t<Kicker\n\t\t\t\t\ttext={kickerText}\n\t\t\t\t\tpalette={palette}\n\t\t\t\t\tshowPulsingDot={showPulsingDot}\n\t\t\t\t\tshowSlash={showSlash}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{showQuotes && <QuoteIcon colour={palette.text.linkKicker} />}\n\t\t\t{link ? (\n\t\t\t\t// We were passed a link object so headline should be a link, with link styling\n\t\t\t\t<>\n\t\t\t\t\t<a\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t// Composed styles - order matters for colours\n\t\t\t\t\t\t\tlinkStyles,\n\t\t\t\t\t\t\tshowUnderline && textDecorationUnderline,\n\t\t\t\t\t\t\tlink.visitedColour &&\n\t\t\t\t\t\t\t\tvisitedStyles(link.visitedColour),\n\t\t\t\t\t\t]}\n\t\t\t\t\t\thref={link.to}\n\t\t\t\t\t\t// If link.preventFocus is true, set tabIndex to -1 to ensure this\n\t\t\t\t\t\t// link is not tabbed to. Useful if there is an outer link to the same\n\t\t\t\t\t\t// place, such as with MostViewed\n\t\t\t\t\t\ttabIndex={link.preventFocus ? -1 : undefined}\n\t\t\t\t\t>\n\t\t\t\t\t\t{headlineText}\n\t\t\t\t\t</a>\n\t\t\t\t\t{byline && (\n\t\t\t\t\t\t<Byline text={byline} format={format} size={size} />\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t// We don't have a link so simply use a span here\n\t\t\t\t<>\n\t\t\t\t\t<span>{headlineText}</span>\n\t\t\t\t\t{byline && (\n\t\t\t\t\t\t<Byline text={byline} size={size} format={format} />\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t)}\n\t\t</h4>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Links.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":222,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":227,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":232,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":232,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4556,4558],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":233,"column":40,"nodeType":"Punctuator","messageId":"preferNullish","endLine":233,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4633,4635],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { getCookie, joinUrl } from '@guardian/libs';\nimport {\n\tbrand,\n\tbrandAlt,\n\tbrandText,\n\tfrom,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { createAuthenticationEventParams } from '../../lib/identity-component-event';\nimport ProfileIcon from '../../static/icons/profile.svg';\nimport SearchIcon from '../../static/icons/search.svg';\nimport { getZIndex } from '../lib/getZIndex';\nimport { useApi } from '../lib/useApi';\nimport type { DropdownLinkType } from './Dropdown';\nimport { Dropdown } from './Dropdown';\n\ntype Props = {\n\tsupporterCTA: string;\n\tdiscussionApiUrl: string;\n\tidUrl?: string;\n\tmmaUrl?: string;\n};\n\nconst linkStyles = css`\n\t${textSans.medium()};\n\tcolor: ${brandText.primary};\n\tfloat: left;\n\tposition: relative;\n\ttransition: color 80ms ease-out;\n\ttext-decoration: none;\n\tpadding: 7px 0;\n\n\t${from.tablet} {\n\t\tpadding: 5px 7px;\n\t}\n\n\t:hover,\n\t:focus {\n\t\tcolor: ${brandAlt[400]};\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tfloat: left;\n\t\theight: 18px;\n\t\twidth: 18px;\n\t\tmargin: 3px 4px 0 0;\n\t}\n`;\n\nconst searchLinkStyles = css`\n\t${linkStyles}\n\t${getZIndex('searchHeaderLink')}\n`;\n\nconst linkTablet = ({ showAtTablet }: { showAtTablet: boolean }) => css`\n\tdisplay: none;\n\n\t${from.tablet} {\n\t\tdisplay: ${showAtTablet ? 'block' : 'none'};\n\t}\n\n\t${from.desktop} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst seperatorStyles = css`\n\tborder-left: 1px solid ${brand[600]};\n\tfloat: left;\n\theight: 24px;\n\tmargin: 0 -2px 0 10px;\n\tdisplay: none;\n\n\t${from.desktop} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst seperatorHideStyles = css`\n\tborder-left: 1px solid ${brand[600]};\n\tfloat: left;\n\theight: 24px;\n\tmargin: 0 -2px 0 10px;\n\tdisplay: none;\n\n\t${from.tablet} {\n\t\tdisplay: block;\n\t}\n`;\n\nconst Search = ({\n\tchildren,\n\thref,\n\tdataLinkName,\n}: {\n\tchildren: React.ReactNode;\n\thref: string;\n\tdataLinkName: string;\n}) => (\n\t<a\n\t\thref={href}\n\t\tcss={[linkTablet({ showAtTablet: false }), searchLinkStyles]}\n\t\tdata-link-name={dataLinkName}\n\t>\n\t\t{children}\n\t</a>\n);\n\nconst linkWrapperStyles = css`\n\tdisplay: inline;\n`;\n\nconst linksStyles = css`\n\tposition: absolute;\n\tleft: 10px;\n\ttop: 0;\n\n\t${from.mobileLandscape} {\n\t\tleft: 20px;\n\t}\n\n\t${from.tablet} {\n\t\tleft: auto;\n\t\tright: 205px;\n\t}\n\n\t${from.desktop} {\n\t\tright: 266px;\n\t}\n\n\t${from.wide} {\n\t\tright: 342px;\n\t}\n`;\n\nconst SignIn = ({ idUrl }: { idUrl: string }) => (\n\t<a\n\t\tcss={linkStyles}\n\t\thref={`${idUrl}/signin?INTCMP=DOTCOM_NEWHEADER_SIGNIN&ABCMP=ab-sign-in&${createAuthenticationEventParams(\n\t\t\t'guardian_signin_header',\n\t\t)}`}\n\t\tdata-link-name=\"nav2 : topbar : signin\"\n\t>\n\t\t<ProfileIcon /> Sign in\n\t</a>\n);\n\nconst MyAccount = ({\n\tmmaUrl,\n\tidUrl,\n\tdiscussionApiUrl,\n}: {\n\tmmaUrl: string;\n\tidUrl: string;\n\tdiscussionApiUrl: string;\n}) => {\n\tconst { data, error } = useApi<{ userProfile: UserProfile }>(\n\t\tjoinUrl(discussionApiUrl, 'profile/me?strict_sanctions_check=false'),\n\t\t{},\n\t\t{\n\t\t\tcredentials: 'include',\n\t\t},\n\t);\n\n\t// If we encounter an error or don't have user data display sign in to the user.\n\t// SWR will retry in the background if the request failed\n\tif (error || !data?.userProfile.userId) return <SignIn idUrl={idUrl} />;\n\n\tconst identityLinks: DropdownLinkType[] = [\n\t\t{\n\t\t\turl: `${mmaUrl}/`,\n\t\t\ttitle: 'Account overview',\n\t\t\tdataLinkName: 'nav2 : topbar : account overview',\n\t\t},\n\t\t{\n\t\t\turl: `${mmaUrl}/public-settings`,\n\t\t\ttitle: 'Profile',\n\t\t\tdataLinkName: 'nav2 : topbar : edit profile',\n\t\t},\n\t\t{\n\t\t\turl: `${mmaUrl}/email-prefs`,\n\t\t\ttitle: 'Emails & marketing',\n\t\t\tdataLinkName: 'nav2 : topbar : email prefs',\n\t\t},\n\t\t{\n\t\t\turl: `${mmaUrl}/account-settings`,\n\t\t\ttitle: 'Settings',\n\t\t\tdataLinkName: 'nav2 : topbar : settings',\n\t\t},\n\t\t{\n\t\t\turl: `${mmaUrl}/help`,\n\t\t\ttitle: 'Help',\n\t\t\tdataLinkName: 'nav2 : topbar : help',\n\t\t},\n\t\t{\n\t\t\turl: `${idUrl}/user/id/${data.userProfile.userId}`,\n\t\t\ttitle: 'Comments & replies',\n\t\t\tdataLinkName: 'nav2 : topbar : comment activity',\n\t\t},\n\t\t{\n\t\t\turl: `${idUrl}/signout`,\n\t\t\ttitle: 'Sign out',\n\t\t\tdataLinkName: 'nav2 : topbar : sign out',\n\t\t},\n\t];\n\n\treturn (\n\t\t<div css={linkStyles}>\n\t\t\t<ProfileIcon />\n\t\t\t<Dropdown\n\t\t\t\tlabel=\"My account\"\n\t\t\t\tlinks={identityLinks}\n\t\t\t\tid=\"my-account\"\n\t\t\t\tdataLinkName=\"nav2 : topbar: my account\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const Links = ({\n\tsupporterCTA,\n\tdiscussionApiUrl: discussionApiUrlFromConfig,\n\tidUrl: idUrlServerFromConfig,\n\tmmaUrl: mmaUrlServerFromConfig,\n}: Props) => {\n\t// Fall back on prod URLs just in case these aren't set for any reason\n\tconst discussionApiUrl =\n\t\tdiscussionApiUrlFromConfig ||\n\t\t'https://discussion.theguardian.com/discussion-api';\n\tconst idUrl = idUrlServerFromConfig || 'https://profile.theguardian.com';\n\tconst mmaUrl = mmaUrlServerFromConfig || 'https://manage.theguardian.com';\n\n\tconst isServer = typeof window === 'undefined';\n\n\tconst showSupporterCTA =\n\t\t!isServer &&\n\t\tgetCookie({\n\t\t\tname: 'gu_hide_support_messaging',\n\t\t\tshouldMemoize: true,\n\t\t}) === 'true';\n\n\tconst isSignedIn =\n\t\t!isServer && !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\n\treturn (\n\t\t<div data-print-layout=\"hide\" css={linksStyles}>\n\t\t\t{/* Since 'subscriptions' is only rendered on the client, rendering it within\n\t\t\t\ta div is required to prevent DOM elements getting mis-matched during hydration  */}\n\t\t\t<div css={linkWrapperStyles}>\n\t\t\t\t{showSupporterCTA && supporterCTA !== '' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div css={seperatorStyles} id=\"supporter\" />\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={supporterCTA}\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\tlinkTablet({ showAtTablet: false }),\n\t\t\t\t\t\t\t\tlinkStyles,\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tdata-link-name=\"nav2 : supporter-cta\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSubscriptions\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div css={seperatorStyles} />\n\t\t\t<a\n\t\t\t\thref=\"https://jobs.theguardian.com/?INTCMP=jobs_uk_web_newheader\"\n\t\t\t\tcss={[linkTablet({ showAtTablet: false }), linkStyles]}\n\t\t\t\tdata-link-name=\"nav2 : job-cta\"\n\t\t\t>\n\t\t\t\tSearch jobs\n\t\t\t</a>\n\t\t\t<div css={seperatorHideStyles} />\n\n\t\t\t{/* Since we switch from SignIn to MyAccount between SSR & hydration (if the user is logged in), we need to wrap\n\t\t\t\tthe conditional in a div so preact knows where the old component was & is able to swap it out. */}\n\t\t\t<div css={linkWrapperStyles}>\n\t\t\t\t{isSignedIn ? (\n\t\t\t\t\t<MyAccount\n\t\t\t\t\t\tmmaUrl={mmaUrl}\n\t\t\t\t\t\tidUrl={idUrl}\n\t\t\t\t\t\tdiscussionApiUrl={discussionApiUrl}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<SignIn idUrl={idUrl} />\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<Search\n\t\t\t\thref=\"https://www.google.co.uk/advanced_search?q=site:www.theguardian.com\"\n\t\t\t\tdataLinkName=\"nav2 : search\"\n\t\t\t>\n\t\t\t\t<SearchIcon />\n\t\t\t\t<>Search</>\n\t\t\t</Search>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LiveBlock.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":66,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":66,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":114,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":114,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":163,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":163,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":233,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":233,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":278,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":278,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":314,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":314,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":376,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":376,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":427,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":427,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":464,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":464,"endColumn":29},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":465,"column":62,"nodeType":"Punctuator","messageId":"preferNullish","endLine":465,"endColumn":64,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14671,14673],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":499,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":499,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":536,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":536,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":571,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":571,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":13,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { breakpoints, from } from '@guardian/source-foundations';\nimport { images } from '../../../fixtures/generated/images';\nimport { LiveBlock } from './LiveBlock';\n\nconst baseBlock: Block = {\n\tsecondaryDateLine: 'First published on Fri 19 Feb 2021 17.20 GMT',\n\tblockFirstPublishedDisplay: '19.30 GMT',\n\tblockLastUpdated: 1613763519000,\n\tfirstPublishedDisplay: '17.20 GMT',\n\tlastUpdatedDisplay: '19.47 GMT',\n\tblockCreatedOnDisplay: '19.19 GMT',\n\tblockLastUpdatedDisplay: '19.38 GMT',\n\tfirstPublished: 1613755208000,\n\tcreatedOn: 1613762399000,\n\tprimaryDateLine: 'Fri 19 Feb 2021 19.41 GMT',\n\tblockCreatedOn: 1613762399000,\n\tblockFirstPublished: 1613763003000,\n\tcreatedOnDisplay: '19.19 GMT',\n\tlastUpdated: 1613764059000,\n\telements: [\n\t\t{\n\t\t\telementId: '4ac2fcd8-284c-4038-91a1-093811f389ba',\n\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\thtml: '<p>Nasa scientists have worked for years to support this mission, and kept things going despite the ongoing coronavirus disruption. </p>',\n\t\t},\n\t],\n\tid: '60300f5f8f08ad21ea60071e',\n};\n\nconst Wrapper = ({ children }: { children: React.ReactNode }) => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tpadding: 20px;\n\t\t\t\tmax-width: 700px;\n\t\t\t\t${from.tablet} {\n\t\t\t\t\twidth: 700px;\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport default {\n\tcomponent: LiveBlock,\n\ttitle: 'Components/LiveBlock',\n\tparameters: {\n\t\tbackgrounds: {\n\t\t\tdefault: 'grey',\n\t\t\tvalues: [{ name: 'grey', value: 'lightgrey' }],\n\t\t},\n\t\tchromatic: {\n\t\t\tviewports: [\n\t\t\t\tbreakpoints.mobile,\n\t\t\t\tbreakpoints.tablet,\n\t\t\t\tbreakpoints.wide,\n\t\t\t],\n\t\t},\n\t},\n};\n\nexport const VideoAsSecond = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nVideoAsSecond.story = { name: 'with recap' };\n\nexport const Title = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\ttitle: 'Afternoon summary',\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nTitle.story = { name: 'with a title' };\n\nexport const Video = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '09ed82c7-d0d8-445e-81b6-d8a39a547e3c',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>Have you typed “<a href=\"https://www.google.com/search?q=perseverance&amp;oq=pers&amp;aqs=chrome.0.69i59j69i57j0l3j46j69i60j69i61.1091j0j7&amp;sourceid=chrome&amp;ie=UTF-8\">perseverance</a>” into Google today? </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\tduration: 142,\n\t\t\t\telementId: '27eac530-7088-4541-a1c5-3347a3d837fb',\n\t\t\t\texpired: false,\n\t\t\t\tmediaTitle:\n\t\t\t\t\t'Nasa launches Perseverance rover in mission to find evidence of life on Mars – video',\n\t\t\t\tassetId: 'XmP56yBy-18',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.YoutubeBlockElement',\n\t\t\t\tid: '60606947-4f1f-4343-9bb7-000e91502129',\n\t\t\t\tposterImage: [\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/c981848745e482e03e23b2ec9402e1f5c5bee6a6/102_73_3282_1848/2000.jpg',\n\t\t\t\t\t\twidth: 2000,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/c981848745e482e03e23b2ec9402e1f5c5bee6a6/102_73_3282_1848/1000.jpg',\n\t\t\t\t\t\twidth: 1000,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/c981848745e482e03e23b2ec9402e1f5c5bee6a6/102_73_3282_1848/500.jpg',\n\t\t\t\t\t\twidth: 500,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/c981848745e482e03e23b2ec9402e1f5c5bee6a6/102_73_3282_1848/140.jpg',\n\t\t\t\t\t\twidth: 140,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/c981848745e482e03e23b2ec9402e1f5c5bee6a6/102_73_3282_1848/3282.jpg',\n\t\t\t\t\t\twidth: 3282,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tchannelId: 'UCIRYBXDze5krPDzAEOxFGVA',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nVideo.story = { name: 'with a video as the second element' };\n\nexport const RichLink = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: 'ae950f92-bc9b-4725-bac2-94fce86d8191',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>Now that Perseverance persevered through the “seven minutes of terror” – a new era of space exploration has officially begun. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b49c134e-54d6-4445-a3fe-bb52a1370375',\n\t\t\t\trole: 'thumbnail',\n\t\t\t\tprefix: 'Related: ',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.RichLinkBlockElement',\n\t\t\t\ttext: 'Ireland election: latest results',\n\t\t\t\turl: 'https://www.theguardian.com/world/2020/feb/10/ireland-election-latest-results-live-sinn-fein-fine-gael-fianna-fail',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nRichLink.story = { name: 'with a rich link being forced inline' };\n\nexport const FirstImage = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'inline',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nFirstImage.story = { name: 'with an image as the first element' };\n\nexport const ImageRoles = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'inline',\n\t\t\t\ttitle: 'Inline',\n\t\t\t},\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'thumbnail',\n\t\t\t\ttitle: 'Thumbnail',\n\t\t\t},\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'immersive',\n\t\t\t\ttitle: 'Immersive',\n\t\t\t},\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'supporting',\n\t\t\t\ttitle: 'Supporting',\n\t\t\t},\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'showcase',\n\t\t\t\ttitle: 'Showcase',\n\t\t\t},\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'halfWidth',\n\t\t\t\ttitle: 'Half width',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nImageRoles.story = { name: 'with images at different roles' };\n\nexport const Thumbnail = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '1',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>eos his vis cetero dicta usu eu duo officiis ei eleifend sed repudiandae consequat vitae splendide pretium est partiendo semper ne uonsetetur ipsum aliquam per leo odio inimicus eam his tincidunt et ne semper amet et voluptua mauris qui eum nec inimicus sed aenean eu mea odio vitae at.</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'thumbnail',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>eos his vis cetero dicta usu eu duo officiis ei eleifend sed repudiandae consequat vitae splendide pretium est partiendo semper ne uonsetetur ipsum aliquam per leo odio inimicus eam his tincidunt et ne semper amet et voluptua mauris qui eum nec inimicus sed aenean eu mea odio vitae at.</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>eos his vis cetero dicta usu eu duo officiis ei eleifend sed repudiandae consequat vitae splendide pretium est partiendo semper ne uonsetetur ipsum aliquam per leo odio inimicus eam his tincidunt et ne semper amet et voluptua mauris qui eum nec inimicus sed aenean eu mea odio vitae at.</p>',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nThumbnail.story = { name: 'with a thumbnail image surrounded by text' };\n\nexport const ImageAndTitle = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\ttitle: 'Afternoon summary',\n\t\telements: [\n\t\t\t{\n\t\t\t\t...images[0],\n\t\t\t\trole: 'inline',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nImageAndTitle.story = { name: 'with only a title and an image' };\n\nexport const Updated = () => {\n\tconst publishedDate: number = baseBlock.blockFirstPublished || 999999;\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\tblockFirstPublished: publishedDate,\n\t\tblockLastUpdated: publishedDate + 1000,\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nUpdated.story = {\n\tname: 'with updated time showing',\n};\n\nexport const Contributor = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\tcontributors: [\n\t\t\t{\n\t\t\t\tname: 'Andrew Roth',\n\t\t\t\timageUrl:\n\t\t\t\t\t'https://i.guim.co.uk/img/uploads/2019/06/07/Andrew_Roth,_L.png?width=300&quality=85&auto=format&fit=max&s=b43b83c4998787fd8c68631b800cb8f7',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nContributor.story = { name: 'with a contributor' };\n\nexport const NoAvatar = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\tcontributors: [\n\t\t\t{\n\t\t\t\tname: 'Andrew Roth',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nNoAvatar.story = { name: 'with a contributor but no avatar' };\n\nexport const TitleAndContributor = () => {\n\tconst block: Block = {\n\t\t...baseBlock,\n\t\ttitle: 'Afternoon summary',\n\t\tcontributors: [\n\t\t\t{\n\t\t\t\tname: 'Andrew Roth',\n\t\t\t\timageUrl:\n\t\t\t\t\t'https://i.guim.co.uk/img/uploads/2019/06/07/Andrew_Roth,_L.png?width=300&quality=85&auto=format&fit=max&s=b43b83c4998787fd8c68631b800cb8f7',\n\t\t\t},\n\t\t],\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<LiveBlock\n\t\t\t\tadTargeting={{\n\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\tadUnit: '',\n\t\t\t\t}}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tblock={block}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tajaxUrl=\"\"\n\t\t\t\tswitches={{}}\n\t\t\t\tisPinnedPost={false}\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tisSensitive={false}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nTitleAndContributor.story = { name: 'with a contributor and a title' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LiveBlock.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":24,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":13}],"suppressedMessages":[{"ruleId":"import/no-extraneous-dependencies","severity":2,"message":"'@guardian/common-rendering' should be listed in the project's dependencies. Run 'npm i -S @guardian/common-rendering' to add it","line":3,"column":1,"nodeType":"ImportDeclaration","endLine":3,"endColumn":95,"suppressions":[{"kind":"directive","justification":"it’s a yarn workspace"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\n// eslint-disable-next-line import/no-extraneous-dependencies -- it’s a yarn workspace\nimport LiveBlockContainer from '@guardian/common-rendering/src/components/liveBlockContainer';\nimport { renderArticleElement } from '../lib/renderElement';\nimport { LastUpdated } from './LastUpdated';\nimport { ShareIcons } from './ShareIcons';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tblock: Block;\n\tpageId: string;\n\twebTitle: string;\n\tadTargeting: AdTargeting;\n\thost?: string;\n\tajaxUrl: string;\n\tisAdFreeUser: boolean;\n\tisSensitive: boolean;\n\tswitches: { [key: string]: boolean };\n\tisLiveUpdate?: boolean;\n\tisPinnedPost: boolean;\n\tpinnedPostId?: string;\n};\n\nexport const LiveBlock = ({\n\tformat,\n\tblock,\n\tpageId,\n\twebTitle,\n\tadTargeting,\n\thost = 'https://www.theguardian.com',\n\tajaxUrl,\n\tisAdFreeUser,\n\tisSensitive,\n\tswitches,\n\tisLiveUpdate,\n\tisPinnedPost,\n\tpinnedPostId,\n}: Props) => {\n\tif (block.elements.length === 0) return null;\n\t// Decide if the block has been updated or not\n\tconst showLastUpdated: boolean =\n\t\t!!block.blockLastUpdatedDisplay &&\n\t\t!!block.blockFirstPublished &&\n\t\t!!block.blockLastUpdated &&\n\t\tblock.blockLastUpdated > block.blockFirstPublished;\n\n\tconst isOriginalPinnedPost = !isPinnedPost && block.id === pinnedPostId;\n\n\treturn (\n\t\t<LiveBlockContainer\n\t\t\tid={block.id}\n\t\t\tblockTitle={block.title}\n\t\t\tblockFirstPublished={block.blockFirstPublished}\n\t\t\tblockFirstPublishedDisplay={\n\t\t\t\tblock.blockFirstPublishedDisplayNoTimezone\n\t\t\t}\n\t\t\tblockId={block.id}\n\t\t\tisLiveUpdate={isLiveUpdate}\n\t\t\tcontributors={block.contributors}\n\t\t\tisPinnedPost={isPinnedPost}\n\t\t\tsupportsDarkMode={false}\n\t\t\tformat={format}\n\t\t\tisOriginalPinnedPost={isOriginalPinnedPost}\n\t\t\thost={host}\n\t\t\tpageId={pageId}\n\t\t>\n\t\t\t{block.elements.map((element, index) =>\n\t\t\t\trenderArticleElement({\n\t\t\t\t\tformat,\n\t\t\t\t\telement,\n\t\t\t\t\tisMainMedia: false,\n\t\t\t\t\thost,\n\t\t\t\t\tadTargeting,\n\t\t\t\t\tajaxUrl,\n\t\t\t\t\tindex,\n\t\t\t\t\tpageId,\n\t\t\t\t\twebTitle,\n\t\t\t\t\tisAdFreeUser,\n\t\t\t\t\tisSensitive,\n\t\t\t\t\tswitches,\n\t\t\t\t}),\n\t\t\t)}\n\t\t\t<footer\n\t\t\t\tcss={css`\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<ShareIcons\n\t\t\t\t\tpageId={pageId}\n\t\t\t\t\tblockId={block.id}\n\t\t\t\t\twebTitle={webTitle}\n\t\t\t\t\tdisplayIcons={['facebook', 'twitter']}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tcontext=\"LiveBlock\"\n\t\t\t\t/>\n\t\t\t\t{showLastUpdated &&\n\t\t\t\t\tblock.blockLastUpdated &&\n\t\t\t\t\tblock.blockLastUpdatedDisplay && (\n\t\t\t\t\t\t<LastUpdated\n\t\t\t\t\t\t\tlastUpdated={block.blockLastUpdated}\n\t\t\t\t\t\t\tlastUpdatedDisplay={block.blockLastUpdatedDisplay}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t</footer>\n\t\t</LiveBlockContainer>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/LiveBlogEpic.importable.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":52,"column":49,"nodeType":"Identifier","messageId":"invalidType","endLine":52,"endColumn":50},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":73,"column":0,"nodeType":null,"endLine":73,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":74,"column":19,"nodeType":"MemberExpression","messageId":"unsafeReturn","endLine":74,"endColumn":35},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":77,"column":51,"nodeType":"Identifier","messageId":"invalidType","endLine":77,"endColumn":54},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":133,"column":70,"nodeType":"Punctuator","messageId":"preferNullish","endLine":133,"endColumn":72,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3664,3666],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"consistent-return","severity":1,"message":"Arrow function expected no return value.","line":141,"column":2,"nodeType":"ReturnStatement","messageId":"unexpectedReturnValue","endLine":168,"endColumn":4},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, expected left-hand side of `??` operator to be possibly null or undefined.","line":151,"column":29,"nodeType":"Identifier","messageId":"neverNullish","endLine":151,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":161,"column":4,"nodeType":"Property","messageId":"anyAssignment","endLine":161,"endColumn":66},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":162,"column":4,"nodeType":"Property","messageId":"anyAssignment","endLine":163,"endColumn":61},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":284,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":290,"endColumn":13},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":330,"column":7,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":330,"endColumn":23}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access [name] on an `any` value.","line":74,"column":19,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":74,"endColumn":35,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { onConsentChange } from '@guardian/consent-management-platform';\nimport type { ConsentState } from '@guardian/consent-management-platform/dist/types';\nimport type { CountryCode } from '@guardian/libs';\nimport { getCookie, joinUrl, log, storage } from '@guardian/libs';\nimport { space } from '@guardian/source-foundations';\nimport type { ModuleDataResponse } from '@guardian/support-dotcom-components';\nimport React, { useEffect, useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport { submitComponentEvent } from '../browser/ophan/ophan';\nimport {\n\tgetLastOneOffContributionTimestamp,\n\tisRecurringContributor,\n\tREQUIRED_CONSENTS_FOR_ARTICLE_COUNT,\n\tshouldHideSupportMessaging,\n} from '../lib/contributions';\nimport { getLocaleCode } from '../lib/getCountryCode';\nimport { setAutomat } from '../lib/setAutomat';\nimport { useApi } from '../lib/useApi';\n\ntype Props = {\n\tsection: string;\n\tshouldHideReaderRevenue: boolean;\n\tisPaidContent: boolean;\n\ttags: TagType[];\n\tcontributionsServiceUrl: string;\n};\n\nconst useConsent = () => {\n\tconst [consent, setConsent] = useState<ConsentState>();\n\tconst hasOptedOut = getCookie({ name: 'gu_article_count_opt_out' });\n\n\tuseEffect(() => {\n\t\tif (hasOptedOut) return;\n\t\tonConsentChange((state) => {\n\t\t\tsetConsent(state);\n\t\t});\n\t}, [hasOptedOut]);\n\n\treturn consent;\n};\n\nconst useCountryCode = () => {\n\tconst [countryCode, setCountryCode] = useState<CountryCode | null>();\n\n\tuseEffect(() => {\n\t\tgetLocaleCode()\n\t\t\t.then((cc) => {\n\t\t\t\tsetCountryCode(cc);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tconst msg = `Error fetching country code: ${e}`;\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\tnew Error(msg),\n\t\t\t\t\t'liveblog-epic',\n\t\t\t\t);\n\t\t\t});\n\t}, []);\n\n\treturn countryCode;\n};\n\nconst useEpic = ({ url, name }: { url: string; name: string }) => {\n\t// Using state here to store the Epic component that gets imported allows\n\t// us to render it with React (instead of inserting it into the dom manually)\n\tconst [Epic, setEpic] = useState<React.FC<{ [key: string]: unknown }>>();\n\n\tuseEffect(() => {\n\t\tsetAutomat();\n\t\twindow\n\t\t\t.guardianPolyfilledImport(url)\n\t\t\t.then((epicModule) => {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\t\t\t\tsetEpic(() => epicModule[name]); // useState requires functions to be wrapped\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconst msg = `Error importing LiveBlog epic: ${err}`;\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\tnew Error(msg),\n\t\t\t\t\t'liveblog-epic',\n\t\t\t\t);\n\t\t\t});\n\t}, [url, name]);\n\n\treturn { Epic };\n};\n\nfunction consentGivenForArticleCounts(consent: ConsentState): boolean {\n\tconst { ccpa, tcfv2, aus } = consent;\n\n\tif (ccpa || aus) {\n\t\treturn true;\n\t}\n\n\tif (tcfv2) {\n\t\tconst hasRequiredConsents = REQUIRED_CONSENTS_FOR_ARTICLE_COUNT.every(\n\t\t\t(tcfConsent) => tcfv2.consents[tcfConsent],\n\t\t);\n\n\t\tif (!hasRequiredConsents) {\n\t\t\tstorage.local.remove('gu.history.dailyArticleCount');\n\t\t\tstorage.local.remove('gu.history.weeklyArticleCount');\n\t\t}\n\n\t\treturn hasRequiredConsents;\n\t}\n\n\treturn false;\n}\n\n/**\n * usePayload\n *\n * takes a series of CAPI values, reads consent, the users country, some cookie\n * values and then constructs a config object with `tracking` and `targeting`\n * properties\n *\n * @returns the payload object required to make the POST request to contributions\n */\nconst usePayload = ({\n\tshouldHideReaderRevenue,\n\tsection,\n\tisPaidContent,\n\ttags,\n}: {\n\tshouldHideReaderRevenue: boolean;\n\tsection: string;\n\tisPaidContent: boolean;\n\ttags: TagType[];\n}) => {\n\tconst consent = useConsent();\n\tconst countryCode = useCountryCode();\n\tconst mvtId = getCookie({ name: 'GU_mvt_id', shouldMemoize: true }) || 0;\n\tconst isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\n\tif (!consent) return;\n\tlog('dotcom', 'LiveBlogEpic has consent state');\n\tif (!countryCode) return;\n\tlog('dotcom', 'LiveBlogEpic has countryCode');\n\n\treturn {\n\t\ttracking: {\n\t\t\tophanPageId: window.guardian.config.ophan.pageViewId,\n\t\t\tplatformId: 'GUARDIAN_WEB',\n\t\t\tclientName: 'dcr',\n\t\t\treferrerUrl: window.location.origin + window.location.pathname,\n\t\t},\n\t\ttargeting: {\n\t\t\tcontentType: 'LiveBlog',\n\t\t\tsectionId: section,\n\t\t\tshouldHideReaderRevenue: shouldHideReaderRevenue ?? false,\n\t\t\tisMinuteArticle: true,\n\t\t\tisPaidContent,\n\t\t\ttags,\n\t\t\tshowSupportMessaging: !shouldHideSupportMessaging(isSignedIn),\n\t\t\tisRecurringContributor: isRecurringContributor(isSignedIn),\n\t\t\tlastOneOffContributionDate:\n\t\t\t\tgetLastOneOffContributionTimestamp() ?? undefined,\n\t\t\tmvtId,\n\t\t\tcountryCode,\n\t\t\tepicViewLog: storage.local.get('gu.contributions.views') || [],\n\t\t\tweeklyArticleHistory:\n\t\t\t\tstorage.local.get('gu.history.weeklyArticleCount') || [],\n\t\t\thasOptedOutOfArticleCount: !consentGivenForArticleCounts(consent),\n\t\t\tmodulesVersion: 'v3',\n\t\t\turl: window.location.origin + window.location.pathname,\n\t\t},\n\t};\n};\n\n/**\n * Render\n *\n * Dynamically imports and renders a given module\n *\n * @param props\n * @param props.url string - The url of the component\n * @param props.name tring - The name of the component\n * @param props.props object - The props of the component\n * @returns The resulting react component\n */\nconst Render = ({\n\turl,\n\tname,\n\tprops,\n}: {\n\turl: string;\n\tname: string;\n\tprops: { [key: string]: unknown };\n}) => {\n\tconst { Epic } = useEpic({ url, name });\n\n\tif (!Epic) return null;\n\tlog('dotcom', 'LiveBlogEpic has the Epic');\n\n\treturn (\n\t\t<aside\n\t\t\tcss={css`\n\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t`}\n\t\t>\n\t\t\t{}\n\t\t\t<Epic {...props} />\n\t\t</aside>\n\t);\n};\n\n/**\n * Using the payload, make a fetch request to contributions service\n *\n * @param payload - unknown\n * @param contributionsServiceUrl - string\n */\nconst Fetch = ({\n\tpayload,\n\tcontributionsServiceUrl,\n}: {\n\tpayload: unknown;\n\tcontributionsServiceUrl: string;\n}) => {\n\tlet url = joinUrl(contributionsServiceUrl, 'liveblog-epic');\n\n\t// Check if we've been asked to force this epic\n\tconst params = new URLSearchParams(window.location.search);\n\tif (params.get('force-liveblog-epic')) {\n\t\turl += '?force=true';\n\t}\n\n\t// Send the payload to Contributions to request a module\n\tconst { data: response } = useApi<ModuleDataResponse>(\n\t\turl,\n\t\t{\n\t\t\trevalidateIfStale: false,\n\t\t\trevalidateOnFocus: false,\n\t\t\trevalidateOnReconnect: false,\n\t\t},\n\t\t{\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify(payload),\n\t\t},\n\t);\n\n\t// If we didn't get a module in response (or we're still waiting) do nothing. If\n\t// no epic should be shown the response is equal to {}, hence the Object.keys\n\tif (!response || !response.data || Object.keys(response).length === 0) {\n\t\treturn null;\n\t}\n\tlog('dotcom', 'LiveBlogEpic has a module');\n\n\t// Add submitComponentEvent function to props to enable Ophan tracking in the component\n\tconst props = {\n\t\t...response.data.module.props,\n\t\tsubmitComponentEvent,\n\t};\n\n\t// Take any returned module and render it\n\treturn (\n\t\t<Render\n\t\t\turl={response.data.module.url}\n\t\t\tname={response.data.module.name}\n\t\t\tprops={props}\n\t\t/>\n\t);\n};\n\nfunction insertAfter(referenceNode: HTMLElement, newNode: Element) {\n\treferenceNode.parentNode?.insertBefore(newNode, referenceNode.nextSibling);\n}\n\n/**\n * LiveBlogEpic is the support epic which appears in-between blocks in blogs\n *\n * There are three main steps to create this epic:\n *\n * 1. usePayload - Build the payload. The config object we send to contributions\n * 2. Fetch - POST the payload to the contributions endpoint\n * 3. Render - Take the url, props and name data we got in response to our fetch and dynamically import\n *    and render the Epic component using it\n */\nexport const LiveBlogEpic = ({\n\tsection,\n\tshouldHideReaderRevenue,\n\tisPaidContent,\n\ttags,\n\tcontributionsServiceUrl,\n}: Props) => {\n\tlog('dotcom', 'LiveBlogEpic started');\n\t// First construct the payload\n\tconst payload = usePayload({\n\t\tshouldHideReaderRevenue,\n\t\tsection,\n\t\tisPaidContent,\n\t\ttags,\n\t});\n\tif (!payload) return null;\n\n\t/**\n\t * Here we decide where to insert the epic.\n\t *\n\t * If the url contains a permalink then we\n\t * want to insert it immediately after that block to prevent any CLS issues.\n\t *\n\t * Otherwise, we choose a random position near the top of the blog\n\t */\n\tconst epicPlaceholder = document.createElement('article');\n\tif (window.location.href.includes('#block-')) {\n\t\t// Because we're using a permalink there's a possibility the epic will render in\n\t\t// view. To prevent confusing layout shift we initially hide the message so that\n\t\t// we can reveal (animate in) it once it has been rendered\n\t\tepicPlaceholder.classList.add('pending');\n\t\tconst blockId = window.location.hash.slice(1);\n\t\tconst blockLinkedTo = document.getElementById(blockId);\n\t\tif (blockLinkedTo) {\n\t\t\tinsertAfter(blockLinkedTo, epicPlaceholder);\n\t\t}\n\t\tepicPlaceholder.classList.add('reveal');\n\t\tepicPlaceholder.classList.remove('pending');\n\t} else {\n\t\t// This is a simple page load so we simply insert the epic somewhere near the top\n\t\t// of the blog\n\t\tconst randomPosition = Math.floor(Math.random() * 3) + 1; // 1, 2 or 3\n\t\tconst aBlockNearTheTop =\n\t\t\tdocument.querySelectorAll<HTMLElement>('article.block')[\n\t\t\t\trandomPosition\n\t\t\t];\n\t\tif (aBlockNearTheTop) {\n\t\t\tinsertAfter(aBlockNearTheTop, epicPlaceholder);\n\t\t}\n\t}\n\n\treturn createPortal(\n\t\t<Fetch\n\t\t\tpayload={payload}\n\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t/>,\n\t\tepicPlaceholder,\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Liveness.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":134,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":145,"endColumn":13},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":158,"column":8,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":158,"endColumn":12},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":158,"column":8,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":158,"endColumn":33,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[4826,4851],"text":"data?.numNewBlocks"},"desc":"Change to an optional chain."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":164,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":164,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useCallback, useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { initHydration } from '../browser/islands/initHydration';\nimport { updateTimeElement } from '../browser/relativeTime/updateTimeElements';\nimport { useApi } from '../lib/useApi';\nimport { Toast } from './Toast';\n\ntype Props = {\n\tpageId: string;\n\twebTitle: string;\n\tajaxUrl: string;\n\tfilterKeyEvents: boolean;\n\tformat: ArticleFormat;\n\tenhanceTweetsSwitch: boolean;\n\tonFirstPage: boolean;\n\twebURL: string;\n\tmostRecentBlockId: string;\n\thasPinnedPost: boolean;\n};\n\nconst isServer = typeof window === 'undefined';\n\nconst topOfBlog: Element | null = !isServer\n\t? window.document.getElementById('top-of-blog')\n\t: null;\n\nconst lastUpdated: Element | null = !isServer\n\t? window.document.querySelector('[data-gu-marker=liveblog-last-updated]')\n\t: null;\n\nconst toastRoot: Element | null = !isServer\n\t? window.document.getElementById('toast-root')\n\t: null;\n\n/**\n * insert\n *\n * Takes html, parses and hydrates it, inserts the resulting blocks\n * at the top of the liveblog, and then enhances any tweets\n *\n * @param {string} html The block html to be inserted\n * @returns void\n */\nfunction insert(html: string, enhanceTweetsSwitch: boolean) {\n\t// Create\n\t// ------\n\tconst template = document.createElement('template');\n\ttemplate.innerHTML = html;\n\tconst fragment = template.content;\n\n\t// Hydrate\n\t// -------\n\tconst islands = fragment.querySelectorAll('gu-island');\n\tinitHydration(islands);\n\n\t// Insert\n\t// ------\n\t// Shouldn't we sanitise this html?\n\t// We're being sent this string by our own backend, not reader input, so we\n\t// trust that the tags and attributes it contains are safe and intentional\n\tconst blogBody = document.querySelector<HTMLElement>('#liveblog-body');\n\tif (!blogBody || !topOfBlog) return;\n\t// nextSibling? See: https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore#example_2\n\tblogBody.insertBefore(fragment, topOfBlog.nextSibling);\n\n\t// Enhance\n\t// -----------\n\tif (enhanceTweetsSwitch) {\n\t\tconst pendingBlocks =\n\t\t\tblogBody.querySelectorAll<HTMLElement>('.pending.block');\n\t\t// https://developer.twitter.com/en/docs/twitter-for-websites/javascript-api/guides/scripting-loading-and-initialization\n\t\tif (typeof twttr !== 'undefined') {\n\t\t\ttwttr.ready((twitter) => {\n\t\t\t\ttwitter.widgets.load(Array.from(pendingBlocks));\n\t\t\t});\n\t\t}\n\t}\n}\n\n/**\n * reveal any blocks that have been inserted but are still hidden\n */\nfunction revealPendingBlocks() {\n\tconst blogBody = document.querySelector<HTMLElement>('#liveblog-body');\n\tconst pendingBlocks =\n\t\tblogBody?.querySelectorAll<HTMLElement>('.pending.block');\n\tpendingBlocks?.forEach((block) => {\n\t\tblock.classList.add('reveal-slowly');\n\t\tblock.classList.remove('pending');\n\t});\n\n\tif (pendingBlocks?.length)\n\t\t// Notify commercial that new blocks are available and they can re-run spacefinder\n\t\tdocument.dispatchEvent(new CustomEvent('liveblog:blocks-updated'));\n}\n\n/**\n * This abstracts the code to construct the url we use for polling. Of note is the fact\n * we have put `latestBlockId` in react state; by doing this we are able to change the url\n * that SWR uses for the request whilst still benefitting from the polling logic\n *\n * @returns string\n */\nfunction getKey(\n\tpageId: string,\n\tajaxUrl: string,\n\tlatestBlockId: string,\n\tfilterKeyEvents: boolean,\n): string | undefined {\n\ttry {\n\t\t// Construct the url to poll\n\t\tconst url = new URL(`${pageId}.json`, ajaxUrl);\n\t\turl.searchParams.set('lastUpdate', latestBlockId);\n\t\turl.searchParams.set('isLivePage', 'true');\n\t\turl.searchParams.set('dcr', 'true');\n\t\turl.searchParams.set(\n\t\t\t'filterKeyEvents',\n\t\t\tfilterKeyEvents ? 'true' : 'false',\n\t\t);\n\t\treturn url.href;\n\t} catch {\n\t\twindow.guardian.modules.sentry.reportError(\n\t\t\tnew Error(\n\t\t\t\t`An error was thrown trying to construct a URL using pageId: ${pageId} and ajaxUrl: ${ajaxUrl}`,\n\t\t\t),\n\t\t\t'liveness-getkey',\n\t\t);\n\t\t// Returning undefined here means the request is never made\n\t\t// See: https://swr.vercel.app/docs/conditional-fetching#conditional\n\t\treturn undefined;\n\t}\n}\n\nexport const Liveness = ({\n\tpageId,\n\twebTitle,\n\tajaxUrl,\n\tfilterKeyEvents,\n\tformat,\n\tenhanceTweetsSwitch,\n\tonFirstPage,\n\twebURL,\n\tmostRecentBlockId,\n\thasPinnedPost,\n}: Props) => {\n\tconst [showToast, setShowToast] = useState(false);\n\tconst [topOfBlogVisible, setTopOfBlogVisible] = useState<boolean>();\n\tconst [numHiddenBlocks, setNumHiddenBlocks] = useState(0);\n\tconst [latestBlockId, setLatestBlockId] = useState(mostRecentBlockId);\n\n\t/**\n\t * This function runs (once) after every successful useApi call. This is useful because it\n\t * allows us to avoid the problems of imperative code being executed multiple times\n\t * inside react's declarative structure (things get re-rendered when any state changes)\n\t */\n\tconst onSuccess = useCallback(\n\t\t(data: LiveUpdateType) => {\n\t\t\tif (data && data.numNewBlocks && data.numNewBlocks > 0) {\n\t\t\t\t// Insert the new blocks in the dom (but hidden)\n\t\t\t\tif (onFirstPage) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tinsert(data.html, enhanceTweetsSwitch);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.log('>> failed >>', e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (lastUpdated) {\n\t\t\t\t\tlastUpdated.setAttribute('dateTime', new Date().toString());\n\t\t\t\t\tupdateTimeElement(lastUpdated);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tonFirstPage &&\n\t\t\t\t\ttopOfBlogVisible &&\n\t\t\t\t\tdocument.visibilityState === 'visible'\n\t\t\t\t) {\n\t\t\t\t\trevealPendingBlocks();\n\t\t\t\t\tsetNumHiddenBlocks(0);\n\t\t\t\t} else {\n\t\t\t\t\tsetShowToast(true);\n\t\t\t\t\t// Increment the count of new posts\n\t\t\t\t\tsetNumHiddenBlocks(numHiddenBlocks + data.numNewBlocks);\n\t\t\t\t}\n\n\t\t\t\t// Update the block id we use for polling\n\t\t\t\tif (data.mostRecentBlockId) {\n\t\t\t\t\tsetLatestBlockId(data.mostRecentBlockId);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[onFirstPage, topOfBlogVisible, numHiddenBlocks, enhanceTweetsSwitch],\n\t);\n\n\t/**\n\t * This is a utility used by our Cypress end to end tests\n\t *\n\t * Rather than expect these scripts to depend on polling, we\n\t * expose this function to allow Cypress to manually trigger\n\t * updates with whatever html and properties it wants\n\t *\n\t */\n\twindow.mockLiveUpdate = onSuccess;\n\n\t// useApi returns { data, loading, error } but we're not using them here\n\tuseApi(getKey(pageId, ajaxUrl, latestBlockId, filterKeyEvents), {\n\t\trefreshInterval: 10_000,\n\t\trefreshWhenHidden: true,\n\t\tonSuccess,\n\t});\n\n\tuseEffect(() => {\n\t\tdocument.title =\n\t\t\tnumHiddenBlocks > 0 ? `(${numHiddenBlocks}) ${webTitle}` : webTitle;\n\t}, [numHiddenBlocks, webTitle]);\n\n\tuseEffect(() => {\n\t\tif (!topOfBlog) return () => {};\n\n\t\tconst observer = new window.IntersectionObserver(([entry]) => {\n\t\t\tsetTopOfBlogVisible(entry.isIntersecting);\n\n\t\t\tif (entry.isIntersecting && onFirstPage) {\n\t\t\t\t// If on first page, reveal blocks\n\t\t\t\trevealPendingBlocks();\n\t\t\t\tsetNumHiddenBlocks(0);\n\t\t\t\tsetShowToast(false);\n\t\t\t}\n\t\t});\n\n\t\tobserver.observe(topOfBlog);\n\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [onFirstPage]);\n\n\t/**\n\t * This useEffect sets up a listener for when the page is backgrounded or restored. We\n\t * do this so that any new blocks that were fetched while the blog was in the\n\t * background are animated in at the point when focus is restored\n\t */\n\tuseEffect(() => {\n\t\tconst handleVisibilityChange = () => {\n\t\t\t// The blog was either hidden or has become visible\n\t\t\tif (\n\t\t\t\t// If we're returning to a blog that has pending blocks and the reader\n\t\t\t\t// is at the top of the first page then...\n\t\t\t\tdocument.visibilityState === 'visible' &&\n\t\t\t\tnumHiddenBlocks > 0 &&\n\t\t\t\ttopOfBlogVisible &&\n\t\t\t\tonFirstPage\n\t\t\t) {\n\t\t\t\trevealPendingBlocks();\n\t\t\t\tsetNumHiddenBlocks(0);\n\t\t\t\tsetShowToast(false);\n\t\t\t}\n\t\t};\n\n\t\twindow.addEventListener('visibilitychange', handleVisibilityChange);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\n\t\t\t\t'visibilitychange',\n\t\t\t\thandleVisibilityChange,\n\t\t\t);\n\t\t};\n\t}, [numHiddenBlocks, onFirstPage, topOfBlogVisible]);\n\n\tconst handleToastClick = useCallback(() => {\n\t\t// We adjust the position we scroll readers to based on if there is a pinned\n\t\t// post or not. If there is we want to scroll them to a position below it, if\n\t\t// there is then we want to scroll them to a position that ensures they still\n\t\t// see the key events filter\n\t\tconst placeToScrollTo = hasPinnedPost ? 'top-of-blog' : 'maincontent';\n\t\tif (onFirstPage) {\n\t\t\tsetShowToast(false);\n\n\t\t\tdocument.getElementById(placeToScrollTo)?.scrollIntoView({\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t\twindow.history.replaceState({}, '', `#${placeToScrollTo}`);\n\t\t\trevealPendingBlocks();\n\t\t\tsetNumHiddenBlocks(0);\n\t\t} else {\n\t\t\twindow.location.href = `${webURL}#${placeToScrollTo}`;\n\t\t}\n\t}, [hasPinnedPost, onFirstPage, webURL]);\n\n\tif (toastRoot && showToast) {\n\t\t/**\n\t\t * Why `createPortal`?\n\t\t *\n\t\t * We use a Portal because of a the way different browsers implement `position: sticky`.\n\t\t * A [stickily positioned element][] depends on its [containing block][] to determine\n\t\t * when to become stuck.\n\t\t *\n\t\t * In Safari the containing block is set to the immediate parent\n\t\t * whereas Chrome, Firefox and other browser are more forgiving.\n\t\t *\n\t\t * By using a Portal we can insert the Toast as a sibling to the Island, which works around\n\t\t * Safari's behaviour.\n\t\t *\n\t\t * [stickily positioned element]: https://developer.mozilla.org/en-US/docs/Web/CSS/position#types_of_positioning\n\t\t * [containing block]: https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\t\t */\n\t\treturn ReactDOM.createPortal(\n\t\t\t<Toast\n\t\t\t\tonClick={handleToastClick}\n\t\t\t\tcount={numHiddenBlocks}\n\t\t\t\tformat={format}\n\t\t\t/>,\n\t\t\ttoastRoot,\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Logo.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MainMedia.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MainMediaEmbedBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":74}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\n\ntype Props = {\n\ttitle: string;\n\tsrcDoc: string;\n};\n\nexport const MainMediaEmbedBlockComponent = ({ title, srcDoc }: Props) => (\n\t<iframe\n\t\tcss={css`\n\t\t\twidth: 100%;\n\t\t\theight: 100vh;\n\t\t`}\n\t\ttitle={title}\n\t\tsrcDoc={srcDoc}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MaintainAspectRatio.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":75}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\n\ntype Props = {\n\theight: number;\n\twidth: number;\n\tchildren: React.ReactNode;\n};\n\nexport const MaintainAspectRatio = ({ height, width, children }: Props) => (\n\t/* https://css-tricks.com/aspect-ratio-boxes/ */\n\t<div\n\t\tcss={css`\n\t\t\t/* position relative to contain the absolutely positioned iframe plus any Overlay image */\n\t\t\tposition: relative;\n\t\t\tpadding-bottom: ${(height / width) * 100}%;\n\n\t\t\tiframe {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MapEmbedBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Caption } from './Caption';\nimport { ClickToView } from './ClickToView';\nimport { MaintainAspectRatio } from './MaintainAspectRatio';\n\ntype Props = {\n\tembedUrl?: string;\n\theight: number;\n\twidth: number;\n\ttitle?: string;\n\tcaption?: string;\n\tformat: ArticleFormat;\n\tcredit?: string;\n\trole?: RoleType;\n\tisTracking: boolean;\n\tisMainMedia: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nexport const MapEmbedBlockComponent = ({\n\tembedUrl,\n\ttitle,\n\twidth,\n\theight,\n\tcaption,\n\tformat,\n\tcredit,\n\trole,\n\tisTracking,\n\tisMainMedia,\n\tsource,\n\tsourceDomain,\n}: Props) => {\n\t// 812 is the full height on an iphone X. This ensures that the embed doesn't display any larger than the available viewport\n\t// Constrain iframe embeds with a width to their natural width\n\t// rather than stretch them to the container using\n\t// a max that would prevent portrait videos from being taller than an iphone X (baseline)\n\t// More context: https://github.com/guardian/frontend/pull/17902\n\tconst maxHeight = 812;\n\tconst aspectRatio = width / height;\n\tconst maxWidth = maxHeight * aspectRatio;\n\n\tconst hasCaption = caption != null;\n\n\tconst embedContainer = css`\n\t\tmax-width: ${maxWidth}px;\n\t\twidth: 100%;\n\t\tmargin-bottom: ${hasCaption ? `0px` : `6px`};\n\t`;\n\n\treturn (\n\t\t<ClickToView\n\t\t\trole={role}\n\t\t\tisTracking={isTracking}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tsource={source}\n\t\t\tsourceDomain={sourceDomain}\n\t\t>\n\t\t\t<div css={embedContainer}>\n\t\t\t\t<MaintainAspectRatio height={height} width={width}>\n\t\t\t\t\t<iframe\n\t\t\t\t\t\tsrc={embedUrl}\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\tallowFullScreen={true}\n\t\t\t\t\t/>\n\t\t\t\t</MaintainAspectRatio>\n\t\t\t\t{hasCaption && (\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tcredit={credit}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</ClickToView>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MatchNav.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":50,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":61,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":72,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":72,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":77,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":77,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { ArticleContainer } from './ArticleContainer';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { LeftColumn } from './LeftColumn';\nimport { MatchNav } from './MatchNav';\nimport { RightColumn } from './RightColumn';\n\nconst homeTeam: TeamType = {\n\tname: 'Liverpool',\n\tcodename: 'LIV',\n\tid: '9',\n\tscore: 2,\n\tcrest: 'https://sport.guim.co.uk/football/crests/120/9.png',\n\tscorers: ['Georginio Wijnaldum 43', 'Roberto Firmino 94'],\n\tplayers: [],\n\tpossession: 1,\n\tshotsOn: 2,\n\tshotsOff: 66,\n\tcorners: 8,\n\tfouls: 4,\n\tcolours: '#e354c3',\n};\n\nconst awayTeam: TeamType = {\n\tname: 'Atlético',\n\tcodename: 'ATL',\n\tid: '26305',\n\tscore: 3,\n\tcrest: 'https://sport.guim.co.uk/football/crests/120/26305.png',\n\tscorers: [\n\t\t'Marcos Llorente 97',\n\t\t'Marcos Llorente 105 +0:02',\n\t\t'Alvaro Morata 120 +0:16',\n\t],\n\tplayers: [],\n\tpossession: 1,\n\tshotsOn: 28,\n\tshotsOff: 6,\n\tcorners: 8,\n\tfouls: 4,\n\tcolours: '#fc3',\n};\n\nexport default {\n\tcomponent: MatchNav,\n\ttitle: 'Components/MatchNav',\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<MatchNav\n\t\t\thomeTeam={homeTeam}\n\t\t\tawayTeam={awayTeam}\n\t\t\tcomments=\"Here is a comments string\"\n\t\t/>\n\t);\n};\nDefault.story = { name: 'default' };\n\nexport const ZeroZero = () => {\n\treturn (\n\t\t<MatchNav\n\t\t\thomeTeam={{ ...homeTeam, score: 0, scorers: [] }}\n\t\t\tawayTeam={{ ...awayTeam, score: 0, scorers: [] }}\n\t\t\tcomments=\"Neither team scored any goals\"\n\t\t/>\n\t);\n};\nZeroZero.story = { name: 'zero - zero' };\n\nexport const NoComments = () => {\n\treturn <MatchNav homeTeam={homeTeam} awayTeam={awayTeam} />;\n};\nNoComments.story = { name: 'with no comments' };\n\nexport const InContext = () => {\n\treturn (\n\t\t<ElementContainer padded={false}>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<MatchNav\n\t\t\t\t\t\thomeTeam={homeTeam}\n\t\t\t\t\t\tawayTeam={awayTeam}\n\t\t\t\t\t\tcomments=\"Here is a comments string\"\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nInContext.story = { name: 'when placed in article context' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MatchNav.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":210,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":210,"endColumn":69}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbackground,\n\tbrandAlt,\n\theadline,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { Score } from './Score';\n\ntype Props = {\n\thomeTeam: TeamType;\n\tawayTeam: TeamType;\n\tcomments?: string;\n};\n\nconst Row = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst CrestRow = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\talign-items: flex-end;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst StretchBackground = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: space-between;\n\t\t\tposition: relative;\n\t\t\tpadding: ${space[2]}px;\n\t\t\tbackground-color: ${brandAlt[400]};\n\t\t\tmargin-bottom: 10px;\n\t\t\t${until.tablet} {\n\t\t\t\tmargin: 0 -10px 10px;\n\t\t\t}\n\n\t\t\t:before {\n\t\t\t\tcontent: '';\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\twidth: 100vw;\n\t\t\t\tleft: -100vw;\n\t\t\t\tbackground-color: ${brandAlt[400]};\n\t\t\t\tz-index: -1;\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Column = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: space-between;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst TeamName = ({ name }: { name: string }) => (\n\t<h2\n\t\tcss={css`\n\t\t\t${headline.xxsmall({ fontWeight: 'bold' })}\n\t\t`}\n\t>\n\t\t{name}\n\t</h2>\n);\n\nconst Scorers = ({ scorers }: { scorers: string[] }) => (\n\t<ul\n\t\tcss={css`\n\t\t\tmargin-top: ${space[1]}px;\n\t\t\tmargin-bottom: ${space[3]}px;\n\t\t`}\n\t>\n\t\t{scorers.map((player) => (\n\t\t\t<li\n\t\t\t\tcss={css`\n\t\t\t\t\t${textSans.small()}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{player}\n\t\t\t</li>\n\t\t))}\n\t</ul>\n);\n\nconst Crest = ({ crest }: { crest: string }) => (\n\t<div\n\t\tcss={css`\n\t\t\tposition: relative;\n\t\t\twidth: 3.75rem;\n\t\t\theight: 3.75rem;\n\t\t\tborder-radius: 1.875rem;\n\t\t\tbackground-color: ${background.primary};\n\t\t\tz-index: 1;\n\t\t`}\n\t>\n\t\t<img\n\t\t\tcss={css`\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0.5rem;\n\t\t\t\tright: 0.5rem;\n\t\t\t\tbottom: 0.5rem;\n\t\t\t\ttop: 0.5rem;\n\t\t\t\tmax-width: calc(100% - 1rem);\n\t\t\t\tmax-height: calc(100% - 1rem);\n\t\t\t\tmargin: auto;\n\t\t\t\tdisplay: block;\n\t\t\t`}\n\t\t\tsrc={crest}\n\t\t\talt=\"\"\n\t\t/>\n\t</div>\n);\n\nconst TeamNav = ({\n\tname,\n\tscore,\n\tcrest,\n\tscorers,\n}: {\n\tname: string;\n\tscore: number;\n\tcrest: string;\n\tscorers: string[];\n}) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-grow: 1;\n\t\t\tflex-basis: 50%;\n\t\t`}\n\t>\n\t\t<Column>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tflex-grow: 1;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<TeamName name={name} />\n\t\t\t\t<Scorers scorers={scorers} />\n\t\t\t</div>\n\t\t\t<CrestRow>\n\t\t\t\t<Crest crest={crest} />\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-left: -${space[2]}px;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<Score score={score} />\n\t\t\t\t</div>\n\t\t\t</CrestRow>\n\t\t</Column>\n\t</div>\n);\n\nconst Comments = ({ comments }: { comments: string }) => (\n\t<div\n\t\tcss={css`\n\t\t\t${textSans.small()}\n\t\t\tmargin-top: ${space[2]}px;\n\t\t\tpadding-top: ${space[1]}px;\n\t\t\tfont-style: italic;\n\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\tborder-top: 1px solid #d0bb04;\n\t\t`}\n\t>\n\t\t{comments}\n\t</div>\n);\n\nconst YellowBorder = () => (\n\t<div\n\t\tcss={css`\n\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\tborder-left: 1px solid #d0bb04;\n\t\t\tmargin-left: ${space[1]}px;\n\t\t\twidth: ${space[2]}px;\n\t\t`}\n\t/>\n);\n\nexport const MatchNav = ({ homeTeam, awayTeam, comments }: Props) => (\n\t<div>\n\t\t<StretchBackground>\n\t\t\t<Row>\n\t\t\t\t<TeamNav\n\t\t\t\t\tname={homeTeam.name}\n\t\t\t\t\tscore={homeTeam.score}\n\t\t\t\t\tcrest={homeTeam.crest}\n\t\t\t\t\tscorers={homeTeam.scorers}\n\t\t\t\t/>\n\t\t\t\t<YellowBorder />\n\t\t\t\t<TeamNav\n\t\t\t\t\tname={awayTeam.name}\n\t\t\t\t\tscore={awayTeam.score}\n\t\t\t\t\tcrest={awayTeam.crest}\n\t\t\t\t\tscorers={awayTeam.scorers}\n\t\t\t\t/>\n\t\t\t</Row>\n\t\t\t{comments && <Comments comments={comments} />}\n\t\t</StretchBackground>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MatchStats.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { matchReport } from '../../../fixtures/generated/match-report';\nimport { ArticleContainer } from './ArticleContainer';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { LeftColumn } from './LeftColumn';\nimport { MatchStats } from './MatchStats';\nimport { RightColumn } from './RightColumn';\n\nexport default {\n\tcomponent: MatchStats,\n\ttitle: 'Components/MatchStats',\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<MatchStats\n\t\t\thome={matchReport.homeTeam}\n\t\t\taway={matchReport.awayTeam}\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t}}\n\t\t/>\n\t);\n};\nDefault.story = { name: 'default' };\n\nexport const InContext = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<MatchStats\n\t\t\t\t\t\thome={matchReport.homeTeam}\n\t\t\t\t\t\taway={matchReport.awayTeam}\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nInContext.story = { name: 'when placed in article context' };\n\nconst DefaultInLiveblog = () => {\n\treturn (\n\t\t<MatchStats\n\t\t\thome={matchReport.homeTeam}\n\t\t\taway={matchReport.awayTeam}\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t}}\n\t\t/>\n\t);\n};\nDefaultInLiveblog.story = { name: 'when placed in a liveblog' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MatchStats.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":335,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":335,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport {\n\tbetween,\n\tborder,\n\tfrom,\n\theadline,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Distribution } from './Distribution';\nimport { Doughnut } from './Doughnut';\nimport { GoalAttempts } from './GoalAttempts';\nimport { GridItem } from './GridItem';\nimport { Hide } from './Hide';\nimport { Lineup } from './Lineup';\n\ntype Props = {\n\thome: TeamType;\n\taway: TeamType;\n\tformat: ArticleFormat;\n};\n\nconst StatsGrid = ({\n\tchildren,\n\tformat,\n}: {\n\tchildren: React.ReactNode;\n\tformat: ArticleFormat;\n}) => {\n\tconst palette = decidePalette(format);\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog: {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t/* IE Fallback */\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\n\t\t\t\t\t\tbackground-color: ${palette.background.matchStats};\n\t\t\t\t\t\t@supports (display: grid) {\n\t\t\t\t\t\t\tdisplay: grid;\n\n\t\t\t\t\t\t\t${until.desktop} {\n\t\t\t\t\t\t\t\tgrid-template-columns: 50% 50%;\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title          .'\n\t\t\t\t\t\t\t\t\t'possession     attempts'\n\t\t\t\t\t\t\t\t\t'possession     corners'\n\t\t\t\t\t\t\t\t\t'possession     fouls'\n\t\t\t\t\t\t\t\t\t'subtitle       .'\n\t\t\t\t\t\t\t\t\t'home           away';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t${from.desktop} {\n\t\t\t\t\t\t\t\tgrid-template-columns: 100%;\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title'\n\t\t\t\t\t\t\t\t\t'possession'\n\t\t\t\t\t\t\t\t\t'attempts'\n\t\t\t\t\t\t\t\t\t'corners'\n\t\t\t\t\t\t\t\t\t'fouls'\n\t\t\t\t\t\t\t\t\t'subtitle'\n\t\t\t\t\t\t\t\t\t'home'\n\t\t\t\t\t\t\t\t\t'away';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t${until.phablet} {\n\t\t\t\t\t\t\t\tgrid-template-columns: 50% 50%;\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title\t\t\ttitle'\n\t\t\t\t\t\t\t\t\t'possession\t\tpossession'\n\t\t\t\t\t\t\t\t\t'attempts\t\tattempts'\n\t\t\t\t\t\t\t\t\t'corners\t\tcorners'\n\t\t\t\t\t\t\t\t\t'fouls\t\t\tfouls'\n\t\t\t\t\t\t\t\t\t'subtitle\t\tsubtitle'\n\t\t\t\t\t\t\t\t\t'home\t\t\taway';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\tdefault: {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t/* IE Fallback */\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\n\t\t\t\t\t\tbackground-color: ${palette.background.matchStats};\n\t\t\t\t\t\t@supports (display: grid) {\n\t\t\t\t\t\t\tdisplay: grid;\n\n\t\t\t\t\t\t\t${from.wide} {\n\t\t\t\t\t\t\t\tgrid-template-columns: 50% 50%;\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title          .'\n\t\t\t\t\t\t\t\t\t'possession     attempts'\n\t\t\t\t\t\t\t\t\t'possession     corners'\n\t\t\t\t\t\t\t\t\t'possession     fouls'\n\t\t\t\t\t\t\t\t\t'subtitle       .'\n\t\t\t\t\t\t\t\t\t'home           away';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t${until.wide} {\n\t\t\t\t\t\t\t\tgrid-template-columns: 50% 50%;\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title          .'\n\t\t\t\t\t\t\t\t\t'possession     attempts'\n\t\t\t\t\t\t\t\t\t'possession     corners'\n\t\t\t\t\t\t\t\t\t'possession     fouls'\n\t\t\t\t\t\t\t\t\t'subtitle       .'\n\t\t\t\t\t\t\t\t\t'home           away';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t${until.phablet} {\n\t\t\t\t\t\t\t\tgrid-template-columns: 100%;\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title'\n\t\t\t\t\t\t\t\t\t'possession'\n\t\t\t\t\t\t\t\t\t'attempts'\n\t\t\t\t\t\t\t\t\t'corners'\n\t\t\t\t\t\t\t\t\t'fouls'\n\t\t\t\t\t\t\t\t\t'subtitle'\n\t\t\t\t\t\t\t\t\t'home'\n\t\t\t\t\t\t\t\t\t'away';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n};\n\nconst StretchBackground = ({\n\tformat,\n\tchildren,\n}: {\n\tformat: ArticleFormat;\n\tchildren: React.ReactNode;\n}) => {\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tclear: left;\n\t\t\t\tposition: relative;\n\t\t\t\tflex-grow: 1;\n\t\t\t\tpadding: ${space[2]}px 10px;\n\t\t\t\t${from.mobileLandscape} {\n\t\t\t\t\tmargin-left: ${space[3]}px;\n\t\t\t\t}\n\t\t\t\t/* We use min-height to help reduce our CLS value */\n\t\t\t\tmin-height: 800px;\n\t\t\t\tbackground-color: ${palette.background.matchStats};\n\n\t\t\t\t${from.leftCol} {\n\t\t\t\t\t:before {\n\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tbottom: 0;\n\t\t\t\t\t\t/* stretch left */\n\t\t\t\t\t\tleft: -100vw;\n\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\tbackground-color: ${palette.background.matchStats};\n\t\t\t\t\t\tz-index: -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nconst ShiftLeft = ({\n\tchildren,\n\tformat,\n}: {\n\tchildren: React.ReactNode;\n\tformat: ArticleFormat;\n}) => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog: {\n\t\t\treturn <div>{children}</div>;\n\t\t}\n\t\tdefault: {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\tleft: -160px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t${from.wide} {\n\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\tleft: -240px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t}\n};\n\nconst Center = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst RightBorder = ({ children }: { children: React.ReactNode }) => (\n\t<h4\n\t\tcss={css`\n\t\t\t${from.phablet} {\n\t\t\t\tborder-right: 1px solid ${border.secondary};\n\t\t\t}\n\t\t\tmargin-right: 10px;\n\t\t\tpadding-right: 10px;\n\t\t\t${from.desktop} {\n\t\t\t\tmargin-right: 0;\n\t\t\t\tpadding-right: 0;\n\t\t\t\tborder-right: 0;\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</h4>\n);\n\nconst H3 = ({ children }: { children: React.ReactNode }) => (\n\t<h3\n\t\tcss={css`\n\t\t\t${headline.xxsmall({ fontWeight: 'bold' })}\n\t\t`}\n\t>\n\t\t{children}\n\t</h3>\n);\n\nconst H4 = ({ children }: { children: React.ReactNode }) => (\n\t<h4\n\t\tcss={css`\n\t\t\t${textSans.small()}\n\t\t`}\n\t>\n\t\t{children}\n\t</h4>\n);\n\nconst DecideDoughnut = ({\n\thome,\n\taway,\n\tformat,\n}: {\n\thome: TeamType;\n\taway: TeamType;\n\tformat: ArticleFormat;\n}) => {\n\tconst sections = [\n\t\t{\n\t\t\tvalue: home.possession,\n\t\t\tlabel: home.codename,\n\t\t\tcolor: home.colours,\n\t\t},\n\t\t{\n\t\t\tvalue: away.possession,\n\t\t\tlabel: away.codename,\n\t\t\tcolor: away.colours,\n\t\t},\n\t].reverse();\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog: {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{/* This represents the stats component being within the main body on a liveblog */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${from.mobileMedium} {\n\t\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Doughnut sections={sections} size={200} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t${between.mobileMedium.and.desktop} {\n\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Doughnut sections={sections} size={300} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* This represents the stats component being within the left column on a liveblog */}\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${until.desktop} {\n\t\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Doughnut sections={sections} size={200} />\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t\tdefault:\n\t\t\treturn <Doughnut sections={sections} />;\n\t}\n};\n\nexport const MatchStats = ({ home, away, format }: Props) => {\n\treturn (\n\t\t<StretchBackground format={format}>\n\t\t\t<StatsGrid format={format}>\n\t\t\t\t<GridItem area=\"title\" element=\"aside\">\n\t\t\t\t\t<ShiftLeft format={format}>\n\t\t\t\t\t\t{/* Don't show the right border if this text was\n                        shifted into the left column */}\n\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"desktop\">\n\t\t\t\t\t\t\t<RightBorder>\n\t\t\t\t\t\t\t\t<H3>Match Stats</H3>\n\t\t\t\t\t\t\t</RightBorder>\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"desktop\">\n\t\t\t\t\t\t\t<H3>Match Stats</H3>\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t</ShiftLeft>\n\t\t\t\t</GridItem>\n\t\t\t\t<GridItem area=\"possession\">\n\t\t\t\t\t<RightBorder>\n\t\t\t\t\t\t<H4>Possession</H4>\n\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t<DecideDoughnut\n\t\t\t\t\t\t\t\thome={home}\n\t\t\t\t\t\t\t\taway={away}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Center>\n\t\t\t\t\t</RightBorder>\n\t\t\t\t\t<br />\n\t\t\t\t</GridItem>\n\t\t\t\t<GridItem area=\"attempts\">\n\t\t\t\t\t<H4>Attempts</H4>\n\t\t\t\t\t<GoalAttempts\n\t\t\t\t\t\tleft={{\n\t\t\t\t\t\t\tonTarget: home.shotsOn,\n\t\t\t\t\t\t\toffTarget: home.shotsOff,\n\t\t\t\t\t\t\tcolor: home.colours,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tright={{\n\t\t\t\t\t\t\tonTarget: away.shotsOn,\n\t\t\t\t\t\t\toffTarget: away.shotsOff,\n\t\t\t\t\t\t\tcolor: away.colours,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</GridItem>\n\t\t\t\t<GridItem area=\"corners\">\n\t\t\t\t\t<H4>Corners</H4>\n\t\t\t\t\t<Distribution\n\t\t\t\t\t\tleft={{\n\t\t\t\t\t\t\tvalue: home.corners,\n\t\t\t\t\t\t\tcolor: home.colours,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tright={{\n\t\t\t\t\t\t\tvalue: away.corners,\n\t\t\t\t\t\t\tcolor: away.colours,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</GridItem>\n\t\t\t\t<GridItem area=\"fouls\">\n\t\t\t\t\t<H4>Fouls</H4>\n\t\t\t\t\t<Distribution\n\t\t\t\t\t\tleft={{\n\t\t\t\t\t\t\tvalue: home.fouls,\n\t\t\t\t\t\t\tcolor: home.colours,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tright={{\n\t\t\t\t\t\t\tvalue: away.fouls,\n\t\t\t\t\t\t\tcolor: away.colours,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<br />\n\t\t\t\t</GridItem>\n\t\t\t\t<GridItem area=\"subtitle\">\n\t\t\t\t\t<ShiftLeft format={format}>\n\t\t\t\t\t\t{/* Don't show the right border if this text was\n                        shifted into the left column */}\n\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"desktop\">\n\t\t\t\t\t\t\t<RightBorder>\n\t\t\t\t\t\t\t\t<H3>Lineups</H3>\n\t\t\t\t\t\t\t</RightBorder>\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"desktop\">\n\t\t\t\t\t\t\t<H3>Lineups</H3>\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t</ShiftLeft>\n\t\t\t\t</GridItem>\n\t\t\t\t<GridItem area=\"home\">\n\t\t\t\t\t<RightBorder>\n\t\t\t\t\t\t<H4>{home.name}</H4>\n\t\t\t\t\t\t<Lineup\n\t\t\t\t\t\t\tplayers={home.players.filter(\n\t\t\t\t\t\t\t\t(player) => !player.substitute,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<H4>Substitutes</H4>\n\t\t\t\t\t\t<Lineup\n\t\t\t\t\t\t\tplayers={home.players.filter(\n\t\t\t\t\t\t\t\t(player) => player.substitute,\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t</RightBorder>\n\t\t\t\t</GridItem>\n\t\t\t\t<GridItem area=\"away\">\n\t\t\t\t\t<H4>{away.name}</H4>\n\t\t\t\t\t<Lineup\n\t\t\t\t\t\tplayers={away.players.filter(\n\t\t\t\t\t\t\t(player) => !player.substitute,\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<br />\n\t\t\t\t\t<H4>Substitutes</H4>\n\t\t\t\t\t<Lineup\n\t\t\t\t\t\tplayers={away.players.filter(\n\t\t\t\t\t\t\t(player) => player.substitute,\n\t\t\t\t\t\t)}\n\t\t\t\t\t/>\n\t\t\t\t\t<br />\n\t\t\t\t</GridItem>\n\t\t\t</StatsGrid>\n\t\t</StretchBackground>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MatchTabs.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":24,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":24,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":39,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":39,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { MatchTabs } from './MatchTabs';\n\nexport default {\n\tcomponent: MatchTabs,\n\ttitle: 'Components/MatchTabs',\n};\n\nexport const BothURLs = () => {\n\treturn (\n\t\t<MatchTabs\n\t\t\tminByMinUrl=\"https://www.theguardian.com/football/live/2021/nov/03/manchester-city-v-club-brugge-champions-league-live-score-updates\"\n\t\t\treportUrl=\"https://www.theguardian.com/football/2021/nov/03/manchester-city-club-brugge-champions-league-match-report\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t}}\n\t\t/>\n\t);\n};\nBothURLs.story = { name: 'Both URLs' };\n\nexport const OnReportPage = () => {\n\treturn (\n\t\t<MatchTabs\n\t\t\tminByMinUrl=\"https://www.theguardian.com/football/live/2021/nov/03/manchester-city-v-club-brugge-champions-league-live-score-updates\"\n\t\t\treportUrl=\"https://www.theguardian.com/football/2021/nov/03/manchester-city-club-brugge-champions-league-match-report\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t}}\n\t\t/>\n\t);\n};\nOnReportPage.story = { name: 'On Report Page' };\n\nexport const OnBlogPage = () => {\n\treturn (\n\t\t<MatchTabs\n\t\t\tminByMinUrl=\"https://www.theguardian.com/football/live/2021/nov/03/manchester-city-v-club-brugge-champions-league-live-score-updates\"\n\t\t\treportUrl=\"https://www.theguardian.com/football/2021/nov/03/manchester-city-club-brugge-champions-league-match-report\"\n\t\t\tformat={{\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t}}\n\t\t/>\n\t);\n};\nOnBlogPage.story = { name: 'On Blog Page' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MatchTabs.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":61,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":72}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { headline, space } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tminByMinUrl?: string;\n\treportUrl?: string;\n\tformat: ArticleFormat;\n};\n\nconst thinGreySolid = (palette: Palette) =>\n\t`1px solid ${palette.border.matchTab}`;\n\nconst GreyBorder = ({ palette }: { palette: Palette }) => (\n\t<div\n\t\tcss={css`\n\t\t\tborder-left: ${thinGreySolid(palette)};\n\t\t\tmargin-left: ${space[1]}px;\n\t\t\twidth: ${space[2]}px;\n\t\t`}\n\t/>\n);\n\nconst tabsContainer = (palette: Palette) => css`\n\tdisplay: flex;\n\tposition: relative;\n\tborder-bottom: ${thinGreySolid(palette)};\n`;\n\nconst tab = (palette: Palette) => css`\n\tflex-basis: 50%;\n\theight: 40px;\n\tborder-top: 3px solid ${palette.border.matchTab};\n`;\n\nconst activeTab = (palette: Palette) => css`\n\tborder-top: 3px solid ${palette.border.activeMatchTab};\n`;\n\nconst tabLink = (palette: Palette) => css`\n\tcolor: ${palette.border.activeMatchTab};\n\tdisplay: block;\n\ttext-decoration: none;\n\t&:hover {\n\t\tbackground-color: ${palette.background.article};\n\t}\n`;\n\nconst tabLabel = css`\n\t${headline.xxxsmall()};\n\tbackground: transparent;\n\tpadding: 6px 8px 0;\n\ttext-align: left;\n\tfont-weight: 600;\n\tmin-height: 36px;\n\tdisplay: block;\n\twidth: 100%;\n`;\n\nexport const MatchTabs = ({ minByMinUrl, reportUrl, format }: Props) => {\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<div>\n\t\t\t<ul css={tabsContainer(palette)}>\n\t\t\t\t<li\n\t\t\t\t\tcss={[\n\t\t\t\t\t\ttab(palette),\n\t\t\t\t\t\tformat.design === ArticleDesign.MatchReport &&\n\t\t\t\t\t\t\tactiveTab(palette),\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={reportUrl}\n\t\t\t\t\t\tdata-link-name=\"report\"\n\t\t\t\t\t\tcss={tabLink(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span css={tabLabel}>Report</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t\t<GreyBorder palette={palette} />\n\t\t\t\t<li\n\t\t\t\t\tcss={[\n\t\t\t\t\t\ttab(palette),\n\t\t\t\t\t\t(format.design === ArticleDesign.DeadBlog ||\n\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog) &&\n\t\t\t\t\t\t\tactiveTab(palette),\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={minByMinUrl}\n\t\t\t\t\t\tdata-link-name=\"Min-by-min\"\n\t\t\t\t\t\tcss={tabLink(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span css={tabLabel}>Min-by-min</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MediaMeta.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MediaMeta.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":71,"column":56,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":71,"endColumn":58},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":72,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":79,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":102,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":107,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { textSans } from '@guardian/source-foundations';\nimport {\n\tSvgAudio,\n\tSvgCamera,\n\tSvgVideo,\n} from '@guardian/source-react-components';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tmediaType: MediaType;\n\tcontainerPalette?: DCRContainerPalette;\n\tformat: ArticleFormat;\n\tmediaDuration?: number;\n};\n\nconst iconWrapperStyles = (palette: Palette) => css`\n\twidth: 24px;\n\theight: 24px;\n\t/* We’re using the text colour for the icon badge */\n\tbackground-color: ${palette.text.cardFooter};\n\tborder-radius: 50%;\n\tdisplay: inline-block;\n\n\t> svg {\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tmargin-left: auto;\n\t\tmargin-right: auto;\n\t\tmargin-top: 2px;\n\t\tdisplay: block;\n\t\tfill: ${palette.background.card};\n\t}\n`;\n\nconst durationStyles = (palette: Palette) => css`\n\tcolor: ${palette.text.cardFooter};\n\t${textSans.xxsmall({ fontWeight: `bold` })}\n`;\n\nconst wrapperStyles = css`\n\tdisplay: flex;\n\talign-items: center;\n\n\tpadding: 0 5px 5px 5px;\n`;\n\nexport function secondsToDuration(secs?: number): string {\n\tif (typeof secs === `undefined` || secs === 0) {\n\t\treturn ``;\n\t}\n\tconst seconds = Number(secs);\n\tconst h = Math.floor(seconds / 3600);\n\tconst m = Math.floor((seconds % 3600) / 60);\n\tconst s = Math.floor((seconds % 3600) % 60);\n\n\tconst duration = [];\n\tif (h > 0) {\n\t\tduration.push(h);\n\t}\n\tif (m > 0 || h === 0) {\n\t\t// supports 0:59\n\t\tduration.push(m);\n\t}\n\tif (s > 0) {\n\t\tduration.push(s);\n\t}\n\treturn duration.join(':');\n}\n\nconst Icon = ({ mediaType }: { mediaType: MediaType }) => {\n\tswitch (mediaType) {\n\t\tcase 'Gallery':\n\t\t\treturn <SvgCamera />;\n\t\tcase 'Video':\n\t\t\treturn <SvgVideo />;\n\t\tcase 'Audio':\n\t\t\treturn <SvgAudio />;\n\t}\n};\n\nconst MediaIcon = ({\n\tmediaType,\n\tpalette,\n}: {\n\tmediaType: MediaType;\n\tpalette: Palette;\n}) => (\n\t<span css={iconWrapperStyles(palette)}>\n\t\t<Icon mediaType={mediaType} />\n\t</span>\n);\n\nconst MediaDuration = ({\n\tmediaDuration,\n\tpalette,\n}: {\n\tmediaDuration: number;\n\tpalette: Palette;\n}) => <p css={durationStyles(palette)}>{secondsToDuration(mediaDuration)}</p>;\n\nexport const MediaMeta = ({\n\tmediaType,\n\tmediaDuration,\n\tformat,\n\tcontainerPalette,\n}: Props) => {\n\tconst palette = decidePalette(format, containerPalette);\n\treturn (\n\t\t<div css={wrapperStyles}>\n\t\t\t<MediaIcon mediaType={mediaType} palette={palette} />\n\t\t\t&nbsp;\n\t\t\t{mediaDuration && (\n\t\t\t\t<MediaDuration\n\t\t\t\t\tmediaDuration={mediaDuration}\n\t\t\t\t\tpalette={palette}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MoreThanFive.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":70}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport { Card } from './Card/Card';\nimport { LI } from './Card/components/LI';\nimport { UL } from './Card/components/UL';\n\ntype Props = {\n\tcontent: TrailType[];\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nconst decidePercentage = (length: number) => {\n\t// The first row of four is spaced at 25%, this function decides for the second row\n\tswitch (length) {\n\t\tcase 6:\n\t\t\treturn '50%';\n\t\tcase 7:\n\t\t\treturn '34%';\n\t\tcase 8:\n\t\t\treturn '25%';\n\t\tdefault:\n\t\t\treturn '25%';\n\t}\n};\n\nexport const MoreThanFive = ({ content, containerPalette }: Props) => {\n\tconst secondRowPercentage = decidePercentage(content.length);\n\tconst secondRowTrails = content.slice(4, content.length);\n\treturn (\n\t\t<>\n\t\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t\t<LI padSides={true} percentage=\"25%\">\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\tlinkTo={content[0].url}\n\t\t\t\t\t\tformat={content[0].format}\n\t\t\t\t\t\theadlineText={content[0].headline}\n\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\tbyline={content[0].byline}\n\t\t\t\t\t\tshowByline={content[0].showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tcontent[0].format.design ===\n\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\tcontent[0].format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={content[0].webPublicationDate}\n\t\t\t\t\t\tkickerText={content[0].kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tcontent[0].format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={content[0].image}\n\t\t\t\t\t\tmediaType={content[0].mediaType}\n\t\t\t\t\t\tmediaDuration={content[0].mediaDuration}\n\t\t\t\t\t\tcommentCount={content[0].commentCount}\n\t\t\t\t\t\tstarRating={content[0].starRating}\n\t\t\t\t\t\tbranding={content[0].branding}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t\t<LI\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tshowTopMarginWhenStacked={true}\n\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\tlinkTo={content[1].url}\n\t\t\t\t\t\tformat={content[1].format}\n\t\t\t\t\t\theadlineText={content[1].headline}\n\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\tbyline={content[1].byline}\n\t\t\t\t\t\tshowByline={content[1].showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tcontent[1].format.design ===\n\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\tcontent[1].format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={content[1].webPublicationDate}\n\t\t\t\t\t\tkickerText={content[1].kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tcontent[1].format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={content[1].image}\n\t\t\t\t\t\tmediaType={content[1].mediaType}\n\t\t\t\t\t\tmediaDuration={content[1].mediaDuration}\n\t\t\t\t\t\tcommentCount={content[1].commentCount}\n\t\t\t\t\t\tstarRating={content[1].starRating}\n\t\t\t\t\t\tbranding={content[1].branding}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t\t<LI\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tshowTopMarginWhenStacked={true}\n\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\tlinkTo={content[2].url}\n\t\t\t\t\t\tformat={content[2].format}\n\t\t\t\t\t\theadlineText={content[2].headline}\n\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\tbyline={content[2].byline}\n\t\t\t\t\t\tshowByline={content[2].showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tcontent[2].format.design ===\n\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\tcontent[2].format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={content[2].webPublicationDate}\n\t\t\t\t\t\tkickerText={content[2].kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tcontent[2].format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={content[2].image}\n\t\t\t\t\t\tmediaType={content[2].mediaType}\n\t\t\t\t\t\tmediaDuration={content[2].mediaDuration}\n\t\t\t\t\t\tcommentCount={content[2].commentCount}\n\t\t\t\t\t\tstarRating={content[2].starRating}\n\t\t\t\t\t\tbranding={content[2].branding}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t\t<LI\n\t\t\t\t\tpadSides={true}\n\t\t\t\t\tshowDivider={true}\n\t\t\t\t\tshowTopMarginWhenStacked={true}\n\t\t\t\t\tpercentage=\"25%\"\n\t\t\t\t>\n\t\t\t\t\t<Card\n\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\tlinkTo={content[3].url}\n\t\t\t\t\t\tformat={content[3].format}\n\t\t\t\t\t\theadlineText={content[3].headline}\n\t\t\t\t\t\theadlineSize=\"medium\"\n\t\t\t\t\t\tbyline={content[3].byline}\n\t\t\t\t\t\tshowByline={content[3].showByline}\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\tcontent[3].format.design ===\n\t\t\t\t\t\t\t\tArticleDesign.Comment ||\n\t\t\t\t\t\t\tcontent[3].format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t\twebPublicationDate={content[3].webPublicationDate}\n\t\t\t\t\t\tkickerText={content[3].kickerText}\n\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\tcontent[3].format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\timageUrl={content[3].image}\n\t\t\t\t\t\tmediaType={content[3].mediaType}\n\t\t\t\t\t\tmediaDuration={content[3].mediaDuration}\n\t\t\t\t\t\tcommentCount={content[3].commentCount}\n\t\t\t\t\t\tstarRating={content[3].starRating}\n\t\t\t\t\t\tbranding={content[3].branding}\n\t\t\t\t\t/>\n\t\t\t\t</LI>\n\t\t\t</UL>\n\t\t\t<UL direction=\"row\" padBottom={true}>\n\t\t\t\t{secondRowTrails.map((trail, index) => (\n\t\t\t\t\t<LI\n\t\t\t\t\t\tpadSides={true}\n\t\t\t\t\t\tshowDivider={index > 0}\n\t\t\t\t\t\tshowTopMarginWhenStacked={index > 0}\n\t\t\t\t\t\tpercentage={secondRowPercentage}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\t\t\tshowAge={true}\n\t\t\t\t\t\t\tlinkTo={trail.url}\n\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\t\theadlineSize={\n\t\t\t\t\t\t\t\ttrail.format.theme === ArticleSpecial.Labs\n\t\t\t\t\t\t\t\t\t? 'medium'\n\t\t\t\t\t\t\t\t\t: 'small'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbyline={trail.byline}\n\t\t\t\t\t\t\tshowByline={trail.showByline}\n\t\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twebPublicationDate={trail.webPublicationDate}\n\t\t\t\t\t\t\tkickerText={trail.kickerText}\n\t\t\t\t\t\t\tshowPulsingDot={\n\t\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\t\tshowClock={false}\n\t\t\t\t\t\t\timageUrl={\n\t\t\t\t\t\t\t\ttrail.format.theme === ArticleSpecial.Labs\n\t\t\t\t\t\t\t\t\t? trail.image\n\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tmediaType={trail.mediaType}\n\t\t\t\t\t\t\tmediaDuration={trail.mediaDuration}\n\t\t\t\t\t\t\tcommentCount={trail.commentCount}\n\t\t\t\t\t\t\tstarRating={trail.starRating}\n\t\t\t\t\t\t\tbranding={trail.branding}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LI>\n\t\t\t\t))}\n\t\t\t</UL>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewed.mocks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedFooter.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":8,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[428,431],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[428,431],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":19,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":19,"endColumn":19},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":22,"column":73,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":22,"endColumn":75},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":23,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":23,"endColumn":25},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":58,"column":82,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":58,"endColumn":84},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":59,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":59,"endColumn":25},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":91,"column":83,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":91,"endColumn":85},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":92,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":92,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":112,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":112,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":153,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":153,"endColumn":25},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":193,"column":69,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":193,"endColumn":71},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":194,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":194,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { fireEvent, render } from '@testing-library/react';\nimport { decidePalette } from '../lib/decidePalette';\nimport { useApi as useApi_ } from '../lib/useApi';\nimport { responseWithOneTab, responseWithTwoTabs } from './MostViewed.mocks';\nimport { MostViewedFooterData } from './MostViewedFooterData.importable';\n\nconst useApi: { [key: string]: any } = useApi_;\n\njest.mock('../lib/useApi', () => ({\n\tuseApi: jest.fn(),\n}));\n\nconst VISIBLE = 'display: grid';\nconst HIDDEN = 'display: none';\n\ndescribe('MostViewedFooterData', () => {\n\tbeforeEach(() => {\n\t\tuseApi.mockReset();\n\t});\n\n\tit('should call the api and render the response as expected', async () => {\n\t\tuseApi.mockReturnValue({ data: responseWithTwoTabs });\n\n\t\tconst { getByText, getAllByText, getByTestId } = render(\n\t\t\t<MostViewedFooterData\n\t\t\t\tsectionName=\"Section Name\"\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t})}\n\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t/>,\n\t\t);\n\n\t\t// Calls api once only\n\t\texpect(useApi).toHaveBeenCalledTimes(1);\n\n\t\t// Renders all 20 items\n\t\texpect(getAllByText(/LINKTEXT/).length).toBe(20);\n\n\t\t// First tab defaults to visible\n\t\texpect(getByTestId(responseWithTwoTabs.tabs[0].heading)).toHaveStyle(\n\t\t\tVISIBLE,\n\t\t);\n\n\t\t// Prefixes live articles correctly\n\t\texpect(getAllByText(/Live/).length).toBe(3);\n\n\t\t// Renders appropriate number of age warnins\n\t\texpect(getAllByText(/This article is more than/).length).toBe(3);\n\n\t\t// Handles &nbsp char\n\t\texpect(getByText('Across The Guardian')).toBeInTheDocument();\n\t});\n\n\tit('should change the items shown when the associated tab is clicked', async () => {\n\t\tuseApi.mockReturnValue({ data: responseWithTwoTabs });\n\n\t\tconst { getByTestId, getByText } = render(\n\t\t\t<MostViewedFooterData\n\t\t\t\tsectionName=\"Section Name\"\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t/>,\n\t\t);\n\n\t\tconst firstHeading = responseWithTwoTabs.tabs[0].heading;\n\t\tconst secondHeading = responseWithTwoTabs.tabs[1].heading;\n\n\t\texpect(getByTestId(firstHeading)).toHaveStyle(VISIBLE);\n\t\texpect(getByTestId(secondHeading)).toHaveStyle(HIDDEN);\n\n\t\tfireEvent.click(getByText(secondHeading));\n\n\t\texpect(getByTestId(firstHeading)).toHaveStyle(HIDDEN);\n\t\texpect(getByTestId(secondHeading)).toHaveStyle(VISIBLE);\n\n\t\t// Hardcode this text here because the actual raw data contains $nbsp; which is removed during rendering\n\t\tfireEvent.click(getByText('Across The Guardian'));\n\n\t\texpect(getByTestId(firstHeading)).toHaveStyle(VISIBLE);\n\t\texpect(getByTestId(secondHeading)).toHaveStyle(HIDDEN);\n\t});\n\n\tit('should not show the tab menu when there is only one group of tabs', async () => {\n\t\tuseApi.mockReturnValue({ data: responseWithOneTab });\n\n\t\tconst { queryByText } = render(\n\t\t\t<MostViewedFooterData\n\t\t\t\tsectionName=\"Section Name\"\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t/>,\n\t\t);\n\n\t\texpect(\n\t\t\tqueryByText(responseWithOneTab.tabs[0].heading),\n\t\t).not.toBeInTheDocument();\n\t});\n\n\tit(\"should display the text 'Live' for live blogs\", () => {\n\t\tuseApi.mockReturnValue({\n\t\t\tdata: [\n\t\t\t\t{\n\t\t\t\t\theading: 'Section header',\n\t\t\t\t\ttrails: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turl: '',\n\t\t\t\t\t\t\theadline: 'Headline',\n\t\t\t\t\t\t\tshowByline: false,\n\t\t\t\t\t\t\tbyline: '',\n\t\t\t\t\t\t\timage: '',\n\t\t\t\t\t\t\tisLiveBlog: false, // No longer used\n\t\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t\ttheme: 'NewsPillar',\n\t\t\t\t\t\t\t\tdesign: 'LiveBlogDesign',\n\t\t\t\t\t\t\t\tdisplay: 'StandardDisplay',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpillar: 'news',\n\t\t\t\t\t\t\tdesignType: 'not-applicable', // Needed for the type but never used. Will eventually be removed upstream and then here.\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tconst { getByText } = render(\n\t\t\t<MostViewedFooterData\n\t\t\t\tsectionName=\"Section Name\"\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t/>,\n\t\t);\n\n\t\texpect(getByText('Live')).toBeInTheDocument();\n\t});\n\n\tit(\"should NOT display the text 'Live' when design is Article is false\", () => {\n\t\tuseApi.mockReturnValue({\n\t\t\tdata: [\n\t\t\t\t{\n\t\t\t\t\theading: 'Section header',\n\t\t\t\t\ttrails: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turl: '',\n\t\t\t\t\t\t\theadline: 'Headline',\n\t\t\t\t\t\t\tshowByline: false,\n\t\t\t\t\t\t\tbyline: '',\n\t\t\t\t\t\t\timage: '',\n\t\t\t\t\t\t\tisLiveBlog: true, // No longer used\n\t\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t\ttheme: 'NewsPillar',\n\t\t\t\t\t\t\t\tdesign: 'ArticleDesign',\n\t\t\t\t\t\t\t\tdisplay: 'StandardDisplay',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpillar: 'news',\n\t\t\t\t\t\t\tdesignType: 'not-applicable', // Needed for the type but never used. Will eventually be removed upstream and then here.\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tconst { queryByText } = render(\n\t\t\t<MostViewedFooterData\n\t\t\t\tsectionName=\"Section Name\"\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t/>,\n\t\t);\n\n\t\texpect(queryByText('Live')).not.toBeInTheDocument();\n\t});\n\n\tit('should render the Ophan data link names as expected', async () => {\n\t\tuseApi.mockReturnValue({ data: responseWithTwoTabs });\n\n\t\tconst { asFragment } = render(\n\t\t\t<MostViewedFooterData\n\t\t\t\tsectionName=\"Section Name\"\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t/>,\n\t\t);\n\n\t\t// Renders tab data link name\n\t\t// expect(\n\t\t//\tasFragment().querySelectorAll('[data-link-name=\"in Music\"]').length,\n\t\t// ).toBe(1); // Should add the data-link-name for Section Name tab */\n\n\t\t// Renders Trail data-link-names\n\t\texpect(\n\t\t\tasFragment().querySelectorAll('[data-link-name*=\"| text\"]').length,\n\t\t).toBe(20); // Total stories in Related Footer (*= selector contains) (both tabs)\n\n\t\texpect(\n\t\t\tasFragment().querySelectorAll('[data-link-name=\"1 | text\"]').length,\n\t\t).toBe(2); // 1 indexed so should start at 1, one for each tab\n\n\t\texpect(\n\t\t\tasFragment().querySelectorAll('[data-link-name=\"0 | text\"]').length,\n\t\t).toBe(0); // 1 indexed so should start at 1\n\n\t\t// most commented\n\t\texpect(\n\t\t\tasFragment().querySelectorAll(\n\t\t\t\t'[data-link-name=\"comment | group-0 | card-@1\"]',\n\t\t\t).length,\n\t\t).toBe(1);\n\n\t\t// most shared\n\t\texpect(\n\t\t\tasFragment().querySelectorAll(\n\t\t\t\t'[data-link-name=\"news | group-0 | card-@1\"]',\n\t\t\t).length,\n\t\t).toBe(1);\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedFooterData.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":51,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":55,"endColumn":13},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":62,"column":4,"nodeType":"Literal","messageId":"alwaysTruthy","endLine":62,"endColumn":21},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":64,"column":4,"nodeType":"Literal","messageId":"alwaysTruthy","endLine":64,"endColumn":21},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":68,"column":4,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":68,"endColumn":48,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1989,2033],"text":"runnableTest?.variantToRun.id"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { Breakpoint } from '@guardian/source-foundations';\nimport { border, from } from '@guardian/source-foundations';\nimport { joinUrl } from '../../lib/joinUrl';\nimport { abTestTest } from '../experiments/tests/ab-test-test';\nimport { decideTrail } from '../lib/decideTrail';\nimport { useAB } from '../lib/useAB';\nimport { useApi } from '../lib/useApi';\nimport { MostViewedFooterGrid } from './MostViewedFooterGrid';\nimport { MostViewedFooterSecondTierItem } from './MostViewedFooterSecondTierItem';\n\ninterface Props {\n\tsectionName?: string;\n\tpalette: Palette;\n\tajaxUrl: string;\n}\n\nconst stackBelow = (breakpoint: Breakpoint) => css`\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t${from[breakpoint]} {\n\t\tflex-direction: row;\n\t}\n`;\n\nconst secondTierStyles = css`\n\tborder-left: 1px solid ${border.secondary};\n\tborder-right: 1px solid ${border.secondary};\n\n\t${from.tablet} {\n\t\tpadding-top: 24px;\n\t}\n`;\n\nfunction buildSectionUrl(ajaxUrl: string, sectionName?: string) {\n\tconst sectionsWithoutPopular = ['info', 'global'];\n\tconst hasSection =\n\t\tsectionName && !sectionsWithoutPopular.includes(sectionName);\n\tconst endpoint = `/most-read${hasSection ? `/${sectionName}` : ''}.json`;\n\treturn joinUrl([ajaxUrl, `${endpoint}?dcr=true`]);\n}\n\nfunction transformTabs(tabs: CAPITrailTabType[]): TrailTabType[] {\n\treturn tabs.map((tab) => ({\n\t\t...tab,\n\t\ttrails: tab.trails.map((trail) => decideTrail(trail)),\n\t}));\n}\n\nexport const MostViewedFooterData = ({\n\tsectionName,\n\tpalette,\n\tajaxUrl,\n}: Props) => {\n\t// Example usage of AB Tests\n\t// Used in the Cypress tests as smoke test of the AB tests framework integration\n\tconst ABTestAPI = useAB();\n\n\tconst abTestCypressDataAttr =\n\t\t(ABTestAPI?.isUserInVariant('AbTestTest', 'control') &&\n\t\t\t'ab-test-control') ||\n\t\t(ABTestAPI?.isUserInVariant('AbTestTest', 'variant') &&\n\t\t\t'ab-test-variant') ||\n\t\t'ab-test-not-in-test';\n\tconst runnableTest = ABTestAPI?.runnableTest(abTestTest);\n\tconst variantFromRunnable =\n\t\t(runnableTest && runnableTest.variantToRun.id) || 'not-runnable';\n\n\tconst url = buildSectionUrl(ajaxUrl, sectionName);\n\tconst { data, error } = useApi<\n\t\tMostViewedFooterPayloadType | CAPITrailTabType[]\n\t>(url);\n\n\tif (error) {\n\t\twindow.guardian.modules.sentry.reportError(error, 'most-viewed-footer');\n\t\treturn null;\n\t}\n\n\tif (data) {\n\t\tconst tabs = 'tabs' in data ? data.tabs : data;\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\twidth: 100%;\n\t\t\t\t`}\n\t\t\t\tdata-cy=\"mostviewed-footer\"\n\t\t\t\tdata-cy-ab-user-in-variant={abTestCypressDataAttr}\n\t\t\t\tdata-cy-ab-runnable-test={variantFromRunnable}\n\t\t\t>\n\t\t\t\t<MostViewedFooterGrid\n\t\t\t\t\tdata={transformTabs(tabs)}\n\t\t\t\t\tsectionName={sectionName}\n\t\t\t\t\tpalette={palette}\n\t\t\t\t/>\n\t\t\t\t<div css={[stackBelow('tablet'), secondTierStyles]}>\n\t\t\t\t\t{'mostCommented' in data && (\n\t\t\t\t\t\t<MostViewedFooterSecondTierItem\n\t\t\t\t\t\t\ttrail={decideTrail(data.mostCommented)}\n\t\t\t\t\t\t\ttitle=\"Most commented\"\n\t\t\t\t\t\t\tshowRightBorder={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{'mostShared' in data && (\n\t\t\t\t\t\t<MostViewedFooterSecondTierItem\n\t\t\t\t\t\t\ttrail={decideTrail(data.mostShared)}\n\t\t\t\t\t\t\ttitle=\"Most shared\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedFooterGrid.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":115,"column":6,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":117,"endColumn":8},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":123,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":123,"endColumn":79},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":147,"column":14,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":147,"endColumn":37},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":151,"column":9,"nodeType":"JSXElement","messageId":"missingType","endLine":164,"endColumn":18},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":175,"column":11,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":175,"endColumn":30},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":180,"column":38,"nodeType":"Identifier","messageId":"invalidType","endLine":180,"endColumn":49},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":182,"column":8,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":182,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tborder,\n\tfrom,\n\theadline,\n\tneutral,\n\tuntil,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport { useState } from 'react';\nimport { MostViewedFooterItem } from './MostViewedFooterItem';\n\nconst thinGreySolid = `1px solid ${border.secondary}`;\n\nconst hideList = css`\n\tdisplay: none;\n`;\n\nconst tabsContainer = css`\n\tdisplay: flex;\n\tposition: relative;\n\tborder-left: ${thinGreySolid};\n\tborder-right: ${thinGreySolid};\n\tborder-bottom: ${thinGreySolid};\n\n\t${until.leftCol} {\n\t\tborder-top: ${thinGreySolid};\n\t\tborder-bottom: 0;\n\t}\n`;\n\nconst listTab = css`\n\tfont-weight: 700;\n\tline-height: 1.1;\n\tbackground-color: transparent;\n\ttext-transform: capitalize;\n\tpadding: 0 0 0;\n\tmargin-bottom: 16px;\n\twidth: 240px;\n\theight: 28px;\n`;\n\nconst firstTab = css`\n\tborder-right: ${thinGreySolid};\n`;\nconst selectedListTabStyles = (palette: Palette) => css`\n\t/* TODO: Using a pseudo selector here could be faster? */\n\tbox-shadow: inset 0px 4px 0px 0px ${palette.background.mostViewedTab};\n\ttransition: box-shadow 0.3s ease-in-out;\n`;\n\nconst unselectedStyles = css`\n\t&:hover {\n\t\tbox-shadow: inset 0px 4px 0px 0px ${neutral[86]};\n\t\ttransition: box-shadow 0.3s ease-in-out;\n\t}\n`;\n\nconst tabButton = css`\n\t${headline.xxxsmall()};\n\tmargin: 0;\n\tborder: 0;\n\tbackground: transparent;\n\tpadding-right: 6px;\n\tpadding-top: 6px;\n\ttext-align: left;\n\ttext-decoration: none;\n\tfont-weight: 600;\n\tmin-height: 36px;\n\tdisplay: block;\n\twidth: 100%;\n\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n`;\n\nconst gridContainer = css`\n\tdisplay: grid;\n\tgrid-auto-flow: column;\n\n\t/* One column view */\n\tgrid-template-columns: 1fr;\n\tgrid-template-rows: auto auto auto auto auto auto auto auto auto auto;\n\n\t/* Two column view */\n\t${from.tablet} {\n\t\tgrid-template-columns: 1fr 1fr;\n\t\tgrid-template-rows: auto auto auto auto auto;\n\t}\n\n\t/* We set left border on the grid container, and then right border on\n    the gridItems to prevent borders doubling up */\n\tborder-left: 1px solid ${border.secondary};\n`;\n\ntype Props = {\n\tdata: TrailTabType[];\n\tsectionName?: string;\n\tpalette: Palette;\n};\n\n// To avoid having to handle multiple ways of reducing the capitalisation styling\nconst TabHeading = ({ heading }: { heading: string }) => {\n\tswitch (heading.toLowerCase()) {\n\t\tcase 'most popular':\n\t\t\treturn <span>Most popular</span>;\n\t\tdefault:\n\t\t\treturn (\n\t\t\t\t<span\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\ttext-transform: capitalize;\n\t\t\t\t\t`}\n\t\t\t\t\t// \"Across The Guardian\" has a non-breaking space entity between \"The\" and \"Guardian - Eg. \"Across The&nbsp;Guardian\"\n\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t__html: heading,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t);\n\t}\n};\n\nexport const MostViewedFooterGrid = ({ data, sectionName, palette }: Props) => {\n\tconst [selectedTabIndex, setSelectedTabIndex] = useState<number>(0);\n\treturn (\n\t\t<div>\n\t\t\t{Array.isArray(data) && data.length > 1 && (\n\t\t\t\t<ul css={tabsContainer} role=\"tablist\">\n\t\t\t\t\t{data.map((tab: TrailTabType, i: number) => {\n\t\t\t\t\t\tconst isSelected = i === selectedTabIndex;\n\t\t\t\t\t\tconst isFirst = i === 0;\n\t\t\t\t\t\tconst selectedStyles = selectedListTabStyles(palette);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\tlistTab,\n\t\t\t\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t\t\t\t? selectedStyles\n\t\t\t\t\t\t\t\t\t\t: unselectedStyles,\n\t\t\t\t\t\t\t\t\tisFirst && firstTab,\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\trole=\"tab\"\n\t\t\t\t\t\t\t\taria-selected={isSelected}\n\t\t\t\t\t\t\t\taria-controls={`tabs-popular-${i}`}\n\t\t\t\t\t\t\t\tid={`tabs-popular-${i}-tab`}\n\t\t\t\t\t\t\t\tdata-cy={`tab-heading-${i}`}\n\t\t\t\t\t\t\t\tkey={`tabs-popular-${i}-tab`}\n\t\t\t\t\t\t\t\tdata-link-name={tab.heading}\n\t\t\t\t\t\t\t\tdata-chromatic=\"ignore\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tcss={tabButton}\n\t\t\t\t\t\t\t\t\tonClick={() => setSelectedTabIndex(i)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t\t\t${visuallyHidden};\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tMost viewed{' '}\n\t\t\t\t\t\t\t\t\t</span>\n\n\t\t\t\t\t\t\t\t\t<TabHeading heading={tab.heading} />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t\t{data.map((tab: TrailTabType, i: number) => (\n\t\t\t\t<ol\n\t\t\t\t\tcss={[gridContainer, i !== selectedTabIndex && hideList]}\n\t\t\t\t\tid={`tabs-popular-${i}`}\n\t\t\t\t\tdata-cy={`tab-body-${i}`}\n\t\t\t\t\tkey={`tabs-popular-${i}`}\n\t\t\t\t\trole=\"tabpanel\"\n\t\t\t\t\taria-labelledby={`tabs-popular-${i}-tab`}\n\t\t\t\t\tdata-link-name={tab.heading}\n\t\t\t\t\tdata-testid={tab.heading}\n\t\t\t\t\tdata-link-context={`most-read/${sectionName}`}\n\t\t\t\t>\n\t\t\t\t\t{(tab.trails || []).map((trail: TrailType, ii: number) => (\n\t\t\t\t\t\t<MostViewedFooterItem\n\t\t\t\t\t\t\tkey={trail.url}\n\t\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\t\tposition={ii + 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ol>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedFooterItem.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":74,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":74,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport {\n\tborder,\n\theadline,\n\tneutral,\n\ttext,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { AgeWarning } from './AgeWarning';\nimport { BigNumber } from './BigNumber/BigNumber';\nimport { LinkHeadline } from './LinkHeadline';\n\nconst gridItem = (position: number) => css`\n\tposition: relative;\n\n\t${until.leftCol} {\n\t\t/* Below leftCol always set top border */\n\t\tborder-top: 1px solid ${border.secondary};\n\t}\n\t/* Above leftCol, don't apply a top border on the 1st and 6th\n       items to prevent double borders */\n\tborder-top: ${position !== 1 &&\n\tposition !== 6 &&\n\t`1px solid ${border.secondary}`};\n\n\t/* The left border is set on the container */\n\tborder-right: 1px solid ${border.secondary};\n\tmin-height: 3.25rem;\n\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\n\t&:hover,\n\t:focus {\n\t\tbackground: ${neutral[97]};\n\t}\n`;\n\nconst bigNumber = css`\n\tposition: absolute;\n\ttop: 0.375rem;\n\tleft: 0.625rem;\n\tfill: ${text.primary};\n`;\n\nconst headlineHeader = css`\n\tpadding: 0.1875rem 0.625rem 1.125rem 4.6875rem;\n\tword-wrap: break-word;\n\toverflow: hidden;\n`;\n\nconst headlineLink = css`\n\ttext-decoration: none;\n\tcolor: ${text.anchorSecondary};\n\tfont-weight: 500;\n\t${headline.xxxsmall()};\n\n\tdisplay: block; /* To ensure focus outline works okay */\n`;\n\nconst ageWarningStyles = css`\n\tpadding-left: 4.6875rem;\n\tmargin-top: -16px;\n\tmargin-bottom: 16px;\n`;\n\ntype Props = {\n\ttrail: TrailType;\n\tposition: number;\n};\n\nexport const MostViewedFooterItem = ({ trail, position }: Props) => (\n\t<li css={gridItem(position)} data-link-name={`${position} | text`}>\n\t\t<a css={headlineLink} href={trail.url} data-link-name=\"article\">\n\t\t\t<span css={bigNumber}>\n\t\t\t\t<BigNumber index={position} />\n\t\t\t</span>\n\t\t\t<div css={headlineHeader}>\n\t\t\t\t{trail.format.design === ArticleDesign.LiveBlog ? (\n\t\t\t\t\t<LinkHeadline\n\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tkickerText=\"Live\"\n\t\t\t\t\t\tshowSlash={true}\n\t\t\t\t\t\tshowPulsingDot={true}\n\t\t\t\t\t\tshowQuotes={false}\n\t\t\t\t\t/>\n\t\t\t\t) : (\n\t\t\t\t\t<LinkHeadline\n\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tshowQuotes={\n\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.Comment ||\n\t\t\t\t\t\t\ttrail.format.design === ArticleDesign.Letter\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t{trail.ageWarning && (\n\t\t\t\t<div css={ageWarningStyles}>\n\t\t\t\t\t<AgeWarning age={trail.ageWarning} size=\"small\" />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</a>\n\t</li>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedFooterLayout.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":28,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":52,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":52,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":75,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":75,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport fetchMock from 'fetch-mock';\nimport React, { useEffect } from 'react';\nimport { doStorybookHydration } from '../browser/islands/doStorybookHydration';\nimport { ElementContainer } from './ElementContainer';\nimport {\n\tresponseWithMissingImage,\n\tresponseWithOneTab,\n\tresponseWithTwoTabs,\n} from './MostViewed.mocks';\nimport { MostViewedFooterLayout } from './MostViewedFooterLayout';\n\nconst Hydrated = ({ children }: { children: React.ReactNode }) => {\n\tuseEffect(() => {\n\t\tdoStorybookHydration();\n\t});\n\treturn <>{children}</>;\n};\n\nexport default {\n\tcomponent: MostViewedFooterLayout,\n\ttitle: 'Components/MostViewedFooter',\n\tparameters: {\n\t\tchromatic: { diffThreshold: 0.2 },\n\t},\n};\n\nexport const withTwoTabs = () => {\n\tfetchMock.restore().getOnce('*', {\n\t\tstatus: 200,\n\t\tbody: responseWithTwoTabs,\n\t});\n\n\treturn (\n\t\t<Hydrated>\n\t\t\t<ElementContainer>\n\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tsectionName=\"politics\"\n\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\t\t</Hydrated>\n\t);\n};\nwithTwoTabs.story = { name: 'with two tabs' };\n\nexport const withOneTabs = () => {\n\tfetchMock.restore().getOnce('*', {\n\t\tstatus: 200,\n\t\tbody: responseWithOneTab,\n\t});\n\n\treturn (\n\t\t<Hydrated>\n\t\t\t<ElementContainer>\n\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\t\t</Hydrated>\n\t);\n};\nwithOneTabs.story = { name: 'with one tab' };\n\nexport const withNoMostSharedImage = () => {\n\tfetchMock.restore().getOnce('*', {\n\t\tstatus: 200,\n\t\tbody: responseWithMissingImage,\n\t});\n\n\treturn (\n\t\t<Hydrated>\n\t\t\t<ElementContainer>\n\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tajaxUrl=\"https://api.nextgen.guardianapps.co.uk\"\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\t\t</Hydrated>\n\t);\n};\nwithNoMostSharedImage.story = { name: 'with a missing image on most shared' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedFooterLayout.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":69,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":73,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport type { Breakpoint } from '@guardian/source-foundations';\nimport { from, headline, text } from '@guardian/source-foundations';\nimport { decidePalette } from '../lib/decidePalette';\nimport { AdSlot, labelStyles } from './AdSlot';\nimport { Hide } from './Hide';\nimport { Island } from './Island';\nimport { LeftColumn } from './LeftColumn';\nimport { MostViewedFooterData } from './MostViewedFooterData.importable';\n\nconst stackBelow = (breakpoint: Breakpoint) => css`\n\tdisplay: flex;\n\tflex-direction: column;\n\n\t${from[breakpoint]} {\n\t\tflex-direction: row;\n\t}\n`;\n\nconst headingStyles = css`\n\t${headline.xsmall()};\n\tcolor: ${text.primary};\n\tfont-weight: 900;\n\tpadding-right: 5px;\n\tpadding-bottom: 14px;\n\tpadding-top: 3px;\n\n\t${from.leftCol} {\n\t\t${headline.xsmall()};\n\t\tfont-weight: 900;\n\t}\n\n\t${from.wide} {\n\t\tfont-weight: 900;\n\t}\n`;\n\nconst adSlotUnspecifiedWidth = css`\n\t.ad-slot {\n\t\tmargin: 12px auto;\n\t\tmin-width: 300px;\n\t\tmin-height: 274px;\n\t\ttext-align: center;\n\t}\n`;\n\nconst mostPopularAdStyle = css`\n\t.ad-slot--mostpop {\n\t\twidth: 300px;\n\t\tmargin: 12px auto;\n\t\tmin-width: 300px;\n\t\tmin-height: 274px;\n\t\ttext-align: center;\n\t\t${from.desktop} {\n\t\t\tmargin: 0;\n\t\t\twidth: auto;\n\t\t}\n\t}\n\t${labelStyles};\n`;\n\ninterface Props {\n\tsectionName?: string;\n\tformat: ArticleFormat;\n\tajaxUrl: string;\n}\n\nexport const MostViewedFooterLayout = ({\n\tsectionName,\n\tformat,\n\tajaxUrl,\n}: Props) => {\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<div\n\t\t\tdata-print-layout=\"hide\"\n\t\t\tclassName=\"content-footer\"\n\t\t\tcss={adSlotUnspecifiedWidth}\n\t\t>\n\t\t\t<div\n\t\t\t\tcss={[stackBelow('leftCol'), mostPopularAdStyle]}\n\t\t\t\tdata-link-name=\"most-popular\"\n\t\t\t\tdata-component=\"most-popular\"\n\t\t\t>\n\t\t\t\t<LeftColumn\n\t\t\t\t\tsize={\n\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\t\t\t\t\tformat.design === ArticleDesign.DeadBlog\n\t\t\t\t\t\t\t? 'wide'\n\t\t\t\t\t\t\t: 'compact'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<h2 css={headingStyles}>Most popular</h2>\n\t\t\t\t</LeftColumn>\n\t\t\t\t{/* We need to respect the side ad slot above desktop. The\n\t\t\t\t\tresult is that we need to do some mutation here to make\n\t\t\t\t\tsure components are stacked at the correct breakpoints.\n\t\t\t\t*/}\n\t\t\t\t<section css={stackBelow('desktop')}>\n\t\t\t\t\t<div css={stackBelow('leftCol')}>\n\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"leftCol\">\n\t\t\t\t\t\t\t<h2 css={headingStyles}>Most popular</h2>\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"visible\">\n\t\t\t\t\t\t\t<MostViewedFooterData\n\t\t\t\t\t\t\t\tsectionName={sectionName}\n\t\t\t\t\t\t\t\tpalette={palette}\n\t\t\t\t\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tmargin: 6px 0 0 10px;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<AdSlot position=\"mostpop\" display={format.display} />\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedFooterSecondTierItem.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":82,"column":47,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":86,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":98,"column":33,"nodeType":"Punctuator","messageId":"preferNullish","endLine":98,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1664,1666],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tborder,\n\tfrom,\n\theadline,\n\tneutral,\n\ttext,\n} from '@guardian/source-foundations';\nimport { AgeWarning } from './AgeWarning';\nimport { Avatar } from './Avatar';\nimport { Flex } from './Flex';\nimport { LinkHeadline } from './LinkHeadline';\n\nconst itemStyles = (showRightBorder?: boolean) => css`\n\tposition: relative;\n\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\tpadding-bottom: 12px;\n\n\tborder-top: 1px solid ${border.secondary};\n\t${from.tablet} {\n\t\tborder-right: ${showRightBorder && `1px solid ${border.secondary}`};\n\t}\n\n\tmin-height: 3.25rem;\n\n\tflex-basis: 100%;\n\n\t&:hover {\n\t\tcursor: pointer;\n\t}\n\n\t&:hover,\n\t:focus {\n\t\tbackground: ${neutral[97]};\n\t}\n`;\n\nconst titleStyles = css`\n\t${headline.xxxsmall({ fontWeight: 'bold' })}\n\tpadding-top: 4px;\n`;\n\nconst headlineStyles = css`\n\tword-wrap: break-word;\n\toverflow: hidden;\n`;\n\nconst headlineLink = css`\n\ttext-decoration: none;\n\tcolor: ${text.anchorSecondary};\n\tfont-weight: 500;\n\t${headline.xxxsmall()};\n\n\tdisplay: block; /* To ensure focus outline works okay */\n`;\n\nconst ageWarningStyles = css`\n\tmargin-top: 4px;\n`;\n\nconst avatarSizeStyles = css`\n\theight: 90px;\n\twidth: 90px;\n`;\n\nconst avatarContainerStyles = css`\n\tdisplay: flex;\n\tflex-direction: row-reverse;\n\n\tmargin-left: 5px;\n\tmargin-top: 24px;\n`;\n\ntype Props = {\n\ttrail: TrailType;\n\ttitle: string;\n\tshowRightBorder?: boolean; // Prevents double borders\n};\n\nexport const MostViewedFooterSecondTierItem = ({\n\ttrail,\n\ttitle,\n\tshowRightBorder,\n}: Props) => {\n\tconst {\n\t\turl,\n\t\tavatarUrl,\n\t\timage,\n\t\tformat,\n\t\tbyline,\n\t\tshowByline,\n\t\tageWarning,\n\t\theadline: headlineText,\n\t} = trail;\n\n\tconst avatarToShow = avatarUrl || image;\n\n\treturn (\n\t\t<div css={itemStyles(showRightBorder)}>\n\t\t\t<a\n\t\t\t\tcss={headlineLink}\n\t\t\t\thref={url}\n\t\t\t\tdata-link-name={trail.dataLinkName}\n\t\t\t>\n\t\t\t\t<Flex>\n\t\t\t\t\t<div css={headlineStyles}>\n\t\t\t\t\t\t<div css={titleStyles}>{title}</div>\n\t\t\t\t\t\t<LinkHeadline\n\t\t\t\t\t\t\theadlineText={headlineText}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tbyline={showByline ? byline : undefined}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t{ageWarning && (\n\t\t\t\t\t\t\t<div css={ageWarningStyles}>\n\t\t\t\t\t\t\t\t<AgeWarning age={ageWarning} size=\"small\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<>\n\t\t\t\t\t\t{avatarToShow && (\n\t\t\t\t\t\t\t<div css={avatarContainerStyles}>\n\t\t\t\t\t\t\t\t<div css={avatarSizeStyles}>\n\t\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\t\timageSrc={avatarToShow}\n\t\t\t\t\t\t\t\t\t\timageAlt=\"\"\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</>\n\t\t\t\t</Flex>\n\t\t\t</a>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedRight.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":58,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":58,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":98,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":98,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport fetchMock from 'fetch-mock';\nimport { ArticleContainer } from './ArticleContainer';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { LeftColumn } from './LeftColumn';\nimport { mockTab1 } from './MostViewed.mocks';\nimport { MostViewedRight } from './MostViewedRight';\nimport { RightColumn } from './RightColumn';\n\nexport default {\n\tcomponent: MostViewedRight,\n\ttitle: 'Components/MostViewedRight',\n\tparameters: {\n\t\tchromatic: { diffThreshold: 0.2 },\n\t},\n};\n\nexport const defaultStory = () => {\n\tfetchMock.restore().getOnce('*', {\n\t\tstatus: 200,\n\t\tbody: mockTab1,\n\t});\n\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn borderType=\"partial\">\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<></>\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MostViewedRight\n\t\t\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\t\t\tadBlockerDetected={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\ndefaultStory.story = { name: 'default' };\n\nexport const limitItemsStory = () => {\n\tfetchMock.restore().getOnce('*', {\n\t\tstatus: 200,\n\t\tbody: mockTab1,\n\t});\n\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Flex>\n\t\t\t\t<LeftColumn>\n\t\t\t\t\t<></>\n\t\t\t\t</LeftColumn>\n\t\t\t\t<ArticleContainer\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<></>\n\t\t\t\t</ArticleContainer>\n\t\t\t\t<RightColumn>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<MostViewedRight\n\t\t\t\t\t\t\tlimitItems={3}\n\t\t\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\t\t\tadBlockerDetected={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</RightColumn>\n\t\t\t</Flex>\n\t\t</ElementContainer>\n\t);\n};\nlimitItemsStory.story = { name: 'with a limit of 3 items' };\n\nexport const outsideContextStory = () => {\n\tfetchMock.restore().getOnce('*', {\n\t\tstatus: 200,\n\t\tbody: mockTab1,\n\t});\n\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<MostViewedRight isAdFreeUser={false} adBlockerDetected={false} />\n\t\t</ElementContainer>\n\t);\n};\noutsideContextStory.story = {\n\tname: 'inside responsive wrapper',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedRight.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[269,272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[269,272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":15,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":15,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":18,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":18,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":59,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":59,"endColumn":25},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async arrow function has no 'await' expression.","line":82,"column":72,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":82,"endColumn":74},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":83,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":83,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render } from '@testing-library/react';\nimport { useApi as useApi_ } from '../lib/useApi';\nimport { mockTab1 } from './MostViewed.mocks';\nimport { MostViewedRight } from './MostViewedRight';\n\nconst response = { data: mockTab1 };\nconst useApi: { [key: string]: any } = useApi_;\n\njest.mock('../lib/useApi', () => ({\n\tuseApi: jest.fn(),\n}));\n\ndescribe('MostViewedList', () => {\n\tbeforeEach(() => {\n\t\tuseApi.mockReset();\n\t});\n\tit('should call the api and render the response as expected', () => {\n\t\tuseApi.mockReturnValue(response);\n\n\t\tconst { asFragment, getAllByText } = render(\n\t\t\t<MostViewedRight isAdFreeUser={false} adBlockerDetected={false} />,\n\t\t);\n\n\t\t// Calls api once only\n\t\texpect(useApi).toHaveBeenCalledTimes(1);\n\n\t\t// Renders no more than 5 items\n\t\texpect(getAllByText(/LINKTEXT/).length).toBe(5);\n\n\t\t// Prefixes live articles correctly\n\t\texpect(getAllByText(/Live/).length).toBe(3);\n\n\t\t// Renders appropriate number of age warnins\n\t\texpect(getAllByText(/This article is more than/).length).toBe(2);\n\n\t\t// Renders data-component\n\t\texpect(\n\t\t\tasFragment().querySelectorAll('[data-component=\"geo-most-popular\"]')\n\t\t\t\t.length,\n\t\t).toBe(1);\n\n\t\t// Renders Trail data-link-names\n\t\texpect(\n\t\t\tasFragment().querySelectorAll('[data-link-name*=\"trail\"]').length,\n\t\t).toBe(5); // Total stories in Related (*= selector contains)\n\n\t\texpect(\n\t\t\tasFragment().querySelectorAll('[data-link-name=\"trail | 1\"]')\n\t\t\t\t.length,\n\t\t).toBe(1); // 1 indexed so should start at 1\n\n\t\texpect(\n\t\t\tasFragment().querySelectorAll('[data-link-name=\"trail | 0\"]')\n\t\t\t\t.length,\n\t\t).toBe(0); // 1 indexed so should start at 1\n\t});\n\n\tit('should implement a limit on the number of items', () => {\n\t\tuseApi.mockReturnValue(response);\n\n\t\tconst { getAllByText } = render(\n\t\t\t<MostViewedRight\n\t\t\t\tlimitItems={3}\n\t\t\t\tisAdFreeUser={false}\n\t\t\t\tadBlockerDetected={false}\n\t\t\t/>,\n\t\t);\n\n\t\t// Calls api once only\n\t\texpect(useApi).toHaveBeenCalledTimes(1);\n\n\t\t// Renders no more than 3 items\n\t\texpect(getAllByText(/LINKTEXT/).length).toBe(3);\n\n\t\t// Prefixes live articles correctly\n\t\texpect(getAllByText(/Live/).length).toBe(2);\n\n\t\t// Renders appropriate number of age warnins\n\t\texpect(getAllByText(/This article is more than/).length).toBe(1);\n\t});\n\n\tit('should show a byline when this property is set to true', async () => {\n\t\tuseApi.mockReturnValue(response);\n\n\t\tconst { getByText } = render(\n\t\t\t<MostViewedRight isAdFreeUser={false} adBlockerDetected={false} />,\n\t\t);\n\n\t\texpect(\n\t\t\tgetByText('Jennifer Rankin and Daniel Boffey'),\n\t\t).toBeInTheDocument();\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedRight.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":31,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline } from '@guardian/source-foundations';\nimport { StraightLines } from '@guardian/source-react-components-development-kitchen';\nimport { decideTrail } from '../lib/decideTrail';\nimport { useApi } from '../lib/useApi';\nimport { MostViewedRightItem } from './MostViewedRightItem';\n\nconst wrapperStyles = css`\n\tmargin-top: 24px;\n\tpadding-bottom: 48px;\n`;\n\n// We only stick most viewed when ads are not showing. We do this\n// to maximise right column space\nconst stickyStyles = css`\n\tposition: sticky;\n\ttop: 0;\n`;\n\nconst headingStyles = css`\n\t${headline.xxxsmall({ fontWeight: 'bold' })}\n\tmargin-bottom: 8px;\n`;\n\ninterface Props {\n\tlimitItems?: number;\n\tisAdFreeUser: boolean;\n\tadBlockerDetected: boolean;\n}\n\nexport const MostViewedRight = ({\n\tlimitItems = 5,\n\tisAdFreeUser,\n\tadBlockerDetected,\n}: Props) => {\n\tconst endpointUrl =\n\t\t'https://api.nextgen.guardianapps.co.uk/most-read-geo.json?dcr=true';\n\tconst { data, error } = useApi<CAPITrailTabType>(endpointUrl);\n\n\tif (error) {\n\t\twindow.guardian.modules.sentry.reportError(error, 'most-viewed-right');\n\t\treturn null;\n\t}\n\n\tif (data) {\n\t\tconst trails: TrailType[] = data.trails\n\t\t\t.slice(0, limitItems)\n\t\t\t.map(decideTrail);\n\t\tconst stickToTop = adBlockerDetected || isAdFreeUser;\n\t\t// Look I don't know why data-component is geo-most-popular either, but it is, ok? Ok.\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={[wrapperStyles, stickToTop && stickyStyles]}\n\t\t\t\tdata-component=\"geo-most-popular\"\n\t\t\t>\n\t\t\t\t<StraightLines\n\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t`}\n\t\t\t\t\tcount={4}\n\t\t\t\t/>\n\t\t\t\t<h3 css={headingStyles}>Most viewed</h3>\n\t\t\t\t<ul data-link-name=\"Right hand most popular geo GB\">\n\t\t\t\t\t{trails.map((trail, index) => (\n\t\t\t\t\t\t<MostViewedRightItem\n\t\t\t\t\t\t\tkey={trail.url}\n\t\t\t\t\t\t\ttrail={trail}\n\t\t\t\t\t\t\tmostViewedItemIndex={index}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedRightItem.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":66,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":66,"endColumn":78}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { border, headline, neutral, text } from '@guardian/source-foundations';\nimport { useHover } from '../lib/useHover';\nimport { AgeWarning } from './AgeWarning';\nimport { Avatar } from './Avatar';\nimport { LinkHeadline } from './LinkHeadline';\n\nconst listItemStyles = css`\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\t&::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tpadding-top: 4px;\n\tmargin-bottom: 12px;\n\tborder-top: 1px solid ${border.secondary};\n\n\t&:first-of-type {\n\t\tpadding-top: 0;\n\t\tborder-top: none;\n\t}\n`;\n\nconst linkTagStyles = css`\n\ttext-decoration: none;\n\tfont-weight: 500;\n\t${headline.xxxsmall()};\n\n\t&:link,\n\t&:active {\n\t\tcolor: ${text.anchorSecondary};\n\t}\n`;\n\nconst lineWrapperStyles = css`\n\tdisplay: flex;\n`;\n\nconst headlineWrapperStyles = css`\n\twidth: calc(100% - 82px);\n\tdisplay: flex;\n\tflex-direction: column;\n`;\n\nconst imageWrapperStyles = css`\n\twidth: 72px;\n\theight: 72px;\n\tmargin-top: 3px;\n\tmargin-right: 10px;\n`;\n\nconst marginTopStyles = css`\n\tmargin-top: 4px;\n`;\n\ntype Props = {\n\ttrail: TrailType;\n\tmostViewedItemIndex: number;\n};\n\nexport const MostViewedRightItem = ({ trail, mostViewedItemIndex }: Props) => {\n\tconst [hoverRef, isHovered] = useHover<HTMLAnchorElement>();\n\n\tconst linkProps = {\n\t\tto: trail.url,\n\t\tvisitedColour: neutral[46],\n\t\tpreventFocus: true,\n\t};\n\n\treturn (\n\t\t<li\n\t\t\tcss={listItemStyles}\n\t\t\tdata-link-name={`trail | ${mostViewedItemIndex + 1}`}\n\t\t>\n\t\t\t<a css={linkTagStyles} href={trail.url} ref={hoverRef}>\n\t\t\t\t<div css={lineWrapperStyles}>\n\t\t\t\t\t{trail.image && (\n\t\t\t\t\t\t<div css={imageWrapperStyles}>\n\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\timageSrc={trail.image}\n\t\t\t\t\t\t\t\timageAlt=\"\"\n\t\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div css={headlineWrapperStyles}>\n\t\t\t\t\t\t{trail.format.design === ArticleDesign.LiveBlog ? (\n\t\t\t\t\t\t\t<LinkHeadline\n\t\t\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tshowUnderline={isHovered}\n\t\t\t\t\t\t\t\tlink={linkProps}\n\t\t\t\t\t\t\t\tkickerText=\"Live\"\n\t\t\t\t\t\t\t\tshowSlash={false}\n\t\t\t\t\t\t\t\tbyline={\n\t\t\t\t\t\t\t\t\ttrail.showByline ? trail.byline : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<LinkHeadline\n\t\t\t\t\t\t\t\theadlineText={trail.headline}\n\t\t\t\t\t\t\t\tformat={trail.format}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tshowUnderline={isHovered}\n\t\t\t\t\t\t\t\tlink={linkProps}\n\t\t\t\t\t\t\t\tbyline={\n\t\t\t\t\t\t\t\t\ttrail.showByline ? trail.byline : undefined\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div css={marginTopStyles}>\n\t\t\t\t\t\t\t{trail.ageWarning && (\n\t\t\t\t\t\t\t\t<AgeWarning\n\t\t\t\t\t\t\t\t\tage={trail.ageWarning}\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</li>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MostViewedRightWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":18,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":79}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { RefObject } from 'react';\nimport { useEffect, useRef, useState } from 'react';\nimport { useAdBlockInUse } from '../lib/useAdBlockInUse';\nimport { MostViewedRight } from './MostViewedRight';\n\ntype Props = {\n\tlimitItems?: number;\n\tisAdFreeUser: boolean;\n};\n\n// Minimum height needed to render MostViewedRight is its own outer height.\nconst HEIGHT_REQUIRED = 482 + 24 + 24;\n\nconst MOSTVIEWED_STICKY_HEIGHT = 1059;\n\n// Wrapping MostViewedRight so we can determine whether or not there's enough vertical space in the container to render it.\nexport const MostViewedRightWrapper = ({ limitItems, isAdFreeUser }: Props) => {\n\tconst adBlockerDetected = useAdBlockInUse();\n\tconst bodyRef = useRef<HTMLDivElement>(null);\n\tconst [heightIsAvailable, setHeightIsAvailable] = useState<boolean>(false);\n\n\t// Styling the data island root so it stretches to cover the full height available in the container.\n\t// Requires us to subtract the height of its sibling in the container (StickyAd).\n\tconst stretchWrapperHeight = css`\n\t\theight: ${adBlockerDetected\n\t\t\t? `calc(100% - 300px)`\n\t\t\t: `calc(100% - ${MOSTVIEWED_STICKY_HEIGHT}px)`};\n\t`;\n\n\tuseEffect(() => {\n\t\tconst checkHeight = (ref: RefObject<HTMLDivElement>) => {\n\t\t\tif (!heightIsAvailable) {\n\t\t\t\t// Don't bother checking if height already available\n\t\t\t\tif (ref.current) {\n\t\t\t\t\tconst { offsetHeight } = ref.current;\n\t\t\t\t\tsetHeightIsAvailable(offsetHeight > HEIGHT_REQUIRED);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Check if we have the available height\n\t\tcheckHeight(bodyRef);\n\n\t\t// setTimeout here lets us put another check at the end of the\n\t\t// event queue in case any in body elements still need to render\n\t\t// which could push the page down giving us the space we need\n\t\tsetTimeout(() => {\n\t\t\tcheckHeight(bodyRef);\n\t\t});\n\t}, [heightIsAvailable]);\n\n\treturn (\n\t\t<div ref={bodyRef} css={stretchWrapperHeight}>\n\t\t\t{heightIsAvailable ? (\n\t\t\t\t<MostViewedRight\n\t\t\t\t\tlimitItems={limitItems}\n\t\t\t\t\tisAdFreeUser={isAdFreeUser}\n\t\t\t\t\tadBlockerDetected={!!adBlockerDetected}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MultiImageBlockComponent.mocks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MultiImageBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":16,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":34,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":44},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":53,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":53,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":71,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":90,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":90,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":108,"column":39,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":108,"endColumn":44},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":127,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":127,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":145,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":145,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { ContainerLayout } from './ContainerLayout';\nimport { MultiImageBlockComponent } from './MultiImageBlockComponent';\nimport { fourImages } from './MultiImageBlockComponent.mocks';\n\nconst oneImage = fourImages.slice(0, 1);\nconst twoImages = fourImages.slice(0, 2);\nconst threeImages = fourImages.slice(0, 3);\n\nexport default {\n\tcomponent: MultiImageBlockComponent,\n\ttitle: 'Components/MultiImageBlockComponent',\n\tchromatic: { diffThreshold: 0.7 },\n};\n\nexport const SingleImage = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<MultiImageBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\timages={oneImage}\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nSingleImage.story = {\n\tname: 'single image',\n};\n\nexport const SingleImageWithCaption = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<MultiImageBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\timages={oneImage}\n\t\t\t\tcaption=\"This is the caption for a single image\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nSingleImageWithCaption.story = {\n\tname: 'single image with caption',\n};\n\nexport const SideBySide = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<MultiImageBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\timages={twoImages}\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nSideBySide.story = {\n\tname: 'side by side',\n};\n\nexport const SideBySideWithCaption = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<MultiImageBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\timages={twoImages}\n\t\t\t\tcaption=\"This is the caption for side by side\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nSideBySideWithCaption.story = {\n\tname: 'side by side with caption',\n};\n\nexport const OneAboveTwo = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<MultiImageBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\timages={threeImages}\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nOneAboveTwo.story = {\n\tname: 'one above two',\n};\n\nexport const OneAboveTwoWithCaption = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<MultiImageBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\timages={threeImages}\n\t\t\t\tcaption=\"This is the caption for one above two\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nOneAboveTwoWithCaption.story = {\n\tname: 'one above two with caption',\n};\n\nexport const GridOfFour = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<MultiImageBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\timages={fourImages}\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nGridOfFour.story = {\n\tname: 'grid of four',\n};\n\nexport const GridOfFourWithCaption = () => {\n\treturn (\n\t\t<ContainerLayout>\n\t\t\t<MultiImageBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\timages={fourImages}\n\t\t\t\tcaption=\"This is the caption for grid of four\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nGridOfFourWithCaption.story = {\n\tname: 'grid of four with caption',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/MultiImageBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":91,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":95,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from, space, until } from '@guardian/source-foundations';\nimport { Caption } from './Caption';\nimport { GridItem } from './GridItem';\nimport { ImageComponent } from './ImageComponent';\n\ntype Props = {\n\timages: ImageBlockElement[];\n\tformat: ArticleFormat;\n\tcaption?: string;\n};\n\nconst ieFallback = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\t${until.leftCol} {\n\t\tmargin-left: 0px;\n\t}\n\t${from.leftCol} {\n\t\tmargin-left: 151px;\n\t}\n\t${from.wide} {\n\t\tmargin-left: 230px;\n\t}\n`;\n\nconst SideBySideGrid = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t${ieFallback}\n\t\t\t@supports (display: grid) {\n\t\t\t\tmargin-left: 0;\n\t\t\t\tmargin-right: ${space[3]}px;\n\t\t\t\tdisplay: grid;\n\t\t\t\tgrid-gap: ${space[3]}px;\n\t\t\t\tgrid-template-columns:\n\t\t\t\t\t50% /* Left column */\n\t\t\t\t\t50%; /* Right column */\n\t\t\t\tgrid-template-areas: 'first second';\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst OneAboveTwoGrid = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t${ieFallback}\n\t\t\t@supports (display: grid) {\n\t\t\t\tmargin-left: 0;\n\t\t\t\tmargin-right: ${space[3]}px;\n\t\t\t\tdisplay: grid;\n\t\t\t\tgrid-gap: ${space[3]}px;\n\t\t\t\tgrid-template-columns:\n\t\t\t\t\t50% /* Left column */\n\t\t\t\t\t50%; /* Right column */\n\t\t\t\tgrid-template-areas:\n\t\t\t\t\t'first first'\n\t\t\t\t\t'second third';\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst GridOfFour = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t${ieFallback}\n\t\t\t@supports (display: grid) {\n\t\t\t\tmargin-left: 0;\n\t\t\t\tmargin-right: ${space[3]}px;\n\t\t\t\tdisplay: grid;\n\t\t\t\tgrid-gap: ${space[3]}px;\n\t\t\t\tgrid-template-columns:\n\t\t\t\t\t50% /* Left column */\n\t\t\t\t\t50%; /* Right column */\n\t\t\t\tgrid-template-areas:\n\t\t\t\t\t'first second'\n\t\t\t\t\t'third forth';\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const MultiImageBlockComponent = ({\n\timages,\n\tformat,\n\tcaption,\n}: Props) => {\n\tconst imageCount = images.length;\n\n\tswitch (imageCount) {\n\t\tcase 1:\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t\t\tmargin-bottom: 12px;\n\t\t\t\t\t\timg {\n\t\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\telement={images[0]}\n\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\trole={images[0].role}\n\t\t\t\t\t/>\n\t\t\t\t\t{caption && (\n\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\t\t\tshouldLimitWidth={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t);\n\t\tcase 2:\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t\t\tmargin-bottom: 12px;\n\n\t\t\t\t\t\timg {\n\t\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<SideBySideGrid>\n\t\t\t\t\t\t<GridItem area=\"first\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[0]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[0].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"second\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[1]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[1].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</SideBySideGrid>\n\t\t\t\t\t{caption && (\n\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tshouldLimitWidth={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t);\n\t\tcase 3:\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t\t\tmargin-bottom: 12px;\n\n\t\t\t\t\t\timg {\n\t\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<OneAboveTwoGrid>\n\t\t\t\t\t\t<GridItem area=\"first\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[0]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[0].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"second\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[1]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[1].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"third\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[2]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[2].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</OneAboveTwoGrid>\n\t\t\t\t\t{caption && (\n\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tshouldLimitWidth={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t);\n\t\tcase 4:\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t\t\tmargin-bottom: 12px;\n\t\t\t\t\t\timg {\n\t\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<GridOfFour>\n\t\t\t\t\t\t<GridItem area=\"first\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[0]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[0].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"second\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[1]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[1].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"third\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[2]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[2].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"forth\">\n\t\t\t\t\t\t\t<ImageComponent\n\t\t\t\t\t\t\t\telement={images[3]}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\t\t\trole={images[3].role}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</GridOfFour>\n\t\t\t\t\t{caption && (\n\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tshouldLimitWidth={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/ExpandedMenu/CollapseColumnButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/ExpandedMenu/Column.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":186,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":192,"endColumn":6},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":208,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":222,"endColumn":7},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":260,"column":23,"nodeType":"Punctuator","messageId":"preferNullish","endLine":260,"endColumn":25,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[5846,5848],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbrand,\n\tbrandAlt,\n\tbrandText,\n\tfrom,\n\ttextSans,\n\tuntil,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport { CollapseColumnButton } from './CollapseColumnButton';\n\n// CSS\nexport const hideDesktop = css`\n\t${from.desktop} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst pillarDivider = css`\n\t${from.desktop} {\n\t\t:before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tright: 0;\n\t\t\ttop: 0;\n\t\t\tbottom: 0;\n\t\t\twidth: 1px;\n\t\t\tbackground-color: ${brand[600]};\n\t\t\tz-index: 1;\n\t\t}\n\t}\n`;\n\nconst columnLinkTitle = css`\n\t${textSans.medium({ lineHeight: 'tight' })};\n\tbackground-color: transparent;\n\ttext-decoration: none;\n\tborder: 0;\n\tbox-sizing: border-box;\n\tcolor: ${brandText.primary};\n\tcursor: pointer;\n\tdisplay: inline-block;\n\tfont-weight: 500;\n\toutline: none;\n\tpadding: 8px 34px 8px 50px;\n\tposition: relative;\n\ttext-align: left;\n\twidth: 100%;\n\n\t${from.tablet} {\n\t\tpadding-left: 60px;\n\t}\n\n\t${from.desktop} {\n\t\tfont-size: 16px;\n\t\tpadding: 6px 0;\n\t}\n\n\t:hover,\n\t:focus {\n\t\tcolor: ${brandAlt[400]};\n\t\ttext-decoration: underline;\n\t}\n\n\t> * {\n\t\tpointer-events: none;\n\t}\n`;\n\nconst mainMenuLinkStyle = css`\n\tbox-sizing: border-box;\n\toverflow: hidden;\n\tposition: relative;\n\twidth: 100%;\n\t${from.desktop} {\n\t\tdisplay: list-item;\n\t}\n`;\n\nconst columnLinks = css`\n\t${textSans.medium()};\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tmargin: 0;\n\tpadding: 0 0 12px;\n\tposition: relative;\n\t${from.desktop} {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex-wrap: nowrap;\n\t\torder: 1;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tpadding: 0 9px;\n\t}\n`;\n\nconst firstColumnLinks = css`\n\t${from.desktop} {\n\t\tpadding-left: 0;\n\t}\n`;\n\nconst pillarColumnLinks = css`\n\t${until.tablet} {\n\t\tbackground: ${brand[300]};\n\t}\n`;\n\nconst hideStyles = (columnInputId: string) => css`\n\t${until.desktop} {\n\t\t/* stylelint-disable-next-line selector-type-no-unknown */\n\t\t${`#${columnInputId}`}:not(:checked) ~ & {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n`;\n\nconst columnStyle = css`\n\t${textSans.medium()};\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\t&::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tmargin: 0;\n\tpadding-bottom: 10px;\n\tposition: relative;\n\n\t:after {\n\t\tbackground-color: ${brand[600]};\n\t\ttop: 0;\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\theight: 1px;\n\t\tleft: 50px;\n\t\tposition: absolute;\n\t\tright: 0;\n\t}\n\n\t/* Remove the border from the top item on mobile */\n\t:first-of-type:after {\n\t\tcontent: none;\n\t}\n\n\t${from.desktop} {\n\t\twidth: 134px;\n\t\tfloat: left;\n\t\tposition: relative;\n\n\t\t:after {\n\t\t\theight: 100%;\n\t\t\tleft: 0;\n\t\t\twidth: 1px;\n\t\t}\n\n\t\t:first-of-type {\n\t\t\twidth: 123px;\n\t\t}\n\t}\n\t${from.leftCol} {\n\t\twidth: 160px;\n\n\t\t:first-of-type {\n\t\t\twidth: 150px;\n\t\t}\n\t}\n`;\n\nexport const Column = ({\n\tcolumn,\n\tindex,\n}: {\n\tcolumn: PillarType;\n\tindex: number;\n}) => {\n\t// As the elements are dynamic we need to specify the IDs here\n\tconst columnInputId = `${column.title}-checkbox-input`;\n\tconst collapseColumnInputId = `${column.title}-button`;\n\n\treturn (\n\t\t<li css={[columnStyle, pillarDivider]} role=\"none\">\n\t\t\t{/*\n                IMPORTANT NOTE: Supporting NoJS and accessibility is hard.\n\n                We therefore use JS to make the Nav elements more accessible. We add a\n                keydown `addEventListener` to toggle the column drop down.\n                This is not a perfect solution as not all screen readers support JS\n                https://webaim.org/projects/screenreadersurvey8/#javascript\n            */}\n\t\t\t<script\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: `document.addEventListener('DOMContentLoaded', function(){\n                        var columnInput = document.getElementById('${collapseColumnInputId}');\n\n\t\t\t\t\t\tif (!columnInput) return; // Sticky nav replaces the nav so element no longer exists for users in test.\n\n\t\t\t\t\t\tcolumnInput.addEventListener('keydown', function(e){\n                            // keyCode: 13 => Enter key | keyCode: 32 => Space key\n                            if (e.keyCode === 13 || e.keyCode === 32) {\n                                e.preventDefault()\n                                document.getElementById('${columnInputId}').click();\n                            }\n                        })\n                    })`,\n\t\t\t\t}}\n\t\t\t/>\n\n\t\t\t{/*\n                IMPORTANT NOTE:\n                It is important to have the input as the 1st sibling for NoJS to work\n                as we use ~ to apply certain styles on checkbox checked and ~ can only\n                apply to styles with elements that are preceded\n            */}\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tcss={css`\n\t\t\t\t\t${visuallyHidden};\n\t\t\t\t`}\n\t\t\t\tid={columnInputId}\n\t\t\t\ttabIndex={-1}\n\t\t\t\tkey=\"OpenExpandedMenuCheckbox\"\n\t\t\t\taria-hidden=\"true\"\n\t\t\t/>\n\t\t\t<CollapseColumnButton\n\t\t\t\tcollapseColumnInputId={collapseColumnInputId}\n\t\t\t\ttitle={column.title}\n\t\t\t\tcolumnInputId={columnInputId}\n\t\t\t\tariaControls={`${column.title.toLowerCase()}Links`}\n\t\t\t/>\n\n\t\t\t{/* ColumnLinks */}\n\t\t\t<ul\n\t\t\t\tcss={[\n\t\t\t\t\tcolumnLinks,\n\t\t\t\t\tindex === 0 && firstColumnLinks,\n\t\t\t\t\t!!column.pillar && pillarColumnLinks,\n\t\t\t\t\tcolumnInputId && hideStyles(columnInputId),\n\t\t\t\t]}\n\t\t\t\trole=\"menu\"\n\t\t\t\tid={`${column.title.toLowerCase()}Links`}\n\t\t\t\tdata-cy={`${column.title.toLowerCase()}Links`}\n\t\t\t>\n\t\t\t\t{(column.children || []).map((link) => (\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey={link.title.toLowerCase()}\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tmainMenuLinkStyle,\n\t\t\t\t\t\t\t!!link.mobileOnly && hideDesktop,\n\t\t\t\t\t\t]}\n\t\t\t\t\t\trole=\"none\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"selectableMenuItem\"\n\t\t\t\t\t\t\tcss={columnLinkTitle}\n\t\t\t\t\t\t\thref={link.url}\n\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\tdata-link-name={`nav2 : secondary : ${link.longTitle}`}\n\t\t\t\t\t\t\tdata-cy={`column-collapse-sublink-${link.title}`}\n\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{link.longTitle}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</li>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/ExpandedMenu/Columns.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/ExpandedMenu/ExpandedMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/ExpandedMenu/MoreColumn.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":215,"column":24,"nodeType":"Punctuator","messageId":"preferNullish","endLine":215,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3955,3957],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":232,"column":8,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":232,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbrand,\n\tbrandAlt,\n\tbrandText,\n\tfrom,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport FacebookIcon from '../../../../static/icons/facebook.svg';\nimport TwitterIconPadded from '../../../../static/icons/twitter-padded.svg';\n\nconst pillarHeight = 42;\n\nexport const hideDesktop = css`\n\t${from.desktop} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst pillarColumnLinks = css`\n\t${until.tablet} {\n\t\tbackground: ${brand[300]};\n\t}\n`;\n\nconst columnStyle = css`\n\t${textSans.medium()};\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\t&::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tmargin: 0;\n\tpadding-bottom: 10px;\n\tposition: relative;\n\n\t:after {\n\t\tbackground-color: ${brand[600]};\n\t\ttop: 0;\n\t\tcontent: '';\n\t\tdisplay: block;\n\t\theight: 1px;\n\t\tleft: 50px;\n\t\tposition: absolute;\n\t\tright: 0;\n\t}\n\n\t/* Remove the border from the top item on mobile */\n\t:first-of-type:after {\n\t\tcontent: none;\n\t}\n\n\t${from.desktop} {\n\t\twidth: 134px;\n\t\tfloat: left;\n\t\tposition: relative;\n\n\t\t:after {\n\t\t\tcontent: none;\n\t\t}\n\n\t\t:first-of-type {\n\t\t\twidth: 123px;\n\t\t}\n\t}\n\t${from.leftCol} {\n\t\twidth: 160px;\n\n\t\t:first-of-type {\n\t\t\twidth: 150px;\n\t\t}\n\t}\n`;\n\nconst pillarDivider = css`\n\t${from.desktop} {\n\t\t:before {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tright: 0;\n\t\t\ttop: 0;\n\t\t\tbottom: 0;\n\t\t\twidth: 1px;\n\t\t\theight: auto;\n\t\t\tbackground-color: ${brand[600]};\n\t\t\tz-index: 1;\n\t\t}\n\t}\n`;\n\nconst pillarDividerExtended = css`\n\t${from.desktop} {\n\t\t:before {\n\t\t\ttop: -${pillarHeight}px;\n\t\t}\n\n\t\t:after {\n\t\t\tcontent: '';\n\t\t\tdisplay: block;\n\t\t\tposition: absolute;\n\t\t\tright: 0;\n\t\t\ttop: 0;\n\t\t\tbottom: 0;\n\t\t\tleft: 0;\n\t\t\twidth: 1px;\n\t\t\theight: auto;\n\t\t\tbackground-color: ${brand[600]};\n\t\t\tz-index: 1;\n\t\t}\n\t}\n`;\n\nconst columnLinks = css`\n\t${textSans.medium()};\n\tbox-sizing: border-box;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tmargin: 0;\n\tpadding: 0 0 12px;\n\tposition: relative;\n\t${from.desktop} {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex-wrap: nowrap;\n\t\torder: 1;\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tpadding: 0 9px;\n\t}\n`;\n\nconst columnLinkTitle = css`\n\t${textSans.medium({ lineHeight: 'tight' })};\n\tbackground-color: transparent;\n\ttext-decoration: none;\n\tborder: 0;\n\tbox-sizing: border-box;\n\tcolor: ${brandText.primary};\n\tcursor: pointer;\n\tdisplay: inline-block;\n\tfont-weight: 500;\n\toutline: none;\n\tpadding: 8px 34px 8px 50px;\n\tposition: relative;\n\ttext-align: left;\n\twidth: 100%;\n\n\t${from.tablet} {\n\t\tpadding-left: 60px;\n\t}\n\n\t${from.desktop} {\n\t\tfont-size: 16px;\n\t\tpadding: 6px 0;\n\t}\n\n\t:hover,\n\t:focus {\n\t\tcolor: ${brandAlt[400]};\n\t\ttext-decoration: underline;\n\t}\n\n\t> * {\n\t\tpointer-events: none;\n\t}\n`;\n\nconst mainMenuLinkStyle = css`\n\tbox-sizing: border-box;\n\toverflow: hidden;\n\tposition: relative;\n\twidth: 100%;\n\t${from.desktop} {\n\t\tdisplay: list-item;\n\t}\n`;\n\nconst shareIconStyles = css`\n\tfill: currentColor;\n\theight: 28px;\n\tleft: 18px;\n\tposition: absolute;\n\ttop: 5px;\n\twidth: 28px;\n`;\n\nexport const MoreColumn: React.FC<{\n\tcolumn: LinkType;\n\tbrandExtensions: LinkType[];\n}> = ({ column, brandExtensions }) => {\n\tconst subNavId = `${column.title.toLowerCase()}Links`;\n\t// Add the brand extensions to 'more' on mobile.\n\tconst moreColumn = {\n\t\t...column,\n\t\tchildren: [\n\t\t\t...brandExtensions.map((brandExtension) => ({\n\t\t\t\t...brandExtension,\n\t\t\t\tmobileOnly: true,\n\t\t\t})),\n\t\t\t...(column.children || []),\n\t\t],\n\t};\n\treturn (\n\t\t<>\n\t\t\t<li\n\t\t\t\tcss={[columnStyle, pillarDivider, pillarDividerExtended]}\n\t\t\t\trole=\"none\"\n\t\t\t>\n\t\t\t\t<ul\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tcolumnLinks,\n\t\t\t\t\t\t!!moreColumn.pillar && pillarColumnLinks,\n\t\t\t\t\t]}\n\t\t\t\t\trole=\"menu\"\n\t\t\t\t\tid={subNavId}\n\t\t\t\t>\n\t\t\t\t\t{(moreColumn.children || []).map((link) => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={link.title.toLowerCase()}\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\tmainMenuLinkStyle,\n\t\t\t\t\t\t\t\t!!link.mobileOnly && hideDesktop,\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\trole=\"none\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\tclassName=\"selectableMenuItem\"\n\t\t\t\t\t\t\t\tcss={columnLinkTitle}\n\t\t\t\t\t\t\t\thref={link.url}\n\t\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\t\tdata-link-name={`nav2 : secondary : ${link.longTitle}`}\n\t\t\t\t\t\t\t\tdata-cy={`column-collapse-sublink-${link.title}`}\n\t\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{link.longTitle}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t\t<li css={columnStyle} role=\"none\">\n\t\t\t\t<ul\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tcolumnLinks,\n\t\t\t\t\t\t!!moreColumn.pillar && pillarColumnLinks,\n\t\t\t\t\t]}\n\t\t\t\t\trole=\"menu\"\n\t\t\t\t>\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey=\"facebook\"\n\t\t\t\t\t\tcss={[mainMenuLinkStyle, hideDesktop]}\n\t\t\t\t\t\trole=\"none\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"selectableMenuItem\"\n\t\t\t\t\t\t\tcss={columnLinkTitle}\n\t\t\t\t\t\t\tdata-link-name=\"nav2 : secondary : facebook\"\n\t\t\t\t\t\t\thref=\"https://www.facebook.com/theguardian\"\n\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FacebookIcon css={shareIconStyles} />\n\t\t\t\t\t\t\tFacebook\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey=\"twitter\"\n\t\t\t\t\t\tcss={[mainMenuLinkStyle, hideDesktop]}\n\t\t\t\t\t\trole=\"none\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tclassName=\"selectableMenuItem\"\n\t\t\t\t\t\t\tcss={columnLinkTitle}\n\t\t\t\t\t\t\tdata-link-name=\"nav2 : secondary : twitter\"\n\t\t\t\t\t\t\thref=\"https://twitter.com/guardian\"\n\t\t\t\t\t\t\trole=\"menuitem\"\n\t\t\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TwitterIconPadded css={shareIconStyles} />\n\t\t\t\t\t\t\tTwitter\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/ExpandedMenu/ReaderRevenueLinks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/ExpandedMenu/ShowMoreMenu.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":71,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":71,"endColumn":74}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDisplay } from '@guardian/libs';\nimport {\n\tbrandAlt,\n\tbrandText,\n\tfrom,\n\theadline,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport { SvgChevronDownSingle } from '@guardian/source-react-components';\nimport { navInputCheckboxId, showMoreButtonId } from '../config';\n\nconst screenReadable = css`\n\t${visuallyHidden};\n`;\n\nconst showMoreTextStyles = css`\n\tdisplay: block;\n\theight: 100%;\n\n\t/* stylelint-disable selector-type-no-unknown */\n\t${`#${navInputCheckboxId}`}:checked ~ div label & svg {\n\t\ttransform: translateY(-2px) rotate(-180deg);\n\t}\n\n\t${`#${navInputCheckboxId}`}:checked ~ div label:hover & svg,\n\t${`#${navInputCheckboxId}`}:checked ~ div label:focus & svg {\n\t\ttransform: translateY(-4px) rotate(-180deg);\n\t}\n\t/* stylelint-enable selector-type-no-unknown */\n\n\tsvg {\n\t\tposition: absolute;\n\t\tright: 2px;\n\t\ttop: 14px;\n\t\tfill: currentColor;\n\t\theight: 16px;\n\t\twidth: 16px;\n\t\ttransition: transform 250ms ease-out;\n\t}\n`;\n\nconst openExpandedMenuStyles = (display: ArticleDisplay) => css`\n\t${headline.xsmall()};\n\tfont-weight: 300;\n\tcolor: ${brandText.primary};\n\tcursor: pointer;\n\tdisplay: none;\n\tposition: relative;\n\toverflow: hidden;\n\tborder: 0;\n\tbackground-color: transparent;\n\theight: 48px;\n\tpadding-left: 9px;\n\tpadding-right: 20px;\n\t${from.desktop} {\n\t\tdisplay: block;\n\t\tpadding-top: ${display === ArticleDisplay.Immersive ? '9px' : '5px'};\n\t\theight: 42px;\n\t}\n\n\t:hover,\n\t:focus {\n\t\tcolor: ${brandAlt[400]};\n\t\tsvg {\n\t\t\ttransform: translateY(2px);\n\t\t}\n\t}\n`;\n\nexport const ShowMoreMenu = ({ display }: { display: ArticleDisplay }) => (\n\t<>\n\t\t<label\n\t\t\tid={showMoreButtonId}\n\t\t\tcss={openExpandedMenuStyles(display)}\n\t\t\taria-label=\"Toggle main menu\"\n\t\t\tkey=\"OpenExpandedMenuButton\"\n\t\t\thtmlFor={navInputCheckboxId}\n\t\t\tdata-link-name=\"nav2 : veggie-burger: show\"\n\t\t\ttabIndex={0}\n\t\t\trole=\"button\"\n\t\t\tdata-cy=\"nav-show-more-button\"\n\t\t>\n\t\t\t<span css={screenReadable}>Show</span>\n\t\t\t<span css={showMoreTextStyles}>\n\t\t\t\tMore\n\t\t\t\t<SvgChevronDownSingle />\n\t\t\t</span>\n\t\t</label>\n\t</>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/ExpandedMenu/VeggieBurgerMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/Nav.mock.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/Nav.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":36,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":36,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":60,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":60,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { brandBackground, brandBorder } from '@guardian/source-foundations';\nimport { ElementContainer } from '../ElementContainer';\nimport { Nav } from './Nav';\nimport { nav } from './Nav.mock';\n\nexport default {\n\tcomponent: Nav,\n\ttitle: 'Components/Nav',\n};\n\nexport const StandardStory = () => {\n\treturn (\n\t\t<ElementContainer\n\t\t\tshowSideBorders={true}\n\t\t\tborderColour={brandBorder.primary}\n\t\t\tshowTopBorder={false}\n\t\t\tpadded={false}\n\t\t\tbackgroundColour={brandBackground.primary}\n\t\t>\n\t\t\t<Nav\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\tnav={nav}\n\t\t\t\tsubscribeUrl=\"\"\n\t\t\t\tedition=\"UK\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nStandardStory.story = { name: 'News Highlighted' };\n\nexport const OpinionStory = () => {\n\treturn (\n\t\t<ElementContainer\n\t\t\tshowSideBorders={true}\n\t\t\tborderColour={brandBorder.primary}\n\t\t\tshowTopBorder={false}\n\t\t\tpadded={false}\n\t\t\tbackgroundColour={brandBackground.primary}\n\t\t>\n\t\t\t<Nav\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\tnav={nav}\n\t\t\t\tsubscribeUrl=\"\"\n\t\t\t\tedition=\"UK\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nOpinionStory.story = { name: 'Opinion Highlighted' };\n\nexport const ImmersiveStory = () => {\n\treturn (\n\t\t<ElementContainer\n\t\t\tshowSideBorders={false}\n\t\t\tborderColour={brandBorder.primary}\n\t\t\tshowTopBorder={false}\n\t\t\tpadded={false}\n\t\t\tbackgroundColour={brandBackground.primary}\n\t\t>\n\t\t\t<Nav\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\tnav={nav}\n\t\t\t\tsubscribeUrl=\"\"\n\t\t\t\tedition=\"UK\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nImmersiveStory.story = { name: 'Immersive' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/Nav.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/Nav.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":65,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":65,"endColumn":70},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":85,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":159,"endColumn":7}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css, ThemeProvider } from '@emotion/react';\nimport { ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport { space, until, visuallyHidden } from '@guardian/source-foundations';\nimport {\n\tbuttonThemeReaderRevenue,\n\tLinkButton,\n\tSvgArrowRightStraight,\n} from '@guardian/source-react-components';\nimport { clearFix } from '../../../lib/mixins';\nimport { GuardianRoundel } from '../GuardianRoundel';\nimport { Hide } from '../Hide';\nimport { Pillars } from '../Pillars';\nimport { navInputCheckboxId, showMoreButtonId, veggieBurgerId } from './config';\nimport { ExpandedMenu } from './ExpandedMenu/ExpandedMenu';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tnav: NavType;\n\tsubscribeUrl: string;\n\tedition: Edition;\n};\n\nconst clearFixStyle = css`\n\t${clearFix};\n`;\n\nconst rowStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n`;\n\nconst minHeight = css`\n\tmin-height: 48px;\n`;\n\nconst PositionRoundel = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin-top: 3px;\n\t\t\tz-index: 2;\n\n\t\t\t${until.desktop} {\n\t\t\t\tmargin-right: 51px;\n\t\t\t}\n\n\t\t\tmargin-right: 24px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst PositionButton = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin-top: ${space[1]}px;\n\t\t\tmargin-left: ${space[2]}px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const Nav = ({ format, nav, subscribeUrl, edition }: Props) => {\n\tconst displayRoundel =\n\t\tformat.display === ArticleDisplay.Immersive ||\n\t\tformat.theme === ArticleSpecial.Labs;\n\n\treturn (\n\t\t<div css={rowStyles}>\n\t\t\t{/*\n                IMPORTANT NOTE: Supporting NoJS and accessibility is hard.\n\n                We therefore use JS to make the Nav elements more accessible. We add a\n                keydown `addEventListener` to both the veggie burger button and the show\n                more menu buttons. We also listen to escape key presses to close the Nav menu.\n                We also toggle the tabindex of clickable items to make sure that even when we\n                are displaying the menu on mobile and tablet, that it doesnt get highlighted\n                when tabbing though the page.\n                This is not a perfect solution as not all screen readers support JS\n                https://webaim.org/projects/screenreadersurvey8/#javascript\n            */}\n\t\t\t<script\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: `document.addEventListener('DOMContentLoaded', function(){\n                        // Used to toggle data-link-name on label buttons\n                        var navInputCheckbox = document.getElementById('${navInputCheckboxId}')\n                        var showMoreButton = document.getElementById('${showMoreButtonId}')\n                        var veggieBurger = document.getElementById('${veggieBurgerId}')\n                        var expandedMenuClickableTags = document.querySelectorAll('.selectableMenuItem')\n                        var expandedMenu = document.getElementById('expanded-menu-root')\n\n                        // We assume News is the 1st column\n                        var firstColLabel = document.getElementById('News-button')\n                        var firstColLink = document.querySelectorAll('#newsLinks > li:first-of-type > a')[0]\n\n                        var focusOnFirstNavElement = function(){\n                          // need to focus on first element in list, firstColLabel is not viewable on desktop\n                          if(window.getComputedStyle(firstColLabel).display === 'none'){\n                            firstColLink.focus()\n                          } else {\n                            firstColLabel.focus()\n                          }\n                        }\n\n\t\t\t\t\t\tif (!navInputCheckbox) return; // Sticky nav replaces the nav so element no longer exists for users in test.\n\n                        navInputCheckbox.addEventListener('click',function(){\n                          if(!navInputCheckbox.checked) {\n                            showMoreButton.setAttribute('data-link-name','nav2 : veggie-burger: show')\n                            veggieBurger.setAttribute('data-link-name','nav2 : veggie-burger: show')\n                            expandedMenuClickableTags.forEach(function($selectableElement){\n                                $selectableElement.setAttribute('tabindex','-1')\n                            })\n                          } else {\n                            showMoreButton.setAttribute('data-link-name','nav2 : veggie-burger: hide')\n                            veggieBurger.setAttribute('data-link-name','nav2 : veggie-burger: hide')\n                            expandedMenuClickableTags.forEach(function($selectableElement){\n                                $selectableElement.setAttribute('tabindex','0')\n                            })\n                            focusOnFirstNavElement()\n                          }\n                        })\n                        var toggleMainMenu = function(e){\n                          navInputCheckbox.click()\n                        }\n                        // Close hide menu on press enter\n                        var keydownToggleMainMenu = function(e){\n                          // keyCode: 13 => Enter key | keyCode: 32 => Space key\n                          if (e.keyCode === 13 || e.keyCode === 32) {\n                            e.preventDefault()\n                            toggleMainMenu()\n                          }\n                        }\n                        showMoreButton.addEventListener('keydown', keydownToggleMainMenu)\n                        veggieBurger.addEventListener('keydown', keydownToggleMainMenu)\n                        // Accessibility to hide Nav when pressing escape key\n                        document.addEventListener('keydown', function(e){\n                          // keyCode: 27 => esc\n                          if (e.keyCode === 27) {\n                            if(navInputCheckbox.checked) {\n                              toggleMainMenu()\n                              if(window.getComputedStyle(veggieBurger).display === 'none'){\n                                showMoreButton.focus()\n                              }else{\n                                veggieBurger.focus()\n                              }\n                            }\n                          }\n                        })\n                        // onBlur close dialog\n                        document.addEventListener('mousedown', function(e){\n                          if(navInputCheckbox.checked && !expandedMenu.contains(e.target)){\n                            toggleMainMenu()\n                          }\n                        });\n                      })`,\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tcss={[\n\t\t\t\t\tclearFixStyle,\n\t\t\t\t\trowStyles,\n\t\t\t\t\tformat.display === ArticleDisplay.Immersive && minHeight,\n\t\t\t\t]}\n\t\t\t\tdata-component=\"nav2\"\n\t\t\t>\n\t\t\t\t{format.display === ArticleDisplay.Immersive && (\n\t\t\t\t\t<Hide when=\"above\" breakpoint=\"tablet\">\n\t\t\t\t\t\t<ThemeProvider theme={buttonThemeReaderRevenue}>\n\t\t\t\t\t\t\t<PositionButton>\n\t\t\t\t\t\t\t\t<LinkButton\n\t\t\t\t\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\ticonSide=\"right\"\n\t\t\t\t\t\t\t\t\ticon={<SvgArrowRightStraight />}\n\t\t\t\t\t\t\t\t\tdata-link-name=\"nav2 : support-cta\"\n\t\t\t\t\t\t\t\t\tdata-edition={edition}\n\t\t\t\t\t\t\t\t\thref={subscribeUrl}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tSubscribe\n\t\t\t\t\t\t\t\t</LinkButton>\n\t\t\t\t\t\t\t</PositionButton>\n\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t</Hide>\n\t\t\t\t)}\n\t\t\t\t{/*\n                IMPORTANT NOTE:\n                It is important to have the input as the 1st sibling for NoJS to work\n                as we use ~ to apply certain styles on checkbox checked and ~ can only\n                apply to styles with elements that are preceded\n            */}\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${visuallyHidden};\n\t\t\t\t\t`}\n\t\t\t\t\tid={navInputCheckboxId}\n\t\t\t\t\tname=\"more\"\n\t\t\t\t\ttabIndex={-1}\n\t\t\t\t\tkey=\"OpenExpandedMenuCheckbox\"\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t/>\n\t\t\t\t<Pillars\n\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\tpillars={nav.pillars}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tdataLinkName=\"nav2\"\n\t\t\t\t\tisTopNav={true}\n\t\t\t\t/>\n\t\t\t\t<ExpandedMenu nav={nav} format={format} />\n\t\t\t</div>\n\t\t\t{displayRoundel && (\n\t\t\t\t<PositionRoundel>\n\t\t\t\t\t<GuardianRoundel />\n\t\t\t\t</PositionRoundel>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Nav/config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/NumberedTitleBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":23,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":38,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":53,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":53,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NumberedTitleBlockComponent } from './NumberedTitleBlockComponent';\n\nexport default {\n\tcomponent: NumberedTitleBlockComponent,\n\ttitle: 'Components/NumberedTitleBlockComponent',\n};\n\nexport const JustH2 = () => (\n\t<div>\n\t\t<NumberedTitleBlockComponent\n\t\t\tposition={1}\n\t\t\thtml=\"<h2>Simple text</h2>\"\n\t\t\tformat={{\n\t\t\t\ttheme: 'NewsPillar',\n\t\t\t\tdesign: 'ArticleDesign',\n\t\t\t\tdisplay: 'StandardDisplay',\n\t\t\t}}\n\t\t/>\n\t</div>\n);\nJustH2.story = { name: 'with just h2 text' };\n\nexport const Strong = () => (\n\t<div>\n\t\t<NumberedTitleBlockComponent\n\t\t\tposition={1}\n\t\t\thtml=\"<h2><strong>Strong text</strong></h2>\"\n\t\t\tformat={{\n\t\t\t\ttheme: 'NewsPillar',\n\t\t\t\tdesign: 'ArticleDesign',\n\t\t\t\tdisplay: 'StandardDisplay',\n\t\t\t}}\n\t\t/>\n\t</div>\n);\nStrong.story = { name: 'with only strong text' };\n\nexport const Leading = () => (\n\t<div>\n\t\t<NumberedTitleBlockComponent\n\t\t\tposition={1}\n\t\t\thtml=\"<h2><strong>Strong text</strong> One Plus 7T Pro</h2>\"\n\t\t\tformat={{\n\t\t\t\ttheme: 'CulturePillar',\n\t\t\t\tdesign: 'ArticleDesign',\n\t\t\t\tdisplay: 'StandardDisplay',\n\t\t\t}}\n\t\t/>\n\t</div>\n);\nLeading.story = { name: 'with leading strong text' };\n\nexport const Trailing = () => (\n\t<div>\n\t\t<NumberedTitleBlockComponent\n\t\t\tposition={1}\n\t\t\thtml=\"<h2>Plain H2<strong>Strong text</strong></h2>\"\n\t\t\tformat={{\n\t\t\t\ttheme: 'LifestylePillar',\n\t\t\t\tdesign: 'ArticleDesign',\n\t\t\t\tdisplay: 'StandardDisplay',\n\t\t\t}}\n\t\t/>\n\t</div>\n);\nTrailing.story = { name: 'with trailing strong text' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/NumberedTitleBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":13},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":45,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":45,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { headline } from '@guardian/source-foundations';\nimport { decideFormat } from '../lib/decideFormat';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tposition: number;\n\thtml: string;\n\tformat: CAPIFormat;\n};\n\nconst titleStyles = (palette: Palette) => css`\n\th2 {\n\t\t${headline.medium({ fontWeight: 'light' })}\n\t}\n\n\tstrong {\n\t\t${headline.medium({ fontWeight: 'bold' })}\n\t\tdisplay: block;\n\t\tcolor: ${palette.text.numberedTitle};\n\t}\n`;\n\nconst numberStyles = (palette: Palette) => css`\n\t${headline.large({ fontWeight: 'bold' })}\n\tfont-size: 56px;\n\tcolor: ${palette.text.numberedPosition};\n`;\n\nexport const NumberedTitleBlockComponent = ({\n\tposition,\n\thtml,\n\tformat,\n}: Props) => {\n\tconst palette = decidePalette(decideFormat(format));\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tmargin-top: -16px; /* Hack used to align Title number closer to adjacent divider */\n\t\t\t`}\n\t\t>\n\t\t\t<div css={numberStyles(palette)}>{position}</div>\n\t\t\t<div\n\t\t\t\tcss={titleStyles(palette)}\n\t\t\t\tdangerouslySetInnerHTML={{ __html: html }}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Onwards.mocks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Onwards.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":23,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":46},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":37,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":44,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":51,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":58,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":58,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":65,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":65,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":72,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":72,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":79,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":79,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":86,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":86,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":93,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":93,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":100,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":100,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ElementContainer } from './ElementContainer';\nimport {\n\teightTrails,\n\tfiveTrails,\n\tfourTrails,\n\tlabsTrails,\n\tlinkAndDescription,\n\toneTrail,\n\tsevenTrails,\n\tsixTrails,\n\tthreeTrails,\n\ttwoTrails,\n\twithLink,\n\twithLongDescription,\n} from './Onwards.mocks';\nimport { OnwardsLayout } from './OnwardsLayout';\n\nexport default {\n\tcomponent: OnwardsLayout,\n\ttitle: 'Components/Onwards',\n};\n\nexport const linkAndDescriptionStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...linkAndDescription} />\n\t</ElementContainer>\n);\nlinkAndDescriptionStory.story = { name: 'With link and description' };\n\nexport const withLongDescriptionStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...withLongDescription} />\n\t</ElementContainer>\n);\nwithLongDescriptionStory.story = { name: 'With long description' };\n\nexport const withLinkStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...withLink} />\n\t</ElementContainer>\n);\nwithLinkStory.story = { name: 'With link' };\n\nexport const oneTrailStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...oneTrail} />\n\t</ElementContainer>\n);\noneTrailStory.story = { name: 'With one trail' };\n\nexport const twoTrailStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...twoTrails} />\n\t</ElementContainer>\n);\ntwoTrailStory.story = { name: 'With two trails' };\n\nexport const threeTrailStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...threeTrails} />\n\t</ElementContainer>\n);\nthreeTrailStory.story = { name: 'With three trails' };\n\nexport const fourTrailStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...fourTrails} />\n\t</ElementContainer>\n);\nfourTrailStory.story = { name: 'With four trails' };\n\nexport const exactlyFiveStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...fiveTrails} />\n\t</ElementContainer>\n);\nexactlyFiveStory.story = { name: 'with five trails' };\n\nexport const sixTrailStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...sixTrails} />\n\t</ElementContainer>\n);\nsixTrailStory.story = { name: 'With six trails' };\n\nexport const sevenTrailStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...sevenTrails} />\n\t</ElementContainer>\n);\nsevenTrailStory.story = { name: 'With seven trails' };\n\nexport const eightTrailStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...eightTrails} />\n\t</ElementContainer>\n);\neightTrailStory.story = { name: 'With eight trails' };\n\nexport const labsTrailStory = () => (\n\t<ElementContainer>\n\t\t<OnwardsLayout {...labsTrails} />\n\t</ElementContainer>\n);\nlabsTrailStory.story = { name: 'With labs trails' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Onwards.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[282,285],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[282,285],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":15,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":15,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":18,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":18,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render } from '@testing-library/react';\nimport { useApi as useApi_ } from '../lib/useApi';\nimport { linkAndDescription } from './Onwards.mocks';\nimport { OnwardsLayout } from './OnwardsLayout';\n\nconst response = { data: linkAndDescription };\nconst useApi: { [key: string]: any } = useApi_;\n\njest.mock('../lib/useApi', () => ({\n\tuseApi: jest.fn(),\n}));\n\ndescribe('OnwardsLayout', () => {\n\tbeforeEach(() => {\n\t\tuseApi.mockReset();\n\t});\n\tit('Render Ophan Data Components as expected', () => {\n\t\tuseApi.mockReturnValue(response);\n\n\t\tconst { asFragment } = render(\n\t\t\t<OnwardsLayout {...linkAndDescription} />,\n\t\t);\n\n\t\t// Renders data-component\n\t\texpect(\n\t\t\tasFragment().querySelectorAll(\n\t\t\t\t'[data-component=\"more-on-this-story\"]',\n\t\t\t).length,\n\t\t).toBe(1);\n\n\t\texpect(\n\t\t\tasFragment().querySelectorAll(\n\t\t\t\t'[data-link-name=\"more-on-this-story\"]',\n\t\t\t).length,\n\t\t).toBe(1);\n\n\t\texpect(\n\t\t\tasFragment().querySelectorAll('[data-link-name=\"article\"]').length,\n\t\t).toBe(8);\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/OnwardsContainer.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":10,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from } from '@guardian/source-foundations';\n\ntype Props = {\n\tchildren: React.ReactNode;\n\tdataComponentName: string;\n\tdataLinkName: string;\n};\n\nexport const OnwardsContainer = ({\n\tchildren,\n\tdataComponentName,\n\tdataLinkName,\n}: Props) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-grow: 1;\n\t\t\tflex-direction: column;\n\t\t\twidth: 100%;\n\n\t\t\tmargin-top: 6px;\n\t\t\t${from.leftCol} {\n\t\t\t\tmargin-top: 36px;\n\t\t\t}\n\n\t\t\tmargin-bottom: 60px;\n\n\t\t\tmargin-left: 0px;\n\t\t\tmargin-right: 0px;\n\n\t\t\t${from.tablet} {\n\t\t\t\t/* Shrink the container to remove the leading and\n                   trailing side margins from the list of cards */\n\t\t\t\tmargin-left: -10px;\n\t\t\t\tmargin-right: -10px;\n\t\t\t}\n\n\t\t\t${from.leftCol} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t\tmargin-right: -10px;\n\t\t\t}\n\n\t\t\t${from.wide} {\n\t\t\t\tmargin-right: 70px;\n\t\t\t\tmargin-top: 8px;\n\t\t\t}\n\t\t`}\n\t\tdata-component={dataComponentName}\n\t\tdata-link-name={dataLinkName}\n\t>\n\t\t{children}\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/OnwardsData.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { useEffect } from 'react';\nimport { decideTrail } from '../lib/decideTrail';\nimport { revealStyles } from '../lib/revealStyles';\nimport { useApi } from '../lib/useApi';\nimport { Placeholder } from './Placeholder';\n\ntype Props = {\n\turl: string;\n\tlimit: number; // Limit the number of items shown (the api often returns more)\n\tophanComponentName: OphanComponentName;\n\tContainer: React.FC<OnwardsType>;\n\tformat: ArticleFormat;\n\tisCuratedContent?: boolean;\n};\n\ntype OnwardsResponse = {\n\ttrails: CAPITrailType[];\n\theading: string;\n\tdisplayname: string;\n\tdescription: string;\n};\n\nconst minHeight = css`\n\tmin-height: 300px;\n`;\n\nexport const OnwardsData = ({\n\turl,\n\tlimit,\n\tophanComponentName,\n\tContainer,\n\tformat,\n\tisCuratedContent,\n}: Props) => {\n\tconst { data, loading, error } = useApi<OnwardsResponse>(url);\n\n\tconst buildTrails = (\n\t\ttrails: CAPITrailType[],\n\t\ttrailLimit: number,\n\t): TrailType[] => {\n\t\treturn trails.slice(0, trailLimit).map(decideTrail);\n\t};\n\n\tuseEffect(() => {\n\t\tif (data) {\n\t\t\tconst pendingElements = document.querySelectorAll<HTMLElement>(\n\t\t\t\t'.onwards > .pending',\n\t\t\t);\n\t\t\tpendingElements.forEach((element) => {\n\t\t\t\telement.classList.add('reveal');\n\t\t\t\telement.classList.remove('pending');\n\t\t\t});\n\t\t}\n\t});\n\n\tif (error) {\n\t\t// Send the error to Sentry and then prevent the element from rendering\n\t\twindow.guardian.modules.sentry.reportError(error, 'onwards-lower');\n\t\treturn null;\n\t}\n\n\tif (loading) {\n\t\treturn (\n\t\t\t<Placeholder\n\t\t\t\t// 300 is a best guess\n\t\t\t\theight={300}\n\t\t\t\tshouldShimmer={false}\n\t\t\t\tbackgroundColor=\"white\"\n\t\t\t/>\n\t\t);\n\t}\n\n\tif (data?.trails) {\n\t\treturn (\n\t\t\t<div css={[minHeight, revealStyles]} className=\"onwards\">\n\t\t\t\t<div className=\"pending\">\n\t\t\t\t\t<Container\n\t\t\t\t\t\theading={data.heading || data.displayname} // Sometimes the api returns heading as 'displayName'\n\t\t\t\t\t\ttrails={buildTrails(data.trails, limit)}\n\t\t\t\t\t\tdescription={data.description}\n\t\t\t\t\t\tophanComponentName={ophanComponentName}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tisCuratedContent={isCuratedContent}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/OnwardsLayout.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":41,"column":16,"nodeType":"TemplateLiteral","messageId":"noArrayIndex","endLine":41,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport { formatAttrString } from '../lib/formatAttrString';\nimport { useComments } from '../lib/useComments';\nimport { ContainerTitle } from './ContainerTitle';\nimport { ExactlyFive } from './ExactlyFive';\nimport { Flex } from './Flex';\nimport { FourOrLess } from './FourOrLess';\nimport { Hide } from './Hide';\nimport { LeftColumn } from './LeftColumn';\nimport { MoreThanFive } from './MoreThanFive';\nimport { OnwardsContainer } from './OnwardsContainer';\nimport { Spotlight } from './Spotlight';\n\nconst decideLayout = (trails: TrailType[]) => {\n\tswitch (trails.length) {\n\t\tcase 1:\n\t\t\treturn <Spotlight content={trails} />;\n\t\tcase 2:\n\t\tcase 3:\n\t\tcase 4:\n\t\t\treturn <FourOrLess content={trails} />;\n\t\tcase 5:\n\t\t\treturn <ExactlyFive content={trails} />;\n\t\tcase 6:\n\t\tcase 7:\n\t\tcase 8:\n\t\tdefault:\n\t\t\treturn <MoreThanFive content={trails} />;\n\t}\n};\n\nexport const OnwardsLayout: React.FC<OnwardsType> = (\n\tdata: OnwardsType,\n\tformat: ArticleFormat,\n) => {\n\tconst sections = useComments([data]);\n\n\treturn (\n\t\t<>\n\t\t\t{sections.map((section, index) => (\n\t\t\t\t<Flex key={`${section.heading}-${index}`}>\n\t\t\t\t\t<LeftColumn\n\t\t\t\t\t\tborderType=\"partial\"\n\t\t\t\t\t\tsize={\n\t\t\t\t\t\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\t\t\t\t\t\tformat.design === ArticleDesign.DeadBlog\n\t\t\t\t\t\t\t\t? 'wide'\n\t\t\t\t\t\t\t\t: 'compact'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ContainerTitle\n\t\t\t\t\t\t\ttitle={section.heading}\n\t\t\t\t\t\t\tdescription={section.description}\n\t\t\t\t\t\t\turl={section.url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</LeftColumn>\n\t\t\t\t\t<OnwardsContainer\n\t\t\t\t\t\tdataComponentName={section.ophanComponentName}\n\t\t\t\t\t\tdataLinkName={formatAttrString(section.heading)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"leftCol\">\n\t\t\t\t\t\t\t<ContainerTitle\n\t\t\t\t\t\t\t\ttitle={section.heading}\n\t\t\t\t\t\t\t\tdescription={section.description}\n\t\t\t\t\t\t\t\turl={section.url}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t{decideLayout(section.trails.slice(0, 8))}\n\t\t\t\t\t</OnwardsContainer>\n\t\t\t\t</Flex>\n\t\t\t))}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/OnwardsLower.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { joinUrl } from '../../lib/joinUrl';\nimport { OnwardsData } from './OnwardsData';\nimport { OnwardsLayout } from './OnwardsLayout';\n\ntype Props = {\n\tajaxUrl: string;\n\thasStoryPackage: boolean;\n\ttags: TagType[];\n\tformat: ArticleFormat;\n};\n\nexport const OnwardsLower = ({\n\tajaxUrl,\n\thasStoryPackage,\n\ttags,\n\tformat,\n}: Props) => {\n\t// In this context, Blog tags are treated the same as Series tags\n\tconst seriesTag = tags.find(\n\t\t(tag) => tag.type === 'Series' || tag.type === 'Blog',\n\t);\n\n\tlet url;\n\tlet ophanComponentName: OphanComponentName = 'default-onwards';\n\n\tif (hasStoryPackage && seriesTag) {\n\t\t// Use the series tag to get other data in the same series\n\t\t// Example: {\n\t\t//              id: \"cities/series/the-illustrated-city\",\n\t\t//              title: \"The illustrated city\",\n\t\t//              type: \"Series\",\n\t\t//          }\n\t\t//\n\t\turl = joinUrl([ajaxUrl, 'series', `${seriesTag.id}.json?dcr`]);\n\t\tophanComponentName = 'series';\n\t}\n\n\tif (!url) return null;\n\n\treturn (\n\t\t<OnwardsData\n\t\t\turl={url}\n\t\t\tlimit={4}\n\t\t\tophanComponentName={ophanComponentName}\n\t\t\tContainer={OnwardsLayout}\n\t\t\tformat={format}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/OnwardsUpper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":69,"column":62,"nodeType":"Punctuator","messageId":"preferNullish","endLine":69,"endColumn":64,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1911,1913],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":179,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":194,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticlePillar } from '@guardian/libs';\nimport { joinUrl } from '../../lib/joinUrl';\nimport { Carousel } from './Carousel';\nimport { ElementContainer } from './ElementContainer';\nimport { OnwardsData } from './OnwardsData';\nimport { OnwardsLayout } from './OnwardsLayout';\n\ntype PillarForContainer =\n\t| 'headlines'\n\t| 'sport'\n\t| 'opinion'\n\t| 'culture'\n\t| 'lifestyle';\n\n// This list is a direct copy from https://github.com/guardian/frontend/blob/6da0b3d8bfd58e8e20f80fc738b070fb23ed154e/static/src/javascripts/projects/common/modules/onward/related.js#L27\n// If you change this list then you should also update ^\n// order matters here (first match wins)\nexport const WHITELISTED_TAGS = [\n\t// sport tags\n\t'sport/cricket',\n\t'sport/rugby-union',\n\t'sport/rugbyleague',\n\t'sport/formulaone',\n\t'sport/tennis',\n\t'sport/cycling',\n\t'sport/motorsports',\n\t'sport/golf',\n\t'sport/horse-racing',\n\t'sport/boxing',\n\t'sport/us-sport',\n\t'sport/australia-sport',\n\n\t// football tags\n\t'football/championsleague',\n\t'football/premierleague',\n\t'football/championship',\n\t'football/europeanfootball',\n\t'football/world-cup-2014',\n\n\t// football team tags\n\t'football/manchester-united',\n\t'football/chelsea',\n\t'football/arsenal',\n\t'football/manchestercity',\n\t'football/tottenham-hotspur',\n\t'football/liverpool',\n];\n\nconst firstPopularTag = (\n\tpageTags: string | string[],\n\tisPaidContent: boolean,\n) => {\n\t// This function looks for the first tag in pageTags, that also exists in our whitelist\n\tif (!pageTags) {\n\t\t// If there are no page tags we will never find a match so\n\t\treturn false;\n\t}\n\n\t// The problem here is keywordIds is sometimes a string and sometimes an array of strings. Fun times.\n\tlet tags;\n\tif (typeof pageTags === 'string') {\n\t\ttags = pageTags.split(',');\n\t} else {\n\t\ttags = pageTags;\n\t}\n\n\tconst firstTagInWhitelist =\n\t\ttags.find((tag: string) => WHITELISTED_TAGS.includes(tag)) || false;\n\n\t// For paid content we just return the first tag, otherwise we\n\t// filter for the first tag in the whitelist\n\treturn isPaidContent ? tags[0] : firstTagInWhitelist;\n};\n\nconst onwardsWrapper = css`\n\twidth: 100%;\n`;\n\nconst containerUrls = {\n\theadlines: {\n\t\tUK: 'uk-alpha/news/regular-stories',\n\t\tUS: 'c5cad9ee-584d-4e85-85cd-bf8ee481b026',\n\t\tAU: 'au-alpha/news/regular-stories',\n\t\tINT: '10f21d96-18f6-426f-821b-19df55dfb831',\n\t},\n\tsport: {\n\t\tUK: '754c-8e8c-fad9-a927',\n\t\tUS: 'f6dd-d7b1-0e85-4650',\n\t\tAU: 'c45d-318f-896c-3a85',\n\t\tINT: 'd1ad8ec3-5ee2-4673-94c8-cc3f8d261e52',\n\t},\n\topinion: {\n\t\tUK: '3ff78b30-52f5-4d30-ace8-c887113cbe0d',\n\t\tUS: '98df412d-b0e7-4d9a-98c2-062642823e94',\n\t\tAU: 'au-alpha/contributors/feature-stories',\n\t\tINT: 'ee3386bb-9430-4a6d-8bca-b99d65790f3b',\n\t},\n\tculture: {\n\t\tUK: 'ae511a89-ef38-4ec9-aab1-3a5ebc96d118',\n\t\tUS: 'fb59c1f8-72a7-41d5-8365-a4d574809bed',\n\t\tAU: '22262088-4bce-4290-9810-cb50bbead8db',\n\t\tINT: 'c7154e22-7292-4d93-a14d-22fd4b6b693d',\n\t},\n\tlifestyle: {\n\t\tUK: 'uk-alpha/features/feature-stories',\n\t\tUS: 'us-alpha/features/feature-stories',\n\t\tAU: '13636104-51ce-4264-bb6b-556c80227331',\n\t\tINT: '7b297ef5-a3f9-45e5-b915-b54951d7f6ec',\n\t},\n};\n\nconst getContainer = (pillar: PillarForContainer, edition: Edition) => {\n\treturn containerUrls[pillar][edition];\n};\n\nconst getContainerDataUrl = (\n\tpillar: ArticleTheme,\n\tedition: Edition,\n\tajaxUrl: string,\n) => {\n\tswitch (pillar) {\n\t\tcase ArticlePillar.Sport:\n\t\t\treturn joinUrl([\n\t\t\t\tajaxUrl,\n\t\t\t\t'container/data',\n\t\t\t\t`${getContainer('sport', edition)}.json`,\n\t\t\t]);\n\t\tcase ArticlePillar.News:\n\t\t\treturn joinUrl([\n\t\t\t\tajaxUrl,\n\t\t\t\t'container/data',\n\t\t\t\t`${getContainer('headlines', edition)}.json`,\n\t\t\t]);\n\t\tcase ArticlePillar.Culture:\n\t\t\treturn joinUrl([\n\t\t\t\tajaxUrl,\n\t\t\t\t'container/data',\n\t\t\t\t`${getContainer('culture', edition)}.json`,\n\t\t\t]);\n\t\tcase ArticlePillar.Lifestyle:\n\t\t\treturn joinUrl([\n\t\t\t\tajaxUrl,\n\t\t\t\t'container/data',\n\t\t\t\t`${getContainer('lifestyle', edition)}.json`,\n\t\t\t]);\n\t\tcase ArticlePillar.Opinion:\n\t\t\treturn joinUrl([\n\t\t\t\tajaxUrl,\n\t\t\t\t'container/data',\n\t\t\t\t`${getContainer('opinion', edition)}.json`,\n\t\t\t]);\n\t\tdefault:\n\t\t\treturn joinUrl([\n\t\t\t\tajaxUrl,\n\t\t\t\t'container/data',\n\t\t\t\t`${getContainer('headlines', edition)}.json`,\n\t\t\t]);\n\t}\n};\n\ntype Props = {\n\tajaxUrl: string;\n\thasRelated: boolean;\n\thasStoryPackage: boolean;\n\tisAdFreeUser: boolean;\n\tpageId: string;\n\tisPaidContent: boolean;\n\tshowRelatedContent: boolean;\n\tkeywordIds: string | string[];\n\tcontentType: string;\n\ttags: TagType[];\n\tformat: ArticleFormat;\n\tedition: Edition;\n\tpillar: ArticleTheme;\n\tshortUrlId: string;\n};\n\nexport const OnwardsUpper = ({\n\tajaxUrl,\n\thasRelated,\n\thasStoryPackage,\n\tisAdFreeUser,\n\tpageId,\n\tisPaidContent,\n\tshowRelatedContent,\n\tkeywordIds,\n\tcontentType,\n\ttags,\n\tformat,\n\tpillar,\n\tedition,\n\tshortUrlId,\n}: Props) => {\n\t// Related content can be a collection of articles based on\n\t// two things, 1: A popular tag, or 2: A generic text match\n\tconst tagToFilterBy = firstPopularTag(keywordIds, isPaidContent);\n\n\t// In this context, Blog tags are treated the same as Series tags\n\tconst seriesTag = tags.find(\n\t\t(tag) => tag.type === 'Series' || tag.type === 'Blog',\n\t);\n\n\tlet url;\n\tlet ophanComponentName: OphanComponentName = 'default-onwards';\n\n\tif (!showRelatedContent) {\n\t\t// Then don't show related content\n\t\t// This is the first priority for deciding whether to include related content\n\t} else if (hasStoryPackage) {\n\t\t// Always fetch the story package if it exists\n\t\turl = joinUrl([ajaxUrl, 'story-package', `${pageId}.json?dcr=true`]);\n\t\tophanComponentName = 'more-on-this-story';\n\t} else if (isAdFreeUser && isPaidContent) {\n\t\t// Don't show any related content (other than story packages) for\n\t\t// adfree users when the content is paid for\n\t} else if (seriesTag) {\n\t\t// Use the series tag to get other data in the same series\n\t\t// Example: {\n\t\t//              id: \"cities/series/the-illustrated-city\",\n\t\t//              title: \"The illustrated city\",\n\t\t//              type: \"Series\",\n\t\t//          }\n\t\t//\n\t\turl = joinUrl([\n\t\t\tajaxUrl,\n\t\t\t'series',\n\t\t\t`${seriesTag.id}.json?dcr&shortUrl=${shortUrlId}`,\n\t\t]);\n\t\tophanComponentName = 'series';\n\t} else if (!hasRelated) {\n\t\t// There is no related content to show\n\t} else if (tagToFilterBy) {\n\t\t// Use popular in tag endpoint\n\t\tlet popularInTagUrl = `/popular-in-tag/${tagToFilterBy}.json?dcr=true`;\n\n\t\t// --- Tag excludes --- //\n\t\tconst tagsToExclude = [];\n\t\t// Exclude ad features from non-ad feature content\n\t\tif (!isPaidContent) {\n\t\t\ttagsToExclude.push('tone/advertisement-features');\n\t\t}\n\t\t// We don't want to show professional network content on videos or interactives\n\t\tif (\n\t\t\tcontentType.toLowerCase() === 'video' ||\n\t\t\tcontentType.toLowerCase() === 'interactive'\n\t\t) {\n\t\t\ttagsToExclude.push('guardian-professional/guardian-professional');\n\t\t}\n\n\t\t// Add any exclude tags to the url\n\t\tif (tagsToExclude.length > 0) {\n\t\t\tconst queryParams = tagsToExclude.map(\n\t\t\t\t(tag) => `exclude-tag=${tag}`,\n\t\t\t);\n\t\t\tpopularInTagUrl += `&${queryParams.join('&')}`;\n\t\t}\n\n\t\turl = joinUrl([ajaxUrl, popularInTagUrl]);\n\t\tophanComponentName = 'related-content';\n\t} else {\n\t\t// Default to generic related endpoint\n\t\tconst relatedUrl = `/related/${pageId}.json?dcr=true`;\n\n\t\turl = joinUrl([ajaxUrl, relatedUrl]);\n\t\tophanComponentName = 'related-stories';\n\t}\n\n\tconst curatedDataUrl = showRelatedContent\n\t\t? getContainerDataUrl(pillar, edition, ajaxUrl)\n\t\t: null;\n\n\treturn (\n\t\t<div css={onwardsWrapper}>\n\t\t\t{url && (\n\t\t\t\t<ElementContainer>\n\t\t\t\t\t<OnwardsData\n\t\t\t\t\t\turl={url}\n\t\t\t\t\t\tlimit={8}\n\t\t\t\t\t\tophanComponentName={ophanComponentName}\n\t\t\t\t\t\tContainer={isPaidContent ? OnwardsLayout : Carousel}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\t\t\t{!isPaidContent && curatedDataUrl && (\n\t\t\t\t<ElementContainer showTopBorder={true}>\n\t\t\t\t\t<OnwardsData\n\t\t\t\t\t\turl={curatedDataUrl}\n\t\t\t\t\t\tlimit={20}\n\t\t\t\t\t\tophanComponentName=\"curated-content\"\n\t\t\t\t\t\tContainer={Carousel}\n\t\t\t\t\t\tisCuratedContent={true}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Palettes.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":26,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":26,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":43,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":60,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":60,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":77,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":77,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":94,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":94,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":111,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":111,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":128,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":128,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { trails } from '../../../fixtures/manual/trails';\nimport { ContainerLayout } from './ContainerLayout';\nimport { DynamicFast } from './DynamicFast';\n\nexport default {\n\ttitle: 'Layouts/Palettes',\n};\n\nexport const EventPalette = () => (\n\t<ContainerLayout\n\t\ttitle=\"EventPalette\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t\tcontainerPalette=\"EventPalette\"\n\t>\n\t\t<DynamicFast\n\t\t\ttrails={trails}\n\t\t\tcontainerPalette=\"EventPalette\"\n\t\t\tshowAge={true}\n\t\t/>\n\t</ContainerLayout>\n);\n\nexport const EventAltPalette = () => (\n\t<ContainerLayout\n\t\ttitle=\"EventAltPalette\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t\tcontainerPalette=\"EventAltPalette\"\n\t>\n\t\t<DynamicFast\n\t\t\ttrails={trails}\n\t\t\tcontainerPalette=\"EventAltPalette\"\n\t\t\tshowAge={true}\n\t\t/>\n\t</ContainerLayout>\n);\n\nexport const SombrePalette = () => (\n\t<ContainerLayout\n\t\ttitle=\"SombrePalette\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t\tcontainerPalette=\"SombrePalette\"\n\t>\n\t\t<DynamicFast\n\t\t\ttrails={trails}\n\t\t\tcontainerPalette=\"SombrePalette\"\n\t\t\tshowAge={true}\n\t\t/>\n\t</ContainerLayout>\n);\n\nexport const SombreAltPalette = () => (\n\t<ContainerLayout\n\t\ttitle=\"SombreAltPalette\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t\tcontainerPalette=\"SombreAltPalette\"\n\t>\n\t\t<DynamicFast\n\t\t\ttrails={trails}\n\t\t\tcontainerPalette=\"SombreAltPalette\"\n\t\t\tshowAge={true}\n\t\t/>\n\t</ContainerLayout>\n);\n\nexport const BreakingPalette = () => (\n\t<ContainerLayout\n\t\ttitle=\"BreakingPalette\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t\tcontainerPalette=\"BreakingPalette\"\n\t>\n\t\t<DynamicFast\n\t\t\ttrails={trails}\n\t\t\tcontainerPalette=\"BreakingPalette\"\n\t\t\tshowAge={true}\n\t\t/>\n\t</ContainerLayout>\n);\n\nexport const LongRunningPalette = () => (\n\t<ContainerLayout\n\t\ttitle=\"LongRunningPalette\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t\tcontainerPalette=\"LongRunningPalette\"\n\t>\n\t\t<DynamicFast\n\t\t\ttrails={trails}\n\t\t\tcontainerPalette=\"LongRunningPalette\"\n\t\t\tshowAge={true}\n\t\t/>\n\t</ContainerLayout>\n);\n\nexport const LongRunningAltPalette = () => (\n\t<ContainerLayout\n\t\ttitle=\"LongRunningAltPalette\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t\tcontainerPalette=\"LongRunningAltPalette\"\n\t>\n\t\t<DynamicFast\n\t\t\ttrails={trails}\n\t\t\tcontainerPalette=\"LongRunningAltPalette\"\n\t\t\tshowAge={true}\n\t\t/>\n\t</ContainerLayout>\n);\n\nexport const InvestigationPalette = () => (\n\t<ContainerLayout\n\t\ttitle=\"InvestigationPalette\"\n\t\tshowTopBorder={true}\n\t\tsideBorders={true}\n\t\tpadContent={false}\n\t\tcentralBorder=\"partial\"\n\t\tcontainerPalette=\"InvestigationPalette\"\n\t>\n\t\t<DynamicFast\n\t\t\ttrails={trails}\n\t\t\tcontainerPalette=\"InvestigationPalette\"\n\t\t\tshowAge={true}\n\t\t/>\n\t</ContainerLayout>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/PersonalityQuizAtomWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":34,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":67}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { PersonalityQuizAtom } from '@guardian/atoms-rendering';\nimport type { SharingUrlsType } from '@guardian/atoms-rendering/dist/types/types';\n\n// These types are duplicates of those defined in the atom file.\ntype AnswerType = {\n\tid: string;\n\ttext: string;\n\trevealText?: string;\n\tisCorrect: boolean;\n\tanswerBuckets: string[];\n};\n\ntype QuestionType = {\n\tid: string;\n\ttext: string;\n\tanswers: AnswerType[];\n\timageUrl?: string;\n};\n\ntype ResultsBucket = {\n\tid: string;\n\ttitle: string;\n\tdescription: string;\n};\n\ntype QuizAtomType = {\n\tid: string;\n\tquestions: QuestionType[];\n\tresultBuckets: ResultsBucket[];\n\tsharingUrls: SharingUrlsType;\n\ttheme: ArticleTheme;\n};\n\nexport const PersonalityQuizAtomWrapper = (props: QuizAtomType) => {\n\treturn <PersonalityQuizAtom {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Picture.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Picture.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":118,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":118,"endColumn":12},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":136,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":151,"endColumn":4},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":154,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":180,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":224,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":233,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDisplay } from '@guardian/libs';\nimport { breakpoints } from '@guardian/source-foundations';\n\n/*\n * Working on this file? Checkout out 027-pictures.md for background information & context!\n */\n\ntype Props = {\n\timageSources: ImageSource[];\n\trole: RoleType;\n\tformat: ArticleFormat;\n\talt: string;\n\theight: string;\n\twidth: string;\n\tisMainMedia?: boolean;\n\tisLazy?: boolean;\n};\n\ntype ResolutionType = 'hdpi' | 'mdpi';\ntype Pixel = number;\ntype Breakpoint = number;\n\nexport type DesiredWidth = {\n\tbreakpoint: Breakpoint;\n\twidth: Pixel;\n};\n\n/**\n * Given a desired width & array of SrcSetItems, return the closest match.\n * The match will always be greater than the desired width when available\n *\n * @param desiredWidth\n * @param inlineSrcSets\n * @returns {SrcSetItem}\n */\nexport const getBestSourceForDesiredWidth = (\n\tdesiredWidth: Pixel,\n\tinlineSrcSets: SrcSetItem[],\n): SrcSetItem => {\n\tconst sorted = inlineSrcSets.slice().sort((a, b) => b.width - a.width);\n\treturn sorted.reduce((best, current) => {\n\t\tif (current.width < best.width && current.width >= desiredWidth) {\n\t\t\treturn current;\n\t\t}\n\t\treturn best;\n\t});\n};\n\nconst getSourcesForRoleAndResolution = (\n\timageSources: ImageSource[],\n\trole: RoleType,\n\tresolution: ResolutionType,\n) => {\n\tconst setsForRole = imageSources.filter(\n\t\t({ weighting }) =>\n\t\t\t// Use toLowerCase to handle cases where we have halfWidth comparing to halfwidth\n\t\t\tweighting.toLowerCase() === role.toLowerCase(),\n\t)[0].srcSet;\n\n\treturn resolution === 'hdpi'\n\t\t? setsForRole.filter((set) => set.src.includes('dpr=2'))\n\t\t: setsForRole.filter((set) => !set.src.includes('dpr=2'));\n};\n\nconst getFallback = (sources: SrcSetItem[]): string | undefined => {\n\tif (sources.length === 0) return undefined;\n\t// The assumption here is readers on devices that do not support srcset are likely to be on poor\n\t// network connections so we're going to fallback to a small image\n\treturn getBestSourceForDesiredWidth(300, sources).src;\n};\n\n/**\n * Removes redundant widths from an array of DesiredWidths\n *\n * This function specifically looks for *consecutive duplicates*,\n * in which case we should always keep the last consecutive element.\n *\n * @param {DesiredWidth[]} desiredWidths\n * @returns {DesiredWidth}\n */\nexport const removeRedundantWidths = (\n\tallDesiredWidths: DesiredWidth[],\n): DesiredWidth[] => {\n\tconst desiredWidths: DesiredWidth[] = [];\n\n\tfor (const desiredWidth of allDesiredWidths) {\n\t\tif (\n\t\t\tdesiredWidths[desiredWidths.length - 1]?.width ===\n\t\t\tdesiredWidth.width\n\t\t) {\n\t\t\t// We overwrite the end element as we want to keep the *last* consecutive duplicate\n\t\t\tdesiredWidths[desiredWidths.length - 1] = desiredWidth;\n\t\t} else desiredWidths.push(desiredWidth);\n\t}\n\n\treturn desiredWidths;\n};\n\n/**\n * Returns the desired width for an image at the specified breakpoint, based on the image role, format, and if it's main media.\n * This function acts as a source of truth for widths of images based on the provided parameters\n *\n * Returns 'breakpoint', or 'breakpoint / x' when the image is expected to fill a % of the viewport,\n * instead of a fixed width.\n *\n * @param breakpoint\n * @param role\n * @param isMainMedia\n * @param format\n * @returns {Pixel}\n */\nconst getDesiredWidthForBreakpoint = (\n\tbreakpoint: number,\n\trole: RoleType,\n\tisMainMedia: boolean,\n\tformat: ArticleFormat,\n): Pixel => {\n\tif (\n\t\t(format.display === ArticleDisplay.Showcase ||\n\t\t\tformat.display === ArticleDisplay.NumberedList) &&\n\t\tisMainMedia\n\t) {\n\t\t// Showcase main media images (which includes numbered list articles) appear\n\t\t// larger than in body showcase images so we use a different set of image sizes\n\t\tif (breakpoint >= breakpoints.wide) return 1020;\n\t\tif (breakpoint >= breakpoints.leftCol) return 940;\n\t\tif (breakpoint >= breakpoints.tablet) return 700;\n\t\tif (breakpoint >= breakpoints.phablet) return 700;\n\t\treturn breakpoint;\n\t}\n\n\tif (isMainMedia && format.display === ArticleDisplay.Immersive) {\n\t\t// Immersive main media images are often reported to have poor quality so we\n\t\t// override the default values here and force larger images to be used\n\t\tswitch (breakpoint) {\n\t\t\tcase breakpoints.mobile:\n\t\t\t\treturn 480;\n\t\t\tcase breakpoints.mobileLandscape:\n\t\t\t\treturn 660;\n\t\t\tcase breakpoints.phablet:\n\t\t\t\treturn 740;\n\t\t\tcase breakpoints.tablet:\n\t\t\t\treturn 980;\n\t\t\tcase breakpoints.desktop:\n\t\t\t\treturn 1140;\n\t\t\tcase breakpoints.leftCol:\n\t\t\t\treturn 1300;\n\t\t\tcase breakpoints.wide:\n\t\t\t\treturn 1900;\n\t\t}\n\t}\n\n\tswitch (role) {\n\t\tcase 'inline':\n\t\t\tif (\n\t\t\t\tbreakpoint >= breakpoints.tablet &&\n\t\t\t\tbreakpoint < breakpoints.desktop\n\t\t\t)\n\t\t\t\treturn 680;\n\t\t\tif (breakpoint >= breakpoints.phablet) return 620;\n\t\t\treturn breakpoint;\n\t\tcase 'halfWidth':\n\t\t\tif (breakpoint >= breakpoints.phablet) return 300;\n\t\t\treturn Math.round(breakpoint / 2);\n\t\tcase 'thumbnail':\n\t\t\treturn 140;\n\t\tcase 'immersive':\n\t\t\tif (breakpoint >= breakpoints.wide) return 1300;\n\t\t\treturn breakpoint;\n\t\tcase 'supporting':\n\t\t\tif (breakpoint >= breakpoints.wide) return 380;\n\t\t\tif (breakpoint >= breakpoints.tablet) return 300;\n\t\t\treturn breakpoint;\n\t\tcase 'showcase':\n\t\t\tif (breakpoint >= breakpoints.wide) return 860;\n\t\t\tif (breakpoint >= breakpoints.leftCol) return 780;\n\t\t\tif (breakpoint >= breakpoints.phablet) return 620;\n\t\t\treturn breakpoint;\n\t}\n};\n\n// Takes a size & sources, and returns a source set with 1 matching image with the desired size\nconst getSourceForDesiredWidth = (\n\tdesiredWidth: Pixel,\n\tsources: SrcSetItem[],\n\tresolution: ResolutionType,\n) => {\n\t// The image sources we're provided use double-widths for HDPI images\n\t// We should therefor multiply the width based on if it's HDPI or not\n\t// e.g { url: '... ?width=500&dpr=2 ...', width: '1000' }\n\tconst source = getBestSourceForDesiredWidth(\n\t\tresolution === 'hdpi' ? desiredWidth * 2 : desiredWidth,\n\t\tsources,\n\t);\n\treturn `${source.src} ${source.width}w`;\n};\n\n// Create sourcesets for portrait immersive\n// In a future PR this system could be updated to address scaling issues with DPR\nconst portraitImmersiveMainMediaSource = (\n\tsources: SrcSetItem[],\n\tresolution: ResolutionType,\n) => (\n\t<source\n\t\tmedia={\n\t\t\tresolution === 'hdpi'\n\t\t\t\t? '(orientation: portrait) and (-webkit-min-device-pixel-ratio: 1.25), (orientation: portrait) and (min-resolution: 120dpi)'\n\t\t\t\t: '(orientation: portrait)'\n\t\t}\n\t\t// Immersive MainMedia elements fill the height of the viewport, meaning\n\t\t// on mobile devices even though the viewport width is small, we'll need\n\t\t// a larger image to maintain quality. To solve this problem we're using\n\t\t// the viewport height (vh) to calculate width. The value of 167vh\n\t\t// relates to an assumed image ratio of 5:3 which is equal to\n\t\t// 167 (viewport height)  : 100 (viewport width).\n\t\tsizes=\"167vh\"\n\t\tsrcSet={sources\n\t\t\t.map((srcSet) => `${srcSet.src} ${srcSet.width}w`)\n\t\t\t.join(',')}\n\t/>\n);\n\nexport const Picture = ({\n\timageSources,\n\trole,\n\tformat,\n\talt,\n\theight,\n\twidth,\n\tisMainMedia = false,\n\tisLazy = true,\n}: Props) => {\n\tconst hdpiSourceSets = getSourcesForRoleAndResolution(\n\t\timageSources,\n\t\trole,\n\t\t'hdpi',\n\t);\n\tconst mdpiSourceSets = getSourcesForRoleAndResolution(\n\t\timageSources,\n\t\trole,\n\t\t'mdpi',\n\t);\n\tconst fallbackSrc = getFallback(\n\t\thdpiSourceSets.length ? hdpiSourceSets : mdpiSourceSets,\n\t);\n\n\tconst allDesiredWidths: DesiredWidth[] = [\n\t\t// Create an array of breakpoints going from highest to lowest, with 0 as the final option\n\t\tbreakpoints.wide,\n\t\tbreakpoints.leftCol,\n\t\tbreakpoints.desktop,\n\t\tbreakpoints.tablet,\n\t\tbreakpoints.phablet,\n\t\tbreakpoints.mobileLandscape,\n\t\tbreakpoints.mobileMedium,\n\t\tbreakpoints.mobile,\n\t\t0,\n\t].map((breakpoint) => ({\n\t\tbreakpoint,\n\t\twidth: getDesiredWidthForBreakpoint(\n\t\t\tbreakpoint,\n\t\t\trole,\n\t\t\tisMainMedia,\n\t\t\tformat,\n\t\t),\n\t}));\n\n\tconst desiredWidths: DesiredWidth[] =\n\t\tremoveRedundantWidths(allDesiredWidths);\n\n\treturn (\n\t\t<picture itemProp=\"contentUrl\">\n\t\t\t{/* Immersive Main Media images also get portrait sources */}\n\t\t\t{format.display === ArticleDisplay.Immersive && isMainMedia && (\n\t\t\t\t<>\n\t\t\t\t\t{portraitImmersiveMainMediaSource(hdpiSourceSets, 'hdpi')}\n\t\t\t\t\t{portraitImmersiveMainMediaSource(mdpiSourceSets, 'mdpi')}\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t{desiredWidths.map(({ breakpoint, width: desiredWidth }) => (\n\t\t\t\t<>\n\t\t\t\t\t{/* HDPI Source (DPR2) - images in this srcset have `dpr=2&quality=45` in the url */}\n\t\t\t\t\t{hdpiSourceSets.length > 0 && (\n\t\t\t\t\t\t<source\n\t\t\t\t\t\t\tsrcSet={getSourceForDesiredWidth(\n\t\t\t\t\t\t\t\tdesiredWidth,\n\t\t\t\t\t\t\t\thdpiSourceSets,\n\t\t\t\t\t\t\t\t'hdpi',\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tmedia={`(min-width: ${breakpoint}px) and (-webkit-min-device-pixel-ratio: 1.25), (min-width: ${breakpoint}px) and (min-resolution: 120dpi)`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{/* MDPI Source - images in this srcset have `quality=85` in the url */}\n\t\t\t\t\t<source\n\t\t\t\t\t\tsrcSet={getSourceForDesiredWidth(\n\t\t\t\t\t\t\tdesiredWidth,\n\t\t\t\t\t\t\tmdpiSourceSets,\n\t\t\t\t\t\t\t'mdpi',\n\t\t\t\t\t\t)}\n\t\t\t\t\t\tmedia={`(min-width: ${breakpoint}px)`}\n\t\t\t\t\t/>\n\t\t\t\t</>\n\t\t\t))}\n\n\t\t\t<img\n\t\t\t\talt={alt}\n\t\t\t\tsrc={fallbackSrc}\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t\tloading={\n\t\t\t\t\tisLazy && !Picture.disableLazyLoading ? 'lazy' : undefined\n\t\t\t\t}\n\t\t\t\t// https://stackoverflow.com/questions/10844205/html-5-strange-img-always-adds-3px-margin-at-bottom\n\t\t\t\t// why did we add the css `vertical-align: middle;` to the img tag\n\t\t\t\tcss={css`\n\t\t\t\t\tvertical-align: middle;\n\t\t\t\t`}\n\t\t\t/>\n\t\t</picture>\n\t);\n};\n\n// We use disableLazyLoading to decide if we want to turn off lazy loading of images site wide. We use this\n// to prevent false negatives on Chromatic snapshots (see /.storybook/config)\nPicture.disableLazyLoading = false;\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Pillars.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/PinnedPost.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":43,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":92,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":92,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":141,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":141,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":190,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":190,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":239,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":239,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":288,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":288,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":337,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":337,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { breakpoints, from } from '@guardian/source-foundations';\nimport { liveBlock } from '../../../fixtures/manual/liveBlock';\nimport { LiveBlock } from './LiveBlock';\nimport { PinnedPost } from './PinnedPost';\n\nconst Wrapper = ({ children }: { children: React.ReactNode }) => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tpadding: 20px;\n\t\t\t\tmax-width: 700px;\n\t\t\t\t${from.tablet} {\n\t\t\t\t\twidth: 700px;\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport default {\n\tcomponent: PinnedPost,\n\ttitle: 'Components/PinnedPost',\n\tparameters: {\n\t\tbackgrounds: {\n\t\t\tdefault: 'grey',\n\t\t\tvalues: [{ name: 'grey', value: 'lightgrey' }],\n\t\t},\n\t\tchromatic: {\n\t\t\tviewports: [breakpoints.mobile, breakpoints.wide],\n\t\t},\n\t},\n};\n\nexport const Sport = () => {\n\tconst block: Block = {\n\t\t...liveBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\tconst format = {\n\t\ttheme: ArticlePillar.Sport,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\tdisplay: ArticleDisplay.Standard,\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<PinnedPost pinnedPost={block} format={format}>\n\t\t\t\t<LiveBlock\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tblock={block}\n\t\t\t\t\tpageId=\"\"\n\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\tisSensitive={false}\n\t\t\t\t\tswitches={{}}\n\t\t\t\t\tisPinnedPost={true}\n\t\t\t\t/>\n\t\t\t</PinnedPost>\n\t\t</Wrapper>\n\t);\n};\n\nexport const News = () => {\n\tconst block: Block = {\n\t\t...liveBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\tconst format = {\n\t\ttheme: ArticlePillar.News,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\tdisplay: ArticleDisplay.Standard,\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<PinnedPost pinnedPost={block} format={format}>\n\t\t\t\t<LiveBlock\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tblock={block}\n\t\t\t\t\tpageId=\"\"\n\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\tisSensitive={false}\n\t\t\t\t\tswitches={{}}\n\t\t\t\t\tisPinnedPost={true}\n\t\t\t\t/>\n\t\t\t</PinnedPost>\n\t\t</Wrapper>\n\t);\n};\n\nexport const Culture = () => {\n\tconst block: Block = {\n\t\t...liveBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\tconst format = {\n\t\ttheme: ArticlePillar.Culture,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\tdisplay: ArticleDisplay.Standard,\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<PinnedPost pinnedPost={block} format={format}>\n\t\t\t\t<LiveBlock\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tblock={block}\n\t\t\t\t\tpageId=\"\"\n\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\tisSensitive={false}\n\t\t\t\t\tswitches={{}}\n\t\t\t\t\tisPinnedPost={true}\n\t\t\t\t/>\n\t\t\t</PinnedPost>\n\t\t</Wrapper>\n\t);\n};\n\nexport const Lifestyle = () => {\n\tconst block: Block = {\n\t\t...liveBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\tconst format = {\n\t\ttheme: ArticlePillar.Lifestyle,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\tdisplay: ArticleDisplay.Standard,\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<PinnedPost pinnedPost={block} format={format}>\n\t\t\t\t<LiveBlock\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tblock={block}\n\t\t\t\t\tpageId=\"\"\n\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\tisSensitive={false}\n\t\t\t\t\tswitches={{}}\n\t\t\t\t\tisPinnedPost={true}\n\t\t\t\t/>\n\t\t\t</PinnedPost>\n\t\t</Wrapper>\n\t);\n};\n\nexport const Opinion = () => {\n\tconst block: Block = {\n\t\t...liveBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\tconst format = {\n\t\ttheme: ArticlePillar.Opinion,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\tdisplay: ArticleDisplay.Standard,\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<PinnedPost pinnedPost={block} format={format}>\n\t\t\t\t<LiveBlock\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tblock={block}\n\t\t\t\t\tpageId=\"\"\n\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\tisSensitive={false}\n\t\t\t\t\tswitches={{}}\n\t\t\t\t\tisPinnedPost={true}\n\t\t\t\t/>\n\t\t\t</PinnedPost>\n\t\t</Wrapper>\n\t);\n};\n\nexport const SpecialReport = () => {\n\tconst block: Block = {\n\t\t...liveBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\tconst format = {\n\t\ttheme: ArticleSpecial.SpecialReport,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\tdisplay: ArticleDisplay.Standard,\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<PinnedPost pinnedPost={block} format={format}>\n\t\t\t\t<LiveBlock\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tblock={block}\n\t\t\t\t\tpageId=\"\"\n\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\tisSensitive={false}\n\t\t\t\t\tswitches={{}}\n\t\t\t\t\tisPinnedPost={true}\n\t\t\t\t/>\n\t\t\t</PinnedPost>\n\t\t</Wrapper>\n\t);\n};\n\nexport const Labs = () => {\n\tconst block: Block = {\n\t\t...liveBlock,\n\t\telements: [\n\t\t\t{\n\t\t\t\telementId: '14ffdfde-113a-4270-afca-d34436dca56e',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>That’s it for our live coverage of Nasa’s celebratory news conference and Q&amp;A following the successful landing of the rover Perseverance on Mars. </p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: '1e877282-4d8f-45b0-8b2a-a27060dfc7f5',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<p>To recap:</p>',\n\t\t\t},\n\t\t\t{\n\t\t\t\telementId: 'b48f6547-8346-416d-a8be-2e0e6e254087',\n\t\t\t\t_type: 'model.dotcomrendering.pageElements.TextBlockElement',\n\t\t\t\thtml: '<ul> \\n <li>The rover is “healthy” and undergoing systems testing.</li> \\n <li>It already has beamed back stunning photos from the surface of <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> promising significant scientific discoveries ahead.</li> \\n <li>The images include the first color images beamed directly from <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> as opposed to images touched up later.</li> \\n <li>The rover documented its own touchdown via an ingenious system of booster rockets and a “space crane”.</li> \\n <li>It landed in a “pool-table flat” crater in a prime location for searching for traces of ancient life.</li> \\n <li>The wheeled rover could begin to move around its new home as early as late February.</li> \\n <li>The rover’s mini helicopter could launch as early as April.</li> \\n <li>Its broad mission is to stay on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> for a couple years, gather data and harvest samples to be collected and returned to Earth on a future mission.</li> \\n <li>The point is to determine whether there was life on <a href=\"https://www.theguardian.com/science/mars\" data-component=\"auto-linked-tag\">Mars</a> and subsidiary questions.</li> \\n <li>The team at Nasa is very happy and excited, “on cloud nine” in a “weird, dreamlike state”... with lots of work ahead.</li> \\n</ul>',\n\t\t\t},\n\t\t],\n\t};\n\tconst format = {\n\t\ttheme: ArticleSpecial.Labs,\n\t\tdesign: ArticleDesign.LiveBlog,\n\t\tdisplay: ArticleDisplay.Standard,\n\t};\n\treturn (\n\t\t<Wrapper>\n\t\t\t<PinnedPost pinnedPost={block} format={format}>\n\t\t\t\t<LiveBlock\n\t\t\t\t\tadTargeting={{\n\t\t\t\t\t\tcustomParams: { sens: 'f', urlkw: [] },\n\t\t\t\t\t\tadUnit: '',\n\t\t\t\t\t}}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tblock={block}\n\t\t\t\t\tpageId=\"\"\n\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\tajaxUrl=\"\"\n\t\t\t\t\tisAdFreeUser={false}\n\t\t\t\t\tisSensitive={false}\n\t\t\t\t\tswitches={{}}\n\t\t\t\t\tisPinnedPost={true}\n\t\t\t\t/>\n\t\t\t</PinnedPost>\n\t\t</Wrapper>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/PinnedPost.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":138,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":138,"endColumn":71}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { timeAgo } from '@guardian/libs';\nimport {\n\tfocusHalo,\n\tfrom,\n\theight,\n\tneutral,\n\tspace,\n\ttextSans,\n\ttransitions,\n\tvisuallyHidden,\n} from '@guardian/source-foundations';\nimport {\n\tSvgMinus,\n\tSvgPinned,\n\tSvgPlus,\n} from '@guardian/source-react-components';\nimport { decidePalette } from '../lib/decidePalette';\n\nconst pinnedPostContainer = (palette: Palette) => css`\n\tborder: 3px solid ${palette.border.pinnedPost};\n\tpadding-bottom: ${space[1]}px;\n\tmargin-bottom: ${space[9]}px;\n\tposition: relative;\n\tbackground: ${neutral[100]};\n\t#pinned-post-checkbox:checked ~ #collapsible-body {\n\t\tmax-height: fit-content;\n\t\tmargin-bottom: ${space[1]}px;\n\t}\n\t#pinned-post-checkbox:checked ~ #pinned-post-overlay,\n\t#pinned-post-checkbox ~ label #svgminus,\n\t#pinned-post-checkbox:checked ~ label #svgplus {\n\t\tdisplay: none;\n\t}\n\t#pinned-post-checkbox ~ label #svgplus,\n\t#pinned-post-checkbox:checked ~ label #svgminus {\n\t\tdisplay: block;\n\t}\n\t#pinned-post-checkbox ~ label::after {\n\t\tcontent: 'Show more';\n\t}\n\t#pinned-post-checkbox:checked ~ label::after {\n\t\tcontent: 'Show less';\n\t}\n`;\n\nconst rowStyles = (palette: Palette) => css`\n\tbackground: ${palette.border.pinnedPost};\n\theight: 32px;\n\tdisplay: flex;\n\talign-items: center;\n\tsvg {\n\t\tfill: ${neutral[100]};\n\t\theight: 32px;\n\t\tmargin-bottom: ${space[1]}px;\n\t}\n`;\n\nconst timeAgoStyles = css`\n\t${textSans.small({ fontWeight: 'bold' })};\n\tcolor: ${neutral[100]};\n\t${from.tablet} {\n\t\tmargin-left: 28px;\n\t}\n\tmargin-bottom: ${space[1]}px;\n`;\n\nconst overlayStyles = css`\n\tbackground-image: linear-gradient(\n\t\t0deg,\n\t\t${neutral[100]},\n\t\t${neutral[100]} 40%,\n\t\trgba(255, 255, 255, 0)\n\t);\n\theight: 80px;\n\tposition: absolute;\n\tbottom: 0;\n\twidth: 100%;\n\tdisplay: block;\n`;\n\nconst fakeButtonStyles = (palette: Palette) => css`\n\tdisplay: inline-flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tbox-sizing: border-box;\n\tborder: none;\n\tcursor: pointer;\n\ttransition: ${transitions.medium};\n\ttext-decoration: none;\n\twhite-space: nowrap;\n\t:disabled {\n\t\tcursor: not-allowed;\n\t}\n\t&:focus {\n\t\t${focusHalo};\n\t}\n\tbackground: ${palette.border.pinnedPost};\n\tmargin-left: 10px;\n\tposition: absolute;\n\tbottom: -24px;\n\t${textSans.medium({ fontWeight: 'bold' })};\n\theight: ${height.ctaMedium}px;\n\tmin-height: ${height.ctaMedium}px;\n\tpadding: 0 ${space[5]}px;\n\tborder-radius: ${height.ctaMedium}px;\n\tpadding-bottom: 2px;\n\tcolor: white;\n\t${from.tablet} {\n\t\tmargin-left: 60px;\n\t}\n`;\n\nconst collapsibleBody = css`\n\tmax-height: 40vh;\n\toverflow: hidden;\n`;\n\nconst buttonIcon = css`\n\tsvg {\n\t\tflex: 0 0 auto;\n\t\tdisplay: block;\n\t\tfill: white;\n\t\tposition: relative;\n\t\twidth: 24px;\n\t\theight: auto;\n\t\tmargin-left: -${space[1]}px;\n\t\tmargin-right: ${space[1]}px;\n\t}\n`;\n\ntype Props = {\n\tpinnedPost: Block;\n\tchildren: React.ReactNode;\n\tformat: ArticleFormat;\n};\n\nexport const PinnedPost = ({ pinnedPost, children, format }: Props) => {\n\tconst palette = decidePalette(format);\n\treturn (\n\t\t<div\n\t\t\tid=\"pinned-post\"\n\t\t\tcss={pinnedPostContainer(palette)}\n\t\t\tdata-gu-marker=\"pinned-post\"\n\t\t\tdata-component=\"pinned-post\"\n\t\t>\n\t\t\t<input\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\tcss={css`\n\t\t\t\t\tvisibility: hidden;\n\t\t\t\t\t${visuallyHidden};\n\t\t\t\t`}\n\t\t\t\tid=\"pinned-post-checkbox\"\n\t\t\t\tname=\"pinned-post-checkbox\"\n\t\t\t\ttabIndex={-1}\n\t\t\t\tkey=\"PinnedPostCheckbox\"\n\t\t\t/>\n\t\t\t<div css={rowStyles(palette)}>\n\t\t\t\t<SvgPinned />\n\t\t\t\t{pinnedPost.blockFirstPublished && (\n\t\t\t\t\t<time data-relativeformat=\"med\" css={timeAgoStyles}>\n\t\t\t\t\t\tFrom {timeAgo(pinnedPost.blockFirstPublished)}\n\t\t\t\t\t</time>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div id=\"collapsible-body\" css={collapsibleBody}>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t<div id=\"pinned-post-overlay\" css={overlayStyles} />\n\t\t\t<label\n\t\t\t\tcss={fakeButtonStyles(palette)}\n\t\t\t\thtmlFor=\"pinned-post-checkbox\"\n\t\t\t\tid=\"pinned-post-button\"\n\t\t\t>\n\t\t\t\t<>\n\t\t\t\t\t<span id=\"svgminus\" css={buttonIcon}>\n\t\t\t\t\t\t<SvgMinus />\n\t\t\t\t\t</span>\n\t\t\t\t\t<span id=\"svgplus\" css={buttonIcon}>\n\t\t\t\t\t\t<SvgPlus />\n\t\t\t\t\t</span>\n\t\t\t\t</>\n\t\t\t</label>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Placeholder.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":42,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":42,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":51,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":60,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":60,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":73,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":73,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":86,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":86,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":95,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":95,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":104,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":104,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Placeholder } from './Placeholder';\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 620px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Row = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Column = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport default {\n\tcomponent: Placeholder,\n\ttitle: 'Components/Placeholder',\n};\n\nexport const Basic = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Placeholder height={200} />\n\t\t</Container>\n\t);\n};\nBasic.story = { name: 'with 200px height' };\n\nexport const Square = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Placeholder height={200} width={200} />\n\t\t</Container>\n\t);\n};\nSquare.story = { name: 'with equal height and width' };\n\nexport const InARow = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Row>\n\t\t\t\t<Placeholder height={200} width={200} spaceLeft={2} />\n\t\t\t\t<Placeholder height={200} width={200} spaceLeft={2} />\n\t\t\t\t<Placeholder height={200} width={200} spaceLeft={2} />\n\t\t\t</Row>\n\t\t</Container>\n\t);\n};\nInARow.story = { name: 'with elements in a row' };\n\nexport const Stacked = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Column>\n\t\t\t\t<Placeholder height={200} spaceBelow={5} />\n\t\t\t\t<Placeholder height={200} spaceBelow={5} />\n\t\t\t\t<Placeholder height={200} spaceBelow={5} />\n\t\t\t</Column>\n\t\t</Container>\n\t);\n};\nStacked.story = { name: 'with elements stacked' };\n\nexport const Root = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Placeholder height={200} rootId=\"usedWithPortals\" />\n\t\t</Container>\n\t);\n};\nRoot.story = { name: 'with rootId set' };\n\nexport const NoShimmer = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Placeholder height={200} shouldShimmer={false} />\n\t\t</Container>\n\t);\n};\nNoShimmer.story = { name: 'without shimmer' };\n\nexport const Background = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<Placeholder\n\t\t\t\theight={200}\n\t\t\t\tshouldShimmer={true}\n\t\t\t\tbackgroundColor=\"#ffff00\"\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nBackground.story = { name: 'with backgroundColor set' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Placeholder.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":36,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":44,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css, keyframes } from '@emotion/react';\nimport { neutral, space } from '@guardian/source-foundations';\n\nconst BACKGROUND_COLOUR = neutral[93];\n\ntype Props = {\n\theight: number;\n\trootId?: string;\n\twidth?: number;\n\tspaceBelow?: 1 | 2 | 3 | 4 | 5 | 6 | 9;\n\tspaceLeft?: 1 | 2 | 3 | 4 | 5 | 6 | 9;\n\tshouldShimmer?: boolean;\n\tbackgroundColor?: string;\n};\n\nconst shimmer = keyframes`\n  0% {\n    background-position: -1500px 0;\n  }\n  100% {\n    background-position: 1500px 0;\n  }\n`;\n\nconst shimmerStyles = (backgroundColor: string) => css`\n\tanimation: ${shimmer} 2s infinite linear;\n\tbackground: linear-gradient(\n\t\tto right,\n\t\t${backgroundColor} 4%,\n\t\twhite 25%,\n\t\t${backgroundColor} 36%\n\t);\n\tbackground-size: 1500px 100%;\n`;\n\nexport const Placeholder = ({\n\theight,\n\trootId,\n\twidth,\n\tspaceBelow,\n\tspaceLeft,\n\tshouldShimmer = true,\n\tbackgroundColor = BACKGROUND_COLOUR,\n}: Props) => (\n\t<div\n\t\tid={rootId}\n\t\tcss={css`\n\t\t\tflex-grow: 1;\n\t\t`}\n\t\tdata-name=\"placeholder\"\n\t>\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\theight: ${height}px;\n\t\t\t\twidth: ${width ? `${width}px` : '100%'};\n\t\t\t\tmargin-bottom: ${spaceBelow && space[spaceBelow]}px;\n\t\t\t\tmargin-left: ${spaceLeft && space[spaceLeft]}px;\n\t\t\t\tbackground-color: ${backgroundColor};\n\n\t\t\t\t${shouldShimmer && shimmerStyles(backgroundColor)}\n\t\t\t`}\n\t\t/>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ProfileAtomWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":62}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ProfileAtom } from '@guardian/atoms-rendering';\nimport type { ProfileAtomType } from '@guardian/atoms-rendering/dist/types/types';\n\nexport const ProfileAtomWrapper = (props: ProfileAtomType) => {\n\treturn <ProfileAtom {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/PullQuoteBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":17,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":38,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":59,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":59,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":80,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":80,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":101,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":101,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":122,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":122,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":143,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":143,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":165,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":165,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":186,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":186,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":207,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":207,"endColumn":41},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":228,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":228,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":249,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":249,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":270,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":270,"endColumn":39},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":291,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":291,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":313,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":313,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":334,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":334,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { decidePalette } from '../lib/decidePalette';\nimport { ContainerLayout } from './ContainerLayout';\nimport { PullQuoteBlockComponent } from './PullQuoteBlockComponent';\n\nexport default {\n\tcomponent: PullQuoteBlockComponent,\n\ttitle: 'Components/PullQuoteBlockComponent',\n};\n\n// Inline\nexport const SportInline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nSportInline.story = {\n\tname: 'Sport, inline, Article',\n};\n\nexport const LabsInline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nLabsInline.story = {\n\tname: 'Labs, inline, Article',\n};\n\nexport const LifestyleInline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nLifestyleInline.story = {\n\tname: 'Lifestyle, inline, Article',\n};\n\nexport const CultureInline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nCultureInline.story = {\n\tname: 'Culture, inline, Article',\n};\n\nexport const NewsInline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nNewsInline.story = {\n\tname: 'News, inline, Article',\n};\n\nexport const OpinionInline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Comment}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nOpinionInline.story = {\n\tname: 'Opinion, inline, Comment',\n};\n\nexport const SpecialReportInline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nSpecialReportInline.story = {\n\tname: 'SpecialReport, inline, Article',\n};\n\n// Supporting\nexport const SportSupporting = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nSportSupporting.story = {\n\tname: 'Sport, supporting, Article',\n};\n\nexport const LabsSupporting = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nLabsSupporting.story = {\n\tname: 'Labs, supporting, Article',\n};\n\nexport const LifestyleSupporting = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nLifestyleSupporting.story = {\n\tname: 'Lifestyle, supporting, Article',\n};\n\nexport const CultureSupporting = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nCultureSupporting.story = {\n\tname: 'Culture, supporting, Article',\n};\n\nexport const NewsSupporting = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nNewsSupporting.story = {\n\tname: 'News, supporting, Article',\n};\n\nexport const OpinionSupporting = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Comment}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nOpinionSupporting.story = {\n\tname: 'Opinion, supporting, Comment',\n};\n\nexport const SpecialReportSupporting = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.Standard}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nSpecialReportSupporting.story = {\n\tname: 'SpecialReport, supporting, Article',\n};\n\n// PhotoEssay\nexport const PhotoEssayInline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.PhotoEssay}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.PhotoEssay,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"inline\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nPhotoEssayInline.story = {\n\tname: 'News, inline, PhotoEssay',\n};\n\nexport const PhotoEssaySupporting = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<PullQuoteBlockComponent\n\t\t\t\tdesign={ArticleDesign.PhotoEssay}\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.PhotoEssay,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t})}\n\t\t\t\thtml=\"Even if part of my job is filthy, I still love it – it’s my work\"\n\t\t\t\trole=\"supporting\"\n\t\t\t\tattribution=\"Julie-Lou Dubreuilh\"\n\t\t\t/>\n\t\t</ContainerLayout>\n\t);\n};\nPhotoEssaySupporting.story = {\n\tname: 'News, supporting, PhotoEssay',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/PullQuoteBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":162,"column":7,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":164,"endColumn":9},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":191,"column":7,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":193,"endColumn":9},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":239,"column":7,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":241,"endColumn":9}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport {\n\tfrom,\n\theadline,\n\tneutral,\n\ttext,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { unescapeData } from '../../lib/escapeData';\nimport { QuoteIcon } from './QuoteIcon';\n\nconst partiallyLeft = css`\n\twidth: 220px;\n\tmargin-left: -10px;\n\tmargin-right: 10px;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\tclear: left;\n\tfloat: left;\n\n\t${until.mobileMedium} {\n\t\twidth: 100%;\n\t}\n\n\t${from.leftCol} {\n\t\tmargin-left: -120px;\n\t}\n\n\t:after {\n\t\tleft: 10px;\n\t\tborder-radius: 0 0 25px;\n\n\t\t${from.leftCol} {\n\t\t\tborder-radius: 0 0 0 25px;\n\t\t\tleft: 0;\n\t\t\tmargin-left: 85px;\n\t\t}\n\t}\n`;\nconst fullyLeft = css`\n\tmargin-left: -10px;\n\tmargin-right: 10px;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\tclear: left;\n\tfloat: left;\n\n\t${until.mobileLandscape} {\n\t\twidth: 100%;\n\t}\n\t${from.mobileLandscape} {\n\t\twidth: 220px;\n\t}\n\t${from.leftCol} {\n\t\twidth: 140px;\n\t\tmargin-left: -150px;\n\t}\n\t${from.wide} {\n\t\twidth: 200px;\n\t\tmargin-left: -215px;\n\t}\n`;\n\nconst partiallyInline = css`\n\tmargin-left: 0;\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\tdisplay: block;\n\n\t${from.mobileLandscape} {\n\t\tmargin-left: -20px;\n\t}\n\t${from.phablet} {\n\t\tmargin-left: -10px;\n\t}\n\t${from.leftCol} {\n\t\tmargin-left: -38px;\n\t}\n\n\t:after {\n\t\tborder-radius: 0 0 25px;\n\t\tleft: 10px;\n\n\t\t${from.phablet} {\n\t\t\tleft: 10px;\n\t\t}\n\t\t${from.leftCol} {\n\t\t\tleft: 27px;\n\t\t}\n\t}\n`;\n\nconst fullyInline = css`\n\tmargin-left: -10px;\n\tdisplay: block;\n`;\n\nfunction decidePosition(role: string, design: ArticleDesign) {\n\tif (design === ArticleDesign.PhotoEssay) {\n\t\treturn role === 'supporting' ? fullyLeft : fullyInline;\n\t}\n\treturn role === 'supporting' ? partiallyLeft : partiallyInline;\n}\n\nfunction decideFont(role: string) {\n\tif (role === 'supporting') {\n\t\treturn css`\n\t\t\t${headline.xxsmall({ fontWeight: 'light' })};\n\t\t`;\n\t}\n\treturn css`\n\t\t${headline.xsmall({ fontWeight: 'light' })};\n\t`;\n}\n\nexport const PullQuoteBlockComponent: React.FC<{\n\thtml?: string;\n\tpalette: Palette;\n\tdesign: ArticleDesign;\n\trole: string;\n\tattribution?: string;\n}> = ({ html, palette, design, attribution, role }) => {\n\tif (!html) return <></>;\n\tswitch (design) {\n\t\tcase ArticleDesign.Editorial:\n\t\tcase ArticleDesign.Letter:\n\t\tcase ArticleDesign.Comment:\n\t\t\treturn (\n\t\t\t\t<aside\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tdecidePosition(role, design),\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t${headline.xxsmall({ fontWeight: 'light' })};\n\t\t\t\t\t\t\tline-height: 25px;\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t/* TODO: Source foundation doesn't have this colour, once it does, remove the hex below */\n\t\t\t\t\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\t\t\t\t\tbackground-color: #fbe6d5;\n\t\t\t\t\t\t\tpadding-top: 6px;\n\t\t\t\t\t\t\tpadding-bottom: 12px;\n\t\t\t\t\t\t\tmargin-bottom: 28px;\n\n\t\t\t\t\t\t\t:after {\n\t\t\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\t\t\twidth: 25px;\n\t\t\t\t\t\t\t\theight: 25px;\n\t\t\t\t\t\t\t\tbottom: -25px;\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\t/* TODO: Source foundation doesn't have this colour, once it does, remove the hex below */\n\t\t\t\t\t\t\t\t/* stylelint-disable-next-line color-no-hex */\n\t\t\t\t\t\t\t\tbackground-color: #fbe6d5;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<QuoteIcon colour={palette.fill.quoteIcon} />\n\t\t\t\t\t<blockquote\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tdisplay: inline;\n\t\t\t\t\t\t`}\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t__html: unescapeData(html),\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<footer>\n\t\t\t\t\t\t<cite>{attribution}</cite>\n\t\t\t\t\t</footer>\n\t\t\t\t</aside>\n\t\t\t);\n\t\tcase ArticleDesign.PhotoEssay:\n\t\t\treturn (\n\t\t\t\t<aside\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tdecidePosition(role, design),\n\t\t\t\t\t\tdecideFont(role),\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\tcolor: ${palette.text.pullQuote};\n\t\t\t\t\t\t\tline-height: 25px;\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\tpadding-left: 10px;\n\t\t\t\t\t\t\tpadding-right: 10px;\n\t\t\t\t\t\t\tpadding-top: 6px;\n\t\t\t\t\t\t\tpadding-bottom: 12px;\n\t\t\t\t\t\t\tmargin-bottom: 16px;\n\t\t\t\t\t\t`,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<QuoteIcon colour={palette.fill.quoteIcon} />\n\t\t\t\t\t<blockquote\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t__html: unescapeData(html),\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<footer>\n\t\t\t\t\t\t<cite\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tcolor: ${text.supporting};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{attribution}\n\t\t\t\t\t\t</cite>\n\t\t\t\t\t</footer>\n\t\t\t\t</aside>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn (\n\t\t\t\t<aside\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tdecidePosition(role, design),\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t${headline.xxsmall({ fontWeight: 'bold' })};\n\t\t\t\t\t\t\tline-height: 25px;\n\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\tbackground-color: ${neutral[97]};\n\t\t\t\t\t\t\tpadding-left: 10px;\n\t\t\t\t\t\t\tpadding-right: 10px;\n\t\t\t\t\t\t\tpadding-top: 6px;\n\t\t\t\t\t\t\tpadding-bottom: 12px;\n\t\t\t\t\t\t\tmargin-bottom: 1.75rem;\n\t\t\t\t\t\t\tcolor: ${palette.text.pullQuote};\n\n\t\t\t\t\t\t\t:after {\n\t\t\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\t\t\twidth: 25px;\n\t\t\t\t\t\t\t\theight: 25px;\n\t\t\t\t\t\t\t\tbottom: -25px;\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\tbackground-color: ${neutral[97]};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<QuoteIcon colour={palette.fill.quoteIcon} />\n\t\t\t\t\t<blockquote\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\tdisplay: inline;\n\t\t\t\t\t\t`}\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t__html: unescapeData(html),\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<footer>\n\t\t\t\t\t\t<cite\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tcolor: ${palette.text.pullQuoteAttribution};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{attribution}\n\t\t\t\t\t\t</cite>\n\t\t\t\t\t</footer>\n\t\t\t\t</aside>\n\t\t\t);\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/PulsingDot.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":38,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":49},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":45,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":47,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css, keyframes } from '@emotion/react';\nimport { storage } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\n\nconst dotStyles = (colour?: string) => css`\n\tcolor: ${colour && colour};\n\t:before {\n\t\tborder-radius: 62.5rem;\n\t\tdisplay: inline-block;\n\t\tposition: relative;\n\t\tbackground-color: currentColor;\n\t\twidth: 0.75em;\n\t\theight: 0.75em;\n\t\tcontent: '';\n\t\tmargin-right: 0.1875rem;\n\t\tvertical-align: initial;\n\t}\n`;\n\nconst livePulse = keyframes`\n    0% {opacity: 1;}\n    10% {opacity: .25;}\n    40% {opacity: 1;}\n    100% {opacity: 1;}\n`;\n\nconst animate = css`\n\tanimation: ${livePulse} 1s infinite;\n\t@media (prefers-reduced-motion: reduce) {\n\t\tanimation: none;\n\t}\n`;\n\ninterface Props {\n\tcolour?: string;\n}\n\nexport const PulsingDot = ({ colour }: Props) => {\n\tconst [shouldFlash, setShouldFlash] = useState(false);\n\n\tuseEffect(() => {\n\t\t// Respect the accessibility flag set here\n\t\t// https://www.theguardian.com/help/accessibility-help\n\n\t\tconst flashingPreference = storage.local.get(\n\t\t\t'gu.prefs.accessibility.flashing-elements',\n\t\t);\n\n\t\t// flashingPreference is null if no preference exists and explicitly\n\t\t// false when the reader has said they don't want flashing\n\t\tsetShouldFlash(flashingPreference !== false);\n\t}, []);\n\n\treturn <span css={[dotStyles(colour), shouldFlash && animate]} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/PulsingDot.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/QandaAtomWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { QandaAtom } from '@guardian/atoms-rendering';\nimport type { QandaAtomType } from '@guardian/atoms-rendering/dist/types/types';\n\nexport const QandaAtomWrapper = (props: QandaAtomType) => {\n\treturn <QandaAtom {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/QuoteIcon.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":18,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\n\nconst quoteStyles = (colour: string) => css`\n\theight: 1em;\n\twidth: 1.5em;\n\tmargin-right: 3px;\n\tvertical-align: baseline;\n\tfill: ${colour};\n`;\n\ntype Props = {\n\tcolour: string;\n};\n\n/**\n * An inline quote icon (“) sized to match the font size.\n */\nexport const QuoteIcon = ({ colour }: Props) => (\n\t/* This viewBox is narrower than Source’s SvgQuote */\n\t<svg viewBox=\"4 4 24 16\" css={quoteStyles(colour)}>\n\t\t<path d=\"M9.2776 8H14.0473C13.4732 12.5489 12.9653 17.0095 12.7445 22H4C4.79495 17.142 6.4511 12.5489 9.2776 8ZM20.3852 8H25.0887C24.5808 12.5489 24.0067 17.0095 23.7859 22H15.0635C15.9688 17.142 17.5587 12.5489 20.3852 8Z\" />\n\t</svg>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ReaderRevenueDev.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":72},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":18},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":31,"column":7,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":31,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":31,"column":7,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":31,"endColumn":32,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[781,806],"text":"window?.guardian"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":31,"column":17,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":31,"endColumn":32},{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to property where a void return was expected.","line":33,"column":24,"nodeType":"CallExpression","messageId":"voidReturnProperty","endLine":33,"endColumn":55},{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to property where a void return was expected.","line":34,"column":20,"nodeType":"CallExpression","messageId":"voidReturnProperty","endLine":34,"endColumn":47},{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to property where a void return was expected.","line":35,"column":22,"nodeType":"CallExpression","messageId":"voidReturnProperty","endLine":35,"endColumn":51},{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to property where a void return was expected.","line":36,"column":22,"nodeType":"CallExpression","messageId":"voidReturnProperty","endLine":36,"endColumn":51},{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to property where a void return was expected.","line":37,"column":26,"nodeType":"CallExpression","messageId":"voidReturnProperty","endLine":37,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect } from 'react';\nimport type { ReaderRevenueDevUtils } from '../lib/readerRevenueDevUtils';\n\ntype Props = {\n\tshouldHideReaderRevenue: boolean;\n};\n\nexport const ReaderRevenueDev = ({ shouldHideReaderRevenue }: Props) => {\n\tuseEffect(() => {\n\t\t// Used internally only, so only import each function on demand\n\t\tconst loadAndRun =\n\t\t\t<K extends keyof ReaderRevenueDevUtils>(key: K) =>\n\t\t\t(asExistingSupporter: boolean) =>\n\t\t\t\timport(\n\t\t\t\t\t/* webpackChunkName: \"readerRevenueDevUtils\" */ '../lib/readerRevenueDevUtils'\n\t\t\t\t)\n\t\t\t\t\t.then((utils) =>\n\t\t\t\t\t\tutils[key](\n\t\t\t\t\t\t\tasExistingSupporter,\n\t\t\t\t\t\t\tshouldHideReaderRevenue,\n\t\t\t\t\t\t),\n\t\t\t\t\t)\n\n\t\t\t\t\t.catch((error) =>\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t'Error loading readerRevenueDevUtils',\n\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\n\t\tif (window && window.guardian) {\n\t\t\twindow.guardian.readerRevenue = {\n\t\t\t\tchangeGeolocation: loadAndRun('changeGeolocation'),\n\t\t\t\tshowMeTheEpic: loadAndRun('showMeTheEpic'),\n\t\t\t\tshowMeTheBanner: loadAndRun('showMeTheBanner'),\n\t\t\t\tshowNextVariant: loadAndRun('showNextVariant'),\n\t\t\t\tshowPreviousVariant: loadAndRun('showPreviousVariant'),\n\t\t\t};\n\t\t}\n\t}, [shouldHideReaderRevenue]);\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ReaderRevenueLinks.importable.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":210,"column":53,"nodeType":"Identifier","messageId":"invalidType","endLine":210,"endColumn":58},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":212,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":212,"endColumn":16},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":225,"column":6,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":225,"endColumn":25},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":278,"column":0,"nodeType":null,"endLine":278,"endColumn":58},{"ruleId":"eslint-comments/no-unused-disable","message":"'react-hooks/exhaustive-deps' rule is disabled but never reported.","line":278,"column":31,"severity":1,"nodeType":null,"fix":{"range":[6041,6096],"text":" "},"suggestions":[{"desc":"Remove `eslint-disable` comment.","fix":{"range":[6041,6096],"text":""}}],"endLine":278,"endColumn":58},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":285,"column":0,"nodeType":null,"endLine":285,"endColumn":58},{"ruleId":"eslint-comments/no-unused-disable","message":"'react-hooks/exhaustive-deps' rule is disabled but never reported.","line":285,"column":31,"severity":1,"nodeType":null,"fix":{"range":[6224,6279],"text":" "},"suggestions":[{"desc":"Remove `eslint-disable` comment.","fix":{"range":[6224,6279],"text":""}}],"endLine":285,"endColumn":58},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":361,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":368,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":377,"column":24,"nodeType":"Punctuator","messageId":"preferNullish","endLine":377,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8492,8494],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":380,"column":6,"nodeType":"MemberExpression","messageId":"unexpected","endLine":380,"endColumn":19},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":380,"column":51,"nodeType":"Identifier","messageId":"invalidType","endLine":380,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":2,"source":"import { css } from '@emotion/react';\nimport type { OphanABTestMeta, OphanComponentEvent } from '@guardian/libs';\nimport { getCookie } from '@guardian/libs';\nimport {\n\tbrandAlt,\n\tbrandText,\n\tfrom,\n\theadline,\n\tneutral,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { getHeader } from '@guardian/support-dotcom-components';\nimport type {\n\tHeaderPayload,\n\tModuleData,\n\tModuleDataResponse,\n} from '@guardian/support-dotcom-components/dist/dotcom/src/types';\nimport { useEffect, useState } from 'react';\nimport ArrowRightIcon from '../../static/icons/arrow-right.svg';\nimport type { OphanRecordFunction } from '../browser/ophan/ophan';\nimport {\n\tgetOphanRecordFunction,\n\tsendOphanComponentEvent,\n\tsubmitComponentEvent,\n} from '../browser/ophan/ophan';\nimport { addTrackingCodesToUrl } from '../lib/acquisitions';\nimport {\n\tgetLastOneOffContributionDate,\n\tMODULES_VERSION,\n\tshouldHideSupportMessaging,\n} from '../lib/contributions';\nimport { getLocaleCode } from '../lib/getCountryCode';\nimport { setAutomat } from '../lib/setAutomat';\nimport { useIsInView } from '../lib/useIsInView';\nimport { useOnce } from '../lib/useOnce';\n\ntype Props = {\n\tedition: Edition;\n\tdataLinkNamePrefix: string;\n\tinHeader: boolean;\n\tremoteHeader: boolean;\n\tcontributionsServiceUrl: string;\n\turls: {\n\t\tsubscribe: string;\n\t\tsupport: string;\n\t\tcontribute: string;\n\t};\n};\n\nconst headerStyles = css`\n\tpadding-top: 39px;\n\tpadding-left: 10px;\n\tmax-width: 310px;\n\n\t${from.mobileMedium} {\n\t\tpadding-top: 44px;\n\t}\n\n\t${from.mobileLandscape} {\n\t\tpadding-left: ${space[5]}px;\n\t}\n\n\t${from.tablet} {\n\t\tpadding-top: ${space[1]}px;\n\t\tpadding-bottom: ${space[5]}px;\n\t\tpadding-left: ${space[5]}px;\n\t\tmax-width: 340px;\n\t}\n\n\t${from.desktop} {\n\t\tmax-width: none;\n\t}\n`;\n\nconst messageStyles = (isThankYouMessage: boolean) => css`\n\tcolor: ${brandAlt[400]};\n\t${headline.xxsmall({ fontWeight: 'bold' })};\n\tpadding-top: 3px;\n\tmargin-bottom: 3px;\n\n\t${from.desktop} {\n\t\t${headline.xsmall({ fontWeight: 'bold' })}\n\t}\n\n\t${from.leftCol} {\n\t\t${isThankYouMessage\n\t\t\t? headline.small({ fontWeight: 'bold' })\n\t\t\t: headline.medium({ fontWeight: 'bold' })}\n\t}\n`;\n\nconst linkStyles = css`\n\tbackground: ${brandAlt[400]};\n\tborder-radius: 16px;\n\tbox-sizing: border-box;\n\tcolor: ${neutral[7]};\n\tfloat: left;\n\t${textSans.small()};\n\tfont-weight: 700;\n\theight: 32px;\n\ttext-decoration: none;\n\tpadding: 6px 12px 0 12px;\n\tline-height: 18px;\n\tposition: relative;\n\tmargin-right: 10px;\n\tmargin-bottom: 6px;\n\n\t${from.mobileMedium} {\n\t\tpadding-right: 34px;\n\t}\n\n\tsvg {\n\t\tfill: currentColor;\n\t\tposition: absolute;\n\t\tright: 3px;\n\t\ttop: 50%;\n\t\theight: 32px;\n\t\twidth: 32px;\n\t\ttransform: translate(0, -50%);\n\t\ttransition: transform 0.3s ease-in-out;\n\n\t\t${until.mobileMedium} {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\t:hover svg {\n\t\ttransform: translate(3px, -50%);\n\t}\n`;\n\nconst hidden = css`\n\tdisplay: none;\n`;\n\nconst hiddenUntilTablet = css`\n\t${until.tablet} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst hiddenFromTablet = css`\n\t${from.tablet} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst subMessageStyles = css`\n\tcolor: ${brandText.primary};\n\t${textSans.medium()};\n\tmargin: 5px 0;\n`;\n\nconst ReaderRevenueLinksRemote: React.FC<{\n\tedition: Edition;\n\tcountryCode: string;\n\tpageViewId: string;\n\tcontributionsServiceUrl: string;\n\tophanRecord: OphanRecordFunction;\n}> = ({\n\tedition,\n\tcountryCode,\n\tpageViewId,\n\tcontributionsServiceUrl,\n\tophanRecord,\n}) => {\n\tconst [supportHeaderResponse, setSupportHeaderResponse] =\n\t\tuseState<ModuleData | null>(null);\n\tconst [SupportHeader, setSupportHeader] = useState<React.FC | null>(null);\n\n\tuseOnce((): void => {\n\t\tsetAutomat();\n\n\t\tconst requestData: HeaderPayload = {\n\t\t\ttracking: {\n\t\t\t\tophanPageId: pageViewId,\n\t\t\t\tplatformId: 'GUARDIAN_WEB',\n\t\t\t\treferrerUrl: window.location.origin + window.location.pathname,\n\t\t\t\tclientName: 'dcr',\n\t\t\t},\n\t\t\ttargeting: {\n\t\t\t\tshowSupportMessaging: !shouldHideSupportMessaging(),\n\t\t\t\tedition,\n\t\t\t\tcountryCode,\n\t\t\t\tmodulesVersion: MODULES_VERSION,\n\t\t\t\tmvtId: Number(\n\t\t\t\t\tgetCookie({ name: 'GU_mvt_id', shouldMemoize: true }),\n\t\t\t\t),\n\t\t\t\tlastOneOffContributionDate: getLastOneOffContributionDate(),\n\t\t\t},\n\t\t};\n\t\tgetHeader(contributionsServiceUrl, requestData)\n\t\t\t.then((response: ModuleDataResponse) => {\n\t\t\t\tif (!response.data) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tconst { module } = response.data;\n\t\t\t\tsetSupportHeaderResponse(module);\n\n\t\t\t\treturn window\n\t\t\t\t\t.guardianPolyfilledImport(module.url)\n\t\t\t\t\t.then((headerModule: { [key: string]: JSX.Element }) => {\n\t\t\t\t\t\tsetSupportHeader(() => headerModule[module.name]);\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst msg = `Error importing RR header links: ${error}`;\n\n\t\t\t\tconsole.log(msg);\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\tnew Error(msg),\n\t\t\t\t\t'rr-header-links',\n\t\t\t\t);\n\t\t\t});\n\t}, [countryCode]);\n\n\tif (SupportHeader && supportHeaderResponse) {\n\t\treturn (\n\t\t\t<div css={headerStyles}>\n\t\t\t\t{}\n\t\t\t\t<SupportHeader\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\tsubmitComponentEvent={(\n\t\t\t\t\t\tcomponentEvent: OphanComponentEvent,\n\t\t\t\t\t) => submitComponentEvent(componentEvent, ophanRecord)}\n\t\t\t\t\t{...supportHeaderResponse.props}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n\nconst ReaderRevenueLinksNative: React.FC<{\n\tedition: Edition;\n\tdataLinkNamePrefix: string;\n\tinHeader: boolean;\n\turls: {\n\t\tsubscribe: string;\n\t\tsupport: string;\n\t\tcontribute: string;\n\t};\n\tophanRecord: OphanRecordFunction;\n\tpageViewId: string;\n}> = ({\n\tedition,\n\tdataLinkNamePrefix,\n\tinHeader,\n\turls,\n\tophanRecord,\n\tpageViewId,\n}) => {\n\tconst hideSupportMessaging = shouldHideSupportMessaging();\n\n\t// Only the header component is in the AB test\n\tconst testName = inHeader ? 'RRHeaderLinks' : 'RRFooterLinks';\n\tconst campaignCode = `${testName}_control`;\n\tconst tracking: OphanABTestMeta = {\n\t\tabTestName: testName,\n\t\tabTestVariant: 'control',\n\t\tcomponentType: inHeader ? 'ACQUISITIONS_HEADER' : 'ACQUISITIONS_FOOTER',\n\t\tcampaignCode,\n\t};\n\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\tthreshold: 0,\n\t\tdebounce: true,\n\t});\n\n\tuseEffect(() => {\n\t\tif (!hideSupportMessaging && inHeader) {\n\t\t\tsendOphanComponentEvent('INSERT', tracking, ophanRecord);\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen && inHeader) {\n\t\t\tsendOphanComponentEvent('VIEW', tracking, ophanRecord);\n\t\t}\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [hasBeenSeen]);\n\n\tconst getUrl = (rrType: 'contribute' | 'subscribe'): string => {\n\t\tif (inHeader) {\n\t\t\treturn addTrackingCodesToUrl({\n\t\t\t\tbase: `https://support.theguardian.com/${rrType}`,\n\t\t\t\tcomponentType: 'ACQUISITIONS_HEADER',\n\t\t\t\tcomponentId: campaignCode,\n\t\t\t\tcampaignCode,\n\t\t\t\tabTest: {\n\t\t\t\t\tname: testName,\n\t\t\t\t\tvariant: 'control',\n\t\t\t\t},\n\t\t\t\tpageViewId,\n\t\t\t\treferrerUrl: window.location.origin + window.location.pathname,\n\t\t\t});\n\t\t}\n\t\treturn urls[rrType];\n\t};\n\n\tif (hideSupportMessaging) {\n\t\treturn (\n\t\t\t<div css={inHeader && headerStyles}>\n\t\t\t\t<div css={inHeader && hiddenUntilTablet}>\n\t\t\t\t\t<div css={messageStyles(true)}> Thank you </div>\n\t\t\t\t\t<div css={subMessageStyles}>\n\t\t\t\t\t\tYour support powers our independent journalism\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconst ContributeButton = () => (\n\t\t<a\n\t\t\tcss={linkStyles}\n\t\t\thref={getUrl('contribute')}\n\t\t\tdata-link-name={`${dataLinkNamePrefix}contribute-cta`}\n\t\t>\n\t\t\tContribute <ArrowRightIcon />\n\t\t</a>\n\t);\n\tconst SubscribeButton = () => (\n\t\t<a\n\t\t\tcss={linkStyles}\n\t\t\thref={getUrl('subscribe')}\n\t\t\tdata-link-name={`${dataLinkNamePrefix}subscribe-cta`}\n\t\t>\n\t\t\tSubscribe <ArrowRightIcon />\n\t\t</a>\n\t);\n\tconst PrimaryButton = edition === 'UK' ? SubscribeButton : ContributeButton;\n\tconst SecondaryButton =\n\t\tedition === 'UK' ? ContributeButton : SubscribeButton;\n\n\treturn (\n\t\t<div ref={setNode} css={inHeader && headerStyles}>\n\t\t\t<div css={inHeader && hiddenUntilTablet}>\n\t\t\t\t<div css={messageStyles(false)}>\n\t\t\t\t\t<span>Support the&nbsp;Guardian</span>\n\t\t\t\t</div>\n\t\t\t\t<div css={subMessageStyles}>\n\t\t\t\t\t<div>Available for everyone, funded by readers</div>\n\t\t\t\t</div>\n\t\t\t\t<PrimaryButton />\n\t\t\t\t<SecondaryButton />\n\t\t\t</div>\n\n\t\t\t<div css={inHeader ? hiddenFromTablet : hidden}>\n\t\t\t\t<PrimaryButton />\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport const ReaderRevenueLinks = ({\n\tedition,\n\tdataLinkNamePrefix,\n\tinHeader,\n\tremoteHeader,\n\turls,\n\tcontributionsServiceUrl,\n}: Props) => {\n\tconst [countryCode, setCountryCode] = useState<string>();\n\tconst pageViewId = window.guardian.config.ophan.pageViewId;\n\tconst ophanRecord = getOphanRecordFunction();\n\n\tuseEffect(() => {\n\t\tconst callFetch = () => {\n\t\t\tgetLocaleCode()\n\t\t\t\t.then((cc) => {\n\t\t\t\t\tsetCountryCode(cc || '');\n\t\t\t\t})\n\t\t\t\t.catch((e) =>\n\t\t\t\t\tconsole.error(`countryCodePromise - error: ${e}`),\n\t\t\t\t);\n\t\t};\n\t\tcallFetch();\n\t}, []);\n\n\tif (countryCode) {\n\t\tif (inHeader && remoteHeader) {\n\t\t\treturn (\n\t\t\t\t<ReaderRevenueLinksRemote\n\t\t\t\t\tedition={edition}\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tpageViewId={pageViewId}\n\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\tophanRecord={ophanRecord}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<ReaderRevenueLinksNative\n\t\t\t\tedition={edition}\n\t\t\t\tdataLinkNamePrefix={dataLinkNamePrefix}\n\t\t\t\tinHeader={inHeader}\n\t\t\t\turls={urls}\n\t\t\t\tophanRecord={ophanRecord}\n\t\t\t\tpageViewId={pageViewId}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ReaderRevenueLinks.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":33,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":55,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":55,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":77,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":77,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":99,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":99,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brandBackground } from '@guardian/source-foundations';\nimport { ReaderRevenueLinks } from './ReaderRevenueLinks.importable';\n\nexport default {\n\tcomponent: ReaderRevenueLinks,\n\ttitle: 'Components/ReaderRevenueLinks',\n};\n\nconst revenueUrls = {\n\tsubscribe: '',\n\tsupport: '',\n\tcontribute: '',\n};\n\nconst contributionsServiceUrl =\n\t'https://contributions.code.dev-guardianapis.com';\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin: 40px;\n\t\t\tpadding-top: 20px;\n\t\t\tpadding-left: 20px;\n\t\t\tpadding-bottom: 60px;\n\t\t\tbackground-color: ${brandBackground.primary};\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const Header = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ReaderRevenueLinks\n\t\t\t\tedition=\"UK\"\n\t\t\t\turls={revenueUrls}\n\t\t\t\tdataLinkNamePrefix=\"\"\n\t\t\t\tinHeader={true}\n\t\t\t\tremoteHeader={false}\n\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nHeader.story = {\n\tname: 'Header - desktop',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t\tchromatic: { viewports: [1300] },\n\t},\n};\n\nexport const HeaderMobile = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ReaderRevenueLinks\n\t\t\t\tedition=\"UK\"\n\t\t\t\turls={revenueUrls}\n\t\t\t\tdataLinkNamePrefix=\"\"\n\t\t\t\tinHeader={true}\n\t\t\t\tremoteHeader={false}\n\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nHeaderMobile.story = {\n\tname: 'Header - mobileMedium',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'mobileMedium' },\n\t\tchromatic: { viewports: [380] },\n\t},\n};\n\nexport const Footer = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ReaderRevenueLinks\n\t\t\t\tedition=\"UK\"\n\t\t\t\turls={revenueUrls}\n\t\t\t\tdataLinkNamePrefix=\"\"\n\t\t\t\tinHeader={false}\n\t\t\t\tremoteHeader={false}\n\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nFooter.story = {\n\tname: 'Footer - desktop',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t\tchromatic: { viewports: [1300] },\n\t},\n};\n\nexport const FooterMobile = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<ReaderRevenueLinks\n\t\t\t\tedition=\"UK\"\n\t\t\t\turls={revenueUrls}\n\t\t\t\tdataLinkNamePrefix=\"\"\n\t\t\t\tinHeader={false}\n\t\t\t\tremoteHeader={false}\n\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nFooterMobile.story = {\n\tname: 'Footer - mobileMedium',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'mobileMedium' },\n\t\tchromatic: { viewports: [380] },\n\t},\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ReaderRevenueLinks.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[276,279],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[276,279],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/require-await","severity":1,"message":"Async method 'getLocale' has no 'await' expression.","line":13,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingAwait","endLine":13,"endColumn":24},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":30,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":30,"endColumn":45},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":47,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":47,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render, wait } from '@testing-library/react';\nimport { shouldHideSupportMessaging as shouldHideSupportMessaging_ } from '../lib/contributions';\nimport { ReaderRevenueLinks } from './ReaderRevenueLinks.importable';\n\nconst shouldHideSupportMessaging: {\n\t[key: string]: any;\n} = shouldHideSupportMessaging_;\n\njest.mock('../lib/contributions', () => ({\n\tshouldHideSupportMessaging: jest.fn(() => true),\n}));\njest.mock('@guardian/libs', () => ({\n\tgetLocale: async () => {\n\t\treturn 'GB';\n\t},\n}));\n\nconst contributionsServiceUrl =\n\t'https://contributions.code.dev-guardianapis.com';\n\ndescribe('ReaderRevenueLinks', () => {\n\tconst urls = {\n\t\tcontribute: 'https://www.theguardian.com/contribute',\n\t\tsubscribe: 'https://www.theguardian.com/subscribe',\n\t\tsupport: 'https://www.theguardian.com/support',\n\t};\n\tconst edition: Edition = 'UK';\n\n\tit('should render thank you message if shouldHideSupportMessaging() returns true', async () => {\n\t\tshouldHideSupportMessaging.mockReturnValue(true);\n\n\t\tconst { getByText } = render(\n\t\t\t<ReaderRevenueLinks\n\t\t\t\turls={urls}\n\t\t\t\tedition=\"US\"\n\t\t\t\tdataLinkNamePrefix=\"nav2 : \"\n\t\t\t\tinHeader={true}\n\t\t\t\tremoteHeader={false}\n\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t/>,\n\t\t);\n\n\t\tawait wait(() => expect(getByText('Thank you')).toBeInTheDocument());\n\t});\n\n\tit('should render support message if shouldHideSupportMessaging() returns false', async () => {\n\t\tshouldHideSupportMessaging.mockReturnValue(false);\n\n\t\tconst { getByText } = render(\n\t\t\t<ReaderRevenueLinks\n\t\t\t\turls={urls}\n\t\t\t\tedition={edition}\n\t\t\t\tdataLinkNamePrefix=\"nav2 : \"\n\t\t\t\tinHeader={true}\n\t\t\t\tremoteHeader={false}\n\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t/>,\n\t\t);\n\n\t\tawait wait(() =>\n\t\t\texpect(getByText('Support the Guardian')).toBeInTheDocument(),\n\t\t);\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/RewrappedComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":6},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":57,"column":4,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":63,"endColumn":7},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":57,"column":11,"nodeType":"Identifier","messageId":"unsafeCall","endLine":57,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ClassNames } from '@emotion/react';\n// @ts-expect-error -- we’re actually using preact\nimport { jsx as _jsx } from 'react/jsx-runtime';\nimport type { HTMLTag } from 'src/model/unwrapHtml';\nimport { unescapeData } from '../../lib/escapeData';\nimport { recordLog } from '../lib/logging';\n\n/**\n * React requires a wrapping element for `dangerouslySetInnerHTML` so we\n * strip the original element markup and rewrap.\n *\n * The fallback case (`isUnwrapped == false`) is added for safety,\n * but should _never_ happen. We want to avoid an unnecessary `<span>` wrapper,\n * which can cause issues with ads and commercial JS (`spacefinder` rules).\n * Commercial expects `<p>` tags at the top level of the rewrapped element.\n */\nexport const RewrappedComponent = ({\n\tisUnwrapped,\n\thtml,\n\telCss,\n\ttagName,\n}: {\n\tisUnwrapped: boolean;\n\thtml: string;\n\telCss?: string;\n\ttagName: HTMLTag;\n}) => (\n\t<ClassNames>\n\t\t{({ css }) => {\n\t\t\tif (!isUnwrapped) {\n\t\t\t\tconst isDev = process.env.NODE_ENV !== 'production';\n\t\t\t\trecordLog({\n\t\t\t\t\tlabel: 'dotcom.dcr.isUnwrapped',\n\t\t\t\t\tisDev,\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tisUnwrapped: 'false',\n\t\t\t\t\t\thtml,\n\t\t\t\t\t\ttagName,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst element: HTMLTag = isUnwrapped ? tagName : 'span';\n\n\t\t\t// If we implement a span, we want to apply the CSS to the inner element\n\t\t\t// to ensure we still style correctly\n\t\t\tconst innerElCss = css`\n\t\t\t\t${tagName} {\n\t\t\t\t\t${elCss}\n\t\t\t\t}\n\t\t\t`;\n\n\t\t\tconst style = isUnwrapped ? elCss : innerElCss;\n\n\t\t\t// Create a react element from the tagName passed in OR\n\t\t\t// default to <span> if we've not been able to unwrap based on prefix & suffix\n\t\t\treturn _jsx(element, {\n\t\t\t\t// if style is `undefined`, it will be omitted\n\t\t\t\tclassName: style,\n\t\t\t\tdangerouslySetInnerHTML: {\n\t\t\t\t\t__html: unescapeData(html),\n\t\t\t\t},\n\t\t\t});\n\t\t}}\n\t</ClassNames>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/RichLink.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":27,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":64,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":64,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":107,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":107,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":147,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":147,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":187,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":187,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":230,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":230,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":272,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":272,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":315,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":315,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":359,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":359,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":396,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":396,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":439,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":439,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":476,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":476,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":520,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":520,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":557,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":557,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":594,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":594,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":632,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":632,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":669,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":669,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { ContainerLayout } from './ContainerLayout';\nimport { Figure } from './Figure';\nimport { RichLink } from './RichLink';\n\nconst someContributor =\n\t'https://i.guim.co.uk/img/uploads/2017/10/09/Oliver-Wainwright,-L.png?width=300&quality=85&auto=format&fit=max&s=e1aa270c46b716e34c4783ced3376cc9';\n\nconst someImageData = {\n\tthumbnailUrl:\n\t\t'https://i.guim.co.uk/img/media/268d42accabbe8168fdbdee51ad31ab2f156b211/137_0_2088_1253/master/2088.jpg?width=460&quality=85&auto=format&fit=max&s=cf5abc39fb2af7a56b10306df21ab8e6',\n\taltText: 'What a lovely arch in this image',\n\twidth: '1600',\n\theight: '900',\n};\n\nexport default {\n\tcomponent: RichLink,\n\ttitle: 'Components/RichLink',\n};\n\nexport const Article = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"news\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"article\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const Network = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"special-report\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"network\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\nNetwork.story = {\n\tparameters: {\n\t\tviewport: { defaultViewport: 'mobileMedium' },\n\t\tchromatic: { viewports: [380] },\n\t},\n};\n\nexport const SectionStory = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"live\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"section\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\nSectionStory.story = {\n\tname: 'Section',\n};\n\nexport const Inline = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"inline\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"external\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link when inline\"\n\t\t\t\t\tcontentType=\"section\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\nInline.story = {\n\tname: 'Inline',\n};\n\nexport const ImageContent = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"dead\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"imageContent\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\nImageContent.story = {\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t\tchromatic: { viewports: [1300] },\n\t},\n};\n\nexport const Interactive = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"feature\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"interactive\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\nInteractive.story = {\n\tparameters: {\n\t\tviewport: { defaultViewport: 'leftCol' },\n\t},\n};\n\nexport const Gallery = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"comment\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"gallery\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t\tcontributorImage={someContributor}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\nGallery.story = {\n\tparameters: {\n\t\tviewport: { defaultViewport: 'leftCol' },\n\t},\n};\n\nexport const Video = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"comment\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"video\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t\tcontributorImage={someContributor}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\nVideo.story = {\n\tparameters: {\n\t\tviewport: { defaultViewport: 'mobileMedium' },\n\t\tchromatic: { viewports: [380] },\n\t},\n};\n\nexport const Audio = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"podcast\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"audio\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const LiveBlog = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"media\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"liveBlog\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\nLiveBlog.story = {\n\tparameters: {\n\t\tviewport: { defaultViewport: 'mobileMedium' },\n\t\tchromatic: { viewports: [380] },\n\t},\n};\n\nexport const Tag = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"analysis\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"tag\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const Index = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"review\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"index\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: '',\n\t\t\t\t\t\t\ttype: 'Contributor',\n\t\t\t\t\t\t\ttitle: 'Contributor Name',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t\tstarRating={3}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const Crossword = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"letters\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"crossword\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const Survey = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"external\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"survey\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const Signup = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"comment\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"signup\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t\tcontributorImage={someContributor}\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const Userid = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"editorial\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"userid\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[]}\n\t\t\t\t\tsponsorName=\"\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n\nexport const PaidFor = () => {\n\treturn (\n\t\t<ContainerLayout centralBorder=\"full\">\n\t\t\t<Figure\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t\trole=\"richLink\"\n\t\t\t>\n\t\t\t\t<RichLink\n\t\t\t\t\trichLinkIndex={1}\n\t\t\t\t\tcardStyle=\"news\"\n\t\t\t\t\timageData={someImageData}\n\t\t\t\t\theadlineText=\"Rich link headline\"\n\t\t\t\t\tcontentType=\"userid\"\n\t\t\t\t\turl=\"\"\n\t\t\t\t\tlinkFormat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t}}\n\t\t\t\t\ttags={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'tone/advertisement-features',\n\t\t\t\t\t\t\ttype: '',\n\t\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t\tsponsorName=\"Sponsor name\"\n\t\t\t\t/>\n\t\t\t</Figure>\n\t\t</ContainerLayout>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/RichLink.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":201,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":215,"endColumn":13},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":226,"column":3,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":226,"endColumn":12},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":226,"column":3,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":227,"endColumn":25,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[4637,4674],"text":"imageData?.thumbnailUrl"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":230,"column":24,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":230,"endColumn":28},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":243,"column":33,"nodeType":"Literal","messageId":"alwaysTruthy","endLine":243,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport {\n\tbrandAltBackground,\n\tfrom,\n\theadline,\n\tneutral,\n\ttext,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport ArrowInCircle from '../../static/icons/arrow-in-circle.svg';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Avatar } from './Avatar';\nimport { Hide } from './Hide';\nimport { QuoteIcon } from './QuoteIcon';\nimport { StarRating } from './StarRating/StarRating';\n\ninterface Props {\n\trichLinkIndex: number;\n\tcardStyle: RichLinkCardType;\n\timageData: RichLinkImageData;\n\theadlineText: string;\n\tcontentType: ContentType;\n\turl: string;\n\tstarRating?: number;\n\tlinkFormat: ArticleFormat;\n\tformat: ArticleFormat;\n\ttags: TagType[];\n\tsponsorName: string;\n\tcontributorImage?: string;\n\tisPlaceholder?: boolean; // use 'true' for server-side default prior to client-side enrichment\n}\nexport interface RichLinkImageData {\n\tthumbnailUrl: string;\n\taltText: string;\n\twidth: string;\n\theight: string;\n}\n\nconst neutralBackground = css`\n\tbackground-color: ${neutral[97]};\n\ta {\n\t\tcolor: inherit;\n\t}\n\t:hover {\n\t\tbackground-color: ${neutral[93]};\n\t}\n`;\n\nconst pillarBackground = (palette: Palette) => {\n\treturn css`\n\t\tbackground-color: ${palette.background.richLink};\n\t`;\n};\n\nconst textColour = (palette: Palette) => {\n\treturn css`\n\t\tcolor: ${palette.text.richLink};\n\t`;\n};\n\nconst richLinkTopBorder = (palette: Palette) => {\n\treturn css`\n\t\tborder-top: 1px;\n\t\tborder-top-style: solid;\n\t\tborder-top-color: ${palette.border.richLink};\n\t`;\n};\n\nconst richLinkLink = css`\n\ttext-decoration: none;\n`;\n\nconst richLinkElements = css`\n\tpadding-top: 2px;\n\tpadding-right: 5px;\n\tpadding-left: 5px;\n\tpadding-bottom: 5px;\n`;\n\nconst richLinkHeader = css`\n\tpadding-bottom: 10px;\n\tcolor: ${neutral[0]};\n`;\n\nconst richLinkTitle = css`\n\t${headline.xxxsmall()};\n\tfont-size: 14px;\n\tpadding-top: 1px;\n\tpadding-bottom: 1px;\n\tfont-weight: 400;\n\t${from.wide} {\n\t\t${headline.xxsmall()};\n\t\tpadding-bottom: 5px;\n\t}\n`;\n\nconst labsRichLinkTitle = css`\n\t${from.wide} {\n\t\t${textSans.medium({ fontWeight: 'bold', lineHeight: 'regular' })}\n\t}\n\t${textSans.small({ fontWeight: 'bold', lineHeight: 'regular' })}\n`;\n\nconst richLinkReadMore = (palette: Palette) => {\n\treturn css`\n\t\tfill: ${palette.fill.richLink};\n\t\tcolor: ${palette.text.richLink};\n\t\tpadding-top: 2px;\n\t`;\n};\n\nconst readMoreTextStyle = css`\n\t${headline.xxxsmall()};\n\tfont-size: 14px;\n\t${from.wide} {\n\t\t${headline.xxxsmall()}\n\t\tline-height: 25px;\n\t}\n\tdisplay: inline-block;\n\theight: 30px;\n\tline-height: 25px;\n\tpadding-left: 4px;\n\tvertical-align: top;\n\tfont-weight: 500;\n\ttext-decoration: none;\n`;\n\nconst labsReadMoreTextStyle = css`\n\t${textSans.medium({ fontWeight: 'regular' })}\n\tdisplay: inline-block;\n\theight: 30px;\n\tline-height: 25px;\n\tpadding-left: 4px;\n\tvertical-align: top;\n\ttext-decoration: none;\n\tcolor: ${neutral[7]};\n`;\n\nconst byline = css`\n\t${headline.xxxsmall()};\n\tfont-size: 14px;\n\tfont-style: italic;\n\t${from.wide} {\n\t\t${headline.xxsmall()};\n\t}\n`;\n\nconst contributorImageWrapper = css`\n\twidth: 5rem;\n\theight: 5rem;\n\tmargin-left: auto;\n\tmargin-right: 0.3rem;\n\t${from.wide} {\n\t\twidth: 8.5rem;\n\t\theight: 8.5rem;\n\t}\n\n\t/* TODO remove the default img styling in ArticleBody.tsx - do we need direct element styling? */\n\timg {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n`;\n\nconst paidForBranding = css`\n\t${textSans.xxsmall()};\n\tfont-weight: bold;\n\tcolor: ${text.supporting};\n`;\n\nconst starWrapper = css`\n\tbackground-color: ${brandAltBackground.primary};\n\tdisplay: inline-block;\n`;\n\nconst readMoreText: (contentType: string) => string = (contentType) => {\n\tswitch (contentType) {\n\t\tcase 'audio':\n\t\t\treturn 'Listen';\n\t\tcase 'gallery':\n\t\t\treturn 'View Gallery';\n\t\tcase 'video':\n\t\t\treturn 'Watch';\n\t\tdefault:\n\t\t\treturn 'Read more';\n\t}\n};\n\nconst getMainContributor: (tags: TagType[]) => string = (tags) => {\n\tconst contributorTags = tags.filter((t) => t.type === 'Contributor');\n\treturn contributorTags.length > 0 ? contributorTags[0].title : '';\n};\n\nconst imageStyles = css`\n\twidth: 100%;\n\theight: auto;\n`;\n\nexport const RichLink = ({\n\trichLinkIndex,\n\tcardStyle,\n\timageData,\n\theadlineText,\n\tcontentType,\n\turl,\n\tstarRating,\n\tlinkFormat,\n\tformat,\n\ttags,\n\tsponsorName,\n\tcontributorImage,\n\tisPlaceholder,\n}: Props) => {\n\tconst palette = decidePalette(linkFormat);\n\tconst linkText =\n\t\tcardStyle === 'letters' ? `${headlineText} | Letters ` : headlineText;\n\n\tconst imageCardStyles = ['news', 'letters', 'media', 'feature'];\n\tconst parentIsBlog =\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog;\n\n\tconst showImage =\n\t\timageData &&\n\t\timageData.thumbnailUrl &&\n\t\timageCardStyles.includes(cardStyle) &&\n\t\t!parentIsBlog;\n\tconst isPaidContent = tags\n\t\t? tags.filter((t) => t.id === 'tone/advertisement-features').length > 0\n\t\t: false;\n\tconst isOpinion = cardStyle === 'comment';\n\tconst mainContributor = getMainContributor(tags);\n\tconst isLabs = linkFormat.theme === ArticleSpecial.Labs;\n\n\treturn (\n\t\t<div\n\t\t\tdata-print-layout=\"hide\"\n\t\t\tdata-link-name={`rich-link-${richLinkIndex} | ${richLinkIndex}`}\n\t\t\tdata-component=\"rich-link\"\n\t\t\tcss={pillarBackground(palette)}\n\t\t\tdata-name={(isPlaceholder && 'placeholder') || ''}\n\t\t>\n\t\t\t<div css={neutralBackground}>\n\t\t\t\t<a css={richLinkLink} href={url}>\n\t\t\t\t\t<div css={richLinkTopBorder(palette)} />\n\t\t\t\t\t{showImage && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tcss={imageStyles}\n\t\t\t\t\t\t\t\tsrc={imageData.thumbnailUrl}\n\t\t\t\t\t\t\t\talt={imageData.altText}\n\t\t\t\t\t\t\t\twidth={imageData.width}\n\t\t\t\t\t\t\t\theight={imageData.height}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t\t<div css={richLinkElements}>\n\t\t\t\t\t\t<div css={richLinkHeader}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={isLabs ? labsRichLinkTitle : richLinkTitle}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{isOpinion && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"wide\">\n\t\t\t\t\t\t\t\t\t\t\t<QuoteIcon\n\t\t\t\t\t\t\t\t\t\t\t\tcolour={palette.fill.quoteIcon}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"wide\">\n\t\t\t\t\t\t\t\t\t\t\t<QuoteIcon\n\t\t\t\t\t\t\t\t\t\t\t\tcolour={palette.fill.quoteIcon}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{linkText}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{isOpinion && (\n\t\t\t\t\t\t\t\t<div css={[byline, textColour(palette)]}>\n\t\t\t\t\t\t\t\t\t{mainContributor}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{starRating && starRating > 0 && (\n\t\t\t\t\t\t\t\t<div css={starWrapper}>\n\t\t\t\t\t\t\t\t\t<StarRating\n\t\t\t\t\t\t\t\t\t\trating={starRating}\n\t\t\t\t\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{isPaidContent && sponsorName && (\n\t\t\t\t\t\t\t\t<div css={paidForBranding}>\n\t\t\t\t\t\t\t\t\tPaid for by {sponsorName}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{isOpinion && contributorImage && (\n\t\t\t\t\t\t\t<div css={contributorImageWrapper}>\n\t\t\t\t\t\t\t\t<Avatar\n\t\t\t\t\t\t\t\t\timageSrc={contributorImage}\n\t\t\t\t\t\t\t\t\timageAlt={mainContributor}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div css={richLinkReadMore(palette)}>\n\t\t\t\t\t\t\t<ArrowInCircle />\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={\n\t\t\t\t\t\t\t\t\tisLabs\n\t\t\t\t\t\t\t\t\t\t? labsReadMoreTextStyle\n\t\t\t\t\t\t\t\t\t\t: readMoreTextStyle\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{readMoreText(contentType)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/RichLinkComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":53,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":58,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport { decideFormat } from '../lib/decideFormat';\nimport { useApi } from '../lib/useApi';\nimport type { RichLinkImageData } from './RichLink';\nimport { RichLink } from './RichLink';\n\ntype Props = {\n\telement: RichLinkBlockElement;\n\tajaxUrl: string;\n\trichLinkIndex: number;\n\tformat: ArticleFormat;\n};\n\ninterface CAPIRichLinkType {\n\tcardStyle: RichLinkCardType;\n\tthumbnailUrl: string;\n\theadline: string;\n\tcontentType: ContentType;\n\turl: string;\n\ttags: TagType[];\n\tsponsorName: string;\n\tformat: CAPIFormat;\n\tstarRating?: number;\n\tcontributorImage?: string;\n\timageAsset: ImageAsset;\n}\ninterface ImageAsset {\n\tindex: number;\n\tfields: ImageAssetFields;\n\tmediaType: string;\n\turl: string;\n}\ninterface ImageAssetFields {\n\tdisplayCredit: string;\n\tsource: string;\n\tphotographer: string;\n\tisMaster: string;\n\taltText: string;\n\theight: string;\n\tcredit: string;\n\tmediaId: string;\n\twidth: string;\n}\n\nconst buildUrl: (element: RichLinkBlockElement, ajaxUrl: string) => string = (\n\telement,\n\tajaxUrl,\n) => {\n\tconst path = new URL(element.url).pathname;\n\treturn `${ajaxUrl}/embed/card${path}.json?dcr=true`;\n};\n\nexport const RichLinkComponent = ({\n\telement,\n\tajaxUrl,\n\trichLinkIndex,\n\tformat,\n}: Props) => {\n\tconst url = buildUrl(element, ajaxUrl);\n\tconst { data, error } = useApi<CAPIRichLinkType>(url);\n\n\tif (error) {\n\t\t// Send the error to Sentry\n\t\twindow.guardian.modules.sentry.reportError(error, 'rich-link');\n\t}\n\n\tif (data) {\n\t\tconst richLinkImageData: RichLinkImageData = {\n\t\t\tthumbnailUrl: data.thumbnailUrl,\n\t\t\taltText: data.imageAsset.fields.altText,\n\t\t\twidth: data.imageAsset.fields.width,\n\t\t\theight: data.imageAsset.fields.height,\n\t\t};\n\n\t\treturn (\n\t\t\t// This is the enhanced rich link rendered on the client\n\t\t\t<RichLink\n\t\t\t\trichLinkIndex={richLinkIndex}\n\t\t\t\tcardStyle={data.cardStyle}\n\t\t\t\timageData={richLinkImageData}\n\t\t\t\theadlineText={data.headline}\n\t\t\t\tcontentType={data.contentType}\n\t\t\t\turl={data.url}\n\t\t\t\tstarRating={data.starRating}\n\t\t\t\tlinkFormat={decideFormat(data.format)}\n\t\t\t\tformat={format}\n\t\t\t\ttags={data.tags}\n\t\t\t\tsponsorName={data.sponsorName}\n\t\t\t\tcontributorImage={data.contributorImage}\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst defaultFormat = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Standard,\n\t\t// We default to SpecialReport here purely because the greys of this theme\n\t\t// look better as the defaults\n\t\ttheme: ArticleSpecial.SpecialReport,\n\t};\n\n\treturn (\n\t\t// Render a default (basic) rich link on the server\n\t\t<RichLink\n\t\t\trichLinkIndex={richLinkIndex}\n\t\t\tcardStyle=\"news\"\n\t\t\timageData={{\n\t\t\t\tthumbnailUrl: '',\n\t\t\t\taltText: '',\n\t\t\t\twidth: '',\n\t\t\t\theight: '',\n\t\t\t}}\n\t\t\theadlineText={element.text}\n\t\t\tcontentType=\"article\"\n\t\t\turl={element.url}\n\t\t\tlinkFormat={defaultFormat}\n\t\t\tformat={defaultFormat}\n\t\t\ttags={[]}\n\t\t\tsponsorName=\"\"\n\t\t\tisPlaceholder={true}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/RightColumn.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":24,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":24,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { from, until } from '@guardian/source-foundations';\n\nconst hideBelowDesktop = css`\n\t${until.desktop} {\n\t\t/* below 980 */\n\t\tdisplay: none;\n\t}\n\n\t${from.desktop} {\n\t\t/* above 980 */\n\t\theight: 100%;\n\t\tdisplay: block;\n\t\tflex-basis: 300px;\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t}\n`;\n\ntype Props = {\n\tchildren: React.ReactNode;\n};\n\nexport const RightColumn = ({ children }: Props) => {\n\treturn <section css={hideBelowDesktop}>{children}</section>;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Score.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Score } from './Score';\n\nexport default {\n\tcomponent: Score,\n\ttitle: 'Components/Score',\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<>\n\t\t\t<Score score={0} />\n\t\t\t<Score score={1} />\n\t\t\t<Score score={2} />\n\t\t\t<Score score={3} />\n\t\t\t<Score score={4} />\n\t\t\t<Score score={5} />\n\t\t\t<Score score={6} />\n\t\t\t<Score score={7} />\n\t\t\t<Score score={8} />\n\t\t\t<Score score={9} />\n\t\t\t<Score score={10} />\n\t\t\t<Score score={11} />\n\t\t\t<p>^ We only go up to 10 at the moment 🤷‍♀</p>\n\t\t</>\n\t);\n};\nDefault.story = { name: 'default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Score.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { text } from '@guardian/source-foundations';\nimport { Eight } from './numbers/Eight';\nimport { Five } from './numbers/Five';\nimport { Four } from './numbers/Four';\nimport { Nine } from './numbers/Nine';\nimport { One } from './numbers/One';\nimport { Seven } from './numbers/Seven';\nimport { Six } from './numbers/Six';\nimport { Ten } from './numbers/Ten';\nimport { Three } from './numbers/Three';\nimport { Two } from './numbers/Two';\nimport { Zero } from './numbers/Zero';\n\ntype Props = {\n\tscore: number;\n};\n\nexport const Score = ({ score }: Props) => {\n\tconst ScoreStyles = ({ children }: { children: React.ReactNode }) => (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tposition: relative;\n\t\t\t\twidth: 3.75rem;\n\t\t\t\theight: 3.75rem;\n\t\t\t\tborder-radius: 1.875rem;\n\t\t\t\tborder: 0.0625rem solid ${text.primary};\n\n\t\t\t\tsvg {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t\tmargin: auto;\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n\n\tswitch (score) {\n\t\tcase 0:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Zero />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 1:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<One />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 2:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Two />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 3:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Three />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 4:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Four />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 5:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Five />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 6:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Six />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 7:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Seven />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 8:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Eight />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 9:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Nine />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t\tcase 10:\n\t\tdefault:\n\t\t\treturn (\n\t\t\t\t<ScoreStyles>\n\t\t\t\t\t<Ten />\n\t\t\t\t</ScoreStyles>\n\t\t\t);\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SeriesSectionLink.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":171,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":179,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tfrom,\n\theadline,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { interactiveLegacyClasses } from '../layouts/lib/interactiveLegacyStyling';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Badge } from './Badge';\nimport { Hide } from './Hide';\nimport { Island } from './Island';\nimport { PulsingDot } from './PulsingDot.importable';\n\ntype Props = {\n\tformat: ArticleFormat;\n\ttags: TagType[];\n\tsectionLabel: string;\n\tsectionUrl: string;\n\tguardianBaseURL: string;\n\tbadge?: BadgeType;\n\tisMatch?: boolean;\n};\n\nconst sectionLabelLink = css`\n\ttext-decoration: none;\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nconst rowBelowLeftCol = (format: ArticleFormat) => {\n\tif (\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog\n\t) {\n\t\treturn css`\n\t\t\tdisplay: inline-block;\n\t\t\tflex-direction: column;\n\n\t\t\t${from.tablet} {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t}\n\n\t\t\t${from.desktop} {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t}\n\t\t`;\n\t}\n\n\treturn css`\n\t\tflex-direction: column;\n\t\tdisplay: inline-block;\n\n\t\t${until.leftCol} {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t}\n\t`;\n};\n\nconst marginBottom = css`\n\tmargin-bottom: 5px;\n`;\n\nconst marginRight = css`\n\t${until.leftCol} {\n\t\tmargin-right: ${space[2]}px;\n\t}\n`;\n\nconst invertedStyle = css`\n\t/* Handle text wrapping onto a new line */\n\twhite-space: pre-wrap;\n\tbox-decoration-break: clone;\n\tline-height: 28px;\n\t${from.leftCol} {\n\t\tline-height: 28px;\n\t}\n\n\tpadding-right: ${space[1]}px;\n\tpadding-top: ${space[1]}px;\n\tpadding-bottom: ${space[3]}px;\n`;\n\nconst fontStyles = (format: ArticleFormat) => {\n\tswitch (format.theme) {\n\t\tcase ArticleSpecial.Labs:\n\t\t\tswitch (format.display) {\n\t\t\t\tcase ArticleDisplay.Immersive:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\t${textSans.large({ fontWeight: 'bold' })}\n\t\t\t\t\t\tline-height: 23px;\n\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\tline-height: 20px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tdefault:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\t${textSans.large()}\n\t\t\t\t\t\tline-height: 23px;\n\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\tline-height: 20px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t}\n\t\tdefault:\n\t\t\treturn css`\n\t\t\t\t${headline.xxxsmall({ fontWeight: 'bold' })}\n\t\t\t\t${from.wide} {\n\t\t\t\t\t${headline.xxsmall({ fontWeight: 'bold' })}\n\t\t\t\t}\n\t\t\t`;\n\t}\n};\n\nconst secondaryFontStyles = (format: ArticleFormat) => {\n\tif (format.theme === ArticleSpecial.Labs) {\n\t\treturn css`\n\t\t\t${textSans.medium({ fontWeight: 'regular' })}\n\t\t`;\n\t}\n\treturn css`\n\t\t${headline.xxxsmall({ fontWeight: 'regular' })}\n\t\tline-height: 20px;\n\t`;\n};\n\nconst displayBlock = css`\n\tdisplay: block;\n`;\n\nconst breakWord = css`\n\tword-break: break-word;\n`;\n\nconst titleBadgeWrapper = css`\n\tmargin-bottom: ${space[1]}px;\n\tmargin-top: ${space[1]}px;\n\tmargin-right: ${space[2]}px;\n`;\n\nconst sectionPadding = css`\n\tpadding-left: 10px;\n\t${from.mobileLandscape} {\n\t\tpadding-left: 18px;\n\t}\n\t${from.tablet} {\n\t\tpadding-left: ${space[1]}px;\n\t}\n`;\n\nconst immersiveTitleBadgeStyle = (palette: Palette) => css`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\tpadding-bottom: 0px;\n\tmax-width: max-content;\n\tline-height: 1.15;\n\t/* Offset parent container margins when Immersive */\n\tmargin-bottom: -10px;\n\tbackground-color: ${palette.background.seriesTitle};\n\tbox-shadow: -6px 0 0 0 ${palette.background.seriesTitle},\n\t\t6px 0 0 0 ${palette.background.seriesTitle};\n`;\n\nexport const SeriesSectionLink = ({\n\tformat,\n\ttags,\n\tsectionLabel,\n\tsectionUrl,\n\tguardianBaseURL,\n\tbadge,\n\tisMatch,\n}: Props) => {\n\tconst observerTag = tags.find(\n\t\t(tag) => tag.type === 'Publication' && tag.title === 'The Observer',\n\t);\n\tconst isCommentIsFree = tags.some(\n\t\t(tag) => tag.id === 'commentisfree/commentisfree',\n\t);\n\tconst seriesTag = tags.find(\n\t\t(tag) =>\n\t\t\ttag.type === 'Blog' ||\n\t\t\ttag.type === 'Series' ||\n\t\t\t(tag.type === 'Publication' && tag.title === 'The Observer'),\n\t);\n\n\t// If we have a tag, use it to show 2 section titles\n\t// Observer opinion (commentisfree) articles should prioritise\n\t// the publication tag over the commentisfree tag.\n\tconst tag = observerTag && isCommentIsFree ? observerTag : seriesTag;\n\n\tconst hasSeriesTag = tag && tag.type === 'Series';\n\n\tconst isLabs = format.theme === ArticleSpecial.Labs;\n\n\tconst palette = decidePalette(format);\n\n\tconst seriesTitleColour = isMatch\n\t\t? palette.text.seriesTitleWhenMatch\n\t\t: palette.text.seriesTitle;\n\n\tconst sectionTitleColour = isMatch\n\t\t? palette.text.seriesTitleWhenMatch\n\t\t: palette.text.sectionTitle;\n\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\tcase ArticleDesign.Letter: {\n\t\t\t\t\tif (tag) {\n\t\t\t\t\t\t// We have a tag, we're not immersive, show both series and section titles\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t// Sometimes the tags/titles are shown inline, sometimes stacked\n\t\t\t\t\t\t\t<div css={!badge && rowBelowLeftCol(format)}>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\thref={`${guardianBaseURL}/${tag.id}`}\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tsectionLabelLink,\n\t\t\t\t\t\t\t\t\t\tmarginRight,\n\t\t\t\t\t\t\t\t\t\tfontStyles(format),\n\t\t\t\t\t\t\t\t\t\tbreakWord,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${seriesTitleColour};\n\t\t\t\t\t\t\t\t\t\t\tbackground-color: ${palette\n\t\t\t\t\t\t\t\t\t\t\t\t.background.seriesTitle};\n\t\t\t\t\t\t\t\t\t\t\tbox-shadow: -6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t${palette.background\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.seriesTitle},\n\t\t\t\t\t\t\t\t\t\t\t\t6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t${palette.background\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.seriesTitle};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\tdata-component=\"series\"\n\t\t\t\t\t\t\t\t\tdata-link-name=\"article series\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>{tag.title}</span>\n\t\t\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"tablet\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\thref={`${guardianBaseURL}/${sectionUrl}`}\n\t\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\t\tsectionLabelLink,\n\t\t\t\t\t\t\t\t\t\t\tfontStyles(format),\n\t\t\t\t\t\t\t\t\t\t\tdisplayBlock,\n\t\t\t\t\t\t\t\t\t\t\tbreakWord,\n\t\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: ${palette.text\n\t\t\t\t\t\t\t\t\t\t\t\t\t.sectionTitle};\n\t\t\t\t\t\t\t\t\t\t\t\tbackground-color: ${palette\n\t\t\t\t\t\t\t\t\t\t\t\t\t.background.sectionTitle};\n\t\t\t\t\t\t\t\t\t\t\t\tbox-shadow: -6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${palette.background\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.seriesTitle},\n\t\t\t\t\t\t\t\t\t\t\t\t\t6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t${palette.background\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.seriesTitle};\n\t\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tdata-component=\"section\"\n\t\t\t\t\t\t\t\t\t\tdata-link-name=\"article section\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span>{sectionLabel}</span>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\t// There's no tag so fallback to section title\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div css={marginBottom}>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`${guardianBaseURL}/${sectionUrl}`}\n\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\tsectionLabelLink,\n\t\t\t\t\t\t\t\t\tmarginRight,\n\t\t\t\t\t\t\t\t\tfontStyles(format),\n\t\t\t\t\t\t\t\t\tbreakWord,\n\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\tcolor: ${sectionTitleColour};\n\t\t\t\t\t\t\t\t\t\tbackground-color: ${palette.background\n\t\t\t\t\t\t\t\t\t\t\t.sectionTitle};\n\t\t\t\t\t\t\t\t\t\tbox-shadow: -6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t\t${palette.background\n\t\t\t\t\t\t\t\t\t\t\t\t\t.seriesTitle},\n\t\t\t\t\t\t\t\t\t\t\t6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t\t${palette.background\n\t\t\t\t\t\t\t\t\t\t\t\t\t.seriesTitle};\n\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tdata-component=\"section\"\n\t\t\t\t\t\t\t\tdata-link-name=\"article section\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>{sectionLabel}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tif (hasSeriesTag || isLabs) {\n\t\t\t\t\t\tconst title = tag?.title ? tag.title : sectionLabel;\n\t\t\t\t\t\tconst linkExt = tag?.id ? tag.id : sectionUrl;\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={badge && immersiveTitleBadgeStyle(palette)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{badge && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\t\ttitleBadgeWrapper,\n\t\t\t\t\t\t\t\t\t\t\tsectionPadding,\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\timageUrl={badge.imageUrl}\n\t\t\t\t\t\t\t\t\t\t\tseriesTag={badge.seriesTag}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tsectionLabelLink,\n\t\t\t\t\t\t\t\t\t\tfontStyles(format),\n\t\t\t\t\t\t\t\t\t\tinvertedStyle,\n\t\t\t\t\t\t\t\t\t\tbreakWord,\n\t\t\t\t\t\t\t\t\t\t!badge && sectionPadding,\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${seriesTitleColour};\n\t\t\t\t\t\t\t\t\t\t\tbackground-color: ${palette\n\t\t\t\t\t\t\t\t\t\t\t\t.background.seriesTitle};\n\t\t\t\t\t\t\t\t\t\t\tbox-shadow: -6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t${palette.background\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.seriesTitle},\n\t\t\t\t\t\t\t\t\t\t\t\t6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t\t\t${palette.background\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.seriesTitle};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\thref={`${guardianBaseURL}/${linkExt}`}\n\t\t\t\t\t\t\t\t\tdata-component=\"series\"\n\t\t\t\t\t\t\t\t\tdata-link-name=\"article series\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>{title}</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\t// Immersives show nothing at all if there's no series tag\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard:\n\t\tdefault: {\n\t\t\tif (tag) {\n\t\t\t\t// We have a tag, we're not immersive, show both series and section titles\n\t\t\t\treturn (\n\t\t\t\t\t// Sometimes the tags/titles are shown inline, sometimes stacked\n\t\t\t\t\t<div css={!badge && rowBelowLeftCol(format)}>\n\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"desktop\">\n\t\t\t\t\t\t\t{format.design === ArticleDesign.LiveBlog && (\n\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tfontStyles(format),\n\t\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\t\tcolor: ${seriesTitleColour};\n\t\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t\t\t<PulsingDot />\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`${guardianBaseURL}/${tag.id}`}\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\tsectionLabelLink,\n\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\tcolor: ${seriesTitleColour};\n\t\t\t\t\t\t\t\t\tbackground-color: ${palette.background\n\t\t\t\t\t\t\t\t\t\t.seriesTitle};\n\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\tmarginRight,\n\t\t\t\t\t\t\t\tfontStyles(format),\n\t\t\t\t\t\t\t\tbreakWord,\n\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\tbox-shadow: -6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t${palette.background.seriesTitle},\n\t\t\t\t\t\t\t\t\t\t6px 0 0 0\n\t\t\t\t\t\t\t\t\t\t\t${palette.background.seriesTitle};\n\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\tdata-component=\"series\"\n\t\t\t\t\t\t\tdata-link-name=\"article series\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span>{tag.title}</span>\n\t\t\t\t\t\t</a>\n\n\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"tablet\">\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref={`${guardianBaseURL}/${sectionUrl}`}\n\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\tsectionLabelLink,\n\t\t\t\t\t\t\t\t\tsecondaryFontStyles(format),\n\t\t\t\t\t\t\t\t\tdisplayBlock,\n\t\t\t\t\t\t\t\t\tbreakWord,\n\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\tcolor: ${sectionTitleColour};\n\t\t\t\t\t\t\t\t\t\tbackground-color: ${palette.background\n\t\t\t\t\t\t\t\t\t\t\t.sectionTitle};\n\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tdata-component=\"section\"\n\t\t\t\t\t\t\t\tdata-link-name=\"article section\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span>{sectionLabel}</span>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</Hide>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\t\t\t// There's no tag so fallback to section title\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Hide when=\"above\" breakpoint=\"desktop\">\n\t\t\t\t\t\t{format.design === ArticleDesign.LiveBlog && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\tfontStyles(format),\n\t\t\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\t\t\tcolor: ${seriesTitleColour};\n\t\t\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t\t<PulsingDot />\n\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Hide>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`${guardianBaseURL}/${sectionUrl}`}\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tsectionLabelLink,\n\t\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\t\tcolor: ${sectionTitleColour};\n\t\t\t\t\t\t\t\tbackground-color: ${palette.background\n\t\t\t\t\t\t\t\t\t.sectionTitle};\n\t\t\t\t\t\t\t`,\n\t\t\t\t\t\t\tmarginRight,\n\t\t\t\t\t\t\tfontStyles(format),\n\t\t\t\t\t\t\tbreakWord,\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tdata-component=\"section\"\n\t\t\t\t\t\tdata-link-name=\"article section\"\n\t\t\t\t\t\tclassName={interactiveLegacyClasses.labelLink}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>{sectionLabel}</span>\n\t\t\t\t\t</a>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SetABTests.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":17,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":13},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":31,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":31,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { AB } from '@guardian/ab-core';\nimport type { CoreAPIConfig } from '@guardian/ab-core/dist/types';\nimport { getCookie, log } from '@guardian/libs';\nimport { getOphanRecordFunction } from '../browser/ophan/ophan';\nimport { tests } from '../experiments/ab-tests';\nimport { getCypressSwitches } from '../experiments/cypress-switches';\nimport { getForcedParticipationsFromUrl } from '../lib/getAbUrlHash';\nimport { setABTests } from '../lib/useAB';\n\ntype Props = {\n\tabTestSwitches: CoreAPIConfig['abTestSwitches'];\n\tforcedTestVariants?: CoreAPIConfig['forcedTestVariants'];\n\tisDev: boolean;\n\tpageIsSensitive: CoreAPIConfig['pageIsSensitive'];\n};\n\nexport const SetABTests = ({\n\tisDev,\n\tpageIsSensitive,\n\tabTestSwitches,\n\tforcedTestVariants,\n}: Props) => {\n\tconst mvtId = Number(\n\t\t(isDev &&\n\t\t\tgetCookie({ name: 'GU_mvt_id_local', shouldMemoize: true })) || // Simplify localhost testing by creating a different mvt id\n\t\t\tgetCookie({ name: 'GU_mvt_id', shouldMemoize: true }),\n\t);\n\tif (!mvtId) {\n\t\t// 0 is default and falsy here\n\n\t\tconsole.log('There is no MVT ID set, see SetABTests.importable.tsx');\n\t}\n\tconst ophanRecord = getOphanRecordFunction();\n\tconst windowHash = window.location.hash;\n\t// Get the forced switches to use for when running within cypress\n\t// Is empty object if not in cypress\n\tconst cypressAbSwitches = getCypressSwitches();\n\n\tconst ab = new AB({\n\t\tmvtId,\n\t\tpageIsSensitive,\n\t\tabTestSwitches: {\n\t\t\t...abTestSwitches,\n\t\t\t...cypressAbSwitches, // by adding cypress switches below CAPI, we can override any production switch in Cypress\n\t\t},\n\t\tarrayOfTestObjects: tests,\n\t\tophanRecord,\n\t\tforcedTestVariants: {\n\t\t\t...forcedTestVariants,\n\t\t\t...getForcedParticipationsFromUrl(windowHash),\n\t\t},\n\t});\n\tsetABTests(ab);\n\n\tconst allRunnableTests = ab.allRunnableTests(tests);\n\tab.trackABTests(allRunnableTests);\n\tab.registerImpressionEvents(allRunnableTests);\n\tab.registerCompleteEvents(allRunnableTests);\n\tlog('dotcom', 'AB tests initialised');\n\n\t// we don’t render anything\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ShadyPie.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":13,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":13,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const params = new URLSearchParams();\nparams.set(\n\t'acquisitionData',\n\tJSON.stringify({\n\t\tcomponentType: 'ACQUISITIONS_OTHER',\n\t\tsource: 'GUARDIAN_WEB',\n\t\tcampaignCode: 'shady_pie_open_2019',\n\t\tcomponentId: 'shady_pie_open_2019',\n\t}),\n);\nparams.set('INTCMP', 'shady_pie_open_2019');\n\nexport const ShadyPie = () => {\n\treturn (\n\t\t<a\n\t\t\thref={`https://support.theguardian.com/uk/subscribe/digital?${params.toString()}`}\n\t\t>\n\t\t\t<img\n\t\t\t\tsrc=\"https://uploads.guim.co.uk/2020/10/02/Digisubs_MPU_c1_my_opt.png\"\n\t\t\t\twidth=\"300\"\n\t\t\t\talt=\"\"\n\t\t\t/>\n\t\t</a>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ShareCount.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":64,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":64,"endColumn":66},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":73,"column":21,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":73,"endColumn":55,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1636,1670],"text":"shareData?.share_count"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { between, textSans, until } from '@guardian/source-foundations';\nimport { joinUrl } from '../../lib/joinUrl';\nimport ShareIcon from '../../static/icons/share.svg';\nimport { decidePalette } from '../lib/decidePalette';\nimport { formatCount } from '../lib/formatCount';\nimport { useApi } from '../lib/useApi';\n\ntype Props = {\n\tajaxUrl: string;\n\tpageId: string;\n\tformat: ArticleFormat;\n};\n\ntype ShareCountType = {\n\tpath: string;\n\tshare_count: number;\n\trefreshStatus: boolean;\n};\n\nconst containerStyles = (palette: Palette) => css`\n\tdisplay: flex;\n\talign-self: flex-end;\n\tflex-direction: column;\n\t${textSans.medium()};\n\tfont-weight: bold;\n\tcolor: ${palette.text.shareCount};\n\n\t${until.desktop} {\n\t\tcolor: ${palette.text.shareCountUntilDesktop};\n\t}\n`;\n\nconst iconContainerStyles = css`\n\theight: 15px;\n\tmargin: 0;\n\ttext-align: right;\n\tmargin-bottom: 3px;\n`;\n\nconst iconStyles = (palette: Palette) => css`\n\tfill: ${palette.fill.shareCountIcon};\n\t${until.desktop} {\n\t\tfill: ${palette.fill.shareCountIconUntilDesktop};\n\t}\n`;\n\nconst longStyles = css`\n\tdisplay: block;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst shortStyles = css`\n\tdisplay: none;\n\n\t${between.leftCol.and.wide} {\n\t\tdisplay: block;\n\t}\n`;\n\nexport const ShareCount = ({ ajaxUrl, pageId, format }: Props) => {\n\tconst shareUrl = joinUrl([ajaxUrl, 'sharecount', `${pageId}.json`]);\n\tconst palette = decidePalette(format);\n\tconst { data: shareData, error: shareError } =\n\t\tuseApi<ShareCountType>(shareUrl);\n\tif (shareError) {\n\t\twindow.guardian.modules.sentry.reportError(shareError, 'share-count');\n\t}\n\n\tconst shareCount = shareData && shareData.share_count;\n\tif (!shareCount || shareCount === 0) return null;\n\n\tconst { short, long } = formatCount(shareCount || 0);\n\n\treturn (\n\t\t<div\n\t\t\tcss={containerStyles(palette)}\n\t\t\taria-label={`${short} Shares`}\n\t\t\tdata-cy=\"share-counts\"\n\t\t>\n\t\t\t<div css={iconContainerStyles}>\n\t\t\t\t<ShareIcon css={iconStyles(palette)} />\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tdata-testid=\"long-share-count\"\n\t\t\t\tcss={longStyles}\n\t\t\t\taria-hidden=\"true\"\n\t\t\t>\n\t\t\t\t{long}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tdata-testid=\"short-share-count\"\n\t\t\t\tcss={shortStyles}\n\t\t\t\taria-hidden=\"true\"\n\t\t\t>\n\t\t\t\t{short}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ShareCount.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[265,268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[265,268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":18,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":18,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":22,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":22,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":42,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":42,"endColumn":25},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":60,"column":3,"nodeType":"MemberExpression","messageId":"unsafeCall","endLine":60,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { render } from '@testing-library/react';\nimport { useApi as useApi_ } from '../lib/useApi';\nimport { ShareCount } from './ShareCount.importable';\n\nconst useApi: { [key: string]: any } = useApi_;\n\njest.mock('../lib/useApi', () => ({\n\tuseApi: jest.fn(),\n}));\n\ndescribe('ShareCount', () => {\n\tconst ajaxUrl = 'https://api.nextgen.guardianapps.co.uk';\n\tconst pageId =\n\t\t'/environment/2020/jan/25/court-probe-carrie-symonds-influence-boris-johnson-badger-cull';\n\n\tbeforeEach(() => {\n\t\tuseApi.mockReset();\n\t});\n\n\tit('It should render null if share_count is zero', () => {\n\t\tuseApi.mockReturnValue({\n\t\t\tdata: { share_count: 0 },\n\t\t});\n\n\t\tconst { container } = render(\n\t\t\t<ShareCount\n\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\tpageId={pageId}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t/>,\n\t\t);\n\n\t\texpect(container.firstChild).toBeNull();\n\t});\n\n\tit('It should not render anything if there was a share count error', () => {\n\t\tuseApi.mockReturnValue({ error: { message: 'Bad' } });\n\n\t\tconst { container } = render(\n\t\t\t<ShareCount\n\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\tpageId={pageId}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t/>,\n\t\t);\n\n\t\texpect(container.firstChild).toBeNull();\n\t});\n\n\tit('It should format long share counts correctly', () => {\n\t\tuseApi.mockReturnValue({ data: { share_count: 25001 } });\n\n\t\tconst { getByTestId } = render(\n\t\t\t<ShareCount\n\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\tpageId={pageId}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t/>,\n\t\t);\n\n\t\texpect(getByTestId('long-share-count').innerHTML).toBe('25,001');\n\t\texpect(getByTestId('short-share-count').innerHTML).toBe('25k');\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ShareIcons.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":36,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":36,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { ShareIcons } from './ShareIcons';\n\nexport default {\n\tcomponent: ShareIcons,\n\ttitle: 'Components/ShareIcons',\n};\n\nconst defaultFormat = {\n\tdisplay: ArticleDisplay.Standard,\n\tdesign: ArticleDesign.Standard,\n\ttheme: ArticlePillar.News,\n};\n\nexport const Medium = () => {\n\treturn (\n\t\t<ShareIcons\n\t\t\tpageId=\"\"\n\t\t\twebTitle=\"\"\n\t\t\tdisplayIcons={[\n\t\t\t\t'facebook',\n\t\t\t\t'email',\n\t\t\t\t'linkedIn',\n\t\t\t\t'messenger',\n\t\t\t\t'twitter',\n\t\t\t\t'whatsApp',\n\t\t\t]}\n\t\t\tformat={defaultFormat}\n\t\t\tsize=\"medium\"\n\t\t\tcontext=\"LiveBlock\"\n\t\t/>\n\t);\n};\nMedium.story = { name: 'Medium' };\n\nexport const Small = () => {\n\treturn (\n\t\t<ShareIcons\n\t\t\tpageId=\"\"\n\t\t\twebTitle=\"\"\n\t\t\tdisplayIcons={[\n\t\t\t\t'facebook',\n\t\t\t\t'email',\n\t\t\t\t'linkedIn',\n\t\t\t\t'messenger',\n\t\t\t\t'twitter',\n\t\t\t\t'whatsApp',\n\t\t\t]}\n\t\t\tformat={defaultFormat}\n\t\t\tsize=\"small\"\n\t\t\tcontext=\"LiveBlock\"\n\t\t/>\n\t);\n};\nSmall.story = { name: 'Small' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/ShareIcons.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"URLSearchParams\" of template literal expression.","line":148,"column":16,"nodeType":"Identifier","messageId":"invalidType","endLine":148,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":156,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":164,"endColumn":13},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"URLSearchParams\" of template literal expression.","line":203,"column":49,"nodeType":"NewExpression","messageId":"invalidType","endLine":212,"endColumn":8},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"URLSearchParams\" of template literal expression.","line":267,"column":54,"nodeType":"NewExpression","messageId":"invalidType","endLine":274,"endColumn":8},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"URLSearchParams\" of template literal expression.","line":298,"column":33,"nodeType":"NewExpression","messageId":"invalidType","endLine":307,"endColumn":10},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"URLSearchParams\" of template literal expression.","line":332,"column":38,"nodeType":"NewExpression","messageId":"invalidType","endLine":339,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { from, until } from '@guardian/source-foundations';\nimport EmailIcon from '../../static/icons/email.svg';\nimport FacebookIcon from '../../static/icons/facebook.svg';\nimport LinkedInIcon from '../../static/icons/linked-in.svg';\nimport MessengerIcon from '../../static/icons/messenger.svg';\nimport TwitterIconPadded from '../../static/icons/twitter-padded.svg';\nimport WhatsAppIcon from '../../static/icons/whatsapp.svg';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Hide } from './Hide';\n\ntype Context = 'ArticleMeta' | 'LiveBlock' | 'SubMeta';\ntype ShareIconSize = 'small' | 'medium';\n\ntype Props = {\n\tpageId: string;\n\tblockId?: string;\n\twebTitle: string;\n\tdisplayIcons: SharePlatform[];\n\tformat: ArticleFormat;\n\tsize: ShareIconSize;\n\tcontext: Context;\n};\n\nconst ulStyles = css`\n\tfloat: left;\n\t${from.wide} {\n\t\tflex: auto;\n\t}\n`;\n\nconst liStyles = (size: ShareIconSize) => css`\n\tpadding-right: 3px;\n\tfloat: left;\n\tmin-width: ${size === 'small' ? '23px' : '32px'};\n\tcursor: pointer;\n`;\n\nconst topMarginStlyes = css`\n\tmargin-top: 3px;\n`;\n\nconst decideIconColor = (format: ArticleFormat, context: Context) => {\n\tconst palette = decidePalette(format);\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\tif (context === 'ArticleMeta') {\n\t\t\treturn css`\n\t\t\t\tfill: ${palette.fill.shareIconGrayBackground};\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tfill: ${palette.text.standfirst};\n\t\t\t\t}\n\t\t\t`;\n\t\t}\n\n\t\tif (context === 'SubMeta') {\n\t\t\treturn css`\n\t\t\t\tfill: ${palette.fill.shareIconGrayBackground};\n\t\t\t`;\n\t\t}\n\t}\n\tif (\n\t\tformat.design === ArticleDesign.DeadBlog &&\n\t\t(context === 'SubMeta' || context === 'ArticleMeta')\n\t) {\n\t\treturn css`\n\t\t\tfill: ${palette.fill.shareIconGrayBackground};\n\t\t`;\n\t}\n\treturn css`\n\t\tfill: ${palette.fill.shareIcon};\n\t`;\n};\n\nconst decideIconColorOnHover = (format: ArticleFormat, context: Context) => {\n\tconst palette = decidePalette(format);\n\tif (\n\t\t(format.design === ArticleDesign.LiveBlog ||\n\t\t\tformat.design === ArticleDesign.DeadBlog) &&\n\t\t(context === 'ArticleMeta' || context === 'SubMeta')\n\t) {\n\t\treturn css`\n\t\t\t:hover {\n\t\t\t\tbackground-color: ${palette.fill.shareIconGrayBackground};\n\t\t\t\tborder-color: ${palette.fill.shareIconGrayBackground};\n\t\t\t\tfill: white;\n\t\t\t}\n\t\t`;\n\t}\n\n\treturn css`\n\t\t:hover {\n\t\t\tbackground-color: ${palette.fill.shareIcon};\n\t\t\tborder-color: ${palette.fill.shareIcon};\n\t\t\tfill: white;\n\t\t}\n\t`;\n};\n\nconst iconStyles = ({\n\tpalette,\n\tsize,\n}: {\n\tpalette: Palette;\n\tsize: ShareIconSize;\n}) => css`\n\tborder: 1px solid ${palette.border.article};\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tmin-width: ${size === 'small' ? '23px' : '32px'};\n\tmax-width: 100%;\n\twidth: auto;\n\theight: ${size === 'small' ? '23px' : '32px'};\n\tborder-radius: 50%;\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tposition: relative;\n\tbox-sizing: content-box;\n\n\tsvg {\n\t\theight: 88%;\n\t\twidth: 88%;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tright: 0;\n\t\tleft: 0;\n\t\tmargin: auto;\n\t\tposition: absolute;\n\t}\n`;\n\nconst getUrl = ({\n\tpageId,\n\tCMP,\n\tblockId,\n}: {\n\tpageId: string;\n\tCMP?: string;\n\tblockId?: string;\n}) => {\n\tconst searchParams = new URLSearchParams({});\n\tif (CMP) searchParams.append('CMP', CMP);\n\tif (blockId) searchParams.append('page', `with:block-${blockId}`);\n\n\tconst blockHash = blockId ? `#block-${blockId}` : '';\n\treturn new URL(\n\t\t`${pageId}?${searchParams}${blockHash}`,\n\t\t'https://www.theguardian.com/',\n\t).href;\n};\n\nconst encodeTitle = (webTitle: string): string =>\n\twebTitle.replace(/Leave.EU/gi, 'Leave. EU');\n\nexport const ShareIcons = ({\n\tpageId,\n\tblockId,\n\twebTitle,\n\tdisplayIcons,\n\tformat,\n\tsize,\n\tcontext,\n}: Props) => {\n\tconst palette = decidePalette(format);\n\treturn (\n\t\t<ul css={ulStyles}>\n\t\t\t{displayIcons.includes('facebook') && (\n\t\t\t\t<li css={liStyles(size)} key=\"facebook\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`https://www.facebook.com/dialog/share?${new URLSearchParams(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tapp_id: '180444840287',\n\t\t\t\t\t\t\t\thref: getUrl({\n\t\t\t\t\t\t\t\t\tpageId,\n\t\t\t\t\t\t\t\t\tblockId,\n\t\t\t\t\t\t\t\t\tCMP: 'share_btn_fb',\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t).toString()}`}\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\taria-label=\"Share on Facebook\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\ticonStyles({ palette, size }),\n\t\t\t\t\t\t\t\tdecideIconColor(format, context),\n\t\t\t\t\t\t\t\tdecideIconColorOnHover(format, context),\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<FacebookIcon />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t)}\n\n\t\t\t{displayIcons.includes('twitter') && (\n\t\t\t\t<li css={liStyles(size)} key=\"twitter\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`https://twitter.com/intent/tweet?${new URLSearchParams(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: encodeTitle(webTitle),\n\t\t\t\t\t\t\t\turl: getUrl({\n\t\t\t\t\t\t\t\t\tpageId,\n\t\t\t\t\t\t\t\t\tblockId,\n\t\t\t\t\t\t\t\t\tCMP: 'share_btn_tw',\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\taria-label=\"Share on Twitter\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\ticonStyles({ palette, size }),\n\t\t\t\t\t\t\t\tdecideIconColor(format, context),\n\t\t\t\t\t\t\t\tdecideIconColorOnHover(format, context),\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TwitterIconPadded />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t)}\n\n\t\t\t{displayIcons.includes('email') && (\n\t\t\t\t<li css={liStyles(size)} key=\"email\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`mailto:?${new URLSearchParams({\n\t\t\t\t\t\t\tsubject: encodeTitle(webTitle),\n\t\t\t\t\t\t\tbody: getUrl({\n\t\t\t\t\t\t\t\tpageId,\n\t\t\t\t\t\t\t\tblockId,\n\t\t\t\t\t\t\t\tCMP: 'share_btn_link',\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t.replace(/\\+/g, '%20')}`}\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\taria-label=\"Share via Email\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\ticonStyles({ palette, size }),\n\t\t\t\t\t\t\t\tdecideIconColor(format, context),\n\t\t\t\t\t\t\t\tdecideIconColorOnHover(format, context),\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<EmailIcon />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t)}\n\n\t\t\t{displayIcons.includes('linkedIn') && (\n\t\t\t\t<li css={liStyles(size)} key=\"linkedIn\">\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`http://www.linkedin.com/shareArticle?=${new URLSearchParams(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttitle: encodeTitle(webTitle),\n\t\t\t\t\t\t\t\tmini: 'true',\n\t\t\t\t\t\t\t\t// TODO?: add &CMP=share_btn_*\n\t\t\t\t\t\t\t\turl: getUrl({ pageId, blockId }),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\taria-label=\"Share on LinkedIn\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\ticonStyles({ palette, size }),\n\t\t\t\t\t\t\t\tdecideIconColor(format, context),\n\t\t\t\t\t\t\t\tdecideIconColorOnHover(format, context),\n\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<LinkedInIcon />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</a>\n\t\t\t\t</li>\n\t\t\t)}\n\n\t\t\t{displayIcons.includes('whatsApp') && (\n\t\t\t\t<Hide when=\"above\" breakpoint=\"phablet\" el=\"li\" key=\"whatsApp\">\n\t\t\t\t\t<span css={[liStyles(size), topMarginStlyes]}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`whatsapp://send?${new URLSearchParams({\n\t\t\t\t\t\t\t\ttext: [\n\t\t\t\t\t\t\t\t\tencodeTitle(webTitle),\n\t\t\t\t\t\t\t\t\tgetUrl({\n\t\t\t\t\t\t\t\t\t\tpageId,\n\t\t\t\t\t\t\t\t\t\tblockId,\n\t\t\t\t\t\t\t\t\t\tCMP: 'share_btn_wa',\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t].join(' '),\n\t\t\t\t\t\t\t})}`}\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\taria-label=\"Share on WhatsApp\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\ticonStyles({ palette, size }),\n\t\t\t\t\t\t\t\t\tdecideIconColor(format, context),\n\t\t\t\t\t\t\t\t\tdecideIconColorOnHover(format, context),\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<WhatsAppIcon />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</Hide>\n\t\t\t)}\n\n\t\t\t{displayIcons.includes('messenger') && (\n\t\t\t\t<Hide when=\"above\" breakpoint=\"phablet\" el=\"li\" key=\"messenger\">\n\t\t\t\t\t<span css={[liStyles(size), topMarginStlyes]}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={`fb-messenger://share?${new URLSearchParams({\n\t\t\t\t\t\t\t\tlink: getUrl({\n\t\t\t\t\t\t\t\t\tpageId,\n\t\t\t\t\t\t\t\t\tblockId,\n\t\t\t\t\t\t\t\t\tCMP: 'share_btn_me',\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tapp_id: '180444840287',\n\t\t\t\t\t\t\t})}`}\n\t\t\t\t\t\t\trole=\"button\"\n\t\t\t\t\t\t\taria-label=\"Share on Messenger\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\trel=\"noreferrer\"\n\t\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\ticonStyles({ palette, size }),\n\t\t\t\t\t\t\t\t\tdecideIconColor(format, context),\n\t\t\t\t\t\t\t\t\tdecideIconColorOnHover(format, context),\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MessengerIcon />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</Hide>\n\t\t\t)}\n\t\t</ul>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/SignInGate.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":14,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":14,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":28,"endColumn":43},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":43,"endColumn":45},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":58,"column":47,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":58,"endColumn":52},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":76,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":76,"endColumn":42},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":90,"column":45,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":90,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ElementContainer } from '../ElementContainer';\nimport { SignInGateSelector } from '../SignInGateSelector.importable';\nimport { SignInGateFakeSocial } from './gateDesigns/SignInGateFakeSocial';\nimport { SignInGateMain } from './gateDesigns/SignInGateMain';\n\nexport default {\n\tcomponent: SignInGateSelector,\n\ttitle: 'Components/SignInGate',\n\tparameters: {\n\t\tchromatic: { diffThreshold: 0.2 },\n\t},\n};\n\nexport const mainStandalone = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<SignInGateMain\n\t\t\t\tguUrl=\"https://theguardian.com\"\n\t\t\t\tsignInUrl=\"https://profile.theguardian.com/\"\n\t\t\t\tdismissGate={() => {}}\n\t\t\t\tophanComponentId=\"test\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nmainStandalone.story = { name: 'main_standalone' };\n\nexport const mainStandaloneComment = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<SignInGateMain\n\t\t\t\tguUrl=\"https://theguardian.com\"\n\t\t\t\tsignInUrl=\"https://profile.theguardian.com/\"\n\t\t\t\tdismissGate={() => {}}\n\t\t\t\tophanComponentId=\"test\"\n\t\t\t\tisComment={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nmainStandaloneComment.story = { name: 'main_standalone_comment' };\n\nexport const mainStandaloneMandatory = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<SignInGateMain\n\t\t\t\tguUrl=\"https://theguardian.com\"\n\t\t\t\tsignInUrl=\"https://profile.theguardian.com/\"\n\t\t\t\tdismissGate={() => {}}\n\t\t\t\tophanComponentId=\"test\"\n\t\t\t\tisMandatory={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nmainStandaloneMandatory.story = { name: 'main_standalone_mandatory' };\n\nexport const mainStandaloneMandatoryComment = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<SignInGateMain\n\t\t\t\tguUrl=\"https://theguardian.com\"\n\t\t\t\tsignInUrl=\"https://profile.theguardian.com/\"\n\t\t\t\tdismissGate={() => {}}\n\t\t\t\tophanComponentId=\"test\"\n\t\t\t\tisMandatory={true}\n\t\t\t\tisComment={true}\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nmainStandaloneMandatoryComment.story = {\n\tname: 'main_standalone_mandatory_comment',\n};\n\nexport const fakeSocialStandalone = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<SignInGateFakeSocial\n\t\t\t\tguUrl=\"https://theguardian.com\"\n\t\t\t\tsignInUrl=\"https://profile.theguardian.com/\"\n\t\t\t\tdismissGate={() => {}}\n\t\t\t\tophanComponentId=\"test\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nfakeSocialStandalone.story = { name: 'fake_social_standalone' };\n\nexport const fakeSocialStandaloneVertical = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<SignInGateFakeSocial\n\t\t\t\tguUrl=\"https://theguardian.com\"\n\t\t\t\tsignInUrl=\"https://profile.theguardian.com/\"\n\t\t\t\tdismissGate={() => {}}\n\t\t\t\tophanComponentId=\"test\"\n\t\t\t\tabTest={{\n\t\t\t\t\tid: 'fake-social-test',\n\t\t\t\t\tname: 'fake-social-test',\n\t\t\t\t\tvariant: 'fake-social-variant-vertical',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nfakeSocialStandaloneVertical.story = {\n\tname: 'fake_social_standalone_vertical',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/componentEventTracking.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":35,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":5},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":43,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":45,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { OphanComponent, OphanComponentEvent } from '@guardian/libs';\nimport type { CurrentSignInGateABTest } from './types';\n\ntype ABTestVariant = {\n\tname: string;\n\tvariant: string;\n};\n\nconst isServer = typeof window === 'undefined';\n\nexport type ComponentEventParams = {\n\tcomponentType: string;\n\tcomponentId?: string;\n\tabTestName: string;\n\tabTestVariant: string;\n\tviewId?: string;\n\tbrowserId?: string;\n\tvisitId?: string;\n};\n\ntype ComponentEventWithoutAction = {\n\tcomponent: OphanComponent;\n\tvalue?: string;\n\tid?: string;\n\tabTest?: ABTestVariant;\n};\n\nconst ophan = isServer ? undefined : window.guardian.ophan;\n\n// ophan helper methods\nconst submitComponentEventTracking = (componentEvent: OphanComponentEvent) => {\n\tophan?.record({ componentEvent });\n};\n\nexport const submitViewEventTracking = (\n\tcomponentEvent: ComponentEventWithoutAction,\n) =>\n\tsubmitComponentEventTracking({\n\t\t...componentEvent,\n\t\taction: 'VIEW',\n\t});\n\nexport const submitClickEventTracking = (\n\tcomponentEvent: ComponentEventWithoutAction,\n) =>\n\tsubmitComponentEventTracking({\n\t\t...componentEvent,\n\t\taction: 'CLICK',\n\t});\n\nexport const withComponentId: (id: string) => OphanComponent = (id = '') => ({\n\tcomponentType: 'SIGN_IN_GATE',\n\tid,\n});\n\nexport const trackLink = (\n\tcomponentId: string,\n\tvalue: string,\n\tabTest?: CurrentSignInGateABTest,\n): void => {\n\tconst component = withComponentId(componentId);\n\n\tsubmitClickEventTracking({\n\t\tcomponent,\n\t\tabTest,\n\t\tvalue,\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/dismissGate.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/dismissGate.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[693,696],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[693,696],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":23,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":25,"endColumn":4},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":23,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[743,746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[743,746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":24,"column":42,"nodeType":"Punctuator","messageId":"preferNullish","endLine":24,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[804,806],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":28,"column":4,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":28,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[999,1002],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[999,1002],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":37,"column":57,"nodeType":"Property","messageId":"anyAssignment","endLine":37,"endColumn":69},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `string`.","line":97,"column":5,"nodeType":"MemberExpression","messageId":"unsafeArgument","endLine":97,"endColumn":55},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":118,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":119,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":118,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":118,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3911,3914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3911,3914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":122,"column":4,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":122,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// TODO: Add localstorage lib from https://github.com/guardian/libs/pull/1 when it is merged\nconst localStorageKey = `gu.prefs.sign-in-gate`;\n\n// We use this key for storing the date the gate was dismissed against\nconst localStorageDismissedDateKey = (\n\tvariant: string,\n\tname: string,\n): string => {\n\treturn `${name}-${variant}`;\n};\n\n// We use this key for storing the gate dismissed count against\nconst localStorageDismissedCountKey = (\n\tvariant: string,\n\tname: string,\n): string => {\n\treturn `gate-dismissed-count-${name}-${variant}`;\n};\n\n// Invalid json stored against `localStorageKey` should not break signin gate for a user forever\nconst getSigninGatePrefsSafely = (): { [key: string]: any } => {\n\ttry {\n\t\tconst prefs: { [key: string]: any } = JSON.parse(\n\t\t\tlocalStorage.getItem(localStorageKey) || '{}',\n\t\t);\n\n\t\tif (typeof prefs === 'object' && typeof prefs.value === 'object') {\n\t\t\treturn prefs.value;\n\t\t}\n\t\treturn {};\n\t} catch (e) {\n\t\treturn {};\n\t}\n};\n\nconst setSigninGatePrefs = (prefs: any) => {\n\tlocalStorage.setItem(localStorageKey, JSON.stringify({ value: prefs }));\n};\n\n// set in user preferences that the user has dismissed the gate, set the value to the current ISO date string\n// name is optional, but can be used to differentiate between multiple sign in gate tests\n//\n//\n// This is set in local storage with the following shape:\n//\n// key:   gu.prefs.sign-in-gate\n// value: {\"testVariantName\":\"2020-07-01T10:55:09.085Z\"}\n//\n// We set the value using the key, which remains constant\n// and add an entry to the object with the testname and variant, and use current ISO date string as the value\nexport const setUserDismissedGate = (variant: string, name: string): void => {\n\ttry {\n\t\tconst prefs = getSigninGatePrefsSafely();\n\t\tprefs[localStorageDismissedDateKey(variant, name)] =\n\t\t\tnew Date().toISOString();\n\t\tsetSigninGatePrefs(prefs);\n\t} catch (error) {\n\t\t// Alas, sometimes localstorage isn't available\n\t}\n};\n\nexport const unsetUserDismissedGate = (variant: string, name: string): void => {\n\ttry {\n\t\tconst prefs = getSigninGatePrefsSafely();\n\t\tdelete prefs[localStorageDismissedDateKey(variant, name)];\n\t\tsetSigninGatePrefs(prefs);\n\t} catch (error) {\n\t\t// Alas, sometimes localstorage isn't available\n\t}\n};\n\n// Check if the user has dismissed the gate by checking the user preferences,\n// name is optional, but can be used to differentiate between multiple sign in gate tests\n//\n// This is set in local storage with the following shape:\n//\n// key:   gu.prefs.sign-in-gate\n// value: {\"testVariantName\":\"2020-07-01T10:55:09.085Z\"}\n//\n// We extract the value using the key, which remains constant\n// and the from within the value object we look up the variant we are looking for\nexport const hasUserDismissedGate = (\n\tvariant: string,\n\tname: string,\n\twindow?: number, // represents hours - only use if the gate should reshow after X hrs (dismissal window)\n): boolean => {\n\ttry {\n\t\tconst prefs = getSigninGatePrefsSafely();\n\t\t// checks if a dismissal occurred within a given window timeframe in hours\n\t\tif (window) {\n\t\t\t// checks if prefs is empty, ie. the user has not dismissed gate before.\n\t\t\tif (!prefs[localStorageDismissedDateKey(variant, name)]) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst dismissalTZ = Date.parse(\n\t\t\t\tprefs[localStorageDismissedDateKey(variant, name)],\n\t\t\t);\n\t\t\tconst hours = (Date.now() - dismissalTZ) / 36e5; //  36e5 is the scientific notation for 60*60*1000, which converts the milliseconds difference into hours.\n\n\t\t\tif (hours >= window) {\n\t\t\t\tunsetUserDismissedGate(variant, name);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !!prefs[localStorageDismissedDateKey(variant, name)];\n\t} catch (error) {\n\t\t// Alas, sometimes localstorage isn't available. Please have a sign in gate as an apology\n\t\treturn false;\n\t}\n};\n\nconst retrieveDismissedCount = (variant: string, name: string): number => {\n\ttry {\n\t\tconst prefs = getSigninGatePrefsSafely();\n\t\tconst dismissed: any =\n\t\t\tprefs[localStorageDismissedCountKey(variant, name)];\n\n\t\tif (Number.isFinite(dismissed)) {\n\t\t\treturn dismissed;\n\t\t}\n\t\treturn 0;\n\t} catch (error) {\n\t\treturn 0;\n\t}\n};\n\n// Test whether the user has dismissed the gate variant more than `count` times\nexport const hasUserDismissedGateMoreThanCount = (\n\tvariant: string,\n\tname: string,\n\tcount: number,\n): boolean => {\n\treturn retrieveDismissedCount(variant, name) > count;\n};\n\n// Increment the number of times a user has dismissed this gate variant\nexport const incrementUserDismissedGateCount = (\n\tvariant: string,\n\tname: string,\n): void => {\n\ttry {\n\t\tconst prefs = getSigninGatePrefsSafely();\n\t\tprefs[localStorageDismissedCountKey(variant, name)] =\n\t\t\tretrieveDismissedCount(variant, name) + 1;\n\t\tsetSigninGatePrefs(prefs);\n\t} catch (error) {\n\t\t// localstorage isn't available so show the gate\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/displayRule.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/displayRule.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":13,"column":67,"nodeType":"Punctuator","messageId":"preferNullish","endLine":13,"endColumn":69,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[841,843],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// use the dailyArticleCount from the local storage to see how many articles the user has viewed in a day\nimport { onConsentChange } from '@guardian/consent-management-platform';\nimport type { ConsentState } from '@guardian/consent-management-platform/dist/types';\nimport { getLocale } from '@guardian/libs';\nimport type { DailyArticle } from '../../lib/dailyArticleCount';\nimport { getDailyArticleCount } from '../../lib/dailyArticleCount';\nimport { hasUserDismissedGateMoreThanCount } from './dismissGate';\nimport type { CanShowGateProps } from './types';\n\n// in our case if this is the n-numbered article or higher the user has viewed then set the gate\nexport const isNPageOrHigherPageView = (n = 2): boolean => {\n\t// get daily read article count array from local storage\n\tconst [dailyCount = {} as DailyArticle] = getDailyArticleCount() || [];\n\n\tconst { count = 0 } = dailyCount;\n\n\treturn count >= n;\n};\n\n// determine if the useragent is running iOS 9 (known to be buggy for sign in flow)\nexport const isIOS9 = (): boolean => {\n\t// get the browser user agent\n\tconst ua = navigator.userAgent;\n\t// check useragent if the device is an iOS device\n\tconst appleDevice = /(iPhone|iPod|iPad)/i.test(ua);\n\t// check useragent if the os is version 9\n\tconst os = /(CPU OS 9_)/i.test(ua);\n\n\t// if both true, then it's an apple ios 9 device\n\treturn appleDevice && os;\n};\n\n// hide the sign in gate on article types that are not supported\nexport const isValidContentType = (contentType: string): boolean => {\n\t// It's safer to definitively *include* types as we\n\t// know new types will not break the sign-in-gate going forward\n\tconst validTypes = ['Article'];\n\n\treturn validTypes.some((type: string): boolean => contentType === type);\n};\n\n// hide the sign in gate on certain sections of the site, e.g info, about, help etc.\nexport const isValidSection = (sectionName?: string): boolean => {\n\tconst invalidSections = [\n\t\t'about',\n\t\t'info',\n\t\t'membership',\n\t\t'help',\n\t\t'guardian-live-australia',\n\t\t'gnm-archive',\n\t];\n\n\t// we check for invalid section by reducing the above array, and then NOT the result so we know\n\t// its a valid section\n\treturn !invalidSections.some(\n\t\t(section: string): boolean => sectionName === section,\n\t);\n};\n\n// hide the sign in gate for certain tags on the site\nexport const isValidTag = (tags: TagType[]): boolean => {\n\tconst invalidTags = ['info/newsletter-sign-up'];\n\n\treturn !invalidTags.some((invalidTag) =>\n\t\ttags.map((tag) => tag.id).includes(invalidTag),\n\t);\n};\n\nexport const hasRequiredConsents = (): Promise<boolean> => {\n\tconst hasConsentedToAll = (state: ConsentState) => {\n\t\tconst consentFlags = state.tcfv2?.consents\n\t\t\t? Object.values(state.tcfv2.consents)\n\t\t\t: [];\n\t\tconst vendorConsentFlags = state.tcfv2?.vendorConsents\n\t\t\t? Object.values(state.tcfv2.vendorConsents)\n\t\t\t: [];\n\t\tconst isEmpty =\n\t\t\tconsentFlags.length === 0 || vendorConsentFlags.length === 0;\n\n\t\treturn (\n\t\t\t!isEmpty && [...consentFlags, ...vendorConsentFlags].every(Boolean)\n\t\t);\n\t};\n\n\treturn new Promise((resolve) => {\n\t\tonConsentChange((state) => {\n\t\t\tif (state.tcfv2) {\n\t\t\t\treturn resolve(hasConsentedToAll(state));\n\t\t\t}\n\n\t\t\tif (state.ccpa) {\n\t\t\t\treturn resolve(!state.ccpa.doNotSell);\n\t\t\t}\n\n\t\t\tif (state.aus) {\n\t\t\t\treturn resolve(state.aus.personalisedAdvertising);\n\t\t\t}\n\n\t\t\t// this shouldn't ever be hit, but this is here as safety\n\t\t\treturn resolve(false);\n\t\t});\n\t});\n};\n\nexport const canShowSignInGate = ({\n\tisSignedIn,\n\tcurrentTest,\n\tcontentType,\n\tsectionName,\n\ttags,\n\tisPaidContent,\n\tisPreview,\n}: CanShowGateProps): Promise<boolean> =>\n\tPromise.resolve(\n\t\t!isSignedIn &&\n\t\t\t!hasUserDismissedGateMoreThanCount(\n\t\t\t\tcurrentTest.variant,\n\t\t\t\tcurrentTest.name,\n\t\t\t\t5,\n\t\t\t) &&\n\t\t\tisNPageOrHigherPageView(3) &&\n\t\t\tisValidContentType(contentType) &&\n\t\t\tisValidSection(sectionName) &&\n\t\t\tisValidTag(tags) &&\n\t\t\t// hide the sign in gate on isPaidContent\n\t\t\t!isPaidContent &&\n\t\t\t// hide the sign in gate on internal tools preview &&\n\t\t\t!isPreview &&\n\t\t\t!isIOS9(),\n\t);\n\nexport const canShowMandatoryUs: ({\n\tisSignedIn,\n\tcurrentTest,\n\tcontentType,\n\tsectionName,\n\ttags,\n\tisPaidContent,\n\tisPreview,\n}: CanShowGateProps) => Promise<boolean> = async ({\n\tisSignedIn,\n\tcurrentTest,\n\tcontentType,\n\tsectionName,\n\ttags,\n\tisPaidContent,\n\tisPreview,\n}: CanShowGateProps) => {\n\treturn (\n\t\t(await getLocale()) === 'US' &&\n\t\t(await hasRequiredConsents()) &&\n\t\t(await canShowSignInGate({\n\t\t\tisSignedIn,\n\t\t\tcurrentTest,\n\t\t\tcontentType,\n\t\t\tsectionName,\n\t\t\ttags,\n\t\t\tisPaidContent,\n\t\t\tisPreview,\n\t\t}))\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/gateDesigns/SignInGateFakeSocial.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":284,"column":37,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":291,"endColumn":23},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":313,"column":5,"nodeType":"JSXElement","messageId":"missingType","endLine":322,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { cmp } from '@guardian/consent-management-platform';\nimport {\n\tfrom,\n\theadline,\n\tline,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { Button, Link, LinkButton } from '@guardian/source-react-components';\nimport { trackLink } from '../componentEventTracking';\nimport type { SignInGateProps } from '../types';\nimport {\n\tactionButtons,\n\tbodyBold,\n\tbodySeparator,\n\tbodyText,\n\tfaq,\n\tfirstParagraphOverlay,\n\thideElementsCss,\n\tlaterButton,\n\tprivacyLink,\n\tregisterButton,\n\tsignInGateContainer,\n\tsignInLink,\n} from './shared';\n\nconst heading = css`\n\t${headline.small({ fontWeight: 'bold' })};\n\tborder-top: 2px black solid;\n\tpadding-bottom: ${space[3]}px;\n\n\t${from.phablet} {\n\t\tpadding-right: 160px;\n\t\tmargin-bottom: ${space[9]}px;\n\t}\n`;\n\nconst inlineLink = css`\n\tmargin-left: ${space[4]}px;\n`;\n\nconst signInHeader = css`\n\tpadding-bottom: 0;\n`;\n\nconst buttonMargin = css`\n\tmargin-bottom: ${space[6]}px;\n`;\n\nconst bodyPadding = css`\n\t${from.phablet} {\n\t\tpadding-right: ${space[12]}px;\n\t}\n`;\n\nconst socialBox = (verticalStack = false) => css`\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-top: ${space[6]}px;\n\n\t${verticalStack &&\n\tcss`\n\t\t${until.tablet} {\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tpadding-right: 0 !important;\n\t\t\tflex-direction: column;\n\t\t\tmargin-top: ${space[5]}px;\n\t\t}\n\t`}\n`;\n\nconst fakeSocialSignInLink = css`\n\t/* stylelint-disable-next-line declaration-no-important */\n\tfont-weight: bold !important;\n\tmargin-left: 0;\n`;\n\nconst socialBoxText = css`\n\tflex: 1 0 auto;\n`;\n\nconst iconButton = (verticalStack = false) => css`\n\t:first-of-type {\n\t\tmargin-left: 0;\n\t}\n\tmargin-left: ${space[1]}px;\n\n\tflex: 1 1 100%;\n\t/* stylelint-disable-next-line declaration-no-important */\n\tjustify-content: center !important;\n\n\t${until.mobileMedium} {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tpadding: 0 12px !important;\n\t}\n\n\t${from.mobileMedium} {\n\t\tmargin-left: ${space[3]}px;\n\t}\n\n\t${until.tablet} {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tfont-size: 15px !important;\n\t}\n\n\t${from.tablet} {\n\t\t:first-of-type {\n\t\t\tmargin-left: ${space[4]}px;\n\t\t}\n\t}\n\n\tsvg {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\twidth: 15px !important;\n\n\t\t${from.mobileMedium} {\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\twidth: 20px !important;\n\t\t}\n\t}\n\n\t${verticalStack &&\n\tcss`\n\t\t${until.tablet} {\n\t\t\tmargin: ${space[1]}px 0;\n\t\t\twidth: 100%;\n\t\t}\n\t`}\n`;\n\nconst hideMobile = css`\n\t${until.tablet} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst showMobile = css`\n\t${from.tablet} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst separator = css`\n\tdisplay: flex;\n\talign-items: center;\n\ttext-align: center;\n\tmargin-top: ${space[4]}px;\n\n\t:before,\n\t:after {\n\t\tcontent: '';\n\t\tflex: 1;\n\t\tborder-bottom: 1px solid ${line.primary};\n\t}\n\n\t:not(:empty)::before {\n\t\tmargin-right: 0.25em;\n\t}\n\n\t:not(:empty)::after {\n\t\tmargin-left: 0.25em;\n\t}\n`;\n\nconst separatorText = css`\n\t${textSans.medium({ lineHeight: 'regular' })}\n`;\n\nconst facebookIcon = (\n\t<svg\n\t\twidth=\"20\"\n\t\theight=\"20\"\n\t\tviewBox=\"0 0 20 20\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M7.22779 4.65909V7.5H4.16663V10.6364H7.22779V20H10.9146V10.6364H13.9311L14.6014 7.5H10.9146V5C10.9146 3.61364 11.719 3.13636 12.7692 3.13636H14.6014L14.4897 0.159091C13.5736 0.0681818 12.8586 0 11.8084 0C9.19409 0 7.22779 1.65909 7.22779 4.65909Z\"\n\t\t\tfill=\"#1877F2\"\n\t\t/>\n\t</svg>\n);\n\nconst googleIcon = (\n\t<svg\n\t\twidth=\"20\"\n\t\theight=\"20\"\n\t\tviewBox=\"0 0 20 20\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M10.5 20C16.0228 20 20.5 15.5228 20.5 10C20.5 4.47715 16.0228 0 10.5 0C4.97715 0 0.5 4.47715 0.5 10C0.5 15.5228 4.97715 20 10.5 20Z\"\n\t\t\tfill=\"white\"\n\t\t/>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M3.82898 6.7425C4.14271 6.05241 4.58605 5.4503 5.10589 4.90546C6.28225 3.67247 7.70657 2.88285 9.3926 2.61353C11.7524 2.23654 13.8644 2.79299 15.6896 4.36455C15.8049 4.46387 15.8334 4.52191 15.708 4.6447C15.0638 5.27551 14.4298 5.91669 13.792 6.55411C13.7266 6.61947 13.6824 6.69929 13.5662 6.59278C11.9594 5.1205 9.3365 5.13727 7.62902 6.72519C7.04283 7.27036 6.62597 7.92369 6.35306 8.67262C6.31323 8.64655 6.27138 8.62325 6.23383 8.59437C5.43194 7.97748 4.6305 7.35989 3.82898 6.7425Z\"\n\t\t\tfill=\"#D7282A\"\n\t\t/>\n\t\t<mask\n\t\t\tid=\"mask0\"\n\t\t\tmask-type=\"alpha\"\n\t\t\tmaskUnits=\"userSpaceOnUse\"\n\t\t\tx=\"3\"\n\t\t\ty=\"11\"\n\t\t\twidth=\"13\"\n\t\t\theight=\"7\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M3.82251 11.6795H15.7829V17.8821H3.82251V11.6795Z\"\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t</mask>\n\t\t<g mask=\"url(#mask0)\">\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M6.33399 11.6795C6.56431 12.2645 6.85057 12.8177 7.27597 13.2875C8.35768 14.4821 9.6985 14.9974 11.305 14.8306C12.0514 14.7531 12.7315 14.5003 13.367 14.1119C13.4279 14.1664 13.486 14.2246 13.5502 14.2748C14.2939 14.8555 15.0386 15.4349 15.7829 16.0146C14.9621 16.7942 13.9929 17.3131 12.9028 17.5888C10.3323 18.2385 7.96285 17.8278 5.85884 16.1675C4.98899 15.481 4.3048 14.6331 3.82251 13.6294C4.65972 12.9794 5.49686 12.3294 6.33399 11.6795Z\"\n\t\t\t\tfill=\"#45AC43\"\n\t\t\t/>\n\t\t</g>\n\t\t<mask\n\t\t\tid=\"mask1\"\n\t\t\tmask-type=\"alpha\"\n\t\t\tmaskUnits=\"userSpaceOnUse\"\n\t\t\tx=\"10\"\n\t\t\ty=\"8\"\n\t\t\twidth=\"9\"\n\t\t\theight=\"9\"\n\t\t>\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M10.6722 8.73779H18.072V16.0146H10.6722V8.73779Z\"\n\t\t\t\tfill=\"white\"\n\t\t\t/>\n\t\t</mask>\n\t\t<g mask=\"url(#mask1)\">\n\t\t\t<path\n\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\tclipRule=\"evenodd\"\n\t\t\t\td=\"M15.783 16.0146C15.0387 15.4349 14.294 14.8555 13.5503 14.2749C13.4861 14.2247 13.4281 14.1664 13.3671 14.1119C13.8711 13.7272 14.2916 13.2723 14.5678 12.6943C14.6779 12.4639 14.7553 12.2227 14.8285 11.9788C14.8789 11.8107 14.8633 11.7452 14.6553 11.747C13.4164 11.7576 12.1775 11.7523 10.9385 11.7522C10.6761 11.7522 10.6758 11.752 10.6758 11.4807C10.6757 10.6409 10.6799 9.80116 10.6723 8.96142C10.6708 8.79948 10.6992 8.7373 10.8815 8.7378C13.1667 8.74445 15.4519 8.743 17.7372 8.7399C17.8605 8.73974 17.9381 8.74891 17.9595 8.89896C18.2438 10.8976 18.0159 12.8072 16.9698 14.5711C16.6495 15.1111 16.2647 15.6042 15.783 16.0146Z\"\n\t\t\t\tfill=\"#5D7FBE\"\n\t\t\t/>\n\t\t</g>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M6.33406 11.6795C5.49692 12.3295 4.65979 12.9795 3.82258 13.6294C3.41374 12.8694 3.17792 12.0528 3.06791 11.2023C2.87729 9.72876 3.08675 8.31101 3.71186 6.95895C3.74619 6.88467 3.78969 6.81465 3.8289 6.74255C4.63042 7.35986 5.43186 7.97745 6.23375 8.59434C6.2713 8.62322 6.31319 8.64652 6.35298 8.67259C6.01718 9.67291 6.03392 10.6753 6.33406 11.6795Z\"\n\t\t\tfill=\"#F4C300\"\n\t\t/>\n\t</svg>\n);\n\nconst appleIcon = (\n\t<svg\n\t\twidth=\"20\"\n\t\theight=\"20\"\n\t\tviewBox=\"0 0 20 20\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t<path\n\t\t\td=\"M15.1173 10.7533C15.1173 13.7106 18.1328 14.8684 18.1328 14.8684C17.4932 16.9092 16.2099 18.6073 14.3429 19.6658C13.0163 20.4178 11.4836 19.6658 9.85097 19.6658C8.21829 19.6658 6.68561 20.4178 5.35908 19.6658C2.58487 18.093 0.867188 14.1765 0.867188 10.7533C0.867188 7.77471 1.46602 6.31155 3.39656 5.31825C5.32711 4.32495 7.77481 5.9394 9.85097 5.9394C11.9271 5.9394 14.7709 4.14886 16.3054 5.31822C16.9019 5.77284 17.3439 6.23053 17.6712 6.7158C17.6712 6.7158 15.1173 7.79601 15.1173 10.7533Z\"\n\t\t\tfill=\"black\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M10.9888 2.23343C10.1198 3.4648 9.52522 5.80437 9.52522 5.80437C9.52522 5.80437 11.823 4.76878 12.6033 3.48044C13.3212 2.29499 13.2966 1.61225e-05 13.2966 1.61225e-05C13.2966 1.61225e-05 11.7119 1.20871 10.9888 2.23343Z\"\n\t\t\tfill=\"black\"\n\t\t/>\n\t</svg>\n);\n\nexport const SignInGateFakeSocial = ({\n\tsignInUrl,\n\tguUrl,\n\tdismissGate,\n\tabTest,\n\tophanComponentId,\n\tisComment,\n}: SignInGateProps) => {\n\tconst verticalButtonStack =\n\t\tabTest?.variant === 'fake-social-variant-vertical';\n\n\treturn (\n\t\t<div css={signInGateContainer} data-cy=\"sign-in-gate-fake-social\">\n\t\t\t<style>{hideElementsCss}</style>\n\t\t\t<div css={firstParagraphOverlay(!!isComment)} />\n\t\t\t<h1 css={[heading, bodyPadding]}>\n\t\t\t\tYou need to register to keep reading\n\t\t\t</h1>\n\t\t\t<h2 css={[bodySeparator, bodyBold, bodyPadding]}>\n\t\t\t\tIt’s still free to read - this is not a paywall\n\t\t\t</h2>\n\t\t\t<p css={[bodyText, bodyPadding]}>\n\t\t\t\tWe’re committed to keep our quality reporting open. By\n\t\t\t\tregistering and providing us with insight into your preferences,\n\t\t\t\tyou’re helping us to engage with you more deeply, and that allow\n\t\t\t\tus to keep our journalism free for all.\n\t\t\t</p>\n\t\t\t<p css={[bodyText, bodyPadding]}>\n\t\t\t\tYou’ll always be able to control your own&nbsp;\n\t\t\t\t<button\n\t\t\t\t\tdata-cy=\"sign-in-gate-fake-social_privacy\"\n\t\t\t\t\tcss={privacyLink}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tcmp.showPrivacyManager();\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'privacy', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tprivacy settings\n\t\t\t\t</button>{' '}\n\t\t\t\tand every article will remain free.\n\t\t\t</p>\n\t\t\t<div css={[actionButtons, buttonMargin, bodyPadding]}>\n\t\t\t\t<LinkButton\n\t\t\t\t\tdata-cy=\"sign-in-gate-fake-social_register\"\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\tcss={registerButton}\n\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\thref={signInUrl}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'register-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tRegister for free\n\t\t\t\t</LinkButton>\n\n\t\t\t\t<Button\n\t\t\t\t\tdata-cy=\"sign-in-gate-fake-social_dismiss\"\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\tcss={laterButton}\n\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tdismissGate();\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'not-now', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tI’ll do it later\n\t\t\t\t</Button>\n\t\t\t</div>\n\n\t\t\t<p css={[bodySeparator, bodyBold, signInHeader, bodyPadding]}>\n\t\t\t\tAlready registered?{' '}\n\t\t\t\t<Link\n\t\t\t\t\tdata-cy=\"sign-in-gate-fake-social_signin\"\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\tcss={[signInLink, inlineLink, fakeSocialSignInLink]}\n\t\t\t\t\thref={signInUrl}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'sign-in-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tSign In\n\t\t\t\t</Link>\n\t\t\t</p>\n\t\t\t<div css={[separator, separatorText, showMobile]}>\n\t\t\t\tor continue with\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tcss={[\n\t\t\t\t\tbodyBold,\n\t\t\t\t\tsignInHeader,\n\t\t\t\t\tbodyPadding,\n\t\t\t\t\tsocialBox(verticalButtonStack),\n\t\t\t\t]}\n\t\t\t>\n\t\t\t\t<span css={[hideMobile, socialBoxText]}>Or continue with</span>\n\t\t\t\t<LinkButton\n\t\t\t\t\tdata-cy=\"sign-in-gate-fake-social_facebook\"\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tcss={iconButton(verticalButtonStack)}\n\t\t\t\t\thref={signInUrl}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'facebook-button', abTest);\n\t\t\t\t\t}}\n\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\ticon={facebookIcon}\n\t\t\t\t>\n\t\t\t\t\tFacebook\n\t\t\t\t</LinkButton>\n\t\t\t\t<LinkButton\n\t\t\t\t\tdata-cy=\"sign-in-gate-fake-social_google\"\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tcss={iconButton(verticalButtonStack)}\n\t\t\t\t\thref={signInUrl}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'google-button', abTest);\n\t\t\t\t\t}}\n\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\ticon={googleIcon}\n\t\t\t\t>\n\t\t\t\t\tGoogle\n\t\t\t\t</LinkButton>\n\t\t\t\t<LinkButton\n\t\t\t\t\tdata-cy=\"sign-in-gate-fake-social_apple\"\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tcss={iconButton(verticalButtonStack)}\n\t\t\t\t\thref={signInUrl}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'apple-button', abTest);\n\t\t\t\t\t}}\n\t\t\t\t\ticonSide=\"left\"\n\t\t\t\t\ticon={appleIcon}\n\t\t\t\t>\n\t\t\t\t\tApple\n\t\t\t\t</LinkButton>\n\t\t\t</div>\n\n\t\t\t<div css={faq}>\n\t\t\t\t<Link\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\thref={`${guUrl}/membership/2019/dec/20/signing-in-to-the-guardian`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'how-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tWhy register & how does it help?\n\t\t\t\t</Link>\n\n\t\t\t\t<Link\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\thref={`${guUrl}/info/2014/nov/03/why-your-data-matters-to-us-full-text`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'why-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tHow will my information & data be used?\n\t\t\t\t</Link>\n\n\t\t\t\t<Link\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\thref={`${guUrl}/help/identity-faq`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'help-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tGet help with registering or signing in.\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/gateDesigns/SignInGateMain.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":22,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":23},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":45,"column":5,"nodeType":"JSXElement","messageId":"missingType","endLine":54,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { cmp } from '@guardian/consent-management-platform';\nimport { Button, Link, LinkButton } from '@guardian/source-react-components';\nimport { trackLink } from '../componentEventTracking';\nimport type { SignInGateProps } from '../types';\nimport {\n\tactionButtons,\n\tbodyBold,\n\tbodySeparator,\n\tbodyText,\n\tfaq,\n\tfirstParagraphOverlay,\n\theadingStyles,\n\thideElementsCss,\n\tlaterButton,\n\tprivacyLink,\n\tregisterButton,\n\tsignInGateContainer,\n\tsignInHeader,\n\tsignInLink,\n} from './shared';\n\nexport const SignInGateMain = ({\n\tsignInUrl,\n\tguUrl,\n\tdismissGate,\n\tabTest,\n\tophanComponentId,\n\tisComment,\n\tisMandatory = false,\n}: SignInGateProps) => {\n\treturn (\n\t\t<div css={signInGateContainer} data-cy=\"sign-in-gate-main\">\n\t\t\t<style>{hideElementsCss}</style>\n\t\t\t<div css={firstParagraphOverlay(!!isComment)} />\n\t\t\t<h1 css={headingStyles}>You need to register to keep reading</h1>\n\t\t\t<p css={bodyBold}>\n\t\t\t\tIt’s still free to read - this is not a paywall\n\t\t\t</p>\n\t\t\t<p css={bodyText}>\n\t\t\t\tWe’re committed to keeping our quality reporting open. By\n\t\t\t\tregistering and providing us with insight into your preferences,\n\t\t\t\tyou’re helping us to engage with you more deeply, and that\n\t\t\t\tallows us to keep our journalism free for all. You’ll always be\n\t\t\t\table to control your own{' '}\n\t\t\t\t<button\n\t\t\t\t\tdata-cy=\"sign-in-gate-main_privacy\"\n\t\t\t\t\tcss={privacyLink}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tcmp.showPrivacyManager();\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'privacy', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tprivacy settings\n\t\t\t\t</button>\n\t\t\t\t.\n\t\t\t</p>\n\t\t\t<div css={actionButtons}>\n\t\t\t\t<LinkButton\n\t\t\t\t\tdata-cy=\"sign-in-gate-main_register\"\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\tcss={registerButton}\n\t\t\t\t\tpriority=\"primary\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\thref={signInUrl}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'register-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tRegister for free\n\t\t\t\t</LinkButton>\n\t\t\t\t{!isMandatory && (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdata-cy=\"sign-in-gate-main_dismiss\"\n\t\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\t\tcss={laterButton}\n\t\t\t\t\t\tpriority=\"subdued\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tdismissGate();\n\t\t\t\t\t\t\ttrackLink(ophanComponentId, 'not-now', abTest);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\tI’ll do it later\n\t\t\t\t\t</Button>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<p css={[bodySeparator, bodyBold, signInHeader]}>\n\t\t\t\tHave a subscription? Made a contribution? Already registered?\n\t\t\t</p>\n\n\t\t\t<Link\n\t\t\t\tdata-cy=\"sign-in-gate-main_signin\"\n\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\tcss={signInLink}\n\t\t\t\thref={signInUrl}\n\t\t\t\tonClick={() => {\n\t\t\t\t\ttrackLink(ophanComponentId, 'sign-in-link', abTest);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\tSign In\n\t\t\t</Link>\n\n\t\t\t<div css={faq}>\n\t\t\t\t<Link\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\thref={`${guUrl}/membership/2019/dec/20/signing-in-to-the-guardian`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'how-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tWhy register & how does it help?\n\t\t\t\t</Link>\n\n\t\t\t\t<Link\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\thref={`${guUrl}/info/2014/nov/03/why-your-data-matters-to-us-full-text`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'why-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tHow will my information & data be used?\n\t\t\t\t</Link>\n\n\t\t\t\t<Link\n\t\t\t\t\tdata-ignore=\"global-link-styling\"\n\t\t\t\t\thref={`${guUrl}/help/identity-faq`}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\ttrackLink(ophanComponentId, 'help-link', abTest);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tGet help with registering or signing in\n\t\t\t\t</Link>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/gateDesigns/shared.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":126,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":126,"endColumn":61}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tbackground,\n\tbrand,\n\tfrom,\n\theadline,\n\tline,\n\topinion,\n\tspace,\n\ttext,\n\ttextSans,\n} from '@guardian/source-foundations';\n\nexport const signInGateContainer = css`\n\tmax-width: 617px;\n\n\t${from.desktop} {\n\t\tmin-height: 600px;\n\t}\n`;\n\nexport const headingStyles = css`\n\t${headline.small({ fontWeight: 'bold' })};\n\tborder-top: 2px black solid;\n\tpadding-bottom: ${space[12]}px;\n\n\t${from.phablet} {\n\t\tpadding-right: 160px;\n\t\t${headline.medium({ fontWeight: 'bold' })};\n\t}\n`;\n\nexport const bodySeparator = css`\n\tborder-top: 1px ${line.primary} solid;\n`;\n\nexport const bodyBold = css`\n\t${textSans.medium({ fontWeight: 'bold' })}\n\tpadding-bottom: 20px;\n\t${from.phablet} {\n\t\tpadding-right: 130px;\n\t}\n`;\n\nexport const bodyText = css`\n\t${textSans.medium({ lineHeight: 'regular' })}\n\tpadding-bottom: ${space[6]}px;\n\n\t${from.phablet} {\n\t\tpadding-right: 160px;\n\t}\n`;\n\nexport const signInHeader = css`\n\tpadding-bottom: 0;\n`;\n\nexport const actionButtons = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: flex-start;\n\tmargin-bottom: 42px;\n\n\t> a {\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\tmargin-right: ${space[4]}px !important;\n\n\t\t${from.mobileMedium} {\n\t\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\t\tmargin-right: ${space[9]}px !important;\n\t\t}\n\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\ttext-decoration: none !important;\n\t}\n`;\n\nexport const registerButton = css`\n\t/* stylelint-disable-next-line declaration-no-important */\n\tcolor: ${text.ctaPrimary} !important;\n`;\n\nexport const laterButton = css`\n\t/* stylelint-disable-next-line declaration-no-important */\n\tcolor: ${brand[400]} !important;\n`;\n\nexport const signInLink = css`\n\t/* stylelint-disable-next-line declaration-no-important */\n\tcolor: ${text.anchorPrimary} !important;\n\t/* stylelint-disable-next-line declaration-no-important */\n\ttext-decoration-color: ${line.primary} !important;\n\ttext-underline-position: under;\n`;\n\nexport const faq = css`\n\tpadding-top: ${space[3]}px;\n\tpadding-bottom: 18px;\n\tmargin-top: ${space[5]}px;\n\n\t& a {\n\t\tcolor: ${text.anchorPrimary};\n\t\tdisplay: block;\n\t\tmargin-bottom: ${space[4]}px;\n\t\ttext-decoration-color: ${line.primary};\n\t\ttext-underline-position: under;\n\t}\n\n\t& a:hover {\n\t\tcolor: ${text.anchorPrimary};\n\t}\n`;\n\nexport const privacyLink = css`\n\tcolor: ${text.anchorPrimary};\n\ttext-decoration: underline;\n\ttext-decoration-color: ${line.primary};\n\ttext-underline-position: under;\n\tborder: 0;\n\tbackground: transparent;\n\tfont-size: inherit;\n\tpadding: 0;\n\tcursor: pointer;\n`;\n\nexport const firstParagraphOverlay = (isComment: boolean) => css`\n\tmargin-top: -250px;\n\twidth: 100%;\n\theight: 250px;\n\tposition: absolute;\n\n\t/* \"transparent\" only works here because == rgba(0,0,0,0) */\n\tbackground-image: linear-gradient(\n\t\t0deg,\n\t\t${isComment ? opinion[800] : background.primary},\n\t\t70%,\n\t\trgba(255, 255, 255, 0)\n\t);\n`;\n\n// This css does 3 things\n// 1. first hide all article content using display: none; (.article-body-commercial-selector > *)\n// 2. make the sign in gate (#sign-in-gate), and the first 2 paragraphs of the article visible (.article-body-commercial-selector p:nth-of-type(-n+3))\n// 3. hide any siblings after the sign in gate in case a paragraph is still visible (#sign-in-gate ~ *) because of the css in 2\nexport const hideElementsCss = `\n    .article-body-commercial-selector > * {\n        display: none;\n    }\n\n    #sign-in-gate, .article-body-commercial-selector p:nth-of-type(-n + 3) {\n        display: block;\n    }\n\n    #sign-in-gate ~ * {\n        display: none;\n    }\n\n    #slot-body-end {\n        display: none;\n    }\n`;\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/gates/fake-social-variant.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/gates/main-control.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/gates/main-variant.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/gates/us-mandatory-control.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/gates/us-mandatory-variant.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/signInGate.ts","messages":[{"ruleId":"import/order","severity":1,"message":"There should be no empty line between import groups","line":1,"column":1,"nodeType":"ImportDeclaration","endLine":1,"endColumn":49},{"ruleId":"import/order","severity":1,"message":"There should be no empty line between import groups","line":5,"column":1,"nodeType":"ImportDeclaration","endLine":5,"endColumn":91}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { ABTest } from '@guardian/ab-core';\n\n// Sign in Gate A/B Tests\nimport { signInGateMainControl } from '../../experiments/tests/sign-in-gate-main-control';\nimport { signInGateMainVariant } from '../../experiments/tests/sign-in-gate-main-variant';\n\n// Sign in Gate Types\nimport { signInGateComponent as gateMainControl } from './gates/main-control';\nimport { signInGateComponent as gateMainVariant } from './gates/main-variant';\nimport type { SignInGateTestMap } from './types';\n\n// component name, should always be sign-in-gate\nexport const componentName = 'sign-in-gate';\n\n/* When adding a new test, you need to add the test name to the tests array below,\n   and add a entry for each variant that maps it to a SignInGateComponent in\n   signInGateTestVariantToGateMapping, and in turn match each test id to an component\n   id in signInGateTestIdToComponentId\n*/\nexport const signInGateTests: ReadonlyArray<ABTest> = [\n\tsignInGateMainVariant,\n\tsignInGateMainControl,\n];\n\nexport const signInGateTestVariantToGateMapping: SignInGateTestMap = {\n\t'main-control-4': gateMainControl,\n\t'main-variant-4': gateMainVariant,\n};\n\nexport const signInGateTestIdToComponentId: { [key: string]: string } = {\n\tSignInGateMainVariant: 'main_variant_4',\n\tSignInGateMainControl: 'main_control_4',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGate/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignInGateSelector.importable.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":80,"column":53,"nodeType":"Punctuator","messageId":"preferNullish","endLine":80,"endColumn":55,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2312,2314],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":81,"column":40,"nodeType":"Punctuator","messageId":"preferNullish","endLine":81,"endColumn":42,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2365,2367],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":135,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":145,"endColumn":13},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":185,"column":0,"nodeType":null,"endLine":185,"endColumn":71}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":186,"column":4,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":196,"endColumn":27,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[5298,5490],"text":"void gateVariant\n\t\t\t\t.canShow({\n\t\t\t\t\tisSignedIn: !!isSignedIn,\n\t\t\t\t\tcurrentTest,\n\t\t\t\t\tcontentType,\n\t\t\t\t\tsectionName,\n\t\t\t\t\ttags,\n\t\t\t\t\tisPaidContent,\n\t\t\t\t\tisPreview,\n\t\t\t\t})\n\t\t\t\t.then(setCanShowGate);"},"desc":"Add void operator to ignore."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, getCookie } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport { constructQuery } from '../../lib/querystring';\nimport { useOnce } from '../lib/useOnce';\nimport { useSignInGateSelector } from '../lib/useSignInGateSelector';\nimport type { ComponentEventParams } from './SignInGate/componentEventTracking';\nimport {\n\tsubmitViewEventTracking,\n\twithComponentId,\n} from './SignInGate/componentEventTracking';\nimport {\n\tincrementUserDismissedGateCount,\n\tsetUserDismissedGate,\n} from './SignInGate/dismissGate';\nimport { signInGateTestIdToComponentId } from './SignInGate/signInGate';\nimport type {\n\tCurrentSignInGateABTest,\n\tSignInGateComponent,\n} from './SignInGate/types';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tcontentType: string;\n\tsectionName?: string;\n\ttags: TagType[];\n\tisPaidContent: boolean;\n\tisPreview: boolean;\n\thost?: string;\n\tpageId: string;\n\tidUrl?: string;\n};\n\n// interface for the component which shows the sign in gate\ninterface ShowSignInGateProps {\n\tsetShowGate: React.Dispatch<React.SetStateAction<boolean>>;\n\tabTest: CurrentSignInGateABTest;\n\tformat: ArticleFormat;\n\tsignInUrl: string;\n\tgateVariant: SignInGateComponent;\n\thost: string;\n}\n\nconst dismissGate = (\n\tsetShowGate: React.Dispatch<React.SetStateAction<boolean>>,\n\tcurrentAbTestValue: CurrentSignInGateABTest,\n) => {\n\tsetShowGate(false);\n\tsetUserDismissedGate(currentAbTestValue.variant, currentAbTestValue.name);\n\tincrementUserDismissedGateCount(\n\t\tcurrentAbTestValue.variant,\n\t\tcurrentAbTestValue.name,\n\t);\n};\n\n// function to generate the profile.theguardian.com url with tracking params\n// and the return url (link to current article page)\nconst generateSignInUrl = ({\n\tpageId,\n\tpageViewId,\n\tidUrl,\n\thost,\n\tcurrentTest,\n}: {\n\tpageId: string;\n\tpageViewId: string;\n\tidUrl: string;\n\thost: string;\n\tcurrentTest: CurrentSignInGateABTest;\n}) => {\n\t// url of the article, return user here after sign in/registration\n\tconst returnUrl = `${host}/${pageId}`;\n\n\t// set the component event params to be included in the query\n\tconst queryParams: ComponentEventParams = {\n\t\tcomponentType: 'signingate',\n\t\tcomponentId: signInGateTestIdToComponentId[currentTest.id],\n\t\tabTestName: currentTest.name,\n\t\tabTestVariant: currentTest.variant,\n\t\tbrowserId:\n\t\t\tgetCookie({ name: 'bwid', shouldMemoize: true }) || undefined,\n\t\tvisitId: getCookie({ name: 'vsid' }) || undefined,\n\t\tviewId: pageViewId,\n\t};\n\n\treturn `${idUrl}/signin?returnUrl=${returnUrl}&componentEventParams=${encodeURIComponent(\n\t\tconstructQuery(queryParams),\n\t)}`;\n};\n\n// component which shows the sign in gate\n// fires a VIEW ophan component event\n// and show the gate component if it exists\nconst ShowSignInGate = ({\n\tformat,\n\tabTest,\n\tsetShowGate,\n\tsignInUrl,\n\tgateVariant,\n\thost,\n}: ShowSignInGateProps) => {\n\t// use effect hook to fire view event tracking only on initial render\n\tuseEffect(() => {\n\t\tsubmitViewEventTracking({\n\t\t\tcomponent: withComponentId(\n\t\t\t\tsignInGateTestIdToComponentId[abTest.id],\n\t\t\t),\n\t\t\tabTest,\n\t\t});\n\t}, [abTest]);\n\n\t// some sign in gate ab test variants may not need to show a gate\n\t// therefore the gate is optional\n\t// this is because we want a section of the audience to never see the gate\n\t// but still fire a view event if they are eligible to see the gate\n\tif (gateVariant.gate) {\n\t\treturn gateVariant.gate({\n\t\t\tguUrl: host,\n\t\t\tsignInUrl,\n\t\t\tdismissGate: () => {\n\t\t\t\tdismissGate(setShowGate, abTest);\n\t\t\t},\n\t\t\tabTest,\n\t\t\tophanComponentId: signInGateTestIdToComponentId[abTest.id],\n\t\t\tisComment:\n\t\t\t\tformat.design === ArticleDesign.Comment ||\n\t\t\t\tformat.design === ArticleDesign.Editorial,\n\t\t});\n\t}\n\t// return nothing if no gate needs to be shown\n\treturn <></>;\n};\n\n// component with conditional logic which determines if a sign in gate\n// should be shown on the current page\nexport const SignInGateSelector = ({\n\tformat,\n\tcontentType,\n\tsectionName = '',\n\ttags,\n\tisPaidContent,\n\tisPreview,\n\thost = 'https://theguardian.com/',\n\tpageId,\n\tidUrl = 'https://profile.theguardian.com',\n}: Props) => {\n\tconst isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\tconst [isGateDismissed, setIsGateDismissed] = useState<boolean | undefined>(\n\t\tundefined,\n\t);\n\tconst [gateVariant, setGateVariant] = useState<\n\t\tSignInGateComponent | undefined\n\t>(undefined);\n\tconst [currentTest, setCurrentTest] = useState<\n\t\tCurrentSignInGateABTest | undefined\n\t>(undefined);\n\tconst [canShowGate, setCanShowGate] = useState(false);\n\tconst gateSelector = useSignInGateSelector();\n\n\tconst { pageViewId } = window.guardian.config.ophan;\n\n\tuseOnce(() => {\n\t\t// this hook will fire when the sign in gate is dismissed\n\t\t// which will happen when the showGate state is set to false\n\t\t// this only happens within the dismissGate method\n\t\tif (isGateDismissed) {\n\t\t\tdocument.dispatchEvent(\n\t\t\t\tnew CustomEvent('article:sign-in-gate-dismissed'),\n\t\t\t);\n\t\t}\n\t}, [isGateDismissed]);\n\n\tuseOnce(() => {\n\t\tconst [gateSelectorVariant, gateSelectorTest] = gateSelector as [\n\t\t\tSignInGateComponent | null,\n\t\t\tCurrentSignInGateABTest | null,\n\t\t];\n\t\tif (gateSelectorVariant && gateSelectorTest) {\n\t\t\tsetGateVariant(gateSelectorVariant);\n\t\t\tsetCurrentTest(gateSelectorTest);\n\t\t}\n\t}, [gateSelector]);\n\n\tuseEffect(() => {\n\t\tif (gateVariant && currentTest) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\t\tgateVariant\n\t\t\t\t.canShow({\n\t\t\t\t\tisSignedIn: !!isSignedIn,\n\t\t\t\t\tcurrentTest,\n\t\t\t\t\tcontentType,\n\t\t\t\t\tsectionName,\n\t\t\t\t\ttags,\n\t\t\t\t\tisPaidContent,\n\t\t\t\t\tisPreview,\n\t\t\t\t})\n\t\t\t\t.then(setCanShowGate);\n\t\t}\n\t}, [\n\t\tcurrentTest,\n\t\tgateVariant,\n\t\tisSignedIn,\n\t\tcontentType,\n\t\tsectionName,\n\t\ttags,\n\t\tisPaidContent,\n\t\tisPreview,\n\t]);\n\n\tif (!currentTest || !gateVariant) {\n\t\treturn null;\n\t}\n\n\tconst signInUrl = generateSignInUrl({\n\t\tpageId,\n\t\thost,\n\t\tpageViewId,\n\t\tidUrl,\n\t\tcurrentTest,\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t{/* Sign In Gate Display Logic */}\n\t\t\t{!isGateDismissed && canShowGate && (\n\t\t\t\t<ShowSignInGate\n\t\t\t\t\tformat={format}\n\t\t\t\t\tabTest={currentTest}\n\t\t\t\t\tsetShowGate={(show) => setIsGateDismissed(!show)}\n\t\t\t\t\tsignInUrl={signInUrl}\n\t\t\t\t\tgateVariant={gateVariant}\n\t\t\t\t\thost={host}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignedInAs.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":37,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":55,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":55,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":76,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":76,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":100,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":100,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":121,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":121,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":140,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":140,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":161,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":161,"endColumn":47},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":181,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":181,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":202,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":202,"endColumn":49}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { decidePalette } from '../lib/decidePalette';\nimport { SignedInAs } from './SignedInAs';\n\nconst aUser = {\n\tuserId: 'abc123',\n\tdisplayName: 'Jane Smith',\n\twebUrl: '',\n\tapiUrl: '',\n\tavatar: '',\n\tsecureAvatarUrl: '',\n\tbadge: [],\n\tprivateFields: {\n\t\tcanPostComment: true,\n\t\tisPremoderated: false,\n\t\thasCommented: true,\n\t},\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 220px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport default {\n\tcomponent: SignedInAs,\n\ttitle: 'Components/SignedInAs',\n};\n\nexport const SignedIn = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={true}\n\t\t\t\tcommentCount={3}\n\t\t\t\tuser={aUser}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nSignedIn.story = { name: 'when signed in' };\n\nexport const Image = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={true}\n\t\t\t\tcommentCount={32}\n\t\t\t\tuser={{\n\t\t\t\t\t...aUser,\n\t\t\t\t\tsecureAvatarUrl: 'https://avatar.guim.co.uk/user/101885881',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nImage.story = { name: 'when signed in with an avatar set' };\n\nexport const Banned = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={true}\n\t\t\t\tcommentCount={32}\n\t\t\t\tuser={{\n\t\t\t\t\t...aUser,\n\t\t\t\t\tprivateFields: {\n\t\t\t\t\t\t...aUser.privateFields,\n\t\t\t\t\t\tcanPostComment: false,\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nBanned.story = { name: 'when user is banned' };\n\nexport const NoDisplayName = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={true}\n\t\t\t\tcommentCount={32}\n\t\t\t\tuser={{\n\t\t\t\t\t...aUser,\n\t\t\t\t\tdisplayName: '',\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nNoDisplayName.story = { name: 'before a display name has been set' };\n\nexport const NotSignedIn = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={true}\n\t\t\t\tcommentCount={32}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nNotSignedIn.story = {\n\tname: 'when the discussion is open but user is not signed in',\n};\n\nexport const DiscussionClosed = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={true}\n\t\t\t\tcommentCount={32}\n\t\t\t\tisClosedForComments={true}\n\t\t\t\tuser={aUser}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nDiscussionClosed.story = {\n\tname: 'when the discussion is closed and the user is signed in',\n};\n\nexport const DiscussionClosedSignedOut = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={true}\n\t\t\t\tcommentCount={32}\n\t\t\t\tisClosedForComments={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nDiscussionClosedSignedOut.story = {\n\tname: 'when the discussion is closed and the user is signed out',\n};\n\nexport const DiscussionDisabled = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={false}\n\t\t\t\tcommentCount={32}\n\t\t\t\tisClosedForComments={false}\n\t\t\t\tuser={aUser}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nDiscussionDisabled.story = {\n\tname: 'with discussion disabled sitewide and the user signed in',\n};\n\nexport const DiscussionDisabledSignedOut = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SignedInAs\n\t\t\t\tpalette={decidePalette({\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t})}\n\t\t\t\tenableDiscussionSwitch={false}\n\t\t\t\tcommentCount={32}\n\t\t\t\tisClosedForComments={false}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nDiscussionDisabledSignedOut.story = {\n\tname: 'with discussion disabled sitewide and the user signed out',\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SignedInAs.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":94,"column":13,"nodeType":"Punctuator","messageId":"preferNullish","endLine":94,"endColumn":15,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1715,1717],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":100,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":106,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":108,"column":3,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":108,"endColumn":29,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1894,1920],"text":"user?.privateFields"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tborder,\n\theadline,\n\tneutral,\n\tnews,\n\tspace,\n\ttext,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { createAuthenticationEventParams } from '../../lib/identity-component-event';\n\ntype Props = {\n\tcommentCount?: number;\n\tpalette: Palette;\n\tenableDiscussionSwitch: boolean;\n\tuser?: UserProfile;\n\tisClosedForComments?: boolean;\n};\n\nconst containerStyles = css`\n\tpadding-top: ${space[1]}px;\n\tpadding-bottom: ${space[1]}px;\n`;\n\nconst imageStyles = css`\n\tborder-radius: 70px;\n\twidth: 60px;\n\theight: 60px;\n\t${until.desktop} {\n\t\twidth: 36px;\n\t\theight: 36px;\n\t}\n`;\n\nconst imageWrapper = css`\n\tpadding-bottom: ${space[1]}px;\n\tpadding-right: ${space[2]}px;\n`;\n\nconst headingStyles = css`\n\t${headline.xxsmall({ fontWeight: 'bold' })};\n\tpadding-bottom: ${space[1]}px;\n`;\n\nconst textStyles = css`\n\t${textSans.small()}\n\t${until.desktop} {\n\t\t${textSans.xxsmall()}\n\t}\n\tcolor: ${text.supporting};\n\tpadding-bottom: ${space[1]}px;\n`;\n\nconst headlineStyles = css`\n\t${headline.xxxsmall()}\n\tcolor: ${text.supporting};\n\tpadding-bottom: ${space[1]}px;\n`;\n\nconst usernameStyles = css`\n\tfont-weight: 700;\n\tcolor: ${text.primary};\n`;\n\nconst linkStyles = (palette: Palette) => css`\n\tcolor: ${palette.text.signInLink};\n\ttext-decoration: none;\n\tborder-bottom: 1px solid ${border.secondary};\n\ttransition: border-color 0.15s ease-out;\n\t:hover {\n\t\tborder-color: ${news[300]};\n\t}\n`;\n\nconst rowUntilDesktop = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\t${until.desktop} {\n\t\tflex-direction: row;\n\t}\n`;\n\nconst Heading = ({ count }: { count?: number }) => {\n\treturn (\n\t\t<h2 css={headingStyles}>\n\t\t\tcomments{' '}\n\t\t\t<span\n\t\t\t\tcss={css`\n\t\t\t\t\tcolor: ${neutral[60]};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t({count || '…'})\n\t\t\t</span>\n\t\t</h2>\n\t);\n};\n\nexport const SignedInAs = ({\n\tcommentCount,\n\tpalette,\n\tenableDiscussionSwitch,\n\tuser,\n\tisClosedForComments,\n}: Props) => {\n\tconst isBanned =\n\t\tuser && user.privateFields && !user.privateFields.canPostComment;\n\n\tif (!enableDiscussionSwitch) {\n\t\t// Discussion is disabled sitewide and user is signed in\n\t\tif (user) {\n\t\t\treturn (\n\t\t\t\t<div css={containerStyles}>\n\t\t\t\t\t<Heading count={commentCount} />\n\t\t\t\t\t<span css={headlineStyles}>\n\t\t\t\t\t\tCommenting has been disabled at this time\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t// Discussion disabled sitewide and user logged out\n\t\treturn (\n\t\t\t<div css={containerStyles}>\n\t\t\t\t<Heading count={commentCount} />\n\t\t\t\t<span css={headlineStyles}>\n\t\t\t\t\tCommenting has been disabled at this time but you can still{' '}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`https://profile.theguardian.com/signin?INTCMP=DOTCOM_COMMENTS_SIGNIN&${createAuthenticationEventParams(\n\t\t\t\t\t\t\t'signin_to_comment',\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\tsign in\n\t\t\t\t\t</a>{' '}\n\t\t\t\t\tor{' '}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`https://profile.theguardian.com/register?INTCMP=DOTCOM_COMMENTS_REG&${createAuthenticationEventParams(\n\t\t\t\t\t\t\t'register_to_comment',\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\tcreate your Guardian account\n\t\t\t\t\t</a>{' '}\n\t\t\t\t\tto join the discussion when it&apos;s back\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (isBanned) {\n\t\t// User is banned\n\t\treturn (\n\t\t\t<div css={containerStyles}>\n\t\t\t\t<Heading count={commentCount} />\n\t\t\t\t<span css={headlineStyles}>\n\t\t\t\t\tCommenting has been disabled for this account (\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"https://www.theguardian.com/community-faqs#321a\"\n\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\twhy?\n\t\t\t\t\t</a>{' '}\n\t\t\t\t\t)\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (user && isClosedForComments) {\n\t\t// The reader is logged in but the discussion is closed\n\t\treturn (\n\t\t\t<div css={containerStyles}>\n\t\t\t\t<Heading count={commentCount} />\n\t\t\t\t<span css={headlineStyles}>\n\t\t\t\t\tThis discussion is closed for comments\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (!user && isClosedForComments) {\n\t\t// The discussion is closed and the reader is not logged in\n\t\treturn (\n\t\t\t<div css={containerStyles}>\n\t\t\t\t<Heading count={commentCount} />\n\t\t\t\t<span css={headlineStyles}>\n\t\t\t\t\tThis discussion is now closed for comments but you can still{' '}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`https://profile.theguardian.com/signin?INTCMP=DOTCOM_COMMENTS_SIGNIN&${createAuthenticationEventParams(\n\t\t\t\t\t\t\t'signin_to_comment',\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\tsign in\n\t\t\t\t\t</a>{' '}\n\t\t\t\t\tor{' '}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`https://profile.theguardian.com/register?INTCMP=DOTCOM_COMMENTS_REG&${createAuthenticationEventParams(\n\t\t\t\t\t\t\t'register_to_comment',\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\tcreate your Guardian account\n\t\t\t\t\t</a>{' '}\n\t\t\t\t\tto join the discussion next time\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tif (!user) {\n\t\t// The discussion is open but the reader is not logged in\n\t\treturn (\n\t\t\t<div css={containerStyles}>\n\t\t\t\t<Heading count={commentCount} />\n\t\t\t\t<span css={headlineStyles}>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`https://profile.theguardian.com/signin?INTCMP=DOTCOM_COMMENTS_SIGNIN&${createAuthenticationEventParams(\n\t\t\t\t\t\t\t'signin_to_comment',\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\tSign in\n\t\t\t\t\t</a>{' '}\n\t\t\t\t\tor{' '}\n\t\t\t\t\t<a\n\t\t\t\t\t\thref={`https://profile.theguardian.com/register?INTCMP=DOTCOM_COMMENTS_REG&${createAuthenticationEventParams(\n\t\t\t\t\t\t\t'register_to_comment',\n\t\t\t\t\t\t)}`}\n\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\tcreate your Guardian account\n\t\t\t\t\t</a>{' '}\n\t\t\t\t\tto join the discussion\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\t// Discussion open and user logged in\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<Heading count={commentCount} />\n\t\t\t<div css={rowUntilDesktop}>\n\t\t\t\t<div css={imageWrapper}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={\n\t\t\t\t\t\t\tuser.secureAvatarUrl ||\n\t\t\t\t\t\t\t'https://avatar.guim.co.uk/no-user-image.gif'\n\t\t\t\t\t\t}\n\t\t\t\t\t\talt={user.displayName || 'Guardian User'}\n\t\t\t\t\t\tcss={imageStyles}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div css={textStyles}>\n\t\t\t\t\tSigned in as\n\t\t\t\t\t<div css={usernameStyles}>\n\t\t\t\t\t\t{user.displayName || 'Guardian User'}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SkipTo.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":11,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":11,"endColumn":48}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { border, neutral, textSans } from '@guardian/source-foundations';\n\ntype Identifier = 'maincontent' | 'navigation' | 'keyevents';\n\ntype Props = {\n\tid: Identifier;\n\tlabel: string;\n};\n\nexport const SkipTo = ({ id, label }: Props) => {\n\treturn (\n\t\t<a\n\t\t\thref={`#${id}`}\n\t\t\tcss={css`\n\t\t\t\t${textSans.medium()}\n\t\t\t\theight: 40px;\n\t\t\t\ttop: -40px;\n\t\t\t\tline-height: 30px;\n\t\t\t\toverflow: hidden;\n\t\t\t\tpadding: 0;\n\t\t\t\tposition: absolute;\n\t\t\t\tbackground: ${neutral[100]};\n\t\t\t\tdisplay: block;\n\t\t\t\ttext-align: center;\n\t\t\t\tmargin: 0;\n\t\t\t\ttext-decoration: none;\n\t\t\t\tcolor: ${neutral[0]};\n\t\t\t\t&:focus,\n\t\t\t\t&:active {\n\t\t\t\t\tborder: 5px solid ${border.focusHalo};\n\t\t\t\t\tposition: static;\n\t\t\t\t}\n\t\t\t\t&:visited,\n\t\t\t\t&:active {\n\t\t\t\t\tcolor: ${neutral[0]};\n\t\t\t\t}\n\t\t\t`}\n\t\t>\n\t\t\t{label}\n\t\t</a>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SlotBodyEnd.importable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1743,1746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1743,1746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1887,1890],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1887,1890],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":71,"column":13,"nodeType":"Identifier","messageId":"anyAssignment","endLine":71,"endColumn":17},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":81,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":94,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":108,"column":24,"nodeType":"Punctuator","messageId":"preferNullish","endLine":108,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2814,2816],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":111,"column":6,"nodeType":"MemberExpression","messageId":"unexpected","endLine":111,"endColumn":19},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":111,"column":51,"nodeType":"Identifier","messageId":"invalidType","endLine":111,"endColumn":52},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":141,"column":25,"nodeType":"Punctuator","messageId":"preferNullish","endLine":141,"endColumn":27,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3496,3498],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":160,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":160,"endColumn":18},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":160,"column":55,"nodeType":"Identifier","messageId":"invalidType","endLine":160,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type {\n\tBrazeArticleContext,\n\tBrazeMessagesInterface,\n} from '@guardian/braze-components/logic';\nimport { getCookie } from '@guardian/libs';\nimport type { WeeklyArticleHistory } from '@guardian/support-dotcom-components/dist/dotcom/src/types';\nimport { useEffect, useState } from 'react';\nimport { getArticleCounts } from '../../lib/article-count';\nimport { getLocaleCode } from '../lib/getCountryCode';\nimport type {\n\tCandidateConfig,\n\tMaybeFC,\n\tSlotConfig,\n} from '../lib/messagePicker';\nimport { pickMessage } from '../lib/messagePicker';\nimport { useBraze } from '../lib/useBraze';\nimport { useOnce } from '../lib/useOnce';\nimport { canShowBrazeEpic, MaybeBrazeEpic } from './SlotBodyEnd/BrazeEpic';\nimport {\n\tcanShowReaderRevenueEpic,\n\tReaderRevenueEpic,\n} from './SlotBodyEnd/ReaderRevenueEpic';\nimport type {\n\tCanShowData as RRCanShowData,\n\tEpicConfig as RREpicConfig,\n} from './SlotBodyEnd/ReaderRevenueEpic';\n\ntype Props = {\n\tcontentType: string;\n\tsectionName?: string;\n\tsectionId: string;\n\tshouldHideReaderRevenue: boolean;\n\tisMinuteArticle: boolean;\n\tisPaidContent: boolean;\n\ttags: TagType[];\n\tcontributionsServiceUrl: string;\n\tidApiUrl: string;\n\tstage: string;\n\tpageId: string;\n\tkeywordsId: string;\n};\n\nconst buildReaderRevenueEpicConfig = (\n\tcanShowData: RRCanShowData,\n): CandidateConfig<RREpicConfig> => {\n\treturn {\n\t\tcandidate: {\n\t\t\tid: 'reader-revenue-banner',\n\t\t\tcanShow: () => canShowReaderRevenueEpic(canShowData),\n\t\t\tshow: (meta: RREpicConfig) => () => {\n\t\t\t\treturn <ReaderRevenueEpic {...meta} />;\n\t\t\t},\n\t\t},\n\t\ttimeoutMillis: null,\n\t};\n};\n\nconst buildBrazeEpicConfig = (\n\tbrazeMessages: BrazeMessagesInterface,\n\tcountryCode: string,\n\tidApiUrl: string,\n\tbrazeArticleContext: BrazeArticleContext,\n): CandidateConfig<any> => {\n\treturn {\n\t\tcandidate: {\n\t\t\tid: 'braze-epic',\n\t\t\tcanShow: () => canShowBrazeEpic(brazeMessages, brazeArticleContext),\n\t\t\tshow: (meta: any) => () =>\n\t\t\t\t(\n\t\t\t\t\t<MaybeBrazeEpic\n\t\t\t\t\t\tmeta={meta}\n\t\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\t\tidApiUrl={idApiUrl}\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t},\n\t\ttimeoutMillis: 2000,\n\t};\n};\n\nexport const SlotBodyEnd = ({\n\tcontentType,\n\tsectionName,\n\tsectionId,\n\tshouldHideReaderRevenue,\n\tisMinuteArticle,\n\tisPaidContent,\n\ttags,\n\tcontributionsServiceUrl,\n\tidApiUrl,\n\tstage,\n\tpageId,\n\tkeywordsId,\n}: Props) => {\n\tconst { brazeMessages } = useBraze(idApiUrl);\n\n\tconst [countryCode, setCountryCode] = useState<string>();\n\tconst isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\tconst browserId = getCookie({ name: 'bwid', shouldMemoize: true });\n\tconst [SelectedEpic, setSelectedEpic] = useState<React.FC | null>(null);\n\tconst [asyncArticleCount, setAsyncArticleCount] =\n\t\tuseState<Promise<WeeklyArticleHistory | undefined>>();\n\n\tuseEffect(() => {\n\t\tconst callFetch = () => {\n\t\t\tgetLocaleCode()\n\t\t\t\t.then((cc) => {\n\t\t\t\t\tsetCountryCode(cc || '');\n\t\t\t\t})\n\t\t\t\t.catch((e) =>\n\t\t\t\t\tconsole.error(`countryCodePromise - error: ${e}`),\n\t\t\t\t);\n\t\t};\n\t\tcallFetch();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetAsyncArticleCount(\n\t\t\tgetArticleCounts(pageId, keywordsId).then(\n\t\t\t\t(counts) => counts?.weeklyArticleHistory,\n\t\t\t),\n\t\t);\n\t}, [pageId, keywordsId]);\n\n\tuseOnce(() => {\n\t\tconst readerRevenueEpic = buildReaderRevenueEpicConfig({\n\t\t\tisSignedIn,\n\t\t\tcountryCode,\n\t\t\tcontentType,\n\t\t\tsectionId,\n\t\t\tshouldHideReaderRevenue,\n\t\t\tisMinuteArticle,\n\t\t\tisPaidContent,\n\t\t\ttags,\n\t\t\tcontributionsServiceUrl,\n\t\t\tidApiUrl,\n\t\t\tstage,\n\t\t\tasyncArticleCount: asyncArticleCount as Promise<\n\t\t\t\tWeeklyArticleHistory | undefined\n\t\t\t>,\n\t\t\tbrowserId: browserId || undefined,\n\t\t});\n\t\tconst brazeArticleContext: BrazeArticleContext = {\n\t\t\tsection: sectionName,\n\t\t};\n\t\tconst brazeEpic = buildBrazeEpicConfig(\n\t\t\tbrazeMessages as BrazeMessagesInterface,\n\t\t\tcountryCode as string,\n\t\t\tidApiUrl,\n\t\t\tbrazeArticleContext,\n\t\t);\n\t\tconst epicConfig: SlotConfig = {\n\t\t\tcandidates: [brazeEpic, readerRevenueEpic],\n\t\t\tname: 'slotBodyEnd',\n\t\t};\n\n\t\tpickMessage(epicConfig)\n\t\t\t.then((PickedEpic: () => MaybeFC) => setSelectedEpic(PickedEpic))\n\t\t\t.catch((e) =>\n\t\t\t\tconsole.error(`SlotBodyEnd pickMessage - error: ${e}`),\n\t\t\t);\n\t}, [isSignedIn, countryCode, brazeMessages, asyncArticleCount]);\n\n\tif (SelectedEpic) {\n\t\treturn <SelectedEpic />;\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SlotBodyEnd/BrazeEpic.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":141,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":141,"endColumn":79},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":153,"column":48,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":153,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { CommonEndOfArticleComponentProps } from '@guardian/braze-components/end-of-article';\nimport type {\n\tBrazeArticleContext,\n\tBrazeMessagesInterface,\n} from '@guardian/braze-components/logic';\nimport { useEffect, useRef, useState } from 'react';\nimport { submitComponentEvent } from '../../browser/ophan/ophan';\nimport { getBrazeMetaFromUrlFragment } from '../../lib/braze/forceBrazeMessage';\nimport type { CanShowResult } from '../../lib/messagePicker';\nimport { useIsInView } from '../../lib/useIsInView';\nimport { useOnce } from '../../lib/useOnce';\n\nconst wrapperMargins = css`\n\tmargin: 18px 0;\n`;\n\nconst COMPONENT_TYPE = 'RETENTION_EPIC';\n\ntype Meta = {\n\tdataFromBraze: { [key: string]: string };\n\tlogImpressionWithBraze: () => void;\n\tlogButtonClickWithBraze: (id: number) => void;\n};\n\ntype EpicConfig = {\n\tmeta: Meta;\n\tcountryCode: string;\n\tidApiUrl: string;\n};\n\nexport const canShowBrazeEpic = async (\n\tbrazeMessages: BrazeMessagesInterface,\n\tbrazeArticleContext: BrazeArticleContext,\n): Promise<CanShowResult<Meta>> => {\n\tconst forcedBrazeMeta = getBrazeMetaFromUrlFragment();\n\tif (forcedBrazeMeta) {\n\t\treturn {\n\t\t\tshow: true,\n\t\t\tmeta: forcedBrazeMeta,\n\t\t};\n\t}\n\n\ttry {\n\t\tconst message = await brazeMessages.getMessageForEndOfArticle(\n\t\t\tbrazeArticleContext,\n\t\t);\n\n\t\tif (message.extras) {\n\t\t\treturn {\n\t\t\t\tshow: true,\n\t\t\t\tmeta: {\n\t\t\t\t\tdataFromBraze: message.extras,\n\t\t\t\t\tlogImpressionWithBraze: () => {\n\t\t\t\t\t\tmessage.logImpression();\n\t\t\t\t\t},\n\t\t\t\t\tlogButtonClickWithBraze: (internalButtonId: number) => {\n\t\t\t\t\t\tmessage.logButtonClick(internalButtonId);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\treturn { show: false };\n\t} catch (e) {\n\t\treturn { show: false };\n\t}\n};\n\ntype InnerProps = {\n\tmeta: Meta;\n\tcountryCode: string;\n\tBrazeComponent: React.FC<CommonEndOfArticleComponentProps>;\n\tidApiUrl: string;\n};\n\nconst BrazeEpicWithSatisfiedDependencies = ({\n\tBrazeComponent,\n\tmeta,\n\tcountryCode,\n\tidApiUrl,\n}: InnerProps) => {\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\trootMargin: '-18px',\n\t\tthreshold: 0,\n\t\tdebounce: true,\n\t});\n\n\tconst epicRef = useRef(null);\n\n\tuseOnce(() => {\n\t\tsubmitComponentEvent({\n\t\t\tcomponent: {\n\t\t\t\tcomponentType: COMPONENT_TYPE,\n\t\t\t\tid: meta.dataFromBraze.ophanComponentId,\n\t\t\t},\n\t\t\taction: 'INSERT',\n\t\t});\n\t}, [meta.dataFromBraze, epicRef.current]);\n\n\tuseEffect(() => {\n\t\tif (hasBeenSeen) {\n\t\t\tmeta.logImpressionWithBraze();\n\n\t\t\t// Log VIEW event with Ophan\n\t\t\tsubmitComponentEvent({\n\t\t\t\tcomponent: {\n\t\t\t\t\tcomponentType: COMPONENT_TYPE,\n\t\t\t\t\tid: meta.dataFromBraze.ophanComponentId,\n\t\t\t\t},\n\t\t\t\taction: 'VIEW',\n\t\t\t});\n\t\t}\n\t}, [hasBeenSeen, meta]);\n\n\treturn (\n\t\t<div ref={setNode} css={wrapperMargins}>\n\t\t\t<div ref={epicRef}>\n\t\t\t\t<BrazeComponent\n\t\t\t\t\tcomponentName={meta.dataFromBraze.componentName}\n\t\t\t\t\tbrazeMessageProps={meta.dataFromBraze}\n\t\t\t\t\tsubscribeToNewsletter={async (newsletterId) => {\n\t\t\t\t\t\tawait fetch(`${idApiUrl}/users/me/newsletters`, {\n\t\t\t\t\t\t\tmethod: 'PATCH',\n\t\t\t\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\t\t\t\tid: newsletterId,\n\t\t\t\t\t\t\t\tsubscribed: true,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tcredentials: 'include',\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tlogButtonClickWithBraze={meta.logButtonClickWithBraze}\n\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport const MaybeBrazeEpic = ({ meta, countryCode, idApiUrl }: EpicConfig) => {\n\tconst [BrazeComponent, setBrazeComponent] =\n\t\tuseState<React.FC<CommonEndOfArticleComponentProps>>();\n\n\tuseEffect(() => {\n\t\timport(\n\t\t\t/* webpackChunkName: \"guardian-braze-components-end-of-article\" */ '@guardian/braze-components/end-of-article'\n\t\t)\n\t\t\t.then((module) => {\n\t\t\t\tsetBrazeComponent(() => module.BrazeEndOfArticleComponent);\n\t\t\t})\n\t\t\t.catch((error) =>\n\t\t\t\twindow.guardian.modules.sentry.reportError(error, 'braze-epic'),\n\t\t\t);\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t{BrazeComponent ? (\n\t\t\t\t<BrazeEpicWithSatisfiedDependencies\n\t\t\t\t\tBrazeComponent={BrazeComponent}\n\t\t\t\t\tmeta={meta}\n\t\t\t\t\tcountryCode={countryCode}\n\t\t\t\t\tidApiUrl={idApiUrl}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<div />\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SlotBodyEnd/ReaderRevenueEpic.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":80,"column":20,"nodeType":"Punctuator","messageId":"preferNullish","endLine":80,"endColumn":22,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2424,2426],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":83,"column":20,"nodeType":"Punctuator","messageId":"preferNullish","endLine":83,"endColumn":22,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[2508,2510],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":147,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":152,"endColumn":18},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":172,"column":45,"nodeType":"Identifier","messageId":"invalidType","endLine":172,"endColumn":50},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":174,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":174,"endColumn":16},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":180,"column":0,"nodeType":null,"endLine":180,"endColumn":58},{"ruleId":"eslint-comments/no-unused-disable","message":"'react-hooks/exhaustive-deps' rule is disabled but never reported.","line":180,"column":31,"severity":1,"nodeType":null,"fix":{"range":[4895,4950],"text":" "},"suggestions":[{"desc":"Remove `eslint-disable` comment.","fix":{"range":[4895,4950],"text":""}}],"endLine":180,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport { cmp } from '@guardian/consent-management-platform';\nimport { getCookie, storage } from '@guardian/libs';\nimport { getEpic, getEpicViewLog } from '@guardian/support-dotcom-components';\nimport type {\n\tEpicPayload,\n\tModuleData,\n\tModuleDataResponse,\n\tWeeklyArticleHistory,\n} from '@guardian/support-dotcom-components/dist/dotcom/src/types';\nimport { useEffect, useState } from 'react';\nimport { initPerf } from '../../browser/initPerf';\nimport type { OphanComponentEvent } from '../../browser/ophan/ophan';\nimport { submitComponentEvent } from '../../browser/ophan/ophan';\nimport {\n\tgetLastOneOffContributionTimestamp,\n\thasCmpConsentForArticleCount,\n\thasCmpConsentForBrowserId,\n\thasOptedOutOfArticleCount,\n\tisRecurringContributor,\n\tlazyFetchEmailWithTimeout,\n\tMODULES_VERSION,\n\tshouldHideSupportMessaging,\n} from '../../lib/contributions';\nimport type { CanShowResult } from '../../lib/messagePicker';\nimport { setAutomat } from '../../lib/setAutomat';\n\nexport type EpicConfig = {\n\tmodule: ModuleData;\n\tfetchEmail?: () => Promise<string | null>;\n\thasConsentForArticleCount: boolean;\n\tstage: string;\n};\n\ntype EpicProps = {\n\tfetchEmail?: () => Promise<string | null>;\n\tsubmitComponentEvent?: (componentEvent: OphanComponentEvent) => void;\n\topenCmp: () => void;\n\thasConsentForArticleCount: boolean;\n\tstage: string;\n\t// Also anything specified by support-dotcom-components\n};\n\nconst wrapperMargins = css`\n\tmargin: 18px 0;\n\tclear: both;\n`;\n\nexport type CanShowData = {\n\tisSignedIn?: boolean;\n\tcountryCode?: string;\n\tcontentType: string;\n\tsectionId: string;\n\tshouldHideReaderRevenue: boolean;\n\tisMinuteArticle: boolean;\n\tisPaidContent: boolean;\n\ttags: TagType[];\n\tcontributionsServiceUrl: string;\n\tidApiUrl: string;\n\tstage: string;\n\tasyncArticleCount: Promise<WeeklyArticleHistory | undefined>;\n\tbrowserId?: string;\n};\n\nconst buildPayload = async (data: CanShowData): Promise<EpicPayload> => ({\n\ttracking: {\n\t\tophanPageId: window.guardian.config.ophan.pageViewId,\n\t\tplatformId: 'GUARDIAN_WEB',\n\t\tclientName: 'dcr',\n\t\treferrerUrl: window.location.origin + window.location.pathname,\n\t},\n\ttargeting: {\n\t\tcontentType: data.contentType,\n\t\tsectionId: data.sectionId,\n\t\tshouldHideReaderRevenue: data.shouldHideReaderRevenue,\n\t\tisMinuteArticle: data.isMinuteArticle,\n\t\tisPaidContent: data.isPaidContent,\n\t\ttags: data.tags,\n\t\tshowSupportMessaging: !shouldHideSupportMessaging(\n\t\t\tdata.isSignedIn || false,\n\t\t),\n\t\tisRecurringContributor: isRecurringContributor(\n\t\t\tdata.isSignedIn || false,\n\t\t),\n\t\tlastOneOffContributionDate: getLastOneOffContributionTimestamp(),\n\t\tepicViewLog: getEpicViewLog(storage.local),\n\t\tweeklyArticleHistory: await data.asyncArticleCount,\n\t\thasOptedOutOfArticleCount: await hasOptedOutOfArticleCount(),\n\t\tmvtId: Number(getCookie({ name: 'GU_mvt_id', shouldMemoize: true })),\n\t\tcountryCode: data.countryCode,\n\t\tmodulesVersion: MODULES_VERSION,\n\t\turl: window.location.origin + window.location.pathname,\n\t\tbrowserId: (await hasCmpConsentForBrowserId())\n\t\t\t? data.browserId\n\t\t\t: undefined,\n\t},\n});\n\nexport const canShowReaderRevenueEpic = async (\n\tdata: CanShowData,\n): Promise<CanShowResult<EpicConfig>> => {\n\tconst {\n\t\tisSignedIn,\n\t\tshouldHideReaderRevenue,\n\t\tisPaidContent,\n\t\tcontributionsServiceUrl,\n\t\tidApiUrl,\n\t\tstage,\n\t} = data;\n\n\tif (shouldHideReaderRevenue || isPaidContent) {\n\t\t// We never serve Reader Revenue epics in this case\n\t\treturn Promise.resolve({ show: false });\n\t}\n\tconst dataPerf = initPerf('contributions-epic-data');\n\tdataPerf.start();\n\n\tconst contributionsPayload = await buildPayload(data);\n\n\tconst response: ModuleDataResponse = await getEpic(\n\t\tcontributionsServiceUrl,\n\t\tcontributionsPayload,\n\t);\n\tconst module: ModuleData | undefined = response.data?.module;\n\n\tif (!module) {\n\t\treturn { show: false };\n\t}\n\n\tconst fetchEmail: (() => Promise<string | null>) | undefined = isSignedIn\n\t\t? lazyFetchEmailWithTimeout(idApiUrl)\n\t\t: undefined;\n\n\tconst hasConsentForArticleCount = await hasCmpConsentForArticleCount();\n\n\treturn {\n\t\tshow: true,\n\t\tmeta: {\n\t\t\tmodule,\n\t\t\tfetchEmail,\n\t\t\thasConsentForArticleCount,\n\t\t\tstage,\n\t\t},\n\t};\n};\n\nexport const ReaderRevenueEpic = ({\n\tmodule,\n\tfetchEmail,\n\thasConsentForArticleCount,\n\tstage,\n}: EpicConfig) => {\n\tconst [Epic, setEpic] = useState<React.FC<EpicProps>>();\n\n\tconst openCmp = () => {\n\t\tcmp.showPrivacyManager();\n\t};\n\n\tuseEffect(() => {\n\t\tsetAutomat();\n\n\t\tconst modulePerf = initPerf('contributions-epic-module');\n\t\tmodulePerf.start();\n\n\t\twindow\n\t\t\t.guardianPolyfilledImport(module.url)\n\t\t\t.then((epicModule: { ContributionsEpic: React.FC<EpicProps> }) => {\n\t\t\t\tmodulePerf.end();\n\t\t\t\tsetEpic(() => epicModule.ContributionsEpic); // useState requires functions to be wrapped\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst msg = `Error importing RR epic: ${error}`;\n\n\t\t\t\tconsole.log(msg);\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\tnew Error(msg),\n\t\t\t\t\t'rr-epic',\n\t\t\t\t);\n\t\t\t});\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tif (Epic) {\n\t\treturn (\n\t\t\t<div css={wrapperMargins}>\n\t\t\t\t{}\n\t\t\t\t<Epic\n\t\t\t\t\t{...module.props}\n\t\t\t\t\tfetchEmail={fetchEmail}\n\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t\topenCmp={openCmp}\n\t\t\t\t\thasConsentForArticleCount={hasConsentForArticleCount}\n\t\t\t\t\tstage={stage}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SoundcloudBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":18,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":18,"endColumn":69}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { unescapeData } from '../../lib/escapeData';\n\nconst widthOverride = css`\n\tiframe {\n\t\t/* The  embed js hijacks the iframe and calculated an incorrect width, which pushed the body out */\n\t\twidth: 100%;\n\t}\n`;\n\nexport const SoundcloudBlockComponent: React.FC<{\n\telement: SoundcloudBlockElement;\n}> = ({ element }) => {\n\treturn (\n\t\t<div css={widthOverride}>\n\t\t\t<div\n\t\t\t\tdata-cy=\"soundcloud-embed\"\n\t\t\t\tdangerouslySetInnerHTML={{ __html: unescapeData(element.html) }}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SpotifyBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":38,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":38,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Caption } from './Caption';\nimport { ClickToView } from './ClickToView';\n\n/**\n * Example article\n * https://www.theguardian.com/music/2020/jun/15/pet-shop-boys-where-to-start-in-their-back-catalogue\n */\n\ntype Props = {\n\tembedUrl?: string;\n\theight?: number;\n\twidth?: number;\n\ttitle?: string;\n\tformat: ArticleFormat;\n\tcaption?: string;\n\tcredit?: string;\n\trole?: RoleType;\n\tisTracking: boolean;\n\tisMainMedia: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nexport const SpotifyBlockComponent = ({\n\tembedUrl,\n\twidth,\n\theight,\n\ttitle,\n\tformat,\n\tcaption,\n\tcredit,\n\trole,\n\tisTracking,\n\tisMainMedia,\n\tsource,\n\tsourceDomain,\n}: Props) => {\n\tif (!embedUrl || !title || !width || !height) return null;\n\n\tconst embedContainer = css`\n\t\tiframe {\n\t\t\twidth: 100%;\n\t\t}\n\t\tmargin-bottom: 16px;\n\t`;\n\n\treturn (\n\t\t<ClickToView\n\t\t\trole={role}\n\t\t\tisTracking={isTracking}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tsource={source}\n\t\t\tsourceDomain={sourceDomain}\n\t\t>\n\t\t\t<div css={embedContainer} data-cy=\"spotify-embed\">\n\t\t\t\t<iframe\n\t\t\t\t\tsrc={embedUrl}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\theight={height}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tallowFullScreen={true}\n\t\t\t\t/>\n\t\t\t\t{caption && (\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tcredit={credit}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</ClickToView>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Spotlight.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":67}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign } from '@guardian/libs';\nimport { Card } from './Card/Card';\n\ntype Props = {\n\tcontent: TrailType[];\n\tcontainerPalette?: DCRContainerPalette;\n};\n\nexport const Spotlight = ({ content, containerPalette }: Props) => (\n\t<Card\n\t\tcontainerPalette={containerPalette}\n\t\tshowAge={true}\n\t\tlinkTo={content[0].url}\n\t\tformat={content[0].format}\n\t\theadlineText={content[0].headline}\n\t\theadlineSize=\"large\"\n\t\tbyline={content[0].byline}\n\t\tshowByline={content[0].showByline}\n\t\tshowQuotes={\n\t\t\tcontent[0].format.design === ArticleDesign.Comment ||\n\t\t\tcontent[0].format.design === ArticleDesign.Letter\n\t\t}\n\t\twebPublicationDate={content[0].webPublicationDate}\n\t\tkickerText={content[0].kickerText}\n\t\tshowPulsingDot={content[0].format.design === ArticleDesign.LiveBlog}\n\t\tshowSlash={true}\n\t\tshowClock={false}\n\t\timageUrl={content[0].image}\n\t\tmediaType={content[0].mediaType}\n\t\tmediaDuration={content[0].mediaDuration}\n\t\tcommentCount={content[0].commentCount}\n\t\timagePosition=\"right\"\n\t\timageSize=\"jumbo\"\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Standfirst.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":16,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":16,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":32,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":32,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":48,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":48,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":64,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":64,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":80,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":80,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":96,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":96,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":112,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":112,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":141,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":141,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":157,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":157,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":173,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":173,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":189,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":189,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":205,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":205,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":221,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":221,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":237,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":237,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":253,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":253,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":269,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":269,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":285,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":285,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":301,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":301,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":317,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":317,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":333,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":333,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":20,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { news } from '@guardian/source-foundations';\nimport { ElementContainer } from './ElementContainer';\nimport { Standfirst } from './Standfirst';\n\nexport default {\n\tcomponent: Standfirst,\n\ttitle: 'Components/Standfirst',\n};\n\nexport const Article = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Article standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nArticle.story = { name: 'Article' };\n\nexport const Comment = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Comment standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nComment.story = { name: 'Comment' };\n\nexport const Letter = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Letter,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Letter standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nLetter.story = { name: 'Letter' };\n\nexport const Feature = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Feature standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nFeature.story = { name: 'Feature' };\n\nexport const Immersive = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Immersive standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nImmersive.story = { name: 'Immersive' };\n\nexport const Review = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Review,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Review standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nReview.story = { name: 'Review' };\n\nexport const LiveBlog = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.LiveBlog,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"<p>This is how a Liveblog with bullets looks. Aut explicabo officia delectus omnis repellendus voluptas</p> <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nLiveBlog.story = {\n\tname: 'LiveBlog',\n\tparameters: {\n\t\tbackgrounds: {\n\t\t\tdefault: 'red',\n\t\t\tvalues: [\n\t\t\t\t{\n\t\t\t\t\tname: 'red',\n\t\t\t\t\tvalue: news[300],\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n};\n\nexport const DeadBlog = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"<p>This is how a Deadblog with bullets looks. Aut explicabo officia delectus omnis repellendus voluptas</p> <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nDeadBlog.story = { name: 'DeadBlog' };\n\nexport const Interview = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Interview,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Interview standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nInterview.story = { name: 'Interview' };\n\nexport const Analysis = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Analysis,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Analysis standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nAnalysis.story = { name: 'Analysis' };\n\nexport const Gallery = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Gallery,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Gallery standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nGallery.story = { name: 'Gallery' };\n\nexport const Audio = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Audio,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Audio standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nAudio.story = { name: 'Audio' };\n\nexport const Video = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Video,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Video standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nVideo.story = { name: 'Video' };\n\nexport const Recipe = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Recipe,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Recipe standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nRecipe.story = { name: 'Recipe' };\n\nexport const MatchReport = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.MatchReport,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how MatchReport standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nMatchReport.story = { name: 'MatchReport' };\n\nexport const Quiz = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Quiz,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Quiz standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nQuiz.story = { name: 'Quiz' };\n\nexport const SpecialReport = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how SpecialReport standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nSpecialReport.story = { name: 'SpecialReport' };\n\nexport const Editorial = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Editorial,\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how Editorial standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nEditorial.story = { name: 'Editorial' };\n\nexport const PhotoEssay = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.PhotoEssay,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tstandfirst=\"This is how PhotoEssay standfirst text looks. Aut explicabo officia delectus omnis repellendus voluptas <ul><li><a href=\\'https://www.theguardian.com/uk'>Bullet 1</a></li><li><a href=\\'https://www.theguardian.com/uk'>Bullet 2</a></li></ul>\"\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nPhotoEssay.story = { name: 'PhotoEssay' };\n\nexport const LabsWithLink = () => {\n\treturn (\n\t\t<ElementContainer>\n\t\t\t<Standfirst\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t}}\n\t\t\t\tstandfirst='<p>Whether your holiday priorities are sampling gastronomic delights, visiting cultural landmarks, adventuring in the great outdoors or just having an easy time with the kids, this quiz will help you plan your itinerary for Brittany, Normandy and the Atlantic Loire Valley</p> <ul> <li>National restrictions may apply, please consult <a href=\"https://www.gov.uk/guidance/travel-advice-novel-coronavirus\" rel=\"nofollow\">government advice</a> before planning travel</li> </ul>'\n\t\t\t/>\n\t\t</ElementContainer>\n\t);\n};\nLabsWithLink.story = { name: 'LabsWithLink' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Standfirst.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Standfirst.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":195,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":195,"endColumn":61},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":210,"column":4,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":224,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tfrom,\n\theadline,\n\tneutral,\n\tspace,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport sanitise from 'sanitize-html';\nimport { interactiveLegacyClasses } from '../layouts/lib/interactiveLegacyStyling';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tstandfirst: string;\n};\n\nconst nestedStyles = (format: ArticleFormat, palette: Palette) => {\n\tconst offset = format.display === ArticleDisplay.Immersive ? space[6] : 19;\n\treturn css`\n\t\tli {\n\t\t\tmargin-bottom: 6px;\n\t\t\tpadding-left: ${offset}px;\n\n\t\t\tp {\n\t\t\t\tdisplay: inline;\n\t\t\t}\n\t\t}\n\n\t\tli:before {\n\t\t\tdisplay: inline-block;\n\t\t\tcontent: '';\n\t\t\tborder-radius: 50%;\n\t\t\theight: 0.7em;\n\t\t\twidth: 0.7em;\n\t\t\tmargin-right: 7px;\n\t\t\tbackground-color: ${palette.background.bulletStandfirst};\n\t\t\tmargin-left: -${offset}px;\n\t\t}\n\n\t\tp {\n\t\t\tmargin-bottom: 8px;\n\t\t}\n\n\t\tstrong {\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\t[data-dcr-style='bullet'] {\n\t\t\tdisplay: inline-block;\n\t\t\tcontent: '';\n\t\t\tborder-radius: 50%;\n\t\t\theight: 13px;\n\t\t\twidth: 13px;\n\t\t\tmargin-right: 2px;\n\t\t\tbackground-color: ${palette.background.bulletStandfirst};\n\t\t}\n\n\t\ta {\n\t\t\tcolor: ${palette.text.standfirstLink};\n\t\t\ttext-decoration: none;\n\t\t\tborder-bottom: 1px solid ${palette.border.standfirstLink};\n\t\t\ttransition: border-color 0.15s ease-out;\n\t\t}\n\t`;\n};\n\nconst standfirstStyles = (format: ArticleFormat, palette: Palette) => {\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.PhotoEssay:\n\t\t\t\t\tif (format.theme === ArticleSpecial.Labs) {\n\t\t\t\t\t\treturn css`\n\t\t\t\t\t\t\t${textSans.large({})};\n\t\t\t\t\t\t\tmargin-top: ${space[2]}px;\n\t\t\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t\t\t\tline-height: 22px;\n\t\t\t\t\t\t\tmax-width: 540px;\n\t\t\t\t\t\t\tcolor: ${palette.text.standfirst};\n\t\t\t\t\t\t`;\n\t\t\t\t\t}\n\t\t\t\t\treturn css`\n\t\t\t\t\t\t${headline.xxxsmall({})};\n\t\t\t\t\t\tmargin-top: ${space[2]}px;\n\t\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t\t\tline-height: 22px;\n\t\t\t\t\t\tmax-width: 540px;\n\t\t\t\t\t\tcolor: ${palette.text.standfirst};\n\t\t\t\t\t`;\n\t\t\t\tdefault:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\t${format.theme === ArticleSpecial.Labs\n\t\t\t\t\t\t\t? textSans.medium()\n\t\t\t\t\t\t\t: headline.xsmall({\n\t\t\t\t\t\t\t\t\tfontWeight: 'light',\n\t\t\t\t\t\t\t  })};\n\t\t\t\t\t\tpadding-top: ${space[4]}px;\n\n\t\t\t\t\t\tmax-width: 280px;\n\t\t\t\t\t\t${from.tablet} {\n\t\t\t\t\t\t\tmax-width: 460px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcolor: ${palette.text.standfirst};\n\n\t\t\t\t\t\tli:before {\n\t\t\t\t\t\t\theight: 17px;\n\t\t\t\t\t\t\twidth: 17px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t}\n\n\t\tcase ArticleDisplay.NumberedList:\n\t\t\treturn css`\n\t\t\t\t${headline.xxsmall({\n\t\t\t\t\tfontWeight: 'bold',\n\t\t\t\t})};\n\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\tmax-width: 540px;\n\t\t\t\tcolor: ${palette.text.standfirst};\n\t\t\t`;\n\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.Standard:\n\t\tdefault: {\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\tcase ArticleDesign.Feature:\n\t\t\t\tcase ArticleDesign.Recipe:\n\t\t\t\tcase ArticleDesign.Review:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\t${headline.xxsmall({\n\t\t\t\t\t\t\tfontWeight: 'light',\n\t\t\t\t\t\t})};\n\t\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t\t\tmax-width: 540px;\n\t\t\t\t\t\tcolor: ${palette.text.standfirst};\n\t\t\t\t\t\tli:before {\n\t\t\t\t\t\t\theight: 15px;\n\t\t\t\t\t\t\twidth: 15px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`;\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\treturn css`\n\t\t\t\t\t\t${headline.xxxsmall({\n\t\t\t\t\t\t\tfontWeight: 'bold',\n\t\t\t\t\t\t})};\n\t\t\t\t\t\tline-height: 20px;\n\t\t\t\t\t\tmargin-top: ${space[1]}px;\n\t\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t\t\tmax-width: 540px;\n\t\t\t\t\t\tcolor: ${palette.text.standfirst};\n\t\t\t\t\t`;\n\t\t\t\tdefault:\n\t\t\t\t\tswitch (format.theme) {\n\t\t\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\t\t\t\treturn css`\n\t\t\t\t\t\t\t\t${textSans.medium()}\n\t\t\t\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t\t\t\t\tmax-width: 540px;\n\t\t\t\t\t\t\t\tcolor: ${palette.text.standfirst};\n\t\t\t\t\t\t\t\ta {\n\t\t\t\t\t\t\t\t\tcolor: ${neutral[7]};\n\t\t\t\t\t\t\t\t\tborder-bottom: 1px solid ${neutral[60]};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t`;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn css`\n\t\t\t\t\t\t\t\t${headline.xxxsmall({\n\t\t\t\t\t\t\t\t\tfontWeight: 'bold',\n\t\t\t\t\t\t\t\t})};\n\t\t\t\t\t\t\t\tline-height: 20px;\n\t\t\t\t\t\t\t\tmargin-bottom: ${space[3]}px;\n\t\t\t\t\t\t\t\tmax-width: 540px;\n\t\t\t\t\t\t\t\tcolor: ${palette.text.standfirst};\n\t\t\t\t\t\t\t`;\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nconst hoverStyles = (palette: Palette) => {\n\treturn css`\n\t\ta:hover {\n\t\t\tborder-bottom: solid 1px ${palette.hover.standfirstLink};\n\t\t}\n\t`;\n};\n\nexport const Standfirst = ({ format, standfirst }: Props) => {\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<div\n\t\t\tcss={[\n\t\t\t\tnestedStyles(format, palette),\n\t\t\t\tstandfirstStyles(format, palette),\n\t\t\t\thoverStyles(palette),\n\t\t\t]}\n\t\t\tclassName={\n\t\t\t\tformat.design === ArticleDesign.Interactive\n\t\t\t\t\t? interactiveLegacyClasses.standFirst\n\t\t\t\t\t: ''\n\t\t\t}\n\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t__html: sanitise(standfirst, {\n\t\t\t\t\tallowedTags: false, // Leave tags from CAPI alone\n\t\t\t\t\tallowedAttributes: false, // Leave attributes from CAPI alone\n\t\t\t\t\ttransformTags: {\n\t\t\t\t\t\ta: (tagName, attribs) => ({\n\t\t\t\t\t\t\ttagName, // Just return anchors as is\n\t\t\t\t\t\t\tattribs: {\n\t\t\t\t\t\t\t\t...attribs, // Merge into the existing attributes\n\t\t\t\t\t\t\t\t'data-link-name': 'in standfirst link', // Add the data-link-name for Ophan to anchors\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t}}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/StarRating/StarRating.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":27,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":50,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":50,"endColumn":33},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":73,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":73,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { StarRating } from './StarRating';\n\nexport default {\n\tcomponent: StarRating,\n\ttitle: 'Components/StarRating',\n};\n\nexport const AllSizes = () => (\n\t<>\n\t\t<h1>Small</h1>\n\t\t<br />\n\t\t<StarRating rating={3} size=\"small\" />\n\t\t<br />\n\t\t<br />\n\t\t<h1>Medium</h1>\n\t\t<br />\n\t\t<StarRating rating={3} size=\"medium\" />\n\t\t<br />\n\t\t<br />\n\t\t<h1>Large</h1>\n\t\t<br />\n\t\t<StarRating rating={3} size=\"large\" />\n\t</>\n);\nAllSizes.story = { name: 'All stars sizes' };\n\nexport const SmallStory = () => (\n\t<>\n\t\t<h1>0 Star</h1>\n\t\t<StarRating rating={0} size=\"small\" />\n\t\t<br />\n\t\t<h1>1 Star</h1>\n\t\t<StarRating rating={1} size=\"small\" />\n\t\t<br />\n\t\t<h1>2 Star</h1>\n\t\t<StarRating rating={2} size=\"small\" />\n\t\t<br />\n\t\t<h1>3 Star</h1>\n\t\t<StarRating rating={3} size=\"small\" />\n\t\t<br />\n\t\t<h1>4 Star</h1>\n\t\t<StarRating rating={4} size=\"small\" />\n\t\t<br />\n\t\t<h1>5 Star</h1>\n\t\t<StarRating rating={5} size=\"small\" />\n\t</>\n);\nSmallStory.story = { name: 'Small stars' };\n\nexport const MediumStory = () => (\n\t<>\n\t\t<h1>0 Star</h1>\n\t\t<StarRating rating={0} size=\"medium\" />\n\t\t<br />\n\t\t<h1>1 Star</h1>\n\t\t<StarRating rating={1} size=\"medium\" />\n\t\t<br />\n\t\t<h1>2 Star</h1>\n\t\t<StarRating rating={2} size=\"medium\" />\n\t\t<br />\n\t\t<h1>3 Star</h1>\n\t\t<StarRating rating={3} size=\"medium\" />\n\t\t<br />\n\t\t<h1>4 Star</h1>\n\t\t<StarRating rating={4} size=\"medium\" />\n\t\t<br />\n\t\t<h1>5 Star</h1>\n\t\t<StarRating rating={5} size=\"medium\" />\n\t</>\n);\nMediumStory.story = { name: 'Medium stars' };\n\nexport const LargeStory = () => (\n\t<>\n\t\t<h1>0 Star</h1>\n\t\t<StarRating rating={0} size=\"large\" />\n\t\t<br />\n\t\t<h1>1 Star</h1>\n\t\t<StarRating rating={1} size=\"large\" />\n\t\t<br />\n\t\t<h1>2 Star</h1>\n\t\t<StarRating rating={2} size=\"large\" />\n\t\t<br />\n\t\t<h1>3 Star</h1>\n\t\t<StarRating rating={3} size=\"large\" />\n\t\t<br />\n\t\t<h1>4 Star</h1>\n\t\t<StarRating rating={4} size=\"large\" />\n\t\t<br />\n\t\t<h1>5 Star</h1>\n\t\t<StarRating rating={5} size=\"large\" />\n\t</>\n);\nLargeStory.story = { name: 'Large stars' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/StarRating/StarRating.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":12,"column":46,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":12,"endColumn":48},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":13,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":38,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Star } from '../../../static/icons/Star';\n\n// https://docs.google.com/spreadsheets/d/1QUa5Kh734J4saFc8ERjCYHZu10_-Hj7llNa2rr8urNg/edit?usp=sharing\n// A list style variations for each breakpoint\n\nconst starWrapper = css`\n\tdisplay: inline-block;\n\tpadding: 1px;\n`;\n\nconst determineSize = (size: RatingSizeType) => {\n\tswitch (size) {\n\t\tcase 'small':\n\t\t\treturn css`\n\t\t\t\tpadding: 1px;\n\t\t\t\tsvg {\n\t\t\t\t\twidth: 12px;\n\t\t\t\t\theight: 12px;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'medium':\n\t\t\treturn css`\n\t\t\t\tpadding: 1px;\n\t\t\t\tsvg {\n\t\t\t\t\twidth: 16px;\n\t\t\t\t\theight: 16px;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'large':\n\t\t\treturn css`\n\t\t\t\tpadding: 2px;\n\t\t\t\tsvg {\n\t\t\t\t\twidth: 20px;\n\t\t\t\t\theight: 20px;\n\t\t\t\t}\n\t\t\t`;\n\t}\n};\n\nexport const StarRating: React.FC<{\n\trating: number;\n\tsize: RatingSizeType;\n}> = ({ rating, size }) => (\n\t<div css={determineSize(size)}>\n\t\t<div css={starWrapper}>\n\t\t\t<Star starId={`${size}1`} isEmpty={rating < 1} />\n\t\t</div>\n\t\t<div css={starWrapper}>\n\t\t\t<Star starId={`${size}2`} isEmpty={rating < 2} />\n\t\t</div>\n\t\t<div css={starWrapper}>\n\t\t\t<Star starId={`${size}3`} isEmpty={rating < 3} />\n\t\t</div>\n\t\t<div css={starWrapper}>\n\t\t\t<Star starId={`${size}4`} isEmpty={rating < 4} />\n\t\t</div>\n\t\t<div css={starWrapper}>\n\t\t\t<Star starId={`${size}5`} isEmpty={rating < 5} />\n\t\t</div>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/StarRatingBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":8,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":8,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { StarRatingBlockComponent } from './StarRatingBlockComponent';\n\nexport default {\n\tcomponent: StarRatingBlockComponent,\n\ttitle: 'Components/StarRatingBlockComponent',\n};\n\nexport const AllSizes = () => (\n\t<>\n\t\t<h1>Small</h1>\n\t\t<br />\n\t\t<StarRatingBlockComponent rating={3} size=\"small\" />\n\t\t<br />\n\t\t<br />\n\t\t<h1>Medium</h1>\n\t\t<br />\n\t\t<StarRatingBlockComponent rating={3} size=\"medium\" />\n\t\t<br />\n\t\t<br />\n\t\t<h1>Large</h1>\n\t\t<br />\n\t\t<StarRatingBlockComponent rating={3} size=\"large\" />\n\t</>\n);\nAllSizes.story = { name: 'All stars sizes' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/StarRatingBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":41,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":69}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { brandAltBackground } from '@guardian/source-foundations';\nimport { StarRating } from './StarRating/StarRating';\n\ntype Props = {\n\trating: number;\n\tsize: RatingSizeType;\n};\n\nconst starsWrapper = css`\n\tbackground-color: ${brandAltBackground.primary};\n\tdisplay: inline-block;\n`;\n\nexport const StarRatingBlockComponent = ({ rating, size }: Props) => (\n\t<div css={starsWrapper}>\n\t\t<StarRating rating={rating} size={size} />\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/StickyBottomBanner.importable.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1783,1786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1783,1786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":65,"column":3,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":65,"endColumn":27},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":161,"column":15,"nodeType":"Identifier","messageId":"anyAssignment","endLine":161,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":191,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":191,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4634,4637],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4634,4637],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":195,"column":16,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":195,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4769,4772],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4769,4772],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":195,"column":49,"nodeType":"Identifier","messageId":"anyAssignment","endLine":195,"endColumn":53},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":200,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":220,"endColumn":6},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":297,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":297,"endColumn":18},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":297,"column":62,"nodeType":"Identifier","messageId":"invalidType","endLine":297,"endColumn":63}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type {\n\tBrazeArticleContext,\n\tBrazeMessagesInterface,\n} from '@guardian/braze-components/logic';\nimport { cmp } from '@guardian/consent-management-platform';\nimport { getCookie } from '@guardian/libs';\nimport { useEffect, useState } from 'react';\nimport type { ArticleCounts } from '../../lib/article-count';\nimport { getArticleCounts } from '../../lib/article-count';\nimport { getAlreadyVisitedCount } from '../lib/alreadyVisited';\nimport { getLocaleCode } from '../lib/getCountryCode';\nimport type {\n\tCandidateConfig,\n\tMaybeFC,\n\tSlotConfig,\n} from '../lib/messagePicker';\nimport { pickMessage } from '../lib/messagePicker';\nimport { useBraze } from '../lib/useBraze';\nimport { useOnce } from '../lib/useOnce';\nimport { useSignInGateWillShow } from '../lib/useSignInGateWillShow';\nimport {\n\tBrazeBanner,\n\tcanShowBrazeBanner,\n} from './StickyBottomBanner/BrazeBanner';\nimport {\n\tcanShowPuzzlesBanner,\n\tcanShowRRBanner,\n\tPuzzlesBanner,\n\tReaderRevenueBanner,\n} from './StickyBottomBanner/ReaderRevenueBanner';\nimport type {\n\tBannerProps,\n\tCanShowFunctionType,\n} from './StickyBottomBanner/ReaderRevenueBanner';\n\ntype Props = {\n\tcontentType: string;\n\tsectionName?: string;\n\tsection: string;\n\ttags: TagType[];\n\tisPaidContent: boolean;\n\tisPreview: boolean;\n\tshouldHideReaderRevenue: boolean;\n\tisMinuteArticle: boolean;\n\n\tcontributionsServiceUrl: string;\n\tidApiUrl: string;\n\n\tpageId: string;\n\tkeywordsId: string;\n};\n\ntype RRBannerConfig = {\n\tid: string;\n\tBannerComponent: React.FC<BannerProps>;\n\tcanShowFn: CanShowFunctionType<BannerProps>;\n\tisEnabled: boolean;\n};\n\nconst getBannerLastClosedAt = (key: string): string | undefined => {\n\tconst item = localStorage.getItem(`gu.prefs.${key}`) as undefined | string;\n\n\tif (item) {\n\t\tconst parsedItem = JSON.parse(item) as Record<string, any>;\n\t\treturn parsedItem.value;\n\t}\n\treturn item;\n};\n\nconst DEFAULT_BANNER_TIMEOUT_MILLIS = 2000;\n\nconst buildCmpBannerConfig = (): CandidateConfig<void> => ({\n\tcandidate: {\n\t\tid: 'cmpUi',\n\t\tcanShow: () =>\n\t\t\tcmp\n\t\t\t\t.willShowPrivacyMessage()\n\t\t\t\t.then((result) =>\n\t\t\t\t\tresult ? { show: true, meta: undefined } : { show: false },\n\t\t\t\t),\n\t\tshow: () => {\n\t\t\t// New CMP is not a react component and is shown outside of react's world\n\t\t\t// so render nothing if it will show\n\t\t\treturn null;\n\t\t},\n\t},\n\ttimeoutMillis: null,\n});\n\nconst buildRRBannerConfigWith = ({\n\tid,\n\tBannerComponent,\n\tcanShowFn,\n\tisEnabled,\n}: RRBannerConfig) => {\n\treturn ({\n\t\tisSignedIn,\n\t\tasyncCountryCode,\n\t\tisPreview,\n\t\tasyncArticleCounts,\n\t\tsignInGateWillShow = false,\n\t\tcontentType,\n\t\tsection,\n\t\tshouldHideReaderRevenue,\n\t\tisMinuteArticle,\n\t\tisPaidContent,\n\t\tisSensitive,\n\t\ttags,\n\t\tcontributionsServiceUrl,\n\t\tidApiUrl,\n\t}: {\n\t\tisSignedIn: boolean;\n\t\tasyncCountryCode: Promise<string>;\n\t\tisPreview: boolean;\n\t\tasyncArticleCounts: Promise<ArticleCounts | undefined>;\n\t\tsignInGateWillShow?: boolean;\n\t\tcontentType: string;\n\t\tsection: string;\n\t\tshouldHideReaderRevenue: boolean;\n\t\tisMinuteArticle: boolean;\n\t\tisPaidContent: boolean;\n\t\tisSensitive: boolean;\n\t\ttags: TagType[];\n\t\tcontributionsServiceUrl: string;\n\t\tidApiUrl: string;\n\t}): CandidateConfig<BannerProps> => {\n\t\treturn {\n\t\t\tcandidate: {\n\t\t\t\tid,\n\t\t\t\tcanShow: () =>\n\t\t\t\t\tcanShowFn({\n\t\t\t\t\t\tremoteBannerConfig: isEnabled,\n\t\t\t\t\t\tisSignedIn,\n\t\t\t\t\t\tasyncCountryCode,\n\t\t\t\t\t\tcontentType,\n\t\t\t\t\t\tsectionId: section,\n\t\t\t\t\t\tshouldHideReaderRevenue,\n\t\t\t\t\t\tisMinuteArticle,\n\t\t\t\t\t\tisPaidContent,\n\t\t\t\t\t\tisSensitive,\n\t\t\t\t\t\ttags,\n\t\t\t\t\t\tcontributionsServiceUrl,\n\t\t\t\t\t\talreadyVisitedCount: getAlreadyVisitedCount(),\n\t\t\t\t\t\tengagementBannerLastClosedAt: getBannerLastClosedAt(\n\t\t\t\t\t\t\t'engagementBannerLastClosedAt',\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsubscriptionBannerLastClosedAt: getBannerLastClosedAt(\n\t\t\t\t\t\t\t'subscriptionBannerLastClosedAt',\n\t\t\t\t\t\t),\n\t\t\t\t\t\tsection,\n\t\t\t\t\t\tisPreview,\n\t\t\t\t\t\tidApiUrl,\n\t\t\t\t\t\tsignInGateWillShow,\n\t\t\t\t\t\tasyncArticleCounts,\n\t\t\t\t\t}),\n\t\t\t\tshow:\n\t\t\t\t\t({ meta, module, fetchEmail }: BannerProps) =>\n\t\t\t\t\t() =>\n\t\t\t\t\t\t(\n\t\t\t\t\t\t\t<BannerComponent\n\t\t\t\t\t\t\t\tmeta={meta}\n\t\t\t\t\t\t\t\tmodule={module}\n\t\t\t\t\t\t\t\tfetchEmail={fetchEmail}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t),\n\t\t\t},\n\t\t\ttimeoutMillis: DEFAULT_BANNER_TIMEOUT_MILLIS,\n\t\t};\n\t};\n};\n\nconst buildPuzzlesBannerConfig = (isEnabled: boolean) =>\n\tbuildRRBannerConfigWith({\n\t\tid: 'puzzles-banner',\n\t\tBannerComponent: PuzzlesBanner,\n\t\tcanShowFn: canShowPuzzlesBanner,\n\t\tisEnabled,\n\t});\n\nconst buildReaderRevenueBannerConfig = (isEnabled: boolean) =>\n\tbuildRRBannerConfigWith({\n\t\tid: 'reader-revenue-banner',\n\t\tBannerComponent: ReaderRevenueBanner,\n\t\tcanShowFn: canShowRRBanner,\n\t\tisEnabled,\n\t});\n\nconst buildBrazeBanner = (\n\tbrazeMessages: BrazeMessagesInterface,\n\tbrazeArticleContext: BrazeArticleContext,\n): CandidateConfig<any> => ({\n\tcandidate: {\n\t\tid: 'braze-banner',\n\t\tcanShow: () => canShowBrazeBanner(brazeMessages, brazeArticleContext),\n\t\tshow: (meta: any) => () => <BrazeBanner meta={meta} />,\n\t},\n\ttimeoutMillis: DEFAULT_BANNER_TIMEOUT_MILLIS,\n});\n\nexport const StickyBottomBanner = ({\n\tcontentType,\n\tsectionName,\n\tsection,\n\ttags,\n\tisPaidContent,\n\tisPreview,\n\tshouldHideReaderRevenue,\n\tisMinuteArticle,\n\tisSensitive,\n\tcontributionsServiceUrl,\n\tidApiUrl,\n\tpageId,\n\tkeywordsId,\n\tremoteBannerSwitch,\n\tpuzzleBannerSwitch,\n}: Props & {\n\tremoteBannerSwitch: boolean;\n\tpuzzleBannerSwitch: boolean;\n\tisSensitive: boolean;\n}) => {\n\tconst { brazeMessages } = useBraze(idApiUrl);\n\n\tconst asyncCountryCode = getLocaleCode();\n\tconst isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\tconst [SelectedBanner, setSelectedBanner] = useState<React.FC | null>(null);\n\tconst [asyncArticleCounts, setAsyncArticleCounts] =\n\t\tuseState<Promise<ArticleCounts | undefined>>();\n\tconst signInGateWillShow = useSignInGateWillShow({\n\t\tisSignedIn,\n\t\tcontentType,\n\t\tsectionName,\n\t\ttags,\n\t\tisPaidContent,\n\t\tisPreview,\n\t});\n\n\tuseEffect(() => {\n\t\tsetAsyncArticleCounts(getArticleCounts(pageId, keywordsId));\n\t}, [pageId, keywordsId]);\n\n\tuseOnce(() => {\n\t\tconst CMP = buildCmpBannerConfig();\n\t\tconst puzzlesBanner = buildPuzzlesBannerConfig(puzzleBannerSwitch)({\n\t\t\tisSignedIn,\n\t\t\tasyncCountryCode: asyncCountryCode as Promise<string>,\n\t\t\tisPreview,\n\t\t\tasyncArticleCounts: asyncArticleCounts as Promise<\n\t\t\t\tArticleCounts | undefined\n\t\t\t>,\n\t\t\tcontentType,\n\t\t\tsection,\n\t\t\tshouldHideReaderRevenue,\n\t\t\tisMinuteArticle,\n\t\t\tisPaidContent,\n\t\t\tisSensitive,\n\t\t\ttags,\n\t\t\tcontributionsServiceUrl,\n\t\t\tidApiUrl,\n\t\t});\n\t\tconst readerRevenue = buildReaderRevenueBannerConfig(\n\t\t\tremoteBannerSwitch,\n\t\t)({\n\t\t\tisSignedIn,\n\t\t\tasyncCountryCode: asyncCountryCode as Promise<string>,\n\t\t\tisPreview,\n\t\t\tasyncArticleCounts: asyncArticleCounts as Promise<\n\t\t\t\tArticleCounts | undefined\n\t\t\t>,\n\t\t\tsignInGateWillShow,\n\t\t\tcontentType,\n\t\t\tsection,\n\t\t\tshouldHideReaderRevenue,\n\t\t\tisMinuteArticle,\n\t\t\tisPaidContent,\n\t\t\tisSensitive,\n\t\t\ttags,\n\t\t\tcontributionsServiceUrl,\n\t\t\tidApiUrl,\n\t\t});\n\t\tconst brazeArticleContext: BrazeArticleContext = {\n\t\t\tsection: sectionName,\n\t\t};\n\t\tconst brazeBanner = buildBrazeBanner(\n\t\t\tbrazeMessages as BrazeMessagesInterface,\n\t\t\tbrazeArticleContext,\n\t\t);\n\t\tconst bannerConfig: SlotConfig = {\n\t\t\tcandidates: [CMP, puzzlesBanner, readerRevenue, brazeBanner],\n\t\t\tname: 'banner',\n\t\t};\n\n\t\tpickMessage(bannerConfig)\n\t\t\t.then((PickedBanner: () => MaybeFC) =>\n\t\t\t\tsetSelectedBanner(PickedBanner),\n\t\t\t)\n\t\t\t.catch((e) =>\n\t\t\t\tconsole.error(`StickyBottomBanner pickMessage - error: ${e}`),\n\t\t\t);\n\t}, [isSignedIn, asyncCountryCode, brazeMessages, asyncArticleCounts]);\n\n\tif (SelectedBanner) {\n\t\treturn <SelectedBanner />;\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/StickyBottomBanner/BrazeBanner.stories.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":22,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":22,"endColumn":18},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":22,"column":63,"nodeType":"Identifier","messageId":"invalidType","endLine":22,"endColumn":64},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":36,"column":6,"nodeType":"MemberExpression","messageId":"unexpected","endLine":36,"endColumn":17},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":41,"column":6,"nodeType":"MemberExpression","messageId":"unexpected","endLine":41,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { CommonBannerComponentProps as BrazeBannerProps } from '@guardian/braze-components';\nimport type { ReactElement } from 'react';\nimport { useEffect, useState } from 'react';\n\nexport default {\n\tcomponent: 'BrazeBanner',\n\ttitle: 'Components/StickyBottomBanner/BrazeBanner',\n};\n\nexport const DefaultStory = (): ReactElement => {\n\tconst [BrazeMessage, setBrazeMessage] =\n\t\tuseState<React.FC<BrazeBannerProps>>();\n\n\tuseEffect(() => {\n\t\timport(\n\t\t\t/* webpackChunkName: \"guardian-braze-components\" */ '@guardian/braze-components'\n\t\t)\n\t\t\t.then((module) => {\n\t\t\t\tsetBrazeMessage(() => module.BrazeBannerComponent);\n\t\t\t})\n\t\t\t.catch((e) =>\n\t\t\t\tconsole.error(`braze-components dynamic import - error: ${e}`),\n\t\t\t);\n\t}, []);\n\n\tif (BrazeMessage) {\n\t\tconst header = 'A note to our digital subscribers';\n\t\tconst body =\n\t\t\t'Hi John, did you know that as a Guardian digital subscriber you can enjoy an enhanced experience of our quality, independent journalism on all your devices, including The Guardian Live app.';\n\t\tconst componentName = 'DigitalSubscriberAppBanner';\n\n\t\treturn (\n\t\t\t<BrazeMessage\n\t\t\t\tcomponentName={componentName}\n\t\t\t\tlogButtonClickWithBraze={(internalButtonId) => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t`Button with internal ID ${internalButtonId} clicked`,\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\tsubmitComponentEvent={(componentEvent) => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'submitComponentEvent called with: ',\n\t\t\t\t\t\tcomponentEvent,\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\tbrazeMessageProps={{\n\t\t\t\t\theader,\n\t\t\t\t\tbody,\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn <div>Loading...</div>;\n};\n\nDefaultStory.story = { name: 'Braze Banner' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/StickyBottomBanner/BrazeBanner.tsx","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, expected left-hand side of `??` operator to be possibly null or undefined.","line":101,"column":6,"nodeType":"MemberExpression","messageId":"neverNullish","endLine":101,"endColumn":41},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":106,"column":0,"nodeType":null,"endLine":106,"endColumn":58},{"ruleId":"eslint-comments/no-unused-disable","message":"'react-hooks/exhaustive-deps' rule is disabled but never reported.","line":106,"column":31,"severity":1,"nodeType":null,"fix":{"range":[2761,2816],"text":" "},"suggestions":[{"desc":"Remove `eslint-disable` comment.","fix":{"range":[2761,2816],"text":""}}],"endLine":106,"endColumn":58},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":121,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":121,"endColumn":48},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":134,"column":6,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":134,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport type { CommonBannerComponentProps } from '@guardian/braze-components/banner';\nimport type {\n\tBrazeArticleContext,\n\tBrazeMessagesInterface,\n} from '@guardian/braze-components/logic';\nimport { useEffect, useState } from 'react';\nimport { submitComponentEvent } from '../../browser/ophan/ophan';\nimport { getBrazeMetaFromUrlFragment } from '../../lib/braze/forceBrazeMessage';\nimport { getZIndex } from '../../lib/getZIndex';\nimport type { CanShowResult } from '../../lib/messagePicker';\n\ntype Meta = {\n\tdataFromBraze: { [key: string]: string };\n\tlogImpressionWithBraze: () => void;\n\tlogButtonClickWithBraze: (id: number) => void;\n};\n\ntype Props = {\n\tmeta: Meta;\n};\n\nconst containerStyles = css`\n\tposition: fixed;\n\tbottom: -1px;\n\twidth: 100%;\n\t${getZIndex('banner')}\n`;\n\n// We can show a Braze banner if:\n// - The Braze switch is on\n// - We have a Braze API key\n// - The user should have support messaging hidden, implying they are a contributor or subscriber\n// - We're not on a Glabs paid content page\n// - We've got a Braze UUID from the API, given a user's ID Creds\n// - The user has given Consent via CCPA or TCFV2\n// - The Braze websdk appboy initialisation does not throw an error\n// - The Braze app Boy subscription to in app message returns meta info\n// OR\n// - The force-braze-message query string arg is passed\nexport const canShowBrazeBanner = async (\n\tbrazeMessages: BrazeMessagesInterface,\n\tbrazeArticleContext: BrazeArticleContext,\n): Promise<CanShowResult<Meta>> => {\n\tconst forcedBrazeMeta = getBrazeMetaFromUrlFragment();\n\tif (forcedBrazeMeta) {\n\t\treturn {\n\t\t\tshow: true,\n\t\t\tmeta: forcedBrazeMeta,\n\t\t};\n\t}\n\n\ttry {\n\t\tconst message = await brazeMessages.getMessageForBanner(\n\t\t\tbrazeArticleContext,\n\t\t);\n\n\t\tconst logButtonClickWithBraze = (internalButtonId: number) => {\n\t\t\tmessage.logButtonClick(internalButtonId);\n\t\t};\n\n\t\tconst logImpressionWithBraze = () => {\n\t\t\t// Log the impression with Braze\n\t\t\tmessage.logImpression();\n\t\t};\n\n\t\tif (message.extras) {\n\t\t\tconst meta = {\n\t\t\t\tdataFromBraze: message.extras,\n\t\t\t\tlogImpressionWithBraze,\n\t\t\t\tlogButtonClickWithBraze,\n\t\t\t};\n\n\t\t\treturn { show: true, meta };\n\t\t}\n\n\t\treturn { show: false };\n\t} catch (e) {\n\t\treturn { show: false };\n\t}\n};\n\ntype InnerProps = {\n\tmeta: Meta;\n\tBrazeComponent: React.FC<CommonBannerComponentProps>;\n};\n\nconst BrazeBannerWithSatisfiedDependencies = ({\n\tBrazeComponent,\n\tmeta,\n}: InnerProps) => {\n\tuseEffect(() => {\n\t\t// Log the impression with Braze\n\t\tmeta.logImpressionWithBraze();\n\n\t\t// Log VIEW event with Ophan\n\t\tsubmitComponentEvent({\n\t\t\tcomponent: {\n\t\t\t\tcomponentType: 'RETENTION_ENGAGEMENT_BANNER',\n\t\t\t\tid:\n\t\t\t\t\tmeta.dataFromBraze.ophanComponentId ??\n\t\t\t\t\tmeta.dataFromBraze.componentName,\n\t\t\t},\n\t\t\taction: 'VIEW',\n\t\t});\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<BrazeComponent\n\t\t\t\tlogButtonClickWithBraze={meta.logButtonClickWithBraze}\n\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\tcomponentName={meta.dataFromBraze.componentName}\n\t\t\t\tbrazeMessageProps={meta.dataFromBraze}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const BrazeBanner = ({ meta }: Props) => {\n\tconst [BrazeComponent, setBrazeComponent] =\n\t\tuseState<React.FC<CommonBannerComponentProps>>();\n\n\tuseEffect(() => {\n\t\timport(\n\t\t\t/* webpackChunkName: \"guardian-braze-components-banner\" */ '@guardian/braze-components/banner'\n\t\t)\n\t\t\t.then((module) => {\n\t\t\t\tsetBrazeComponent(() => module.BrazeBannerComponent);\n\t\t\t})\n\t\t\t.catch((error) =>\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\terror,\n\t\t\t\t\t'braze-banner',\n\t\t\t\t),\n\t\t\t);\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t{BrazeComponent ? (\n\t\t\t\t<BrazeBannerWithSatisfiedDependencies\n\t\t\t\t\tBrazeComponent={BrazeComponent}\n\t\t\t\t\tmeta={meta}\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<div />\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/StickyBottomBanner/ReaderRevenueBanner.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":131,"column":17,"nodeType":"Punctuator","messageId":"preferNullish","endLine":131,"endColumn":19,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3762,3764],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":280,"column":8,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":280,"endColumn":11,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7041,7044],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7041,7044],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, the types have no overlap.","line":305,"column":7,"nodeType":"BinaryExpression","messageId":"noOverlapBooleanExpression","endLine":305,"endColumn":27},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":317,"column":47,"nodeType":"Identifier","messageId":"invalidType","endLine":317,"endColumn":52},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":319,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":319,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":328,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":328,"endColumn":33},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":349,"column":6,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":349,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":360,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":364,"endColumn":19},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":368,"column":9,"nodeType":"Identifier","messageId":"anyAssignment","endLine":368,"endColumn":13},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":374,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":374,"endColumn":64},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":378,"column":9,"nodeType":"Identifier","messageId":"anyAssignment","endLine":378,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { getCookie } from '@guardian/libs';\nimport {\n\tgetBanner,\n\tgetPuzzlesBanner,\n} from '@guardian/support-dotcom-components';\nimport type {\n\tBannerPayload,\n\tModuleData,\n\tModuleDataResponse,\n} from '@guardian/support-dotcom-components/dist/dotcom/src/types';\nimport { useState } from 'react';\nimport type { ArticleCounts } from '../../../lib/article-count';\nimport { trackNonClickInteraction } from '../../browser/ga/ga';\nimport { submitComponentEvent } from '../../browser/ophan/ophan';\nimport {\n\thasCmpConsentForBrowserId,\n\thasOptedOutOfArticleCount,\n\tlazyFetchEmailWithTimeout,\n\tMODULES_VERSION,\n\tsetLocalNoBannerCachePeriod,\n\tshouldHideSupportMessaging,\n\twithinLocalNoBannerCachePeriod,\n} from '../../lib/contributions';\nimport { getToday } from '../../lib/dailyArticleCount';\nimport { getZIndex } from '../../lib/getZIndex';\nimport type { CanShowResult } from '../../lib/messagePicker';\nimport { setAutomat } from '../../lib/setAutomat';\nimport { useIsInView } from '../../lib/useIsInView';\nimport { useOnce } from '../../lib/useOnce';\n\ntype BaseProps = {\n\tisSignedIn: boolean;\n\tcontentType: string;\n\tsectionId?: string;\n\tshouldHideReaderRevenue: boolean;\n\tisMinuteArticle: boolean;\n\tisPaidContent: boolean;\n\tisSensitive: boolean;\n\ttags: TagType[];\n\tcontributionsServiceUrl: string;\n\talreadyVisitedCount: number;\n\tengagementBannerLastClosedAt?: string;\n\tsubscriptionBannerLastClosedAt?: string;\n};\n\ntype BuildPayloadProps = BaseProps & {\n\tcountryCode: string;\n\toptedOutOfArticleCount: boolean;\n\tasyncArticleCounts: Promise<ArticleCounts | undefined>;\n};\n\ntype CanShowProps = BaseProps & {\n\tasyncCountryCode: Promise<string>;\n\tremoteBannerConfig: boolean;\n\tsection: string;\n\tisPreview: boolean;\n\tidApiUrl: string;\n\tsignInGateWillShow: boolean;\n\tasyncArticleCounts: Promise<ArticleCounts | undefined>;\n};\n\ntype ReaderRevenueComponentType =\n\t| 'ACQUISITIONS_SUBSCRIPTIONS_BANNER'\n\t| 'ACQUISITIONS_OTHER';\n\nexport type CanShowFunctionType<T> = (\n\tprops: CanShowProps,\n) => Promise<CanShowResult<T>>;\n\nconst getArticleCountToday = (\n\tarticleCounts: ArticleCounts | undefined,\n): number | undefined => {\n\tconst latest = articleCounts?.dailyArticleHistory[0];\n\tif (latest) {\n\t\tif (latest.day === getToday()) {\n\t\t\treturn articleCounts.dailyArticleHistory[0].count;\n\t\t}\n\t\t// article counting is enabled, but none so far today\n\t\treturn 0;\n\t}\n\treturn undefined;\n};\n\nconst buildPayload = async ({\n\tisSignedIn,\n\tshouldHideReaderRevenue,\n\tisPaidContent,\n\talreadyVisitedCount,\n\tengagementBannerLastClosedAt,\n\tsubscriptionBannerLastClosedAt,\n\tcountryCode,\n\toptedOutOfArticleCount,\n\tasyncArticleCounts,\n\tsectionId,\n\ttags,\n\tcontentType,\n}: BuildPayloadProps): Promise<BannerPayload> => {\n\tconst articleCounts = await asyncArticleCounts;\n\tconst weeklyArticleHistory = articleCounts?.weeklyArticleHistory;\n\tconst articleCountToday = getArticleCountToday(articleCounts);\n\n\tconst browserId = getCookie({ name: 'bwid', shouldMemoize: true });\n\n\treturn {\n\t\ttracking: {\n\t\t\tophanPageId: window.guardian.config.ophan.pageViewId,\n\t\t\tplatformId: 'GUARDIAN_WEB',\n\t\t\tclientName: 'dcr',\n\t\t\treferrerUrl: window.location.origin + window.location.pathname,\n\t\t},\n\t\ttargeting: {\n\t\t\talreadyVisitedCount,\n\t\t\tshouldHideReaderRevenue,\n\t\t\tisPaidContent,\n\t\t\tshowSupportMessaging: !shouldHideSupportMessaging(isSignedIn),\n\t\t\tengagementBannerLastClosedAt,\n\t\t\tsubscriptionBannerLastClosedAt,\n\t\t\tmvtId: Number(\n\t\t\t\tgetCookie({ name: 'GU_mvt_id', shouldMemoize: true }),\n\t\t\t),\n\t\t\tcountryCode,\n\t\t\tweeklyArticleHistory,\n\t\t\tarticleCountToday,\n\t\t\thasOptedOutOfArticleCount: optedOutOfArticleCount,\n\t\t\tmodulesVersion: MODULES_VERSION,\n\t\t\tsectionId,\n\t\t\ttagIds: tags.map((tag) => tag.id),\n\t\t\tcontentType,\n\t\t\tbrowserId: (await hasCmpConsentForBrowserId())\n\t\t\t\t? browserId || undefined\n\t\t\t\t: undefined,\n\t\t},\n\t};\n};\n\nexport const canShowRRBanner: CanShowFunctionType<BannerProps> = async ({\n\tremoteBannerConfig,\n\tisSignedIn,\n\tasyncCountryCode,\n\tcontentType,\n\tsectionId,\n\tshouldHideReaderRevenue,\n\tisMinuteArticle,\n\tisPaidContent,\n\tisSensitive,\n\ttags,\n\tcontributionsServiceUrl,\n\talreadyVisitedCount,\n\tengagementBannerLastClosedAt,\n\tsubscriptionBannerLastClosedAt,\n\tisPreview,\n\tidApiUrl,\n\tsignInGateWillShow,\n\tasyncArticleCounts,\n}) => {\n\tif (!remoteBannerConfig) return { show: false };\n\n\tif (\n\t\tshouldHideReaderRevenue ||\n\t\tisPaidContent ||\n\t\tisPreview ||\n\t\tsignInGateWillShow\n\t) {\n\t\t// We never serve Reader Revenue banners in this case\n\t\treturn { show: false };\n\t}\n\n\tif (\n\t\tengagementBannerLastClosedAt &&\n\t\tsubscriptionBannerLastClosedAt &&\n\t\twithinLocalNoBannerCachePeriod()\n\t) {\n\t\treturn { show: false };\n\t}\n\n\tconst countryCode = await asyncCountryCode;\n\tconst optedOutOfArticleCount = await hasOptedOutOfArticleCount();\n\tconst bannerPayload = await buildPayload({\n\t\tisSignedIn,\n\t\tcountryCode,\n\t\tcontentType,\n\t\tsectionId,\n\t\tshouldHideReaderRevenue,\n\t\tisMinuteArticle,\n\t\tisPaidContent,\n\t\ttags,\n\t\tcontributionsServiceUrl,\n\t\tisSensitive,\n\t\talreadyVisitedCount,\n\t\tengagementBannerLastClosedAt,\n\t\tsubscriptionBannerLastClosedAt,\n\t\toptedOutOfArticleCount,\n\t\tasyncArticleCounts,\n\t});\n\n\tconst response: ModuleDataResponse = await getBanner(\n\t\tcontributionsServiceUrl,\n\t\tbannerPayload,\n\t);\n\tif (!response.data) {\n\t\tif (engagementBannerLastClosedAt && subscriptionBannerLastClosedAt) {\n\t\t\tsetLocalNoBannerCachePeriod();\n\t\t}\n\t\treturn { show: false };\n\t}\n\n\tconst { module, meta } = response.data;\n\n\tconst fetchEmail = isSignedIn\n\t\t? lazyFetchEmailWithTimeout(idApiUrl)\n\t\t: undefined;\n\n\treturn { show: true, meta: { module, meta, fetchEmail } };\n};\n\nexport const canShowPuzzlesBanner: CanShowFunctionType<BannerProps> = async ({\n\tremoteBannerConfig,\n\tisSignedIn,\n\tasyncCountryCode,\n\tcontentType,\n\tsectionId,\n\tshouldHideReaderRevenue,\n\tisMinuteArticle,\n\tisPaidContent,\n\tisSensitive,\n\ttags,\n\tcontributionsServiceUrl,\n\talreadyVisitedCount,\n\tengagementBannerLastClosedAt,\n\tsubscriptionBannerLastClosedAt,\n\tsection,\n\tasyncArticleCounts,\n}) => {\n\tconst isPuzzlesPage =\n\t\tsection === 'crosswords' ||\n\t\ttags.some((tag) => tag.type === 'Series' && tag.title === 'Sudoku');\n\n\tif (shouldHideReaderRevenue) {\n\t\t// We never serve Reader Revenue banners in this case\n\t\treturn { show: false };\n\t}\n\n\tif (isPuzzlesPage && remoteBannerConfig) {\n\t\tconst countryCode = await asyncCountryCode;\n\t\tconst optedOutOfArticleCount = await hasOptedOutOfArticleCount();\n\t\tconst bannerPayload = await buildPayload({\n\t\t\tisSignedIn,\n\t\t\tcountryCode,\n\t\t\tcontentType,\n\t\t\tsectionId,\n\t\t\tshouldHideReaderRevenue,\n\t\t\tisMinuteArticle,\n\t\t\tisPaidContent,\n\t\t\ttags,\n\t\t\tcontributionsServiceUrl,\n\t\t\tisSensitive,\n\t\t\talreadyVisitedCount,\n\t\t\tengagementBannerLastClosedAt,\n\t\t\tsubscriptionBannerLastClosedAt,\n\t\t\toptedOutOfArticleCount,\n\t\t\tasyncArticleCounts,\n\t\t});\n\t\treturn getPuzzlesBanner(contributionsServiceUrl, bannerPayload).then(\n\t\t\t(response: ModuleDataResponse) => {\n\t\t\t\tif (!response.data) {\n\t\t\t\t\treturn { show: false };\n\t\t\t\t}\n\n\t\t\t\tconst { module, meta } = response.data;\n\t\t\t\treturn { show: true, meta: { module, meta } };\n\t\t\t},\n\t\t);\n\t}\n\n\treturn { show: false };\n};\n\nexport type BannerProps = {\n\tmeta: any;\n\tmodule: ModuleData;\n\tfetchEmail?: () => Promise<string | null>;\n};\n\ntype RemoteBannerProps = BannerProps & {\n\tcomponentTypeName: ReaderRevenueComponentType;\n\tdisplayEvent: string;\n};\n\nconst RemoteBanner = ({\n\tcomponentTypeName,\n\tdisplayEvent,\n\tmeta,\n\tmodule,\n\tfetchEmail,\n}: RemoteBannerProps) => {\n\tconst [Banner, setBanner] = useState<React.FC>();\n\n\tconst [hasBeenSeen, setNode] = useIsInView({\n\t\tthreshold: 0,\n\t\tdebounce: true,\n\t});\n\n\tuseOnce(() => {\n\t\tif (module === undefined || meta === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetAutomat();\n\n\t\twindow\n\t\t\t.guardianPolyfilledImport(module.url)\n\t\t\t.then((bannerModule: { [key: string]: JSX.Element }) => {\n\t\t\t\tsetBanner(() => bannerModule[module.name]); // useState requires functions to be wrapped\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconst msg = `Error importing RR banner: ${error}`;\n\n\t\t\t\tconsole.log(msg);\n\t\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t\tnew Error(msg),\n\t\t\t\t\t'rr-banner',\n\t\t\t\t);\n\t\t\t});\n\t}, []);\n\n\tuseOnce(() => {\n\t\tconst { componentType } = meta;\n\n\t\t// track banner view event in Google Analytics for subscriptions banner\n\t\tif (componentType === componentTypeName) {\n\t\t\ttrackNonClickInteraction(displayEvent);\n\t\t}\n\t}, [hasBeenSeen, meta]);\n\n\tif (Banner) {\n\t\treturn (\n\t\t\t// The css here is necessary to put the container div in view, so that we can track the view\n\t\t\t<div\n\t\t\t\tref={setNode}\n\t\t\t\tcss={css`\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\t${getZIndex('banner')}\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{}\n\t\t\t\t<Banner\n\t\t\t\t\t{...module.props}\n\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\tsubmitComponentEvent={submitComponentEvent}\n\t\t\t\t\tfetchEmail={fetchEmail}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn null;\n};\n\nexport const ReaderRevenueBanner = ({\n\tmeta,\n\tmodule,\n\tfetchEmail,\n}: BannerProps) => (\n\t<RemoteBanner\n\t\tcomponentTypeName=\"ACQUISITIONS_SUBSCRIPTIONS_BANNER\"\n\t\tdisplayEvent=\"subscription-banner : display\"\n\t\tmeta={meta}\n\t\tmodule={module}\n\t\tfetchEmail={fetchEmail}\n\t/>\n);\n\nexport const PuzzlesBanner = ({ meta, module }: BannerProps) => (\n\t<RemoteBanner\n\t\tcomponentTypeName=\"ACQUISITIONS_OTHER\"\n\t\tdisplayEvent=\"puzzles-banner : display\"\n\t\tmeta={meta}\n\t\tmodule={module}\n\t/>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SubMeta.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":64,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":64,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":85,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":85,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":106,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":106,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":127,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":127,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":148,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":148,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":169,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":169,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":190,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":190,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":211,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":211,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport {\n\tgetAllThemes,\n\tgetThemeNameAsString,\n} from '../../../../common-rendering/src/fixtures/article';\nimport { SubMeta } from './SubMeta';\n\nexport default {\n\tcomponent: SubMeta,\n\ttitle: 'Components/SubMeta',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\twidth: 620px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst subMetaKeywordLinks = [\n\t{\n\t\turl: '/world/eu',\n\t\ttitle: 'European Union',\n\t},\n\t{\n\t\turl: '/world/europe-news',\n\t\ttitle: 'Europe',\n\t},\n\t{\n\t\turl: '/environment/flooding',\n\t\ttitle: 'Flooding',\n\t},\n\t{\n\t\turl: '/world/wildfires',\n\t\ttitle: 'Wildfires',\n\t},\n\t{\n\t\turl: '/world/natural-disasters',\n\t\ttitle: 'Natural disasters and extreme weather',\n\t},\n\t{\n\t\turl: '/tone/news',\n\t\ttitle: 'news',\n\t},\n];\n\nconst subMetaSectionLinks = [\n\t{\n\t\turl: '/environment/climate-change',\n\t\ttitle: 'Climate change',\n\t},\n];\n\nexport const News = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SubMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tsubMetaKeywordLinks={subMetaKeywordLinks}\n\t\t\t\tsubMetaSectionLinks={subMetaSectionLinks}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebUrl=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tshowBottomSocialButtons={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nNews.story = { name: 'News' };\n\nexport const Sport = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SubMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t}}\n\t\t\t\tsubMetaKeywordLinks={subMetaKeywordLinks}\n\t\t\t\tsubMetaSectionLinks={subMetaSectionLinks}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebUrl=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tshowBottomSocialButtons={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nSport.story = { name: 'Sport' };\n\nexport const Culture = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SubMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t}}\n\t\t\t\tsubMetaKeywordLinks={subMetaKeywordLinks}\n\t\t\t\tsubMetaSectionLinks={subMetaSectionLinks}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebUrl=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tshowBottomSocialButtons={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nCulture.story = { name: 'Culture' };\n\nexport const Lifestyle = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SubMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t}}\n\t\t\t\tsubMetaKeywordLinks={subMetaKeywordLinks}\n\t\t\t\tsubMetaSectionLinks={subMetaSectionLinks}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebUrl=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tshowBottomSocialButtons={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nLifestyle.story = { name: 'Lifestyle' };\n\nexport const Opinion = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SubMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t}}\n\t\t\t\tsubMetaKeywordLinks={subMetaKeywordLinks}\n\t\t\t\tsubMetaSectionLinks={subMetaSectionLinks}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebUrl=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tshowBottomSocialButtons={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nOpinion.story = { name: 'Opinion' };\n\nexport const Labs = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SubMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t}}\n\t\t\t\tsubMetaKeywordLinks={subMetaKeywordLinks}\n\t\t\t\tsubMetaSectionLinks={subMetaSectionLinks}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebUrl=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tshowBottomSocialButtons={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nLabs.story = { name: 'Labs' };\n\nexport const SpecialReport = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<SubMeta\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t}}\n\t\t\t\tsubMetaKeywordLinks={subMetaKeywordLinks}\n\t\t\t\tsubMetaSectionLinks={subMetaSectionLinks}\n\t\t\t\tpageId=\"\"\n\t\t\t\twebUrl=\"\"\n\t\t\t\twebTitle=\"\"\n\t\t\t\tshowBottomSocialButtons={true}\n\t\t\t/>\n\t\t</Container>\n\t);\n};\nSpecialReport.story = { name: 'SpecialReport' };\n\nexport const DeadBlogStory = () => {\n\treturn (\n\t\t<>\n\t\t\t{getAllThemes({\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.DeadBlog,\n\t\t\t}).map((format) => (\n\t\t\t\t<Container>\n\t\t\t\t\t<p>{getThemeNameAsString(format)}</p>\n\t\t\t\t\t<SubMeta\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tsubMetaKeywordLinks={subMetaKeywordLinks}\n\t\t\t\t\t\tsubMetaSectionLinks={subMetaSectionLinks}\n\t\t\t\t\t\tpageId=\"\"\n\t\t\t\t\t\twebUrl=\"\"\n\t\t\t\t\t\twebTitle=\"\"\n\t\t\t\t\t\tshowBottomSocialButtons={true}\n\t\t\t\t\t/>\n\t\t\t\t</Container>\n\t\t\t))}\n\t\t</>\n\t);\n};\nDeadBlogStory.story = { name: 'Deadblog - All pillars' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SubMeta.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":141,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":150,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport {\n\tfrom,\n\theadline,\n\tspace,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { LinkButton } from '@guardian/source-react-components';\nimport { decidePalette } from '../lib/decidePalette';\nimport { Badge } from './Badge';\nimport { ShareIcons } from './ShareIcons';\n\nconst labelStyles = (palette: Palette) => css`\n\t${textSans.xxsmall()};\n\tdisplay: block;\n\tcolor: ${palette.text.subMetaLabel};\n`;\n\nconst badgeWrapper = css`\n\tfloat: right;\n\tmargin-top: 6px;\n`;\n\nconst bottomPadding = css`\n\tpadding-bottom: ${space[9]}px;\n\t${until.desktop} {\n\t\tpadding-bottom: ${space[5]}px;\n\t}\n`;\n\nconst setMetaWidth = (palette: Palette) => css`\n\tposition: relative;\n\t${from.tablet} {\n\t\tmax-width: 620px;\n\t}\n\t${from.desktop} {\n\t\tmargin-left: 0px;\n\t\tmargin-right: 310px;\n\t}\n\t${from.leftCol} {\n\t\tmargin-left: 150px;\n\t\tpadding-left: 10px;\n\t\tborder-left: 1px solid ${palette.border.article};\n\t}\n\t${from.wide} {\n\t\tmargin-left: 229px;\n\t}\n`;\n\nconst listStyleNone = css`\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n`;\n\nconst listWrapper = (palette: Palette) => css`\n\tpadding-bottom: 12px;\n\tmargin-bottom: 6px;\n\tborder-bottom: 1px solid ${palette.border.article};\n`;\n\nconst listItemStyles = (palette: Palette) => css`\n\tmargin-right: 5px;\n\tdisplay: inline-block;\n\ta {\n\t\tposition: relative;\n\t\tdisplay: block;\n\t\tpadding-right: 5px;\n\t\ttext-decoration: none;\n\t}\n\ta::after {\n\t\tcontent: '/';\n\t\tposition: absolute;\n\t\tpointer-events: none;\n\t\ttop: 0;\n\t\tright: -3px;\n\t\tcolor: ${palette.text.subMetaLink};\n\t}\n\ta:hover {\n\t\ttext-decoration: underline;\n\t}\n`;\n\nconst linkStyles = (palette: Palette) => css`\n\ttext-decoration: none;\n\t:hover {\n\t\ttext-decoration: underline;\n\t}\n\tcolor: ${palette.text.subMeta};\n`;\n\nconst sectionStyles = (format: ArticleFormat) => {\n\tif (format.theme === ArticleSpecial.Labs) {\n\t\treturn css`\n\t\t\t${textSans.medium()}\n\t\t\tline-height: 19px;\n\t\t`;\n\t}\n\treturn css`\n\t\t${headline.xxxsmall()};\n\t`;\n};\n\nconst keywordStyles = css`\n\t${textSans.small()};\n`;\n\nconst hideSlash = css`\n\ta::after {\n\t\tcontent: '';\n\t}\n`;\n\ntype Props = {\n\tformat: ArticleFormat;\n\tsubMetaSectionLinks: SimpleLinkType[];\n\tsubMetaKeywordLinks: SimpleLinkType[];\n\tpageId: string;\n\twebUrl: string;\n\twebTitle: string;\n\tshowBottomSocialButtons: boolean;\n\tbadge?: BadgeType;\n};\n\nconst syndicationButtonOverrides = (palette: Palette) => css`\n\t> a {\n\t\tcolor: ${palette.text.syndicationButton};\n\t\tborder-color: ${palette.border.syndicationButton};\n\t\tfont-weight: normal;\n\t}\n`;\n\nexport const SubMeta = ({\n\tformat,\n\tsubMetaKeywordLinks,\n\tsubMetaSectionLinks,\n\tpageId,\n\twebUrl,\n\twebTitle,\n\tshowBottomSocialButtons,\n\tbadge,\n}: Props) => {\n\tconst palette = decidePalette(format);\n\tconst hasSectionLinks = subMetaSectionLinks.length > 0;\n\tconst hasKeywordLinks = subMetaKeywordLinks.length > 0;\n\treturn (\n\t\t<div\n\t\t\tdata-print-layout=\"hide\"\n\t\t\tcss={\n\t\t\t\tformat.design === ArticleDesign.Interactive\n\t\t\t\t\t? [bottomPadding, setMetaWidth(palette)]\n\t\t\t\t\t: bottomPadding\n\t\t\t}\n\t\t>\n\t\t\t{badge && (\n\t\t\t\t<div css={badgeWrapper}>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\timageUrl={badge.imageUrl}\n\t\t\t\t\t\tseriesTag={badge.seriesTag}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{(hasSectionLinks || hasKeywordLinks) && (\n\t\t\t\t<>\n\t\t\t\t\t<span css={labelStyles(palette)}>Topics</span>\n\t\t\t\t\t<div css={listWrapper(palette)}>\n\t\t\t\t\t\t{hasSectionLinks && (\n\t\t\t\t\t\t\t<ul css={listStyleNone}>\n\t\t\t\t\t\t\t\t{subMetaSectionLinks.map((link, i) => (\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\t\tlistItemStyles(palette),\n\t\t\t\t\t\t\t\t\t\t\tsectionStyles(format),\n\t\t\t\t\t\t\t\t\t\t\ti ===\n\t\t\t\t\t\t\t\t\t\t\t\tsubMetaSectionLinks.length -\n\t\t\t\t\t\t\t\t\t\t\t\t\t1 && hideSlash,\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tkey={link.url}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t\t\t\t\t\t\thref={link.url}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{link.title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{hasKeywordLinks && (\n\t\t\t\t\t\t\t<ul css={listStyleNone}>\n\t\t\t\t\t\t\t\t{subMetaKeywordLinks.map((link, i) => (\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\t\tlistItemStyles(palette),\n\t\t\t\t\t\t\t\t\t\t\tkeywordStyles,\n\t\t\t\t\t\t\t\t\t\t\ti ===\n\t\t\t\t\t\t\t\t\t\t\t\tsubMetaKeywordLinks.length -\n\t\t\t\t\t\t\t\t\t\t\t\t\t1 && hideSlash,\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tkey={link.url}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tcss={linkStyles(palette)}\n\t\t\t\t\t\t\t\t\t\t\thref={link.url}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{link.title}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{showBottomSocialButtons && (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<ShareIcons\n\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\twebTitle={webTitle}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tdisplayIcons={[\n\t\t\t\t\t\t\t'facebook',\n\t\t\t\t\t\t\t'twitter',\n\t\t\t\t\t\t\t'email',\n\t\t\t\t\t\t\t'linkedIn',\n\t\t\t\t\t\t\t'whatsApp',\n\t\t\t\t\t\t\t'messenger',\n\t\t\t\t\t\t]}\n\t\t\t\t\t\tsize=\"medium\"\n\t\t\t\t\t\tcontext=\"SubMeta\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div css={syndicationButtonOverrides(palette)}>\n\t\t\t\t\t\t{format.design === ArticleDesign.Interactive ? null : (\n\t\t\t\t\t\t\t<LinkButton\n\t\t\t\t\t\t\t\tpriority=\"tertiary\"\n\t\t\t\t\t\t\t\tsize=\"xsmall\"\n\t\t\t\t\t\t\t\tdata-link-name=\"meta-syndication-article\"\n\t\t\t\t\t\t\t\thref={`https://syndication.theguardian.com/automation/?url=${encodeURIComponent(\n\t\t\t\t\t\t\t\t\twebUrl,\n\t\t\t\t\t\t\t\t)}&type=article&internalpagecode=${pageId}`}\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\trel=\"noopener\"\n\t\t\t\t\t\t\t\ttitle=\"Reuse this content\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tReuse this content\n\t\t\t\t\t\t\t</LinkButton>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SubNav.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":155,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":155,"endColumn":77},{"ruleId":"react/button-has-type","severity":1,"message":"Missing an explicit type attribute for button","line":224,"column":5,"nodeType":"JSXElement","messageId":"missingType","endLine":231,"endColumn":14}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tfrom,\n\tneutral,\n\tnews,\n\ttext,\n\ttextSans,\n} from '@guardian/source-foundations';\nimport { useEffect, useRef, useState } from 'react';\nimport { decidePalette } from '../lib/decidePalette';\n\ntype Props = {\n\tsubNavSections: SubNavType;\n\tcurrentNavLink: string;\n\tformat: ArticleFormat;\n};\n\nconst wrapperCollapsedStyles = css`\n\theight: 36px;\n\toverflow: hidden;\n\n\t${from.tablet} {\n\t\theight: 42px;\n\t}\n`;\n\nconst rootSubnavStyles = css`\n\tlist-style: none;\n\t/* https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns */\n\t/* Needs double escape char: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#es2018_revision_of_illegal_escape_sequences */\n\tli::before {\n\t\tcontent: '\\\\200B'; /* Zero width space */\n\t\tdisplay: block;\n\t\theight: 0;\n\t\twidth: 0;\n\t}\n\tpadding: 0 5px;\n\n\t${from.mobileLandscape} {\n\t\tpadding: 0 15px;\n\t}\n\n\tli {\n\t\tfloat: left;\n\t\tdisplay: block;\n\t}\n`;\n\nconst expandedStyles = css`\n\t${rootSubnavStyles};\n`;\n\nconst collapsedStyles = css`\n\t${rootSubnavStyles};\n\tmax-width: calc(100% - 60px);\n\n\t${from.mobileLandscape} {\n\t\tmax-width: calc(100% - 70px);\n\t}\n`;\n\nconst fontStyle = css`\n\t${textSans.small()};\n\tfont-size: 14px;\n\t${from.tablet} {\n\t\t${textSans.medium()};\n\t\tfont-size: 16px;\n\t}\n\tfont-weight: 500;\n\tcolor: ${neutral[7]};\n\tpadding: 0 5px;\n\theight: 36px;\n\t/* Design System: Line height is being used here for centering layout, we need the primitives */\n\tline-height: 36px;\n\n\t${from.tablet} {\n\t\theight: 42px;\n\t\t/* Design System: Line height is being used here for centering layout, we need the primitives */\n\t\tline-height: 42px;\n\t}\n`;\n\nconst linkStyle = (palette: Palette) => css`\n\t${fontStyle};\n\tfloat: left;\n\ttext-decoration: none;\n\n\t:hover {\n\t\tcolor: ${palette.text.articleLinkHover};\n\t}\n\n\t:focus {\n\t\tline-height: 26px;\n\t\theight: 26px;\n\t\tmargin-top: 5px;\n\n\t\t${from.tablet} {\n\t\t\theight: 32px;\n\t\t\tline-height: 32px;\n\t\t}\n\t}\n`;\n\nconst selected = css`\n\tfont-weight: 700;\n`;\n\nconst spaceBetween = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n`;\n\nconst showMoreStyle = css`\n\t${fontStyle};\n\n\tpadding-left: 10px;\n\tpadding-right: 10px;\n\n\tcursor: pointer;\n\tborder: none;\n\tbackground-color: transparent;\n\tcolor: ${text.supporting};\n\n\t:hover {\n\t\tcolor: ${news[400]};\n\t}\n\n\t${from.desktop} {\n\t\tdisplay: none;\n\t}\n`;\n\nconst listItemStyles = (palette: Palette) => css`\n\t:after {\n\t\tcontent: '';\n\t\tdisplay: inline-block;\n\t\twidth: 0;\n\t\theight: 0;\n\t\tborder-top: 6px solid transparent;\n\t\tborder-bottom: 6px solid transparent;\n\t\tborder-left: 10px solid ${neutral[7]};\n\t\tmargin-top: 12px;\n\t\tmargin-left: 2px;\n\t\tborder-left-color: ${palette.border.subNav};\n\n\t\t${from.tablet} {\n\t\t\tmargin-top: 16px;\n\t\t}\n\t}\n`;\n\nconst trimLeadingSlash = (url: string): string =>\n\turl.substr(0, 1) === '/' ? url.slice(1) : url;\n\nexport const SubNav = ({ subNavSections, currentNavLink, format }: Props) => {\n\tconst [showMore, setShowMore] = useState(false);\n\tconst [isExpanded, setIsExpanded] = useState(false);\n\tconst ulRef = useRef<HTMLUListElement>(null);\n\tconst palette = decidePalette(format);\n\n\tuseEffect(() => {\n\t\tconst ulEl = ulRef.current;\n\t\tif (ulEl) {\n\t\t\tconst lis = ulEl.querySelectorAll('li');\n\t\t\tconst lastLi = lis[lis.length - 1];\n\n\t\t\tconst ulTop = ulEl.getBoundingClientRect().top;\n\t\t\tconst liTop = lastLi.getBoundingClientRect().top;\n\n\t\t\tsetShowMore(ulTop !== liTop);\n\t\t} else {\n\t\t\tsetShowMore(false);\n\t\t}\n\t}, []);\n\n\tconst collapseWrapper = !showMore || !isExpanded;\n\tconst expandSubNav = !showMore || isExpanded;\n\n\treturn (\n\t\t<div\n\t\t\tdata-print-layout=\"hide\"\n\t\t\tcss={[collapseWrapper && wrapperCollapsedStyles, spaceBetween]}\n\t\t\tdata-cy=\"sub-nav\"\n\t\t\tdata-component=\"sub-nav\"\n\t\t>\n\t\t\t<ul\n\t\t\t\tref={ulRef}\n\t\t\t\tcss={[expandSubNav ? expandedStyles : collapsedStyles]}\n\t\t\t>\n\t\t\t\t{subNavSections.parent && (\n\t\t\t\t\t<li\n\t\t\t\t\t\tkey={subNavSections.parent.url}\n\t\t\t\t\t\tcss={listItemStyles(palette)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tdata-src-focus-disabled={true}\n\t\t\t\t\t\t\tcss={linkStyle(palette)}\n\t\t\t\t\t\t\thref={subNavSections.parent.url}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{subNavSections.parent.title}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t)}\n\t\t\t\t{subNavSections.links.map((link) => (\n\t\t\t\t\t<li key={link.url}>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tcss={linkStyle(palette)}\n\t\t\t\t\t\t\tdata-src-focus-disabled={true}\n\t\t\t\t\t\t\thref={link.url}\n\t\t\t\t\t\t\tdata-link-name={`nav2 : subnav : ${trimLeadingSlash(\n\t\t\t\t\t\t\t\tlink.url,\n\t\t\t\t\t\t\t)}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{link.title === currentNavLink ? (\n\t\t\t\t\t\t\t\t<span css={selected}>{link.title}</span>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\tlink.title\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t\t{showMore && (\n\t\t\t\t<button\n\t\t\t\t\tonClick={() => setIsExpanded(!isExpanded)}\n\t\t\t\t\tcss={showMoreStyle}\n\t\t\t\t\tdata-link-name=\"nav2 : subnav-toggle\"\n\t\t\t\t\tdata-cy=\"subnav-toggle\"\n\t\t\t\t>\n\t\t\t\t\t{isExpanded ? 'Less' : 'More'}\n\t\t\t\t</button>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SubheadingBlockComponent.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SupportingContent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":45,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":45,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":54,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":54,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":63,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":63,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":143,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":143,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":179,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":179,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":216,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":216,"endColumn":40},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":262,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":262,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":305,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":305,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":355,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":355,"endColumn":32},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":386,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":386,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { breakpoints } from '@guardian/source-foundations';\nimport type { Props as CardProps } from './Card/Card';\nimport { Card } from './Card/Card';\nimport { SupportingContent } from './SupportingContent';\n\nexport default {\n\tcomponent: SupportingContent,\n\ttitle: 'Components/SupportingContent',\n};\n\nconst basicCardProps: CardProps = {\n\tlinkTo: '',\n\tformat: {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Standard,\n\t\ttheme: ArticlePillar.News,\n\t},\n\theadlineText: 'Headline text',\n\ttrailText:\n\t\t'The 29-year-old source behind the biggest intelligence leak in the NSA’s history explains his motives',\n\theadlineSize: 'medium',\n\tkickerText: '',\n\timageUrl:\n\t\t'https://i.guim.co.uk/img/media/6537e163c9164d25ec6102641f6a04fa5ba76560/0_0_5472_3648/master/5472.jpg?width=1140&quality=85&s=15053eb16d6829d670fb348d8d26aabd',\n\timagePosition: 'top',\n};\n\nconst aBasicLink = {\n\theadline: 'Headline',\n\turl: 'https://www.theguardian.com',\n\tformat: {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Standard,\n\t\ttheme: ArticlePillar.News,\n\t},\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<SupportingContent\n\t\t\tsupportingContent={[aBasicLink]}\n\t\t\talignment=\"horizontal\"\n\t\t/>\n\t);\n};\n\nexport const WithKicker = () => {\n\treturn (\n\t\t<SupportingContent\n\t\t\tsupportingContent={[{ ...aBasicLink, kickerText: 'Kicket text' }]}\n\t\t\talignment=\"horizontal\"\n\t\t/>\n\t);\n};\n\nexport const Themes = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 300px;\n\t\t\t`}\n\t\t>\n\t\t\t<Card\n\t\t\t\t{...basicCardProps}\n\t\t\t\tsupportingContent={[\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\tkickerText: 'News',\n\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t...aBasicLink.format,\n\t\t\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\tkickerText: 'Sport',\n\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t...aBasicLink.format,\n\t\t\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\tkickerText: 'Lifestyle',\n\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t...aBasicLink.format,\n\t\t\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\tkickerText: 'Opinion',\n\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t...aBasicLink.format,\n\t\t\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\tkickerText: 'Culture',\n\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t...aBasicLink.format,\n\t\t\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\tkickerText: 'SpecialReport',\n\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t...aBasicLink.format,\n\t\t\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\tkickerText: 'Labs',\n\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t...aBasicLink.format,\n\t\t\t\t\t\t\ttheme: ArticleSpecial.Labs,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\timagePosition=\"top\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tlinkTo=\"\"\n\t\t\t\theadlineText=\"Different themes\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const Vertical = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 300px;\n\t\t\t`}\n\t\t>\n\t\t\t<Card\n\t\t\t\t{...basicCardProps}\n\t\t\t\tsupportingContent={[\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Vertical 1',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Vertical 2',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Vertical 3',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\timagePosition=\"top\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tlinkTo=\"\"\n\t\t\t\theadlineText=\"Vertical\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const Horizontal = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 700px;\n\t\t\t`}\n\t\t>\n\t\t\t<Card\n\t\t\t\t{...basicCardProps}\n\t\t\t\tsupportingContent={[\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Horizontal 1',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Horizontal 2',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Horizontal 3',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\timagePosition=\"right\"\n\t\t\t\timageSize=\"large\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tlinkTo=\"\"\n\t\t\t\theadlineText=\"Horizontal\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const HorizontalOnMobile = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tmax-width: 700px;\n\t\t\t`}\n\t\t>\n\t\t\t<Card\n\t\t\t\t{...basicCardProps}\n\t\t\t\tsupportingContent={[\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Horizontal 1',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Horizontal 2',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Horizontal 3',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\timagePosition=\"right\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tlinkTo=\"\"\n\t\t\t\theadlineText=\"Horizontal\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\nHorizontalOnMobile.story = {\n\tparameters: {\n\t\tchromatic: {\n\t\t\tviewports: [breakpoints.mobile],\n\t\t},\n\t\tviewport: {\n\t\t\tdefaultViewport: 'mobileMedium',\n\t\t},\n\t},\n};\n\nexport const LongText = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 700px;\n\t\t\t`}\n\t\t>\n\t\t\t<Card\n\t\t\t\t{...basicCardProps}\n\t\t\t\tsupportingContent={[\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline:\n\t\t\t\t\t\t\t'The 29-year-old source behind the biggest intelligence leak in the NSA’s history explains his motives',\n\t\t\t\t\t\tkickerText: 'Long',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline:\n\t\t\t\t\t\t\t'The 29-year-old source behind the biggest intelligence leak in the NSA’s history explains his motives',\n\t\t\t\t\t\tkickerText: 'Long',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline:\n\t\t\t\t\t\t\t'The 29-year-old source behind the biggest intelligence leak in the NSA’s history explains his motives',\n\t\t\t\t\t\tkickerText: 'Long',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\timagePosition=\"left\"\n\t\t\t\timageSize=\"large\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tlinkTo=\"\"\n\t\t\t\theadlineText=\"Very long sublinks\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const MoreThanThree = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 700px;\n\t\t\t`}\n\t\t>\n\t\t\t<Card\n\t\t\t\t{...basicCardProps}\n\t\t\t\tsupportingContent={[\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Lots of links',\n\t\t\t\t\t\tkickerText: 'Kicker',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Lots of links',\n\t\t\t\t\t\tkickerText: 'Kicker',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Lots of links',\n\t\t\t\t\t\tkickerText: 'Kicker',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Lots of links',\n\t\t\t\t\t\tkickerText: 'Kicker',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Lots of links',\n\t\t\t\t\t\tkickerText: 'Kicker',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\timagePosition=\"left\"\n\t\t\t\timageSize=\"large\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tlinkTo=\"\"\n\t\t\t\theadlineText=\"With five links\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const OneSublink = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 700px;\n\t\t\t`}\n\t\t>\n\t\t\t<Card\n\t\t\t\t{...basicCardProps}\n\t\t\t\tsupportingContent={[\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Headline',\n\t\t\t\t\t\tkickerText: 'Kicker',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\timagePosition=\"left\"\n\t\t\t\timageSize=\"large\"\n\t\t\t\ttrailText=\"When the image is positioned horizontally and there is only one sublink, it appears under the headline\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tlinkTo=\"\"\n\t\t\t\theadlineText=\"With one link\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nexport const TwoSublinks = () => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\twidth: 700px;\n\t\t\t`}\n\t\t>\n\t\t\t<Card\n\t\t\t\t{...basicCardProps}\n\t\t\t\tsupportingContent={[\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Headline 1',\n\t\t\t\t\t\tkickerText: 'Kicker',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t...aBasicLink,\n\t\t\t\t\t\theadline: 'Headline 2',\n\t\t\t\t\t\tkickerText: 'Kicker',\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\timagePosition=\"left\"\n\t\t\t\timageSize=\"large\"\n\t\t\t\ttrailText=\"When there are only two sublinks they appear under the headline vertically stacked\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tlinkTo=\"\"\n\t\t\t\theadlineText=\"With two links\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/SupportingContent.tsx","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":21,"column":48,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":21,"endColumn":50},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":22,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":34,"endColumn":3},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":61,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":61,"endColumn":78}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign } from '@guardian/libs';\nimport { from, until } from '@guardian/source-foundations';\nimport { CardHeadline } from './CardHeadline';\n\ntype Alignment = 'vertical' | 'horizontal';\n\ntype Props = {\n\tsupportingContent: DCRSupportingContent[];\n\talignment: Alignment;\n};\n\nconst wrapperStyles = css`\n\tposition: relative;\n\tdisplay: flex;\n\tmargin-left: 5px;\n\tmargin-right: 5px;\n\tmargin-bottom: 5px;\n`;\n\nconst directionStyles = (alignment: Alignment) => {\n\tswitch (alignment) {\n\t\tcase 'horizontal':\n\t\t\treturn css`\n\t\t\t\tflex-direction: column;\n\t\t\t\t${from.phablet} {\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t}\n\t\t\t`;\n\t\tcase 'vertical':\n\t\t\treturn css`\n\t\t\t\tflex-direction: column;\n\t\t\t`;\n\t}\n};\n\nconst liStyles = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex: 1;\n\tpadding-top: 2px;\n\tposition: relative;\n\tmargin-top: 8px;\n\t${from.phablet} {\n\t\tmargin-bottom: 4px;\n\t}\n`;\n\nconst leftMargin = css`\n\t${from.desktop} {\n\t\tmargin-left: 10px;\n\t}\n`;\n\nconst bottomMargin = css`\n\t${until.phablet} {\n\t\tmargin-bottom: 8px;\n\t}\n`;\n\nexport const SupportingContent = ({ supportingContent, alignment }: Props) => {\n\treturn (\n\t\t<ul css={[wrapperStyles, directionStyles(alignment)]}>\n\t\t\t{supportingContent.map((subLink: DCRSupportingContent, index) => {\n\t\t\t\t// The model has this property as optional but it is very likely\n\t\t\t\t// to exist\n\t\t\t\tif (!subLink.headline) return <></>;\n\t\t\t\t// The kicker defaults to 'Live' when the article is a liveblog\n\t\t\t\tconst kickerText =\n\t\t\t\t\tsubLink.format.design === ArticleDesign.LiveBlog\n\t\t\t\t\t\t? 'Live'\n\t\t\t\t\t\t: subLink.kickerText;\n\t\t\t\tconst shouldPadLeft = index > 0 && alignment === 'horizontal';\n\t\t\t\treturn (\n\t\t\t\t\t<li\n\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\tliStyles,\n\t\t\t\t\t\t\tshouldPadLeft && leftMargin,\n\t\t\t\t\t\t\tindex === supportingContent.length - 1 &&\n\t\t\t\t\t\t\t\tbottomMargin,\n\t\t\t\t\t\t]}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CardHeadline\n\t\t\t\t\t\t\theadlineText={subLink.headline}\n\t\t\t\t\t\t\tkickerText={kickerText}\n\t\t\t\t\t\t\tformat={subLink.format}\n\t\t\t\t\t\t\tsize=\"tiny\"\n\t\t\t\t\t\t\tshowSlash={false}\n\t\t\t\t\t\t\tshowLine={true}\n\t\t\t\t\t\t\tlinkTo={subLink.url}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t})}\n\t\t</ul>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/TableBlockComponent.tsx","messages":[{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":47,"column":4,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":47,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { border, neutral, text, textSans } from '@guardian/source-foundations';\nimport { unescapeData } from '../../lib/escapeData';\n\nconst tableEmbed = css`\n\t.table--football {\n\t\twidth: 100%;\n\t\tbackground: ${neutral[97]};\n\t\tborder-top: 0.0625rem solid ${border.focusHalo};\n\t\tborder-collapse: inherit;\n\t\ttr:nth-child(odd) > td {\n\t\t\tbackground-color: ${neutral[93]};\n\t\t}\n\t\tth {\n\t\t\tpadding: 0.5rem;\n\t\t}\n\t\ttd {\n\t\t\tpadding: 0.5rem;\n\t\t}\n\t\ttr {\n\t\t\t${textSans.xxsmall()};\n\t\t}\n\t\tthead {\n\t\t\ttr {\n\t\t\t\tfont-weight: 800;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\t\t}\n\t\ttr > th:first-child,\n\t\ttd:first-child {\n\t\t\tcolor: ${text.supporting};\n\t\t}\n\t\t.table-column--main {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n\tmargin-bottom: 16px;\n`;\n\nexport const TableBlockComponent: React.FC<{\n\telement: TableBlockElement;\n}> = ({ element }) => {\n\treturn (\n\t\t<div\n\t\t\tcss={tableEmbed}\n\t\t\tdata-cy=\"football-table-embed\"\n\t\t\tdangerouslySetInnerHTML={{ __html: unescapeData(element.html) }}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/TextBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":32,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":32,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":49,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":49,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":67,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":67,"endColumn":35},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":85,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":85,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":103,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":103,"endColumn":28},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":121,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":121,"endColumn":36},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":139,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":139,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":157,"column":26,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":157,"endColumn":31},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":175,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":175,"endColumn":34},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":193,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":193,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":210,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":210,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { TextBlockComponent } from './TextBlockComponent';\n\nconst html =\n\t'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesquepharetra libero nec varius feugiat. Nulla commodo sagittis erat amalesuada. Ut iaculis interdum eros, et tristique ex. In veldignissim arcu. Nulla nisi urna, laoreet a aliquam at, viverra eueros. Proin imperdiet pellentesque turpis sed luctus. Donecdignissim lacus in risus fermentum maximus eu vel justo. Duis nontortor ac elit dapibus imperdiet ut at risus. Etiam pretium, odioeget accumsan venenatis, tortor mi aliquet nisl, vel ullamcorperneque nulla vel elit. Etiam porta mauris nec sagittis luctus.</p>';\nconst quotedHtml =\n\t'<p>“Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesquepharetra libero nec varius feugiat. Nulla commodo sagittis erat amalesuada. Ut iaculis interdum eros, et tristique ex. In veldignissim arcu. Nulla nisi urna, laoreet a aliquam at, viverra eueros. Proin imperdiet pellentesque turpis sed luctus. Donecdignissim lacus in risus fermentum maximus eu vel justo. Duis nontortor ac elit dapibus imperdiet ut at risus. Etiam pretium, odioeget accumsan venenatis, tortor mi aliquet nisl, vel ullamcorperneque nulla vel elit. Etiam porta mauris nec sagittis luctus.</p>';\nconst shortHtml =\n\t'Since its arrival on Netflix last month, The Queen’s Gambit has attracted a staggering <a href=\"https://www.theguardian.com/tv-and-radio/2020/nov/26/the-queens-gambit-netflix-most-watched-series-hit-chess\">62 million</a> viewers – making it the streaming service’s most-watched scripted limited series.';\nconst differentWrapperTags =\n\t'<span><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesquepharetra libero nec varius feugiat. Nulla commodo sagittis erat amalesuada. Ut iaculis interdum eros, et tristique ex. In veldignissim arcu. Nulla nisi urna, laoreet a aliquam at, viverra eueros. Proin imperdiet pellentesque turpis sed luctus. Donecdignissim lacus in risus fermentum maximus eu vel justo. Duis nontortor ac elit dapibus imperdiet ut at risus. Etiam pretium, odioeget accumsan venenatis, tortor mi aliquet nisl, vel ullamcorperneque nulla vel elit. Etiam porta mauris nec sagittis luctus.</p></span>';\nconst aListHtml =\n\t'<ul><li>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesquepharetra libero nec varius feugiat.</li><li>Nulla commodo sagittis erat amalesuada. Ut iaculis interdum eros, et tristique ex. In veldignissim arcu. Nulla nisi urna, laoreet a aliquam at, viverra eueros. Proin imperdiet pellentesque turpis sed luctus. Donecdignissim lacus in risus fermentum maximus eu vel justo. Duis nontortor ac elit dapibus imperdiet ut at risus. Etiam pretium, odioeget accumsan venenatis, tortor mi aliquet nisl, vel ullamcorperneque nulla vel elit. Etiam porta mauris nec sagittis luctus.</li></ul>';\nconst badMarkup =\n\t'<html>\\n <head></head>\\n <body>\\n  <p>In its <a href=\"https://www.admiral.com/magazine/guides/home/the-jargon-free-guide-to-bicycle-insurance\" title=\"\">guide to protecting your bike</a>, the insurer Admiral cites the Kryptonite New York M18 U-lock as being good quality. It costs <a href=\"http://go.theguardian.com/?id=114047X1572903&amp;url=https%3A%2F%2Fwww.wiggle.co.uk%2Fkryptonite-new-york-m18-u-lock&amp;sref=https://www.theguardian.com/money/2020/jul/18/bike-theft-uk-cycle-sales-best-locks-insurance-bicycle.json?dcr\" title=\"\">£82.99 at Wiggle.co.uk</a>. Add a <a href=\"http://go.theguardian.com/?id=114047X1572903&amp;url=https%3A%2F%2Fwww.wiggle.co.uk%2Fkryptonite-kryptoflex-7-foot-cable-bike-lock%2F&amp;sref=https://www.theguardian.com/money/2020/jul/18/bike-theft-uk-cycle-sales-best-locks-insurance-bicycle.json?dcr\" title=\"\">cable</a> for another tenner, so you can loop it through the wheels and secure them, too.</p>\\n </body>\\n</html>';\nconst htmlWithDot =\n\t'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesquepharetra libero nec varius feugiat. Nulla commodo sagittis erat amalesuada. Ut iaculis interdum eros, et tristique ex. In veldignissim arcu. Nulla nisi urna, laoreet a aliquam at, viverra eueros. Proin imperdiet pellentesque turpis sed luctus. Donecdignissim lacus in risus fermentum maximus eu vel justo. Duis nontortor ac elit dapibus imperdiet ut at risus. Etiam pretium, odioeget accumsan venenatis, tortor mi aliquet nisl, vel ullamcorperneque nulla vel elit.<br><span data-dcr-style=\"bullet\"></span> Etiam porta mauris nec sagittis luctus.</p>';\nconst longWords =\n\t'<p>Test In Mobile Modes</p><br><p>This is to test whether extremely long edge case words are wrapped when in mobile portrait. Word one: Pneumonoultramicroscopicsilicovolcanoconiosis. Word two: Hippopotomonstrosesquippedaliophobia. Word three: Pseudopseudohypoparathyroidism. Link test: https://www.theguardian.com/commentisfree/2021/mar/24/trust-britain-covid-vaccine-compromise?dcr</p>';\n\nconst containerStyles = css`\n\tmax-width: 620px;\n\tmargin: 20px;\n`;\n\nexport default {\n\tcomponent: TextBlockComponent,\n\ttitle: 'Components/TextBlockComponent',\n};\n\nexport const defaultStory = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={html}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\ndefaultStory.story = { name: 'default' };\n\nexport const DropCap = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={html}\n\t\t\t\tforceDropCap={true}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Immersive,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nDropCap.story = { name: 'with drop cap' };\n\nexport const QuotedDropCap = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={quotedHtml}\n\t\t\t\tforceDropCap={false}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Opinion,\n\t\t\t\t\tdesign: ArticleDesign.Comment,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={true}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nQuotedDropCap.story = { name: 'with quoted drop cap' };\n\nexport const ShortText = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={shortHtml}\n\t\t\t\tforceDropCap={true}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nShortText.story = { name: 'with text less than 200 characters' };\n\nexport const NoTags = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={differentWrapperTags}\n\t\t\t\tforceDropCap={true}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nNoTags.story = { name: 'with no p tags' };\n\nexport const FeatureDropCap = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={html}\n\t\t\t\tforceDropCap={false}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\tdesign: ArticleDesign.Feature,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={true}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nFeatureDropCap.story = { name: 'with design of Feature' };\n\nexport const AList = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={aListHtml}\n\t\t\t\tforceDropCap={true}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nAList.story = { name: 'with a list' };\n\nexport const BadMarkup = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={badMarkup}\n\t\t\t\tforceDropCap={false}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nBadMarkup.story = { name: 'with a bad markup' };\n\nexport const SubSupscript = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml=\"<p><strong>P<sub>kj</sub> = (1-r<sub>j</sub>)C<sup>kj</sup> + r<sub>j</sub>(C<sub>kj</sub> + q<sub>kj</sub> - p<sub>kj</sub>)</strong></p><p><var>a<sup>2</sup></var> + <var>b<sup>2</sup></var> = <var>c<sup>2</sup></var></p>\"\n\t\t\t\tforceDropCap={false}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nSubSupscript.story = { name: 'with a sub and sup' };\n\nexport const dotStory = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={htmlWithDot}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\ndotStory.story = { name: 'With Dot' };\n\nexport const longWordStory = () => {\n\treturn (\n\t\t<div css={containerStyles}>\n\t\t\t<TextBlockComponent\n\t\t\t\thtml={longWords}\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tisFirstParagraph={false}\n\t\t\t/>\n\t\t</div>\n\t);\n};\nlongWordStory.story = { name: 'Long Words' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/TextBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":258,"column":15,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":258,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ClassNames } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tbody,\n\tfrom,\n\tneutral,\n\ttextSans,\n\tuntil,\n} from '@guardian/source-foundations';\nimport type { IOptions } from 'sanitize-html';\nimport sanitise from 'sanitize-html';\nimport { unwrapHtml } from '../../model/unwrapHtml';\nimport { decidePalette } from '../lib/decidePalette';\nimport { DropCap } from './DropCap';\nimport { RewrappedComponent } from './RewrappedComponent';\n\ntype Props = {\n\thtml: string;\n\tformat: ArticleFormat;\n\tisFirstParagraph: boolean;\n\tforceDropCap?: boolean;\n};\n\nconst isLetter = (letter: string) => {\n\treturn letter.toLowerCase() !== letter.toUpperCase();\n};\n\nconst isOpenQuote = (t: string): boolean => {\n\treturn [\n\t\t\"'\" /* apostrophe  */,\n\t\t'\"' /* quotation mark */,\n\t\t'\\u2018' /* open single quote */,\n\t\t'\\u201c' /* open double quote */,\n\t].includes(t);\n};\n\nconst isLongEnough = (html: string): boolean => {\n\t// Only show a dropcap if the block of text is 200 characters or\n\t// longer. But we first need to strip any markup from our html string so\n\t// that we accurately measure the length that the reader will see. Eg. remove\n\t// link tag html.\n\t// https://stackoverflow.com/questions/822452/strip-html-from-text-javascript is\n\t// a good discussion on how this can be done. Of the two approaches, regex and\n\t// DOM, both have unikely failure scenarios but the impact for failure with DOM\n\t// manipulation carries a potential security risk so we're using a regex.\n\treturn html.replace(/(<([^>]+)>)/gi, '').length >= 199;\n};\n\nconst decideDropCapLetter = (html: string): string => {\n\tconst first = html.substr(0, 1);\n\tif (isOpenQuote(first)) {\n\t\tconst second = html.substr(1, 1);\n\n\t\tif (!isLetter(second)) {\n\t\t\treturn '';\n\t\t}\n\t\treturn `${first}${second}`;\n\t}\n\n\treturn isLetter(first) ? first : '';\n};\n\nconst allowsDropCaps = (format: ArticleFormat) => {\n\tif (format.theme === ArticleSpecial.Labs) return false;\n\tif (format.display === ArticleDisplay.Immersive) return true;\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Feature:\n\t\tcase ArticleDesign.Comment:\n\t\tcase ArticleDesign.Review:\n\t\tcase ArticleDesign.Interview:\n\t\tcase ArticleDesign.PhotoEssay:\n\t\tcase ArticleDesign.Recipe:\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n};\n\nconst shouldShowDropCap = ({\n\tformat,\n\tisFirstParagraph,\n\tforceDropCap,\n}: {\n\tformat: ArticleFormat;\n\tisFirstParagraph: boolean;\n\tforceDropCap?: boolean;\n}): boolean => {\n\tif (allowsDropCaps(format)) {\n\t\t// When dropcaps are allowed, we always mark the first paragraph as a drop cap\n\t\tif (isFirstParagraph) return true;\n\t\t// For subsequent blocks of text, we only add a dropcap if a dinkus was inserted\n\t\t// prior to it in the article body (Eg: * * *), causing the forceDropCap flag to\n\t\t// be set\n\t\tif (forceDropCap) return true;\n\t}\n\treturn false;\n};\n\n/**\n * https://www.npmjs.com/package/sanitize-html#default-options\n */\nconst sanitiserOptions: IOptions = {\n\tallowedTags: false, // Leave tags from CAPI alone\n\tallowedAttributes: false, // Leave attributes from CAPI alone\n\ttransformTags: {\n\t\ta: (tagName, attribs) => {\n\t\t\tconst mailto = attribs.href.startsWith('mailto:')\n\t\t\t\t? ` | ${attribs.href}`\n\t\t\t\t: '';\n\n\t\t\treturn {\n\t\t\t\ttagName, // Just return anchors as is\n\t\t\t\tattribs: {\n\t\t\t\t\t...attribs, // Merge into the existing attributes\n\t\t\t\t\t...{\n\t\t\t\t\t\t'data-link-name': `in body link${mailto}`, // Add the data-link-name for Ophan to anchors\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n};\n\nexport const TextBlockComponent = ({\n\thtml,\n\tformat,\n\tforceDropCap,\n\tisFirstParagraph,\n}: Props): JSX.Element | null => (\n\t<ClassNames>\n\t\t{({ css }) => {\n\t\t\tconst paraStyles = css`\n\t\t\t\tmargin-bottom: 16px;\n\t\t\t\tword-break: break-word;\n\t\t\t\t${format.theme === ArticleSpecial.Labs\n\t\t\t\t\t? textSans.medium()\n\t\t\t\t\t: body.medium()};\n\n\t\t\t\tul {\n\t\t\t\t\tmargin-bottom: 12px;\n\t\t\t\t}\n\n\t\t\t\t${from.tablet} {\n\t\t\t\t\tul {\n\t\t\t\t\t\tmargin-bottom: 16px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tli {\n\t\t\t\t\tmargin-bottom: 6px;\n\t\t\t\t\tpadding-left: 20px;\n\n\t\t\t\t\tp {\n\t\t\t\t\t\tdisplay: inline;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tli:before {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\theight: 13px;\n\t\t\t\t\twidth: 13px;\n\t\t\t\t\tbackground-color: ${neutral[86]};\n\t\t\t\t\tmargin-left: -20px;\n\t\t\t\t\tmargin-right: 7px;\n\t\t\t\t}\n\n\t\t\t\t/* Subscript and Superscript styles */\n\t\t\t\tsub {\n\t\t\t\t\tbottom: -0.25em;\n\t\t\t\t}\n\n\t\t\t\tsup {\n\t\t\t\t\ttop: -0.5em;\n\t\t\t\t}\n\n\t\t\t\tsub,\n\t\t\t\tsup {\n\t\t\t\t\tfont-size: 75%;\n\t\t\t\t\tline-height: 0;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tvertical-align: baseline;\n\t\t\t\t}\n\n\t\t\t\t[data-dcr-style='bullet'] {\n\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\theight: 13px;\n\t\t\t\t\twidth: 13px;\n\t\t\t\t\tmargin-right: 0.2px;\n\t\t\t\t\tbackground-color: ${decidePalette(format).background\n\t\t\t\t\t\t.bullet};\n\t\t\t\t}\n\n\t\t\t\t${until.tablet} {\n\t\t\t\t\t/* \tTo stop long words going outside of the view port.\n\t\t\t\t\tFor compatibility */\n\t\t\t\t\toverflow-wrap: anywhere;\n\t\t\t\t\tword-wrap: break-word;\n\t\t\t\t}\n\t\t\t`;\n\n\t\t\tconst {\n\t\t\t\twillUnwrap: isUnwrapped,\n\t\t\t\tunwrappedHtml,\n\t\t\t\tunwrappedElement,\n\t\t\t} = unwrapHtml({\n\t\t\t\tfixes: [\n\t\t\t\t\t{\n\t\t\t\t\t\tunwrappedElement: 'p',\n\t\t\t\t\t\tprefix: '<p>',\n\t\t\t\t\t\tsuffix: '</p>',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tunwrappedElement: 'ul',\n\t\t\t\t\t\tprefix: '<ul>',\n\t\t\t\t\t\tsuffix: '</ul>',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\thtml,\n\t\t\t});\n\n\t\t\tconst firstLetter = decideDropCapLetter(unwrappedHtml);\n\t\t\tconst remainingLetters = firstLetter\n\t\t\t\t? unwrappedHtml.substr(firstLetter.length)\n\t\t\t\t: unwrappedHtml;\n\n\t\t\tif (\n\t\t\t\tshouldShowDropCap({\n\t\t\t\t\tformat,\n\t\t\t\t\tisFirstParagraph,\n\t\t\t\t\tforceDropCap,\n\t\t\t\t}) &&\n\t\t\t\tfirstLetter &&\n\t\t\t\tisLongEnough(remainingLetters)\n\t\t\t) {\n\t\t\t\treturn (\n\t\t\t\t\t<p css={paraStyles}>\n\t\t\t\t\t\t<DropCap letter={firstLetter} format={format} />\n\t\t\t\t\t\t<RewrappedComponent\n\t\t\t\t\t\t\tisUnwrapped={isUnwrapped}\n\t\t\t\t\t\t\thtml={sanitise(remainingLetters, sanitiserOptions)}\n\t\t\t\t\t\t\telCss={paraStyles}\n\t\t\t\t\t\t\ttagName=\"span\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</p>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<RewrappedComponent\n\t\t\t\t\tisUnwrapped={isUnwrapped}\n\t\t\t\t\thtml={sanitise(unwrappedHtml, sanitiserOptions)}\n\t\t\t\t\telCss={paraStyles}\n\t\t\t\t\ttagName={unwrappedElement || 'p'}\n\t\t\t\t/>\n\t\t\t);\n\t\t}}\n\t</ClassNames>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/TimelineAtomWrapper.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":4,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":4,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { TimelineAtom } from '@guardian/atoms-rendering';\nimport type { TimelineAtomType } from '@guardian/atoms-rendering/dist/types/types';\n\nexport const TimelineAtomWrapper = (props: TimelineAtomType) => {\n\treturn <TimelineAtom {...props} />;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Toast.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":29,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":29,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":51,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":27},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":73,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":73,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":95,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":95,"endColumn":25},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":117,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":117,"endColumn":26},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":139,"column":23,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":139,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { breakpoints } from '@guardian/source-foundations';\nimport { Toast } from './Toast';\n\nconst Wrapper = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tposition: sticky;\n\t\t\ttop: 0;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport default {\n\tcomponent: Toast,\n\ttitle: 'Components/Toast',\n};\n\nexport const Default = () => {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Toast\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tcount={3}\n\t\t\t\tonClick={() => {}}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nDefault.story = {\n\tname: 'with 3 updates',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t},\n};\n\nexport const Sport = () => {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Toast\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tcount={3}\n\t\t\t\tonClick={() => {}}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nSport.story = {\n\tname: 'with sport theme',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t},\n};\n\nexport const Special = () => {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Toast\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticleSpecial.SpecialReport,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tcount={17}\n\t\t\t\tonClick={() => {}}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nSpecial.story = {\n\tname: 'with special report theme',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t},\n};\n\nexport const One = () => {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Toast\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Culture,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tcount={1}\n\t\t\t\tonClick={() => {}}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nOne.story = {\n\tname: 'with only one update',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t},\n};\n\nexport const Lots = () => {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Toast\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.Lifestyle,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tcount={239}\n\t\t\t\tonClick={() => {}}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nLots.story = {\n\tname: 'with many updates',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'desktop' },\n\t},\n};\n\nexport const Mobile = () => {\n\treturn (\n\t\t<Wrapper>\n\t\t\t<Toast\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t}}\n\t\t\t\tcount={3}\n\t\t\t\tonClick={() => {}}\n\t\t\t/>\n\t\t</Wrapper>\n\t);\n};\nMobile.story = {\n\tname: 'with mobile viewport',\n\tparameters: {\n\t\tviewport: { defaultViewport: 'mobileMedium' },\n\t\tchromatic: {\n\t\t\tviewports: [breakpoints.mobile],\n\t\t},\n\t},\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/Toast.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":35,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":60}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { space } from '@guardian/source-foundations';\nimport { Hide } from '@guardian/source-react-components';\nimport { EditorialButton } from '@guardian/source-react-components-development-kitchen';\n\ntype Props = {\n\tcount: number;\n\tonClick: () => void;\n\tformat: ArticleFormat;\n};\n\n/** This icon will be added to Source at a subsequent time */\nconst SvgReload = ({ size }: { size: 12 | 16 | 18 | 24 | 26 | 28 | 30 }) => {\n\tconst tight = size <= 24;\n\tconst padding = tight ? 0 : (size - 24) / 2;\n\treturn (\n\t\t<svg\n\t\t\tviewBox={\n\t\t\t\ttight ? '0 0 24 24' : `-${padding} -${padding} ${size} ${size}`\n\t\t\t}\n\t\t\twidth={size}\n\t\t\theight={size}\n\t\t>\n\t\t\t<path d=\"M11.588 1a10.928 10.928 0 0 0-9.046 4.786l.126.676.877.527.676-.176C5.85 4.508 8.506 2.98 11.588 2.98c4.936 0 8.995 4.059 8.995 9.045 0 4.961-4.059 8.995-8.995 8.995-2.832 0-5.262-1.252-6.94-3.257l3.632-.601v-1.253H1.866l-.476.476V23h1.227l.627-3.784C5.248 21.546 8.205 23 11.588 23c6.089 0 11.025-4.911 11.025-10.975A11.01 11.01 0 0 0 11.588 1Z\" />\n\t\t</svg>\n\t);\n};\n\n/**\n * A button to scroll to the top when new content exists.\n *\n * This element is rendered using a Portal into the `toast-root` div. This\n * root div has position: sticky\n */\nexport const Toast = ({ count, onClick, format }: Props) => {\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: ${space[2]}px;\n\t\t\t`}\n\t\t\tdata-cy=\"toast\"\n\t\t>\n\t\t\t<Hide above=\"phablet\">\n\t\t\t\t<EditorialButton\n\t\t\t\t\tsize=\"xsmall\" // <-- Mobile version is xsmall\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tformat={format}\n\t\t\t\t\ticon={<SvgReload size={30} />}\n\t\t\t\t>{`${count} new update${\n\t\t\t\t\tcount === 1 ? '' : 's'\n\t\t\t\t}`}</EditorialButton>\n\t\t\t</Hide>\n\t\t\t<Hide below=\"phablet\">\n\t\t\t\t<EditorialButton\n\t\t\t\t\tsize=\"small\" // <-- Desktop version is small\n\t\t\t\t\tonClick={onClick}\n\t\t\t\t\tformat={format}\n\t\t\t\t\ticon={<SvgReload size={30} />}\n\t\t\t\t>{`${count} new update${\n\t\t\t\t\tcount === 1 ? '' : 's'\n\t\t\t\t}`}</EditorialButton>\n\t\t\t</Hide>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/TopRightAdSlot.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":25,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":33,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { SerializedStyles } from '@emotion/react';\nimport { css } from '@emotion/react';\nimport { adSizes } from '@guardian/commercial-core';\nimport { getCookie } from '@guardian/libs';\nimport { useAdBlockInUse } from '../lib/useAdBlockInUse';\nimport { ShadyPie } from './ShadyPie';\n\nconst isServer = typeof window === 'undefined';\nconst MOSTVIEWED_STICKY_HEIGHT = 1059;\n\n/**\n * TopRightAdSlot decides if we should render the ShadyPie or not\n *\n * The rules for when to show <ShadyPie /> are:\n *\n *  1. An ad blocker has been detected\n *  2. The reader is not signed in\n *  3. shouldHideReaderRevenue is false (\"Prevent membership/contribution appeals\" is not\n *     checked in Composer)\n *  4. The article is not paid content\n *  5. We're not on the server\n *\n * @returns either the ShadyPie image the standard top right ad slot\n */\nexport const TopRightAdSlot = ({\n\tadStyles,\n\tshouldHideReaderRevenue,\n\tisPaidContent,\n}: {\n\tadStyles: SerializedStyles[];\n\tshouldHideReaderRevenue: boolean;\n\tisPaidContent: boolean;\n}) => {\n\tconst adBlockerDetected = useAdBlockInUse();\n\tconst isSignedIn =\n\t\t!isServer && !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\n\tif (\n\t\tadBlockerDetected &&\n\t\t!isSignedIn &&\n\t\t!shouldHideReaderRevenue &&\n\t\t!isPaidContent &&\n\t\t!isServer\n\t) {\n\t\t// Show a fixed image asking people to subscribe\n\t\treturn <ShadyPie />;\n\t}\n\n\t// Otherwise return the classic ad slot\n\treturn (\n\t\t<div\n\t\t\tid=\"top-right-ad-slot\"\n\t\t\tcss={css`\n\t\t\t\tposition: static;\n\t\t\t\theight: ${MOSTVIEWED_STICKY_HEIGHT}px;\n\t\t\t`}\n\t\t>\n\t\t\t<div\n\t\t\t\tid=\"dfp-ad--right\"\n\t\t\t\tclassName={[\n\t\t\t\t\t'js-ad-slot',\n\t\t\t\t\t'ad-slot',\n\t\t\t\t\t'ad-slot--right',\n\t\t\t\t\t'ad-slot--mpu-banner-ad',\n\t\t\t\t\t'ad-slot--rendered',\n\t\t\t\t\t'js-sticky-mpu',\n\t\t\t\t].join(' ')}\n\t\t\t\tcss={[\n\t\t\t\t\tcss`\n\t\t\t\t\t\tposition: sticky;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t`,\n\t\t\t\t\tadStyles,\n\t\t\t\t]}\n\t\t\t\tdata-link-name=\"ad slot right\"\n\t\t\t\tdata-name=\"right\"\n\t\t\t\t// mark: 01303e88-ef1f-462d-9b6e-242419435cec\n\t\t\t\tdata-mobile={[\n\t\t\t\t\tadSizes.outOfPage,\n\t\t\t\t\tadSizes.empty,\n\t\t\t\t\tadSizes.mpu,\n\t\t\t\t\tadSizes.googleCard,\n\t\t\t\t\tadSizes.halfPage,\n\t\t\t\t\tadSizes.fluid,\n\t\t\t\t]\n\t\t\t\t\t.map((size) => size.toString())\n\t\t\t\t\t.join('|')}\n\t\t\t\taria-hidden=\"true\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/TweetBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":65,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":65,"endColumn":59},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":76,"column":4,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":76,"endColumn":68}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { body, border } from '@guardian/source-foundations';\nimport { useEffect } from 'react';\nimport { unescapeData } from '../../lib/escapeData';\n\ntype Props = {\n\telement: TweetBlockElement;\n};\n\n// fallback styling for when JS is disabled\nconst noJSStyling = css`\n\t.nojs-tweet:not(.nojs-tweet-rendered) {\n\t\tborder: 1px solid ${border.secondary};\n\t\tborder-radius: 4px;\n\t\tpadding: 20px;\n\t\twidth: 100%;\n\t\tmargin-bottom: 16px;\n\t\t${body.small()};\n\t}\n\n\t.nojs-tweet iframe {\n\t\t/* Unfortunately due to how Twitter embeds work setting !important is the only way to overwrite tweet CSS */\n\t\t/* stylelint-disable-next-line declaration-no-important */\n\t\twidth: 100% !important;\n\t}\n\n\t.nojs-tweet p {\n\t\tpadding-bottom: 10px;\n\t}\n\n\ta {\n\t\t/* stylelint-disable-next-line color-no-hex */\n\t\tcolor: #2b7bb9;\n\t}\n`;\n\n/**\n * loadTweet takes the nojs default version of a Twitter tweet embed\n * and enhances it using Twitter's platform api script\n *\n * This code should only execute if switches.enhanceTweets is true (see\n * renderElements)\n *\n * @param element TweetBlockElement - The tweet element we want to enhance\n */\nconst loadTweet = (element: TweetBlockElement) => {\n\tconst tweetContainer = document.getElementById(\n\t\t`tweet-container-${element.elementId}`,\n\t);\n\tconst tweet = document.querySelector(\n\t\t`#tweet-container-${element.elementId} > blockquote.nojs-tweet`,\n\t);\n\n\tif (tweetContainer && tweet && typeof twttr !== 'undefined') {\n\t\t// We need this classname to exist as this is what Twitter uses\n\t\t// to find the tweet on the page. We *remove* this class in\n\t\t// enhanceTweets()\n\t\ttweet.classList.add('twitter-tweet');\n\t\ttwttr.ready((twitter) => {\n\t\t\ttwitter.widgets.load(tweetContainer);\n\t\t});\n\t}\n};\n\nexport const TweetBlockComponent = ({ element }: Props) => {\n\tuseEffect(() => {\n\t\t// This code only runs if this component is hydrated, which\n\t\t// only happens if the enhanceTweets switch is on\n\t\tloadTweet(element);\n\t}, [element]);\n\n\treturn (\n\t\t<div\n\t\t\tid={`tweet-container-${element.elementId}`}\n\t\t\tcss={noJSStyling}\n\t\t\tdangerouslySetInnerHTML={{ __html: unescapeData(element.html) }}\n\t\t/>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/UnsafeEmbedBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":29,"endColumn":13},{"ruleId":"@typescript-eslint/no-misused-promises","severity":1,"message":"Promise-returning function provided to attribute where a void return was expected.","line":36,"column":12,"nodeType":"JSXExpressionContainer","messageId":"voidReturnAttribute","endLine":38,"endColumn":4},{"ruleId":"react/jsx-curly-newline","severity":1,"message":"Unexpected newline before '}'.","line":38,"column":3,"nodeType":"Punctuator","messageId":"unexpectedBefore","endLine":38,"endColumn":4,"fix":{"range":[716,719],"text":""}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { css } from '@emotion/react';\nimport { updateIframeHeight } from '../browser/updateIframeHeight';\nimport { ClickToView } from './ClickToView';\n\ntype Props = {\n\thtml: string;\n\talt: string;\n\tindex: number;\n\trole?: RoleType;\n\tisTracking: boolean;\n\tisMainMedia?: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nconst fullWidthStyles = css`\n\twidth: 100%;\n`;\n\nexport const UnsafeEmbedBlockComponent = ({\n\thtml,\n\talt,\n\tindex,\n\trole,\n\tisTracking,\n\tisMainMedia,\n\tsource,\n\tsourceDomain,\n}: Props) => (\n\t<ClickToView\n\t\trole={role}\n\t\tisTracking={isTracking}\n\t\tisMainMedia={isMainMedia}\n\t\tsource={source}\n\t\tsourceDomain={sourceDomain}\n\t\tonAccept={() =>\n\t\t\tupdateIframeHeight(`iframe[name=\"unsafe-embed-${index}\"]`)\n\t\t}\n\t>\n\t\t<iframe\n\t\t\tcss={fullWidthStyles}\n\t\t\tclassName=\"js-embed__iframe\"\n\t\t\ttitle={alt}\n\t\t\t// name is used to identify each unique iframe on the page to resize\n\t\t\t// we therefore use the \"unsafe-embed-\" prefix followed by index to\n\t\t\t// construct a unique ID\n\t\t\tname={`unsafe-embed-${index}`}\n\t\t\tdata-cy=\"embed-block\"\n\t\t\tsrcDoc={`${html}\n            <script src=\"https://interactive.guim.co.uk/libs/iframe-messenger/iframeMessenger.js\"></script>\n            <gu-script>iframeMessenger.enableAutoResize();</gu-script>`}\n\t\t/>\n\t</ClickToView>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/UnsafeEmbedBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":12,"column":29,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":12,"endColumn":34},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":15,"column":4,"nodeType":"MemberExpression","messageId":"unexpected","endLine":15,"endColumn":17},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":15,"column":57,"nodeType":"Identifier","messageId":"invalidType","endLine":15,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { useEffect } from 'react';\nimport { embedIframe } from '../browser/embedIframe/embedIframe';\nimport { UnsafeEmbedBlockComponent } from './UnsafeEmbedBlockComponent.importable';\n\nexport default {\n\tcomponent: UnsafeEmbedBlockComponent,\n\ttitle: 'Components/UnsafeEmbedBlockComponent',\n};\n\nconst html = `<html> <head></head> <body style=\"padding: 0px; margin: 0px; overflow: hidden;\"> <style> @font-face { font-family: \"Guardian Egyptian Web\"; src: url(\"https://interactive.guim.co.uk/fonts/guss-webfonts/GuardianEgyptianWeb/GuardianEgyptianWeb-Light.eot\"); src: url(\"https://interactive.guim.co.uk/fonts/guss-webfonts/GuardianEgyptianWeb/GuardianEgyptianWeb-Light.eot?#iefix\") format(\"embedded-opentype\"), url(\"https://interactive.guim.co.uk/fonts/guss-webfonts/GuardianEgyptianWeb/GuardianEgyptianWeb-Light.woff2\") format(\"woff2\"), url(\"https://interactive.guim.co.uk/fonts/guss-webfonts/GuardianEgyptianWeb/GuardianEgyptianWeb-Light.woff\") format(\"woff\"), url(\"https://interactive.guim.co.uk/fonts/guss-webfonts/GuardianEgyptianWeb/GuardianEgyptianWeb-Light.ttf\") format(\"truetype\"), url(\"https://interactive.guim.co.uk/fonts/guss-webfonts/GuardianEgyptianWeb/GuardianEgyptianWeb-Light.svg#GuardianEgyptianWeb-Light\") format(\"svg\"); font-weight: normal; font-style: normal; font-stretch: normal; } * { box-sizing: border-box; font-family: 'Guardian Egyptian Web'; } a { text-decoration: none; } body { max-width: 420px; } .the-insider__wrapper { background-color: #333; } .the-insider__header { background-color: #222; padding: 4px; } .the-insider__logo { position: relative; margin: 0; margin-bottom: 24px; display: inline-block; color: #69d1ca; z-index: 10; } .the-insider__logo:after { content: ''; position: absolute; top: .5em; left: -4px; height: .8em; width: 100%; background-color: #333; z-index: -1; padding: 0 4px; } .the-insider__header-title { color: white; font-weight: 400; margin: 4px 0; font-size: 18px; } .the-insider__list { list-style: none; margin: 0; padding: 0; } .the-insider__item { position: relative; padding: 6px 4px; border-bottom: 2px dotted #222; font-size: 18px; color: #bdbdbd; } a .the-insider__item { color: white; } a .the-insider__item:after { content: url('data:image/svg+xml, <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"21.706\" height=\"21.127\" viewBox=\"0 0 21.706 21.127\"><defs><path id=\"a\" d=\"M11.168 2.667l7.141 7.157v.685l-7.141 7.158-.668-.668 5.137-6.147H2.539V9.481h13.098L10.5 3.334z\"/></defs><clipPath id=\"b\"><use xlink:href=\"#a\" overflow=\"visible\"/></clipPath><path clip-path=\"url(#b)\" fill=\"#69d1ca\" d=\"M-4.961-4.833H25.81v30H-4.961z\"/></svg>'); background-color: transparent; border: 1px solid #69d1ca; width: 25px; height: 25px; border-radius: 50%; padding-left: 5px; padding-top: 5px; position: absolute; top: 4px; right: 4px; display: block; margin-top: 6px; -webkit-transition: all 0.3s ease-in-out; -moz-transition: all 0.3s ease-in-out; -o-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out; } a .the-insider__item:hover { background-color: #222; border-color: transparent; } .the-insider__day-label { display: block; color: #bdbdbd; } a .the-insider__day-label { color: #69d1ca; } .is-current { pointer-events: none; cursor: default; } .is-current .the-insider__item { background-color: #69d1ca; border-bottom-color: transparent; } .is-current .the-insider__item:after { display: none; } .is-current .the-insider__day-label { color: #333; } </style> <div class=\"the-insider__wrapper\"> <div class=\"the-insider__header\"> <h2 class=\"the-insider__header-title\"> One man's fight to reveal<br /> the CIA's torture secrets </h2> <h1 class=\"the-insider__logo\">The Insider</h1> </div> <ul class=\"the-insider__list\"> <a href=\"http://www.theguardian.com/us-news/2016/sep/09/cia-insider-daniel-jones-senate-torture-investigation\" target=\"_parent\"> <li class=\"the-insider__item\"> <span class=\"the-insider__day-label\">Part one</span> Crossing the bridge </li> </a> <a class=\"is-current\" href=\"http://www.theguardian.com/us-news/2016/sep/10/cia-senate-investigation-constitutional-crisis-daniel-jones\" target=\"_parent\"> <li class=\"the-insider__item\"> <span class=\"the-insider__day-label\">Part two</span> A constitutional crisis </li> </a> <a href=\"http://www.theguardian.com/us-news/2016/sep/11/cia-torture-report-aftermath-daniel-jones-senate-investigation\" target=\"_parent\"> <li class=\"the-insider__item\"> <span class=\"the-insider__day-label\">Part three</span> The aftermath </li> </a> </ul> </div> </body> </html>`;\nexport const DefaultStory = () => {\n\tuseEffect(() => {\n\t\tembedIframe().catch((e) =>\n\t\t\tconsole.error(`HydratedLayout embedIframe - error: ${e}`),\n\t\t);\n\t}, []);\n\n\treturn (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tpadding-left: 40px;\n\t\t\t`}\n\t\t>\n\t\t\t<UnsafeEmbedBlockComponent\n\t\t\t\talt=\"Example component\"\n\t\t\t\thtml={html}\n\t\t\t\tindex={1}\n\t\t\t\tisTracking={true}\n\t\t\t\tsource=\"\"\n\t\t\t\tsourceDomain=\"\"\n\t\t\t\trole=\"inline\"\n\t\t\t/>\n\t\t</div>\n\t);\n};\nDefaultStory.story = { name: 'default' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/VideoFacebookBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":44,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":34,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Caption } from './Caption';\nimport { ClickToView } from './ClickToView';\nimport { MaintainAspectRatio } from './MaintainAspectRatio';\n\ntype Props = {\n\tisMainMedia: boolean;\n\tisTracking: boolean;\n\trole?: RoleType;\n\tsource?: string;\n\tsourceDomain?: string;\n\tformat: ArticleFormat;\n\tembedUrl?: string;\n\theight: number;\n\twidth: number;\n\tcaption?: string;\n\tcredit?: string;\n\ttitle?: string;\n};\n\nexport const VideoFacebookBlockComponent = ({\n\tisMainMedia,\n\tisTracking,\n\trole,\n\tsource,\n\tsourceDomain,\n\tembedUrl,\n\tcaption,\n\ttitle,\n\tformat,\n\twidth,\n\theight,\n\tcredit,\n}: Props) => {\n\t// 812 is the full height on an iphone X. This ensures that the embed doesn't display any larger than the available viewport\n\t// Constrain iframe embeds with a width to their natural width\n\t// rather than stretch them to the container using\n\t// a max that would prevent portrait videos from being taller than an iphone X (baseline)\n\t// More context: https://github.com/guardian/frontend/pull/17902\n\tconst maxHeight = 812;\n\tconst aspectRatio = width / height;\n\tconst maxWidth = maxHeight * aspectRatio;\n\n\tconst embedContainer = css`\n\t\tmax-width: ${maxWidth}px;\n\t\twidth: 100%;\n\t\tmargin-bottom: ${caption ? `0px` : `6px`};\n\t`;\n\n\treturn (\n\t\t<ClickToView\n\t\t\trole={role}\n\t\t\tisTracking={isTracking}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tsource={source}\n\t\t\tsourceDomain={sourceDomain}\n\t\t>\n\t\t\t<div css={embedContainer}>\n\t\t\t\t<MaintainAspectRatio height={height} width={width}>\n\t\t\t\t\t<iframe\n\t\t\t\t\t\tsrc={embedUrl}\n\t\t\t\t\t\ttitle={title}\n\t\t\t\t\t\theight={height}\n\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\tallowFullScreen={true}\n\t\t\t\t\t/>\n\t\t\t\t</MaintainAspectRatio>\n\t\t\t\t{caption && (\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tcredit={credit}\n\t\t\t\t\t\tmediaType=\"Video\"\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</ClickToView>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/VideoFacebookBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":49,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":49,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { VideoFacebookBlockComponent } from './VideoFacebookBlockComponent.importable';\n\nexport default {\n\tcomponent: VideoFacebookBlockComponent,\n\ttitle: 'Components/VideoFacebookComponent',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmax-width: 620px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const largeAspectRatio = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>abc</p>\n\t\t\t<VideoFacebookBlockComponent\n\t\t\t\tembedUrl=\"https://www.facebook.com/video/embed?video_id=10155703704626323\\\"\n\t\t\t\theight={281}\n\t\t\t\twidth={500}\n\t\t\t\tcaption=\"blah\"\n\t\t\t\tcredit=\"\"\n\t\t\t\ttitle=\"\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisTracking={false}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<p>abc</p>\n\t\t</Container>\n\t);\n};\nlargeAspectRatio.story = {\n\tname: 'with large aspect ratio',\n\tchromatic: { disable: true },\n};\n\nexport const verticalAspectRatio = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>abc</p>\n\t\t\t<VideoFacebookBlockComponent\n\t\t\t\tembedUrl=\"https://www.facebook.com/video/embed?video_id=10155591097456323\\\"\n\t\t\t\theight={889}\n\t\t\t\twidth={500}\n\t\t\t\tcaption=\"blah\"\n\t\t\t\tcredit=\"\"\n\t\t\t\ttitle=\"\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisTracking={false}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<p>abc</p>\n\t\t</Container>\n\t);\n};\nverticalAspectRatio.story = { name: 'with vertical aspect ratio' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/VimeoBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":21,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":45,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":45,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":72,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":72,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { VimeoBlockComponent } from './VimeoBlockComponent';\n\nexport default {\n\tcomponent: VimeoBlockComponent,\n\ttitle: 'Components/VimeoComponent',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmax-width: 620px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const smallAspectRatio = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>abc</p>\n\t\t\t<VimeoBlockComponent\n\t\t\t\tembedUrl=\"https://player.vimeo.com/video/327310297?app_id=122963\"\n\t\t\t\theight={250}\n\t\t\t\twidth={250}\n\t\t\t\tcaption=\"blah\"\n\t\t\t\tcredit=\"\"\n\t\t\t\ttitle=\"\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<p>abc</p>\n\t\t</Container>\n\t);\n};\nsmallAspectRatio.story = { name: 'with small aspect ratio' };\n\nexport const largeAspectRatio = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>abc</p>\n\t\t\t<VimeoBlockComponent\n\t\t\t\tembedUrl=\"https://player.vimeo.com/video/327310297?app_id=122963\"\n\t\t\t\theight={259}\n\t\t\t\twidth={460}\n\t\t\t\tcaption=\"blah\"\n\t\t\t\tcredit=\"\"\n\t\t\t\ttitle=\"\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<p>abc</p>\n\t\t</Container>\n\t);\n};\nlargeAspectRatio.story = {\n\tname: 'with large aspect ratio',\n\tchromatic: { disable: true },\n};\n\nexport const verticalAspectRatio = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>abc</p>\n\t\t\t<VimeoBlockComponent\n\t\t\t\tembedUrl=\"https://player.vimeo.com/video/265111898?app_id=122963\"\n\t\t\t\theight={818}\n\t\t\t\twidth={460}\n\t\t\t\tcaption=\"blah\"\n\t\t\t\tcredit=\"\"\n\t\t\t\ttitle=\"\"\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<p>abc</p>\n\t\t</Container>\n\t);\n};\nverticalAspectRatio.story = { name: 'with vertical aspect ratio' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/VimeoBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":37,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Caption } from './Caption';\n\nconst responsiveAspectRatio = (height: number, width: number) => css`\n\t/* https://css-tricks.com/aspect-ratio-boxes/ */\n\tpadding-bottom: ${(height / width) * 100}%;\n\tposition: relative;\n\tiframe {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t}\n`;\n\ntype Props = {\n\tformat: ArticleFormat;\n\tembedUrl?: string;\n\theight: number;\n\twidth: number;\n\tcaption?: string;\n\tcredit?: string;\n\ttitle?: string;\n\tisMainMedia: boolean;\n};\n\nexport const VimeoBlockComponent = ({\n\tembedUrl,\n\tcaption,\n\ttitle,\n\tformat,\n\twidth,\n\theight,\n\tcredit,\n\tisMainMedia,\n}: Props) => {\n\t// 812 is the full height on an iphone X. This ensures that the embed doesn't display any larger than the available viewport\n\t// Constrain iframe embeds with a width to their natural width\n\t// rather than stretch them to the container using\n\t// a max that would prevent portrait videos from being taller than an iphone X (baseline)\n\t// More context: https://github.com/guardian/frontend/pull/17902\n\tconst maxHeight = 812;\n\tconst aspectRatio = width / height;\n\tconst maxWidth = maxHeight * aspectRatio;\n\n\tconst embedContainer = css`\n\t\tmax-width: ${maxWidth}px;\n\t\twidth: 100%;\n\t\tmargin-bottom: ${caption ? `0px` : `6px`};\n\t`;\n\n\treturn (\n\t\t<div css={embedContainer}>\n\t\t\t<div css={responsiveAspectRatio(height, width)}>\n\t\t\t\t<iframe\n\t\t\t\t\tsrc={embedUrl}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\theight={height}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tallowFullScreen={true}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{caption && (\n\t\t\t\t<Caption\n\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tcredit={credit}\n\t\t\t\t\tmediaType=\"Video\"\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/VineBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":27,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { textSans } from '@guardian/source-foundations';\nimport { ClickToView } from './ClickToView';\nimport { MaintainAspectRatio } from './MaintainAspectRatio';\n\nconst titleStyle = css`\n\tp {\n\t\t${textSans.large()};\n\t\tfont-weight: bold;\n\t}\n`;\n\ntype Props = {\n\telement: VineBlockElement;\n\trole: RoleType;\n\tisTracking: boolean;\n\tsource?: string;\n\tsourceDomain?: string;\n};\n\nexport const VineBlockComponent = ({\n\telement,\n\trole,\n\tisTracking,\n\tsource,\n\tsourceDomain,\n}: Props) => {\n\treturn (\n\t\t<ClickToView\n\t\t\trole={role}\n\t\t\tisTracking={isTracking}\n\t\t\tsource={source}\n\t\t\tsourceDomain={sourceDomain}\n\t\t>\n\t\t\t{element.url && element.width && element.height && (\n\t\t\t\t<div>\n\t\t\t\t\t<div css={titleStyle}>\n\t\t\t\t\t\t<p>{element.title}</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<MaintainAspectRatio\n\t\t\t\t\t\theight={element.height}\n\t\t\t\t\t\twidth={element.width}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div css=\"element-vine\">\n\t\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\t\ttitle=\"vine-embed\"\n\t\t\t\t\t\t\t\tsrc={element.url}\n\t\t\t\t\t\t\t\theight={element.height}\n\t\t\t\t\t\t\t\twidth={element.width}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<script\n\t\t\t\t\t\t\t\tasync={true}\n\t\t\t\t\t\t\t\tsrc=\"https://platform.vine.co/static/scripts/embed.js\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</MaintainAspectRatio>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</ClickToView>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/WhenAdBlockInUse.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":57}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\nimport { useAdBlockInUse } from '../lib/useAdBlockInUse';\n\ntype Props = {\n\tchildren: React.ReactNode;\n};\n\n/**\n * @description\n * WhenAdBlockInUse will render children if it detects that an ad blocker\n * is being used. It uses useAdBlockInUse which is a function that performs\n * detection checks and returns a promise.\n *\n * Sure, you could just use this custom hook directly but sometimes code is easier\n * to read and understand when conditional rendering is done using composition\n *\n * @param {ReactNode} children - What gets rendered if an ad blocker is in use\n * */\nexport const WhenAdBlockInUse = ({ children }: Props) => {\n\tconst adBlockerDetected = useAdBlockInUse();\n\n\treturn adBlockerDetected ? <>{children}</> : null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/WitnessBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":49,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":54},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":107,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":107,"endColumn":55},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":130,"column":50,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":130,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { decidePalette } from '../lib/decidePalette';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from './WitnessBlockComponent';\n\nexport default {\n\ttitle: 'Components/WitnessBlockComponent',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tdisable: true,\n\t\t},\n\t},\n};\n\nexport const WitnessTextBlockComponentDefault = () => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin: 15px;\n\t\t\twidth: 620px;\n\t\t`}\n\t>\n\t\t<WitnessTextBlockComponent\n\t\t\ttitle=\"Back in the 1970&#39;s\"\n\t\t\tdescription='You could dial first and then push in ur 2p. I never had any change and needed a lift. My parents knew the routine, I&#39;d dial and you could get a second or two to shout down the line \"Pick me up\" Ah how I miss the days of a simple life where no one knew where I was and I could get away with anything as long as I was in the door by 10pm! '\n\t\t\tauthorName=\"Louise Griffiths\"\n\t\t\tdateCreated=\"2016-01-29T22:19:51Z\"\n\t\t\tpalette={decidePalette({\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t})}\n\t\t/>\n\t</div>\n);\n\nconst assets: WitnessAssetType[] = [\n\t{\n\t\ttype: 'Image',\n\t\tmimeType: 'image/jpeg',\n\t\tfile: 'https://gu-witness.s3.amazonaws.com/image/1440505256168e17c87ce879c40d3f575b6625340fb7c-mediumlandscapecropdouble.jpg',\n\t\ttypeData: {\n\t\t\tname: 'mediumlandscapecropdouble',\n\t\t},\n\t},\n\t{\n\t\ttype: 'Image',\n\t\tmimeType: 'image/jpeg',\n\t\tfile: 'https://gu-witness.s3.amazonaws.com/image/1440505256168e17c87ce879c40d3f575b6625340fb7c-mediumlandscapecrop.jpg',\n\t\ttypeData: {\n\t\t\tname: 'mediumlandscapecrop',\n\t\t},\n\t},\n\t{\n\t\ttype: 'Image',\n\t\tmimeType: 'image/jpeg',\n\t\tfile: 'https://gu-witness.s3.amazonaws.com/image/1440505256168e17c87ce879c40d3f575b6625340fb7c-mediumoriginalaspectdouble.jpg',\n\t\ttypeData: {\n\t\t\tname: 'mediumoriginalaspectdouble',\n\t\t},\n\t},\n\t{\n\t\ttype: 'Image',\n\t\tmimeType: 'image/jpeg',\n\t\tfile: 'https://gu-witness.s3.amazonaws.com/image/1440505256168e17c87ce879c40d3f575b6625340fb7c-small.jpg',\n\t\ttypeData: {\n\t\t\tname: 'small',\n\t\t},\n\t},\n\t{\n\t\ttype: 'Image',\n\t\tmimeType: 'image/jpeg',\n\t\tfile: 'https://gu-witness.s3.amazonaws.com/image/1440505256168e17c87ce879c40d3f575b6625340fb7c-medium.jpg',\n\t\ttypeData: {\n\t\t\tname: 'medium',\n\t\t},\n\t},\n\t{\n\t\ttype: 'Image',\n\t\tmimeType: 'image/jpeg',\n\t\tfile: 'https://gu-witness.s3.amazonaws.com/image/1440505256168e17c87ce879c40d3f575b6625340fb7c-large.jpg',\n\t\ttypeData: {\n\t\t\tname: 'large',\n\t\t},\n\t},\n\t{\n\t\ttype: 'Image',\n\t\tmimeType: 'image/jpeg',\n\t\tfile: 'https://gu-witness.s3.amazonaws.com/image/1440505256168e17c87ce879c40d3f575b6625340fb7c-extralarge.jpg',\n\t\ttypeData: {\n\t\t\tname: 'extralarge',\n\t\t},\n\t},\n\t{\n\t\ttype: 'Image',\n\t\tmimeType: 'image/jpeg',\n\t\tfile: 'https://gu-witness.s3.amazonaws.com/image/1440505256168e17c87ce879c40d3f575b6625340fb7c-mediumdouble.jpg',\n\t\ttypeData: {\n\t\t\tname: 'mediumdouble',\n\t\t},\n\t},\n];\n\nexport const WitnessImageBlockComponentDefault = () => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin: 15px;\n\t\t\twidth: 620px;\n\t\t`}\n\t>\n\t\t<WitnessImageBlockComponent\n\t\t\tassets={assets}\n\t\t\tcaption=\"Risk was always my favourite board game. I decided to send it into orbit with a home-made space expansion. \"\n\t\t\ttitle=\"Risk - Home Made Space expansion\"\n\t\t\tauthorName=\"Nick Ellis\"\n\t\t\tdateCreated=\"2015-08-25T12:20:58Z\"\n\t\t\talt=\"Risk - Home Made Space expansion\"\n\t\t\tpalette={decidePalette({\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t})}\n\t\t/>\n\t</div>\n);\n\nexport const WitnessVideoBlockComponentDefault = () => (\n\t<div\n\t\tcss={css`\n\t\t\tmargin: 15px;\n\t\t\twidth: 620px;\n\t\t`}\n\t>\n\t\t<WitnessVideoBlockComponent\n\t\t\ttitle=\"Warhammer Quest Timelapse\"\n\t\t\tdescription=\"Tell me if you&#39;ve heard this one before: A Dwarf, a thief, a fighter and a priest walk into a dungeon ... Warhammer Quest is the quintessential &#39;Old School&#39; dungeon-crawler.\"\n\t\t\tauthorName=\"Gregg Lewis-Qualls\"\n\t\t\tyoutubeHtml='<iframe width=\"440\" height=\"330\" src=\"https://www.youtube.com/embed/N9Cgy-ke5-s?origin=https://www.theguardian.com&widgetid=1&modestbranding=1\" frameborder=\"0\" allowfullscreen></iframe>'\n\t\t\tdateCreated=\"2015-08-27T13:32:32Z\"\n\t\t\tpalette={decidePalette({\n\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\ttheme: ArticlePillar.Sport,\n\t\t\t})}\n\t\t/>\n\t</div>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/WitnessBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":150,"column":5,"nodeType":"Punctuator","messageId":"preferNullish","endLine":150,"endColumn":7,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3148,3150],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":162,"column":11,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":162,"endColumn":24},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":162,"column":11,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":162,"endColumn":46,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[3338,3373],"text":"bestImgSource?.file"},"desc":"Change to an optional chain."}]},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":170,"column":7,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":170,"endColumn":50},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":177,"column":8,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":177,"endColumn":53},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":210,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":210,"endColumn":48},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":217,"column":6,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":217,"endColumn":55},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":253,"column":5,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":253,"endColumn":54},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":259,"column":6,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":259,"endColumn":49},{"ruleId":"react/no-danger","severity":1,"message":"Dangerous property 'dangerouslySetInnerHTML' found","line":266,"column":7,"nodeType":"JSXAttribute","messageId":"dangerousProp","endLine":266,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { body, headline, neutral, space } from '@guardian/source-foundations';\n\n// Wrapper Styles\nconst wrapperStyles = css`\n\tborder-width: 1px;\n\tborder-color: ${neutral[86]};\n\tborder-style: solid;\n`;\n\nconst mainContentWrapperStyles = css`\n\tpadding-left: ${space[2]}px;\n\tpadding-right: ${space[2]}px;\n\tpadding-top: ${space[3]}px;\n\tpadding-bottom: ${space[4]}px;\n`;\n\nconst witnessIconWrapperStyles = css`\n\t${body.small()}\n\tpadding-left: ${space[2]}px;\n\tpadding-right: ${space[2]}px;\n\tpadding-bottom: ${space[2]}px;\n`;\n\nconst witnessIconStyles = (palette: Palette) => css`\n\tpadding-left: ${space[1]}px;\n\n\tcolor: ${palette.text.witnessIcon};\n\t${body.small({ fontWeight: 'bold' })}\n`;\n\nconst witnessDetailsWrapperStyles = css`\n\tborder-width: 1px;\n\tborder-color: ${neutral[86]};\n\tborder-style: solid;\n\n\tbackground-color: ${neutral[97]};\n`;\n\n// Non Wrapper Styles\nconst captionStyles = css`\n\tmargin-top: ${space[3]}px;\n`;\n\nconst titleStyles = (palette: Palette) => css`\n\tmargin-bottom: ${space[2]}px;\n\tcolor: ${palette.text.witnessTitle};\n\t${headline.xxxsmall()}\n`;\n\nconst witnessDetailsSpacingStyles = css`\n\tpadding-left: ${space[2]}px;\n\tpadding-right: ${space[2]}px;\n\tpadding-top: ${space[3]}px;\n\tpadding-bottom: ${space[3]}px;\n`;\n\nconst authorNameStyles = (palette: Palette) => css`\n\tpadding-left: 5px;\n\tcolor: ${palette.text.witnessAuthor};\n\t${body.small({ fontWeight: 'bold' })}\n`;\n\ntype WrapperProps = {\n\tauthorName: string;\n\tdateCreated: string;\n\tpalette: Palette;\n\tchildren: React.ReactNode;\n};\n\nconst WitnessWrapper = ({\n\tauthorName,\n\tdateCreated,\n\tpalette,\n\tchildren,\n}: WrapperProps): JSX.Element => {\n\treturn (\n\t\t<div css={wrapperStyles}>\n\t\t\t<div css={mainContentWrapperStyles}>{children}</div>\n\t\t\t<footer>\n\t\t\t\t<p css={witnessIconWrapperStyles}>\n\t\t\t\t\tSent via\n\t\t\t\t\t<span css={witnessIconStyles(palette)}>\n\t\t\t\t\t\tguardian\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tcolor: ${neutral[46]};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\twitness\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t\t<div css={witnessDetailsWrapperStyles}>\n\t\t\t\t\t<div css={witnessDetailsSpacingStyles}>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t${body.small()}\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tBy\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tcss={authorNameStyles(palette)}\n\t\t\t\t\t\t\t\titemProp=\"author\"\n\t\t\t\t\t\t\t\titemType=\"http://schema.org/Person\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{authorName}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t${body.small()}\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<time itemProp=\"dateCreated\" dateTime={dateCreated}>\n\t\t\t\t\t\t\t\t{new Date(dateCreated).toDateString()}\n\t\t\t\t\t\t\t</time>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</footer>\n\t\t</div>\n\t);\n};\n\ntype ImageProps = {\n\tassets: WitnessAssetType[];\n\tcaption: string;\n\ttitle: string;\n\tauthorName: string;\n\tdateCreated: string;\n\talt: string;\n\tpalette: Palette;\n};\n\nexport const WitnessImageBlockComponent = ({\n\tassets,\n\tcaption,\n\ttitle,\n\tauthorName,\n\tdateCreated,\n\talt,\n\tpalette,\n}: ImageProps): JSX.Element => {\n\t// witness images seem to always use `mediumoriginalaspectdouble`, but in case that isn't found we use the 1st\n\t// asset in the list\n\tconst bestImgSource =\n\t\tassets.find(\n\t\t\t(asset) => asset.typeData.name === 'mediumoriginalaspectdouble',\n\t\t) || assets[0];\n\treturn (\n\t\t<WitnessWrapper\n\t\t\tauthorName={authorName}\n\t\t\tdateCreated={dateCreated}\n\t\t\tpalette={palette}\n\t\t>\n\t\t\t<>\n\t\t\t\t<img\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t`}\n\t\t\t\t\tsrc={bestImgSource && bestImgSource.file}\n\t\t\t\t\talt={alt}\n\t\t\t\t\titemProp=\"contentURL\"\n\t\t\t\t/>\n\t\t\t\t<figcaption css={captionStyles}>\n\t\t\t\t\t<h3\n\t\t\t\t\t\tcss={titleStyles(palette)}\n\t\t\t\t\t\titemProp=\"name\"\n\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: title }}\n\t\t\t\t\t/>\n\t\t\t\t\t<div itemProp=\"description\">\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t${body.medium()}\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: caption }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</figcaption>\n\t\t\t</>\n\t\t</WitnessWrapper>\n\t);\n};\n\ntype TextProps = {\n\ttitle: string;\n\tauthorName: string;\n\tdateCreated: string;\n\tdescription: string;\n\tpalette: Palette;\n};\n\nexport const WitnessTextBlockComponent = ({\n\ttitle,\n\tauthorName,\n\tdateCreated,\n\tdescription,\n\tpalette,\n}: TextProps): JSX.Element => (\n\t<WitnessWrapper\n\t\tauthorName={authorName}\n\t\tdateCreated={dateCreated}\n\t\tpalette={palette}\n\t>\n\t\t<>\n\t\t\t<h3\n\t\t\t\tcss={titleStyles(palette)}\n\t\t\t\titemProp=\"name\"\n\t\t\t\tdangerouslySetInnerHTML={{ __html: title }}\n\t\t\t/>\n\t\t\t<div itemProp=\"text\">\n\t\t\t\t<p\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${body.medium()}\n\t\t\t\t\t`}\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: description }}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t</WitnessWrapper>\n);\n\ntype VideoProps = {\n\ttitle: string;\n\tdescription: string;\n\tauthorName: string;\n\tyoutubeHtml: string;\n\tdateCreated: string;\n\tpalette: Palette;\n};\n\nexport const WitnessVideoBlockComponent = ({\n\ttitle,\n\tdescription,\n\tauthorName,\n\tyoutubeHtml,\n\tdateCreated,\n\tpalette,\n}: VideoProps): JSX.Element => (\n\t<WitnessWrapper\n\t\tauthorName={authorName}\n\t\tdateCreated={dateCreated}\n\t\tpalette={palette}\n\t>\n\t\t<>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tiframe {\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t\tdangerouslySetInnerHTML={{ __html: youtubeHtml }}\n\t\t\t/>\n\t\t\t<figcaption css={captionStyles}>\n\t\t\t\t<h3\n\t\t\t\t\tcss={titleStyles(palette)}\n\t\t\t\t\titemProp=\"name\"\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: title }}\n\t\t\t\t/>\n\t\t\t\t<div itemProp=\"description\">\n\t\t\t\t\t<p\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${body.medium()}\n\t\t\t\t\t\t`}\n\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: description }}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</figcaption>\n\t\t</>\n\t</WitnessWrapper>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/YoutubeBlockComponent.importable.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":105,"column":25,"nodeType":"Identifier","messageId":"invalidType","endLine":105,"endColumn":30},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":143,"column":31,"nodeType":"Punctuator","messageId":"preferNullish","endLine":143,"endColumn":33,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[3295,3297],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":205,"column":18,"nodeType":"Punctuator","messageId":"preferNullish","endLine":205,"endColumn":20,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4472,4493],"text":"(altText ?? mediaTitle)"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":205,"column":32,"nodeType":"Punctuator","messageId":"preferNullish","endLine":205,"endColumn":34,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4494,4496],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":220,"column":30,"nodeType":"Punctuator","messageId":"preferNullish","endLine":220,"endColumn":32,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[4919,4921],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { YoutubeAtom } from '@guardian/atoms-rendering';\nimport type { ConsentState } from '@guardian/consent-management-platform/dist/types';\nimport { body, neutral, space } from '@guardian/source-foundations';\nimport { SvgAlertRound } from '@guardian/source-react-components';\nimport { useEffect, useState } from 'react';\nimport { trackVideoInteraction } from '../browser/ga/ga';\nimport { record } from '../browser/ophan/ophan';\nimport { Caption } from './Caption';\n\ntype Props = {\n\tid: string;\n\telementId: string;\n\tmediaTitle?: string;\n\taltText?: string;\n\tassetId: string;\n\texpired: boolean;\n\tformat: ArticleFormat;\n\trole: RoleType;\n\thideCaption?: boolean;\n\toverrideImage?: string;\n\tposterImage?: {\n\t\turl: string;\n\t\twidth: number;\n\t}[];\n\tadTargeting?: AdTargeting;\n\tisMainMedia?: boolean;\n\theight?: number;\n\twidth?: number;\n\tduration?: number; // in seconds\n\torigin?: string;\n\tstickyVideos: boolean;\n};\n\nconst expiredOverlayStyles = (overrideImage: string) => css`\n\theight: 0px;\n\tposition: relative;\n\tbackground-image: url(${overrideImage});\n\tbackground-size: cover;\n\tbackground-position: 49% 49%;\n\tbackground-repeat: no-repeat;\n\tpadding-bottom: 56%;\n\tcolor: ${neutral[100]};\n\tbackground-color: ${neutral[20]};\n`;\n\nconst expiredTextWrapperStyles = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n\n\tpadding-top: ${space[4]}px;\n\tpadding-bottom: ${space[4]}px;\n\tpadding-left: ${space[1]}px;\n\tpadding-right: ${space[12]}px;\n\tcolor: ${neutral[100]};\n\tbackground-color: ${neutral[20]};\n`;\n\nconst expiredSVGWrapperStyles = css`\n\tpadding-right: ${space[1]}px;\n\tsvg {\n\t\twidth: ${space[12]}px;\n\t\theight: ${space[12]}px;\n\t\tfill: ${neutral[100]};\n\t}\n`;\n\nexport const YoutubeBlockComponent = ({\n\tid,\n\telementId,\n\tassetId,\n\tmediaTitle,\n\taltText,\n\tformat,\n\thideCaption,\n\toverrideImage,\n\tposterImage,\n\texpired,\n\trole,\n\tadTargeting,\n\tisMainMedia,\n\theight = 259,\n\twidth = 460,\n\tduration,\n\torigin,\n\tstickyVideos,\n}: Props): JSX.Element => {\n\tconst [consentState, setConsentState] = useState<ConsentState | undefined>(\n\t\tundefined,\n\t);\n\n\tuseEffect(() => {\n\t\tconst defineConsentState = async () => {\n\t\t\tconst { onConsentChange } = await import(\n\t\t\t\t'@guardian/consent-management-platform'\n\t\t\t);\n\t\t\tonConsentChange((newConsent: ConsentState) => {\n\t\t\t\tsetConsentState(newConsent);\n\t\t\t});\n\t\t};\n\n\t\tdefineConsentState().catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\tnew Error(`Error: ${error}`),\n\t\t\t\t'youtube-consent',\n\t\t\t);\n\t\t});\n\t}, []);\n\n\tconst shouldLimitWidth =\n\t\t!isMainMedia &&\n\t\t(role === 'showcase' || role === 'supporting' || role === 'immersive');\n\n\tif (expired) {\n\t\treturn (\n\t\t\t<figure\n\t\t\t\tcss={css`\n\t\t\t\t\tmargin-top: 16px;\n\t\t\t\t\tmargin-bottom: 16px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<div css={overrideImage && expiredOverlayStyles(overrideImage)}>\n\t\t\t\t\t<div css={expiredTextWrapperStyles}>\n\t\t\t\t\t\t<div css={expiredSVGWrapperStyles}>\n\t\t\t\t\t\t\t<SvgAlertRound />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t${body.medium({\n\t\t\t\t\t\t\t\t\tlineHeight: 'tight',\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tThis video has been removed. This could be because\n\t\t\t\t\t\t\tit launched early, our rights have expired, there\n\t\t\t\t\t\t\twas a legal issue, or for another reason.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{!hideCaption && (\n\t\t\t\t\t<Caption\n\t\t\t\t\t\tcaptionText={mediaTitle || ''}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tdisplayCredit={false}\n\t\t\t\t\t\tshouldLimitWidth={shouldLimitWidth}\n\t\t\t\t\t\tmediaType=\"Video\"\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</figure>\n\t\t);\n\t}\n\n\tconst ophanTracking = (trackingEvent: string) => {\n\t\tif (!id) return;\n\t\trecord({\n\t\t\tvideo: {\n\t\t\t\tid: `gu-video-youtube-${id}`,\n\t\t\t\teventType: `video:content:${trackingEvent}`,\n\t\t\t},\n\t\t});\n\t};\n\n\tconst gaTracking = (trackingEvent: string) => {\n\t\tif (!id) return;\n\t\ttrackVideoInteraction({\n\t\t\ttrackingEvent,\n\t\t\telementId: id,\n\t\t});\n\t};\n\n\treturn (\n\t\t<div data-chromatic=\"ignore\" data-component=\"youtube-atom\">\n\t\t\t<YoutubeAtom\n\t\t\t\telementId={elementId}\n\t\t\t\tvideoId={assetId}\n\t\t\t\toverrideImage={\n\t\t\t\t\toverrideImage\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsrcSet: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tsrc: overrideImage,\n\t\t\t\t\t\t\t\t\t\t\twidth: 500, // we do not have width for overlayImage so set a random number\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\tposterImage={\n\t\t\t\t\tposterImage\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tsrcSet: posterImage.map((img) => ({\n\t\t\t\t\t\t\t\t\t\tsrc: img.url,\n\t\t\t\t\t\t\t\t\t\twidth: img.width,\n\t\t\t\t\t\t\t\t\t})),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: undefined\n\t\t\t\t}\n\t\t\t\trole={role}\n\t\t\t\talt={altText || mediaTitle || ''}\n\t\t\t\tadTargeting={adTargeting}\n\t\t\t\tconsentState={consentState}\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t\ttitle={mediaTitle}\n\t\t\t\tduration={duration}\n\t\t\t\teventEmitters={[ophanTracking, gaTracking]}\n\t\t\t\tpillar={format.theme}\n\t\t\t\torigin={process.env.NODE_ENV === 'development' ? '' : origin}\n\t\t\t\tshouldStick={stickyVideos}\n\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t/>\n\t\t\t{!hideCaption && (\n\t\t\t\t<Caption\n\t\t\t\t\tcaptionText={mediaTitle || ''}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tdisplayCredit={false}\n\t\t\t\t\tshouldLimitWidth={shouldLimitWidth}\n\t\t\t\t\tmediaType=\"Video\"\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/YoutubeBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":35,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":35,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":69,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":69,"endColumn":30},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":105,"column":24,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":105,"endColumn":29},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":142,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":142,"endColumn":38},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":180,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":180,"endColumn":37},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":239,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":239,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { ElementContainer } from './ElementContainer';\nimport { Flex } from './Flex';\nimport { LeftColumn } from './LeftColumn';\nimport { RightColumn } from './RightColumn';\nimport { YoutubeBlockComponent } from './YoutubeBlockComponent.importable';\n\nexport default {\n\tcomponent: YoutubeBlockComponent,\n\ttitle: 'Components/YoutubeBlockComponent',\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<ElementContainer showTopBorder={false}>\n\t\t<Flex>\n\t\t\t<LeftColumn borderType=\"full\">\n\t\t\t\t<></>\n\t\t\t</LeftColumn>\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\tmax-width: 620px;\n\t\t\t\t\tpadding: 20px;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t\t<RightColumn>\n\t\t\t\t<></>\n\t\t\t</RightColumn>\n\t\t</Flex>\n\t</ElementContainer>\n);\n\nexport const Default = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t\t<YoutubeBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tassetId=\"d2Q5bXvEgMg\"\n\t\t\t\tmediaTitle=\"Prince Harry and Meghan's 'bombshell' plans explained – video\"\n\t\t\t\tid=\"c2b8a51c-cb3d-41e7-bb79-1d9a091d0c28\"\n\t\t\t\telementId=\"5ab531a2-f6ea-499d-b274-191114c8628c\"\n\t\t\t\texpired={false}\n\t\t\t\trole=\"inline\"\n\t\t\t\tstickyVideos={false}\n\t\t\t/>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nDefault.story = { name: 'default' };\n\nexport const Vertical = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t\t<YoutubeBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tassetId=\"d2Q5bXvEgMg\"\n\t\t\t\tmediaTitle=\"Prince Harry and Meghan's 'bombshell' plans explained – video\"\n\t\t\t\tid=\"c2b8a51c-cb3d-41e7-bb79-1d9a091d0c28\"\n\t\t\t\telementId=\"5ab531a2-f6ea-499d-b274-191114c8628c\"\n\t\t\t\texpired={false}\n\t\t\t\trole=\"inline\"\n\t\t\t\theight={259}\n\t\t\t\twidth={460}\n\t\t\t\tstickyVideos={false}\n\t\t\t/>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nVertical.story = { name: 'with height and width set' };\n\nexport const Expired = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t\t<YoutubeBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tassetId=\"d2Q5bXvEgMg\"\n\t\t\t\tmediaTitle=\"Prince Harry and Meghan's 'bombshell' plans explained – video\"\n\t\t\t\tid=\"c2b8a51c-cb3d-41e7-bb79-1d9a091d0c28\"\n\t\t\t\telementId=\"5ab531a2-f6ea-499d-b274-191114c8628c\"\n\t\t\t\texpired={true}\n\t\t\t\toverrideImage=\"https://i.guim.co.uk/img/media/49565a29c6586fe6b748926e0be96c5e9c90473c/0_0_4981_2989/500.jpg?quality=85&auto=format&fit=max&s=17c70ec70002ea34886fd6c2605cd81e\"\n\t\t\t\trole=\"inline\"\n\t\t\t\theight={259}\n\t\t\t\twidth={460}\n\t\t\t\tstickyVideos={false}\n\t\t\t/>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nExpired.story = { name: 'expired video' };\n\nexport const WithOverlayImage = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t\t<YoutubeBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tassetId=\"d2Q5bXvEgMg\"\n\t\t\t\tmediaTitle=\"Prince Harry and Meghan's 'bombshell' plans explained – video\"\n\t\t\t\tid=\"c2b8a51c-cb3d-41e7-bb79-1d9a091d0c28\"\n\t\t\t\telementId=\"5ab531a2-f6ea-499d-b274-191114c8628c\"\n\t\t\t\texpired={false}\n\t\t\t\tduration={333}\n\t\t\t\toverrideImage=\"https://i.guim.co.uk/img/media/49565a29c6586fe6b748926e0be96c5e9c90473c/0_0_4981_2989/500.jpg?quality=85&auto=format&fit=max&s=17c70ec70002ea34886fd6c2605cd81e\"\n\t\t\t\trole=\"inline\"\n\t\t\t\theight={259}\n\t\t\t\twidth={460}\n\t\t\t\tstickyVideos={false}\n\t\t\t/>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nWithOverlayImage.story = { name: 'with overlay image' };\n\nexport const WithPosterImage = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t\t<YoutubeBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tassetId=\"d2Q5bXvEgMg\"\n\t\t\t\tmediaTitle=\"Prince Harry and Meghan's 'bombshell' plans explained – video\"\n\t\t\t\tid=\"c2b8a51c-cb3d-41e7-bb79-1d9a091d0c28\"\n\t\t\t\telementId=\"5ab531a2-f6ea-499d-b274-191114c8628c\"\n\t\t\t\texpired={false}\n\t\t\t\tduration={333}\n\t\t\t\tposterImage={[\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/2000.jpg',\n\t\t\t\t\t\twidth: 2000,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/1000.jpg',\n\t\t\t\t\t\twidth: 1000,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/500.jpg',\n\t\t\t\t\t\twidth: 500,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/140.jpg',\n\t\t\t\t\t\twidth: 140,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/4255.jpg',\n\t\t\t\t\t\twidth: 4255,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\trole=\"inline\"\n\t\t\t\theight={259}\n\t\t\t\twidth={460}\n\t\t\t\tstickyVideos={false}\n\t\t\t/>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nWithPosterImage.story = { name: 'with poster image' };\n\nexport const WithPosterAndOverlayImage = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t\t<YoutubeBlockComponent\n\t\t\t\tformat={{\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t}}\n\t\t\t\tassetId=\"d2Q5bXvEgMg\"\n\t\t\t\tmediaTitle=\"Prince Harry and Meghan's 'bombshell' plans explained – video\"\n\t\t\t\tid=\"c2b8a51c-cb3d-41e7-bb79-1d9a091d0c28\"\n\t\t\t\telementId=\"5ab531a2-f6ea-499d-b274-191114c8628c\"\n\t\t\t\texpired={false}\n\t\t\t\toverrideImage=\"https://i.guim.co.uk/img/media/49565a29c6586fe6b748926e0be96c5e9c90473c/0_0_4981_2989/500.jpg?quality=85&auto=format&fit=max&s=17c70ec70002ea34886fd6c2605cd81e\"\n\t\t\t\tduration={333}\n\t\t\t\tposterImage={[\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/2000.jpg',\n\t\t\t\t\t\twidth: 2000,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/1000.jpg',\n\t\t\t\t\t\twidth: 1000,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/500.jpg',\n\t\t\t\t\t\twidth: 500,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/140.jpg',\n\t\t\t\t\t\twidth: 140,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\turl: 'https://media.guim.co.uk/45c34a4312b228773b1bdec415b4253667b21ae3/0_0_4255_2394/4255.jpg',\n\t\t\t\t\t\twidth: 4255,\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t\trole=\"inline\"\n\t\t\t\theight={259}\n\t\t\t\twidth={460}\n\t\t\t\tstickyVideos={false}\n\t\t\t/>\n\t\t\t<p>\n\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n\t\t\t\teiusmod tempor incididunt ut labore et dolore magna aliqua. Ut\n\t\t\t\tenim ad minim veniam, quis nostrud exercitation ullamco laboris\n\t\t\t\tnisi ut aliquip ex ea commodo consequat.{' '}\n\t\t\t</p>\n\t\t</Container>\n\t);\n};\nWithPosterAndOverlayImage.story = { name: 'with poster and overlay image' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/YoutubeEmbedBlockComponent.stories.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":26,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":26,"endColumn":41}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport { YoutubeEmbedBlockComponent } from './YoutubeEmbedBlockComponent';\n\nexport default {\n\tcomponent: YoutubeEmbedBlockComponent,\n\ttitle: 'Components/YoutubeEmbedComponent',\n\tparameters: {\n\t\tchromatic: {\n\t\t\tdisable: true,\n\t\t},\n\t},\n};\n\nconst Container = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\tmax-width: 620px;\n\t\t\tpadding: 20px;\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const standardAspectRatio = () => {\n\treturn (\n\t\t<Container>\n\t\t\t<p>abc</p>\n\t\t\t<YoutubeEmbedBlockComponent\n\t\t\t\tembedUrl=\"https://www.youtube-nocookie.com/embed/79fzeNUqQbQ?wmode=opaque&feature=oembed\"\n\t\t\t\tformat={{\n\t\t\t\t\ttheme: ArticlePillar.News,\n\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\tdesign: ArticleDesign.Standard,\n\t\t\t\t}}\n\t\t\t\theight={259}\n\t\t\t\twidth={460}\n\t\t\t\tcaption=\"blah\"\n\t\t\t\tcredit=\"\"\n\t\t\t\ttitle=\"\"\n\t\t\t\tisMainMedia={false}\n\t\t\t/>\n\t\t\t<p>abc</p>\n\t\t</Container>\n\t);\n};\nstandardAspectRatio.story = { name: 'with standard aspect ratio' };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/YoutubeEmbedBlockComponent.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":16,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":25,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { Caption } from './Caption';\nimport { MaintainAspectRatio } from './MaintainAspectRatio';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tembedUrl?: string;\n\theight: number;\n\twidth: number;\n\tcaption?: string;\n\tcredit?: string;\n\ttitle?: string;\n\tisMainMedia: boolean;\n};\n\nexport const YoutubeEmbedBlockComponent = ({\n\tembedUrl,\n\tcaption,\n\ttitle,\n\tformat,\n\twidth,\n\theight,\n\tcredit,\n\tisMainMedia,\n}: Props) => {\n\t// 812 is the full height on an iphone X. This ensures that the embed doesn't display any larger than the available viewport\n\t// Constrain iframe embeds with a width to their natural width\n\t// rather than stretch them to the container using\n\t// a max that would prevent portrait videos from being taller than an iphone X (baseline)\n\t// More context: https://github.com/guardian/frontend/pull/17902\n\tconst maxHeight = 812;\n\tconst aspectRatio = width / height;\n\tconst maxWidth = maxHeight * aspectRatio;\n\n\tconst embedContainer = css`\n\t\tmax-width: ${maxWidth}px;\n\t\twidth: 100%;\n\t\tmargin-bottom: ${caption ? `0px` : `6px`};\n\t`;\n\n\treturn (\n\t\t<div css={embedContainer} data-component=\"youtube-embed\">\n\t\t\t<MaintainAspectRatio height={height} width={width}>\n\t\t\t\t<iframe\n\t\t\t\t\tsrc={embedUrl}\n\t\t\t\t\ttitle={title}\n\t\t\t\t\theight={height}\n\t\t\t\t\twidth={width}\n\t\t\t\t\tallowFullScreen={true}\n\t\t\t\t/>\n\t\t\t</MaintainAspectRatio>\n\t\t\t{caption && (\n\t\t\t\t<Caption\n\t\t\t\t\tcaptionText={caption}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tcredit={credit}\n\t\t\t\t\tmediaType=\"Video\"\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Eight.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Five.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const Five = () => (\n\t<svg width=\"27\" height=\"40\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path\n\t\t\td=\"M11.9 40C21.5 40 27 34.8 27 27c0-8.2-5.3-12-13-12-3.9 0-8.1 1-10.7 4l.6-11.5h20.7l.7-7.5h-22L2 20.8a12 12 0 0 1 5.7-1.3c5.5 0 8.7 2.8 8.7 8.5 0 5.8-3.3 9.1-9.6 9.1A16 16 0 0 1 0 35.5v1.3C2.6 38.6 6.8 40 11.9 40z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t/>\n\t</svg>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Four.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const Four = () => (\n\t<svg width=\"31\" height=\"40\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path\n\t\t\td=\"M12.5 40v-1l4.3-1.3v-9.2H0v-1L18.7 0h8.1v27.4H31v1.1h-4.2v9.2l3.7 1.4v.9h-18zm-11-12.6h15.3v-22h-.3l-15 21.8v.2z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t/>\n\t</svg>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Nine.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":21,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const Nine = () => (\n\t<svg width=\"31\" height=\"40\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path\n\t\t\td=\"M31 19c0 14.7-7.9 21-18.6 21C8 40 4 38.8 2.2 37.4v-1.1c1.8 1 4 1.3 6.5 1.3 7.8 0 11-5.3 11.6-16.2a14 14 0 0 1-9.6 4C3.7 25.5 0 20.2 0 13.2 0 5.7 5 0 15 0c11 0 16 7.7 16 19zm-20.6-7.3c0 7 1.7 9.5 5.3 9.5 1.5 0 3.4-.3 4.7-1v-2.8C20.4 5.8 18.7 1 15 1c-3.2 0-4.5 3.1-4.5 10.6z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t/>\n\t</svg>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/One.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const One = () => (\n\t<svg width=\"21\" height=\"40\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path\n\t\t\td=\"M0 40h21v-1l-5.4-1.6V0h-4.3L.1 5.4v1.3l5.5-1.4v32.1L0 39.1z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t/>\n\t</svg>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Seven.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const Seven = () => (\n\t<svg width=\"28\" height=\"40\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path\n\t\t\td=\"M3.4 40h11L28 6V0H.6L0 12.3h1.1L3 7.5h23v.3z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t/>\n\t</svg>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Six.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const Six = () => (\n\t<svg width=\"31\" height=\"40\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path\n\t\t\td=\"M31 27c0 7.3-5 13-15 13C5 40 0 32.3 0 21 0 6.4 7.9 0 18.6 0a17 17 0 0 1 9.7 2.6v1.1a12 12 0 0 0-6-1.3c-7.8 0-11 5.3-11.6 16.2a14 14 0 0 1 9.6-4c7 0 10.7 5.3 10.7 12.3zm-20-4c0 11.5 1.7 16.3 5.5 16.3 3.2 0 4.5-3.2 4.5-10.7 0-6.8-1.7-9.5-5.3-9.5-1.5 0-3.4.4-4.7 1v3z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t/>\n\t</svg>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Ten.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":20,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const Ten = () => (\n\t<svg width=\"54\" height=\"40\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<path\n\t\t\td=\"M0 40h21v-1l-5.4-1.6V0h-4.3L.1 5.4v1.3l5.5-1.4v32.1L0 39.1zm37 0c-9.2 0-17-6.8-17-19.8C20 6.6 28.1 0 37.3 0 46.4 0 54 6.5 54 19.9 54 33.3 46.3 40 37 40zm.1-1c4 0 5.2-6.1 5.2-18.7C42.3 7 41 1.1 37.1 1.1c-4 0-5.4 6-5.4 18.7 0 13 1.4 19.1 5.4 19.1z\"\n\t\t\tfillRule=\"evenodd\"\n\t\t/>\n\t</svg>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Three.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Two.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/components/numbers/Zero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/experiments/ab-tests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/experiments/cypress-switches.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":20,"column":35,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":20,"endColumn":40}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Forced AB Test Switches for Cypress testing\n\n// AB test switches are defined in Frontend and required to be \"ON\" for Cypress E2E Tests to successfully run and pass.\n// However, it is useful to be able to switch an AB test on/off in Frontend Admin UI without breaking tests that rely\n// on those switches in another repo (DCR).\n\n// By adding the switches here, and the state we want them to be in when we run Cypress tests, we no longer have to\n// worry about the state of the switch in Frontend. In turn allowing tests to pass even if a switch has changed state\n// in Frontend, e.g. a switch has been set to \"OFF\".\n\n// Add switches to be a specific state in Cypress to this object\nconst cypressSwitches = {\n\tabAbTestTest: true, // Test switch, used for Cypress integration test\n\tabSignInGateMainControl: true,\n\tabSignInGateMainVariant: true,\n\tabSignInGateAusMandatory: true,\n};\n\n// Function to retrieve the switches if running in Cypress\nexport const getCypressSwitches = () => {\n\t// If running within cypress, return the forced switches\n\tif (window.Cypress) return cypressSwitches;\n\t// Otherwise just return empty object\n\treturn {};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/experiments/tests/ab-test-test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/experiments/tests/newsletter-merch-unit-test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/experiments/tests/prebid-price-granularity.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":19,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":19,"endColumn":15},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":23,"column":10,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":23,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { ABTest } from '@guardian/ab-core';\n\nexport const prebidPriceGranularity: ABTest = {\n\tid: 'PrebidPriceGranularity',\n\tstart: '2022-04-05',\n\texpiry: '2022-06-09',\n\tauthor: 'Chris Jones (@chrislomaxjones)',\n\tdescription:\n\t\t'Test the commercial impact of changing Prebid Price granularity for Ozone',\n\taudience: 5 / 100,\n\taudienceOffset: 25 / 100,\n\tsuccessMeasure:\n\t\t'No significant negative impact on CPM when using a granularity that permits fewer line items',\n\taudienceCriteria: 'n/a',\n\tcanRun: () => true,\n\tvariants: [\n\t\t{\n\t\t\tid: 'control',\n\t\t\ttest: () => {},\n\t\t},\n\t\t{\n\t\t\tid: 'variant',\n\t\t\ttest: () => {},\n\t\t},\n\t],\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/experiments/tests/sign-in-gate-main-control.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/experiments/tests/sign-in-gate-main-variant.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/CommentLayout.tsx","messages":[{"ruleId":"import/order","severity":1,"message":"`../components/OnwardsUpper.importable` import should occur before import of `../components/RightColumn`","line":44,"column":1,"nodeType":"ImportDeclaration","endLine":44,"endColumn":70,"fix":{"range":[1595,2281],"text":"import { OnwardsUpper } from '../components/OnwardsUpper.importable';\nimport { RightColumn } from '../components/RightColumn';\nimport { SlotBodyEnd } from '../components/SlotBodyEnd.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { getContributionsServiceUrl } from '../lib/contributions';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getCurrentPillar } from '../lib/layoutHelpers';\nimport { BannerWrapper, SendToBack, Stuck } from './lib/stickiness';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/OnwardsLower.importable` import should occur before import of `../components/RightColumn`","line":45,"column":1,"nodeType":"ImportDeclaration","endLine":45,"endColumn":70,"fix":{"range":[1595,2351],"text":"import { OnwardsLower } from '../components/OnwardsLower.importable';\nimport { RightColumn } from '../components/RightColumn';\nimport { SlotBodyEnd } from '../components/SlotBodyEnd.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { getContributionsServiceUrl } from '../lib/contributions';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getCurrentPillar } from '../lib/layoutHelpers';\nimport { BannerWrapper, SendToBack, Stuck } from './lib/stickiness';\nimport { OnwardsUpper } from '../components/OnwardsUpper.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/MostViewedFooterLayout` import should occur before import of `../components/MostViewedRightWrapper.importable`","line":46,"column":1,"nodeType":"ImportDeclaration","endLine":46,"endColumn":79,"fix":{"range":[1460,2430],"text":"import { MostViewedFooterLayout } from '../components/MostViewedFooterLayout';\nimport { MostViewedRightWrapper } from '../components/MostViewedRightWrapper.importable';\nimport { Nav } from '../components/Nav/Nav';\nimport { RightColumn } from '../components/RightColumn';\nimport { SlotBodyEnd } from '../components/SlotBodyEnd.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { getContributionsServiceUrl } from '../lib/contributions';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getCurrentPillar } from '../lib/layoutHelpers';\nimport { BannerWrapper, SendToBack, Stuck } from './lib/stickiness';\nimport { OnwardsUpper } from '../components/OnwardsUpper.importable';\nimport { OnwardsLower } from '../components/OnwardsLower.importable';\n"}},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":280,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":280,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8057,8059],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":297,"column":20,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":297,"endColumn":72,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[8658,8710],"text":"contributorTag?.bylineLargeImageUrl"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":463,"column":24,"nodeType":"Punctuator","messageId":"preferNullish","endLine":463,"endColumn":26,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[13074,13076],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":582,"column":36,"nodeType":"Punctuator","messageId":"preferNullish","endLine":582,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[16461,16463],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":585,"column":43,"nodeType":"Punctuator","messageId":"preferNullish","endLine":585,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[16572,16574],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":725,"column":41,"nodeType":"Punctuator","messageId":"preferNullish","endLine":725,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[20125,20127],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":3,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport {\n\tbrandBackground,\n\tbrandBorder,\n\tbrandLine,\n\tfrom,\n\tneutral,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { StraightLines } from '@guardian/source-react-components-development-kitchen';\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { parse } from '../../lib/slot-machine-flags';\nimport { AdSlot, MobileStickyContainer } from '../components/AdSlot';\nimport { ArticleBody } from '../components/ArticleBody';\nimport { ArticleContainer } from '../components/ArticleContainer';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { Border } from '../components/Border';\nimport { ContributorAvatar } from '../components/ContributorAvatar';\nimport { DiscussionLayout } from '../components/DiscussionLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { GridItem } from '../components/GridItem';\nimport { Header } from '../components/Header';\nimport { HeaderAdSlot } from '../components/HeaderAdSlot';\nimport { Hide } from '../components/Hide';\nimport { Island } from '../components/Island';\nimport { MainMedia } from '../components/MainMedia';\nimport { MostViewedRightWrapper } from '../components/MostViewedRightWrapper.importable';\nimport { Nav } from '../components/Nav/Nav';\nimport { RightColumn } from '../components/RightColumn';\nimport { SlotBodyEnd } from '../components/SlotBodyEnd.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { getContributionsServiceUrl } from '../lib/contributions';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getCurrentPillar } from '../lib/layoutHelpers';\nimport { BannerWrapper, SendToBack, Stuck } from './lib/stickiness';\nimport { OnwardsUpper } from '../components/OnwardsUpper.importable';\nimport { OnwardsLower } from '../components/OnwardsLower.importable';\nimport { MostViewedFooterLayout } from '../components/MostViewedFooterLayout';\n\nconst StandardGrid = ({\n\tchildren,\n\tdisplay,\n}: {\n\tchildren: React.ReactNode;\n\tdisplay: ArticleDisplay;\n}) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.leftCol} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.leftCol} {\n\t\t\t\tmargin-left: 151px;\n\t\t\t}\n\t\t\t${from.wide} {\n\t\t\t\tmargin-left: 230px;\n\t\t\t}\n\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\n\t\t\t\tgrid-column-gap: 10px;\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${from.wide} {\n\t\t\t\t\tgrid-template-columns: 219px 1px 1fr 300px;\n\n\t\t\t\t\t${display === ArticleDisplay.Showcase\n\t\t\t\t\t\t? css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title      border  headline    headline'\n\t\t\t\t\t\t\t\t\t'lines      border  headline    headline'\n\t\t\t\t\t\t\t\t\t'meta       border  standfirst  standfirst'\n\t\t\t\t\t\t\t\t\t'meta       border  media       media'\n\t\t\t\t\t\t\t\t\t'.          border  body        right-column'\n\t\t\t\t\t\t\t\t\t'.          border  .           right-column';\n\t\t\t\t\t\t  `\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title      border  headline    right-column'\n\t\t\t\t\t\t\t\t\t'lines      border  headline    right-column'\n\t\t\t\t\t\t\t\t\t'meta       border  standfirst  right-column'\n\t\t\t\t\t\t\t\t\t'meta       border  media       right-column'\n\t\t\t\t\t\t\t\t\t'.          border  body        right-column'\n\t\t\t\t\t\t\t\t\t'.          border  .           right-column';\n\t\t\t\t\t\t  `}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.wide} {\n\t\t\t\t\tgrid-template-columns: 140px 1px 1fr 300px;\n\n\t\t\t\t\t${display === ArticleDisplay.Showcase\n\t\t\t\t\t\t? css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title      border  headline    headline'\n\t\t\t\t\t\t\t\t\t'lines      border  headline    headline'\n\t\t\t\t\t\t\t\t\t'meta       border  standfirst  standfirst'\n\t\t\t\t\t\t\t\t\t'meta       border  media       media'\n\t\t\t\t\t\t\t\t\t'.          border  body        right-column'\n\t\t\t\t\t\t\t\t\t'.          border  .           right-column';\n\t\t\t\t\t\t  `\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title      border  headline    right-column'\n\t\t\t\t\t\t\t\t\t'lines      border  headline    right-column'\n\t\t\t\t\t\t\t\t\t'meta       border  standfirst  right-column'\n\t\t\t\t\t\t\t\t\t'meta       border  media       right-column'\n\t\t\t\t\t\t\t\t\t'.          border  body        right-column'\n\t\t\t\t\t\t\t\t\t'.          border  .           right-column';\n\t\t\t\t\t\t  `}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\tgrid-template-columns: 1fr 300px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title      right-column'\n\t\t\t\t\t\t'headline   right-column'\n\t\t\t\t\t\t'standfirst right-column'\n\t\t\t\t\t\t'meta       right-column'\n\t\t\t\t\t\t'media      right-column'\n\t\t\t\t\t\t'body       right-column'\n\t\t\t\t\t\t'.          right-column';\n\t\t\t\t}\n\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'media'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\n\t\t\t\t${until.tablet} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'media'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst maxWidth = css`\n\t${from.desktop} {\n\t\tmax-width: 620px;\n\t}\n`;\n\nconst avatarHeadlineWrapper = css`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: space-between;\n`;\n\nconst minHeightWithAvatar = css`\n\tmin-height: 259px;\n`;\n\n// If in mobile increase the margin top and margin right deficit\nconst avatarPositionStyles = css`\n\tdisplay: flex;\n\tjustify-content: flex-end;\n\toverflow: hidden;\n\tposition: relative;\n\tmargin-bottom: -29px;\n\tmargin-top: -50px;\n\tpointer-events: none;\n\n\t/*  Why target img element?\n\n        Because only in this context, where we have overflow: hidden\n        and the margin-bottom and margin-top of avatarPositionStyles\n        do we also want to apply our margin-right. These styles\n        are tightly coupled in this context, and so it does not\n        make sense to move them to the avatar component.\n\n        It's imperfect from the perspective of DCR, the alternative is to bust\n        the combined elements into a separate component (with the\n        relevant stories) and couple them that way, which might be what\n        you want to do if you find yourself adding more styles\n        to this section. For now, this works without making me 🤢.\n    */\n\n\t${from.mobile} {\n\t\timg {\n\t\t\tmargin-right: -1.85rem;\n\t\t}\n\t}\n\t${from.mobileLandscape} {\n\t\timg {\n\t\t\tmargin-right: -1.25rem;\n\t\t}\n\t}\n`;\n\nconst pushToBottom = css`\n\tdisplay: flex;\n\theight: 100%;\n\tflex-direction: column;\n\tjustify-content: flex-end;\n`;\n\nconst mainMediaWrapper = css`\n\tposition: relative;\n`;\n\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n}\n\nexport const CommentLayout = ({\n\tCAPIArticle,\n\tNAV,\n\tformat,\n}: Props): JSX.Element => {\n\tconst {\n\t\tconfig: { isPaidContent, host },\n\t} = CAPIArticle;\n\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: CAPIArticle.isAdFreeUser,\n\t\tisSensitive: CAPIArticle.config.isSensitive,\n\t\tvideoDuration: CAPIArticle.config.videoDuration,\n\t\tedition: CAPIArticle.config.edition,\n\t\tsection: CAPIArticle.config.section,\n\t\tsharedAdTargeting: CAPIArticle.config.sharedAdTargeting,\n\t\tadUnit: CAPIArticle.config.adUnit,\n\t});\n\n\tconst showBodyEndSlot =\n\t\tparse(CAPIArticle.slotMachineFlags || '').showBodyEnd ||\n\t\tCAPIArticle.config.switches.slotBodyEnd;\n\n\t// TODO:\n\t// 1) Read 'forceEpic' value from URL parameter and use it to force the slot to render\n\t// 2) Otherwise, ensure slot only renders if `CAPIArticle.config.shouldHideReaderRevenue` equals false.\n\n\tconst seriesTag = CAPIArticle.tags.find(\n\t\t(tag) => tag.type === 'Series' || tag.type === 'Blog',\n\t);\n\tconst showOnwardsLower = seriesTag && CAPIArticle.hasStoryPackage;\n\n\tconst showComments = CAPIArticle.isCommentable;\n\n\tconst contributorTag = CAPIArticle.tags.find(\n\t\t(tag) => tag.type === 'Contributor',\n\t);\n\tconst avatarUrl = contributorTag && contributorTag.bylineLargeImageUrl;\n\tconst onlyOneContributor: boolean =\n\t\tCAPIArticle.tags.filter((tag) => tag.type === 'Contributor').length ===\n\t\t1;\n\n\tconst showAvatar = avatarUrl && onlyOneContributor;\n\n\tconst { branding } =\n\t\tCAPIArticle.commercialProperties[CAPIArticle.editionId];\n\n\tconst palette = decidePalette(format);\n\n\tconst contributionsServiceUrl = getContributionsServiceUrl(CAPIArticle);\n\n\treturn (\n\t\t<>\n\t\t\t<div id=\"bannerandheader\">\n\t\t\t\t<Stuck>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tshouldCenter={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<HeaderAdSlot\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</Stuck>\n\t\t\t\t<SendToBack>\n\t\t\t\t\t{format.theme !== ArticleSpecial.Labs && (\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\t\telement=\"header\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl}\n\t\t\t\t\t\t\t\tmmaUrl={CAPIArticle.config.mmaUrl}\n\t\t\t\t\t\t\t\tsupporterCTA={\n\t\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t\t.supporter\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\t\t\t\tremoteHeader={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteHeader\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\telement=\"nav\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Nav\n\t\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t\t...format,\n\t\t\t\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t.subscribe\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\n\t\t\t\t\t{NAV.subNavSections && (\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</SendToBack>\n\t\t\t</div>\n\n\t\t\t<main>\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\telement=\"article\"\n\t\t\t\t>\n\t\t\t\t\t<StandardGrid display={format.display}>\n\t\t\t\t\t\t<GridItem area=\"title\" element=\"aside\">\n\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tsectionLabel={CAPIArticle.sectionLabel}\n\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\tguardianBaseURL={CAPIArticle.guardianBaseURL}\n\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"border\">\n\t\t\t\t\t\t\t<Border format={format} />\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"headline\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\tavatarHeadlineWrapper,\n\t\t\t\t\t\t\t\t\t\tshowAvatar && minHeightWithAvatar,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{/* TOP - we position content in groups here using flex */}\n\t\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\theadlineString={CAPIArticle.headline}\n\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\tbyline={CAPIArticle.author.byline}\n\t\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\thasStarRating={\n\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\thasAvatar={!!showAvatar}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{/* BOTTOM */}\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t{showAvatar && avatarUrl && (\n\t\t\t\t\t\t\t\t\t\t\t<div css={avatarPositionStyles}>\n\t\t\t\t\t\t\t\t\t\t\t\t<ContributorAvatar\n\t\t\t\t\t\t\t\t\t\t\t\t\timageSrc={avatarUrl}\n\t\t\t\t\t\t\t\t\t\t\t\t\timageAlt={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.author\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.byline || ''\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\t\t\tcount={8}\n\t\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"lines\">\n\t\t\t\t\t\t\t<div css={pushToBottom}>\n\t\t\t\t\t\t\t\t<Hide when=\"below\" breakpoint=\"desktop\">\n\t\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\t\tcount={8}\n\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"standfirst\">\n\t\t\t\t\t\t\t<Standfirst\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tstandfirst={CAPIArticle.standfirst}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"media\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={\n\t\t\t\t\t\t\t\t\tformat.display === ArticleDisplay.Showcase\n\t\t\t\t\t\t\t\t\t\t? mainMediaWrapper\n\t\t\t\t\t\t\t\t\t\t: maxWidth\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<MainMedia\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\telements={CAPIArticle.mainMediaElements}\n\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\tstarRating={\n\t\t\t\t\t\t\t\t\t\tformat.design ===\n\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Review &&\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating\n\t\t\t\t\t\t\t\t\t\t\t? CAPIArticle.starRating\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"meta\" element=\"aside\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tauthor={CAPIArticle.author}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tprimaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsecondaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationSecondaryDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tisCommentable={CAPIArticle.isCommentable}\n\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tshowShareCount={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t.serverShareCounts\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"body\">\n\t\t\t\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t<ArticleBody\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tblocks={CAPIArticle.blocks}\n\t\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\t\tisSensitive={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.isSensitive\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.config.isPaidContent\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\t\t\t\t\tsectionName={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionName || ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPreview={CAPIArticle.config.isPreview}\n\t\t\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl || ''}\n\t\t\t\t\t\t\t\t\t\tisDev={!!CAPIArticle.config.isDev}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{showBodyEndSlot && (\n\t\t\t\t\t\t\t\t\t\t<Island clientOnly={true}>\n\t\t\t\t\t\t\t\t\t\t\t<SlotBodyEnd\n\t\t\t\t\t\t\t\t\t\t\t\tcontentType={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.contentType\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tidApiUrl={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.idApiUrl\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tisMinuteArticle={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isMinuteArticle\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isPaidContent\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tkeywordsId={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.keywordIds\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\t\t\tsectionId={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.section\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsectionName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionName\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tstage={CAPIArticle.config.stage}\n\t\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<SubMeta\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tsubMetaKeywordLinks={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaKeywordLinks\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsubMetaSectionLinks={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaSectionLinks\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\twebUrl={CAPIArticle.webURL}\n\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\tshowBottomSocialButtons={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.showBottomSocialButtons\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</ArticleContainer>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"right-column\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\tpadding-top: 6px;\n\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\t${from.desktop} {\n\t\t\t\t\t\t\t\t\t\t/* above 980 */\n\t\t\t\t\t\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\t\t\t\t\t\tmargin-right: -20px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\t\t\t\t/* above 1140 */\n\t\t\t\t\t\t\t\t\t\tmargin-left: 0px;\n\t\t\t\t\t\t\t\t\t\tmargin-right: 0px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RightColumn>\n\t\t\t\t\t\t\t\t\t<AdSlot\n\t\t\t\t\t\t\t\t\t\tposition=\"right\"\n\t\t\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType.isPaidContent\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{!isPaidContent ? (\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<MostViewedRightWrapper\n\t\t\t\t\t\t\t\t\t\t\t\tisAdFreeUser={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.isAdFreeUser\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</RightColumn>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</StandardGrid>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot\n\t\t\t\t\t\tposition=\"merchandising-high\"\n\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<Island\n\t\t\t\t\tclientOnly={true}\n\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\tplaceholderHeight={600}\n\t\t\t\t>\n\t\t\t\t\t<OnwardsUpper\n\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\thasRelated={CAPIArticle.hasRelated}\n\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\tCAPIArticle.config.isPaidContent || false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowRelatedContent={\n\t\t\t\t\t\t\tCAPIArticle.config.showRelatedContent\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkeywordIds={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\n\t\t\t\t{showOnwardsLower && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tsectionId=\"onwards-lower\"\n\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"visible\">\n\t\t\t\t\t\t\t<OnwardsLower\n\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && showComments && (\n\t\t\t\t\t<ElementContainer sectionId=\"comments\" element=\"aside\">\n\t\t\t\t\t\t<DiscussionLayout\n\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tdiscussionD2Uid={CAPIArticle.config.discussionD2Uid}\n\t\t\t\t\t\t\tdiscussionApiClientHeader={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiClientHeader\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tenableDiscussionSwitch={\n\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t.enableDiscussionSwitch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && (\n\t\t\t\t\t<ElementContainer data-print-layout=\"hide\" element=\"aside\">\n\t\t\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot position=\"merchandising\" display={format.display} />\n\t\t\t\t</ElementContainer>\n\t\t\t</main>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer padded={false} element=\"aside\">\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={CAPIArticle.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t<BannerWrapper>\n\t\t\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t\t\t<StickyBottomBanner\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\t\tidApiUrl={CAPIArticle.config.idApiUrl}\n\t\t\t\t\t\tisMinuteArticle={CAPIArticle.pageType.isMinuteArticle}\n\t\t\t\t\t\tisPaidContent={CAPIArticle.pageType.isPaidContent}\n\t\t\t\t\t\tisPreview={!!CAPIArticle.config.isPreview}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\tkeywordsId={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoteBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpuzzleBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.puzzlesBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</BannerWrapper>\n\t\t\t<MobileStickyContainer />\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/DecideLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/FrontLayout.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":30,"column":28,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":30,"endColumn":54},{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":132,"column":13,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":132,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleDisplay, ArticlePillar } from '@guardian/libs';\nimport {\n\tbrandBackground,\n\tbrandBorder,\n\tbrandLine,\n} from '@guardian/source-foundations';\nimport { StraightLines } from '@guardian/source-react-components-development-kitchen';\nimport { ContainerLayout } from '../components/ContainerLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { Header } from '../components/Header';\nimport { Island } from '../components/Island';\nimport { MostViewedFooterLayout } from '../components/MostViewedFooterLayout';\nimport { Nav } from '../components/Nav/Nav';\nimport { SubNav } from '../components/SubNav.importable';\nimport { DecideContainer } from '../lib/DecideContainer';\nimport { decidePalette } from '../lib/decidePalette';\n\ninterface Props {\n\tfront: DCRFrontType;\n\tNAV: NavType;\n}\n\nconst spaces = / /g;\n/** TODO: Confirm with is a valid way to generate component IDs. */\nconst ophanComponentId = (name: string) =>\n\tname.toLowerCase().replace(spaces, '-');\n\nexport const FrontLayout = ({ front, NAV }: Props) => {\n\tconst {\n\t\tconfig: { isPaidContent },\n\t} = front;\n\n\tconst format = {\n\t\tdisplay: ArticleDisplay.Standard,\n\t\tdesign: ArticleDesign.Standard,\n\t\ttheme: ArticlePillar.News,\n\t};\n\n\tconst palette = decidePalette(format);\n\n\t// const contributionsServiceUrl = getContributionsServiceUrl(front);\n\n\treturn (\n\t\t<>\n\t\t\t<div data-print-layout=\"hide\" id=\"bannerandheader\">\n\t\t\t\t<>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\telement=\"header\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\tedition={front.editionId}\n\t\t\t\t\t\t\tidUrl={front.config.idUrl}\n\t\t\t\t\t\t\tmmaUrl={front.config.mmaUrl}\n\t\t\t\t\t\t\tsupporterCTA={\n\t\t\t\t\t\t\t\tfront.nav.readerRevenueLinks.header.supporter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdiscussionApiUrl={front.config.discussionApiUrl}\n\t\t\t\t\t\t\turls={front.nav.readerRevenueLinks.header}\n\t\t\t\t\t\t\tremoteHeader={front.config.switches.remoteHeader}\n\t\t\t\t\t\t\tcontributionsServiceUrl=\"https://contributions.guardianapis.com\" // TODO: Pass this in\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\telement=\"nav\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Nav\n\t\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\t\tfront.nav.readerRevenueLinks.header.subscribe\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tedition={front.editionId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t{NAV.subNavSections && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t</div>\n\n\t\t\t<main>\n\t\t\t\t{front.pressedPage.collections.map((collection, index) => {\n\t\t\t\t\t// TODO: We also need to support treats containers\n\t\t\t\t\t// Backfills should be added to the end of any curated content\n\t\t\t\t\tconst trails = collection.curated.concat(\n\t\t\t\t\t\tcollection.backfill,\n\t\t\t\t\t);\n\t\t\t\t\t// There are some containers that have zero trails. We don't want to render these\n\t\t\t\t\tif (trails.length === 0) return null;\n\n\t\t\t\t\tconst ophanName = ophanComponentId(collection.displayName);\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ContainerLayout\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\ttitle={collection.displayName}\n\t\t\t\t\t\t\t// TODO: This logic should be updated, as this relies\n\t\t\t\t\t\t\t// on the first container being 'palette styles do not delete'\n\t\t\t\t\t\t\tshowTopBorder={index > 1}\n\t\t\t\t\t\t\tsideBorders={true}\n\t\t\t\t\t\t\tpadContent={false}\n\t\t\t\t\t\t\tcentralBorder=\"partial\"\n\t\t\t\t\t\t\turl={collection.href}\n\t\t\t\t\t\t\t// same as above re 'palette styles' for index increment\n\t\t\t\t\t\t\tophanComponentLink={`container-${\n\t\t\t\t\t\t\t\tindex + 1\n\t\t\t\t\t\t\t} | ${ophanName}`}\n\t\t\t\t\t\t\tophanComponentName={`${ophanName}`}\n\t\t\t\t\t\t\tcontainerPalette={collection.containerPalette}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DecideContainer\n\t\t\t\t\t\t\t\ttrails={trails}\n\t\t\t\t\t\t\t\tcontainerType={collection.collectionType}\n\t\t\t\t\t\t\t\tcontainerPalette={collection.containerPalette}\n\t\t\t\t\t\t\t\tshowAge={collection.displayName === 'Headlines'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ContainerLayout>\n\t\t\t\t\t);\n\t\t\t\t})}\n\n\t\t\t\t{!isPaidContent && (\n\t\t\t\t\t<ElementContainer data-print-layout=\"hide\" element=\"aside\">\n\t\t\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tsectionName=\"\" // {front.sectionName}\n\t\t\t\t\t\t\tajaxUrl={front.config.ajaxUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\t\t\t</main>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={front.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={front.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={front.editionId}\n\t\t\t\t\tcontributionsServiceUrl=\"https://contributions.guardianapis.com\" // TODO: Pass this in\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/FullPageInteractiveLayout.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":99,"column":13,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":99,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css, Global } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDisplay, ArticleSpecial } from '@guardian/libs';\nimport {\n\tborder,\n\tbrandBackground,\n\tbrandBorder,\n\tbrandLine,\n\tfrom,\n\tlabs,\n\tneutral,\n\tuntil,\n} from '@guardian/source-foundations';\nimport {\n\tadCollapseStyles,\n\tlabelStyles as adLabelStyles,\n\tMobileStickyContainer,\n} from '../components/AdSlot';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { Header } from '../components/Header';\nimport { HeaderAdSlot } from '../components/HeaderAdSlot';\nimport { Island } from '../components/Island';\nimport { LabsHeader } from '../components/LabsHeader.importable';\nimport { Nav } from '../components/Nav/Nav';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubNav } from '../components/SubNav.importable';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getZIndex } from '../lib/getZIndex';\nimport { getCurrentPillar } from '../lib/layoutHelpers';\nimport { renderElement } from '../lib/renderElement';\nimport { interactiveGlobalStyles } from './lib/interactiveLegacyStyling';\nimport { BannerWrapper, Stuck } from './lib/stickiness';\n\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n}\n\nconst Renderer: React.FC<{\n\tformat: ArticleFormat;\n\telements: CAPIElement[];\n\thost?: string;\n\tpageId: string;\n\twebTitle: string;\n\tajaxUrl: string;\n\tisAdFreeUser: boolean;\n\tisSensitive: boolean;\n\tswitches: { [key: string]: boolean };\n}> = ({\n\tformat,\n\telements,\n\thost,\n\tpageId,\n\twebTitle,\n\tajaxUrl,\n\tisAdFreeUser,\n\tisSensitive,\n\tswitches,\n}) => {\n\t// const cleanedElements = elements.map(element =>\n\t//     'html' in element ? { ...element, html: clean(element.html) } : element,\n\t// );\n\t// ^^ Until we decide where to do the \"isomorphism split\" in this this code is not safe here.\n\t//    But should be soon.\n\tconst output = elements.map((element, index) => {\n\t\tconst [ok, el] = renderElement({\n\t\t\tformat,\n\n\t\t\telement,\n\t\t\tadTargeting: undefined,\n\t\t\thost,\n\t\t\tindex,\n\t\t\tisMainMedia: false,\n\t\t\tpageId,\n\t\t\twebTitle,\n\t\t\tajaxUrl,\n\t\t\tisAdFreeUser,\n\t\t\tisSensitive,\n\t\t\tswitches,\n\t\t});\n\n\t\tif (ok) {\n\t\t\tswitch (element._type) {\n\t\t\t\t// Here we think it makes sense not to wrap every `p` inside a `figure`\n\t\t\t\tcase 'model.dotcomrendering.pageElements.InteractiveBlockElement':\n\t\t\t\tcase 'model.dotcomrendering.pageElements.TextBlockElement':\n\t\t\t\t\treturn el;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<figure\n\t\t\t\t\t\t\tid={\n\t\t\t\t\t\t\t\t'elementId' in element\n\t\t\t\t\t\t\t\t\t? element.elementId\n\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{el}\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t});\n\n\tconst adStyles = css`\n\t\t${adLabelStyles}\n\t\t${adCollapseStyles}\n\n\t\t${from.tablet} {\n\t\t\t.mobile-only .ad-slot {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t\t${until.tablet} {\n\t\t\t.hide-until-tablet .ad-slot {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t`;\n\n\treturn <div css={adStyles}>{output}</div>;\n};\n\nconst NavHeader = ({ CAPIArticle, NAV, format }: Props): JSX.Element => {\n\t// Typically immersives use the slim nav, but this switch is used to force\n\t// the full nav - typically during special events such as Project 200, or\n\t// the Euros. The motivation is to better onboard new visitors; interactives\n\t// often reach readers who are less familiar with the Guardian.\n\tconst isSlimNav = !CAPIArticle.config.switches.interactiveFullHeaderSwitch;\n\n\tif (isSlimNav) {\n\t\treturn (\n\t\t\t<div\n\t\t\t\tcss={css`\n\t\t\t\t\t${getZIndex('headerWrapper')}\n\t\t\t\t\torder: 0;\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\telement=\"nav\"\n\t\t\t\t>\n\t\t\t\t\t<Nav\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\tdisplay: format.display,\n\t\t\t\t\t\t\tdesign: format.design,\n\t\t\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header.subscribe\n\t\t\t\t\t\t}\n\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\t\t\t</div>\n\t\t);\n\t}\n\n\treturn (\n\t\t<section\n\t\t\t/* Note, some interactives require this - e.g. https://www.theguardian.com/environment/ng-interactive/2015/jun/05/carbon-bomb-the-coal-boom-choking-china. */\n\t\t\tcss={css`\n\t\t\t\t${getZIndex('headerWrapper')};\n\t\t\t\tposition: relative;\n\t\t\t`}\n\t\t>\n\t\t\t<Stuck>\n\t\t\t\t<div data-print-layout=\"hide\">\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tshouldCenter={false}\n\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<HeaderAdSlot\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</div>\n\t\t\t</Stuck>\n\n\t\t\t{format.theme !== ArticleSpecial.Labs && (\n\t\t\t\t<div data-print-layout=\"hide\">\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\telement=\"header\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl}\n\t\t\t\t\t\t\tmmaUrl={CAPIArticle.config.mmaUrl}\n\t\t\t\t\t\t\tsupporterCTA={\n\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t.supporter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\t\t\tremoteHeader={\n\t\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteHeader\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tshowSideBorders={true}\n\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\tshowTopBorder={false}\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\telement=\"nav\"\n\t\t\t>\n\t\t\t\t<Nav\n\t\t\t\t\tformat={{\n\t\t\t\t\t\tdisplay: ArticleDisplay.Standard,\n\t\t\t\t\t\tdesign: format.design,\n\t\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t\t\t}}\n\t\t\t\t\tnav={NAV}\n\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header.subscribe\n\t\t\t\t\t}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t{NAV.subNavSections && format.theme !== ArticleSpecial.Labs && (\n\t\t\t\t<ElementContainer\n\t\t\t\t\tbackgroundColour={neutral[100]}\n\t\t\t\t\tpadded={false}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\t\t</section>\n\t);\n};\n\nexport const FullPageInteractiveLayout = ({\n\tCAPIArticle,\n\tNAV,\n\tformat,\n}: Props): JSX.Element => {\n\tconst {\n\t\tconfig: { host },\n\t} = CAPIArticle;\n\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<>\n\t\t\t{CAPIArticle.isLegacyInteractive && (\n\t\t\t\t<Global styles={interactiveGlobalStyles} />\n\t\t\t)}\n\t\t\t<header\n\t\t\t\tcss={css`\n\t\t\t\t\tbackground-color: ${palette.background.article};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<NavHeader\n\t\t\t\t\tCAPIArticle={CAPIArticle}\n\t\t\t\t\tNAV={NAV}\n\t\t\t\t\tformat={format}\n\t\t\t\t/>\n\n\t\t\t\t{format.theme === ArticleSpecial.Labs && (\n\t\t\t\t\t<Stuck>\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\tbackgroundColour={labs[400]}\n\t\t\t\t\t\t\tborderColour={border.primary}\n\t\t\t\t\t\t\tsectionId=\"labs-header\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t<LabsHeader />\n\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t</Stuck>\n\t\t\t\t)}\n\t\t\t</header>\n\n\t\t\t<ElementContainer\n\t\t\t\tshowTopBorder={false}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\tshouldCenter={false}\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\telement=\"main\"\n\t\t\t>\n\t\t\t\t<article>\n\t\t\t\t\t<Renderer\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\telements={\n\t\t\t\t\t\t\tCAPIArticle.blocks[0]\n\t\t\t\t\t\t\t\t? CAPIArticle.blocks[0].elements\n\t\t\t\t\t\t\t\t: []\n\t\t\t\t\t\t}\n\t\t\t\t\t\thost={host}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t/>\n\t\t\t\t</article>\n\t\t\t</ElementContainer>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tbackgroundColour={neutral[100]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={CAPIArticle.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t<BannerWrapper>\n\t\t\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t\t\t<StickyBottomBanner\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t\t}\n\t\t\t\t\t\tidApiUrl={CAPIArticle.config.idApiUrl}\n\t\t\t\t\t\tisMinuteArticle={CAPIArticle.pageType.isMinuteArticle}\n\t\t\t\t\t\tisPaidContent={CAPIArticle.pageType.isPaidContent}\n\t\t\t\t\t\tisPreview={!!CAPIArticle.config.isPreview}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\tkeywordsId={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoteBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpuzzleBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.puzzlesBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</BannerWrapper>\n\t\t\t<MobileStickyContainer />\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/ImmersiveLayout.tsx","messages":[{"ruleId":"import/order","severity":1,"message":"There should be no empty line between import groups","line":12,"column":1,"nodeType":"ImportDeclaration","endLine":15,"endColumn":64,"fix":{"range":[365,366],"text":""}},{"ruleId":"sort-imports","severity":1,"message":"Member 'AdSlot' of the import declaration should be sorted alphabetically.","line":19,"column":33,"nodeType":"ImportSpecifier","messageId":"sortMembersAlphabetically","endLine":19,"endColumn":39,"fix":{"range":[488,517],"text":"AdSlot, MobileStickyContainer"}},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":181,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":181,"endColumn":15},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":181,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":181,"endColumn":59,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[5508,5561],"text":"mainMedia?.data?.caption"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":181,"column":19,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":181,"endColumn":33},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":184,"column":3,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":184,"endColumn":12},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":184,"column":3,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":185,"endColumn":26,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[5611,5649],"text":"mainMedia?.displayCredit"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":186,"column":3,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":186,"endColumn":17},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":213,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":213,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6359,6361],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":268,"column":11,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":268,"endColumn":20},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":298,"column":11,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":298,"endColumn":20},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":417,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":417,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12122,12124],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":419,"column":42,"nodeType":"Punctuator","messageId":"preferNullish","endLine":419,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[12220,12222],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":498,"column":12,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":498,"endColumn":21},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":549,"column":41,"nodeType":"Punctuator","messageId":"preferNullish","endLine":549,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[15522,15524],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":2,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport {\n\tbrandBackground,\n\tbrandBorder,\n\tfrom,\n\tneutral,\n\tspace,\n\tuntil,\n} from '@guardian/source-foundations';\nimport {\n\tLines,\n\tStraightLines,\n} from '@guardian/source-react-components-development-kitchen';\n\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { parse } from '../../lib/slot-machine-flags';\nimport { MobileStickyContainer, AdSlot } from '../components/AdSlot';\nimport { ArticleBody } from '../components/ArticleBody';\nimport { ArticleContainer } from '../components/ArticleContainer';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { Border } from '../components/Border';\nimport { Caption } from '../components/Caption';\nimport { DiscussionLayout } from '../components/DiscussionLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { GridItem } from '../components/GridItem';\nimport { GuardianLabsLines } from '../components/GuardianLabsLines';\nimport { HeadlineByline } from '../components/HeadlineByline';\nimport { Hide } from '../components/Hide';\nimport { Island } from '../components/Island';\nimport { MostViewedFooterLayout } from '../components/MostViewedFooterLayout';\nimport { OnwardsLower } from '../components/OnwardsLower.importable';\nimport { OnwardsUpper } from '../components/OnwardsUpper.importable';\nimport { RightColumn } from '../components/RightColumn';\nimport { SlotBodyEnd } from '../components/SlotBodyEnd.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { getContributionsServiceUrl } from '../lib/contributions';\nimport { decidePalette } from '../lib/decidePalette';\nimport { decideLineCount, decideLineEffect } from '../lib/layoutHelpers';\nimport { ImmersiveHeader } from './headers/ImmersiveHeader';\nimport { BannerWrapper } from './lib/stickiness';\n\nconst ImmersiveGrid = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.leftCol} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.leftCol} {\n\t\t\t\tmargin-left: 151px;\n\t\t\t}\n\t\t\t${from.wide} {\n\t\t\t\tmargin-left: 230px;\n\t\t\t}\n\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${from.wide} {\n\t\t\t\t\tgrid-column-gap: 10px;\n\t\t\t\t\tgrid-template-columns: 219px 1px 1fr 300px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'caption    border      title       right-column'\n\t\t\t\t\t\t'.          border      headline    right-column'\n\t\t\t\t\t\t'.          border      standfirst  right-column'\n\t\t\t\t\t\t'.          border      byline      right-column'\n\t\t\t\t\t\t'lines      border      body        right-column'\n\t\t\t\t\t\t'meta       border      body        right-column'\n\t\t\t\t\t\t'meta       border      body        right-column'\n\t\t\t\t\t\t'.          border      body        right-column'\n\t\t\t\t\t\t'.          border      .           right-column';\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.wide} {\n\t\t\t\t\tgrid-column-gap: 10px;\n\t\t\t\t\tgrid-template-columns: 140px 1px 1fr 300px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'.          border      title       right-column'\n\t\t\t\t\t\t'.          border      headline    right-column'\n\t\t\t\t\t\t'.          border      standfirst  right-column'\n\t\t\t\t\t\t'.          border      byline      right-column'\n\t\t\t\t\t\t'lines      border      body        right-column'\n\t\t\t\t\t\t'meta       border      body        right-column'\n\t\t\t\t\t\t'meta       border      body        right-column'\n\t\t\t\t\t\t'.          border      body        right-column'\n\t\t\t\t\t\t'.          border      .           right-column';\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\tgrid-template-columns: 1fr 300px;\n\t\t\t\t\tgrid-column-gap: 20px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title       right-column'\n\t\t\t\t\t\t'headline    right-column'\n\t\t\t\t\t\t'standfirst  right-column'\n\t\t\t\t\t\t'byline      right-column'\n\t\t\t\t\t\t'caption     right-column'\n\t\t\t\t\t\t'lines       right-column'\n\t\t\t\t\t\t'meta        right-column'\n\t\t\t\t\t\t'body        right-column';\n\t\t\t\t}\n\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'byline'\n\t\t\t\t\t\t'caption'\n\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst maxWidth = css`\n\t${from.desktop} {\n\t\tmax-width: 620px;\n\t}\n`;\n\nconst stretchLines = css`\n\t${until.phablet} {\n\t\tmargin-left: -20px;\n\t\tmargin-right: -20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n`;\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n}\n\nconst decideCaption = (mainMedia: ImageBlockElement): string => {\n\tconst caption = [];\n\tif (mainMedia && mainMedia.data && mainMedia.data.caption)\n\t\tcaption.push(mainMedia.data.caption);\n\tif (\n\t\tmainMedia &&\n\t\tmainMedia.displayCredit &&\n\t\tmainMedia.data &&\n\t\tmainMedia.data.credit\n\t)\n\t\tcaption.push(mainMedia.data.credit);\n\treturn caption.join(' ');\n};\n\nexport const ImmersiveLayout = ({\n\tCAPIArticle,\n\tNAV,\n\tformat,\n}: Props): JSX.Element => {\n\tconst {\n\t\tconfig: { isPaidContent, host },\n\t} = CAPIArticle;\n\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: CAPIArticle.isAdFreeUser,\n\t\tisSensitive: CAPIArticle.config.isSensitive,\n\t\tvideoDuration: CAPIArticle.config.videoDuration,\n\t\tedition: CAPIArticle.config.edition,\n\t\tsection: CAPIArticle.config.section,\n\t\tsharedAdTargeting: CAPIArticle.config.sharedAdTargeting,\n\t\tadUnit: CAPIArticle.config.adUnit,\n\t});\n\n\tconst showBodyEndSlot =\n\t\tparse(CAPIArticle.slotMachineFlags || '').showBodyEnd ||\n\t\tCAPIArticle.config.switches.slotBodyEnd;\n\n\t// TODO:\n\t// 1) Read 'forceEpic' value from URL parameter and use it to force the slot to render\n\t// 2) Otherwise, ensure slot only renders if `CAPIArticle.config.shouldHideReaderRevenue` equals false.\n\n\tconst seriesTag = CAPIArticle.tags.find(\n\t\t(tag) => tag.type === 'Series' || tag.type === 'Blog',\n\t);\n\tconst showOnwardsLower = seriesTag && CAPIArticle.hasStoryPackage;\n\n\tconst showComments = CAPIArticle.isCommentable;\n\n\tconst mainMedia = CAPIArticle.mainMediaElements[0] as ImageBlockElement;\n\tconst captionText = decideCaption(mainMedia);\n\tconst { branding } =\n\t\tCAPIArticle.commercialProperties[CAPIArticle.editionId];\n\n\tconst contributionsServiceUrl = getContributionsServiceUrl(CAPIArticle);\n\n\treturn (\n\t\t<>\n\t\t\t<ImmersiveHeader\n\t\t\t\tCAPIArticle={CAPIArticle}\n\t\t\t\tNAV={NAV}\n\t\t\t\tformat={format}\n\t\t\t/>\n\t\t\t<main>\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={decidePalette(format).background.article}\n\t\t\t\t\telement=\"article\"\n\t\t\t\t>\n\t\t\t\t\t<ImmersiveGrid>\n\t\t\t\t\t\t{/* Above leftCol, the Caption is controled by ContainerLayout ^^ */}\n\t\t\t\t\t\t<GridItem area=\"caption\">\n\t\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"leftCol\">\n\t\t\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\t\t\tcaptionText={captionText}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tshouldLimitWidth={false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"border\">\n\t\t\t\t\t\t\t{format.design === ArticleDesign.PhotoEssay ? (\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Border format={format} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"title\" element=\"aside\">\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{!mainMedia && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t\t\tmargin-top: -8px;\n\t\t\t\t\t\t\t\t\t\t\tmargin-left: -4px;\n\t\t\t\t\t\t\t\t\t\t\tmargin-bottom: 12px;\n\n\t\t\t\t\t\t\t\t\t\t\t${until.tablet} {\n\t\t\t\t\t\t\t\t\t\t\t\tmargin-left: -20px;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\tsectionLabel={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionLabel\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\t\t\t\tguardianBaseURL={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.guardianBaseURL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"headline\">\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{!mainMedia && (\n\t\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\theadlineString={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.headline\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\tbyline={CAPIArticle.author.byline}\n\t\t\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\thasStarRating={\n\t\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"standfirst\">\n\t\t\t\t\t\t\t<Standfirst\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tstandfirst={CAPIArticle.standfirst}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"byline\">\n\t\t\t\t\t\t\t<HeadlineByline\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tbyline={\n\t\t\t\t\t\t\t\t\tCAPIArticle.author.byline\n\t\t\t\t\t\t\t\t\t\t? CAPIArticle.author.byline\n\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"lines\">\n\t\t\t\t\t\t\t{format.design === ArticleDesign.PhotoEssay &&\n\t\t\t\t\t\t\tformat.theme !== ArticleSpecial.Labs ? (\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t<div css={stretchLines}>\n\t\t\t\t\t\t\t\t\t\t{format.theme ===\n\t\t\t\t\t\t\t\t\t\tArticleSpecial.Labs ? (\n\t\t\t\t\t\t\t\t\t\t\t<GuardianLabsLines />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<Lines\n\t\t\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t\t\teffect={decideLineEffect(\n\t\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Standard,\n\t\t\t\t\t\t\t\t\t\t\t\t\tformat.theme,\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\tcount={decideLineCount(\n\t\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Standard,\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"meta\" element=\"aside\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tauthor={CAPIArticle.author}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tprimaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsecondaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationSecondaryDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tisCommentable={CAPIArticle.isCommentable}\n\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tshowShareCount={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t.serverShareCounts\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"body\">\n\t\t\t\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t\t\t\t<ArticleBody\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tblocks={CAPIArticle.blocks}\n\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.config.isPaidContent\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName || ''}\n\t\t\t\t\t\t\t\t\tisPreview={CAPIArticle.config.isPreview}\n\t\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl || ''}\n\t\t\t\t\t\t\t\t\tisDev={!!CAPIArticle.config.isDev}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{showBodyEndSlot && (\n\t\t\t\t\t\t\t\t\t<Island clientOnly={true}>\n\t\t\t\t\t\t\t\t\t\t<SlotBodyEnd\n\t\t\t\t\t\t\t\t\t\t\tcontentType={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.contentType\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tidApiUrl={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.idApiUrl\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tisMinuteArticle={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t.isMinuteArticle\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t.isPaidContent\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tkeywordsId={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.keywordIds\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\t\tsectionId={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.section\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsectionName={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionName\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tstage={CAPIArticle.config.stage}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<StraightLines count={4} />\n\t\t\t\t\t\t\t\t<SubMeta\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tsubMetaKeywordLinks={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaKeywordLinks\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsubMetaSectionLinks={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaSectionLinks\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebUrl={CAPIArticle.webURL}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tshowBottomSocialButtons={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.showBottomSocialButtons\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ArticleContainer>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"right-column\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\tpadding-top: 6px;\n\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\t${from.desktop} {\n\t\t\t\t\t\t\t\t\t\t/* above 980 */\n\t\t\t\t\t\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\t\t\t\t\t\tmargin-right: -20px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\t\t\t\t/* above 1140 */\n\t\t\t\t\t\t\t\t\t\tmargin-left: 0px;\n\t\t\t\t\t\t\t\t\t\tmargin-right: 0px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RightColumn>\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t{mainMedia && (\n\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t\t\t\t\tmargin-top: ${space[4]}px;\n\t\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<AdSlot\n\t\t\t\t\t\t\t\t\t\t\t\t\tposition=\"right\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isPaidContent\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t</RightColumn>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</ImmersiveGrid>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot\n\t\t\t\t\t\tposition=\"merchandising-high\"\n\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<Island\n\t\t\t\t\tclientOnly={true}\n\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\tplaceholderHeight={600}\n\t\t\t\t>\n\t\t\t\t\t<OnwardsUpper\n\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\thasRelated={CAPIArticle.hasRelated}\n\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\tCAPIArticle.config.isPaidContent || false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowRelatedContent={\n\t\t\t\t\t\t\tCAPIArticle.config.showRelatedContent\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkeywordIds={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\n\t\t\t\t{showOnwardsLower && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tsectionId=\"onwards-lower\"\n\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"visible\">\n\t\t\t\t\t\t\t<OnwardsLower\n\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && showComments && (\n\t\t\t\t\t<ElementContainer sectionId=\"comments\" element=\"aside\">\n\t\t\t\t\t\t<DiscussionLayout\n\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tdiscussionD2Uid={CAPIArticle.config.discussionD2Uid}\n\t\t\t\t\t\t\tdiscussionApiClientHeader={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiClientHeader\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tenableDiscussionSwitch={\n\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t.enableDiscussionSwitch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && (\n\t\t\t\t\t<ElementContainer data-print-layout=\"hide\" element=\"aside\">\n\t\t\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot position=\"merchandising\" display={format.display} />\n\t\t\t\t</ElementContainer>\n\t\t\t</main>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer padded={false} element=\"aside\">\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={CAPIArticle.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t<BannerWrapper>\n\t\t\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t\t\t<StickyBottomBanner\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\t\tidApiUrl={CAPIArticle.config.idApiUrl}\n\t\t\t\t\t\tisMinuteArticle={CAPIArticle.pageType.isMinuteArticle}\n\t\t\t\t\t\tisPaidContent={CAPIArticle.pageType.isPaidContent}\n\t\t\t\t\t\tisPreview={!!CAPIArticle.config.isPreview}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\tkeywordsId={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoteBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpuzzleBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.puzzlesBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</BannerWrapper>\n\t\t\t<MobileStickyContainer />\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/InteractiveImmersiveLayout.tsx","messages":[{"ruleId":"react/no-array-index-key","severity":1,"message":"Do not use Array index in keys","line":206,"column":13,"nodeType":"Identifier","messageId":"noArrayIndex","endLine":206,"endColumn":18},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":238,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":238,"endColumn":15},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":238,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":238,"endColumn":59,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[6102,6155],"text":"mainMedia?.data?.caption"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":238,"column":19,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":238,"endColumn":33},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":241,"column":3,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":241,"endColumn":12},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":241,"column":3,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":242,"endColumn":26,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[6205,6243],"text":"mainMedia?.displayCredit"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":243,"column":3,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":243,"endColumn":17},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":274,"column":43,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":279,"endColumn":13},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":330,"column":11,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":330,"endColumn":20},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":360,"column":11,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":360,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css, Global } from '@emotion/react';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport {\n\tbrandBackground,\n\tbrandBorder,\n\tfrom,\n\tneutral,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { Lines } from '@guardian/source-react-components-development-kitchen';\nimport React from 'react';\nimport {\n\tadCollapseStyles,\n\tlabelStyles as adLabelStyles,\n\tAdSlot,\n\tMobileStickyContainer,\n} from '../components/AdSlot';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { Border } from '../components/Border';\nimport { Caption } from '../components/Caption';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { GridItem } from '../components/GridItem';\nimport { GuardianLabsLines } from '../components/GuardianLabsLines';\nimport { HeadlineByline } from '../components/HeadlineByline';\nimport { Hide } from '../components/Hide';\nimport { Island } from '../components/Island';\nimport { Standfirst } from '../components/Standfirst';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubNav } from '../components/SubNav.importable';\nimport { decideLineCount, decideLineEffect } from '../lib/layoutHelpers';\nimport { renderElement } from '../lib/renderElement';\nimport { ImmersiveHeader } from './headers/ImmersiveHeader';\nimport { interactiveGlobalStyles } from './lib/interactiveLegacyStyling';\nimport { BannerWrapper } from './lib/stickiness';\n\nconst InteractiveImmersiveGrid = ({\n\tchildren,\n}: {\n\tchildren: React.ReactNode;\n}) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.leftCol} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.leftCol} {\n\t\t\t\tmargin-left: 151px;\n\t\t\t}\n\t\t\t${from.wide} {\n\t\t\t\tmargin-left: 230px;\n\t\t\t}\n\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${from.wide} {\n\t\t\t\t\tgrid-column-gap: 10px;\n\t\t\t\t\tgrid-template-columns: 219px 1px 1fr 300px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'caption    border      title       right-column'\n\t\t\t\t\t\t'.          border      headline    right-column'\n\t\t\t\t\t\t'.          border      standfirst  right-column'\n\t\t\t\t\t\t'.          border      byline      right-column'\n\t\t\t\t\t\t'.          border      lines        right-column'\n\t\t\t\t\t\t'.          border      meta        right-column'\n\t\t\t\t\t\t'.\t        border      body        right-column'\n\t\t\t\t\t\t'.          border      .           right-column';\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.wide} {\n\t\t\t\t\tgrid-column-gap: 10px;\n\t\t\t\t\tgrid-template-columns: 140px 1px 1fr 300px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'.          border      title       right-column'\n\t\t\t\t\t\t'.          border      headline    right-column'\n\t\t\t\t\t\t'.          border      standfirst  right-column'\n\t\t\t\t\t\t'.          border      byline      right-column'\n\t\t\t\t\t\t'.          border      lines       right-column'\n\t\t\t\t\t\t'.          border      meta        right-column'\n\t\t\t\t\t\t'.\t        border      body        right-column'\n\t\t\t\t\t\t'.          border      .           right-column';\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\tgrid-template-columns: 1fr 300px;\n\t\t\t\t\tgrid-column-gap: 20px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title       right-column'\n\t\t\t\t\t\t'headline    right-column'\n\t\t\t\t\t\t'standfirst  right-column'\n\t\t\t\t\t\t'byline      right-column'\n\t\t\t\t\t\t'caption     right-column'\n\t\t\t\t\t\t'lines       right-column'\n\t\t\t\t\t\t'meta        right-column'\n\t\t\t\t\t\t'body        right-column';\n\t\t\t\t}\n\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'byline'\n\t\t\t\t\t\t'caption'\n\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst Renderer: React.FC<{\n\tformat: ArticleFormat;\n\telements: CAPIElement[];\n\thost?: string;\n\tpageId: string;\n\twebTitle: string;\n\tajaxUrl: string;\n\tisAdFreeUser: boolean;\n\tisSensitive: boolean;\n\tswitches: { [key: string]: boolean };\n}> = ({\n\tformat,\n\telements,\n\thost,\n\tpageId,\n\twebTitle,\n\tajaxUrl,\n\tisAdFreeUser,\n\tisSensitive,\n\tswitches,\n}) => {\n\t// const cleanedElements = elements.map(element =>\n\t//     'html' in element ? { ...element, html: clean(element.html) } : element,\n\t// );\n\t// ^^ Until we decide where to do the \"isomorphism split\" in this this code is not safe here.\n\t//    But should be soon.\n\tconst output = elements.map((element, index) => {\n\t\tconst [ok, el] = renderElement({\n\t\t\tformat,\n\t\t\telement,\n\t\t\tadTargeting: undefined,\n\t\t\thost,\n\t\t\tindex,\n\t\t\tisMainMedia: false,\n\t\t\tpageId,\n\t\t\twebTitle,\n\t\t\tajaxUrl,\n\t\t\tisAdFreeUser,\n\t\t\tisSensitive,\n\t\t\tswitches,\n\t\t});\n\n\t\tif (ok) {\n\t\t\tswitch (element._type) {\n\t\t\t\t// Here we think it makes sense not to wrap every `p` inside a `figure`\n\t\t\t\tcase 'model.dotcomrendering.pageElements.InteractiveBlockElement':\n\t\t\t\tcase 'model.dotcomrendering.pageElements.TextBlockElement':\n\t\t\t\t\treturn el;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<figure\n\t\t\t\t\t\t\tid={\n\t\t\t\t\t\t\t\t'elementId' in element\n\t\t\t\t\t\t\t\t\t? element.elementId\n\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{el}\n\t\t\t\t\t\t</figure>\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t});\n\n\tconst adStyles = css`\n\t\t${adLabelStyles}\n\t\t${adCollapseStyles}\n\n\t\t${from.tablet} {\n\t\t\t.mobile-only .ad-slot {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t\t${until.tablet} {\n\t\t\t.hide-until-tablet .ad-slot {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t`;\n\n\treturn <div css={adStyles}>{output}</div>;\n};\n\nconst decideCaption = (mainMedia: ImageBlockElement): string => {\n\tconst caption = [];\n\tif (mainMedia && mainMedia.data && mainMedia.data.caption)\n\t\tcaption.push(mainMedia.data.caption);\n\tif (\n\t\tmainMedia &&\n\t\tmainMedia.displayCredit &&\n\t\tmainMedia.data &&\n\t\tmainMedia.data.credit\n\t)\n\t\tcaption.push(mainMedia.data.credit);\n\treturn caption.join(' ');\n};\n\nconst maxWidth = css`\n\t${from.desktop} {\n\t\tmax-width: 620px;\n\t}\n`;\n\nconst stretchLines = css`\n\t${until.phablet} {\n\t\tmargin-left: -20px;\n\t\tmargin-right: -20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n`;\n\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n\tpalette: Palette;\n}\n\nexport const InteractiveImmersiveLayout = ({\n\tCAPIArticle,\n\tNAV,\n\tformat,\n\tpalette,\n}: Props) => {\n\tconst {\n\t\tconfig: { host },\n\t} = CAPIArticle;\n\n\tconst mainMedia = CAPIArticle.mainMediaElements[0] as ImageBlockElement;\n\tconst captionText = decideCaption(mainMedia);\n\tconst { branding } =\n\t\tCAPIArticle.commercialProperties[CAPIArticle.editionId];\n\n\treturn (\n\t\t<>\n\t\t\t{CAPIArticle.isLegacyInteractive && (\n\t\t\t\t<Global styles={interactiveGlobalStyles} />\n\t\t\t)}\n\t\t\t{CAPIArticle.config.switches.surveys && (\n\t\t\t\t<AdSlot position=\"survey\" display={format.display} />\n\t\t\t)}\n\n\t\t\t<ImmersiveHeader\n\t\t\t\tCAPIArticle={CAPIArticle}\n\t\t\t\tNAV={NAV}\n\t\t\t\tformat={format}\n\t\t\t/>\n\t\t\t<main>\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\telement=\"article\"\n\t\t\t\t>\n\t\t\t\t\t<InteractiveImmersiveGrid>\n\t\t\t\t\t\t{/* Above leftCol, the Caption is controled by ContainerLayout ^^ */}\n\t\t\t\t\t\t<GridItem area=\"caption\">\n\t\t\t\t\t\t\t<Hide when=\"above\" breakpoint=\"leftCol\">\n\t\t\t\t\t\t\t\t<Caption\n\t\t\t\t\t\t\t\t\tcaptionText={captionText}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tshouldLimitWidth={false}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"border\">\n\t\t\t\t\t\t\t{format.design === ArticleDesign.PhotoEssay ? (\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Border format={format} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"title\" element=\"aside\">\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{!mainMedia && (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t\t\tmargin-top: -8px;\n\t\t\t\t\t\t\t\t\t\t\tmargin-left: -4px;\n\t\t\t\t\t\t\t\t\t\t\tmargin-bottom: 12px;\n\n\t\t\t\t\t\t\t\t\t\t\t${until.tablet} {\n\t\t\t\t\t\t\t\t\t\t\t\tmargin-left: -20px;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\tsectionLabel={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionLabel\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\t\t\t\tguardianBaseURL={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.guardianBaseURL\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"headline\">\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{!mainMedia && (\n\t\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\theadlineString={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.headline\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\tbyline={CAPIArticle.author.byline}\n\t\t\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\thasStarRating={\n\t\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"standfirst\">\n\t\t\t\t\t\t\t<Standfirst\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tstandfirst={CAPIArticle.standfirst}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"byline\">\n\t\t\t\t\t\t\t<HeadlineByline\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tbyline={\n\t\t\t\t\t\t\t\t\tCAPIArticle.author.byline\n\t\t\t\t\t\t\t\t\t\t? CAPIArticle.author.byline\n\t\t\t\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"lines\">\n\t\t\t\t\t\t\t{format.design === ArticleDesign.PhotoEssay &&\n\t\t\t\t\t\t\tformat.theme !== ArticleSpecial.Labs ? (\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t<div css={stretchLines}>\n\t\t\t\t\t\t\t\t\t\t{format.theme ===\n\t\t\t\t\t\t\t\t\t\tArticleSpecial.Labs ? (\n\t\t\t\t\t\t\t\t\t\t\t<GuardianLabsLines />\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<Lines\n\t\t\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t\t\teffect={decideLineEffect(\n\t\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Standard,\n\t\t\t\t\t\t\t\t\t\t\t\t\tformat.theme,\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\tcount={decideLineCount(\n\t\t\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Standard,\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"meta\" element=\"aside\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tauthor={CAPIArticle.author}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tprimaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsecondaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationSecondaryDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tisCommentable={CAPIArticle.isCommentable}\n\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tshowShareCount={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t.serverShareCounts\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</InteractiveImmersiveGrid>\n\t\t\t\t</ElementContainer>\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tshouldCenter={false}\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\telement=\"main\"\n\t\t\t\t>\n\t\t\t\t\t<article>\n\t\t\t\t\t\t<Renderer\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\telements={\n\t\t\t\t\t\t\t\tCAPIArticle.blocks[0]\n\t\t\t\t\t\t\t\t\t? CAPIArticle.blocks[0].elements\n\t\t\t\t\t\t\t\t\t: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</article>\n\t\t\t\t</ElementContainer>\n\t\t\t</main>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tbackgroundColour={neutral[100]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={CAPIArticle.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t<BannerWrapper>\n\t\t\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t\t\t<StickyBottomBanner\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t\t}\n\t\t\t\t\t\tidApiUrl={CAPIArticle.config.idApiUrl}\n\t\t\t\t\t\tisMinuteArticle={CAPIArticle.pageType.isMinuteArticle}\n\t\t\t\t\t\tisPaidContent={CAPIArticle.pageType.isPaidContent}\n\t\t\t\t\t\tisPreview={!!CAPIArticle.config.isPreview}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\tkeywordsId={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoteBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpuzzleBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.puzzlesBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</BannerWrapper>\n\t\t\t<MobileStickyContainer />\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/InteractiveLayout.tsx","messages":[{"ruleId":"import/order","severity":1,"message":"There should be no empty line between import groups","line":19,"column":1,"nodeType":"ImportDeclaration","endLine":19,"endColumn":27,"fix":{"range":[426,427],"text":""}},{"ruleId":"sort-imports","severity":1,"message":"Member 'AdSlot' of the import declaration should be sorted alphabetically.","line":22,"column":33,"nodeType":"ImportSpecifier","messageId":"sortMembersAlphabetically","endLine":22,"endColumn":39,"fix":{"range":[495,524],"text":"AdSlot, MobileStickyContainer"}},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":223,"column":34,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":223,"endColumn":74},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":545,"column":36,"nodeType":"Punctuator","messageId":"preferNullish","endLine":545,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14168,14170],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":548,"column":43,"nodeType":"Punctuator","messageId":"preferNullish","endLine":548,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[14279,14281],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":611,"column":41,"nodeType":"Punctuator","messageId":"preferNullish","endLine":611,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[15952,15954],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":2,"source":"import { css, Global } from '@emotion/react';\nimport { ArticleSpecial } from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport {\n\tborder,\n\tbrandAltBackground,\n\tbrandBackground,\n\tbrandBorder,\n\tbrandLine,\n\tfrom,\n\tlabs,\n\tneutral,\n\tuntil,\n} from '@guardian/source-foundations';\nimport {\n\tLines,\n\tStraightLines,\n} from '@guardian/source-react-components-development-kitchen';\nimport React from 'react';\n\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { MobileStickyContainer, AdSlot } from '../components/AdSlot';\nimport { ArticleBody } from '../components/ArticleBody';\nimport { ArticleContainer } from '../components/ArticleContainer';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { Border } from '../components/Border';\nimport { DiscussionLayout } from '../components/DiscussionLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { GridItem } from '../components/GridItem';\nimport { Header } from '../components/Header';\nimport { HeaderAdSlot } from '../components/HeaderAdSlot';\nimport { Island } from '../components/Island';\nimport { LabsHeader } from '../components/LabsHeader.importable';\nimport { MainMedia } from '../components/MainMedia';\nimport { MostViewedFooterLayout } from '../components/MostViewedFooterLayout';\nimport { Nav } from '../components/Nav/Nav';\nimport { OnwardsLower } from '../components/OnwardsLower.importable';\nimport { OnwardsUpper } from '../components/OnwardsUpper.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StarRating } from '../components/StarRating/StarRating';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { decidePalette } from '../lib/decidePalette';\nimport {\n\tdecideLineCount,\n\tdecideLineEffect,\n\tgetCurrentPillar,\n} from '../lib/layoutHelpers';\nimport {\n\tinteractiveGlobalStyles,\n\tinteractiveLegacyClasses,\n} from './lib/interactiveLegacyStyling';\nimport { BannerWrapper, Stuck } from './lib/stickiness';\n\nconst InteractiveGrid = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.leftCol} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.leftCol} {\n\t\t\t\tmargin-left: 151px;\n\t\t\t}\n\t\t\t${from.wide} {\n\t\t\t\tmargin-left: 230px;\n\t\t\t}\n\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\n\t\t\t\tgrid-column-gap: 10px;\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t*/\n\t\t\t\t${from.wide} {\n\t\t\t\t\tgrid-template-columns: 219px 1px 1fr;\n\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title  border  headline'\n\t\t\t\t\t\t'.      border  standfirst'\n\t\t\t\t\t\t'.      border  media'\n\t\t\t\t\t\t'.      border  media'\n\t\t\t\t\t\t'.      border  lines'\n\t\t\t\t\t\t'.      border  meta'\n\t\t\t\t\t\t'body   body    body'\n\t\t\t\t\t\t'.      .       .';\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t*/\n\t\t\t\t${until.wide} {\n\t\t\t\t\tgrid-template-columns: 140px 1px 1fr;\n\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title  border  headline'\n\t\t\t\t\t\t'.      border  standfirst'\n\t\t\t\t\t\t'.      border  media'\n\t\t\t\t\t\t'.      border  media'\n\t\t\t\t\t\t'.      border  lines'\n\t\t\t\t\t\t'.      border  meta'\n\t\t\t\t\t\t'body   body    body'\n\t\t\t\t\t\t'.      .       .';\n\t\t\t\t}\n\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\tgrid-template-columns: minmax(0, 1fr); /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'media'\n\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'body'\n\t\t\t\t\t\t'.';\n\t\t\t\t}\n\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-template-columns: minmax(0, 1fr); /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'media'\n\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\n\t\t\t\t${until.tablet} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\t\t\t\t\tgrid-template-columns: minmax(0, 1fr); /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'media'\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst maxWidth = css`\n\t${from.desktop} {\n\t\tmax-width: 620px;\n\t}\n`;\n\nconst stretchLines = css`\n\t${until.phablet} {\n\t\tmargin-left: -20px;\n\t\tmargin-right: -20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n`;\n\nconst stretchMetaLines = css`\n\tmargin: 0 -10px;\n\t${from.mobileLandscape} {\n\t\tmargin: 0 -20px;\n\t}\n\t${from.tablet} {\n\t\tmargin-right: -40px;\n\t}\n\t${from.leftCol} {\n\t\tmargin-right: -20px;\n\t}\n`;\n\nconst starWrapper = css`\n\tmargin-bottom: 18px;\n\tmargin-top: 6px;\n\tbackground-color: ${brandAltBackground.primary};\n\tdisplay: inline-block;\n\n\t${until.phablet} {\n\t\tpadding-left: 20px;\n\t\tmargin-left: -20px;\n\t}\n\t${until.leftCol} {\n\t\tpadding-left: 0px;\n\t\tmargin-left: -0px;\n\t}\n\n\tpadding-left: 10px;\n\tmargin-left: -10px;\n`;\n\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n}\n\nexport const InteractiveLayout = ({ CAPIArticle, NAV, format }: Props) => {\n\tconst {\n\t\tconfig: { isPaidContent, host },\n\t} = CAPIArticle;\n\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: CAPIArticle.isAdFreeUser,\n\t\tisSensitive: CAPIArticle.config.isSensitive,\n\t\tvideoDuration: CAPIArticle.config.videoDuration,\n\t\tedition: CAPIArticle.config.edition,\n\t\tsection: CAPIArticle.config.section,\n\t\tsharedAdTargeting: CAPIArticle.config.sharedAdTargeting,\n\t\tadUnit: CAPIArticle.config.adUnit,\n\t});\n\n\tconst seriesTag = CAPIArticle.tags.find(\n\t\t(tag) => tag.type === 'Series' || tag.type === 'Blog',\n\t);\n\n\tconst showOnwardsLower = seriesTag && CAPIArticle.hasStoryPackage;\n\n\tconst showComments = CAPIArticle.isCommentable;\n\n\tconst { branding } =\n\t\tCAPIArticle.commercialProperties[CAPIArticle.editionId];\n\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<>\n\t\t\t{CAPIArticle.isLegacyInteractive && (\n\t\t\t\t<Global styles={interactiveGlobalStyles} />\n\t\t\t)}\n\n\t\t\t<div>\n\t\t\t\t<Stuck>\n\t\t\t\t\t<div data-print-layout=\"hide\">\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\tshouldCenter={false}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HeaderAdSlot\n\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t</div>\n\t\t\t\t</Stuck>\n\n\t\t\t\t{format.theme !== ArticleSpecial.Labs && (\n\t\t\t\t\t<div data-print-layout=\"hide\">\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\t\telement=\"header\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl}\n\t\t\t\t\t\t\t\tmmaUrl={CAPIArticle.config.mmaUrl}\n\t\t\t\t\t\t\t\tsupporterCTA={\n\t\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t\t.supporter\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\t\t\t\tremoteHeader={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteHeader\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\telement=\"nav\"\n\t\t\t\t>\n\t\t\t\t\t<Nav\n\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t...format,\n\t\t\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header.subscribe\n\t\t\t\t\t\t}\n\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t{NAV.subNavSections && format.theme !== ArticleSpecial.Labs && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{format.theme !== ArticleSpecial.Labs && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t{format.theme === ArticleSpecial.Labs && (\n\t\t\t\t<Stuck>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tbackgroundColour={labs[400]}\n\t\t\t\t\t\tborderColour={border.primary}\n\t\t\t\t\t\tsectionId=\"labs-header\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t<LabsHeader />\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</Stuck>\n\t\t\t)}\n\n\t\t\t{CAPIArticle.config.switches.surveys && (\n\t\t\t\t<AdSlot position=\"survey\" display={format.display} />\n\t\t\t)}\n\t\t\t<main>\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\tborderColour={palette.border.article}\n\t\t\t\t\telement=\"article\"\n\t\t\t\t\tclassName={interactiveLegacyClasses.contentInteractive}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={interactiveLegacyClasses.contentInteractive}\n\t\t\t\t\t>\n\t\t\t\t\t\t<InteractiveGrid>\n\t\t\t\t\t\t\t<GridItem area=\"title\" element=\"aside\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={`${interactiveLegacyClasses.contentLabels} ${interactiveLegacyClasses.contentLabelsNotImmersive}`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\tsectionLabel={CAPIArticle.sectionLabel}\n\t\t\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\t\t\tguardianBaseURL={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.guardianBaseURL\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"border\">\n\t\t\t\t\t\t\t\t{format.theme === ArticleSpecial.Labs ? (\n\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Border format={format} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"headline\">\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\theadlineString={CAPIArticle.headline}\n\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\tbyline={CAPIArticle.author.byline}\n\t\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\thasStarRating={\n\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0 ? (\n\t\t\t\t\t\t\t\t\t<div css={starWrapper}>\n\t\t\t\t\t\t\t\t\t\t<StarRating\n\t\t\t\t\t\t\t\t\t\t\trating={CAPIArticle.starRating}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"standfirst\">\n\t\t\t\t\t\t\t\t<Standfirst\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tstandfirst={CAPIArticle.standfirst}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"media\">\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t<MainMedia\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\telements={CAPIArticle.mainMediaElements}\n\t\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\t\tisSensitive={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.isSensitive\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"lines\">\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t<div css={stretchLines}>\n\t\t\t\t\t\t\t\t\t\t<Lines\n\t\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t\tcount={decideLineCount(\n\t\t\t\t\t\t\t\t\t\t\t\tformat.design,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\teffect={decideLineEffect(\n\t\t\t\t\t\t\t\t\t\t\t\tformat.design,\n\t\t\t\t\t\t\t\t\t\t\t\tformat.theme,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"meta\" element=\"aside\">\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\tauthor={CAPIArticle.author}\n\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\tprimaryDateline={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDisplay\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsecondaryDateline={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationSecondaryDateDisplay\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisCommentable={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.isCommentable\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tshortUrlId={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.shortUrlId\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\t\tshowShareCount={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t\t.serverShareCounts\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"body\" element=\"article\">\n\t\t\t\t\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t\t\t\t\t<ArticleBody\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tblocks={CAPIArticle.blocks}\n\t\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\t\tisSensitive={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.isSensitive\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.config.isPaidContent\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\t\t\t\t\tsectionName={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionName || ''\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPreview={CAPIArticle.config.isPreview}\n\t\t\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl || ''}\n\t\t\t\t\t\t\t\t\t\tisDev={!!CAPIArticle.config.isDev}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t{/* <StraightLines data-print-layout=\"hide\" count={4} /> */}\n\t\t\t\t\t\t\t\t\t<div css={stretchMetaLines}>\n\t\t\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<SubMeta\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tsubMetaKeywordLinks={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaKeywordLinks\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsubMetaSectionLinks={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaSectionLinks\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\twebUrl={CAPIArticle.webURL}\n\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\tshowBottomSocialButtons={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.showBottomSocialButtons\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</ArticleContainer>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t</InteractiveGrid>\n\t\t\t\t\t</div>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot\n\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\tposition=\"merchandising-high\"\n\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<Island\n\t\t\t\t\tclientOnly={true}\n\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\tplaceholderHeight={600}\n\t\t\t\t>\n\t\t\t\t\t<OnwardsUpper\n\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\thasRelated={CAPIArticle.hasRelated}\n\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\tCAPIArticle.config.isPaidContent || false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowRelatedContent={\n\t\t\t\t\t\t\tCAPIArticle.config.showRelatedContent\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkeywordIds={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\n\t\t\t\t{showOnwardsLower && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tsectionId=\"onwards-lower\"\n\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"visible\">\n\t\t\t\t\t\t\t<OnwardsLower\n\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && showComments && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tsectionId=\"comments\"\n\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<DiscussionLayout\n\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tdiscussionD2Uid={CAPIArticle.config.discussionD2Uid}\n\t\t\t\t\t\t\tdiscussionApiClientHeader={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiClientHeader\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tenableDiscussionSwitch={\n\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t.enableDiscussionSwitch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && (\n\t\t\t\t\t<ElementContainer data-print-layout=\"hide\" element=\"aside\">\n\t\t\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot position=\"merchandising\" display={format.display} />\n\t\t\t\t</ElementContainer>\n\t\t\t</main>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={CAPIArticle.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t<BannerWrapper data-print-layout=\"hide\">\n\t\t\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t\t\t<StickyBottomBanner\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t\t}\n\t\t\t\t\t\tidApiUrl={CAPIArticle.config.idApiUrl}\n\t\t\t\t\t\tisMinuteArticle={CAPIArticle.pageType.isMinuteArticle}\n\t\t\t\t\t\tisPaidContent={CAPIArticle.pageType.isPaidContent}\n\t\t\t\t\t\tisPreview={!!CAPIArticle.config.isPreview}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\tkeywordsId={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoteBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpuzzleBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.puzzlesBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</BannerWrapper>\n\t\t\t<MobileStickyContainer data-print-layout=\"hide\" />\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/Layout.stories.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":72,"column":4,"nodeType":"MemberExpression","messageId":"unexpected","endLine":72,"endColumn":17},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":72,"column":57,"nodeType":"Identifier","messageId":"invalidType","endLine":72,"endColumn":58},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":101,"column":8,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":101,"endColumn":28},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":134,"column":8,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":134,"endColumn":28}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport { storiesOf } from '@storybook/react';\nimport { useEffect } from 'react';\nimport { Analysis } from '../../../fixtures/generated/articles/Analysis';\nimport { Article } from '../../../fixtures/generated/articles/Article';\nimport { Comment } from '../../../fixtures/generated/articles/Comment';\nimport { Editorial } from '../../../fixtures/generated/articles/Editorial';\nimport { Feature } from '../../../fixtures/generated/articles/Feature';\nimport { Interview } from '../../../fixtures/generated/articles/Interview';\nimport { Labs } from '../../../fixtures/generated/articles/Labs';\nimport { Letter } from '../../../fixtures/generated/articles/Letter';\nimport { Live } from '../../../fixtures/generated/articles/Live';\nimport { MatchReport } from '../../../fixtures/generated/articles/MatchReport';\nimport { NumberedList } from '../../../fixtures/generated/articles/NumberedList';\nimport { PhotoEssay } from '../../../fixtures/generated/articles/PhotoEssay';\nimport { PrintShop } from '../../../fixtures/generated/articles/PrintShop';\nimport { Quiz } from '../../../fixtures/generated/articles/Quiz';\nimport { Recipe } from '../../../fixtures/generated/articles/Recipe';\nimport { Review } from '../../../fixtures/generated/articles/Review';\nimport { SpecialReport } from '../../../fixtures/generated/articles/SpecialReport';\nimport { extractNAV } from '../../model/extract-nav';\nimport { embedIframe } from '../browser/embedIframe/embedIframe';\nimport { doStorybookHydration } from '../browser/islands/doStorybookHydration';\nimport { decideFormat } from '../lib/decideFormat';\nimport { injectPrivacySettingsLink } from '../lib/injectPrivacySettingsLink';\nimport { mockRESTCalls } from '../lib/mockRESTCalls';\nimport { DecideLayout } from './DecideLayout';\n\nconst Fixtures: { [key: string]: CAPIArticleType } = {\n\tArticle,\n\tPhotoEssay,\n\tReview,\n\tPrintShop,\n\tAnalysis,\n\tFeature,\n\tLiveBlog: Live,\n\tDeadBlog: Live,\n\tEditorial,\n\tLetter,\n\tInterview,\n\tQuiz,\n\tRecipe,\n\tComment,\n\tMatchReport,\n\tLabs,\n\tSpecialReport,\n\tNumberedList,\n};\n\nmockRESTCalls();\n\n// HydratedLayout is used here to simulated the hydration that happens after we init react on\n// the client. We need a separate component so that we can make use of useEffect to ensure\n// the hydrate step only runs once the dom has been rendered.\nconst HydratedLayout = ({\n\tServerCAPI,\n\tmodifyPage,\n}: {\n\tServerCAPI: CAPIArticleType;\n\tmodifyPage?: () => void;\n}) => {\n\tconst NAV = extractNAV(ServerCAPI.nav);\n\tconst format: ArticleFormat = decideFormat(ServerCAPI.format);\n\n\tuseEffect(() => {\n\t\tembedIframe().catch((e) =>\n\t\t\tconsole.error(`HydratedLayout embedIframe - error: ${e}`),\n\t\t);\n\t\t// Manually updates the footer DOM because it's not hydrated\n\t\tinjectPrivacySettingsLink();\n\t\tdoStorybookHydration();\n\t}, [ServerCAPI]);\n\tif (modifyPage) {\n\t\tmodifyPage();\n\t}\n\treturn <DecideLayout CAPIArticle={ServerCAPI} NAV={NAV} format={format} />;\n};\n\nfor (const [displayName] of Object.entries(ArticleDisplay)) {\n\tif (Number.isNaN(Number(displayName))) {\n\t\tfor (const [designName] of Object.entries(ArticleDesign)) {\n\t\t\tif (Number.isNaN(Number(designName))) {\n\t\t\t\tfor (const [pillarName] of Object.entries(ArticlePillar)) {\n\t\t\t\t\tif (Number.isNaN(Number(pillarName))) {\n\t\t\t\t\t\tconst stories = storiesOf(\n\t\t\t\t\t\t\t`Layouts/Format variations/${displayName}/${designName}`,\n\t\t\t\t\t\t\tmodule,\n\t\t\t\t\t\t).addParameters({\n\t\t\t\t\t\t\tchromatic: {\n\t\t\t\t\t\t\t\tdiffThreshold: 0.2,\n\t\t\t\t\t\t\t\tpauseAnimationAtEnd: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst fixture =\n\t\t\t\t\t\t\tFixtures[designName] || Fixtures.Article;\n\n\t\t\t\t\t\tstories.add(pillarName, () => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<HydratedLayout\n\t\t\t\t\t\t\t\t\tServerCAPI={{\n\t\t\t\t\t\t\t\t\t\t...fixture,\n\t\t\t\t\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t\t\t\t\tdisplay:\n\t\t\t\t\t\t\t\t\t\t\t\t`${displayName}Display` as CAPIDisplay,\n\t\t\t\t\t\t\t\t\t\t\tdesign: `${designName}Design` as CAPIDesign,\n\t\t\t\t\t\t\t\t\t\t\ttheme: `${pillarName}Pillar` as CAPITheme,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (const [specialName] of Object.entries(ArticleSpecial)) {\n\t\t\t\t\tif (Number.isNaN(Number(specialName))) {\n\t\t\t\t\t\tconst stories = storiesOf(\n\t\t\t\t\t\t\t`Layouts/Format variations/${displayName}/${designName}`,\n\t\t\t\t\t\t\tmodule,\n\t\t\t\t\t\t).addParameters({\n\t\t\t\t\t\t\tchromatic: {\n\t\t\t\t\t\t\t\tdiffThreshold: 0.2,\n\t\t\t\t\t\t\t\tpauseAnimationAtEnd: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst fixture =\n\t\t\t\t\t\t\tFixtures[designName] || Fixtures.Article;\n\n\t\t\t\t\t\tstories.add(specialName, () => {\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<HydratedLayout\n\t\t\t\t\t\t\t\t\tServerCAPI={{\n\t\t\t\t\t\t\t\t\t\t...fixture,\n\t\t\t\t\t\t\t\t\t\tformat: {\n\t\t\t\t\t\t\t\t\t\t\tdisplay:\n\t\t\t\t\t\t\t\t\t\t\t\t`${displayName}Display` as CAPIDisplay,\n\t\t\t\t\t\t\t\t\t\t\tdesign: `${designName}Design` as CAPIDesign,\n\t\t\t\t\t\t\t\t\t\t\ttheme:\n\t\t\t\t\t\t\t\t\t\t\t\tspecialName === 'Labs'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? specialName\n\t\t\t\t\t\t\t\t\t\t\t\t\t: (`${specialName}Theme` as CAPITheme),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nstoriesOf(`Layouts/Liveblog`, module)\n\t.addParameters({\n\t\tchromatic: {\n\t\t\tdiffThreshold: 0.2,\n\t\t\tpauseAnimationAtEnd: true,\n\t\t},\n\t})\n\t.add('With no key events', () => {\n\t\treturn (\n\t\t\t<HydratedLayout\n\t\t\t\tServerCAPI={{\n\t\t\t\t\t...Fixtures.LiveBlog,\n\t\t\t\t\tkeyEvents: [],\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/LiveLayout.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":258,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":258,"endColumn":67},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":274,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":274,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[7521,7523],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":643,"column":41,"nodeType":"Punctuator","messageId":"preferNullish","endLine":643,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[17410,17412],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":872,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":872,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[23653,23655],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":879,"column":39,"nodeType":"Punctuator","messageId":"preferNullish","endLine":879,"endColumn":41,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[23824,23826],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1042,"column":42,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1042,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[28133,28135],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[{"ruleId":"import/no-extraneous-dependencies","severity":2,"message":"'@guardian/common-rendering' should be listed in the project's dependencies. Run 'npm i -S @guardian/common-rendering' to add it","line":3,"column":1,"nodeType":"ImportDeclaration","endLine":3,"endColumn":77,"suppressions":[{"kind":"directive","justification":"it’s a yarn workspace"}]},{"ruleId":"import/no-extraneous-dependencies","severity":2,"message":"'@guardian/common-rendering' should be listed in the project's dependencies. Run 'npm i -S @guardian/common-rendering' to add it","line":5,"column":1,"nodeType":"ImportDeclaration","endLine":5,"endColumn":83,"suppressions":[{"kind":"directive","justification":"it’s a yarn workspace"}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\n// eslint-disable-next-line import/no-extraneous-dependencies -- it’s a yarn workspace\nimport Accordion from '@guardian/common-rendering/src/components/accordion';\n// eslint-disable-next-line import/no-extraneous-dependencies -- it’s a yarn workspace\nimport { Pagination } from '@guardian/common-rendering/src/components/Pagination';\nimport { ArticleDesign } from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport {\n\tbrandAltBackground,\n\tbrandBackground,\n\tbrandBorder,\n\tbrandLine,\n\tfrom,\n\tneutral,\n\tspace,\n\tuntil,\n} from '@guardian/source-foundations';\nimport { Hide } from '@guardian/source-react-components';\nimport {\n\tLines,\n\tStraightLines,\n} from '@guardian/source-react-components-development-kitchen';\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { parse } from '../../lib/slot-machine-flags';\nimport { AdSlot, MobileStickyContainer } from '../components/AdSlot';\nimport { ArticleBody } from '../components/ArticleBody';\nimport { ArticleContainer } from '../components/ArticleContainer';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleLastUpdated } from '../components/ArticleLastUpdated';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { ContainerLayout } from '../components/ContainerLayout';\nimport { DiscussionLayout } from '../components/DiscussionLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { FilterKeyEventsToggle } from '../components/FilterKeyEventsToggle.importable';\nimport { Footer } from '../components/Footer';\nimport { GetCricketScoreboard } from '../components/GetCricketScoreboard.importable';\nimport { GetMatchNav } from '../components/GetMatchNav.importable';\nimport { GetMatchStats } from '../components/GetMatchStats.importable';\nimport { GetMatchTabs } from '../components/GetMatchTabs.importable';\nimport { GridItem } from '../components/GridItem';\nimport { Header } from '../components/Header';\nimport { HeaderAdSlot } from '../components/HeaderAdSlot';\nimport { Island } from '../components/Island';\nimport { KeyEventsContainer } from '../components/KeyEventsContainer';\nimport { Liveness } from '../components/Liveness.importable';\nimport { MainMedia } from '../components/MainMedia';\nimport { MostViewedFooterLayout } from '../components/MostViewedFooterLayout';\nimport { Nav } from '../components/Nav/Nav';\nimport { OnwardsLower } from '../components/OnwardsLower.importable';\nimport { OnwardsUpper } from '../components/OnwardsUpper.importable';\nimport { RightColumn } from '../components/RightColumn';\nimport { SlotBodyEnd } from '../components/SlotBodyEnd.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StarRating } from '../components/StarRating/StarRating';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { getContributionsServiceUrl } from '../lib/contributions';\nimport { decidePalette } from '../lib/decidePalette';\nimport { getZIndex } from '../lib/getZIndex';\nimport {\n\tdecideLineCount,\n\tdecideLineEffect,\n\tgetCurrentPillar,\n} from '../lib/layoutHelpers';\nimport { BannerWrapper, SendToBack, Stuck } from './lib/stickiness';\n\nconst HeadlineGrid = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.desktop} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.desktop} {\n\t\t\t\tmargin-left: 240px;\n\t\t\t}\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\t\t\t\tgrid-column-gap: 20px;\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tgrid-template-columns: 220px 1fr;\n\t\t\t\t\tgrid-template-areas: 'title\theadline';\n\t\t\t\t}\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline';\n\t\t\t\t}\n\t\t\t\t${until.tablet} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst StandFirstGrid = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.desktop} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.desktop} {\n\t\t\t\tmargin-left: 240px;\n\t\t\t}\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\t\t\t\tgrid-column-gap: 20px;\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t'meta';\n\t\t\t\t\tgrid-column-gap: 0px;\n\t\t\t\t}\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tgrid-template-columns: 220px 1fr;\n\t\t\t\t\tgrid-template-areas: 'lastupdated standfirst';\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst LiveGrid = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.desktop} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.desktop} {\n\t\t\t\tmargin-left: 320px;\n\t\t\t}\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\t\t\t\tgrid-column-gap: 0px;\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t/* from desktop define fixed body width */\n\t\t\t\t${from.desktop} {\n\t\t\t\t\tgrid-column-gap: 20px;\n\t\t\t\t\tgrid-template-columns: 240px 700px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'info\t\tmedia'\n\t\t\t\t\t\t'info\t\tbody';\n\t\t\t\t}\n\t\t\t\t/* from wide define fixed body width */\n\t\t\t\t${from.wide} {\n\t\t\t\t\tgrid-column-gap: 20px;\n\t\t\t\t\tgrid-template-columns: 240px 700px 1fr;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'info  \t\t media     right-column'\n\t\t\t\t\t\t'info\t\t body      right-column';\n\t\t\t\t}\n\t\t\t\t/* until desktop define fixed body width */\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'media'\n\t\t\t\t\t\t'info'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst maxWidth = css`\n\t${from.desktop} {\n\t\tmax-width: 700px;\n\t}\n`;\n\nconst sticky = css`\n\t${from.desktop} {\n\t\tposition: sticky;\n\t\ttop: 10px;\n\t}\n`;\n\nconst keyEventsMargins = css`\n\tmargin-bottom: ${space[3]}px;\n\t${from.desktop} {\n\t\tmargin-top: ${space[1]}px;\n\t\tmargin-bottom: 0;\n\t}\n`;\n\nconst sidePaddingDesktop = css`\n\t${from.desktop} {\n\t\tpadding-left: ${space[5]}px;\n\t}\n`;\n\nconst bodyWrapper = css`\n\tmargin-bottom: ${space[3]}px;\n\t${from.desktop} {\n\t\tmargin-bottom: 0;\n\t}\n`;\n\nconst starWrapper = css`\n\tmargin-bottom: 18px;\n\tmargin-top: 6px;\n\tbackground-color: ${brandAltBackground.primary};\n\tdisplay: inline-block;\n\t${until.phablet} {\n\t\tpadding-left: 20px;\n\t\tmargin-left: -20px;\n\t}\n\t${until.leftCol} {\n\t\tpadding-left: 0px;\n\t\tmargin-left: -0px;\n\t}\n\tpadding-left: 10px;\n\tmargin-left: -10px;\n`;\n\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n}\n\nexport const LiveLayout = ({ CAPIArticle, NAV, format }: Props) => {\n\tconst {\n\t\tconfig: { isPaidContent, host },\n\t} = CAPIArticle;\n\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: CAPIArticle.isAdFreeUser,\n\t\tisSensitive: CAPIArticle.config.isSensitive,\n\t\tvideoDuration: CAPIArticle.config.videoDuration,\n\t\tedition: CAPIArticle.config.edition,\n\t\tsection: CAPIArticle.config.section,\n\t\tsharedAdTargeting: CAPIArticle.config.sharedAdTargeting,\n\t\tadUnit: CAPIArticle.config.adUnit,\n\t});\n\n\tconst showBodyEndSlot =\n\t\tparse(CAPIArticle.slotMachineFlags || '').showBodyEnd ||\n\t\tCAPIArticle.config.switches.slotBodyEnd;\n\n\t// TODO:\n\t// 1) Read 'forceEpic' value from URL parameter and use it to force the slot to render\n\t// 2) Otherwise, ensure slot only renders if `CAPIArticle.config.shouldHideReaderRevenue` equals false.\n\n\tconst seriesTag = CAPIArticle.tags.find(\n\t\t(tag) => tag.type === 'Series' || tag.type === 'Blog',\n\t);\n\n\tconst showOnwardsLower = seriesTag && CAPIArticle.hasStoryPackage;\n\n\t// Set a default pagination if it is missing from CAPI\n\tconst pagination: Pagination = CAPIArticle.pagination ?? {\n\t\tcurrentPage: 1,\n\t\ttotalPages: 1,\n\t};\n\n\tconst contributionsServiceUrl = getContributionsServiceUrl(CAPIArticle);\n\n\tconst { branding } =\n\t\tCAPIArticle.commercialProperties[CAPIArticle.editionId];\n\n\tconst palette = decidePalette(format);\n\n\tconst footballMatchUrl =\n\t\tCAPIArticle.matchType === 'FootballMatchType' && CAPIArticle.matchUrl;\n\n\tconst cricketMatchUrl =\n\t\tCAPIArticle.matchType === 'CricketMatchType' && CAPIArticle.matchUrl;\n\n\treturn (\n\t\t<>\n\t\t\t<div data-print-layout=\"hide\">\n\t\t\t\t<Stuck>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tshouldCenter={false}\n\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<HeaderAdSlot\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</Stuck>\n\t\t\t\t<SendToBack>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\telement=\"header\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl}\n\t\t\t\t\t\t\tmmaUrl={CAPIArticle.config.mmaUrl}\n\t\t\t\t\t\t\tsupporterCTA={\n\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t.supporter\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\t\t\tremoteHeader={\n\t\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteHeader\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\telement=\"nav\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Nav\n\t\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t\t...format,\n\t\t\t\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t.subscribe\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\n\t\t\t\t\t{NAV.subNavSections && (\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\tborderColour={palette.border.article}\n\t\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tborderColour={palette.border.article}\n\t\t\t\t\t>\n\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</SendToBack>\n\t\t\t</div>\n\n\t\t\t<main>\n\t\t\t\t{footballMatchUrl ? (\n\t\t\t\t\t<ContainerLayout\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tbackgroundColour={palette.background.matchNav}\n\t\t\t\t\t\tborderColour={palette.border.headline}\n\t\t\t\t\t\tleftContent={\n\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tsectionLabel={CAPIArticle.sectionLabel}\n\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\tguardianBaseURL={CAPIArticle.guardianBaseURL}\n\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\tisMatch={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t\tleftColSize=\"wide\"\n\t\t\t\t\t\tsideBorders={true}\n\t\t\t\t\t\tpadContent={false}\n\t\t\t\t\t\tverticalMargins={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Hide above=\"leftCol\">\n\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tsectionLabel={CAPIArticle.sectionLabel}\n\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\tguardianBaseURL={CAPIArticle.guardianBaseURL}\n\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\tisMatch={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Hide>\n\n\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\tplaceholderHeight={230}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<GetMatchNav\n\t\t\t\t\t\t\t\tmatchUrl={footballMatchUrl}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\theadlineString={CAPIArticle.headline}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ContainerLayout>\n\t\t\t\t) : (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tbackgroundColour={palette.background.header}\n\t\t\t\t\t\tborderColour={palette.border.headline}\n\t\t\t\t\t>\n\t\t\t\t\t\t<HeadlineGrid>\n\t\t\t\t\t\t\t<GridItem area=\"title\">\n\t\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tsectionLabel={CAPIArticle.sectionLabel}\n\t\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\t\tguardianBaseURL={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.guardianBaseURL\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"headline\">\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t{!footballMatchUrl && (\n\t\t\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\theadlineString={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.headline\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\tbyline={CAPIArticle.author.byline}\n\t\t\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\thasStarRating={\n\t\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0 ? (\n\t\t\t\t\t\t\t\t\t<div css={starWrapper}>\n\t\t\t\t\t\t\t\t\t\t<StarRating\n\t\t\t\t\t\t\t\t\t\t\trating={CAPIArticle.starRating}\n\t\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t</HeadlineGrid>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tbackgroundColour={palette.background.standfirst}\n\t\t\t\t\tborderColour={palette.border.standfirst}\n\t\t\t\t>\n\t\t\t\t\t<StandFirstGrid>\n\t\t\t\t\t\t<GridItem area=\"standfirst\">\n\t\t\t\t\t\t\t<Standfirst\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tstandfirst={CAPIArticle.standfirst}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"lastupdated\">\n\t\t\t\t\t\t\t<Hide until=\"desktop\">\n\t\t\t\t\t\t\t\t{CAPIArticle.blocks.length &&\n\t\t\t\t\t\t\t\t\tCAPIArticle.blocks[0].blockLastUpdated && (\n\t\t\t\t\t\t\t\t\t\t<ArticleLastUpdated\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\tlastUpdated={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.blocks[0]\n\t\t\t\t\t\t\t\t\t\t\t\t\t.blockLastUpdated\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"lines\">\n\t\t\t\t\t\t\t<Hide from=\"desktop\">\n\t\t\t\t\t\t\t\t<div css={sidePaddingDesktop}>\n\t\t\t\t\t\t\t\t\t<Lines\n\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\tcount={decideLineCount(format.design)}\n\t\t\t\t\t\t\t\t\t\teffect={decideLineEffect(\n\t\t\t\t\t\t\t\t\t\t\tformat.design,\n\t\t\t\t\t\t\t\t\t\t\tformat.theme,\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\t\t\t\t\tformat.design ===\n\t\t\t\t\t\t\t\t\t\t\tArticleDesign.LiveBlog\n\t\t\t\t\t\t\t\t\t\t\t\t? 'rgba(255, 255, 255, 0.4)'\n\t\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"meta\">\n\t\t\t\t\t\t\t<Hide from=\"desktop\">\n\t\t\t\t\t\t\t\t<div css={sidePaddingDesktop}>\n\t\t\t\t\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\tauthor={CAPIArticle.author}\n\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\tprimaryDateline={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDisplay\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tsecondaryDateline={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationSecondaryDateDisplay\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisCommentable={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.isCommentable\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tshortUrlId={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.shortUrlId\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\t\tshowShareCount={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t\t.serverShareCounts\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</StandFirstGrid>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tborderColour={palette.border.article}\n\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t>\n\t\t\t\t\t<Hide until=\"desktop\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\theight: ${space[4]}px;\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Hide>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t{/* This div is used to contain the Toast */}\n\t\t\t\t<div>\n\t\t\t\t\t{format.design === ArticleDesign.LiveBlog && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t{/* The Toast component is inserted into this div using a Portal */}\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tid=\"toast-root\"\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\tposition: sticky;\n\t\t\t\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\t\t\t\t${getZIndex('toast')};\n\t\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t<Liveness\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tfilterKeyEvents={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.filterKeyEvents\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tenhanceTweetsSwitch={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t.enhanceTweets\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonFirstPage={pagination.currentPage === 1}\n\t\t\t\t\t\t\t\t\twebURL={CAPIArticle.webURL}\n\t\t\t\t\t\t\t\t\t// We default to string here because the property is optional but we\n\t\t\t\t\t\t\t\t\t// know it will exist for all blogs\n\t\t\t\t\t\t\t\t\tmostRecentBlockId={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.mostRecentBlockId || ''\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thasPinnedPost={!!CAPIArticle.pinnedPost}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\tborderColour={palette.border.article}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t>\n\t\t\t\t\t\t<LiveGrid>\n\t\t\t\t\t\t\t<GridItem area=\"media\">\n\t\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t\t{footballMatchUrl && (\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\t\tplaceholderHeight={40}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<GetMatchTabs\n\t\t\t\t\t\t\t\t\t\t\t\tmatchUrl={footballMatchUrl}\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t{cricketMatchUrl && (\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\t\tplaceholderHeight={172}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<GetCricketScoreboard\n\t\t\t\t\t\t\t\t\t\t\t\tmatchUrl={cricketMatchUrl}\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<MainMedia\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\telements={CAPIArticle.mainMediaElements}\n\t\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\t\tisSensitive={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.isSensitive\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"info\" element=\"aside\">\n\t\t\t\t\t\t\t\t{/* Lines */}\n\t\t\t\t\t\t\t\t<Hide until=\"desktop\">\n\t\t\t\t\t\t\t\t\t<div css={[maxWidth, sidePaddingDesktop]}>\n\t\t\t\t\t\t\t\t\t\t<Lines\n\t\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t\tcount={decideLineCount(\n\t\t\t\t\t\t\t\t\t\t\t\tformat.design,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\teffect={decideLineEffect(\n\t\t\t\t\t\t\t\t\t\t\t\tformat.design,\n\t\t\t\t\t\t\t\t\t\t\t\tformat.theme,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t\t\t{/* Meta */}\n\t\t\t\t\t\t\t\t<Hide until=\"desktop\">\n\t\t\t\t\t\t\t\t\t<div css={[maxWidth, sidePaddingDesktop]}>\n\t\t\t\t\t\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\t\tauthor={CAPIArticle.author}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\tprimaryDateline={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDisplay\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsecondaryDateline={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationSecondaryDateDisplay\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tisCommentable={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.isCommentable\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t.discussionApiUrl\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tshortUrlId={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.shortUrlId\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\t\t\tshowShareCount={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t\t\t.serverShareCounts\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t\t\t{/* Key events */}\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcss={[\n\t\t\t\t\t\t\t\t\t\t!footballMatchUrl && sticky,\n\t\t\t\t\t\t\t\t\t\tkeyEventsMargins,\n\t\t\t\t\t\t\t\t\t\tsidePaddingDesktop,\n\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<KeyEventsContainer\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tkeyEvents={CAPIArticle.keyEvents}\n\t\t\t\t\t\t\t\t\t\tfilterKeyEvents={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.filterKeyEvents\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{/* Match stats */}\n\t\t\t\t\t\t\t\t{footballMatchUrl && (\n\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\tplaceholderHeight={800}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<GetMatchStats\n\t\t\t\t\t\t\t\t\t\t\tmatchUrl={footballMatchUrl}\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"body\">\n\t\t\t\t\t\t\t\t<div id=\"maincontent\" css={bodyWrapper}>\n\t\t\t\t\t\t\t\t\t{CAPIArticle.keyEvents.length ? (\n\t\t\t\t\t\t\t\t\t\t<Hide below=\"desktop\">\n\t\t\t\t\t\t\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t\t\t\t\t\t\t<FilterKeyEventsToggle\n\t\t\t\t\t\t\t\t\t\t\t\t\tfilterKeyEvents={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.filterKeyEvents\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"filter-toggle-desktop\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t<Accordion\n\t\t\t\t\t\t\t\t\t\tsupportsDarkMode={false}\n\t\t\t\t\t\t\t\t\t\taccordionTitle=\"Live feed\"\n\t\t\t\t\t\t\t\t\t\tcontext=\"liveFeed\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{CAPIArticle.keyEvents.length ? (\n\t\t\t\t\t\t\t\t\t\t\t<Hide above=\"desktop\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FilterKeyEventsToggle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilterKeyEvents={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.filterKeyEvents\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"filter-toggle-mobile\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t\t\t</Hide>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t\t\t\t\t\t\t{pagination.currentPage !== 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentPage={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpagination.currentPage\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalPages={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpagination.totalPages\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewest={pagination.newest}\n\t\t\t\t\t\t\t\t\t\t\t\t\toldest={pagination.oldest}\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewer={pagination.newer}\n\t\t\t\t\t\t\t\t\t\t\t\t\tolder={pagination.older}\n\t\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<ArticleBody\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t\tblocks={CAPIArticle.blocks}\n\t\t\t\t\t\t\t\t\t\t\t\tpinnedPost={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pinnedPost\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\t\t\tajaxUrl={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.ajaxUrl\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsection={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.section\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tswitches={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tisSensitive={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isSensitive\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tisAdFreeUser={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.isAdFreeUser\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isPaidContent\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcontentType={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.contentType\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsectionName={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionName ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tisPreview={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.isPreview\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tidUrl={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.idUrl ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tisDev={\n\t\t\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.config.isDev\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tonFirstPage={\n\t\t\t\t\t\t\t\t\t\t\t\t\tpagination.currentPage === 1\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t{pagination.totalPages > 1 && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Pagination\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentPage={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpagination.currentPage\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\ttotalPages={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpagination.totalPages\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewest={pagination.newest}\n\t\t\t\t\t\t\t\t\t\t\t\t\toldest={pagination.oldest}\n\t\t\t\t\t\t\t\t\t\t\t\t\tnewer={pagination.newer}\n\t\t\t\t\t\t\t\t\t\t\t\t\tolder={pagination.older}\n\t\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t{showBodyEndSlot && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Island clientOnly={true}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<SlotBodyEnd\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontentType={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.contentType\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tidApiUrl={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.idApiUrl\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisMinuteArticle={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isMinuteArticle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.isPaidContent\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkeywordsId={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.keywordIds\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpageId={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageId\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionId={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.section\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsectionName={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionName\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstage={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.stage\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<SubMeta\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t\tsubMetaKeywordLinks={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaKeywordLinks\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tsubMetaSectionLinks={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaSectionLinks\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\t\t\twebUrl={CAPIArticle.webURL}\n\t\t\t\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\t\t\t\tshowBottomSocialButtons={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.showBottomSocialButtons\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</ArticleContainer>\n\t\t\t\t\t\t\t\t\t</Accordion>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t\t<GridItem area=\"right-column\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\t\t${from.desktop} {\n\t\t\t\t\t\t\t\t\t\t\t/* above 980 */\n\t\t\t\t\t\t\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\t\t\t\t\t\t\tmargin-right: -20px;\n\t\t\t\t\t\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\t\t\t\t\t/* above 1140 */\n\t\t\t\t\t\t\t\t\t\t\tmargin-left: 0px;\n\t\t\t\t\t\t\t\t\t\t\tmargin-right: 0px;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t${from.wide} {\n\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<RightColumn>\n\t\t\t\t\t\t\t\t\t\t<AdSlot\n\t\t\t\t\t\t\t\t\t\t\tposition=\"right\"\n\t\t\t\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t.isPaidContent\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</RightColumn>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t</LiveGrid>\n\t\t\t\t\t</ElementContainer>\n\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<AdSlot\n\t\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\t\tposition=\"merchandising-high\"\n\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\n\t\t\t\t\t<Island\n\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\tplaceholderHeight={600}\n\t\t\t\t\t>\n\t\t\t\t\t\t<OnwardsUpper\n\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\thasRelated={CAPIArticle.hasRelated}\n\t\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\tCAPIArticle.config.isPaidContent || false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshowRelatedContent={\n\t\t\t\t\t\t\t\tCAPIArticle.config.showRelatedContent\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tkeywordIds={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\n\t\t\t\t\t{showOnwardsLower && (\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tsectionId=\"onwards-lower\"\n\t\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"visible\">\n\t\t\t\t\t\t\t\t<OnwardsLower\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\thasStoryPackage={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.hasStoryPackage\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{!isPaidContent && CAPIArticle.isCommentable && (\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tsectionId=\"comments\"\n\t\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<DiscussionLayout\n\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tdiscussionD2Uid={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionD2Uid\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdiscussionApiClientHeader={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiClientHeader\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tenableDiscussionSwitch={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t.enableDiscussionSwitch\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{!isPaidContent && (\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<AdSlot\n\t\t\t\t\t\t\tposition=\"merchandising\"\n\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</div>\n\t\t\t</main>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={CAPIArticle.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t<BannerWrapper data-print-layout=\"hide\">\n\t\t\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t\t\t<StickyBottomBanner\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\t\tidApiUrl={CAPIArticle.config.idApiUrl}\n\t\t\t\t\t\tisMinuteArticle={CAPIArticle.pageType.isMinuteArticle}\n\t\t\t\t\t\tisPaidContent={CAPIArticle.pageType.isPaidContent}\n\t\t\t\t\t\tisPreview={!!CAPIArticle.config.isPreview}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\tkeywordsId={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoteBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpuzzleBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.puzzlesBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</BannerWrapper>\n\t\t\t<MobileStickyContainer data-print-layout=\"hide\" />\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/ShowcaseLayout.tsx","messages":[{"ruleId":"import/order","severity":1,"message":"There should be no empty line between import groups","line":14,"column":1,"nodeType":"ImportDeclaration","endLine":17,"endColumn":64,"fix":{"range":[385,386],"text":""}},{"ruleId":"sort-imports","severity":1,"message":"Member 'AdSlot' of the import declaration should be sorted alphabetically.","line":21,"column":33,"nodeType":"ImportSpecifier","messageId":"sortMembersAlphabetically","endLine":21,"endColumn":39,"fix":{"range":[508,537],"text":"AdSlot, MobileStickyContainer"}},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":233,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":233,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[6118,6120],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":551,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":551,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[15009,15011],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":553,"column":42,"nodeType":"Punctuator","messageId":"preferNullish","endLine":553,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[15107,15109],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":691,"column":41,"nodeType":"Punctuator","messageId":"preferNullish","endLine":691,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[18568,18570],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":2,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport {\n\tborder,\n\tbrandBackground,\n\tbrandBorder,\n\tbrandLine,\n\tfrom,\n\tlabs,\n\tneutral,\n\tuntil,\n} from '@guardian/source-foundations';\nimport {\n\tLines,\n\tStraightLines,\n} from '@guardian/source-react-components-development-kitchen';\n\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { parse } from '../../lib/slot-machine-flags';\nimport { MobileStickyContainer, AdSlot } from '../components/AdSlot';\nimport { ArticleBody } from '../components/ArticleBody';\nimport { ArticleContainer } from '../components/ArticleContainer';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { Border } from '../components/Border';\nimport { DiscussionLayout } from '../components/DiscussionLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { GridItem } from '../components/GridItem';\nimport { Header } from '../components/Header';\nimport { HeaderAdSlot } from '../components/HeaderAdSlot';\nimport { Island } from '../components/Island';\nimport { LabsHeader } from '../components/LabsHeader.importable';\nimport { MainMedia } from '../components/MainMedia';\nimport { MostViewedFooterLayout } from '../components/MostViewedFooterLayout';\nimport { MostViewedRightWrapper } from '../components/MostViewedRightWrapper.importable';\nimport { Nav } from '../components/Nav/Nav';\nimport { OnwardsLower } from '../components/OnwardsLower.importable';\nimport { OnwardsUpper } from '../components/OnwardsUpper.importable';\nimport { RightColumn } from '../components/RightColumn';\nimport { SlotBodyEnd } from '../components/SlotBodyEnd.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { getContributionsServiceUrl } from '../lib/contributions';\nimport { decidePalette } from '../lib/decidePalette';\nimport {\n\tdecideLineCount,\n\tdecideLineEffect,\n\tgetCurrentPillar,\n} from '../lib/layoutHelpers';\nimport { BannerWrapper, SendToBack, Stuck } from './lib/stickiness';\n\nconst ShowcaseGrid = ({ children }: { children: React.ReactNode }) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.leftCol} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.leftCol} {\n\t\t\t\tmargin-left: 151px;\n\t\t\t}\n\t\t\t${from.wide} {\n\t\t\t\tmargin-left: 230px;\n\t\t\t}\n\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\n\t\t\t\tgrid-column-gap: 10px;\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${from.wide} {\n\t\t\t\t\tgrid-template-columns: 219px 1px 1fr 300px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title  border  headline    headline'\n\t\t\t\t\t\t'lines  border  media       media'\n\t\t\t\t\t\t'meta   border  media       media'\n\t\t\t\t\t\t'meta   border  standfirst  right-column'\n\t\t\t\t\t\t'.      border  body        right-column'\n\t\t\t\t\t\t'.      border  .           right-column';\n\t\t\t\t}\n\n\t\t\t\t${until.wide} {\n\t\t\t\t\tgrid-template-columns: 140px 1px 1fr 300px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title  border  headline    headline'\n\t\t\t\t\t\t'lines  border  media       media'\n\t\t\t\t\t\t'meta   border  media       media'\n\t\t\t\t\t\t'meta   border  standfirst  right-column'\n\t\t\t\t\t\t'.      border  body        right-column'\n\t\t\t\t\t\t'.      border  .           right-column';\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\tgrid-template-columns: 1fr 300px;\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title      right-column'\n\t\t\t\t\t\t'headline   right-column'\n\t\t\t\t\t\t'standfirst right-column'\n\t\t\t\t\t\t'media      right-column'\n\t\t\t\t\t\t'lines      right-column'\n\t\t\t\t\t\t'meta       right-column'\n\t\t\t\t\t\t'body       right-column'\n\t\t\t\t\t\t'.          right-column';\n\t\t\t\t}\n\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'media'\n\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\n\t\t\t\t${until.tablet} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t'media'\n\t\t\t\t\t\t'title'\n\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t'body';\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst maxWidth = css`\n\t${from.desktop} {\n\t\tmax-width: 620px;\n\t}\n`;\n\nconst stretchLines = css`\n\t${until.phablet} {\n\t\tmargin-left: -20px;\n\t\tmargin-right: -20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n`;\n\nconst mainMediaWrapper = css`\n\tposition: relative;\n`;\n\nconst PositionHeadline = ({\n\tdesign,\n\tchildren,\n}: {\n\tdesign: ArticleDesign;\n\tchildren: React.ReactNode;\n}) => {\n\tswitch (design) {\n\t\tcase ArticleDesign.Interview:\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tcss={css`\n\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\tmargin-bottom: -100px;\n\t\t\t\t\t\t}\n\t\t\t\t\t`}\n\t\t\t\t>\n\t\t\t\t\t<div css={maxWidth}>{children}</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn <div css={maxWidth}>{children}</div>;\n\t}\n};\n\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n}\n\nexport const ShowcaseLayout = ({\n\tCAPIArticle,\n\tNAV,\n\tformat,\n}: Props): JSX.Element => {\n\tconst {\n\t\tconfig: { isPaidContent, host },\n\t} = CAPIArticle;\n\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: CAPIArticle.isAdFreeUser,\n\t\tisSensitive: CAPIArticle.config.isSensitive,\n\t\tvideoDuration: CAPIArticle.config.videoDuration,\n\t\tedition: CAPIArticle.config.edition,\n\t\tsection: CAPIArticle.config.section,\n\t\tsharedAdTargeting: CAPIArticle.config.sharedAdTargeting,\n\t\tadUnit: CAPIArticle.config.adUnit,\n\t});\n\n\tconst showBodyEndSlot =\n\t\tparse(CAPIArticle.slotMachineFlags || '').showBodyEnd ||\n\t\tCAPIArticle.config.switches.slotBodyEnd;\n\n\t// TODO:\n\t// 1) Read 'forceEpic' value from URL parameter and use it to force the slot to render\n\t// 2) Otherwise, ensure slot only renders if `CAPIArticle.config.shouldHideReaderRevenue` equals false.\n\n\tconst seriesTag = CAPIArticle.tags.find(\n\t\t(tag) => tag.type === 'Series' || tag.type === 'Blog',\n\t);\n\tconst showOnwardsLower = seriesTag && CAPIArticle.hasStoryPackage;\n\n\tconst showComments = CAPIArticle.isCommentable;\n\n\tconst { branding } =\n\t\tCAPIArticle.commercialProperties[CAPIArticle.editionId];\n\n\tconst palette = decidePalette(format);\n\n\tconst contributionsServiceUrl = getContributionsServiceUrl(CAPIArticle);\n\n\treturn (\n\t\t<>\n\t\t\t{format.theme !== ArticleSpecial.Labs ? (\n\t\t\t\t<>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Stuck>\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\tshouldCenter={false}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<HeaderAdSlot\n\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t</Stuck>\n\t\t\t\t\t\t<SendToBack>\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\t\t\telement=\"header\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl}\n\t\t\t\t\t\t\t\t\tmmaUrl={CAPIArticle.config.mmaUrl}\n\t\t\t\t\t\t\t\t\tsupporterCTA={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks\n\t\t\t\t\t\t\t\t\t\t\t.header.supporter\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\turls={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks\n\t\t\t\t\t\t\t\t\t\t\t.header\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tremoteHeader={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteHeader\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\t\t\telement=\"nav\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Nav\n\t\t\t\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t\t\t\t...format,\n\t\t\t\t\t\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks\n\t\t\t\t\t\t\t\t\t\t\t.header.subscribe\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ElementContainer>\n\n\t\t\t\t\t\t\t{NAV.subNavSections && (\n\t\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\t\tbackgroundColour={\n\t\t\t\t\t\t\t\t\t\tpalette.background.article\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t</SendToBack>\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t// Else, this is a labs article so just show Nav and the Labs header\n\t\t\t\t<>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Stuck zIndex=\"stickyAdWrapper\">\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<HeaderAdSlot\n\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t</Stuck>\n\t\t\t\t\t\t<Stuck zIndex=\"stickyAdWrapperNav\">\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\t\t\telement=\"nav\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Nav\n\t\t\t\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t\t\t\t...format,\n\t\t\t\t\t\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks\n\t\t\t\t\t\t\t\t\t\t\t.header.subscribe\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t</Stuck>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Stuck zIndex=\"stickyAdWrapperLabsHeader\">\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\tbackgroundColour={labs[400]}\n\t\t\t\t\t\t\tborderColour={border.primary}\n\t\t\t\t\t\t\tsectionId=\"labs-header\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t<LabsHeader />\n\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t</Stuck>\n\t\t\t\t</>\n\t\t\t)}\n\n\t\t\t<main>\n\t\t\t\t<ElementContainer\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\telement=\"article\"\n\t\t\t\t>\n\t\t\t\t\t<ShowcaseGrid>\n\t\t\t\t\t\t<GridItem area=\"title\" element=\"aside\">\n\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tsectionLabel={CAPIArticle.sectionLabel}\n\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\tguardianBaseURL={CAPIArticle.guardianBaseURL}\n\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"border\">\n\t\t\t\t\t\t\t<Border format={format} />\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"headline\">\n\t\t\t\t\t\t\t<PositionHeadline design={format.design}>\n\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\theadlineString={CAPIArticle.headline}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tbyline={CAPIArticle.author.byline}\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thasStarRating={\n\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</PositionHeadline>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"media\">\n\t\t\t\t\t\t\t<div css={mainMediaWrapper}>\n\t\t\t\t\t\t\t\t<MainMedia\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\telements={CAPIArticle.mainMediaElements}\n\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\tstarRating={\n\t\t\t\t\t\t\t\t\t\tformat.design ===\n\t\t\t\t\t\t\t\t\t\t\tArticleDesign.Review &&\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating\n\t\t\t\t\t\t\t\t\t\t\t? CAPIArticle.starRating\n\t\t\t\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"standfirst\">\n\t\t\t\t\t\t\t<Standfirst\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tstandfirst={CAPIArticle.standfirst}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"lines\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<div css={stretchLines}>\n\t\t\t\t\t\t\t\t\t<Lines\n\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\tcount={decideLineCount(format.design)}\n\t\t\t\t\t\t\t\t\t\teffect={decideLineEffect(\n\t\t\t\t\t\t\t\t\t\t\tformat.design,\n\t\t\t\t\t\t\t\t\t\t\tformat.theme,\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"meta\" element=\"aside\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tauthor={CAPIArticle.author}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tprimaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsecondaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationSecondaryDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tisCommentable={CAPIArticle.isCommentable}\n\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tshowShareCount={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t.serverShareCounts\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"body\">\n\t\t\t\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t\t\t\t<ArticleBody\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tblocks={CAPIArticle.blocks}\n\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.config.isPaidContent\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName || ''}\n\t\t\t\t\t\t\t\t\tisPreview={CAPIArticle.config.isPreview}\n\t\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl || ''}\n\t\t\t\t\t\t\t\t\tisDev={!!CAPIArticle.config.isDev}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{showBodyEndSlot && (\n\t\t\t\t\t\t\t\t\t<Island clientOnly={true}>\n\t\t\t\t\t\t\t\t\t\t<SlotBodyEnd\n\t\t\t\t\t\t\t\t\t\t\tcontentType={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.contentType\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tidApiUrl={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.idApiUrl\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tisMinuteArticle={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t.isMinuteArticle\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t.isPaidContent\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tkeywordsId={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.keywordIds\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\t\tsectionId={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.section\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsectionName={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionName\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tstage={CAPIArticle.config.stage}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<SubMeta\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tsubMetaKeywordLinks={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaKeywordLinks\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsubMetaSectionLinks={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaSectionLinks\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebUrl={CAPIArticle.webURL}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tshowBottomSocialButtons={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.showBottomSocialButtons\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ArticleContainer>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"right-column\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\tpadding-top: 6px;\n\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\t${from.desktop} {\n\t\t\t\t\t\t\t\t\t\t/* above 980 */\n\t\t\t\t\t\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\t\t\t\t\t\tmargin-right: -20px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\t\t\t\t/* above 1140 */\n\t\t\t\t\t\t\t\t\t\tmargin-left: 0px;\n\t\t\t\t\t\t\t\t\t\tmargin-right: 0px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RightColumn>\n\t\t\t\t\t\t\t\t\t<AdSlot\n\t\t\t\t\t\t\t\t\t\tposition=\"right\"\n\t\t\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType.isPaidContent\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{!isPaidContent ? (\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<MostViewedRightWrapper\n\t\t\t\t\t\t\t\t\t\t\t\tisAdFreeUser={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.isAdFreeUser\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</RightColumn>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</ShowcaseGrid>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot\n\t\t\t\t\t\tposition=\"merchandising-high\"\n\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<Island\n\t\t\t\t\tclientOnly={true}\n\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\tplaceholderHeight={600}\n\t\t\t\t>\n\t\t\t\t\t<OnwardsUpper\n\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\thasRelated={CAPIArticle.hasRelated}\n\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\tCAPIArticle.config.isPaidContent || false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowRelatedContent={\n\t\t\t\t\t\t\tCAPIArticle.config.showRelatedContent\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkeywordIds={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\n\t\t\t\t{showOnwardsLower && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tsectionId=\"onwards-lower\"\n\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"visible\">\n\t\t\t\t\t\t\t<OnwardsLower\n\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && showComments && (\n\t\t\t\t\t<ElementContainer sectionId=\"comments\" element=\"section\">\n\t\t\t\t\t\t<DiscussionLayout\n\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tdiscussionD2Uid={CAPIArticle.config.discussionD2Uid}\n\t\t\t\t\t\t\tdiscussionApiClientHeader={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiClientHeader\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tenableDiscussionSwitch={\n\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t.enableDiscussionSwitch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && (\n\t\t\t\t\t<ElementContainer data-print-layout=\"hide\" element=\"aside\">\n\t\t\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot position=\"merchandising\" display={format.display} />\n\t\t\t\t</ElementContainer>\n\t\t\t</main>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer padded={false} element=\"aside\">\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={CAPIArticle.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t<BannerWrapper>\n\t\t\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t\t\t<StickyBottomBanner\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\t\tidApiUrl={CAPIArticle.config.idApiUrl}\n\t\t\t\t\t\tisMinuteArticle={CAPIArticle.pageType.isMinuteArticle}\n\t\t\t\t\t\tisPaidContent={CAPIArticle.pageType.isPaidContent}\n\t\t\t\t\t\tisPreview={!!CAPIArticle.config.isPreview}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\tkeywordsId={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoteBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpuzzleBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.puzzlesBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</BannerWrapper>\n\t\t\t<MobileStickyContainer />\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/StandardLayout.tsx","messages":[{"ruleId":"import/order","severity":1,"message":"`../components/LabsHeader.importable` import should occur after import of `../components/Island`","line":19,"column":1,"nodeType":"ImportDeclaration","endLine":19,"endColumn":66,"fix":{"range":[406,1672],"text":"import { GuardianLabsLines } from '../components/GuardianLabsLines';\n\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { parse } from '../../lib/slot-machine-flags';\nimport { MobileStickyContainer, AdSlot } from '../components/AdSlot';\nimport { ArticleBody } from '../components/ArticleBody';\nimport { ArticleContainer } from '../components/ArticleContainer';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { Border } from '../components/Border';\nimport { DiscussionLayout } from '../components/DiscussionLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { GetMatchNav } from '../components/GetMatchNav.importable';\nimport { GetMatchStats } from '../components/GetMatchStats.importable';\nimport { GetMatchTabs } from '../components/GetMatchTabs.importable';\nimport { GridItem } from '../components/GridItem';\nimport { Header } from '../components/Header';\nimport { HeaderAdSlot } from '../components/HeaderAdSlot';\nimport { Island } from '../components/Island';\nimport { LabsHeader } from '../components/LabsHeader.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"There should be no empty line between import groups","line":20,"column":1,"nodeType":"ImportDeclaration","endLine":20,"endColumn":69,"fix":{"range":[541,542],"text":""}},{"ruleId":"import/order","severity":1,"message":"`../components/GuardianLabsLines` import should occur after import of `../components/GridItem`","line":20,"column":1,"nodeType":"ImportDeclaration","endLine":20,"endColumn":69,"fix":{"range":[472,1519],"text":"\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { parse } from '../../lib/slot-machine-flags';\nimport { MobileStickyContainer, AdSlot } from '../components/AdSlot';\nimport { ArticleBody } from '../components/ArticleBody';\nimport { ArticleContainer } from '../components/ArticleContainer';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { Border } from '../components/Border';\nimport { DiscussionLayout } from '../components/DiscussionLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { GetMatchNav } from '../components/GetMatchNav.importable';\nimport { GetMatchStats } from '../components/GetMatchStats.importable';\nimport { GetMatchTabs } from '../components/GetMatchTabs.importable';\nimport { GridItem } from '../components/GridItem';\nimport { GuardianLabsLines } from '../components/GuardianLabsLines';\n"}},{"ruleId":"sort-imports","severity":1,"message":"Member 'AdSlot' of the import declaration should be sorted alphabetically.","line":24,"column":33,"nodeType":"ImportSpecifier","messageId":"sortMembersAlphabetically","endLine":24,"endColumn":39,"fix":{"range":[664,693],"text":"AdSlot, MobileStickyContainer"}},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":299,"column":31,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":299,"endColumn":71},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":315,"column":38,"nodeType":"Punctuator","messageId":"preferNullish","endLine":315,"endColumn":40,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[8710,8712],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":667,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":667,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[18465,18467],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":669,"column":42,"nodeType":"Punctuator","messageId":"preferNullish","endLine":669,"endColumn":44,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[18563,18565],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":824,"column":41,"nodeType":"Punctuator","messageId":"preferNullish","endLine":824,"endColumn":43,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[22475,22477],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":4,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport {\n\tborder,\n\tbrandAltBackground,\n\tbrandBackground,\n\tbrandBorder,\n\tbrandLine,\n\tfrom,\n\tlabs,\n\tneutral,\n\tuntil,\n} from '@guardian/source-foundations';\nimport {\n\tLines,\n\tStraightLines,\n} from '@guardian/source-react-components-development-kitchen';\nimport { LabsHeader } from '../components/LabsHeader.importable';\nimport { GuardianLabsLines } from '../components/GuardianLabsLines';\n\nimport { buildAdTargeting } from '../../lib/ad-targeting';\nimport { parse } from '../../lib/slot-machine-flags';\nimport { MobileStickyContainer, AdSlot } from '../components/AdSlot';\nimport { ArticleBody } from '../components/ArticleBody';\nimport { ArticleContainer } from '../components/ArticleContainer';\nimport { ArticleHeadline } from '../components/ArticleHeadline';\nimport { ArticleMeta } from '../components/ArticleMeta';\nimport { ArticleTitle } from '../components/ArticleTitle';\nimport { Border } from '../components/Border';\nimport { DiscussionLayout } from '../components/DiscussionLayout';\nimport { ElementContainer } from '../components/ElementContainer';\nimport { Footer } from '../components/Footer';\nimport { GetMatchNav } from '../components/GetMatchNav.importable';\nimport { GetMatchStats } from '../components/GetMatchStats.importable';\nimport { GetMatchTabs } from '../components/GetMatchTabs.importable';\nimport { GridItem } from '../components/GridItem';\nimport { Header } from '../components/Header';\nimport { HeaderAdSlot } from '../components/HeaderAdSlot';\nimport { Island } from '../components/Island';\nimport { MainMedia } from '../components/MainMedia';\nimport { MostViewedFooterLayout } from '../components/MostViewedFooterLayout';\nimport { MostViewedRightWrapper } from '../components/MostViewedRightWrapper.importable';\nimport { Nav } from '../components/Nav/Nav';\nimport { OnwardsLower } from '../components/OnwardsLower.importable';\nimport { OnwardsUpper } from '../components/OnwardsUpper.importable';\nimport { RightColumn } from '../components/RightColumn';\nimport { SlotBodyEnd } from '../components/SlotBodyEnd.importable';\nimport { Standfirst } from '../components/Standfirst';\nimport { StarRating } from '../components/StarRating/StarRating';\nimport { StickyBottomBanner } from '../components/StickyBottomBanner.importable';\nimport { SubMeta } from '../components/SubMeta';\nimport { SubNav } from '../components/SubNav.importable';\nimport { getContributionsServiceUrl } from '../lib/contributions';\nimport { decidePalette } from '../lib/decidePalette';\nimport {\n\tdecideLineCount,\n\tdecideLineEffect,\n\tgetCurrentPillar,\n} from '../lib/layoutHelpers';\nimport { BannerWrapper, Stuck } from './lib/stickiness';\n\nconst StandardGrid = ({\n\tchildren,\n\tisMatchReport,\n}: {\n\tchildren: React.ReactNode;\n\tisMatchReport: boolean;\n}) => (\n\t<div\n\t\tcss={css`\n\t\t\t/* IE Fallback */\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t${until.leftCol} {\n\t\t\t\tmargin-left: 0px;\n\t\t\t}\n\t\t\t${from.leftCol} {\n\t\t\t\tmargin-left: 151px;\n\t\t\t}\n\t\t\t${from.wide} {\n\t\t\t\tmargin-left: 230px;\n\t\t\t}\n\n\t\t\t@supports (display: grid) {\n\t\t\t\tdisplay: grid;\n\t\t\t\twidth: 100%;\n\t\t\t\tmargin-left: 0;\n\n\t\t\t\tgrid-column-gap: 10px;\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column (220 - 1px border)\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${from.wide} {\n\t\t\t\t\tgrid-template-columns: 219px 1px 1fr 300px;\n\n\t\t\t\t\t${isMatchReport\n\t\t\t\t\t\t? css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title  border  matchNav     right-column'\n\t\t\t\t\t\t\t\t\t'title  border  matchtabs    right-column'\n\t\t\t\t\t\t\t\t\t'.      border  headline     right-column'\n\t\t\t\t\t\t\t\t\t'.      border  standfirst   right-column'\n\t\t\t\t\t\t\t\t\t'lines  border  media        right-column'\n\t\t\t\t\t\t\t\t\t'meta   border  media        right-column'\n\t\t\t\t\t\t\t\t\t'meta   border  body         right-column'\n\t\t\t\t\t\t\t\t\t'.      border  .            right-column';\n\t\t\t\t\t\t  `\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title  border  headline     right-column'\n\t\t\t\t\t\t\t\t\t'.      border  standfirst   right-column'\n\t\t\t\t\t\t\t\t\t'lines  border  media        right-column'\n\t\t\t\t\t\t\t\t\t'meta   border  media        right-column'\n\t\t\t\t\t\t\t\t\t'meta   border  body         right-column'\n\t\t\t\t\t\t\t\t\t'.      border  .            right-column';\n\t\t\t\t\t\t  `}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tLeft Column\n\t\t\t\t\tVertical grey border\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.wide} {\n\t\t\t\t\tgrid-template-columns: 140px 1px 1fr 300px;\n\n\t\t\t\t\t${isMatchReport\n\t\t\t\t\t\t? css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title  border  matchNav     right-column'\n\t\t\t\t\t\t\t\t\t'title  border  matchtabs    right-column'\n\t\t\t\t\t\t\t\t\t'.      border  headline     right-column'\n\t\t\t\t\t\t\t\t\t'.      border  standfirst   right-column'\n\t\t\t\t\t\t\t\t\t'lines  border  media        right-column'\n\t\t\t\t\t\t\t\t\t'meta   border  media        right-column'\n\t\t\t\t\t\t\t\t\t'meta   border  body         right-column'\n\t\t\t\t\t\t\t\t\t'.      border  .            right-column';\n\t\t\t\t\t\t  `\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title  border  headline     right-column'\n\t\t\t\t\t\t\t\t\t'.      border  standfirst   right-column'\n\t\t\t\t\t\t\t\t\t'lines  border  media        right-column'\n\t\t\t\t\t\t\t\t\t'meta   border  media        right-column'\n\t\t\t\t\t\t\t\t\t'meta   border  body         right-column'\n\t\t\t\t\t\t\t\t\t'.      border  .            right-column';\n\t\t\t\t\t\t  `}\n\t\t\t\t}\n\n\t\t\t\t/*\n\t\t\t\t\tExplanation of each unit of grid-template-columns\n\n\t\t\t\t\tMain content\n\t\t\t\t\tRight Column\n\t\t\t\t*/\n\t\t\t\t${until.leftCol} {\n\t\t\t\t\tgrid-template-columns: 1fr 300px;\n\t\t\t\t\t${isMatchReport\n\t\t\t\t\t\t? css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'matchNav      right-column'\n\t\t\t\t\t\t\t\t\t'matchtabs\t   right-column'\n\t\t\t\t\t\t\t\t\t'title         right-column'\n\t\t\t\t\t\t\t\t\t'headline      right-column'\n\t\t\t\t\t\t\t\t\t'standfirst    right-column'\n\t\t\t\t\t\t\t\t\t'media         right-column'\n\t\t\t\t\t\t\t\t\t'lines         right-column'\n\t\t\t\t\t\t\t\t\t'meta          right-column'\n\t\t\t\t\t\t\t\t\t'body          right-column'\n\t\t\t\t\t\t\t\t\t'.             right-column';\n\t\t\t\t\t\t  `\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title         right-column'\n\t\t\t\t\t\t\t\t\t'headline      right-column'\n\t\t\t\t\t\t\t\t\t'standfirst    right-column'\n\t\t\t\t\t\t\t\t\t'media         right-column'\n\t\t\t\t\t\t\t\t\t'lines         right-column'\n\t\t\t\t\t\t\t\t\t'meta          right-column'\n\t\t\t\t\t\t\t\t\t'body          right-column'\n\t\t\t\t\t\t\t\t\t'.             right-column';\n\t\t\t\t\t\t  `}\n\t\t\t\t}\n\n\t\t\t\t${until.desktop} {\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\t${isMatchReport\n\t\t\t\t\t\t? css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'matchNav'\n\t\t\t\t\t\t\t\t\t'matchtabs'\n\t\t\t\t\t\t\t\t\t'title'\n\t\t\t\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t\t\t\t'media'\n\t\t\t\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t\t\t\t'body';\n\t\t\t\t\t\t  `\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'title'\n\t\t\t\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t\t\t\t'media'\n\t\t\t\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t\t\t\t'body';\n\t\t\t\t\t\t  `}\n\t\t\t\t}\n\n\t\t\t\t${until.tablet} {\n\t\t\t\t\tgrid-column-gap: 0px;\n\n\t\t\t\t\tgrid-template-columns: 1fr; /* Main content */\n\t\t\t\t\t${isMatchReport\n\t\t\t\t\t\t? css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'matchNav'\n\t\t\t\t\t\t\t\t\t'matchtabs'\n\t\t\t\t\t\t\t\t\t'media'\n\t\t\t\t\t\t\t\t\t'title'\n\t\t\t\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t\t\t\t'body';\n\t\t\t\t\t\t  `\n\t\t\t\t\t\t: css`\n\t\t\t\t\t\t\t\tgrid-template-areas:\n\t\t\t\t\t\t\t\t\t'media'\n\t\t\t\t\t\t\t\t\t'title'\n\t\t\t\t\t\t\t\t\t'headline'\n\t\t\t\t\t\t\t\t\t'standfirst'\n\t\t\t\t\t\t\t\t\t'lines'\n\t\t\t\t\t\t\t\t\t'meta'\n\t\t\t\t\t\t\t\t\t'body';\n\t\t\t\t\t\t  `}\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nconst maxWidth = css`\n\t${from.desktop} {\n\t\tmax-width: 620px;\n\t}\n`;\n\nconst stretchLines = css`\n\t${until.phablet} {\n\t\tmargin-left: -20px;\n\t\tmargin-right: -20px;\n\t}\n\t${until.mobileLandscape} {\n\t\tmargin-left: -10px;\n\t\tmargin-right: -10px;\n\t}\n`;\n\nconst starWrapper = css`\n\tmargin-bottom: 18px;\n\tmargin-top: 6px;\n\tbackground-color: ${brandAltBackground.primary};\n\tdisplay: inline-block;\n\n\t${until.phablet} {\n\t\tpadding-left: 20px;\n\t\tmargin-left: -20px;\n\t}\n\t${until.leftCol} {\n\t\tpadding-left: 0px;\n\t\tmargin-left: -0px;\n\t}\n\n\tpadding-left: 10px;\n\tmargin-left: -10px;\n`;\n\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n}\n\nexport const StandardLayout = ({ CAPIArticle, NAV, format }: Props) => {\n\tconst {\n\t\tconfig: { isPaidContent, host },\n\t} = CAPIArticle;\n\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: CAPIArticle.isAdFreeUser,\n\t\tisSensitive: CAPIArticle.config.isSensitive,\n\t\tvideoDuration: CAPIArticle.config.videoDuration,\n\t\tedition: CAPIArticle.config.edition,\n\t\tsection: CAPIArticle.config.section,\n\t\tsharedAdTargeting: CAPIArticle.config.sharedAdTargeting,\n\t\tadUnit: CAPIArticle.config.adUnit,\n\t});\n\n\tconst showBodyEndSlot =\n\t\tparse(CAPIArticle.slotMachineFlags || '').showBodyEnd ||\n\t\tCAPIArticle.config.switches.slotBodyEnd;\n\n\t// TODO:\n\t// 1) Read 'forceEpic' value from URL parameter and use it to force the slot to render\n\t// 2) Otherwise, ensure slot only renders if `CAPIArticle.config.shouldHideReaderRevenue` equals false.\n\n\tconst seriesTag = CAPIArticle.tags.find(\n\t\t(tag) => tag.type === 'Series' || tag.type === 'Blog',\n\t);\n\n\tconst showOnwardsLower = seriesTag && CAPIArticle.hasStoryPackage;\n\n\tconst footballMatchUrl =\n\t\tCAPIArticle.matchType === 'FootballMatchType' && CAPIArticle.matchUrl;\n\n\tconst isMatchReport =\n\t\tformat.design === ArticleDesign.MatchReport && !!footballMatchUrl;\n\n\tconst showComments = CAPIArticle.isCommentable;\n\n\tconst { branding } =\n\t\tCAPIArticle.commercialProperties[CAPIArticle.editionId];\n\n\tconst palette = decidePalette(format);\n\n\tconst formatForNav =\n\t\tformat.theme === ArticleSpecial.Labs\n\t\t\t? format\n\t\t\t: {\n\t\t\t\t\t...format,\n\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t  };\n\n\tconst contributionsServiceUrl = getContributionsServiceUrl(CAPIArticle);\n\n\treturn (\n\t\t<>\n\t\t\t<div data-print-layout=\"hide\" id=\"bannerandheader\">\n\t\t\t\t<>\n\t\t\t\t\t<Stuck>\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\tshouldCenter={false}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<HeaderAdSlot\n\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t</Stuck>\n\t\t\t\t\t{format.theme !== ArticleSpecial.Labs && (\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\t\telement=\"header\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Header\n\t\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl}\n\t\t\t\t\t\t\t\tmmaUrl={CAPIArticle.config.mmaUrl}\n\t\t\t\t\t\t\t\tsupporterCTA={\n\t\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t\t.supporter\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\t\t\t\tremoteHeader={\n\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteHeader\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t)}\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\tborderColour={brandLine.primary}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\telement=\"nav\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Nav\n\t\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\t\tformat={formatForNav}\n\t\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t.subscribe\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t{NAV.subNavSections &&\n\t\t\t\t\t\tformat.theme !== ArticleSpecial.Labs && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\t\tbackgroundColour={\n\t\t\t\t\t\t\t\t\t\tpalette.background.article\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\t\tbackgroundColour={\n\t\t\t\t\t\t\t\t\t\tpalette.background.article\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t</div>\n\n\t\t\t{format.theme === ArticleSpecial.Labs && (\n\t\t\t\t<Stuck>\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\tbackgroundColour={labs[400]}\n\t\t\t\t\t\tborderColour={border.primary}\n\t\t\t\t\t\tsectionId=\"labs-header\"\n\t\t\t\t\t\telement=\"aside\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t<LabsHeader />\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t</Stuck>\n\t\t\t)}\n\n\t\t\t{CAPIArticle.config.switches.surveys && (\n\t\t\t\t<AdSlot position=\"survey\" display={format.display} />\n\t\t\t)}\n\n\t\t\t<main>\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tbackgroundColour={palette.background.article}\n\t\t\t\t\tborderColour={palette.border.article}\n\t\t\t\t\telement=\"article\"\n\t\t\t\t>\n\t\t\t\t\t<StandardGrid isMatchReport={isMatchReport}>\n\t\t\t\t\t\t<GridItem area=\"title\" element=\"aside\">\n\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tsectionLabel={CAPIArticle.sectionLabel}\n\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\tguardianBaseURL={CAPIArticle.guardianBaseURL}\n\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\tisMatch={!!footballMatchUrl}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"border\">\n\t\t\t\t\t\t\t{format.theme === ArticleSpecial.Labs ? (\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<Border format={format} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"matchNav\" element=\"aside\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t{format.design === ArticleDesign.MatchReport &&\n\t\t\t\t\t\t\t\t\tfootballMatchUrl && (\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\t\tplaceholderHeight={230}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<GetMatchNav\n\t\t\t\t\t\t\t\t\t\t\t\tmatchUrl={footballMatchUrl}\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t\theadlineString={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.headline\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"matchtabs\" element=\"aside\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t{format.design === ArticleDesign.MatchReport &&\n\t\t\t\t\t\t\t\t\tfootballMatchUrl && (\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\t\tplaceholderHeight={40}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<GetMatchTabs\n\t\t\t\t\t\t\t\t\t\t\t\tmatchUrl={footballMatchUrl}\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"headline\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\theadlineString={CAPIArticle.headline}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tbyline={CAPIArticle.author.byline}\n\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\thasStarRating={\n\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{CAPIArticle.starRating ||\n\t\t\t\t\t\t\tCAPIArticle.starRating === 0 ? (\n\t\t\t\t\t\t\t\t<div css={starWrapper}>\n\t\t\t\t\t\t\t\t\t<StarRating\n\t\t\t\t\t\t\t\t\t\trating={CAPIArticle.starRating}\n\t\t\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"standfirst\">\n\t\t\t\t\t\t\t<Standfirst\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\tstandfirst={CAPIArticle.standfirst}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"media\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<MainMedia\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\telements={CAPIArticle.mainMediaElements}\n\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"lines\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<div css={stretchLines}>\n\t\t\t\t\t\t\t\t\t{format.theme === ArticleSpecial.Labs ? (\n\t\t\t\t\t\t\t\t\t\t<GuardianLabsLines />\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<Lines\n\t\t\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t\t\t\tcount={decideLineCount(\n\t\t\t\t\t\t\t\t\t\t\t\tformat.design,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\teffect={decideLineEffect(\n\t\t\t\t\t\t\t\t\t\t\t\tformat.design,\n\t\t\t\t\t\t\t\t\t\t\t\tformat.theme,\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"meta\" element=\"aside\">\n\t\t\t\t\t\t\t<div css={maxWidth}>\n\t\t\t\t\t\t\t\t<ArticleMeta\n\t\t\t\t\t\t\t\t\tbranding={branding}\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tauthor={CAPIArticle.author}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tprimaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsecondaryDateline={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationSecondaryDateDisplay\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tisCommentable={CAPIArticle.isCommentable}\n\t\t\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tshowShareCount={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t\t\t.serverShareCounts\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"body\">\n\t\t\t\t\t\t\t<ArticleContainer format={format}>\n\t\t\t\t\t\t\t\t<ArticleBody\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tblocks={CAPIArticle.blocks}\n\t\t\t\t\t\t\t\t\tpinnedPost={CAPIArticle.pinnedPost}\n\t\t\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.config.isPaidContent\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName || ''}\n\t\t\t\t\t\t\t\t\tisPreview={CAPIArticle.config.isPreview}\n\t\t\t\t\t\t\t\t\tidUrl={CAPIArticle.config.idUrl || ''}\n\t\t\t\t\t\t\t\t\tisDev={!!CAPIArticle.config.isDev}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{format.design === ArticleDesign.MatchReport &&\n\t\t\t\t\t\t\t\t\t!!footballMatchUrl && (\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\t\tplaceholderHeight={800}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<GetMatchStats\n\t\t\t\t\t\t\t\t\t\t\t\tmatchUrl={footballMatchUrl}\n\t\t\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t{showBodyEndSlot && (\n\t\t\t\t\t\t\t\t\t<Island clientOnly={true}>\n\t\t\t\t\t\t\t\t\t\t<SlotBodyEnd\n\t\t\t\t\t\t\t\t\t\t\tcontentType={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.contentType\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\t\t\t\t\t\t\tcontributionsServiceUrl\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tidApiUrl={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.idApiUrl\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tisMinuteArticle={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t.isMinuteArticle\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType\n\t\t\t\t\t\t\t\t\t\t\t\t\t.isPaidContent\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tkeywordsId={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.keywordIds\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\t\t\tsectionId={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.config.section\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tsectionName={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.sectionName\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tstage={CAPIArticle.config.stage}\n\t\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<StraightLines\n\t\t\t\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\t\t\t\tcount={4}\n\t\t\t\t\t\t\t\t\tcssOverrides={css`\n\t\t\t\t\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<SubMeta\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\tsubMetaKeywordLinks={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaKeywordLinks\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tsubMetaSectionLinks={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.subMetaSectionLinks\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\t\t\t\twebUrl={CAPIArticle.webURL}\n\t\t\t\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\t\t\t\tshowBottomSocialButtons={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.showBottomSocialButtons\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ArticleContainer>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t\t<GridItem area=\"right-column\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\t\tpadding-top: 6px;\n\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\t${from.desktop} {\n\t\t\t\t\t\t\t\t\t\t/* above 980 */\n\t\t\t\t\t\t\t\t\t\tmargin-left: 20px;\n\t\t\t\t\t\t\t\t\t\tmargin-right: -20px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t${from.leftCol} {\n\t\t\t\t\t\t\t\t\t\t/* above 1140 */\n\t\t\t\t\t\t\t\t\t\tmargin-left: 0px;\n\t\t\t\t\t\t\t\t\t\tmargin-right: 0px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RightColumn>\n\t\t\t\t\t\t\t\t\t<AdSlot\n\t\t\t\t\t\t\t\t\t\tposition=\"right\"\n\t\t\t\t\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.pageType.isPaidContent\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{!isPaidContent ? (\n\t\t\t\t\t\t\t\t\t\t<Island\n\t\t\t\t\t\t\t\t\t\t\tclientOnly={true}\n\t\t\t\t\t\t\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<MostViewedRightWrapper\n\t\t\t\t\t\t\t\t\t\t\t\tisAdFreeUser={\n\t\t\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.isAdFreeUser\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t<></>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</RightColumn>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</GridItem>\n\t\t\t\t\t</StandardGrid>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot\n\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\tposition=\"merchandising-high\"\n\t\t\t\t\t\tdisplay={format.display}\n\t\t\t\t\t/>\n\t\t\t\t</ElementContainer>\n\n\t\t\t\t<Island\n\t\t\t\t\tclientOnly={true}\n\t\t\t\t\tdeferUntil=\"visible\"\n\t\t\t\t\tplaceholderHeight={600}\n\t\t\t\t>\n\t\t\t\t\t<OnwardsUpper\n\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\thasRelated={CAPIArticle.hasRelated}\n\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tisPaidContent={\n\t\t\t\t\t\t\tCAPIArticle.config.isPaidContent || false\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshowRelatedContent={\n\t\t\t\t\t\t\tCAPIArticle.config.showRelatedContent\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkeywordIds={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\n\t\t\t\t{showOnwardsLower && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tsectionId=\"onwards-lower\"\n\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Island clientOnly={true} deferUntil=\"visible\">\n\t\t\t\t\t\t\t<OnwardsLower\n\t\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t\t\thasStoryPackage={CAPIArticle.hasStoryPackage}\n\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && showComments && (\n\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\tsectionId=\"comments\"\n\t\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\t\telement=\"section\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<DiscussionLayout\n\t\t\t\t\t\t\tdiscussionApiUrl={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiUrl\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tshortUrlId={CAPIArticle.config.shortUrlId}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tdiscussionD2Uid={CAPIArticle.config.discussionD2Uid}\n\t\t\t\t\t\t\tdiscussionApiClientHeader={\n\t\t\t\t\t\t\t\tCAPIArticle.config.discussionApiClientHeader\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tenableDiscussionSwitch={\n\t\t\t\t\t\t\t\tCAPIArticle.config.switches\n\t\t\t\t\t\t\t\t\t.enableDiscussionSwitch\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\t\tshouldHideAds={CAPIArticle.shouldHideAds}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t{!isPaidContent && (\n\t\t\t\t\t<ElementContainer data-print-layout=\"hide\" element=\"aside\">\n\t\t\t\t\t\t<MostViewedFooterLayout\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ElementContainer>\n\t\t\t\t)}\n\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\tbackgroundColour={neutral[93]}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<AdSlot position=\"merchandising\" display={format.display} />\n\t\t\t\t</ElementContainer>\n\t\t\t</main>\n\n\t\t\t{NAV.subNavSections && (\n\t\t\t\t<ElementContainer\n\t\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\t\tpadded={false}\n\t\t\t\t\telement=\"aside\"\n\t\t\t\t>\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<SubNav\n\t\t\t\t\t\t\tsubNavSections={NAV.subNavSections}\n\t\t\t\t\t\t\tcurrentNavLink={NAV.currentNavLink}\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</ElementContainer>\n\t\t\t)}\n\n\t\t\t<ElementContainer\n\t\t\t\tdata-print-layout=\"hide\"\n\t\t\t\tpadded={false}\n\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\tborderColour={brandBorder.primary}\n\t\t\t\tshowSideBorders={false}\n\t\t\t\telement=\"footer\"\n\t\t\t>\n\t\t\t\t<Footer\n\t\t\t\t\tpageFooter={CAPIArticle.pageFooter}\n\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\tpillars={NAV.pillars}\n\t\t\t\t\turls={CAPIArticle.nav.readerRevenueLinks.header}\n\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\tcontributionsServiceUrl={\n\t\t\t\t\t\tCAPIArticle.contributionsServiceUrl\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</ElementContainer>\n\n\t\t\t<BannerWrapper data-print-layout=\"hide\">\n\t\t\t\t<Island deferUntil=\"idle\" clientOnly={true}>\n\t\t\t\t\t<StickyBottomBanner\n\t\t\t\t\t\tcontentType={CAPIArticle.contentType}\n\t\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\t\tidApiUrl={CAPIArticle.config.idApiUrl}\n\t\t\t\t\t\tisMinuteArticle={CAPIArticle.pageType.isMinuteArticle}\n\t\t\t\t\t\tisPaidContent={CAPIArticle.pageType.isPaidContent}\n\t\t\t\t\t\tisPreview={!!CAPIArticle.config.isPreview}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t\tkeywordsId={CAPIArticle.config.keywordIds}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\tsection={CAPIArticle.config.section}\n\t\t\t\t\t\tsectionName={CAPIArticle.sectionName}\n\t\t\t\t\t\tshouldHideReaderRevenue={\n\t\t\t\t\t\t\tCAPIArticle.shouldHideReaderRevenue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tremoteBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.remoteBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpuzzleBannerSwitch={\n\t\t\t\t\t\t\tCAPIArticle.config.switches.puzzlesBanner\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t</BannerWrapper>\n\t\t\t<MobileStickyContainer data-print-layout=\"hide\" />\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/headers/ImmersiveHeader.tsx","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":49,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":49,"endColumn":15},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":49,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":49,"endColumn":59,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1526,1579],"text":"mainMedia?.data?.caption"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":49,"column":19,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":49,"endColumn":33},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":52,"column":3,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":52,"endColumn":12},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":52,"column":3,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":53,"endColumn":26,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1629,1667],"text":"mainMedia?.displayCredit"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":54,"column":3,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":54,"endColumn":17},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":124,"column":26,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":124,"endColumn":35},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":154,"column":7,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":154,"endColumn":16},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":225,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":225,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport { ArticleDesign, ArticleSpecial } from '@guardian/libs';\nimport type { ArticleFormat } from '@guardian/libs';\nimport {\n\tborder,\n\tbrandBackground,\n\tfrom,\n\tlabs,\n} from '@guardian/source-foundations';\nimport { buildAdTargeting } from '../../../lib/ad-targeting';\nimport { ArticleHeadline } from '../../components/ArticleHeadline';\nimport { ArticleTitle } from '../../components/ArticleTitle';\nimport { Caption } from '../../components/Caption';\nimport { ContainerLayout } from '../../components/ContainerLayout';\nimport { ElementContainer } from '../../components/ElementContainer';\nimport { Island } from '../../components/Island';\nimport { LabsHeader } from '../../components/LabsHeader.importable';\nimport { MainMedia } from '../../components/MainMedia';\nimport { Nav } from '../../components/Nav/Nav';\nimport { decidePalette } from '../../lib/decidePalette';\nimport { getZIndex } from '../../lib/getZIndex';\nimport { getCurrentPillar } from '../../lib/layoutHelpers';\nimport { Stuck } from '../lib/stickiness';\n\nconst hasMainMediaStyles = css`\n\theight: 80vh;\n\t/**\n    80vh is normally enough but don't let the content shrink vertically too\n    much just in case\n    */\n\tmin-height: 25rem;\n\t${from.desktop} {\n\t\theight: 100vh;\n\t\tmin-height: 31.25rem;\n\t}\n\t${from.wide} {\n\t\tmin-height: 50rem;\n\t}\n`;\n\ninterface Props {\n\tCAPIArticle: CAPIArticleType;\n\tNAV: NavType;\n\tformat: ArticleFormat;\n}\n\nconst decideCaption = (mainMedia: ImageBlockElement): string => {\n\tconst caption = [];\n\tif (mainMedia && mainMedia.data && mainMedia.data.caption)\n\t\tcaption.push(mainMedia.data.caption);\n\tif (\n\t\tmainMedia &&\n\t\tmainMedia.displayCredit &&\n\t\tmainMedia.data &&\n\t\tmainMedia.data.credit\n\t)\n\t\tcaption.push(mainMedia.data.credit);\n\treturn caption.join(' ');\n};\n\nconst Box = ({\n\tpalette,\n\tchildren,\n}: {\n\tpalette: Palette;\n\tchildren: React.ReactNode;\n}) => (\n\t<div\n\t\tcss={css`\n\t\t\t/*\n\t\t\t\tThis pseudo css shows a black box to the right of the headline\n\t\t\t\tso that the black background of the inverted text stretches\n\t\t\t\tall the way right. But only from mobileLandscape because below\n\t\t\t\tthat we want to show a gap. To work properly it needs to wrap\n\t\t\t\tthe healine so it inherits the correct height based on the length\n\t\t\t\tof the headline text\n\t\t\t*/\n\t\t\t${from.mobileLandscape} {\n\t\t\t\tposition: relative;\n\t\t\t\t:after {\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\twidth: 50%;\n\t\t\t\t\tright: 0;\n\t\t\t\t\tbackground-color: ${palette.background.headline};\n\t\t\t\t\t${getZIndex('immersiveBlackBox')}\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tbottom: 0;\n\t\t\t\t}\n\t\t\t}\n\t\t`}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport const ImmersiveHeader = ({\n\tCAPIArticle,\n\tNAV,\n\tformat,\n}: Props): JSX.Element => {\n\tconst {\n\t\tconfig: { host },\n\t} = CAPIArticle;\n\n\tconst adTargeting: AdTargeting = buildAdTargeting({\n\t\tisAdFreeUser: CAPIArticle.isAdFreeUser,\n\t\tisSensitive: CAPIArticle.config.isSensitive,\n\t\tvideoDuration: CAPIArticle.config.videoDuration,\n\t\tedition: CAPIArticle.config.edition,\n\t\tsection: CAPIArticle.config.section,\n\t\tsharedAdTargeting: CAPIArticle.config.sharedAdTargeting,\n\t\tadUnit: CAPIArticle.config.adUnit,\n\t});\n\n\t// TODO:\n\t// 1) Read 'forceEpic' value from URL parameter and use it to force the slot to render\n\t// 2) Otherwise, ensure slot only renders if `CAPIArticle.config.shouldHideReaderRevenue` equals false.\n\n\tconst mainMedia = CAPIArticle.mainMediaElements[0] as ImageBlockElement;\n\tconst captionText = decideCaption(mainMedia);\n\n\tconst HEADLINE_OFFSET = mainMedia ? 120 : 0;\n\n\tconst LeftColCaption = () => (\n\t\t<div\n\t\t\tcss={css`\n\t\t\t\tmargin-top: ${HEADLINE_OFFSET}px;\n\t\t\t\tposition: absolute;\n\t\t\t\tmargin-left: 20px;\n\t\t\t`}\n\t\t>\n\t\t\t<Caption\n\t\t\t\tcaptionText={captionText}\n\t\t\t\tformat={format}\n\t\t\t\tshouldLimitWidth={true}\n\t\t\t\tisLeftCol={true}\n\t\t\t/>\n\t\t</div>\n\t);\n\n\tconst palette = decidePalette(format);\n\n\treturn (\n\t\t<>\n\t\t\t<header\n\t\t\t\tcss={css`\n\t\t\t\t\tbackground-color: ${palette.background.article};\n\t\t\t\t`}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tcss={[\n\t\t\t\t\t\tmainMedia && hasMainMediaStyles,\n\t\t\t\t\t\tcss`\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t`,\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t${getZIndex('headerWrapper')}\n\t\t\t\t\t\t\torder: 0;\n\t\t\t\t\t\t`}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\tshowSideBorders={false}\n\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\tpadded={false}\n\t\t\t\t\t\t\tbackgroundColour={brandBackground.primary}\n\t\t\t\t\t\t\telement=\"nav\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Nav\n\t\t\t\t\t\t\t\tformat={{\n\t\t\t\t\t\t\t\t\t...format,\n\t\t\t\t\t\t\t\t\ttheme: getCurrentPillar(CAPIArticle),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tnav={NAV}\n\t\t\t\t\t\t\t\tsubscribeUrl={\n\t\t\t\t\t\t\t\t\tCAPIArticle.nav.readerRevenueLinks.header\n\t\t\t\t\t\t\t\t\t\t.subscribe\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tedition={CAPIArticle.editionId}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{format.theme === ArticleSpecial.Labs && (\n\t\t\t\t\t\t<Stuck>\n\t\t\t\t\t\t\t<ElementContainer\n\t\t\t\t\t\t\t\tshowSideBorders={true}\n\t\t\t\t\t\t\t\tshowTopBorder={false}\n\t\t\t\t\t\t\t\tbackgroundColour={labs[400]}\n\t\t\t\t\t\t\t\tborderColour={border.primary}\n\t\t\t\t\t\t\t\tsectionId=\"labs-header\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t\t\t\t\t<LabsHeader />\n\t\t\t\t\t\t\t\t</Island>\n\t\t\t\t\t\t\t</ElementContainer>\n\t\t\t\t\t\t</Stuck>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<MainMedia\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\telements={CAPIArticle.mainMediaElements}\n\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\tstarRating={\n\t\t\t\t\t\t\tformat.design === ArticleDesign.Review &&\n\t\t\t\t\t\t\tCAPIArticle.starRating\n\t\t\t\t\t\t\t\t? CAPIArticle.starRating\n\t\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\thost={host}\n\t\t\t\t\t\thideCaption={true}\n\t\t\t\t\t\tpageId={CAPIArticle.pageId}\n\t\t\t\t\t\twebTitle={CAPIArticle.webTitle}\n\t\t\t\t\t\tajaxUrl={CAPIArticle.config.ajaxUrl}\n\t\t\t\t\t\tswitches={CAPIArticle.config.switches}\n\t\t\t\t\t\tisAdFreeUser={CAPIArticle.isAdFreeUser}\n\t\t\t\t\t\tisSensitive={CAPIArticle.config.isSensitive}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{mainMedia && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tcss={css`\n\t\t\t\t\t\t\t\tmargin-top: -${HEADLINE_OFFSET}px;\n\t\t\t\t\t\t\t\t/*\n                        This z-index is what ensures the headline title text shows above main media. For\n                        the actual headline we set the z-index deeper in ArticleHeadline itself so that\n                        the text appears above the pseudo Box element\n                    */\n\t\t\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\t\t\t${getZIndex('articleHeadline')};\n\t\t\t\t\t\t\t`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ContainerLayout\n\t\t\t\t\t\t\t\tverticalMargins={false}\n\t\t\t\t\t\t\t\tpadContent={false}\n\t\t\t\t\t\t\t\tpadSides={false}\n\t\t\t\t\t\t\t\tleftContent={<LeftColCaption />}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ArticleTitle\n\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\tsectionLabel={CAPIArticle.sectionLabel}\n\t\t\t\t\t\t\t\t\tsectionUrl={CAPIArticle.sectionUrl}\n\t\t\t\t\t\t\t\t\tguardianBaseURL={\n\t\t\t\t\t\t\t\t\t\tCAPIArticle.guardianBaseURL\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tbadge={CAPIArticle.badge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</ContainerLayout>\n\t\t\t\t\t\t\t<Box palette={palette}>\n\t\t\t\t\t\t\t\t<ContainerLayout\n\t\t\t\t\t\t\t\t\tverticalMargins={false}\n\t\t\t\t\t\t\t\t\tpadContent={false}\n\t\t\t\t\t\t\t\t\tpadSides={false}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ArticleHeadline\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\theadlineString={CAPIArticle.headline}\n\t\t\t\t\t\t\t\t\t\ttags={CAPIArticle.tags}\n\t\t\t\t\t\t\t\t\t\tbyline={CAPIArticle.author.byline}\n\t\t\t\t\t\t\t\t\t\twebPublicationDateDeprecated={\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.webPublicationDateDeprecated\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\thasStarRating={\n\t\t\t\t\t\t\t\t\t\t\t!!CAPIArticle.starRating ||\n\t\t\t\t\t\t\t\t\t\t\tCAPIArticle.starRating === 0\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</ContainerLayout>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</header>\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/lib/interactiveLegacyStyling.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/lib/interactiveLegacyStyling.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/layouts/lib/stickiness.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":49,"column":22,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":49,"endColumn":59},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":55,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":55,"endColumn":51},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":59,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":59,"endColumn":54}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { css } from '@emotion/react';\nimport type { ZIndex } from '../../lib/getZIndex';\nimport { getZIndex, getZIndexImportant } from '../../lib/getZIndex';\n\ntype Props = {\n\tchildren?: React.ReactNode;\n};\n\ntype StuckProps = {\n\tchildren?: React.ReactNode;\n\tzIndex?: ZIndex;\n};\n\nconst stickyStyles = css`\n\tposition: sticky;\n\ttop: 0;\n`;\n\nconst addZindex = (zIndex: ZIndex = 'stickyAdWrapper') => css`\n\t${getZIndex(zIndex)}\n`;\n\nconst whiteBackground = css`\n\tbackground-color: white;\n`;\n\nconst headerWrapper = css`\n\tposition: relative;\n\t${getZIndex('headerWrapper')}\n`;\n\n// The css overrides here are necessary because ad-takeovers can inject css that breaks the banner\n// Overflow is visible because puzzles banner needs it to render correctly\nconst bannerWrapper = css`\n\t/* stylelint-disable-next-line declaration-no-important */\n\tposition: fixed !important;\n\tbottom: 0;\n\t${getZIndexImportant('banner')}\n\tmax-height: 100vh;\n\toverflow: visible;\n\t/* stylelint-disable-next-line declaration-no-important */\n\twidth: 100% !important;\n\t/* stylelint-disable-next-line declaration-no-important */\n\tbackground: none !important;\n\t/* stylelint-disable-next-line declaration-no-important */\n\ttop: auto !important;\n`;\n\nexport const Stuck = ({ children, zIndex }: StuckProps) => (\n\t<div css={[stickyStyles, addZindex(zIndex), whiteBackground]}>\n\t\t{children}\n\t</div>\n);\n\nexport const SendToBack = ({ children }: Props) => (\n\t<div css={headerWrapper}>{children}</div>\n);\n\nexport const BannerWrapper = ({ children }: Props) => (\n\t<aside css={bannerWrapper}>{children}</aside>\n);\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/ArticleRenderer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/DecideContainer.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":13,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":18,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { DynamicFast } from '../components/DynamicFast';\nimport { DynamicSlow } from '../components/DynamicSlow';\nimport { FixedLargeSlowXIV } from '../components/FixedLargeSlowXIV';\nimport { FixedSmallSlowIV } from '../components/FixedSmallSlowIV';\n\ntype Props = {\n\ttrails: DCRFrontCard[];\n\tcontainerType: DCRContainerType;\n\tcontainerPalette?: DCRContainerPalette;\n\tshowAge?: boolean;\n};\n\nexport const DecideContainer = ({\n\ttrails,\n\tcontainerType,\n\tcontainerPalette,\n\tshowAge,\n}: Props) => {\n\tswitch (containerType) {\n\t\tcase 'dynamic/fast':\n\t\t\treturn (\n\t\t\t\t<DynamicFast\n\t\t\t\t\ttrails={trails}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\tshowAge={showAge}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'dynamic/slow':\n\t\t\treturn (\n\t\t\t\t<DynamicSlow\n\t\t\t\t\ttrails={trails}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\tshowAge={showAge}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'fixed/large/slow-XIV':\n\t\t\treturn (\n\t\t\t\t<FixedLargeSlowXIV\n\t\t\t\t\ttrails={trails}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\tshowAge={showAge}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase 'fixed/small/slow-IV':\n\t\t\treturn (\n\t\t\t\t<FixedSmallSlowIV\n\t\t\t\t\ttrails={trails}\n\t\t\t\t\tcontainerPalette={containerPalette}\n\t\t\t\t\tshowAge={showAge}\n\t\t\t\t/>\n\t\t\t);\n\t\tdefault:\n\t\t\treturn <p>{containerType} is not yet supported</p>;\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/LiveBlogRenderer.tsx","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":28,"column":33,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":47,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { EnhancePinnedPost } from '../components/EnhancePinnedPost.importable';\nimport { Island } from '../components/Island';\nimport { LiveBlock } from '../components/LiveBlock';\nimport { LiveBlogEpic } from '../components/LiveBlogEpic.importable';\nimport { PinnedPost } from '../components/PinnedPost';\n\ntype Props = {\n\tformat: ArticleFormat;\n\tblocks: Block[];\n\tadTargeting: AdTargeting;\n\tpinnedPost?: Block;\n\thost?: string;\n\tpageId: string;\n\twebTitle: string;\n\tajaxUrl: string;\n\tisAdFreeUser: boolean;\n\tisSensitive: boolean;\n\tswitches: { [key: string]: boolean };\n\tisLiveUpdate?: boolean;\n\tsection: string;\n\tshouldHideReaderRevenue: boolean;\n\ttags: TagType[];\n\tisPaidContent: boolean;\n\tcontributionsServiceUrl: string;\n\tonFirstPage?: boolean;\n};\n\nexport const LiveBlogRenderer = ({\n\tformat,\n\tblocks,\n\tpinnedPost,\n\tadTargeting,\n\thost,\n\tpageId,\n\twebTitle,\n\tajaxUrl,\n\tswitches,\n\tisAdFreeUser,\n\tisSensitive,\n\tisLiveUpdate,\n\tsection,\n\tshouldHideReaderRevenue,\n\ttags,\n\tisPaidContent,\n\tcontributionsServiceUrl,\n\tonFirstPage,\n}: Props) => {\n\treturn (\n\t\t<>\n\t\t\t{pinnedPost && onFirstPage && (\n\t\t\t\t<>\n\t\t\t\t\t<Island clientOnly={true} deferUntil=\"idle\">\n\t\t\t\t\t\t<EnhancePinnedPost />\n\t\t\t\t\t</Island>\n\t\t\t\t\t<PinnedPost pinnedPost={pinnedPost} format={format}>\n\t\t\t\t\t\t<LiveBlock\n\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\tblock={pinnedPost}\n\t\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\t\twebTitle={webTitle}\n\t\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\t\thost={host}\n\t\t\t\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\t\t\t\tisLiveUpdate={isLiveUpdate}\n\t\t\t\t\t\t\tswitches={switches}\n\t\t\t\t\t\t\tisAdFreeUser={isAdFreeUser}\n\t\t\t\t\t\t\tisSensitive={isSensitive}\n\t\t\t\t\t\t\tisPinnedPost={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PinnedPost>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<div id=\"top-of-blog\" />\n\t\t\t{blocks.map((block) => {\n\t\t\t\treturn (\n\t\t\t\t\t<LiveBlock\n\t\t\t\t\t\tkey={block.id}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tblock={block}\n\t\t\t\t\t\tpageId={pageId}\n\t\t\t\t\t\twebTitle={webTitle}\n\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\thost={host}\n\t\t\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\t\t\tisLiveUpdate={isLiveUpdate}\n\t\t\t\t\t\tswitches={switches}\n\t\t\t\t\t\tisAdFreeUser={isAdFreeUser}\n\t\t\t\t\t\tisSensitive={isSensitive}\n\t\t\t\t\t\tisPinnedPost={false}\n\t\t\t\t\t\tpinnedPostId={pinnedPost?.id}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t\t{blocks.length > 4 && (\n\t\t\t\t<Island clientOnly={true}>\n\t\t\t\t\t<LiveBlogEpic\n\t\t\t\t\t\tsection={section}\n\t\t\t\t\t\tshouldHideReaderRevenue={shouldHideReaderRevenue}\n\t\t\t\t\t\ttags={tags}\n\t\t\t\t\t\tisPaidContent={isPaidContent}\n\t\t\t\t\t\tcontributionsServiceUrl={contributionsServiceUrl}\n\t\t\t\t\t/>\n\t\t\t\t</Island>\n\t\t\t)}\n\t\t</>\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/acquisitions.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/acquisitions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/alreadyVisited.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":5,"column":43,"nodeType":"Punctuator","messageId":"preferNullish","endLine":5,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[178,180],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":15,"column":40,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":15,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const AlreadyVisitedKey = 'gu.alreadyVisited';\n\nexport const getAlreadyVisitedCount = (): number => {\n\tconst alreadyVisited = parseInt(\n\t\tlocalStorage.getItem(AlreadyVisitedKey) || '',\n\t\t10,\n\t);\n\treturn !Number.isNaN(alreadyVisited) ? alreadyVisited : 0;\n};\n\nexport const setAlreadyVisited = (count: number): void => {\n\tlocalStorage.setItem(AlreadyVisitedKey, count.toString());\n};\n\nexport const incrementAlreadyVisited = () => {\n\tconst alreadyVisited = getAlreadyVisitedCount();\n\tsetAlreadyVisited(alreadyVisited + 1);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/braze/buildBrazeMessages.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Include a description after the \"@ts-expect-error\" directive to explain why the @ts-expect-error is necessary. The description must be 3 characters or longer.","line":36,"column":5,"nodeType":"Line","messageId":"tsDirectiveCommentRequiresDescription","endLine":36,"endColumn":24},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":63,"column":86,"nodeType":"MemberExpression","messageId":"invalidType","endLine":63,"endColumn":98}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { BrazeMessagesInterface } from '@guardian/braze-components/logic';\nimport {\n\tBrazeMessages,\n\tLocalMessageCache,\n\tNullBrazeMessages,\n} from '@guardian/braze-components/logic';\nimport { getCookie, log, storage } from '@guardian/libs';\nimport { initPerf } from '../../browser/initPerf';\nimport { record } from '../../browser/ophan/ophan';\nimport {\n\tclearHasCurrentBrazeUser,\n\thasCurrentBrazeUser,\n\tsetHasCurrentBrazeUser,\n} from '../hasCurrentBrazeUser';\nimport { checkBrazeDependencies } from './checkBrazeDependencies';\nimport { getInitialisedAppboy } from './initialiseAppboy';\n\nconst maybeWipeUserData = async (\n\tapiKey?: string,\n\tbrazeUuid?: null | string,\n\tconsent?: boolean,\n): Promise<void> => {\n\tconst userHasLoggedOut = !brazeUuid && hasCurrentBrazeUser();\n\tconst userHasRemovedConsent = !consent && hasCurrentBrazeUser();\n\n\tif (userHasLoggedOut || userHasRemovedConsent) {\n\t\ttry {\n\t\t\tif (apiKey) {\n\t\t\t\tconst appboy = await getInitialisedAppboy(apiKey);\n\t\t\t\tappboy.wipeData();\n\t\t\t}\n\t\t\tLocalMessageCache.clear();\n\t\t\tclearHasCurrentBrazeUser();\n\t\t} catch (error) {\n\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\t// @ts-expect-error\n\t\t\t\terror,\n\t\t\t\t'braze-maybeWipeUserData',\n\t\t\t);\n\t\t}\n\t}\n};\n\nexport const buildBrazeMessages = async (\n\tidApiUrl: string,\n): Promise<BrazeMessagesInterface> => {\n\tif (!storage.local.isAvailable()) {\n\t\treturn new NullBrazeMessages();\n\t}\n\n\tconst isSignedIn = !!getCookie({ name: 'GU_U', shouldMemoize: true });\n\n\tconst dependenciesResult = await checkBrazeDependencies(\n\t\tisSignedIn,\n\t\tidApiUrl,\n\t);\n\n\tif (!dependenciesResult.isSuccessful) {\n\t\tconst { failure, data } = dependenciesResult;\n\n\t\tlog(\n\t\t\t'tx',\n\t\t\t`Not attempting to show Braze messages. Dependency ${failure.field} failed with ${failure.data}.`,\n\t\t);\n\n\t\tawait maybeWipeUserData(\n\t\t\tdata.apiKey as string | undefined,\n\t\t\tdata.brazeUuid as string | null | undefined,\n\t\t\tdata.consent as boolean | undefined,\n\t\t);\n\n\t\treturn new NullBrazeMessages();\n\t}\n\n\ttry {\n\t\tconst sdkLoadTiming = initPerf('braze-sdk-load');\n\t\tsdkLoadTiming.start();\n\n\t\tconst appboy = await getInitialisedAppboy(\n\t\t\tdependenciesResult.data.apiKey as string,\n\t\t);\n\n\t\tconst sdkLoadTimeTaken = sdkLoadTiming.end();\n\t\trecord({\n\t\t\tcomponent: 'braze-sdk-load-timing',\n\t\t\tvalue: sdkLoadTimeTaken,\n\t\t});\n\n\t\tconst errorHandler = (error: Error, desc: string) => {\n\t\t\twindow.guardian.modules.sentry.reportError(error, desc);\n\t\t};\n\t\tconst brazeMessages = new BrazeMessages(\n\t\t\tappboy,\n\t\t\tLocalMessageCache,\n\t\t\terrorHandler,\n\t\t);\n\n\t\tsetHasCurrentBrazeUser();\n\t\tappboy.changeUser(dependenciesResult.data.brazeUuid as string);\n\t\tappboy.openSession();\n\n\t\treturn brazeMessages;\n\t} catch {\n\t\treturn new NullBrazeMessages();\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/braze/checkBrazeDependencies.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[948,951],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[948,951],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { checkBrazeDependencies } from './checkBrazeDependencies';\n\nlet mockBrazeUuid: string | null;\njest.mock('../getBrazeUuid', () => ({\n\tgetBrazeUuid: () => {\n\t\treturn Promise.resolve(mockBrazeUuid);\n\t},\n}));\n\nlet mockConsentsPromise: Promise<boolean>;\njest.mock('./hasRequiredConsents', () => ({\n\thasRequiredConsents: () => {\n\t\treturn mockConsentsPromise;\n\t},\n}));\n\ndescribe('checkBrazeDependecies', () => {\n\tlet windowSpy: jest.SpyInstance;\n\n\tbeforeEach(() => {\n\t\twindowSpy = jest.spyOn(window, 'window', 'get');\n\t});\n\n\tafterEach(() => {\n\t\twindowSpy.mockRestore();\n\n\t\t// Wait for any unsettled promises to complete at the end of each test. Once\n\t\t// we encounter a failure in our list of checks we don't need to wait on\n\t\t// subsequent operations to complete which is why there might be unsettled\n\t\t// promises.\n\t\tconst flushPromises = new Promise(setImmediate);\n\t\treturn flushPromises;\n\t});\n\n\tconst setWindow = (windowData: { [key: string]: any }) =>\n\t\twindowSpy.mockImplementation(() => windowData);\n\n\tit('succeeds if all dependencies are fulfilled', async () => {\n\t\tsetWindow({\n\t\t\tguardian: {\n\t\t\t\tconfig: {\n\t\t\t\t\tswitches: {\n\t\t\t\t\t\tbrazeSwitch: true,\n\t\t\t\t\t},\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tbrazeApiKey: 'fake-api-key',\n\t\t\t\t\t\tisPaidContent: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tmockBrazeUuid = 'fake-uuid';\n\t\tmockConsentsPromise = Promise.resolve(true);\n\n\t\tconst isSignedIn = true;\n\t\tconst idApiUrl = 'https://idapi.example.com';\n\t\tconst got = await checkBrazeDependencies(isSignedIn, idApiUrl);\n\n\t\texpect(got.isSuccessful).toEqual(true);\n\t\texpect(got.data).toEqual({\n\t\t\tbrazeSwitch: true,\n\t\t\tapiKey: 'fake-api-key',\n\t\t\tconsent: true,\n\t\t\tisNotPaidContent: true,\n\t\t\tbrazeUuid: 'fake-uuid',\n\t\t});\n\t});\n\n\tit('fails if the switch is disabled', async () => {\n\t\tsetWindow({\n\t\t\tguardian: {\n\t\t\t\tconfig: {\n\t\t\t\t\tswitches: {\n\t\t\t\t\t\tbrazeSwitch: false,\n\t\t\t\t\t},\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tbrazeApiKey: 'fake-api-key',\n\t\t\t\t\t\tisPaidContent: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tmockBrazeUuid = 'fake-uuid';\n\t\tmockConsentsPromise = Promise.resolve(true);\n\n\t\tconst isSignedIn = true;\n\t\tconst idApiUrl = 'https://idapi.example.com';\n\t\tconst got = await checkBrazeDependencies(isSignedIn, idApiUrl);\n\n\t\texpect(got.isSuccessful).toEqual(false);\n\t\texpect(got.data).toEqual({});\n\t\t// Condition to keep TypeScript happy\n\t\tif (!got.isSuccessful) {\n\t\t\texpect(got.failure.field).toEqual('brazeSwitch');\n\t\t\texpect(got.failure.data).toEqual(false);\n\t\t}\n\t});\n\n\tit('fails if the api key is not set', async () => {\n\t\tsetWindow({\n\t\t\tguardian: {\n\t\t\t\tconfig: {\n\t\t\t\t\tswitches: {\n\t\t\t\t\t\tbrazeSwitch: true,\n\t\t\t\t\t},\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tbrazeApiKey: null,\n\t\t\t\t\t\tisPaidContent: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tmockBrazeUuid = 'fake-uuid';\n\t\tmockConsentsPromise = Promise.resolve(true);\n\n\t\tconst isSignedIn = true;\n\t\tconst idApiUrl = 'https://idapi.example.com';\n\t\tconst got = await checkBrazeDependencies(isSignedIn, idApiUrl);\n\n\t\texpect(got.isSuccessful).toEqual(false);\n\t\texpect(got.data).toEqual({\n\t\t\tbrazeSwitch: true,\n\t\t});\n\t\t// Condition to keep TypeScript happy\n\t\tif (!got.isSuccessful) {\n\t\t\texpect(got.failure.field).toEqual('apiKey');\n\t\t\texpect(got.failure.data).toEqual(null);\n\t\t}\n\t});\n\n\tit('fails if the brazeUuid is not available', async () => {\n\t\tsetWindow({\n\t\t\tguardian: {\n\t\t\t\tconfig: {\n\t\t\t\t\tswitches: {\n\t\t\t\t\t\tbrazeSwitch: true,\n\t\t\t\t\t},\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tbrazeApiKey: 'fake-api-key',\n\t\t\t\t\t\tisPaidContent: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tmockBrazeUuid = null;\n\t\tmockConsentsPromise = Promise.resolve(true);\n\n\t\tconst isSignedIn = true;\n\t\tconst idApiUrl = 'https://idapi.example.com';\n\t\tconst got = await checkBrazeDependencies(isSignedIn, idApiUrl);\n\n\t\texpect(got.isSuccessful).toEqual(false);\n\t\texpect(got.data).toEqual({\n\t\t\tbrazeSwitch: true,\n\t\t\tapiKey: 'fake-api-key',\n\t\t});\n\t\t// Condition to keep TypeScript happy\n\t\tif (!got.isSuccessful) {\n\t\t\texpect(got.failure.field).toEqual('brazeUuid');\n\t\t\texpect(got.failure.data).toEqual(null);\n\t\t}\n\t});\n\n\tit('fails when the user is not signed in', async () => {\n\t\tsetWindow({\n\t\t\tguardian: {\n\t\t\t\tconfig: {\n\t\t\t\t\tswitches: {\n\t\t\t\t\t\tbrazeSwitch: true,\n\t\t\t\t\t},\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tbrazeApiKey: 'fake-api-key',\n\t\t\t\t\t\tisPaidContent: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tmockConsentsPromise = Promise.resolve(true);\n\n\t\tconst isSignedIn = false;\n\t\tconst idApiUrl = 'https://idapi.example.com';\n\t\tconst got = await checkBrazeDependencies(isSignedIn, idApiUrl);\n\n\t\texpect(got.isSuccessful).toEqual(false);\n\t\texpect(got.data).toEqual({\n\t\t\tbrazeSwitch: true,\n\t\t\tapiKey: 'fake-api-key',\n\t\t});\n\t\t// Condition to keep TypeScript happy\n\t\tif (!got.isSuccessful) {\n\t\t\texpect(got.failure.field).toEqual('brazeUuid');\n\t\t\texpect(got.failure.data).toEqual(null);\n\t\t}\n\t});\n\n\tit('fails if the required consents are not given', async () => {\n\t\tsetWindow({\n\t\t\tguardian: {\n\t\t\t\tconfig: {\n\t\t\t\t\tswitches: {\n\t\t\t\t\t\tbrazeSwitch: true,\n\t\t\t\t\t},\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tbrazeApiKey: 'fake-api-key',\n\t\t\t\t\t\tisPaidContent: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tmockBrazeUuid = 'fake-uuid';\n\t\tmockConsentsPromise = Promise.resolve(false);\n\n\t\tconst isSignedIn = true;\n\t\tconst idApiUrl = 'https://idapi.example.com';\n\t\tconst got = await checkBrazeDependencies(isSignedIn, idApiUrl);\n\n\t\texpect(got.isSuccessful).toEqual(false);\n\t\texpect(got.data).toEqual({\n\t\t\tbrazeSwitch: true,\n\t\t\tbrazeUuid: 'fake-uuid',\n\t\t\tapiKey: 'fake-api-key',\n\t\t});\n\t\t// Condition to keep TypeScript happy\n\t\tif (!got.isSuccessful) {\n\t\t\texpect(got.failure.field).toEqual('consent');\n\t\t\texpect(got.failure.data).toEqual(false);\n\t\t}\n\t});\n\n\tit('fails if the page is a paid content page', async () => {\n\t\tsetWindow({\n\t\t\tguardian: {\n\t\t\t\tconfig: {\n\t\t\t\t\tswitches: {\n\t\t\t\t\t\tbrazeSwitch: true,\n\t\t\t\t\t},\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tbrazeApiKey: 'fake-api-key',\n\t\t\t\t\t\tisPaidContent: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tmockBrazeUuid = 'fake-uuid';\n\t\tmockConsentsPromise = Promise.resolve(true);\n\n\t\tconst isSignedIn = true;\n\t\tconst idApiUrl = 'https://idapi.example.com';\n\t\tconst got = await checkBrazeDependencies(isSignedIn, idApiUrl);\n\n\t\texpect(got.isSuccessful).toEqual(false);\n\t\texpect(got.data).toEqual({\n\t\t\tbrazeSwitch: true,\n\t\t\tapiKey: 'fake-api-key',\n\t\t\tconsent: true,\n\t\t\tbrazeUuid: 'fake-uuid',\n\t\t});\n\t\t// Condition to keep TypeScript happy\n\t\tif (!got.isSuccessful) {\n\t\t\texpect(got.failure.field).toEqual('isNotPaidContent');\n\t\t\texpect(got.failure.data).toEqual(false);\n\t\t}\n\t});\n\n\tit('fails if any underlying async operation fails', async () => {\n\t\tsetWindow({\n\t\t\tguardian: {\n\t\t\t\tconfig: {\n\t\t\t\t\tswitches: {\n\t\t\t\t\t\tbrazeSwitch: true,\n\t\t\t\t\t},\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tbrazeApiKey: 'fake-api-key',\n\t\t\t\t\t\tisPaidContent: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tmockBrazeUuid = 'fake-uuid';\n\t\tmockConsentsPromise = Promise.reject(new Error('something went wrong'));\n\n\t\tconst isSignedIn = true;\n\t\tconst idApiUrl = 'https://idapi.example.com';\n\t\tconst got = await checkBrazeDependencies(isSignedIn, idApiUrl);\n\n\t\texpect(got.isSuccessful).toEqual(false);\n\t\texpect(got.data).toEqual({\n\t\t\tbrazeSwitch: true,\n\t\t\tbrazeUuid: 'fake-uuid',\n\t\t\tapiKey: 'fake-api-key',\n\t\t});\n\t\t// Condition to keep TypeScript happy\n\t\tif (!got.isSuccessful) {\n\t\t\texpect(got.failure.field).toEqual('consent');\n\t\t\texpect(got.failure.data).toEqual('something went wrong');\n\t\t}\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/braze/checkBrazeDependencies.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":13,"column":9,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":12,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[259,262],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[259,262],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":26,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[561,564],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[561,564],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":30,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":30,"endColumn":14},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":87,"column":5,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":87,"endColumn":10},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":87,"column":5,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":87,"endColumn":27,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1955,1977],"text":"error?.message"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getBrazeUuid } from '../getBrazeUuid';\nimport { hasRequiredConsents } from './hasRequiredConsents';\n\ntype SuccessResult = {\n\tisSuccessful: true;\n\tdata: ResultData;\n};\n\ntype FailureResult = {\n\tisSuccessful: false;\n\tfailure: {\n\t\tfield: string;\n\t\tdata: any;\n\t};\n\tdata: ResultData;\n};\n\ntype DependenciesResult = SuccessResult | FailureResult;\n\ntype ResultData = { [key: string]: string | boolean };\n\ntype DependencyResult = {\n\tname: string;\n\tvalue: Promise<string | boolean | null | undefined | void>;\n};\nconst buildFailureResponse = (name: string, value: any, data: ResultData) => ({\n\tisSuccessful: false,\n\tfailure: {\n\t\tfield: name,\n\t\tdata: value,\n\t},\n\tdata,\n});\n\nconst buildDependencies = (\n\tisSignedIn: boolean,\n\tidApiUrl: string,\n): DependencyResult[] => {\n\treturn [\n\t\t{\n\t\t\tname: 'brazeSwitch',\n\t\t\tvalue: Promise.resolve(window.guardian.config.switches.brazeSwitch),\n\t\t},\n\t\t{\n\t\t\tname: 'apiKey',\n\t\t\tvalue: Promise.resolve(window.guardian.config.page.brazeApiKey),\n\t\t},\n\t\t{\n\t\t\tname: 'brazeUuid',\n\t\t\tvalue: isSignedIn ? getBrazeUuid(idApiUrl) : Promise.resolve(null),\n\t\t},\n\t\t{\n\t\t\tname: 'consent',\n\t\t\tvalue: hasRequiredConsents(),\n\t\t},\n\t\t{\n\t\t\tname: 'isNotPaidContent',\n\t\t\tvalue: Promise.resolve(!window.guardian.config.page.isPaidContent),\n\t\t},\n\t];\n};\n\nconst checkBrazeDependencies = async (\n\tisSignedIn: boolean,\n\tidApiUrl: string,\n): Promise<DependenciesResult> => {\n\tconst dependencies = buildDependencies(isSignedIn, idApiUrl);\n\n\tconst data: ResultData = {};\n\n\t// I think we could possibly clean this up a bit when we can use\n\t// Promise.allSettled reliably (it's not available in our current Node\n\t// version and polyfill.io doesn't have a polyfill yet).\n\tfor (const { name, value } of dependencies) {\n\t\ttry {\n\t\t\tconst result = await value;\n\n\t\t\tif (result) {\n\t\t\t\tdata[name] = result;\n\t\t\t} else {\n\t\t\t\treturn buildFailureResponse(name, result, data);\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconst error = e as Error;\n\t\t\treturn buildFailureResponse(\n\t\t\t\tname,\n\t\t\t\terror && error.message ? error.message : error,\n\t\t\t\tdata,\n\t\t\t);\n\t\t}\n\t}\n\n\treturn {\n\t\tisSuccessful: true,\n\t\tdata,\n\t};\n};\n\nexport { checkBrazeDependencies };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/braze/forceBrazeMessage.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":4,"column":23,"nodeType":"Punctuator","messageId":"preferNullish","endLine":4,"endColumn":25,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[115,117],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":27,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":16},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":37,"column":11,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":39,"endColumn":6},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":42,"column":6,"nodeType":"Property","messageId":"anyAssignment","endLine":42,"endColumn":19},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":50,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":50,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const FORCE_BRAZE_ALLOWLIST = [\n\t'preview.gutools.co.uk',\n\t'preview.code.dev-gutools.co.uk',\n\tprocess.env.HOSTNAME || 'localhost',\n\t'm.thegulocal.com',\n];\n\ntype Meta = {\n\tdataFromBraze: {\n\t\t[key: string]: string;\n\t};\n\tlogImpressionWithBraze: () => void;\n\tlogButtonClickWithBraze: (id: number) => void;\n};\n\nexport const getBrazeMetaFromUrlFragment = (): Meta | null => {\n\tif (window.location.hash) {\n\t\t// This is intended for use on development domains for preview purposes.\n\t\t// It won't run in PROD.\n\n\t\tconst key = 'force-braze-message';\n\n\t\tconst hashString = window.location.hash;\n\n\t\tif (hashString.includes(key)) {\n\t\t\tif (!FORCE_BRAZE_ALLOWLIST.includes(window.location.hostname)) {\n\t\t\t\tconsole.log(`${key} is not supported on this domain`);\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst forcedMessage = hashString.slice(\n\t\t\t\thashString.indexOf(`${key}=`) + key.length + 1,\n\t\t\t\thashString.length,\n\t\t\t);\n\n\t\t\ttry {\n\t\t\t\tconst dataFromBraze = JSON.parse(\n\t\t\t\t\tdecodeURIComponent(forcedMessage),\n\t\t\t\t);\n\n\t\t\t\treturn {\n\t\t\t\t\tdataFromBraze,\n\t\t\t\t\tlogImpressionWithBraze: () => {},\n\t\t\t\t\tlogButtonClickWithBraze: () => {},\n\t\t\t\t};\n\t\t\t} catch (e) {\n\t\t\t\tconst error = e as Error;\n\t\t\t\t// Parsing failed. Log a message and fall through.\n\n\t\t\t\tconsole.log(`There was an error with ${key}: `, error.message);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/braze/hasRequiredConsents.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[144,147],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[144,147],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[238,241],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[238,241],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-call","severity":1,"message":"Unsafe call of an `any` typed value.","line":8,"column":3,"nodeType":"Identifier","messageId":"unsafeCall","endLine":8,"endColumn":11},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":10,"column":0,"nodeType":null,"endLine":10,"endColumn":72},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":11,"column":2,"nodeType":"Property","messageId":"anyAssignment","endLine":12,"endColumn":17}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unsafe-member-access","severity":2,"message":"Unsafe member access .getConsentFor on an `any` value.","line":11,"column":17,"nodeType":"MemberExpression","messageId":"unsafeMemberExpression","endLine":12,"endColumn":17,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { hasRequiredConsents } from './hasRequiredConsents';\n\nconst brazeVendorId = '5ed8c49c4b8ce4571c7ad801';\n\nlet mockOnConsentChangeResult: any;\njest.mock('@guardian/consent-management-platform', () => ({\n\tonConsentChange: (callback: any) => {\n\t\tcallback(mockOnConsentChangeResult);\n\t},\n\t// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n\tgetConsentFor: jest.requireActual('@guardian/consent-management-platform')\n\t\t.getConsentFor,\n}));\n\nafterEach(() => {\n\tmockOnConsentChangeResult = undefined;\n});\n\ndescribe('hasRequiredConsents', () => {\n\tdescribe('when the user is covered by tcfv2 and consent is given', () => {\n\t\tit('returns a promise which resolves with true', async () => {\n\t\t\tmockOnConsentChangeResult = {\n\t\t\t\ttcfv2: {\n\t\t\t\t\tvendorConsents: {\n\t\t\t\t\t\t[brazeVendorId]: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t\tawait expect(hasRequiredConsents()).resolves.toBe(true);\n\t\t});\n\t});\n\n\tdescribe('when the user is covered by tcfv2 and consent is not given', () => {\n\t\tit('returns a promise which resolves with false', async () => {\n\t\t\tmockOnConsentChangeResult = {\n\t\t\t\ttcfv2: {\n\t\t\t\t\tvendorConsents: {\n\t\t\t\t\t\t[brazeVendorId]: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tawait expect(hasRequiredConsents()).resolves.toBe(false);\n\t\t});\n\t});\n\n\tdescribe('when the user is covered by ccpa and consent is given', () => {\n\t\tit('returns a promise which resolves with true', async () => {\n\t\t\tmockOnConsentChangeResult = {\n\t\t\t\tccpa: {\n\t\t\t\t\tdoNotSell: false,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tawait expect(hasRequiredConsents()).resolves.toBe(true);\n\t\t});\n\t});\n\n\tdescribe('when the user is covered by ccpa and consent is not given', () => {\n\t\tit('returns a promise which resolves with false', async () => {\n\t\t\tmockOnConsentChangeResult = {\n\t\t\t\tccpa: {\n\t\t\t\t\tdoNotSell: true,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tawait expect(hasRequiredConsents()).resolves.toBe(false);\n\t\t});\n\t});\n\n\tdescribe('when the user is covered by aus and consent is given', () => {\n\t\tit('returns a promise which resolves with true', async () => {\n\t\t\tmockOnConsentChangeResult = {\n\t\t\t\taus: {\n\t\t\t\t\tpersonalisedAdvertising: true,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tawait expect(hasRequiredConsents()).resolves.toBe(true);\n\t\t});\n\t});\n\n\tdescribe('when the user is covered by aus and consent is not given', () => {\n\t\tit('returns a promise which resolves with false', async () => {\n\t\t\tmockOnConsentChangeResult = {\n\t\t\t\taus: {\n\t\t\t\t\tpersonalisedAdvertising: false,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tawait expect(hasRequiredConsents()).resolves.toBe(false);\n\t\t});\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/braze/hasRequiredConsents.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/braze/initialiseAppboy.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, the types have no overlap.","line":28,"column":7,"nodeType":"BinaryExpression","messageId":"noOverlapBooleanExpression","endLine":28,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type appboy from '@braze/web-sdk-core';\nimport { log } from '@guardian/libs';\n\nconst SDK_OPTIONS: appboy.InitializationOptions = {\n\tenableLogging: true,\n\tnoCookies: true,\n\tbaseUrl: 'https://sdk.fra-01.braze.eu/api/v3',\n\tsessionTimeoutInSeconds: 1,\n\tminimumIntervalBetweenTriggerActionsInSeconds: 0,\n\tdevicePropertyAllowlist: [],\n};\n\nconst initialiseAppboy = async (apiKey: string): Promise<typeof appboy> => {\n\tconst importedAppboy = (await import(\n\t\t/* webpackChunkName: \"braze-web-sdk-core\" */ '@braze/web-sdk-core'\n\t)) as unknown as typeof appboy;\n\n\timportedAppboy.setLogger((message) => log('tx', message));\n\timportedAppboy.initialize(apiKey, SDK_OPTIONS);\n\n\treturn importedAppboy;\n};\n\nconst getInitialisedAppboy = (() => {\n\tlet cache: Promise<typeof appboy>;\n\n\treturn (apiKey: string): Promise<typeof appboy> => {\n\t\tif (cache === undefined) {\n\t\t\tcache = initialiseAppboy(apiKey);\n\t\t}\n\n\t\treturn cache;\n\t};\n})();\n\nexport { getInitialisedAppboy, SDK_OPTIONS };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/braze/types.ts","messages":[{"ruleId":"no-shadow","severity":1,"message":"'SlotNames' is already declared in the upper scope on line 1 column 6.","line":1,"column":6,"nodeType":"Identifier","messageId":"noShadow","endLine":1,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"enum SlotNames {\n\tBanner = 'Banner',\n\tEndOfArticle = 'EndOfArticle',\n}\n\ntype SlotName = keyof typeof SlotNames;\n\nexport { SlotNames, SlotName };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/center.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/contributions.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":30,"column":8,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":30,"endColumn":65},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":31,"column":2,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":34,"endColumn":4}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { setCookie } from '@guardian/libs';\nimport {\n\tgetLastOneOffContributionTimestamp,\n\tisRecentOneOffContributor,\n\tlazyFetchEmailWithTimeout,\n\tONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\tSUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n} from './contributions';\nimport { getIdApiUserData } from './getIdapiUserData';\n\nconst clearAllCookies = () => {\n\tconst cookies = document.cookie.split(';');\n\n\tfor (let i = 0; i < cookies.length; i++) {\n\t\tconst cookie = cookies[i];\n\t\tconst eqPos = cookie.indexOf('=');\n\t\tconst name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n\t\tdocument.cookie = `${name}=;expires=Thu, 01 Jan 1970 00:00:00 GMT`;\n\t}\n};\n\nconst userResponse = {\n\tstatus: 'ok',\n\tuser: {\n\t\tprimaryEmailAddress: 'test@guardian.co.uk',\n\t},\n};\n\njest.mock('./getIdapiUserData', () => {\n\tconst originalModule = jest.requireActual('./getIdapiUserData');\n\treturn {\n\t\t...originalModule,\n\t\tgetIdApiUserData: jest.fn(() => Promise.resolve(userResponse)),\n\t};\n});\n\ndescribe('getLastOneOffContributionDate', () => {\n\tbeforeEach(clearAllCookies);\n\n\tit('returns date from attributes cookie if only cookie found', () => {\n\t\tconst somePastDate = '2020-01-28';\n\t\tsetCookie({\n\t\t\tname: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\t\t\tvalue: somePastDate,\n\t\t});\n\t\tconst lastOneOffContributionDate = getLastOneOffContributionTimestamp();\n\n\t\t// Our function will convert YYYY-MM-DD into a timestamp\n\t\tconst somePastDateToTimestamp = Date.parse(somePastDate);\n\t\texpect(lastOneOffContributionDate).toBe(somePastDateToTimestamp);\n\t});\n\n\tit('returns a support cookie date if only cookie found', () => {\n\t\tconst somePastDate = 1582567969093;\n\t\tsetCookie({\n\t\t\tname: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n\t\t\tvalue: String(somePastDate),\n\t\t});\n\t\tconst lastOneOffContributionDate = getLastOneOffContributionTimestamp();\n\t\texpect(lastOneOffContributionDate).toBe(somePastDate);\n\t});\n\n\tit('returns the most recent date if both cookies present', () => {\n\t\tconst muchLongerAgo = '2020-01-28';\n\t\tsetCookie({\n\t\t\tname: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\t\t\tvalue: muchLongerAgo,\n\t\t});\n\n\t\tconst notSoLongAgo = 1582567969093;\n\t\tsetCookie({\n\t\t\tname: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n\t\t\tvalue: String(notSoLongAgo),\n\t\t});\n\n\t\tconst lastOneOffContributionDate = getLastOneOffContributionTimestamp();\n\t\texpect(lastOneOffContributionDate).toBe(notSoLongAgo);\n\t});\n\n\tit('returns an empty string if no dates can be parsed correctly', () => {\n\t\tsetCookie({\n\t\t\tname: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\t\t\tvalue: 'CANT_TOUCH_THIS',\n\t\t});\n\t\tsetCookie({\n\t\t\tname: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n\t\t\tvalue: 'OR_THIS',\n\t\t});\n\n\t\tconst lastOneOffContributionDate = getLastOneOffContributionTimestamp();\n\t\texpect(lastOneOffContributionDate).toBeUndefined();\n\t});\n\n\tit('returns an empty string if no one-off contribution found', () => {\n\t\tconst lastOneOffContributionDate = getLastOneOffContributionTimestamp();\n\t\texpect(lastOneOffContributionDate).toBeUndefined();\n\t});\n});\n\ndescribe('isRecentOneOffContributor', () => {\n\tbeforeEach(clearAllCookies);\n\n\tit('returns false if there is no one-off contribution cookie', () => {\n\t\texpect(isRecentOneOffContributor()).toBe(false);\n\t});\n\n\tit('returns true if there are 5 days between the last contribution date and now', () => {\n\t\tsetCookie({\n\t\t\tname: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\t\t\tvalue: '2018-08-01',\n\t\t});\n\t\tglobal.Date.now = jest.fn(() => Date.parse('2018-08-07T10:50:34'));\n\t\texpect(isRecentOneOffContributor()).toBe(true);\n\t});\n\n\tit('returns true if there are 0 days between the last contribution date and now', () => {\n\t\tsetCookie({\n\t\t\tname: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\t\t\tvalue: '2018-08-01',\n\t\t});\n\t\tglobal.Date.now = jest.fn(() => Date.parse('2018-08-01T13:00:30'));\n\t\texpect(isRecentOneOffContributor()).toBe(true);\n\t});\n\n\tit('returns false if the one-off contribution was more than 3 months ago', () => {\n\t\tsetCookie({\n\t\t\tname: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\t\t\tvalue: '2018-08-01',\n\t\t});\n\t\tglobal.Date.now = jest.fn(() => Date.parse('2019-08-01T13:00:30'));\n\t\texpect(isRecentOneOffContributor()).toBe(false);\n\t});\n});\n\ndescribe('lazyFetchEmailWithTimeout', () => {\n\tit('returns a function to get the email address', async () => {\n\t\tconst fetchEmail = lazyFetchEmailWithTimeout('https://idapi-url.com');\n\t\texpect(getIdApiUserData).not.toHaveBeenCalled();\n\n\t\tconst result = await fetchEmail();\n\t\texpect(result).toBe(userResponse.user.primaryEmailAddress);\n\t\texpect(getIdApiUserData).toHaveBeenCalledWith('https://idapi-url.com');\n\t});\n});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/contributions.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":130,"column":42,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":130,"endColumn":47},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":223,"column":47,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":223,"endColumn":52},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":233,"column":0,"nodeType":null,"endLine":233,"endColumn":71}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":234,"column":4,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":240,"endColumn":7,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[8348,8468],"text":"void getEmail(idapiUrl).then((email) => {\n\t\t\t\tif (email) {\n\t\t\t\t\tresolve(email);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(null);\n\t\t\t\t}\n\t\t\t});"},"desc":"Add void operator to ignore."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { onConsentChange } from '@guardian/consent-management-platform';\nimport { getCookie } from '@guardian/libs';\nimport type { IdApiUserData } from './getIdapiUserData';\nimport { getIdApiUserData } from './getIdapiUserData';\n\n// User Atributes API cookies (dropped on sign-in)\nexport const HIDE_SUPPORT_MESSAGING_COOKIE = 'gu_hide_support_messaging';\nexport const RECURRING_CONTRIBUTOR_COOKIE = 'gu_recurring_contributor';\nexport const ONE_OFF_CONTRIBUTION_DATE_COOKIE = 'gu_one_off_contribution_date';\nexport const OPT_OUT_OF_ARTICLE_COUNT_COOKIE = 'gu_article_count_opt_out';\n\n// Support Frontend cookies (dropped when contribution is made)\nexport const SUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE =\n\t'gu.contributions.recurring.contrib-timestamp.Monthly';\nexport const SUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE =\n\t'gu.contributions.recurring.contrib-timestamp.Annual';\nexport const SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE =\n\t'gu.contributions.contrib-timestamp';\n\n//  Local storage keys\nconst DAILY_ARTICLE_COUNT_KEY = 'gu.history.dailyArticleCount';\nconst WEEKLY_ARTICLE_COUNT_KEY = 'gu.history.weeklyArticleCount';\nexport const NO_RR_BANNER_TIMESTAMP_KEY = 'gu.noRRBannerTimestamp'; // timestamp of when we were last told not to show a RR banner\n\n// See https://github.com/guardian/support-dotcom-components/blob/main/module-versions.md\nexport const MODULES_VERSION = 'v3';\n\n// Cookie set by the User Attributes API upon signing in.\n// Value computed server-side and looks at all of the user's active products,\n// including but not limited to recurring & one-off contributions,\n// paper & digital subscriptions, as well as user tiers (GU supporters/staff/partners/patrons).\n// https://github.com/guardian/members-data-api/blob/3a72dc00b9389968d91e5930686aaf34d8040c52/membership-attribute-service/app/models/Attributes.scala\nconst shouldShowSupportMessaging = (): boolean => {\n\tconst hideSupportMessaging =\n\t\tgetCookie({ name: HIDE_SUPPORT_MESSAGING_COOKIE }) === 'true';\n\n\treturn !hideSupportMessaging;\n};\n\n// Determine if user is a recurring contributor by checking if they are signed in\n// AND have at least one of the relevant cookies.\n// We need to look at both User Attributes and Frontend Support cookies\n// as the former might not reflect the latest contributor status, since it's set upon signing in.\n// Frontend Support cookies are set when a contribution is made.\nexport const isRecurringContributor = (isSignedIn: boolean): boolean => {\n\t// Attributes cookie - we want this to have a specific value\n\tconst isRecurringContributorFromAttrs =\n\t\tgetCookie({ name: RECURRING_CONTRIBUTOR_COOKIE }) === 'true';\n\n\t// Support cookies - we only care whether these exist\n\tconst hasMonthlyContributionCookie =\n\t\tgetCookie({\n\t\t\tname: SUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE,\n\t\t\tshouldMemoize: true,\n\t\t}) !== null;\n\tconst hasAnnualContributionCookie =\n\t\tgetCookie({\n\t\t\tname: SUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE,\n\t\t\tshouldMemoize: true,\n\t\t}) !== null;\n\n\treturn (\n\t\tisSignedIn &&\n\t\t(isRecurringContributorFromAttrs ||\n\t\t\thasMonthlyContributionCookie ||\n\t\t\thasAnnualContributionCookie)\n\t);\n};\n\n// looks at attribute and support cookies\n// ONE_OFF_CONTRIBUTION_DATE_COOKIE (attributes cookie, when loggin in)\n// SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE (support cookie, when making one-off contribution)\n// Get the date of the latest one-off contribution by looking at the two relevant cookies\n// and returning a Unix epoch string of the latest date found.\nexport const getLastOneOffContributionTimestamp = (): number | undefined => {\n\t// Attributes cookie - expects YYYY-MM-DD\n\tconst contributionDateFromAttributes = getCookie({\n\t\tname: ONE_OFF_CONTRIBUTION_DATE_COOKIE,\n\t});\n\n\t// Support cookies - expects Unix epoch\n\tconst contributionDateFromSupport = getCookie({\n\t\tname: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n\t});\n\n\tif (!contributionDateFromAttributes && !contributionDateFromSupport) {\n\t\treturn undefined;\n\t}\n\n\t// Parse dates into common format so they can be compared\n\tconst parsedDateFromAttributes = contributionDateFromAttributes\n\t\t? Date.parse(contributionDateFromAttributes)\n\t\t: 0;\n\tconst parsedDateFromSupport = contributionDateFromSupport\n\t\t? parseInt(contributionDateFromSupport, 10)\n\t\t: 0;\n\n\t// Return most recent date\n\t// Condition only passed if 'parsedDateFromAttributes' is NOT NaN\n\tif (parsedDateFromAttributes > parsedDateFromSupport) {\n\t\treturn parsedDateFromAttributes;\n\t}\n\n\treturn parsedDateFromSupport || undefined; // This guards against 'parsedDateFromSupport' being NaN\n};\n\nexport const getLastOneOffContributionDate = (): string | undefined => {\n\tconst timestamp = getLastOneOffContributionTimestamp();\n\n\tif (timestamp === undefined) {\n\t\treturn undefined;\n\t}\n\n\tconst date = new Date(timestamp);\n\tconst year = date.getFullYear();\n\tconst month = (date.getMonth() + 1).toString().padStart(2, '0');\n\tconst day = date.getDate().toString().padStart(2, '0');\n\n\treturn `${year}-${month}-${day}`;\n};\n\nconst dateDiffDays = (from: number, to: number): number => {\n\tconst oneDayMs = 1000 * 60 * 60 * 24;\n\tconst diffMs = to - from;\n\treturn Math.floor(diffMs / oneDayMs);\n};\n\nconst AskPauseDays = 90;\n\nexport const isRecentOneOffContributor = () => {\n\tconst lastContributionDate = getLastOneOffContributionTimestamp();\n\tif (lastContributionDate) {\n\t\tconst now = Date.now();\n\t\treturn dateDiffDays(lastContributionDate, now) <= AskPauseDays;\n\t}\n\n\treturn false;\n};\n\nexport const shouldHideSupportMessaging = (isSignedIn = false): boolean =>\n\t!shouldShowSupportMessaging() ||\n\tisRecurringContributor(isSignedIn) ||\n\tisRecentOneOffContributor();\n\nexport const REQUIRED_CONSENTS_FOR_ARTICLE_COUNT = [1, 3, 7];\nconst REQUIRED_CONSENTS_FOR_BROWSER_ID = [1, 3, 5, 7];\n\nexport const hasArticleCountOptOutCookie = (): boolean =>\n\tgetCookie({ name: OPT_OUT_OF_ARTICLE_COUNT_COOKIE }) !== null;\n\nconst removeArticleCountsFromLocalStorage = () => {\n\twindow.localStorage.removeItem(DAILY_ARTICLE_COUNT_KEY);\n\twindow.localStorage.removeItem(WEEKLY_ARTICLE_COUNT_KEY);\n};\n\nexport const hasCmpConsentForArticleCount = (): Promise<boolean> => {\n\treturn new Promise((resolve) => {\n\t\tif (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n\t\t\tresolve(true);\n\t\t}\n\t\tonConsentChange(({ ccpa, tcfv2, aus }) => {\n\t\t\tif (ccpa || aus) {\n\t\t\t\tresolve(true);\n\t\t\t} else if (tcfv2) {\n\t\t\t\tconst hasRequiredConsents =\n\t\t\t\t\tREQUIRED_CONSENTS_FOR_ARTICLE_COUNT.every(\n\t\t\t\t\t\t(consent) => tcfv2.consents[consent],\n\t\t\t\t\t);\n\n\t\t\t\tif (!hasRequiredConsents) {\n\t\t\t\t\tremoveArticleCountsFromLocalStorage();\n\t\t\t\t}\n\t\t\t\tresolve(hasRequiredConsents);\n\t\t\t}\n\t\t});\n\t});\n};\n\nexport const hasOptedOutOfArticleCount = async (): Promise<boolean> => {\n\tconst hasCmpConsent = await hasCmpConsentForArticleCount();\n\treturn !hasCmpConsent || hasArticleCountOptOutCookie();\n};\n\nexport const hasCmpConsentForBrowserId = (): Promise<boolean> =>\n\tnew Promise((resolve) => {\n\t\tif (getCookie({ name: 'gu-cmp-disabled', shouldMemoize: true })) {\n\t\t\tresolve(true);\n\t\t}\n\t\tonConsentChange(({ ccpa, tcfv2, aus }) => {\n\t\t\tif (ccpa || aus) {\n\t\t\t\tresolve(true);\n\t\t\t} else if (tcfv2) {\n\t\t\t\tconst hasRequiredConsents =\n\t\t\t\t\tREQUIRED_CONSENTS_FOR_BROWSER_ID.every(\n\t\t\t\t\t\t(consent) => tcfv2.consents[consent],\n\t\t\t\t\t);\n\t\t\t\tresolve(hasRequiredConsents);\n\t\t\t}\n\t\t});\n\t});\n\nconst twentyMins = 20 * 60000;\nexport const withinLocalNoBannerCachePeriod = (): boolean => {\n\tconst item = window.localStorage.getItem(NO_RR_BANNER_TIMESTAMP_KEY);\n\tif (item && !Number.isNaN(parseInt(item, 10))) {\n\t\tconst withinCachePeriod = parseInt(item, 10) + twentyMins > Date.now();\n\t\tif (!withinCachePeriod) {\n\t\t\t// Expired\n\t\t\twindow.localStorage.removeItem(NO_RR_BANNER_TIMESTAMP_KEY);\n\t\t}\n\t\treturn withinCachePeriod;\n\t}\n\treturn false;\n};\n\nexport const setLocalNoBannerCachePeriod = (): void =>\n\twindow.localStorage.setItem(NO_RR_BANNER_TIMESTAMP_KEY, `${Date.now()}`);\n\nconst getEmail = (ajaxUrl: string): Promise<string | undefined> => {\n\treturn getIdApiUserData(ajaxUrl)\n\t\t.then((data: IdApiUserData) => data.user?.primaryEmailAddress)\n\t\t.catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(error, 'getEmail');\n\t\t\treturn undefined;\n\t\t});\n};\n\nexport const lazyFetchEmailWithTimeout =\n\t(idapiUrl: string): (() => Promise<string | null>) =>\n\t() => {\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(() => resolve(null), 1000);\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\t\tgetEmail(idapiUrl).then((email) => {\n\t\t\t\tif (email) {\n\t\t\t\t\tresolve(email);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(null);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\nexport const getContributionsServiceUrl = (\n\tCAPIArticle: CAPIArticleType,\n): string => process.env.SDC_URL ?? CAPIArticle.contributionsServiceUrl;\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/dailyArticleCount.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/dailyArticleCount.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":24,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":24,"endColumn":74},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":27,"column":8,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":27,"endColumn":13},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":43,"column":51,"nodeType":"Punctuator","messageId":"preferNullish","endLine":43,"endColumn":53,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1260,1262],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":50,"column":3,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":51,"endColumn":27,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[1408,1458],"text":"dailyArticleCount[0]?.day"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface DailyArticle {\n\tday: number;\n\tcount: number;\n}\n\nexport type DailyArticleHistory = Array<DailyArticle>;\n\n// in localStorage, has format {\"value\":[{\"day\":18459,\"count\":1},{\"day\":18457,\"count\":1},{\"day\":18446,\"count\":1}]} to match frontend\ninterface DailyArticleCountLocalStorage {\n\tvalue: DailyArticleHistory;\n}\n\nexport const DailyArticleCountKey = 'gu.history.dailyArticleCount';\n\n// Returns undefined if no daily article count in local storage\nexport const getDailyArticleCount = (): DailyArticleHistory | undefined => {\n\tconst dailyCount = localStorage.getItem(DailyArticleCountKey);\n\n\tif (!dailyCount) {\n\t\treturn undefined;\n\t}\n\n\ttry {\n\t\tconst { value }: DailyArticleCountLocalStorage = JSON.parse(dailyCount);\n\n\t\t// check if value parsed correctly\n\t\tif (!value || !value.length) {\n\t\t\tthrow new Error('Invalid gu.history.dailyArticleCount value');\n\t\t}\n\n\t\treturn value;\n\t} catch (e) {\n\t\t// error parsing the string, so remove the key\n\t\tlocalStorage.removeItem(DailyArticleCountKey);\n\t\treturn undefined;\n\t}\n};\n\nexport const getToday = (): number => Math.floor(Date.now() / 86_400_000);\n\nexport const incrementDailyArticleCount = (): void => {\n\t// get the daily article count from local storage\n\tconst dailyArticleCount = getDailyArticleCount() || [];\n\n\t// calculate days since unix epoch for today date\n\tconst today = getToday();\n\n\t// check if latest day is today and increment if so\n\tif (\n\t\tdailyArticleCount[0] &&\n\t\tdailyArticleCount[0].day &&\n\t\tdailyArticleCount[0].day === today\n\t) {\n\t\tdailyArticleCount[0].count += 1;\n\t} else {\n\t\t// else set new day\n\t\tdailyArticleCount.unshift({ day: today, count: 1 });\n\n\t\t// remove any days older than 60\n\t\tconst cutOff = today - 60;\n\n\t\tconst firstOldDayIndex = dailyArticleCount.findIndex(\n\t\t\t(dailyCount) => dailyCount.day && dailyCount.day < cutOff,\n\t\t);\n\n\t\tif (firstOldDayIndex > 0) {\n\t\t\tdailyArticleCount.splice(firstOldDayIndex);\n\t\t}\n\t}\n\n\t// set the latest article count\n\tlocalStorage.setItem(\n\t\tDailyArticleCountKey,\n\t\tJSON.stringify({\n\t\t\tvalue: dailyArticleCount,\n\t\t} as DailyArticleCountLocalStorage),\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decideContainerOverrides.ts","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":1,"column":74,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":1,"endColumn":76},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":2,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":19,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":25,"column":72,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":25,"endColumn":74},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":26,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":43,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":50,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":50,"endColumn":13},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":51,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":68,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":71,"column":76,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":71,"endColumn":78},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":72,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":89,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":92,"column":74,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":92,"endColumn":76},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":93,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":110,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":115,"column":11,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":115,"endColumn":13},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":116,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":133,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":136,"column":72,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":136,"endColumn":74},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":137,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":154,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":157,"column":71,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":157,"endColumn":73},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":158,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":175,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":178,"column":77,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":178,"endColumn":79},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":179,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":196,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":199,"column":73,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":199,"endColumn":75},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":200,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":217,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":222,"column":77,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":222,"endColumn":79},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":223,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":240,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":243,"column":72,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":243,"endColumn":74},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":244,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":261,"endColumn":3}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":24,"fixableErrorCount":0,"fixableWarningCount":0,"source":"const textCardHeadline = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#121212';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'EventPalette':\n\t\t\treturn '#041F4A';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#041F4A';\n\t}\n};\n\nconst textCardStandfirst = textCardHeadline;\nconst textCardFooter = textCardHeadline;\n\nconst textCardKicker = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#ff9081';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#8b0000';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#c1d8fc';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#ff5943';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#ffe500';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#ffbac8';\n\t\tcase 'EventPalette':\n\t\t\treturn '#c70000';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#e2352d';\n\t}\n};\n\nconst textCardByline = textCardKicker;\n\nconst textCardCommentCount = (\n\tcontainerPalette: DCRContainerPalette,\n): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#DCDCDC';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#707070';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#dcdcdc';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#999999';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#dcdcdc';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#dcdcdc';\n\t\tcase 'EventPalette':\n\t\t\treturn '#707070';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#333333';\n\t}\n};\n\nconst textDynamoHeadline = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#052962';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#121212';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#121212';\n\t\tcase 'EventPalette':\n\t\t\treturn '#041F4A';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#041F4A';\n\t}\n};\n\nconst textDynamoKicker = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#c70000';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#8b0000';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#c1d8fc';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#ff5943';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#ffe500';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#8b0000';\n\t\tcase 'EventPalette':\n\t\t\treturn '#c70000';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#c70000';\n\t}\n};\n\nconst textDynamoSublinkKicker = (\n\tcontainerPalette: DCRContainerPalette,\n): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#ff9081';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#8b0000';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#c1d8fc';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#ff5943';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#ffe500';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#8b0000';\n\t\tcase 'EventPalette':\n\t\t\treturn '#c70000';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#c70000';\n\t}\n};\n\nconst textDynamoMeta = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#052962';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#dcdcdc';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#3f464a';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#222527';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#3f464a';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#8b0000';\n\t\tcase 'EventPalette':\n\t\t\treturn '#ededed';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#ededed';\n\t}\n};\n\nconst textContainer = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#052962';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#121212';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#121212';\n\t\tcase 'EventPalette':\n\t\t\treturn '#041F4A';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#041f4a';\n\t}\n};\n\nconst textContainerToggle = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#333333';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#333333';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#dcdcdc';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#dcdcdc';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#f6f6f6';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#707070';\n\t\tcase 'EventPalette':\n\t\t\treturn '#707070';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#707070';\n\t}\n};\n\nconst borderContainer = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn 'rgba(0,0,0, 0.2)';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn 'rgba(0,0,0, 0.2)';\n\t\tcase 'SombrePalette':\n\t\t\treturn 'rgba(255,255,255, 0.2)';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn 'rgba(255,255,255, 0.2)';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn 'rgba(255,255,255, 0.2)';\n\t\tcase 'BreakingPalette':\n\t\t\treturn 'rgba(0,0,0, 0.2)';\n\t\tcase 'EventPalette':\n\t\t\treturn 'rgba(0,0,0, 0.2)';\n\t\tcase 'EventAltPalette':\n\t\t\treturn 'rgba(0,0,0, 0.2)';\n\t}\n};\n\nconst borderLines = textCardHeadline;\n\nconst backgroundContainer = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#e4e5e8';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#f2f2f2';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#595c5f';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#3f464a';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#595c5f';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#ffffff';\n\t\tcase 'EventPalette':\n\t\t\treturn '#f1f8fc';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#fbf6ef';\n\t}\n};\n\nconst backgroundCard = (containerPalette: DCRContainerPalette): string => {\n\tswitch (containerPalette) {\n\t\tcase 'LongRunningPalette':\n\t\t\treturn '#052962';\n\t\tcase 'LongRunningAltPalette':\n\t\t\treturn '#dcdcdc';\n\t\tcase 'SombrePalette':\n\t\t\treturn '#3f464a';\n\t\tcase 'SombreAltPalette':\n\t\t\treturn '#222527';\n\t\tcase 'InvestigationPalette':\n\t\t\treturn '#3f464a';\n\t\tcase 'BreakingPalette':\n\t\t\treturn '#8b0000';\n\t\tcase 'EventPalette':\n\t\t\treturn '#ededed';\n\t\tcase 'EventAltPalette':\n\t\t\treturn '#efe8dd';\n\t}\n};\n\nconst topBarCard = textCardKicker;\n\n/**\n * When a container is given a special `containerPalette` then this function decides the override colours to be used\n * for it and its cards\n *\n * @see {@link https://github.com/guardian/interactive-atom-container-colours/blob/master/shared/css/_variables.scss Frontend code}\n * @param {DCRContainerPalette} containerPalette\n * @returns {ContainerOverrides} an object with the overrides set as properties\n */\nexport const decideContainerOverrides = (\n\tcontainerPalette: DCRContainerPalette,\n): ContainerOverrides => {\n\treturn {\n\t\ttext: {\n\t\t\tcardHeadline: textCardHeadline(containerPalette),\n\t\t\tcardStandfirst: textCardStandfirst(containerPalette),\n\t\t\tcardKicker: textCardKicker(containerPalette),\n\t\t\tcardByline: textCardByline(containerPalette),\n\t\t\tcardFooter: textCardFooter(containerPalette),\n\t\t\tcardCommentCount: textCardCommentCount(containerPalette),\n\t\t\tdynamoHeadline: textDynamoHeadline(containerPalette),\n\t\t\tdynamoKicker: textDynamoKicker(containerPalette),\n\t\t\tdynamoSublinkKicker: textDynamoSublinkKicker(containerPalette),\n\t\t\tdynamoMeta: textDynamoMeta(containerPalette),\n\t\t\tcontainer: textContainer(containerPalette),\n\t\t\tcontainerToggle: textContainerToggle(containerPalette),\n\t\t},\n\t\tborder: {\n\t\t\tcontainer: borderContainer(containerPalette),\n\t\t\tlines: borderLines(containerPalette),\n\t\t},\n\t\tbackground: {\n\t\t\tcontainer: backgroundContainer(containerPalette),\n\t\t\tcard: backgroundCard(containerPalette),\n\t\t},\n\t\ttopBar: {\n\t\t\tcard: topBarCard(containerPalette),\n\t\t},\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decideDesign.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decideDisplay.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decideFormat.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decideLogo.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decideNavTheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decidePalette.ts","messages":[{"ruleId":"import/order","severity":1,"message":"There should be no empty line between import groups","line":8,"column":1,"nodeType":"ImportDeclaration","endLine":22,"endColumn":39},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":167,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":182,"endColumn":4},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":254,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":269,"endColumn":4},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":301,"column":54,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":301,"endColumn":56},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":302,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":317,"endColumn":3},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":351,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":366,"endColumn":4},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":659,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":674,"endColumn":4},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":696,"column":62,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":696,"endColumn":64},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":699,"column":4,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":714,"endColumn":5},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":757,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":772,"endColumn":4},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":823,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":838,"endColumn":4},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":857,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":872,"endColumn":4},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":984,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":984,"endColumn":12},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":985,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":1000,"endColumn":4},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":1017,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":1017,"endColumn":12},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":1018,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":1033,"endColumn":4},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":1057,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":1057,"endColumn":12},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":1072,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":1072,"endColumn":12},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":1073,"column":3,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":1088,"endColumn":4},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":1094,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":1094,"endColumn":12},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":1187,"column":70,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":1187,"endColumn":72},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":1188,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":1203,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":1206,"column":59,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":1206,"endColumn":61},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":1207,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":1222,"endColumn":3},{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":1227,"column":65,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":1227,"endColumn":67},{"ruleId":"default-case","severity":1,"message":"Expected a default case.","line":1228,"column":2,"nodeType":"SwitchStatement","messageId":"missingDefaultCase","endLine":1243,"endColumn":3},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1270,"column":34,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1270,"endColumn":36,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[34291,34293],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1271,"column":43,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1271,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[34362,34364],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1272,"column":43,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1272,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[34431,34433],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1275,"column":36,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1275,"endColumn":38,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[34551,34553],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1276,"column":43,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1276,"endColumn":45,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[34624,34626],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1307,"column":37,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1307,"endColumn":39,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[35907,35909],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1354,"column":35,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1354,"endColumn":37,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[37954,37956],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":1362,"column":33,"nodeType":"Punctuator","messageId":"preferNullish","endLine":1362,"endColumn":35,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[38256,38258],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":34,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { ArticleFormat } from '@guardian/libs';\nimport {\n\tArticleDesign,\n\tArticleDisplay,\n\tArticlePillar,\n\tArticleSpecial,\n} from '@guardian/libs';\nimport {\n\tborder,\n\tbrand,\n\tbrandAlt,\n\tbrandAltBackground,\n\tculture,\n\tlabs,\n\tlifestyle,\n\tneutral,\n\tnews,\n\topinion,\n\tspecialReport,\n\tsport,\n\ttext,\n} from '@guardian/source-foundations';\n\n// Here is the one place where we use `pillarPalette`\nimport { pillarPalette_DO_NOT_USE as pillarPalette } from '../../lib/pillars';\nimport { decideContainerOverrides } from './decideContainerOverrides';\nimport { transparentColour } from './transparentColour';\n\nconst WHITE = neutral[100];\nconst BLACK = neutral[7];\n\nconst blogsGrayBackgroundPalette = (format: ArticleFormat): string => {\n\tswitch (format.theme) {\n\t\tcase ArticlePillar.News:\n\t\t\treturn pillarPalette[format.theme].main;\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].dark;\n\t}\n};\n\nconst textHeadline = (format: ArticleFormat): string => {\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\tif (format.theme === ArticleSpecial.SpecialReport) return WHITE;\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.PrintShop:\n\t\t\t\t\treturn BLACK;\n\t\t\t\tdefault:\n\t\t\t\t\treturn WHITE;\n\t\t\t}\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard: {\n\t\t\tif (\n\t\t\t\tformat.theme === ArticleSpecial.SpecialReport &&\n\t\t\t\tformat.design !== ArticleDesign.Interview\n\t\t\t)\n\t\t\t\treturn specialReport[100];\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Review:\n\t\t\t\tcase ArticleDesign.Recipe:\n\t\t\t\tcase ArticleDesign.Feature:\n\t\t\t\t\treturn pillarPalette[format.theme].dark;\n\t\t\t\tcase ArticleDesign.Interview:\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\t\treturn WHITE;\n\t\t\t\tdefault:\n\t\t\t\t\treturn BLACK;\n\t\t\t}\n\t\t}\n\t\tdefault:\n\t\t\treturn BLACK;\n\t}\n};\n\nconst textSeriesTitle = (format: ArticleFormat): string => {\n\tif (\n\t\tformat.theme === ArticleSpecial.Labs &&\n\t\tformat.design !== ArticleDesign.LiveBlog\n\t) {\n\t\treturn BLACK;\n\t}\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn WHITE;\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard:\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\t\tswitch (format.theme) {\n\t\t\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\t\t\treturn news[600];\n\t\t\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn WHITE;\n\t\t\t\t\t}\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\treturn blogsGrayBackgroundPalette(format);\n\t\t\t\tcase ArticleDesign.MatchReport:\n\t\t\t\t\treturn BLACK;\n\t\t\t\tdefault:\n\t\t\t\t\treturn pillarPalette[format.theme].main;\n\t\t\t}\n\t\tdefault:\n\t\t\treturn BLACK;\n\t}\n};\n\nconst textSeriesTitleWhenMatch = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.MatchReport:\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\treturn BLACK;\n\t\tdefault:\n\t\t\treturn textSeriesTitle(format);\n\t}\n};\n\nconst textSectionTitle = textSeriesTitle;\n\nconst textByline = (format: ArticleFormat): string => {\n\tif (\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog\n\t)\n\t\treturn blogsGrayBackgroundPalette(format);\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn WHITE;\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard:\n\t\t\tswitch (format.design) {\n\t\t\t\tcase ArticleDesign.Interview:\n\t\t\t\t\treturn BLACK;\n\t\t\t\tdefault:\n\t\t\t\t\treturn pillarPalette[format.theme].main;\n\t\t\t}\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].main;\n\t}\n};\n\nconst textHeadlineByline = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\treturn pillarPalette[format.theme].main;\n};\n\nconst textStandfirst = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) return WHITE;\n\treturn BLACK;\n};\n\nconst textLastUpdated = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[600];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[600];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[600];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[600];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[600];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn news[600];\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[700];\n\t\t}\n\t}\n\treturn BLACK;\n};\n\nconst textTwitterHandle = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\treturn text.supporting;\n};\n\nconst textTwitterHandleBelowDesktop = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) return WHITE;\n\n\treturn textTwitterHandle(format);\n};\n\nconst textCaption = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[100];\n\tif (format.theme === ArticleSpecial.Labs) return neutral[20];\n\n\tswitch (format.design) {\n\t\tcase ArticleDesign.PhotoEssay:\n\t\t\treturn pillarPalette[format.theme].dark;\n\t\tdefault:\n\t\t\treturn text.supporting;\n\t}\n};\n\nconst textCaptionLink = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\treturn pillarPalette[format.theme].main;\n};\n\nconst textSubMeta = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[100];\n\tif (\n\t\tformat.design === ArticleDesign.DeadBlog ||\n\t\tformat.design === ArticleDesign.LiveBlog\n\t)\n\t\treturn blogsGrayBackgroundPalette(format);\n\treturn pillarPalette[format.theme].main;\n};\n\nconst textSubMetaLabel = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\treturn text.supporting;\n};\n\nconst textSubMetaLink = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\treturn text.supporting;\n};\n\nconst textSyndicationButton = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[100];\n\treturn text.supporting;\n};\n\nconst textArticleLink = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.DeadBlog) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[400];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[350];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[400];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[400];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[300];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn BLACK;\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[300];\n\t\t}\n\t}\n\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport) {\n\t\treturn specialReport[300];\n\t}\n\tswitch (format.theme) {\n\t\tcase ArticlePillar.Opinion:\n\t\tcase ArticlePillar.Culture:\n\t\t\treturn pillarPalette[format.theme].dark;\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].main;\n\t}\n};\n\nconst textDisclaimerLink = (format: ArticleFormat): string =>\n\tpillarPalette[format.theme].dark;\n\nconst textWitnessIcon = (format: ArticleFormat): string =>\n\tpillarPalette[format.theme].main;\n\nconst textWitnessTitle = (format: ArticleFormat): string =>\n\tpillarPalette[format.theme].main;\n\nconst textWitnessAuthor = (format: ArticleFormat): string =>\n\tpillarPalette[format.theme].main;\n\nconst textPullQuote = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].dark;\n};\n\nconst textKeyEvent = (format: ArticleFormat): string => {\n\tswitch (format.theme) {\n\t\tcase ArticlePillar.News:\n\t\t\treturn news[300];\n\t\tcase ArticlePillar.Sport:\n\t\t\treturn sport[300];\n\t\tcase ArticlePillar.Lifestyle:\n\t\t\treturn lifestyle[300];\n\t\tcase ArticlePillar.Culture:\n\t\t\treturn culture[300];\n\t\tcase ArticlePillar.Opinion:\n\t\t\treturn opinion[300];\n\t\tcase ArticleSpecial.Labs:\n\t\t\treturn labs[300];\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn specialReport[300];\n\t}\n};\n\nconst textStandfirstLink = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) return WHITE;\n\tif (format.design === ArticleDesign.DeadBlog) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[200];\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[400];\n\t\t\tdefault:\n\t\t\t\treturn pillarPalette[format.theme].dark;\n\t\t}\n\t}\n\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[400];\n\tswitch (format.theme) {\n\t\tcase ArticlePillar.Opinion:\n\t\tcase ArticlePillar.Culture:\n\t\t\treturn pillarPalette[format.theme].dark;\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].main;\n\t}\n};\n\nconst textBranding = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\treturn pillarPalette[format.theme].main;\n};\n\nconst textArticleLinkHover = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.DeadBlog) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[400];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[350];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[400];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[400];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[300];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn BLACK;\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[100];\n\t\t}\n\t}\n\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[100];\n\tswitch (format.theme) {\n\t\tcase ArticlePillar.Opinion:\n\t\tcase ArticlePillar.Culture:\n\t\t\treturn pillarPalette[format.theme].dark;\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].main;\n\t}\n};\n\nconst textCardHeadline = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport) return WHITE;\n\tif (format.display === ArticleDisplay.Immersive) return BLACK;\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Feature:\n\t\tcase ArticleDesign.Interview:\n\t\t\treturn pillarPalette[format.theme].dark;\n\t\tcase ArticleDesign.Gallery:\n\t\tcase ArticleDesign.Audio:\n\t\tcase ArticleDesign.Video:\n\t\t\treturn WHITE;\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\t\treturn BLACK;\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\tdefault:\n\t\t\t\t\treturn WHITE;\n\t\t\t}\n\t\tdefault:\n\t\t\treturn BLACK;\n\t}\n};\n\nconst textCardStandfirst = textCardHeadline;\n\n/** same as textByline except for SpecialReport */\nconst textCardByline = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[700];\n\n\treturn textByline(format);\n};\n\nconst textCardKicker = (format: ArticleFormat): string => {\n\tif (\n\t\tformat.theme === ArticleSpecial.SpecialReport &&\n\t\t(format.design === ArticleDesign.Comment ||\n\t\t\tformat.design === ArticleDesign.Letter)\n\t)\n\t\treturn opinion[550];\n\tif (format.theme === ArticleSpecial.SpecialReport) return brandAlt[400];\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn news[600];\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn sport[600];\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn WHITE;\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\t\treturn culture[600];\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\t\treturn lifestyle[500];\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\tdefault:\n\t\t\t\t\treturn BLACK;\n\t\t\t}\n\t\tcase ArticleDesign.Gallery:\n\t\tcase ArticleDesign.Audio:\n\t\tcase ArticleDesign.Video:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn news[600];\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn sport[600];\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn opinion[550];\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\tdefault:\n\t\t\t\t\treturn pillarPalette[format.theme][500];\n\t\t\t}\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].main;\n\t}\n};\n\nconst textCardFooter = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Comment:\n\t\tcase ArticleDesign.Letter:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn opinion[550];\n\t\t\t\tdefault:\n\t\t\t\t\treturn neutral[46];\n\t\t\t}\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn news[600];\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn sport[600];\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn WHITE;\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\t\treturn culture[600];\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\t\treturn lifestyle[500];\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn brandAlt[400];\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\tdefault:\n\t\t\t\t\treturn BLACK;\n\t\t\t}\n\t\tcase ArticleDesign.Gallery:\n\t\tcase ArticleDesign.Audio:\n\t\tcase ArticleDesign.Video:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn brandAlt[400];\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn news[600];\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn sport[600];\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn opinion[550];\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\tdefault:\n\t\t\t\t\treturn pillarPalette[format.theme][500];\n\t\t\t}\n\t\tdefault:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn brandAltBackground.primary;\n\t\t\t\tdefault:\n\t\t\t\t\treturn neutral[46];\n\t\t\t}\n\t}\n};\n\nconst textLinkKicker = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].main;\n};\n\nconst textCricketScoreboardLink = (): string => {\n\treturn sport[300];\n};\n\nconst backgroundArticle = (format: ArticleFormat): string => {\n\t// specialreport blogs should have specialreport background\n\tif (\n\t\t(format.design === ArticleDesign.LiveBlog ||\n\t\t\tformat.design === ArticleDesign.DeadBlog) &&\n\t\tformat.theme !== ArticleSpecial.SpecialReport\n\t)\n\t\treturn neutral[97];\n\t// Order matters. We want comment special report pieces to have the opinion background\n\tif (format.design === ArticleDesign.Letter) return opinion[800];\n\tif (format.design === ArticleDesign.Comment) return opinion[800];\n\tif (format.design === ArticleDesign.Editorial) return opinion[800];\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[800]; // Note, check theme rather than design here\n\tif (\n\t\tformat.theme === ArticleSpecial.Labs &&\n\t\tformat.display !== ArticleDisplay.Immersive\n\t)\n\t\treturn neutral[97];\n\n\treturn 'transparent';\n};\n\nconst backgroundSeriesTitle = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn brandAltBackground.primary;\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn pillarPalette[format.theme].main;\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard:\n\t\tdefault:\n\t\t\treturn 'transparent';\n\t}\n};\n\nconst backgroundSectionTitle = (format: ArticleFormat): string => {\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\treturn pillarPalette[format.theme].main;\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard:\n\t\tdefault:\n\t\t\treturn 'transparent';\n\t}\n};\n\nconst backgroundAvatar = (format: ArticleFormat): string => {\n\tswitch (format.theme) {\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn specialReport[800];\n\t\tcase ArticlePillar.Opinion:\n\t\t\treturn pillarPalette[ArticlePillar.Opinion].main;\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].bright;\n\t}\n};\n\nconst backgroundCard = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Editorial:\n\t\tcase ArticleDesign.Letter:\n\t\tcase ArticleDesign.Comment:\n\t\t\treturn opinion[800];\n\t\tcase ArticleDesign.Gallery:\n\t\tcase ArticleDesign.Audio:\n\t\tcase ArticleDesign.Video:\n\t\t\treturn neutral[20];\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\t\treturn labs[400];\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\tdefault:\n\t\t\t\t\treturn pillarPalette[format.theme][300];\n\t\t\t}\n\t\tdefault:\n\t\t\treturn neutral[97];\n\t}\n};\n\nconst backgroundHeadline = (format: ArticleFormat): string => {\n\tswitch (format.display) {\n\t\tcase ArticleDisplay.Immersive:\n\t\t\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\t\t\treturn specialReport[300];\n\t\t\treturn BLACK;\n\t\tcase ArticleDisplay.Showcase:\n\t\tcase ArticleDisplay.NumberedList:\n\t\tcase ArticleDisplay.Standard:\n\t\t\tif (format.design === ArticleDesign.Interview) return BLACK;\n\t\t\treturn 'transparent';\n\t\tdefault:\n\t\t\treturn 'transparent';\n\t}\n};\n\nconst backgroundAgeWarning = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Interview:\n\t\t\treturn backgroundArticle(format);\n\t\tdefault:\n\t\t\treturn backgroundHeadline(format);\n\t}\n};\n\nconst backgroundHeadlineByline = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn brandAltBackground.primary;\n\treturn 'transparent';\n};\n\nconst backgroundBullet = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\treturn pillarPalette[format.theme].main;\n};\n\nconst backgroundBulletStandfirst = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.DeadBlog) {\n\t\treturn neutral[60];\n\t}\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[600];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[400];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[500];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[600];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[500];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn news[600];\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[700];\n\t\t}\n\t}\n\n\treturn neutral[86]; // default previously defined in Standfirst.tsx\n};\n\nconst backgroundHeader = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\t\treturn news[300];\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn specialReport[700];\n\t\t\t\tdefault:\n\t\t\t\t\treturn pillarPalette[format.theme][300];\n\t\t\t}\n\t\tdefault:\n\t\t\treturn backgroundArticle(format);\n\t}\n};\n\nconst backgroundStandfirst = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn news[200];\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\t\treturn culture[200];\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn sport[100];\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\t\treturn lifestyle[200];\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn opinion[200];\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\t\treturn news[200];\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn specialReport[300];\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ArticleDesign.DeadBlog:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn specialReport[700];\n\t\t\t\tdefault:\n\t\t\t\t\treturn neutral[93];\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn backgroundArticle(format);\n\t}\n};\n\nconst backgroundImageTitle = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].main;\n};\n\nconst backgroundSpeechBubble = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].main;\n};\n\nconst fillCommentCount = (format: ArticleFormat): string => {\n\tif (\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog\n\t)\n\t\treturn neutral[46];\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\treturn pillarPalette[format.theme].main;\n};\n\nconst fillCommentCountUntilDesktop = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) return WHITE;\n\n\treturn fillCommentCount(format);\n};\n\nconst fillShareIcon = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.DeadBlog) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[350];\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[400];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[400];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[400];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[300];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn BLACK;\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[300];\n\t\t}\n\t}\n\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\n\treturn pillarPalette[format.theme].main;\n};\n\nconst fillShareCountIcon = (): string => {\n\treturn neutral[46];\n};\n\nconst fillShareCountIconUntilDesktop = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) return WHITE;\n\treturn fillShareCountIcon();\n};\n\nconst fillShareIconGrayBackground = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog:\n\t\t\treturn blogsGrayBackgroundPalette(format);\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].dark;\n\t}\n};\n\nconst fillCaptionCamera = (format: ArticleFormat): string =>\n\ttextCaption(format);\n\nconst fillBlockquoteIcon = (format: ArticleFormat): string =>\n\tpillarPalette[format.theme].main;\n\nconst fillTwitterHandleBelowDesktop = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) return WHITE;\n\n\treturn neutral[46];\n};\nconst borderSyndicationButton = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return neutral[60];\n\treturn border.secondary;\n};\n\nconst borderSubNav = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].main;\n};\n\nconst borderLiveBlock = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.DeadBlog) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[400];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[350];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[400];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[400];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[300];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn labs[400];\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[400];\n\t\t}\n\t}\n\n\treturn pillarPalette[format.theme].main;\n};\n\nconst borderPinnedPost = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme][300];\n};\n\nconst borderArticleLink = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return neutral[60];\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[300];\n\treturn border.secondary;\n};\n\nconst borderStandfirstLink = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[600];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[400];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[500];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[600];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[500];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn news[600];\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[450];\n\t\t}\n\t}\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[400];\n\treturn border.secondary;\n};\n\nconst borderHeadline = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\treturn 'rgba(255,255,255, 0.2)';\n\t}\n\tif (format.design === ArticleDesign.DeadBlog) return '#CDCDCD';\n\treturn border.secondary;\n};\n\nconst borderStandfirst = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\treturn 'rgba(255,255,255, 0.2)';\n\t}\n\tif (format.design === ArticleDesign.DeadBlog) return '#BDBDBD';\n\treturn border.secondary;\n};\n\nconst matchTab = (): string => {\n\treturn border.secondary;\n};\n\nconst activeMatchTab = (): string => {\n\treturn sport[300];\n};\n\nconst borderCardSupporting = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Comment:\n\t\tcase ArticleDesign.Letter:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn opinion[550];\n\t\t\t\tdefault:\n\t\t\t\t\treturn neutral[46];\n\t\t\t}\n\t\tcase ArticleDesign.LiveBlog:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn news[600];\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn sport[600];\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn WHITE;\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\t\treturn culture[600];\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\t\treturn lifestyle[500];\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn brandAlt[400];\n\t\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\tdefault:\n\t\t\t\t\treturn BLACK;\n\t\t\t}\n\t\tcase ArticleDesign.Gallery:\n\t\tcase ArticleDesign.Audio:\n\t\tcase ArticleDesign.Video:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn brandAlt[400];\n\t\t\t\tcase ArticlePillar.News:\n\t\t\t\t\treturn news[600];\n\t\t\t\tcase ArticlePillar.Sport:\n\t\t\t\t\treturn sport[600];\n\t\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\t\treturn opinion[550];\n\t\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\tcase ArticlePillar.Culture:\n\t\t\t\tdefault:\n\t\t\t\t\treturn pillarPalette[format.theme][500];\n\t\t\t}\n\t\tdefault:\n\t\t\tswitch (format.theme) {\n\t\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\t\treturn brandAltBackground.primary;\n\t\t\t\tdefault:\n\t\t\t\t\treturn neutral[86];\n\t\t\t}\n\t}\n};\n\nconst backgroundMatchNav = (): string => {\n\treturn '#FFE500';\n};\n\nconst backgroundUnderline = (format: ArticleFormat): string =>\n\ttransparentColour(textCardKicker(format));\n\nconst borderArticleLinkHover = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[100];\n\treturn pillarPalette[format.theme].main;\n};\n\nconst topBarCard = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn brandAltBackground.primary;\n\treturn pillarPalette[format.theme].main;\n};\n\nconst hoverHeadlineByline = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return BLACK;\n\treturn pillarPalette[format.theme].dark;\n};\n\nconst textRichLink: (format: ArticleFormat) => string = (format) => {\n\tif (format) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[400];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[350];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[300];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[400];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[300];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn BLACK;\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[400];\n\t\t}\n\t}\n\treturn pillarPalette[ArticlePillar.News][400];\n};\n\nconst hoverStandfirstLink = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.DeadBlog)\n\t\treturn pillarPalette[format.theme].main;\n\tif (format.design === ArticleDesign.LiveBlog) {\n\t\treturn WHITE;\n\t}\n\tif (format.theme === ArticleSpecial.SpecialReport)\n\t\treturn specialReport[400];\n\treturn border.secondary;\n};\n\nconst borderRichLink: (format: ArticleFormat) => string = (format) => {\n\tif (format) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[400];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[350];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[300];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[400];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[300];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn labs[400];\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[400];\n\t\t}\n\t}\n\treturn pillarPalette[ArticlePillar.News][400];\n};\n\nconst borderNavPillar: (format: ArticleFormat) => string = (format) =>\n\tpillarPalette[format.theme].bright;\n\nconst borderArticle: (format: ArticleFormat) => string = (format) => {\n\tif (\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog\n\t)\n\t\treturn '#CDCDCD';\n\tif (format.theme === ArticleSpecial.Labs) return neutral[60];\n\treturn border.secondary;\n};\n\nconst borderLines = (format: ArticleFormat): string => {\n\tif (format.theme === ArticleSpecial.Labs) return border.primary;\n\treturn border.secondary;\n};\n\nconst backgroundRichLink: (format: ArticleFormat) => string = (format) => {\n\tif (format) {\n\t\treturn pillarPalette[format.theme].main;\n\t}\n\treturn pillarPalette[ArticlePillar.News][400];\n};\n\nconst borderCricketScoreboardTop = (): string => {\n\treturn sport[300];\n};\n\nconst borderCricketScoreboardDivider = (): string => {\n\treturn neutral[86];\n};\n\nconst fillRichLink: (format: ArticleFormat) => string = (format) => {\n\tif (format) {\n\t\tswitch (format.theme) {\n\t\t\tcase ArticlePillar.News:\n\t\t\t\treturn news[400];\n\t\t\tcase ArticlePillar.Culture:\n\t\t\t\treturn culture[350];\n\t\t\tcase ArticlePillar.Lifestyle:\n\t\t\t\treturn lifestyle[300];\n\t\t\tcase ArticlePillar.Sport:\n\t\t\t\treturn sport[400];\n\t\t\tcase ArticlePillar.Opinion:\n\t\t\t\treturn opinion[300];\n\t\t\tcase ArticleSpecial.Labs:\n\t\t\t\treturn labs[400];\n\t\t\tcase ArticleSpecial.SpecialReport:\n\t\t\t\treturn specialReport[400];\n\t\t}\n\t}\n\treturn pillarPalette[ArticlePillar.News][400];\n};\n\nconst fillQuoteIcon: (format: ArticleFormat) => string = (format) => {\n\tif (format) {\n\t\treturn pillarPalette[format.theme].main;\n\t}\n\treturn pillarPalette[ArticlePillar.News][400];\n};\n\nconst textPullQuoteAttribution = (format: ArticleFormat): string =>\n\tfillQuoteIcon(format);\n\nconst textSignInLink = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].dark;\n};\n\nconst textCarouselTitle = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].main;\n};\n\nconst textCalloutHeading = (): string => {\n\treturn brand[500];\n};\n\nconst textDropCap = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.Editorial:\n\t\tcase ArticleDesign.Letter:\n\t\tcase ArticleDesign.Comment:\n\t\t\treturn format.theme === ArticlePillar.Opinion\n\t\t\t\t? pillarPalette[format.theme].main\n\t\t\t\t: pillarPalette[format.theme].dark;\n\t\tdefault:\n\t\t\treturn pillarPalette[format.theme].dark;\n\t}\n};\n\nconst textBlockquote = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog:\n\t\t\treturn BLACK;\n\t\tdefault:\n\t\t\treturn neutral[46];\n\t}\n};\n\nconst textNumberedTitle = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].main;\n};\n\nconst textNumberedPosition = (): string => {\n\treturn text.supporting;\n};\n\nconst textOverlayed = (): string => {\n\treturn WHITE;\n};\n\nconst backgroundHeadlineTag = (format: ArticleFormat): string =>\n\tpillarPalette[format.theme].dark;\n\nconst backgroundCarouselDot = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme][400];\n};\n\nconst backgroundCarouselDotFocus = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].main;\n};\n\nconst backgroundMostViewedTab = (format: ArticleFormat): string => {\n\treturn pillarPalette[format.theme].dark;\n};\n\nconst textShareCount = (): string => {\n\treturn text.supporting;\n};\n\nconst textShareCountUntilDesktop = (format: ArticleFormat): string => {\n\tif (format.design === ArticleDesign.LiveBlog) return WHITE;\n\n\treturn text.supporting;\n};\n\nconst backgroundMatchStats = (format: ArticleFormat): string => {\n\tswitch (format.design) {\n\t\tcase ArticleDesign.LiveBlog:\n\t\tcase ArticleDesign.DeadBlog:\n\t\t\treturn neutral[97];\n\t\tdefault:\n\t\t\treturn '#d9edf6';\n\t}\n};\n\nconst backgroundKeyEventBullet = (): string => neutral[46];\n\nconst backgroundSummaryEventBullet = (format: ArticleFormat): string => {\n\tswitch (format.theme) {\n\t\tcase ArticlePillar.News:\n\t\t\treturn news[400];\n\t\tcase ArticlePillar.Sport:\n\t\t\treturn sport[400];\n\t\tcase ArticlePillar.Lifestyle:\n\t\t\treturn lifestyle[400];\n\t\tcase ArticlePillar.Culture:\n\t\t\treturn culture[400];\n\t\tcase ArticlePillar.Opinion:\n\t\t\treturn opinion[400];\n\t\tcase ArticleSpecial.Labs:\n\t\t\treturn labs[400];\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn specialReport[400];\n\t}\n};\n\nconst hoverKeyEventLink = (format: ArticleFormat): string => {\n\tswitch (format.theme) {\n\t\tcase ArticlePillar.News:\n\t\t\treturn news[400];\n\t\tcase ArticlePillar.Sport:\n\t\t\treturn sport[400];\n\t\tcase ArticlePillar.Lifestyle:\n\t\t\treturn lifestyle[400];\n\t\tcase ArticlePillar.Culture:\n\t\t\treturn culture[400];\n\t\tcase ArticlePillar.Opinion:\n\t\t\treturn opinion[400];\n\t\tcase ArticleSpecial.Labs:\n\t\t\treturn labs[400];\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn specialReport[400];\n\t}\n};\n\nconst hoverKeyEventBullet = (): string => neutral[0];\n\nconst hoverSummaryEventBullet = (format: ArticleFormat): string => {\n\tswitch (format.theme) {\n\t\tcase ArticlePillar.News:\n\t\t\treturn news[200];\n\t\tcase ArticlePillar.Sport:\n\t\t\treturn sport[200];\n\t\tcase ArticlePillar.Lifestyle:\n\t\t\treturn lifestyle[200];\n\t\tcase ArticlePillar.Culture:\n\t\t\treturn culture[200];\n\t\tcase ArticlePillar.Opinion:\n\t\t\treturn opinion[200];\n\t\tcase ArticleSpecial.Labs:\n\t\t\treturn labs[200];\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn specialReport[200];\n\t}\n};\n\nexport const decidePalette = (\n\tformat: ArticleFormat,\n\tcontainerPalette?: DCRContainerPalette,\n): Palette => {\n\tconst overrides =\n\t\tcontainerPalette && decideContainerOverrides(containerPalette);\n\treturn {\n\t\ttext: {\n\t\t\theadline: textHeadline(format),\n\t\t\tseriesTitle: textSeriesTitle(format),\n\t\t\tseriesTitleWhenMatch: textSeriesTitleWhenMatch(format),\n\t\t\tsectionTitle: textSectionTitle(format),\n\t\t\tbyline: textByline(format),\n\t\t\ttwitterHandle: textTwitterHandle(format),\n\t\t\ttwitterHandleBelowDesktop: textTwitterHandleBelowDesktop(format),\n\t\t\tcaption: textCaption(format),\n\t\t\tcaptionLink: textCaptionLink(format),\n\t\t\tsubMeta: textSubMeta(format),\n\t\t\tsubMetaLabel: textSubMetaLabel(format),\n\t\t\tsubMetaLink: textSubMetaLink(format),\n\t\t\tsyndicationButton: textSyndicationButton(format),\n\t\t\tarticleLink: textArticleLink(format),\n\t\t\tarticleLinkHover: textArticleLinkHover(format),\n\t\t\tcardHeadline:\n\t\t\t\toverrides?.text.cardHeadline || textCardHeadline(format),\n\t\t\tcardByline: overrides?.text.cardByline || textCardByline(format),\n\t\t\tcardKicker: overrides?.text.cardKicker || textCardKicker(format),\n\t\t\tlinkKicker: textLinkKicker(format),\n\t\t\tcardStandfirst:\n\t\t\t\toverrides?.text.cardStandfirst || textCardStandfirst(format),\n\t\t\tcardFooter: overrides?.text.cardFooter || textCardFooter(format),\n\t\t\theadlineByline: textHeadlineByline(format),\n\t\t\tstandfirst: textStandfirst(format),\n\t\t\tstandfirstLink: textStandfirstLink(format),\n\t\t\tlastUpdated: textLastUpdated(format),\n\t\t\tbranding: textBranding(format),\n\t\t\tdisclaimerLink: textDisclaimerLink(format),\n\t\t\tsignInLink: textSignInLink(format),\n\t\t\trichLink: textRichLink(format),\n\t\t\tpullQuote: textPullQuote(format),\n\t\t\tpullQuoteAttribution: textPullQuoteAttribution(format),\n\t\t\twitnessIcon: textWitnessIcon(format),\n\t\t\twitnessAuthor: textWitnessAuthor(format),\n\t\t\twitnessTitle: textWitnessTitle(format),\n\t\t\tcarouselTitle: textCarouselTitle(format),\n\t\t\tcalloutHeading: textCalloutHeading(),\n\t\t\tdropCap: textDropCap(format),\n\t\t\tblockquote: textBlockquote(format),\n\t\t\tnumberedTitle: textNumberedTitle(format),\n\t\t\tnumberedPosition: textNumberedPosition(),\n\t\t\toverlayedCaption: textOverlayed(),\n\t\t\tshareCount: textShareCount(),\n\t\t\tshareCountUntilDesktop: textShareCountUntilDesktop(format),\n\t\t\tcricketScoreboardLink: textCricketScoreboardLink(),\n\t\t\tkeyEvent: textKeyEvent(format),\n\t\t},\n\t\tbackground: {\n\t\t\tarticle: backgroundArticle(format),\n\t\t\tseriesTitle: backgroundSeriesTitle(format),\n\t\t\tsectionTitle: backgroundSectionTitle(format),\n\t\t\tavatar: backgroundAvatar(format),\n\t\t\tcard: overrides?.background.card || backgroundCard(format),\n\t\t\theadline: backgroundHeadline(format),\n\t\t\theadlineByline: backgroundHeadlineByline(format),\n\t\t\tbullet: backgroundBullet(format),\n\t\t\tbulletStandfirst: backgroundBulletStandfirst(format),\n\t\t\theader: backgroundHeader(format),\n\t\t\tstandfirst: backgroundStandfirst(format),\n\t\t\trichLink: backgroundRichLink(format),\n\t\t\timageTitle: backgroundImageTitle(format),\n\t\t\tspeechBubble: backgroundSpeechBubble(format),\n\t\t\tcarouselDot: backgroundCarouselDot(format),\n\t\t\tcarouselDotFocus: backgroundCarouselDotFocus(format),\n\t\t\theadlineTag: backgroundHeadlineTag(format),\n\t\t\tmostViewedTab: backgroundMostViewedTab(format),\n\t\t\tmatchNav: backgroundMatchNav(),\n\t\t\tanalysisUnderline: backgroundUnderline(format),\n\t\t\tmatchStats: backgroundMatchStats(format),\n\t\t\tageWarning: backgroundAgeWarning(format),\n\t\t\tkeyEventBullet: backgroundKeyEventBullet(),\n\t\t\tsummaryEventBullet: backgroundSummaryEventBullet(format),\n\t\t},\n\t\tfill: {\n\t\t\tcommentCount: fillCommentCount(format),\n\t\t\tcommentCountUntilDesktop: fillCommentCountUntilDesktop(format),\n\t\t\tshareIcon: fillShareIcon(format),\n\t\t\tshareCountIcon: fillShareCountIcon(),\n\t\t\tshareCountIconUntilDesktop: fillShareCountIconUntilDesktop(format),\n\t\t\tshareIconGrayBackground: fillShareIconGrayBackground(format),\n\t\t\tcameraCaptionIcon: fillCaptionCamera(format),\n\t\t\trichLink: fillRichLink(format),\n\t\t\tquoteIcon: fillQuoteIcon(format),\n\t\t\tblockquoteIcon: fillBlockquoteIcon(format),\n\t\t\ttwitterHandleBelowDesktop: fillTwitterHandleBelowDesktop(format),\n\t\t},\n\t\tborder: {\n\t\t\tsyndicationButton: borderSyndicationButton(format),\n\t\t\tsubNav: borderSubNav(format),\n\t\t\tarticleLink: borderArticleLink(format),\n\t\t\tarticleLinkHover: borderArticleLinkHover(format),\n\t\t\tliveBlock: borderLiveBlock(format),\n\t\t\tpinnedPost: borderPinnedPost(format),\n\t\t\tstandfirstLink: borderStandfirstLink(format),\n\t\t\theadline: borderHeadline(format),\n\t\t\tstandfirst: borderStandfirst(format),\n\t\t\trichLink: borderRichLink(format),\n\t\t\tnavPillar: borderNavPillar(format),\n\t\t\tarticle: borderArticle(format),\n\t\t\tlines: overrides?.border.lines || borderLines(format),\n\t\t\tcricketScoreboardTop: borderCricketScoreboardTop(),\n\t\t\tcricketScoreboardDivider: borderCricketScoreboardDivider(),\n\t\t\tmatchTab: matchTab(),\n\t\t\tactiveMatchTab: activeMatchTab(),\n\t\t\tcardSupporting: borderCardSupporting(format),\n\t\t},\n\t\ttopBar: {\n\t\t\tcard: overrides?.topBar.card || topBarCard(format),\n\t\t},\n\t\thover: {\n\t\t\theadlineByline: hoverHeadlineByline(format),\n\t\t\tstandfirstLink: hoverStandfirstLink(format),\n\t\t\tkeyEventLink: hoverKeyEventLink(format),\n\t\t\tkeyEventBullet: hoverKeyEventBullet(),\n\t\t\tsummaryEventBullet: hoverSummaryEventBullet(format),\n\t\t},\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decideTheme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/decideTrail.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/formatAttrString.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/formatAttrString.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/formatCount.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/formatCount.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getABUrlHash.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getAbUrlHash.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getBrazeUuid.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getBrazeUuid.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":8,"column":47,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":8,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { IdApiUserIdentifiers } from './getIdapiUserData';\nimport { getIdapiUserIdentifiers } from './getIdapiUserData';\n\nexport const getBrazeUuid = async (ajaxUrl: string): Promise<string | void> => {\n\treturn getIdapiUserIdentifiers(ajaxUrl)\n\t\t.then((data: IdApiUserIdentifiers) => data.brazeUuid)\n\t\t.catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(error, 'getBrazeUuid');\n\t\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getCommentContext.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1223,1226],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1223,1226],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":43,"column":21,"nodeType":"MemberExpression","messageId":"invalidType","endLine":43,"endColumn":29},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":57,"column":3,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":59,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":58,"column":54,"nodeType":"Punctuator","messageId":"preferNullish","endLine":58,"endColumn":56,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1728,1730],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":60,"column":3,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":62,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":61,"column":58,"nodeType":"Punctuator","messageId":"preferNullish","endLine":61,"endColumn":60,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1823,1825],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":63,"column":3,"nodeType":"AssignmentExpression","messageId":"anyAssignment","endLine":65,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":64,"column":57,"nodeType":"Punctuator","messageId":"preferNullish","endLine":64,"endColumn":59,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1918,1920],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":78,"column":12,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":78,"endColumn":36,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[2239,2263],"text":"orderBy?.value"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":78,"column":23,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":78,"endColumn":36},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":79,"column":12,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":79,"endColumn":36,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[2303,2327],"text":"threads?.value"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":79,"column":23,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":79,"endColumn":36},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":80,"column":13,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":80,"endColumn":39,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[2371,2397],"text":"pageSize?.value"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":80,"column":25,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":80,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of type `Promise<any>` from function with return type `Promise<CommentContextType>`.","line":106,"column":2,"nodeType":"ReturnStatement","messageId":"unsafeReturnAssignment","endLine":122,"endColumn":6},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":119,"column":5,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":119,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { joinUrl } from '../../lib/joinUrl';\n\n// GET http://discussion.guardianapis.com/discussion-api/comment/3519111/context\n// {\n//     status: 'ok',\n//     commentId: 3519111,\n//     commentAncestorId: 3519111,\n//     discussionKey: '/p/27y27',\n//     discussionWebUrl:\n//         'https://www.theguardian.com/commentisfree/cifamerica/2009/may/14/washington-post-torture-libel',\n//     discussionApiUrl:\n//         'https://discussion.guardianapis.com/discussion-api/discussion//p/27y27?orderBy=oldest&pageSize=20&page=1',\n//     orderBy: 'oldest',\n//     pageSize: 20,\n//     page: 1,\n// };\n\ntype CommentContextType = {\n\tstatus: 'ok' | 'error';\n\tcommentId: number;\n\tcommentAncestorId: number;\n\tdiscussionKey: string;\n\tdiscussionWebUrl: string;\n\tdiscussionApiUrl: string;\n\torderBy: OrderByType;\n\tpageSize: PageSizeType; // TODO: Review these https://trello.com/c/7v4VDNY0/1326-review-page-size-values\n\tpage: number;\n};\n\ntype OrderByType = 'newest' | 'oldest' | 'recommendations';\ntype ThreadsType = 'collapsed' | 'expanded' | 'unthreaded';\ntype PageSizeType = 25 | 50 | 100;\n\ninterface FilterOptions {\n\torderBy: OrderByType;\n\tpageSize: PageSizeType;\n\tthreads: ThreadsType;\n}\n\nconst objAsParams = (obj: { [key: string]: any }): string => {\n\tconst params = Object.keys(obj)\n\t\t.map((key) => {\n\t\t\treturn `${key}=${obj[key]}`;\n\t\t})\n\t\t.join('&');\n\n\treturn `?${params}`;\n};\n\nconst initFiltersFromLocalStorage = (): FilterOptions => {\n\tlet threads: { [key: string]: ThreadsType } | undefined;\n\tlet pageSize: { [key: string]: PageSizeType } | undefined;\n\tlet orderBy: { [key: string]: OrderByType } | undefined;\n\n\ttry {\n\t\t// Try to read from local storage\n\t\torderBy = JSON.parse(\n\t\t\tlocalStorage.getItem('gu.prefs.discussion.order') || '{}',\n\t\t);\n\t\tthreads = JSON.parse(\n\t\t\tlocalStorage.getItem('gu.prefs.discussion.threading') || '{}',\n\t\t);\n\t\tpageSize = JSON.parse(\n\t\t\tlocalStorage.getItem('gu.prefs.discussion.pagesize') || '{}',\n\t\t);\n\t} catch (error) {\n\t\t// Sometimes it's not possible to access localStorage, we accept this and don't want to\n\t\t// capture these errors\n\t\treturn {\n\t\t\torderBy: 'newest',\n\t\t\tpageSize: 25,\n\t\t\tthreads: 'collapsed',\n\t\t};\n\t}\n\n\t// If we found something in LS, use it, otherwise return defaults\n\treturn {\n\t\torderBy: orderBy && orderBy.value ? orderBy.value : 'newest',\n\t\tthreads: threads && threads.value ? threads.value : 'collapsed',\n\t\tpageSize: pageSize && pageSize.value ? pageSize.value : 25,\n\t};\n};\n\nconst buildParams = (filters: FilterOptions) => {\n\treturn {\n\t\t// Frontend uses the 'recommendations' key to store this options but the api expects\n\t\t// 'mostRecommended' so we have to map here to support both\n\t\torderBy:\n\t\t\tfilters.orderBy === 'recommendations'\n\t\t\t\t? 'mostRecommended'\n\t\t\t\t: filters.orderBy,\n\t\tpageSize: filters.pageSize,\n\t\tdisplayThreaded:\n\t\t\tfilters.threads === 'collapsed' || filters.threads === 'expanded',\n\t};\n};\n\nexport const getCommentContext = async (\n\tajaxUrl: string,\n\tcommentId: number,\n): Promise<CommentContextType> => {\n\tconst url = joinUrl([ajaxUrl, 'comment', commentId.toString(), 'context']);\n\tconst filters = initFiltersFromLocalStorage();\n\tconst params = buildParams(filters);\n\n\treturn fetch(url + objAsParams(params))\n\t\t.then((response) => {\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow Error(\n\t\t\t\t\tresponse.statusText ||\n\t\t\t\t\t\t`getCommentContext | An api call returned HTTP status ${response.status}`,\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn response;\n\t\t})\n\t\t.then((response) => response.json())\n\t\t.catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\terror,\n\t\t\t\t'get-comment-page',\n\t\t\t);\n\t\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getCountryCode.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getCountryCode.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":15,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":15,"endColumn":17},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of an `any` typed value.","line":26,"column":2,"nodeType":"ReturnStatement","messageId":"unsafeReturn","endLine":30,"endColumn":4},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":27,"column":10,"nodeType":"Punctuator","messageId":"preferNullish","endLine":27,"endColumn":12,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[724,780],"text":"(locale ??\n\t\tstorage.local.get(COUNTRY_CODE_KEY_OVERRIDE))"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":46,"column":4,"nodeType":"MemberExpression","messageId":"unexpected","endLine":46,"endColumn":15},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":48,"column":5,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":48,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getCookie, getLocale, storage } from '@guardian/libs';\nimport type { CountryCode } from '@guardian/libs';\n\nconst COUNTRY_CODE_KEY = 'GU_geo_country';\nconst COUNTRY_CODE_KEY_OVERRIDE = 'gu.geo.override';\n/*\n\tMemoizes the location\n */\nlet locale: CountryCode | null;\n\n/*\n\tCan be used to override country code and sets it in localStorage\n */\nexport const overrideCountryCode = (countryCode: CountryCode): void => {\n\tif (countryCode) {\n\t\tstorage.local.set(COUNTRY_CODE_KEY_OVERRIDE, countryCode);\n\t\tlocale = countryCode;\n\t}\n};\n\n/*\n\tThis method can be used as a non async way of getting the country code\n\tafter getLocaleCode has been called.\n */\nexport const getCountryCodeSync = (): CountryCode | null => {\n\treturn (\n\t\tlocale ||\n\t\tstorage.local.get(COUNTRY_CODE_KEY_OVERRIDE) ||\n\t\tgetCookie({ name: COUNTRY_CODE_KEY, shouldMemoize: true })\n\t);\n};\n\n/*\n\tThis method returns the location of the user from guardian/libs getLocale\n\tIt will return fastly's 'GU_geo_country' if it exists,\n\tor an overridden geolocation from 'gu.geo.override' localStorage\n\tor if none of those exists, it will call the geo endpoint to fetch it and set it in `GU_geo_country`\n */\nexport const getLocaleCode = async (): Promise<CountryCode | null> => {\n\treturn getLocale()\n\t\t.then((countryCode) => {\n\t\t\tlocale = countryCode;\n\t\t\treturn countryCode;\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.log(`Error getting location from libs/getLocale`);\n\t\t\twindow.guardian.modules.sentry.reportError(\n\t\t\t\terror,\n\t\t\t\t'get-country-code',\n\t\t\t);\n\t\t\tlocale = getCountryCodeSync();\n\t\t\treturn locale;\n\t\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getDataLinkName.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":47,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":5}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticleSpecial } from '@guardian/libs';\n\n/**\n * TODO: missing \"podcast\" and \"external\"\n */\nconst getLinkType = ({ theme, design }: ArticleFormat): RichLinkCardType => {\n\tswitch (theme) {\n\t\tcase ArticleSpecial.SpecialReport:\n\t\t\treturn 'special-report';\n\t\tdefault:\n\t\t\tswitch (design) {\n\t\t\t\tcase ArticleDesign.Analysis:\n\t\t\t\t\treturn 'analysis';\n\t\t\t\tcase ArticleDesign.LiveBlog:\n\t\t\t\t\treturn 'live';\n\t\t\t\tcase ArticleDesign.DeadBlog:\n\t\t\t\t\treturn 'dead';\n\t\t\t\tcase ArticleDesign.Feature:\n\t\t\t\t\treturn 'feature';\n\t\t\t\tcase ArticleDesign.Editorial:\n\t\t\t\t\treturn 'editorial';\n\t\t\t\tcase ArticleDesign.Comment:\n\t\t\t\t\treturn 'comment';\n\t\t\t\tcase ArticleDesign.Gallery:\n\t\t\t\tcase ArticleDesign.Audio:\n\t\t\t\tcase ArticleDesign.Video:\n\t\t\t\t\treturn 'media';\n\t\t\t\tcase ArticleDesign.Review:\n\t\t\t\t\treturn 'review';\n\t\t\t\tcase ArticleDesign.Letter:\n\t\t\t\t\treturn 'letters';\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'news';\n\t\t\t}\n\t}\n};\n\n/**\n * Get the `data-link-name` attribute for a card.\n * Used by Ophan for understanding reader journeys. E.g:\n * - `feature | card-2+ | card-@1`\n * - `news | group-0 | card-@5`\n *\n * @see {JSX.IntrinsicAttributes}\n */\nexport const getDataLinkNameCard = (\n\tformat: ArticleFormat,\n\tgroup: string | number,\n\tindex: number,\n) => [getLinkType(format), `group-${group}`, `card-@${index}`].join(' | ');\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getIdapiUserData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getPrivacyFramework.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":5,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":5,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { getLocaleCode } from './getCountryCode';\n\nlet frameworks: undefined | Record<string, boolean>;\n\nexport const getPrivacyFramework = async () => {\n\tif (typeof frameworks === 'undefined') {\n\t\tconst isInUS = (await getLocaleCode()) === 'US';\n\n\t\tframeworks = {\n\t\t\tccpa: isInUS,\n\t\t\ttcfv2: !isInUS,\n\t\t};\n\t}\n\treturn frameworks;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getUser.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":25,"column":47,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":25,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Error`.","line":29,"column":47,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":29,"endColumn":52}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { joinUrl } from '../../lib/joinUrl';\n\nfunction checkForErrors(response: Response) {\n\tif (!response.ok) {\n\t\tthrow Error(\n\t\t\tresponse.statusText ||\n\t\t\t\t`getUser | An api call returned HTTP status ${response.status}`,\n\t\t);\n\t}\n\treturn response;\n}\n\nconst callApi = (url: string) => {\n\treturn fetch(url, {\n\t\tcredentials: 'include',\n\t})\n\t\t.then(checkForErrors)\n\t\t.then((response) => response.json());\n};\n\nexport const getUser = async (ajaxUrl: string): Promise<UserProfile | void> => {\n\tconst url = joinUrl([ajaxUrl, 'profile/me?strict_sanctions_check=false']);\n\treturn callApi(url)\n\t\t.catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(error, 'get-user');\n\t\t})\n\t\t.then((json: { userProfile: UserProfile }) => json.userProfile)\n\t\t.catch((error) => {\n\t\t\twindow.guardian.modules.sentry.reportError(error, 'get-user');\n\t\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getZIndex.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/getZIndex.tsx","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"number | null\" of template literal expression.","line":84,"column":14,"nodeType":"CallExpression","messageId":"invalidType","endLine":84,"endColumn":33},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"number | null\" of template literal expression.","line":87,"column":14,"nodeType":"CallExpression","messageId":"invalidType","endLine":87,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * How do I get a z-index for my new item?\n *\n * Decide a meaningful name for your item and then insert it\n * in the indices array below. The higher up your item visually,\n * then the higher it will be in the z-index stack,\n * 'higher' means _earlier_ in the array.\n *\n * Eg. stickyAdWrapper will be given a higher z-index than bodyArea\n *\n * Once inserted in the array, use getZIndex() to return the css\n *\n * Eg.\n *\n * import { getZIndex } from './getZIndex';\n *\n * const myCss = css`\n *    color: blue;\n *    ${getZIndex('TheGuardian')}\n * `;\n *\n * As new items are added, all z-indexes are adjusted\n */\nconst indices = [\n\t// Modals will go here at the top\n\n\t// Sticky video and button need to be above everything\n\t'sticky-video-button',\n\t'sticky-video',\n\t'banner',\n\t'dropdown',\n\t'burger',\n\t'expanded-veggie-menu-wrapper',\n\t'expanded-veggie-menu',\n\n\t// Headers with sticky ads\n\t'stickyAdWrapperLabsHeader',\n\t'stickyAdWrapper',\n\t'stickyAdWrapperNav',\n\n\t// Edition selector in nav - needs to be below stickyAdWrapper\n\t'editionDropdown',\n\n\t// Liveblog toast\n\t'toast',\n\n\t// Onwards Carousel (Related content etc)\n\t'onwardsCarousel',\n\n\t// Search link should be above The Guardian svg\n\t'searchHeaderLink',\n\t'TheGuardian',\n\n\t// Wrapper after nav stuff\n\t'headerWrapper',\n\n\t// Article headline (should be above main media)\n\t'articleHeadline',\n\t'immersiveBlackBox',\n\n\t// Body\n\t'bodyArea',\n\t'rightColumnArea',\n\n\t// Main media\n\t'mainMedia',\n\n\t// Nested links in cards should sit above the main card link\n\t// See: https://www.sarasoueidan.com/blog/nested-links/\n\t'card-nested-link',\n\t'card-link',\n] as const;\n\n// Implementation code - you don't need to change this to get a new index\nexport type ZIndex = typeof indices[number];\n\nconst decideIndex = (name: ZIndex): number | null => {\n\tconst index = indices.indexOf(name);\n\tif (index === -1) return null; // indexOf returns -1 if there is no match\n\treturn indices.length - index; // reverse the indices: last item gets 1\n};\n\nexport const getZIndex = (zIndex: ZIndex): string =>\n\t`z-index: ${decideIndex(zIndex)};`;\n\nexport const getZIndexImportant = (zIndex: ZIndex): string =>\n\t`z-index: ${decideIndex(zIndex)} !important;`;\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/hasCurrentBrazeUser.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/hasCurrentBrazeUser.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/injectPrivacySettingsLink.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":46,"column":19,"nodeType":"MemberExpression","messageId":"unexpected","endLine":46,"endColumn":32},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":46,"column":62,"nodeType":"Identifier","messageId":"invalidType","endLine":46,"endColumn":63}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { cmp } from '@guardian/consent-management-platform';\nimport { getPrivacyFramework } from './getPrivacyFramework';\n\nconst newPrivacyLinkName = 'privacy-settings';\n\nexport const injectPrivacySettingsLink = (): void => {\n\tconst privacyLink = document.querySelector('a[data-link-name=privacy]');\n\n\tif (\n\t\t!document.querySelector(`a[data-link-name=${newPrivacyLinkName}]`) &&\n\t\tprivacyLink\n\t) {\n\t\tconst privacyLinkListItem = privacyLink.parentElement;\n\n\t\tif (privacyLinkListItem) {\n\t\t\tgetPrivacyFramework()\n\t\t\t\t.then((framework) => {\n\t\t\t\t\tconst newPrivacyLink = privacyLink.cloneNode(\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t) as Element;\n\n\t\t\t\t\tnewPrivacyLink.setAttribute(\n\t\t\t\t\t\t'data-link-name',\n\t\t\t\t\t\tnewPrivacyLinkName,\n\t\t\t\t\t);\n\t\t\t\t\tnewPrivacyLink.setAttribute('href', '#');\n\t\t\t\t\tnewPrivacyLink.innerHTML = framework.ccpa\n\t\t\t\t\t\t? 'California resident – Do Not Sell'\n\t\t\t\t\t\t: 'Privacy settings';\n\n\t\t\t\t\tconst newPrivacyLinkListItem =\n\t\t\t\t\t\tprivacyLinkListItem.cloneNode(false) as Element;\n\n\t\t\t\t\tnewPrivacyLinkListItem.appendChild(newPrivacyLink);\n\n\t\t\t\t\tprivacyLinkListItem.insertAdjacentElement(\n\t\t\t\t\t\t'beforebegin',\n\t\t\t\t\t\tnewPrivacyLinkListItem,\n\t\t\t\t\t);\n\n\t\t\t\t\tnewPrivacyLink.addEventListener(\n\t\t\t\t\t\t'click',\n\t\t\t\t\t\tcmp.showPrivacyManager,\n\t\t\t\t\t);\n\t\t\t\t})\n\t\t\t\t.catch((e) => console.error(`privacy settings - error: ${e}`));\n\t\t}\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/isLight.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/isLight.ts","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":10,"column":13,"nodeType":"Identifier","messageId":"invalidType","endLine":10,"endColumn":14},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":10,"column":17,"nodeType":"Identifier","messageId":"invalidType","endLine":10,"endColumn":18},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":10,"column":21,"nodeType":"Identifier","messageId":"invalidType","endLine":10,"endColumn":22},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":10,"column":25,"nodeType":"Identifier","messageId":"invalidType","endLine":10,"endColumn":26},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":10,"column":29,"nodeType":"Identifier","messageId":"invalidType","endLine":10,"endColumn":30},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":10,"column":33,"nodeType":"Identifier","messageId":"invalidType","endLine":10,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// https://stackoverflow.com/a/5624139\nfunction hexToRgb(hex: string): {\n\tr: number;\n\tg: number;\n\tb: number;\n} | null {\n\t// Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n\tconst shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\tconst fullHex = hex.replace(shorthandRegex, (m, r, g, b) => {\n\t\treturn `${r}${r}${g}${g}${b}${b}`;\n\t});\n\n\tconst result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(fullHex);\n\treturn result\n\t\t? {\n\t\t\t\tr: parseInt(result[1], 16),\n\t\t\t\tg: parseInt(result[2], 16),\n\t\t\t\tb: parseInt(result[3], 16),\n\t\t  }\n\t\t: null;\n}\n\nfunction getBrightness(colour: string): number {\n\t// http://www.w3.org/TR/AERT#color-contrast\n\tconst rgb = hexToRgb(colour);\n\treturn rgb ? (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000 : 0;\n}\n\n// Based on https://github.com/bgrins/TinyColor\nexport const isLight = (colour: string): boolean => {\n\tif (!colour.startsWith('#')) {\n\t\treturn getBrightness(`#${colour}`) > 128;\n\t}\n\treturn getBrightness(colour) > 128;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/layoutHelpers.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":33,"column":5,"nodeType":"TSAsExpression","messageId":"alwaysTruthy","endLine":33,"endColumn":69}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { ArticleDesign, ArticlePillar } from '@guardian/libs';\nimport { decideNavTheme } from './decideNavTheme';\n\nexport const decideLineEffect = (\n\tdesign: ArticleDesign,\n\tpillar: ArticleTheme,\n): LineEffectType => {\n\tif (pillar === ArticlePillar.Sport) {\n\t\treturn 'dotted';\n\t}\n\n\tswitch (design) {\n\t\tcase ArticleDesign.Feature:\n\t\tcase ArticleDesign.Recipe:\n\t\t\treturn 'squiggly';\n\t\tdefault:\n\t\t\treturn 'straight';\n\t}\n};\n\nexport const decideLineCount = (design?: ArticleDesign): 8 | 4 => {\n\tif (design === ArticleDesign.Comment) {\n\t\treturn 8;\n\t}\n\treturn 4;\n};\n\nexport const getCurrentPillar = (\n\tCAPIArticle: CAPIArticleType,\n): ArticleTheme => {\n\tconst currentPillar =\n\t\t(CAPIArticle.nav.currentPillarTitle &&\n\t\t\t(CAPIArticle.nav.currentPillarTitle.toLowerCase() as LegacyPillar)) ||\n\t\tCAPIArticle.pillar;\n\treturn decideNavTheme(currentPillar);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/loadScript.ts","messages":[{"ruleId":"consistent-return","severity":1,"message":"Expected to return a value at the end of arrow function.","line":8,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturn","endLine":8,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// This is taken from https://github.com/guardian/libs/blob/main/src/loadScript.ts, we see type errors when\n// using the library\n\nexport const loadScript = (\n\tsrc: string,\n\tprops?: Omit<Partial<HTMLScriptElement>, 'src' | 'onload' | 'onerror'>,\n): Promise<Event | undefined> =>\n\tnew Promise((resolve, reject) => {\n\t\t// creating this before the check below allows us to compare the resolved `src` values\n\t\tconst script = document.createElement('script');\n\t\tscript.src = src;\n\n\t\t// dont inject 2 scripts with the same src\n\t\tif (\n\t\t\tArray.from(document.scripts).some(\n\t\t\t\t({ src: scriptSrc }) => script.src === scriptSrc,\n\t\t\t)\n\t\t) {\n\t\t\treturn resolve(undefined);\n\t\t}\n\n\t\tObject.assign(script, props);\n\n\t\tscript.onload = resolve;\n\t\tscript.onerror = () => {\n\t\t\treject(new Error(`Failed to load script ${src}`));\n\t\t};\n\n\t\tconst ref = document.scripts[0];\n\t\tref.parentNode?.insertBefore(script, ref);\n\t});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/logging.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":21,"column":19,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":31,"endColumn":6}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import fetch from 'node-fetch';\n\ntype Field<T> = Array<{ name: string; value: T }>;\n\nconst prepare = <T extends string | number>(\n\tobj?: Record<string, T>,\n): Field<T> | undefined =>\n\tobj && Object.entries(obj).map(([name, value]) => ({ name, value }));\n\n/**\n * Record a log. Runs server-side.\n * Can be inspected via BigQuery for further analysis.\n * Ensure data protection is involved if capturing\n * any personally identifiable information (PII).\n *\n * ## Good candidate for @guardian/libs\n *\n * @param options.properties Textual values to record.\n * @param options.metrics Numeric values to record.\n */\nconst recordLog = ({\n\tlabel,\n\tisDev,\n\tproperties,\n\tmetrics,\n}: {\n\tlabel: string;\n\tisDev: boolean;\n\tproperties?: Record<string, string>;\n\tmetrics?: Record<string, number>;\n}) => {\n\tconst data: {\n\t\tlabel: string;\n\t\tproperties?: Field<string>;\n\t\tmetrics?: Field<number>;\n\t} = {\n\t\tlabel,\n\t\tproperties: prepare(properties),\n\t\tmetrics: prepare(metrics),\n\t};\n\n\tconst endpoint = isDev\n\t\t? 'https://logs.guardianapis.com/log'\n\t\t: 'https://logs.code.dev-guardianapis.com/log';\n\n\tvoid fetch(endpoint, {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(data),\n\t});\n};\nexport { recordLog };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/messagePicker.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/messagePicker.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[719,722],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[719,722],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":80,"column":6,"nodeType":"MemberExpression","messageId":"unexpected","endLine":80,"endColumn":19},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":80,"column":53,"nodeType":"Identifier","messageId":"invalidType","endLine":80,"endColumn":54},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":96,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2156,2159],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2156,2159],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":119,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2671,2674],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2671,2674],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":127,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":127,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2889,2892],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2889,2892],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":138,"column":6,"nodeType":"Property","messageId":"anyAssignment","endLine":138,"endColumn":23},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of a tuple element with an `any` value.","line":152,"column":25,"nodeType":"Identifier","messageId":"unsafeArrayPatternFromTuple","endLine":152,"endColumn":29},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":156,"column":18,"nodeType":"MemberExpression","messageId":"unexpected","endLine":156,"endColumn":31},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":156,"column":63,"nodeType":"Identifier","messageId":"invalidType","endLine":156,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { initPerf } from '../browser/initPerf';\nimport { record } from '../browser/ophan/ophan';\n\nexport type MaybeFC = React.FC | null;\ntype ShowMessage<T> = (meta: T) => MaybeFC;\n\ninterface ShouldShow<T> {\n\tshow: true;\n\tmeta: T;\n}\ninterface ShouldNotShow {\n\tshow: false;\n}\nexport type CanShowResult<T> = ShouldShow<T> | ShouldNotShow;\n\nexport type Candidate<T> = {\n\tid: string;\n\tshow: ShowMessage<T>;\n\tcanShow: () => Promise<CanShowResult<T>>;\n};\n\nexport type CandidateConfig<T> = {\n\tcandidate: Candidate<T>;\n\ttimeoutMillis: number | null;\n\treportTiming?: boolean;\n};\n\ntype CandidateConfigWithTimeout<T> = CandidateConfig<T> & {\n\tcancelTimeout: () => void;\n};\n\nexport type SlotConfig = {\n\tcandidates: CandidateConfig<any>[];\n\tname: string;\n};\n\nconst recordMessageTimeoutInOphan = (candidateId: string, slotName: string) =>\n\trecord({\n\t\tcomponent: `${slotName}-picker-timeout-dcr`,\n\t\tvalue: candidateId,\n\t});\n\nconst timeoutify = <T>(\n\tcandidateConfig: CandidateConfig<T>,\n\tslotName: string,\n): CandidateConfigWithTimeout<T> => {\n\tlet timer: number | undefined;\n\n\tconst canShow = (): Promise<CanShowResult<T>> =>\n\t\tnew Promise((resolve) => {\n\t\t\tconst perfName = `messagePicker-canShow-${candidateConfig.candidate.id}`;\n\t\t\tconst canShowTiming = initPerf(perfName);\n\t\t\tcanShowTiming.start();\n\n\t\t\tif (candidateConfig.timeoutMillis) {\n\t\t\t\ttimer = window.setTimeout(() => {\n\t\t\t\t\trecordMessageTimeoutInOphan(\n\t\t\t\t\t\tcandidateConfig.candidate.id,\n\t\t\t\t\t\tslotName,\n\t\t\t\t\t);\n\t\t\t\t\tresolve({ show: false });\n\t\t\t\t}, candidateConfig.timeoutMillis);\n\t\t\t}\n\n\t\t\tcandidateConfig.candidate\n\t\t\t\t.canShow()\n\t\t\t\t.then((result) => {\n\t\t\t\t\tresolve(result);\n\n\t\t\t\t\tconst canShowTimeTaken = canShowTiming.end();\n\n\t\t\t\t\tif (candidateConfig.reportTiming) {\n\t\t\t\t\t\trecord({\n\t\t\t\t\t\t\tcomponent: perfName,\n\t\t\t\t\t\t\tvalue: canShowTimeTaken,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((e) =>\n\t\t\t\t\tconsole.error(`timeoutify candidate - error: ${e}`),\n\t\t\t\t);\n\t\t});\n\n\tconst cancelTimeout = () => timer && clearTimeout(timer);\n\n\treturn {\n\t\t...candidateConfig,\n\t\tcandidate: {\n\t\t\t...candidateConfig.candidate,\n\t\t\tcanShow,\n\t\t},\n\t\tcancelTimeout,\n\t};\n};\n\nconst clearAllTimeouts = (messages: CandidateConfigWithTimeout<any>[]) =>\n\tmessages.map((m) => m.cancelTimeout());\n\nconst defaultShow = () => null;\n\ninterface PendingMessage<T> {\n\tcandidateConfig: CandidateConfigWithTimeout<T>;\n\tcanShow: Promise<CanShowResult<T>>;\n}\n\ninterface WinningMessage<T> {\n\tmeta: T;\n\tcandidate: Candidate<T>;\n}\n\nexport const pickMessage = ({\n\tcandidates,\n\tname,\n}: SlotConfig): Promise<() => MaybeFC> =>\n\tnew Promise((resolve) => {\n\t\tconst candidateConfigsWithTimeout = candidates.map((c) =>\n\t\t\ttimeoutify(c, name),\n\t\t);\n\t\tconst results: PendingMessage<any>[] = candidateConfigsWithTimeout.map(\n\t\t\t(candidateConfig) => ({\n\t\t\t\tcandidateConfig,\n\t\t\t\tcanShow: candidateConfig.candidate.canShow(),\n\t\t\t}),\n\t\t);\n\n\t\tconst winnerResult = results.reduce<\n\t\t\tPromise<WinningMessage<any> | null>\n\t\t>(async (winningMessageSoFar, { candidateConfig, canShow }) => {\n\t\t\tif (await winningMessageSoFar) {\n\t\t\t\treturn winningMessageSoFar;\n\t\t\t}\n\n\t\t\tconst result = await canShow;\n\t\t\tcandidateConfig.cancelTimeout();\n\t\t\tif (result.show) {\n\t\t\t\treturn {\n\t\t\t\t\tcandidate: candidateConfig.candidate,\n\t\t\t\t\tmeta: result.meta,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn winningMessageSoFar;\n\t\t}, Promise.resolve(null));\n\n\t\twinnerResult\n\t\t\t.then((winner) => {\n\t\t\t\tclearAllTimeouts(candidateConfigsWithTimeout);\n\n\t\t\t\tif (winner === null) {\n\t\t\t\t\tresolve(defaultShow);\n\t\t\t\t} else {\n\t\t\t\t\tconst { candidate, meta } = winner;\n\t\t\t\t\tresolve(() => candidate.show(meta));\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((e) => console.error(`pickMessage winner - error: ${e}`));\n\t});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/mockRESTCalls.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/readerRevenueDevUtils.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":40,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":40,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1361,1363],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":54,"column":47,"nodeType":"Punctuator","messageId":"preferNullish","endLine":54,"endColumn":49,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[1743,1745],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/default-param-last","severity":1,"message":"Default parameters should be last.","line":92,"column":2,"nodeType":"AssignmentPattern","messageId":"shouldBeLast","endLine":92,"endColumn":29},{"ruleId":"@typescript-eslint/default-param-last","severity":1,"message":"Default parameters should be last.","line":102,"column":2,"nodeType":"AssignmentPattern","messageId":"shouldBeLast","endLine":102,"endColumn":29},{"ruleId":"@typescript-eslint/default-param-last","severity":1,"message":"Default parameters should be last.","line":114,"column":2,"nodeType":"AssignmentPattern","messageId":"shouldBeLast","endLine":114,"endColumn":29},{"ruleId":"@typescript-eslint/default-param-last","severity":1,"message":"Default parameters should be last.","line":125,"column":2,"nodeType":"AssignmentPattern","messageId":"shouldBeLast","endLine":125,"endColumn":29},{"ruleId":"@typescript-eslint/default-param-last","severity":1,"message":"Default parameters should be last.","line":136,"column":2,"nodeType":"AssignmentPattern","messageId":"shouldBeLast","endLine":136,"endColumn":29},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"CountryCode | null\" of template literal expression.","line":142,"column":72,"nodeType":"Identifier","messageId":"invalidType","endLine":142,"endColumn":79},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":156,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":156,"endColumn":30},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":156,"column":61,"nodeType":"Identifier","messageId":"invalidType","endLine":156,"endColumn":62},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":172,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":172,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { CountryCode } from '@guardian/libs';\nimport { getCookie, removeCookie, setCookie } from '@guardian/libs';\nimport { setAlreadyVisited } from './alreadyVisited';\nimport {\n\tHIDE_SUPPORT_MESSAGING_COOKIE,\n\tRECURRING_CONTRIBUTOR_COOKIE,\n\tSUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n\tSUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE,\n\tSUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE,\n} from './contributions';\nimport { getLocaleCode, overrideCountryCode } from './getCountryCode';\n\nconst readerRevenueCookies = [\n\tHIDE_SUPPORT_MESSAGING_COOKIE,\n\tRECURRING_CONTRIBUTOR_COOKIE,\n\tSUPPORT_RECURRING_CONTRIBUTOR_MONTHLY_COOKIE,\n\tSUPPORT_RECURRING_CONTRIBUTOR_ANNUAL_COOKIE,\n\tSUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n];\n\nconst clearEpicViewLog = (): void =>\n\tlocalStorage.removeItem('gu.contributions.views');\n\nconst clearBannerLastClosedAt = (): void => {\n\tlocalStorage.removeItem('gu.prefs.engagementBannerLastClosedAt');\n\tlocalStorage.removeItem('gu.prefs.subscriptionBannerLastClosedAt');\n\tlocalStorage.removeItem('gu.noRRBannerTimestamp');\n};\n\nconst fakeOneOffContributor = (): void =>\n\tsetCookie({\n\t\tname: SUPPORT_ONE_OFF_CONTRIBUTION_COOKIE,\n\t\tvalue: Date.now().toString(),\n\t});\n\nconst MULTIVARIATE_ID_COOKIE = 'GU_mvt_id';\nconst MAX_CLIENT_MVT_ID = 1000000;\nconst incrementMvtCookie = (): void => {\n\tconst mvtId = parseInt(\n\t\tgetCookie({ name: MULTIVARIATE_ID_COOKIE }) || '10',\n\t\t10,\n\t);\n\tif (mvtId) {\n\t\tif (mvtId === MAX_CLIENT_MVT_ID) {\n\t\t\t// Wrap back to 1 if it would exceed the max\n\t\t\tsetCookie({ name: MULTIVARIATE_ID_COOKIE, value: '1' });\n\t\t} else {\n\t\t\tsetCookie({ name: MULTIVARIATE_ID_COOKIE, value: `${mvtId + 1}` });\n\t\t}\n\t}\n};\nconst decrementMvtCookie = (): void => {\n\tconst mvtId = parseInt(\n\t\tgetCookie({ name: MULTIVARIATE_ID_COOKIE }) || '10',\n\t\t10,\n\t);\n\tif (mvtId) {\n\t\tif (mvtId === 0) {\n\t\t\t// Wrap back to max if it would be less than 0\n\t\t\tsetCookie({\n\t\t\t\tname: MULTIVARIATE_ID_COOKIE,\n\t\t\t\tvalue: MAX_CLIENT_MVT_ID.toString(),\n\t\t\t});\n\t\t} else {\n\t\t\tsetCookie({ name: MULTIVARIATE_ID_COOKIE, value: `${mvtId - 1}` });\n\t\t}\n\t}\n};\n\nconst clearCommonReaderRevenueStateAndReload = (\n\tasExistingSupporter: boolean,\n\tshouldHideReaderRevenue: boolean,\n): void => {\n\tif (shouldHideReaderRevenue) {\n\t\talert(\n\t\t\t'This page has \"Prevent membership/contribution appeals\" ticked in Composer. Please try a different page',\n\t\t);\n\t\treturn;\n\t}\n\n\treaderRevenueCookies.forEach((cookie) => removeCookie({ name: cookie }));\n\tclearEpicViewLog();\n\n\tif (asExistingSupporter) {\n\t\tfakeOneOffContributor();\n\t}\n\n\twindow.location.reload();\n};\n\nconst showMeTheEpic = (\n\tasExistingSupporter = false,\n\tshouldHideReaderRevenue: boolean,\n): void => {\n\tclearCommonReaderRevenueStateAndReload(\n\t\tasExistingSupporter,\n\t\tshouldHideReaderRevenue,\n\t);\n};\n\nconst showMeTheBanner = (\n\tasExistingSupporter = false,\n\tshouldHideReaderRevenue: boolean,\n): void => {\n\tclearBannerLastClosedAt();\n\tsetAlreadyVisited(2);\n\tclearCommonReaderRevenueStateAndReload(\n\t\tasExistingSupporter,\n\t\tshouldHideReaderRevenue,\n\t);\n};\n\nconst showNextVariant = (\n\tasExistingSupporter = false,\n\tshouldHideReaderRevenue: boolean,\n): void => {\n\tincrementMvtCookie();\n\tclearCommonReaderRevenueStateAndReload(\n\t\tasExistingSupporter,\n\t\tshouldHideReaderRevenue,\n\t);\n};\n\nconst showPreviousVariant = (\n\tasExistingSupporter = false,\n\tshouldHideReaderRevenue: boolean,\n): void => {\n\tdecrementMvtCookie();\n\tclearCommonReaderRevenueStateAndReload(\n\t\tasExistingSupporter,\n\t\tshouldHideReaderRevenue,\n\t);\n};\n\nconst changeGeolocation = (\n\tasExistingSupporter = false,\n\tshouldHideReaderRevenue: boolean,\n): void => {\n\tgetLocaleCode()\n\t\t.then((current) => {\n\t\t\tconst geo = window.prompt(\n\t\t\t\t`Enter two-letter geolocation code (e.g. GB, US, AU). Current is ${current}.`,\n\t\t\t);\n\t\t\tif (geo === 'UK') {\n\t\t\t\talert(\n\t\t\t\t\t`'UK' is not a valid geolocation - please use 'GB' instead!`,\n\t\t\t\t);\n\t\t\t} else if (geo) {\n\t\t\t\toverrideCountryCode(geo as CountryCode);\n\t\t\t\tclearCommonReaderRevenueStateAndReload(\n\t\t\t\t\tasExistingSupporter,\n\t\t\t\t\tshouldHideReaderRevenue,\n\t\t\t\t);\n\t\t\t}\n\t\t})\n\t\t.catch((e) => console.error(`changeGeolocation - error: ${e}`));\n};\n\ntype ReaderRevenueDevUtil = (\n\tasExistingSupporter: boolean,\n\tshouldHideReaderRevenue: boolean,\n) => void;\nexport interface ReaderRevenueDevUtils {\n\tchangeGeolocation: ReaderRevenueDevUtil;\n\tshowMeTheEpic: ReaderRevenueDevUtil;\n\tshowMeTheBanner: ReaderRevenueDevUtil;\n\tshowNextVariant: ReaderRevenueDevUtil;\n\tshowPreviousVariant: ReaderRevenueDevUtil;\n}\n\nconst getForcedVariant = (type: 'epic' | 'banner'): string | null => {\n\tif (URLSearchParams) {\n\t\tconst params = new URLSearchParams(window.location.search);\n\t\tconst value = params.get(`force-${type}`);\n\t\tif (value) {\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn null;\n};\n\nexport {\n\tchangeGeolocation,\n\tshowMeTheEpic,\n\tshowMeTheBanner,\n\tshowNextVariant,\n\tshowPreviousVariant,\n\tgetForcedVariant,\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/renderElement.tsx","messages":[{"ruleId":"import/order","severity":1,"message":"`../components/HighlightBlockComponent` import should occur before import of `../components/RichLinkComponent.importable`","line":30,"column":1,"nodeType":"ImportDeclaration","endLine":30,"endColumn":81,"fix":{"range":[1314,1981],"text":"import { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/ImageBlockComponent` import should occur before import of `../components/RichLinkComponent.importable`","line":31,"column":1,"nodeType":"ImportDeclaration","endLine":31,"endColumn":73,"fix":{"range":[1314,2054],"text":"import { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/InstagramBlockComponent.importable` import should occur before import of `../components/RichLinkComponent.importable`","line":32,"column":1,"nodeType":"ImportDeclaration","endLine":32,"endColumn":92,"fix":{"range":[1314,2146],"text":"import { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/InteractiveBlockComponent.importable` import should occur before import of `../components/RichLinkComponent.importable`","line":33,"column":1,"nodeType":"ImportDeclaration","endLine":33,"endColumn":96,"fix":{"range":[1314,2242],"text":"import { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/ItemLinkBlockElement` import should occur before import of `../components/RichLinkComponent.importable`","line":34,"column":1,"nodeType":"ImportDeclaration","endLine":34,"endColumn":75,"fix":{"range":[1314,2317],"text":"import { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/InteractiveContentsBlockComponent` import should occur before import of `../components/RichLinkComponent.importable`","line":35,"column":1,"nodeType":"ImportDeclaration","endLine":35,"endColumn":101,"fix":{"range":[1314,2418],"text":"import { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/MainMediaEmbedBlockComponent` import should occur before import of `../components/RichLinkComponent.importable`","line":36,"column":1,"nodeType":"ImportDeclaration","endLine":36,"endColumn":91,"fix":{"range":[1314,2509],"text":"import { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/NumberedTitleBlockComponent` import should occur before import of `../components/RichLinkComponent.importable`","line":37,"column":1,"nodeType":"ImportDeclaration","endLine":37,"endColumn":89,"fix":{"range":[1314,2598],"text":"import { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/MapEmbedBlockComponent.importable` import should occur before import of `../components/RichLinkComponent.importable`","line":38,"column":1,"nodeType":"ImportDeclaration","endLine":38,"endColumn":90,"fix":{"range":[1314,2688],"text":"import { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/MultiImageBlockComponent` import should occur before import of `../components/RichLinkComponent.importable`","line":39,"column":1,"nodeType":"ImportDeclaration","endLine":39,"endColumn":83,"fix":{"range":[1314,2771],"text":"import { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/PullQuoteBlockComponent` import should occur before import of `../components/RichLinkComponent.importable`","line":40,"column":1,"nodeType":"ImportDeclaration","endLine":40,"endColumn":81,"fix":{"range":[1314,2852],"text":"import { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/TextBlockComponent` import should occur before import of `../components/UnsafeEmbedBlockComponent.importable`","line":41,"column":1,"nodeType":"ImportDeclaration","endLine":41,"endColumn":71,"fix":{"range":[1804,2923],"text":"import { TextBlockComponent } from '../components/TextBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/TweetBlockComponent.importable` import should occur before import of `../components/UnsafeEmbedBlockComponent.importable`","line":42,"column":1,"nodeType":"ImportDeclaration","endLine":42,"endColumn":84,"fix":{"range":[1804,3007],"text":"import { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/TimelineAtomWrapper.importable` import should occur before import of `../components/UnsafeEmbedBlockComponent.importable`","line":53,"column":1,"nodeType":"ImportDeclaration","endLine":53,"endColumn":84,"fix":{"range":[1804,3662],"text":"import { TimelineAtomWrapper } from '../components/TimelineAtomWrapper.importable';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\nimport { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { VideoFacebookBlockComponent } from '../components/VideoFacebookBlockComponent.importable';\nimport { VimeoBlockComponent } from '../components/VimeoBlockComponent';\nimport { VineBlockComponent } from '../components/VineBlockComponent.importable';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from '../components/WitnessBlockComponent';\nimport { YoutubeBlockComponent } from '../components/YoutubeBlockComponent.importable';\nimport { YoutubeEmbedBlockComponent } from '../components/YoutubeEmbedBlockComponent';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/ProfileAtomWrapper.importable` import should occur before import of `../components/RichLinkComponent.importable`","line":54,"column":1,"nodeType":"ImportDeclaration","endLine":54,"endColumn":82,"fix":{"range":[1314,3744],"text":"import { ProfileAtomWrapper } from '../components/ProfileAtomWrapper.importable';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\nimport { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { VideoFacebookBlockComponent } from '../components/VideoFacebookBlockComponent.importable';\nimport { VimeoBlockComponent } from '../components/VimeoBlockComponent';\nimport { VineBlockComponent } from '../components/VineBlockComponent.importable';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from '../components/WitnessBlockComponent';\nimport { YoutubeBlockComponent } from '../components/YoutubeBlockComponent.importable';\nimport { YoutubeEmbedBlockComponent } from '../components/YoutubeEmbedBlockComponent';\nimport { TimelineAtomWrapper } from '../components/TimelineAtomWrapper.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/QandaAtomWrapper.importable` import should occur before import of `../components/RichLinkComponent.importable`","line":55,"column":1,"nodeType":"ImportDeclaration","endLine":55,"endColumn":78,"fix":{"range":[1314,3822],"text":"import { QandaAtomWrapper } from '../components/QandaAtomWrapper.importable';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\nimport { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { VideoFacebookBlockComponent } from '../components/VideoFacebookBlockComponent.importable';\nimport { VimeoBlockComponent } from '../components/VimeoBlockComponent';\nimport { VineBlockComponent } from '../components/VineBlockComponent.importable';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from '../components/WitnessBlockComponent';\nimport { YoutubeBlockComponent } from '../components/YoutubeBlockComponent.importable';\nimport { YoutubeEmbedBlockComponent } from '../components/YoutubeEmbedBlockComponent';\nimport { TimelineAtomWrapper } from '../components/TimelineAtomWrapper.importable';\nimport { ProfileAtomWrapper } from '../components/ProfileAtomWrapper.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/PersonalityQuizAtomWrapper.importable` import should occur before import of `../components/RichLinkComponent.importable`","line":56,"column":1,"nodeType":"ImportDeclaration","endLine":56,"endColumn":98,"fix":{"range":[1314,3920],"text":"import { PersonalityQuizAtomWrapper } from '../components/PersonalityQuizAtomWrapper.importable';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\nimport { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { VideoFacebookBlockComponent } from '../components/VideoFacebookBlockComponent.importable';\nimport { VimeoBlockComponent } from '../components/VimeoBlockComponent';\nimport { VineBlockComponent } from '../components/VineBlockComponent.importable';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from '../components/WitnessBlockComponent';\nimport { YoutubeBlockComponent } from '../components/YoutubeBlockComponent.importable';\nimport { YoutubeEmbedBlockComponent } from '../components/YoutubeEmbedBlockComponent';\nimport { TimelineAtomWrapper } from '../components/TimelineAtomWrapper.importable';\nimport { ProfileAtomWrapper } from '../components/ProfileAtomWrapper.importable';\nimport { QandaAtomWrapper } from '../components/QandaAtomWrapper.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/KnowledgeQuizAtomWrapper.importable` import should occur before import of `../components/RichLinkComponent.importable`","line":57,"column":1,"nodeType":"ImportDeclaration","endLine":57,"endColumn":94,"fix":{"range":[1314,4014],"text":"import { KnowledgeQuizAtomWrapper } from '../components/KnowledgeQuizAtomWrapper.importable';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\nimport { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { VideoFacebookBlockComponent } from '../components/VideoFacebookBlockComponent.importable';\nimport { VimeoBlockComponent } from '../components/VimeoBlockComponent';\nimport { VineBlockComponent } from '../components/VineBlockComponent.importable';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from '../components/WitnessBlockComponent';\nimport { YoutubeBlockComponent } from '../components/YoutubeBlockComponent.importable';\nimport { YoutubeEmbedBlockComponent } from '../components/YoutubeEmbedBlockComponent';\nimport { TimelineAtomWrapper } from '../components/TimelineAtomWrapper.importable';\nimport { ProfileAtomWrapper } from '../components/ProfileAtomWrapper.importable';\nimport { QandaAtomWrapper } from '../components/QandaAtomWrapper.importable';\nimport { PersonalityQuizAtomWrapper } from '../components/PersonalityQuizAtomWrapper.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/Figure` import should occur before import of `../components/GuideAtomWrapper.importable`","line":58,"column":1,"nodeType":"ImportDeclaration","endLine":58,"endColumn":47,"fix":{"range":[1159,4061],"text":"import { Figure } from '../components/Figure';\nimport { GuideAtomWrapper } from '../components/GuideAtomWrapper.importable';\nimport { GuVideoBlockComponent } from '../components/GuVideoBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\nimport { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { VideoFacebookBlockComponent } from '../components/VideoFacebookBlockComponent.importable';\nimport { VimeoBlockComponent } from '../components/VimeoBlockComponent';\nimport { VineBlockComponent } from '../components/VineBlockComponent.importable';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from '../components/WitnessBlockComponent';\nimport { YoutubeBlockComponent } from '../components/YoutubeBlockComponent.importable';\nimport { YoutubeEmbedBlockComponent } from '../components/YoutubeEmbedBlockComponent';\nimport { TimelineAtomWrapper } from '../components/TimelineAtomWrapper.importable';\nimport { ProfileAtomWrapper } from '../components/ProfileAtomWrapper.importable';\nimport { QandaAtomWrapper } from '../components/QandaAtomWrapper.importable';\nimport { PersonalityQuizAtomWrapper } from '../components/PersonalityQuizAtomWrapper.importable';\nimport { KnowledgeQuizAtomWrapper } from '../components/KnowledgeQuizAtomWrapper.importable';\n"}},{"ruleId":"import/order","severity":1,"message":"`../components/Island` import should occur before import of `../components/RichLinkComponent.importable`","line":63,"column":1,"nodeType":"ImportDeclaration","endLine":63,"endColumn":47,"fix":{"range":[1314,4216],"text":"import { Island } from '../components/Island';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\nimport { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { VideoFacebookBlockComponent } from '../components/VideoFacebookBlockComponent.importable';\nimport { VimeoBlockComponent } from '../components/VimeoBlockComponent';\nimport { VineBlockComponent } from '../components/VineBlockComponent.importable';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from '../components/WitnessBlockComponent';\nimport { YoutubeBlockComponent } from '../components/YoutubeBlockComponent.importable';\nimport { YoutubeEmbedBlockComponent } from '../components/YoutubeEmbedBlockComponent';\nimport { TimelineAtomWrapper } from '../components/TimelineAtomWrapper.importable';\nimport { ProfileAtomWrapper } from '../components/ProfileAtomWrapper.importable';\nimport { QandaAtomWrapper } from '../components/QandaAtomWrapper.importable';\nimport { PersonalityQuizAtomWrapper } from '../components/PersonalityQuizAtomWrapper.importable';\nimport { KnowledgeQuizAtomWrapper } from '../components/KnowledgeQuizAtomWrapper.importable';\nimport { Figure } from '../components/Figure';\nimport {\n\tinteractiveLegacyFigureClasses,\n\tisInteractive,\n} from '../layouts/lib/interactiveLegacyStyling';\n"}},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":252,"column":27,"nodeType":"Punctuator","messageId":"preferNullish","endLine":252,"endColumn":29,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9056,9058],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":264,"column":25,"nodeType":"Punctuator","messageId":"preferNullish","endLine":264,"endColumn":27,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[9279,9281],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":339,"column":29,"nodeType":"Punctuator","messageId":"preferNullish","endLine":339,"endColumn":31,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[11129,11131],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":437,"column":14,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":437,"endColumn":63,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[13714,13763],"text":"element.posterImage?.[0].url"},"desc":"Change to an optional chain."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":679,"column":6,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":679,"endColumn":59},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":693,"column":6,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":693,"endColumn":59},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":706,"column":6,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":706,"endColumn":58}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":27,"fixableErrorCount":0,"fixableWarningCount":20,"source":"import {\n\tExplainerAtom,\n\tInteractiveAtom,\n\tInteractiveLayoutAtom,\n\tVideoAtom,\n} from '@guardian/atoms-rendering';\nimport type { ArticleFormat } from '@guardian/libs';\nimport { ArticleDesign } from '@guardian/libs';\nimport { getSharingUrls } from '../../lib/sharing-urls';\nimport { AudioAtomWrapper } from '../components/AudioAtomWrapper.importable';\nimport { BlockquoteBlockComponent } from '../components/BlockquoteBlockComponent';\nimport { CalloutBlockComponent } from '../components/CalloutBlockComponent.importable';\nimport { CaptionBlockComponent } from '../components/CaptionBlockComponent';\nimport { ChartAtomWrapper } from '../components/ChartAtomWrapper.importable';\nimport { CodeBlockComponent } from '../components/CodeBlockComponent';\nimport { CommentBlockComponent } from '../components/CommentBlockComponent';\nimport { DisclaimerBlockComponent } from '../components/DisclaimerBlockComponent';\nimport { DividerBlockComponent } from '../components/DividerBlockComponent';\nimport { DocumentBlockComponent } from '../components/DocumentBlockComponent.importable';\nimport { EmbedBlockComponent } from '../components/EmbedBlockComponent.importable';\nimport { GuideAtomWrapper } from '../components/GuideAtomWrapper.importable';\nimport { GuVideoBlockComponent } from '../components/GuVideoBlockComponent';\nimport { RichLinkComponent } from '../components/RichLinkComponent.importable';\nimport { SoundcloudBlockComponent } from '../components/SoundcloudBlockComponent';\nimport { SpotifyBlockComponent } from '../components/SpotifyBlockComponent.importable';\nimport { StarRatingBlockComponent } from '../components/StarRatingBlockComponent';\nimport { SubheadingBlockComponent } from '../components/SubheadingBlockComponent';\nimport { TableBlockComponent } from '../components/TableBlockComponent';\nimport { UnsafeEmbedBlockComponent } from '../components/UnsafeEmbedBlockComponent.importable';\nimport { HighlightBlockComponent } from '../components/HighlightBlockComponent';\nimport { ImageBlockComponent } from '../components/ImageBlockComponent';\nimport { InstagramBlockComponent } from '../components/InstagramBlockComponent.importable';\nimport { InteractiveBlockComponent } from '../components/InteractiveBlockComponent.importable';\nimport { ItemLinkBlockElement } from '../components/ItemLinkBlockElement';\nimport { InteractiveContentsBlockComponent } from '../components/InteractiveContentsBlockComponent';\nimport { MainMediaEmbedBlockComponent } from '../components/MainMediaEmbedBlockComponent';\nimport { NumberedTitleBlockComponent } from '../components/NumberedTitleBlockComponent';\nimport { MapEmbedBlockComponent } from '../components/MapEmbedBlockComponent.importable';\nimport { MultiImageBlockComponent } from '../components/MultiImageBlockComponent';\nimport { PullQuoteBlockComponent } from '../components/PullQuoteBlockComponent';\nimport { TextBlockComponent } from '../components/TextBlockComponent';\nimport { TweetBlockComponent } from '../components/TweetBlockComponent.importable';\nimport { VideoFacebookBlockComponent } from '../components/VideoFacebookBlockComponent.importable';\nimport { VimeoBlockComponent } from '../components/VimeoBlockComponent';\nimport { VineBlockComponent } from '../components/VineBlockComponent.importable';\nimport {\n\tWitnessImageBlockComponent,\n\tWitnessTextBlockComponent,\n\tWitnessVideoBlockComponent,\n} from '../components/WitnessBlockComponent';\nimport { YoutubeBlockComponent } from '../components/YoutubeBlockComponent.importable';\nimport { YoutubeEmbedBlockComponent } from '../components/YoutubeEmbedBlockComponent';\nimport { TimelineAtomWrapper } from '../components/TimelineAtomWrapper.importable';\nimport { ProfileAtomWrapper } from '../components/ProfileAtomWrapper.importable';\nimport { QandaAtomWrapper } from '../components/QandaAtomWrapper.importable';\nimport { PersonalityQuizAtomWrapper } from '../components/PersonalityQuizAtomWrapper.importable';\nimport { KnowledgeQuizAtomWrapper } from '../components/KnowledgeQuizAtomWrapper.importable';\nimport { Figure } from '../components/Figure';\nimport {\n\tinteractiveLegacyFigureClasses,\n\tisInteractive,\n} from '../layouts/lib/interactiveLegacyStyling';\nimport { Island } from '../components/Island';\nimport { decidePalette } from './decidePalette';\n\ntype Props = {\n\tformat: ArticleFormat;\n\telement: CAPIElement;\n\tadTargeting?: AdTargeting;\n\thost?: string;\n\tindex: number;\n\tisMainMedia: boolean;\n\thideCaption?: boolean;\n\tstarRating?: number;\n\tpageId: string;\n\twebTitle: string;\n\tajaxUrl: string;\n\tisAdFreeUser: boolean;\n\tisSensitive: boolean;\n\tswitches: { [key: string]: boolean };\n};\n\n// updateRole modifies the role of an element in a way appropriate for most\n// article types.\nconst updateRole = (el: CAPIElement, format: ArticleFormat): CAPIElement => {\n\tconst isBlog =\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog;\n\n\tswitch (el._type) {\n\t\tcase 'model.dotcomrendering.pageElements.ImageBlockElement':\n\t\t\tif (isBlog && el.role !== 'thumbnail') {\n\t\t\t\tel.role = 'inline';\n\t\t\t}\n\n\t\t\treturn el;\n\t\tcase 'model.dotcomrendering.pageElements.RichLinkBlockElement':\n\t\t\tif (isBlog) {\n\t\t\t\tel.role = 'inline';\n\t\t\t} else {\n\t\t\t\tel.role = 'richLink';\n\t\t\t}\n\n\t\t\treturn el;\n\t\tdefault:\n\t\t\tif (isBlog && 'role' in el) {\n\t\t\t\tel.role = 'inline';\n\t\t\t}\n\n\t\t\treturn el;\n\t}\n};\n\n// renderElement converts a CAPI element to JSX. A boolean 'ok' flag is returned\n// along with the element to indicate if the element is null, in which case\n// callers can e.g. avoid further work/wrapping as required. Unfortunately,\n// there is no straightforward way to tell if a React element is null by direct\n// inspection.\nexport const renderElement = ({\n\tformat,\n\telement,\n\tadTargeting,\n\thost,\n\tindex,\n\thideCaption,\n\tisMainMedia,\n\tstarRating,\n\tpageId,\n\twebTitle,\n\tajaxUrl,\n\tisAdFreeUser,\n\tswitches,\n\tisSensitive,\n}: Props): [boolean, JSX.Element] => {\n\tconst palette = decidePalette(format);\n\n\tconst isBlog =\n\t\tformat.design === ArticleDesign.LiveBlog ||\n\t\tformat.design === ArticleDesign.DeadBlog;\n\n\tswitch (element._type) {\n\t\tcase 'model.dotcomrendering.pageElements.AudioAtomBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island>\n\t\t\t\t\t<AudioAtomWrapper\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttrackUrl={element.trackUrl}\n\t\t\t\t\t\tkicker={element.kicker}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\tduration={element.duration}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\tcontentIsNotSensitive={!isSensitive}\n\t\t\t\t\t\taCastisEnabled={switches.acast}\n\t\t\t\t\t\treaderCanBeShownAds={!isAdFreeUser}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.BlockquoteBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<BlockquoteBlockComponent\n\t\t\t\t\tkey={index}\n\t\t\t\t\thtml={element.html}\n\t\t\t\t\tpalette={palette}\n\t\t\t\t\tquoted={element.quoted}\n\t\t\t\t/>,\n\t\t\t];\n\n\t\tcase 'model.dotcomrendering.pageElements.CalloutBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<CalloutBlockComponent callout={element} format={format} />\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.CaptionBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<CaptionBlockComponent\n\t\t\t\t\tkey={index}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tcaptionText={element.captionText}\n\t\t\t\t\tpadCaption={element.padCaption}\n\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\tdisplayCredit={element.displayCredit}\n\t\t\t\t\tshouldLimitWidth={element.shouldLimitWidth}\n\t\t\t\t\tisOverlayed={element.isOverlayed}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.ChartAtomBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<ChartAtomWrapper id={element.id} html={element.html} />\n\t\t\t\t</Island>,\n\t\t\t];\n\n\t\tcase 'model.dotcomrendering.pageElements.CodeBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<CodeBlockComponent\n\t\t\t\t\tcode={element.html}\n\t\t\t\t\tlanguage={element.language}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.CommentBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<CommentBlockComponent\n\t\t\t\t\tbody={element.body}\n\t\t\t\t\tavatarURL={element.avatarURL}\n\t\t\t\t\tprofileURL={element.profileURL}\n\t\t\t\t\tprofileName={element.profileName}\n\t\t\t\t\tdateTime={element.dateTime}\n\t\t\t\t\tpermalink={element.permalink}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.DisclaimerBlockElement':\n\t\t\treturn [true, <DisclaimerBlockComponent html={element.html} />];\n\t\tcase 'model.dotcomrendering.pageElements.DividerBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<DividerBlockComponent\n\t\t\t\t\tsize={element.size}\n\t\t\t\t\tspaceAbove={element.spaceAbove}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.DocumentBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<DocumentBlockComponent\n\t\t\t\t\t\tembedUrl={element.embedUrl}\n\t\t\t\t\t\theight={element.height}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t\tisTracking={element.isThirdPartyTracking}\n\t\t\t\t\t\trole={element.role}\n\t\t\t\t\t\tsource={element.source}\n\t\t\t\t\t\tsourceDomain={element.sourceDomain}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\twidth={element.width}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.EmbedBlockElement':\n\t\t\tif (!element.safe) {\n\t\t\t\tif (isMainMedia) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t<MainMediaEmbedBlockComponent\n\t\t\t\t\t\t\ttitle={element.alt || ''}\n\t\t\t\t\t\t\tsrcDoc={element.html}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\ttrue,\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<UnsafeEmbedBlockComponent\n\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\t\talt={element.alt || ''}\n\t\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\t\trole={element.role}\n\t\t\t\t\t\t\tisTracking={element.isThirdPartyTracking}\n\t\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t\t\tsource={element.source}\n\t\t\t\t\t\t\tsourceDomain={element.sourceDomain}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>,\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<EmbedBlockComponent\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\tcaption={element.caption}\n\t\t\t\t\t\trole={element.role}\n\t\t\t\t\t\tisTracking={element.isThirdPartyTracking}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t\tsource={element.source}\n\t\t\t\t\t\tsourceDomain={element.sourceDomain}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.ExplainerAtomBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<ExplainerAtom\n\t\t\t\t\tkey={index}\n\t\t\t\t\tid={element.id}\n\t\t\t\t\ttitle={element.title}\n\t\t\t\t\thtml={element.body}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.GuideAtomBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<GuideAtomWrapper\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\timage={element.img}\n\t\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.GuVideoBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<GuVideoBlockComponent\n\t\t\t\t\thtml={element.html}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tcredit={element.source}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\tcaption={element.caption}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.HighlightBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<HighlightBlockComponent key={index} html={element.html} />,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.ImageBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<ImageBlockComponent\n\t\t\t\t\tformat={format}\n\t\t\t\t\tkey={index}\n\t\t\t\t\telement={element}\n\t\t\t\t\thideCaption={hideCaption}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\tstarRating={starRating || element.starRating}\n\t\t\t\t\ttitle={element.title}\n\t\t\t\t\tisAvatar={element.isAvatar}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.InstagramBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<InstagramBlockComponent\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tindex={index}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.InteractiveAtomBlockElement':\n\t\t\tif (\n\t\t\t\tformat.design === ArticleDesign.Interactive ||\n\t\t\t\tformat.design === ArticleDesign.FullPageInteractive\n\t\t\t) {\n\t\t\t\treturn [\n\t\t\t\t\ttrue,\n\t\t\t\t\t<InteractiveLayoutAtom\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\telementHtml={element.html}\n\t\t\t\t\t\telementJs={element.js}\n\t\t\t\t\t\telementCss={element.css}\n\t\t\t\t\t/>,\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<InteractiveAtom\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\tid={element.id}\n\t\t\t\t\telementHtml={element.html}\n\t\t\t\t\telementJs={element.js}\n\t\t\t\t\telementCss={element.css}\n\t\t\t\t\tformat={format}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.InteractiveBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<InteractiveBlockComponent\n\t\t\t\t\t\turl={element.url}\n\t\t\t\t\t\tscriptUrl={element.scriptUrl}\n\t\t\t\t\t\talt={element.alt}\n\t\t\t\t\t\trole={element.role}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\telementId={element.elementId}\n\t\t\t\t\t\tcaption={element.caption}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.ItemLinkBlockElement':\n\t\t\treturn [true, <ItemLinkBlockElement html={element.html} />];\n\t\tcase 'model.dotcomrendering.pageElements.InteractiveContentsBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<div id={element.elementId}>\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<InteractiveContentsBlockComponent\n\t\t\t\t\t\t\tsubheadingLinks={element.subheadingLinks}\n\t\t\t\t\t\t\tendDocumentElementId={element.endDocumentElementId}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Island>\n\t\t\t\t</div>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.MapBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<MapEmbedBlockComponent\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tembedUrl={element.embedUrl}\n\t\t\t\t\t\theight={element.height}\n\t\t\t\t\t\twidth={element.width}\n\t\t\t\t\t\tcaption={element.caption}\n\t\t\t\t\t\tcredit={element.source}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\trole={element.role}\n\t\t\t\t\t\tisTracking={element.isThirdPartyTracking}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t\tsource={element.source}\n\t\t\t\t\t\tsourceDomain={element.sourceDomain}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.MediaAtomBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<VideoAtom\n\t\t\t\t\tassets={element.assets}\n\t\t\t\t\tposter={element.posterImage && element.posterImage[0].url}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.MultiImageBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<MultiImageBlockComponent\n\t\t\t\t\tformat={format}\n\t\t\t\t\tkey={index}\n\t\t\t\t\timages={element.images}\n\t\t\t\t\tcaption={element.caption}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.NumberedTitleBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<NumberedTitleBlockComponent\n\t\t\t\t\tposition={element.position}\n\t\t\t\t\thtml={element.html}\n\t\t\t\t\tformat={element.format}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.ProfileAtomBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<ProfileAtomWrapper\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\timage={element.img}\n\t\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.PullquoteBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<PullQuoteBlockComponent\n\t\t\t\t\tkey={index}\n\t\t\t\t\thtml={element.html}\n\t\t\t\t\tpalette={palette}\n\t\t\t\t\tdesign={format.design}\n\t\t\t\t\tattribution={element.attribution}\n\t\t\t\t\trole={element.role}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.QABlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<QandaAtomWrapper\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\thtml={element.html}\n\t\t\t\t\t\timage={element.img}\n\t\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.QuizAtomBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<>\n\t\t\t\t\t{element.quizType === 'personality' && (\n\t\t\t\t\t\t<Island>\n\t\t\t\t\t\t\t<PersonalityQuizAtomWrapper\n\t\t\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\t\t\tquestions={element.questions}\n\t\t\t\t\t\t\t\tresultBuckets={element.resultBuckets}\n\t\t\t\t\t\t\t\tsharingUrls={getSharingUrls(pageId, webTitle)}\n\t\t\t\t\t\t\t\ttheme={format.theme}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t)}\n\t\t\t\t\t{element.quizType === 'knowledge' && (\n\t\t\t\t\t\t<Island>\n\t\t\t\t\t\t\t<KnowledgeQuizAtomWrapper\n\t\t\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\t\t\tquestions={element.questions}\n\t\t\t\t\t\t\t\tresultGroups={element.resultGroups}\n\t\t\t\t\t\t\t\tsharingUrls={getSharingUrls(pageId, webTitle)}\n\t\t\t\t\t\t\t\ttheme={format.theme}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Island>\n\t\t\t\t\t)}\n\t\t\t\t</>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.RichLinkBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"idle\">\n\t\t\t\t\t<RichLinkComponent\n\t\t\t\t\t\trichLinkIndex={index}\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\tajaxUrl={ajaxUrl}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.SoundcloudBlockElement':\n\t\t\treturn [true, <SoundcloudBlockComponent element={element} />];\n\t\tcase 'model.dotcomrendering.pageElements.SpotifyBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<SpotifyBlockComponent\n\t\t\t\t\t\tembedUrl={element.embedUrl}\n\t\t\t\t\t\theight={element.height}\n\t\t\t\t\t\twidth={element.width}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tcaption={element.caption}\n\t\t\t\t\t\tcredit=\"Spotify\"\n\t\t\t\t\t\trole={element.role}\n\t\t\t\t\t\tisTracking={element.isThirdPartyTracking}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t\tsource={element.source}\n\t\t\t\t\t\tsourceDomain={element.sourceDomain}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.StarRatingBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<StarRatingBlockComponent\n\t\t\t\t\tkey={index}\n\t\t\t\t\trating={element.rating}\n\t\t\t\t\tsize={element.size}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.SubheadingBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<SubheadingBlockComponent key={index} html={element.html} />,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.TableBlockElement':\n\t\t\treturn [true, <TableBlockComponent element={element} />];\n\n\t\tcase 'model.dotcomrendering.pageElements.TextBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<TextBlockComponent\n\t\t\t\t\tkey={index}\n\t\t\t\t\tisFirstParagraph={index === 0}\n\t\t\t\t\thtml={element.html}\n\t\t\t\t\tformat={format}\n\t\t\t\t\tforceDropCap={element.dropCap}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.TimelineBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<TimelineAtomWrapper\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\ttitle={element.title}\n\t\t\t\t\t\tpillar={format.theme}\n\t\t\t\t\t\tevents={element.events}\n\t\t\t\t\t\tdescription={element.description}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.TweetBlockElement':\n\t\t\tif (switches.enhanceTweets) {\n\t\t\t\treturn [\n\t\t\t\t\ttrue,\n\t\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t\t<TweetBlockComponent element={element} />\n\t\t\t\t\t</Island>,\n\t\t\t\t];\n\t\t\t}\n\t\t\treturn [true, <TweetBlockComponent element={element} />];\n\t\tcase 'model.dotcomrendering.pageElements.VideoFacebookBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<VideoFacebookBlockComponent\n\t\t\t\t\t\trole={element.role}\n\t\t\t\t\t\tisTracking={element.isThirdPartyTracking}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t\tsource={element.source}\n\t\t\t\t\t\tsourceDomain={element.sourceDomain}\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tembedUrl={element.embedUrl}\n\t\t\t\t\t\theight={element.height}\n\t\t\t\t\t\twidth={element.width}\n\t\t\t\t\t\tcaption={element.caption}\n\t\t\t\t\t\tcredit={element.caption}\n\t\t\t\t\t\ttitle={element.caption}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.VideoVimeoBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<VimeoBlockComponent\n\t\t\t\t\tformat={format}\n\t\t\t\t\tembedUrl={element.embedUrl}\n\t\t\t\t\theight={element.height}\n\t\t\t\t\twidth={element.width}\n\t\t\t\t\tcaption={element.caption}\n\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\ttitle={element.title}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.VideoYoutubeBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<YoutubeEmbedBlockComponent\n\t\t\t\t\tformat={format}\n\t\t\t\t\tembedUrl={element.embedUrl}\n\t\t\t\t\theight={element.height}\n\t\t\t\t\twidth={element.width}\n\t\t\t\t\tcaption={element.caption}\n\t\t\t\t\tcredit={element.credit}\n\t\t\t\t\ttitle={element.title}\n\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t/>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.VineBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island deferUntil=\"visible\">\n\t\t\t\t\t<VineBlockComponent\n\t\t\t\t\t\telement={element}\n\t\t\t\t\t\t// No role given by CAPI\n\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t\tisTracking={element.isThirdPartyTracking}\n\t\t\t\t\t\tsource={element.source}\n\t\t\t\t\t\tsourceDomain={element.sourceDomain}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.WitnessBlockElement': {\n\t\t\tconst witnessType = element.witnessTypeData._type;\n\t\t\tswitch (witnessType) {\n\t\t\t\tcase 'model.dotcomrendering.pageElements.WitnessTypeDataImage':\n\t\t\t\t\tconst witnessTypeDataImage = element.witnessTypeData;\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t<WitnessImageBlockComponent\n\t\t\t\t\t\t\tassets={element.assets}\n\t\t\t\t\t\t\tcaption={witnessTypeDataImage.caption}\n\t\t\t\t\t\t\ttitle={witnessTypeDataImage.title}\n\t\t\t\t\t\t\tauthorName={witnessTypeDataImage.authorName}\n\t\t\t\t\t\t\tdateCreated={witnessTypeDataImage.dateCreated}\n\t\t\t\t\t\t\talt={witnessTypeDataImage.alt}\n\t\t\t\t\t\t\tpalette={palette}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t];\n\t\t\t\tcase 'model.dotcomrendering.pageElements.WitnessTypeDataVideo':\n\t\t\t\t\tconst witnessTypeDataVideo = element.witnessTypeData;\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t<WitnessVideoBlockComponent\n\t\t\t\t\t\t\ttitle={witnessTypeDataVideo.title}\n\t\t\t\t\t\t\tdescription={witnessTypeDataVideo.description}\n\t\t\t\t\t\t\tauthorName={witnessTypeDataVideo.authorName}\n\t\t\t\t\t\t\tyoutubeHtml={witnessTypeDataVideo.youtubeHtml}\n\t\t\t\t\t\t\tdateCreated={witnessTypeDataVideo.dateCreated}\n\t\t\t\t\t\t\tpalette={palette}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t];\n\t\t\t\tcase 'model.dotcomrendering.pageElements.WitnessTypeDataText':\n\t\t\t\t\tconst witnessTypeDataText = element.witnessTypeData;\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t<WitnessTextBlockComponent\n\t\t\t\t\t\t\ttitle={witnessTypeDataText.title}\n\t\t\t\t\t\t\tdescription={witnessTypeDataText.description}\n\t\t\t\t\t\t\tauthorName={witnessTypeDataText.authorName}\n\t\t\t\t\t\t\tdateCreated={witnessTypeDataText.dateCreated}\n\t\t\t\t\t\t\tpalette={palette}\n\t\t\t\t\t\t/>,\n\t\t\t\t\t];\n\t\t\t\tdefault:\n\t\t\t\t\treturn [false, <></>];\n\t\t\t}\n\t\t}\n\t\tcase 'model.dotcomrendering.pageElements.YoutubeBlockElement':\n\t\t\treturn [\n\t\t\t\ttrue,\n\t\t\t\t<Island>\n\t\t\t\t\t<YoutubeBlockComponent\n\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\thideCaption={hideCaption}\n\t\t\t\t\t\trole=\"inline\"\n\t\t\t\t\t\tadTargeting={adTargeting}\n\t\t\t\t\t\tisMainMedia={isMainMedia}\n\t\t\t\t\t\tid={element.id}\n\t\t\t\t\t\telementId={element.elementId}\n\t\t\t\t\t\tassetId={element.assetId}\n\t\t\t\t\t\texpired={element.expired}\n\t\t\t\t\t\toverrideImage={element.overrideImage}\n\t\t\t\t\t\tposterImage={element.posterImage}\n\t\t\t\t\t\tduration={element.duration}\n\t\t\t\t\t\tmediaTitle={element.mediaTitle}\n\t\t\t\t\t\taltText={element.altText}\n\t\t\t\t\t\torigin={host}\n\t\t\t\t\t\tstickyVideos={isBlog && switches.stickyVideos}\n\t\t\t\t\t/>\n\t\t\t\t</Island>,\n\t\t\t];\n\t\tcase 'model.dotcomrendering.pageElements.AudioBlockElement':\n\t\tcase 'model.dotcomrendering.pageElements.ContentAtomBlockElement':\n\t\tcase 'model.dotcomrendering.pageElements.GenericAtomBlockElement':\n\t\tcase 'model.dotcomrendering.pageElements.VideoBlockElement':\n\t\tdefault:\n\t\t\treturn [false, <></>];\n\t}\n};\n\n// bareElements is the set of element types that don't get wrapped in a Figure\n// for most article types, either because they don't need it or because they\n// add the figure themselves.\nconst bareElements = new Set([\n\t'model.dotcomrendering.pageElements.BlockquoteBlockElement',\n\t'model.dotcomrendering.pageElements.CaptionBlockElement',\n\t'model.dotcomrendering.pageElements.CodeBlockElement',\n\t'model.dotcomrendering.pageElements.DividerBlockElement',\n\t'model.dotcomrendering.pageElements.MediaAtomBlockElement',\n\t'model.dotcomrendering.pageElements.PullquoteBlockElement',\n\t'model.dotcomrendering.pageElements.StarRatingBlockElement',\n\t'model.dotcomrendering.pageElements.SubheadingBlockElement',\n\t'model.dotcomrendering.pageElements.TextBlockElement',\n\t'model.dotcomrendering.pageElements.InteractiveContentsBlockElement',\n\t'model.dotcomrendering.pageElements.InteractiveBlockElement',\n]);\n\n// renderArticleElement is a wrapper for renderElement that wraps elements in a\n// Figure and adds metadata and (role-) styling appropriate for most article\n// types.\nexport const renderArticleElement = ({\n\tformat,\n\telement,\n\tadTargeting,\n\tajaxUrl,\n\thost,\n\tindex,\n\thideCaption,\n\tisMainMedia,\n\tstarRating,\n\tpageId,\n\twebTitle,\n\tisAdFreeUser,\n\tisSensitive,\n\tswitches,\n}: Props): JSX.Element => {\n\tconst withUpdatedRole = updateRole(element, format);\n\n\tconst [ok, el] = renderElement({\n\t\tformat,\n\t\telement: withUpdatedRole,\n\t\tadTargeting,\n\t\tajaxUrl,\n\t\thost,\n\t\tindex,\n\t\tisMainMedia,\n\t\thideCaption,\n\t\tstarRating,\n\t\tpageId,\n\t\twebTitle,\n\t\tisAdFreeUser,\n\t\tisSensitive,\n\t\tswitches,\n\t});\n\n\tif (!ok) {\n\t\treturn <></>;\n\t}\n\n\tconst needsFigure = !bareElements.has(element._type);\n\tconst role = 'role' in element ? (element.role as RoleType) : undefined;\n\n\treturn needsFigure ? (\n\t\t<Figure\n\t\t\tkey={'elementId' in element ? element.elementId : index}\n\t\t\tisMainMedia={isMainMedia}\n\t\t\tid={'elementId' in element ? element.elementId : undefined}\n\t\t\trole={role}\n\t\t\tclassName={\n\t\t\t\tisInteractive(format.design)\n\t\t\t\t\t? interactiveLegacyFigureClasses(element._type, role)\n\t\t\t\t\t: ''\n\t\t\t}\n\t\t\ttype={element._type}\n\t\t\tformat={format}\n\t\t>\n\t\t\t{el}\n\t\t</Figure>\n\t) : (\n\t\tel\n\t);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/revealStyles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/setAutomat.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":7,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":7,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as emotionReact from '@emotion/react';\nimport * as emotionReactJsxRuntime from '@emotion/react/jsx-runtime';\nimport React from 'react';\n\nlet hasAutomatBeenSet = false;\n\nexport const setAutomat = () => {\n\tif (!hasAutomatBeenSet) {\n\t\twindow.guardian.automat = {\n\t\t\temotionReact,\n\t\t\temotionReactJsxRuntime,\n\t\t\treact: React,\n\t\t};\n\t\thasAutomatBeenSet = true;\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/stringifyFileBase64.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":1,"column":36,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":1,"endColumn":51},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":8,"column":6,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":8,"endColumn":12},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":8,"column":6,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":10,"endColumn":51,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[201,283],"text":"reader?.result?.toString().split(';base64,')[1]"},"desc":"Change to an optional chain."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export const stringifyFileBase64 = (file: File) =>\n\tnew Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.addEventListener(\n\t\t\t'load',\n\t\t\t() => {\n\t\t\t\tconst fileAsBase64 =\n\t\t\t\t\treader &&\n\t\t\t\t\treader.result &&\n\t\t\t\t\treader.result.toString().split(';base64,')[1];\n\t\t\t\t// remove data:*/*;base64, from the start of the base64 string\n\n\t\t\t\tif (fileAsBase64) {\n\t\t\t\t\tresolve(fileAsBase64);\n\t\t\t\t} else {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t'Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files',\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse,\n\t\t);\n\t\treader.addEventListener('error', () => {\n\t\t\treject(\n\t\t\t\tnew Error(\n\t\t\t\t\t'Sorry there was a problem with the file you uploaded above. Check the size and type. We only accept images, pdfs and .doc or .docx files',\n\t\t\t\t),\n\t\t\t);\n\t\t});\n\t\treader.readAsDataURL(file);\n\t});\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/transparentColour.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/transparentColour.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useAB.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":22,"column":27,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":22,"endColumn":46},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":23,"column":0,"nodeType":null,"endLine":23,"endColumn":69}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":24,"column":2,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":24,"endColumn":26,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[707,731],"text":"void mutate(key, api, false);"},"desc":"Add void operator to ignore."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { ABTestAPI } from '@guardian/ab-core';\nimport { mutate } from 'swr';\nimport useSWRImmutable from 'swr/immutable';\n\nconst apiPromise = new Promise<ABTestAPI>(() => {});\nconst key = 'ab-test-api';\n\n/**\n * A hook which returns the AB Test Api when available,\n * or undefined otherwise.\n *\n * Leverages an immutable SWR to satisfy all requests to the\n * AB Core. As soon as the tests are available, all instances of\n * the useAB hook will render.\n */\nexport const useAB = (): ABTestAPI | undefined => {\n\tconst { data } = useSWRImmutable(key, () => apiPromise);\n\n\treturn data;\n};\n\nexport const setABTests = (api: ABTestAPI) => {\n\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\tmutate(key, api, false);\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useAdBlockInUse.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":9,"column":32,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":9,"endColumn":37},{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":12,"column":0,"nodeType":null,"endLine":12,"endColumn":70}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":13,"column":3,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":15,"endColumn":6,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[434,516],"text":"void isAdBlockInUse().then((blockerDetected) => {\n\t\t\tsetIsInUse(blockerDetected);\n\t\t});"},"desc":"Add void operator to ignore."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { isAdBlockInUse } from '@guardian/commercial-core';\nimport { useEffect, useState } from 'react';\n\n/**\n * @description\n * useAdBlockInUse provides a custom hook to integrate the isAdBlockInUse\n * promise into a react component\n * */\nexport const useAdBlockInUse = () => {\n\tconst [isInUse, setIsInUse] = useState<boolean | undefined>();\n\tuseEffect(() => {\n\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\tisAdBlockInUse().then((blockerDetected) => {\n\t\t\tsetIsInUse(blockerDetected);\n\t\t});\n\t}, []);\n\n\treturn isInUse;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useApi.tsx","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of a tuple element with an `any` value.","line":38,"column":10,"nodeType":"Identifier","messageId":"unsafeArrayPatternFromTuple","endLine":38,"endColumn":14},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of a tuple element with an `any` value.","line":38,"column":16,"nodeType":"Identifier","messageId":"unsafeArrayPatternFromTuple","endLine":38,"endColumn":21},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":41,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":41,"endColumn":7},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":42,"column":3,"nodeType":"Property","messageId":"anyAssignment","endLine":42,"endColumn":8}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { SWRConfiguration } from 'swr';\nimport useSWR from 'swr';\n\nfunction checkForErrors(response: Response) {\n\tif (!response.ok) {\n\t\tthrow Error(\n\t\t\tresponse.statusText ||\n\t\t\t\t`useApi | An api call returned HTTP status ${response.status}`,\n\t\t);\n\t}\n\treturn response;\n}\n\nconst fetcher = (init?: RequestInit) => (url: string) =>\n\tfetch(url, init)\n\t\t.then(checkForErrors)\n\t\t.then((res) => res.json());\n\ninterface ApiResponse<T> {\n\tloading: boolean;\n\tdata?: T;\n\terror?: Error;\n}\n\n/**\n * @description\n * A custom hook to make a GET request using the given url using the SWR lib (https://swr.vercel.app/)\n * returns { loading, error, data }\n * @param {String} url - The url to fetch\n * @param {SWRConfiguration} options - The SWR config object - https://swr.vercel.app/docs/options\n * @param {RequestInit} init - The fetch init object - https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\n * */\nexport const useApi = <T,>(\n\turl?: string,\n\toptions?: SWRConfiguration,\n\tinit?: RequestInit,\n): ApiResponse<T> => {\n\tconst { data, error } = useSWR(url, fetcher(init), options);\n\n\treturn {\n\t\tdata,\n\t\terror,\n\t\tloading: !error && !data,\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useBraze.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe array destructuring of a tuple element with an `any` value.","line":15,"column":31,"nodeType":"Identifier","messageId":"unsafeArrayPatternFromTuple","endLine":15,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { BrazeMessagesInterface } from '@guardian/braze-components';\nimport { NullBrazeMessages } from '@guardian/braze-components/logic';\nimport useSWRImmutable from 'swr/immutable';\nimport { buildBrazeMessages } from './braze/buildBrazeMessages';\n\n/**\n * Returns brazeMessages as BrazeMessagesInterface\n *\n * We're using useSWRImmutable to ensure this call is only made once\n * [doc]: https://swr.vercel.app/docs/revalidation#disable-automatic-revalidations\n */\nexport const useBraze = (\n\tidApiUrl: string,\n): { brazeMessages: BrazeMessagesInterface | undefined } => {\n\tconst { data: brazeMessages, error } = useSWRImmutable(\n\t\t'braze-message',\n\t\t() => buildBrazeMessages(idApiUrl),\n\t);\n\n\tif (error) {\n\t\treturn { brazeMessages: new NullBrazeMessages() };\n\t}\n\n\treturn { brazeMessages };\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useComments.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useComments.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":51,"column":25,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":51,"endColumn":53},{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":69,"column":8,"nodeType":"FunctionDeclaration","messageId":"missingReturnType","endLine":69,"endColumn":60},{"ruleId":"@typescript-eslint/prefer-optional-chain","severity":1,"message":"Prefer using an optional chain expression instead, as it's more concise and easier to read.","line":82,"column":14,"nodeType":"LogicalExpression","messageId":"preferOptionalChain","endLine":82,"endColumn":33,"suggestions":[{"messageId":"optionalChainSuggest","fix":{"range":[2675,2694],"text":"data?.counts"},"desc":"Change to an optional chain."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":82,"column":22,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":82,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\nimport { useApi } from './useApi';\n\ntype CommentType = {\n\tid: string;\n\tcount: number;\n};\n\ntype CommentsType = {\n\tcounts: CommentType[];\n};\n\n// exported for testing\nexport const findCount = (counts: CommentType[], shortUrl?: string): number => {\n\tif (!shortUrl) return 0;\n\t// Support both the legacy gu.com and also theguardian.com\n\tconst domain = shortUrl.includes('gu.com') ? 'gu.com' : 'theguardian.com';\n\tconst match = counts.find(\n\t\t(count) => count.id === shortUrl.split(domain)[1],\n\t);\n\treturn match ? match.count : 0;\n};\n\nconst updateTrailsWithCounts = (trails: TrailType[], counts: CommentType[]) => {\n\treturn trails.map((trail) => {\n\t\tconst { shortUrl } = trail;\n\t\tconst countOfComments = findCount(counts, shortUrl);\n\t\treturn {\n\t\t\t...trail,\n\t\t\t// Only set the comment count on a card if some comments were made\n\t\t\t// (otherwise we'd fill the page with distracting zero comment icons)\n\t\t\tcommentCount: countOfComments > 0 ? countOfComments : undefined,\n\t\t};\n\t});\n};\n\nconst withComments = (\n\tonwardSections: OnwardsType[],\n\tcounts: CommentType[],\n): OnwardsType[] => {\n\tif (counts.length === 0) return onwardSections;\n\treturn onwardSections.map((section) => {\n\t\treturn {\n\t\t\t...section,\n\t\t\ttrails: updateTrailsWithCounts(section.trails, counts),\n\t\t};\n\t});\n};\n\n// exported for testing\nexport const buildUrl = (sections: OnwardsType[]) => {\n\tconst shortUrls: string[] = [];\n\tsections.forEach((section) => {\n\t\tsection.trails.forEach((trail) => {\n\t\t\tif (trail.shortUrl) shortUrls.push(trail.shortUrl);\n\t\t});\n\t});\n\n\t// Expected input: [\"https://theguardian.com/p/cngmz\", \"https://gu.com/p/krefd\", ..., \"https://theguardian.com/p/cngtm\"]\n\t// Support both the legacy gu.com and also theguardian.com\n\tconst domain = shortUrls.toString().includes('gu.com')\n\t\t? 'gu.com'\n\t\t: 'theguardian.com';\n\tconst shortUrlIds = shortUrls.map((url) => url.split(domain)[1]).join(',');\n\t// Expected output: /p/3pm9v,/p/4k83z,/p/6bnba,/p/8zv38,/p/b6xa7,/p/b7cp9,/p/by5xp\n\treturn `https://api.nextgen.guardianapps.co.uk/discussion/comment-counts.json?shortUrls=${shortUrlIds}`;\n};\n\nexport function useComments(onwardsSections: OnwardsType[]) {\n\t// useComments takes the onwards response and makes a batch call to the\n\t// discussion api (useApi) to get comment counts for all articles referenced in\n\t// the trails. It then uses the response from that call to create a copy of the\n\t// onwards data that has the commentCount property filled in\n\tconst [counts, setCounts] = useState<CommentType[]>([]);\n\n\tconst url = buildUrl(onwardsSections);\n\tconst { data } = useApi<CommentsType>(url, {\n\t\trefreshInterval: 15000,\n\t});\n\n\tuseEffect(() => {\n\t\tsetCounts((data && data.counts) || []);\n\t}, [data]);\n\n\tconst sectionsWithComments = withComments(onwardsSections, counts);\n\n\treturn sectionsWithComments;\n}\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useDiscussion.ts","messages":[{"ruleId":"@typescript-eslint/explicit-module-boundary-types","severity":1,"message":"Missing return type on function.","line":53,"column":30,"nodeType":"ArrowFunctionExpression","messageId":"missingReturnType","endLine":53,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useApi } from './useApi';\n\ntype DiscussionResponse = {\n\tstatus: string;\n\tpage: number;\n\tpages: number;\n\tpageSize: number;\n\torderBy: string;\n\tdiscussion: {\n\t\tkey: string;\n\t\twebUrl: string;\n\t\tapiUrl: string;\n\t\tcommentCount: number;\n\t\ttopLevelCommentCount: number;\n\t\tisClosedForComments: boolean;\n\t\tisClosedForRecommendation: boolean;\n\t\tisThreaded: boolean;\n\t\ttitle: string;\n\t\tcomments: CommentType[];\n\t};\n};\n\ntype CommentType = {\n\tid: number;\n\tbody: string;\n\tdate: string;\n\tisoDateTime: string;\n\tstatus: string;\n\twebUrl: string;\n\tapiUrl: string;\n\tnumResponses?: number;\n\tnumRecommends: number;\n\tisHighlighted: boolean;\n\tuserProfile: UserProfile;\n\tresponseTo?: {\n\t\tdisplayName: string;\n\t\tcommentApiUrl: string;\n\t\tisoDateTime: string;\n\t\tdate: string;\n\t\tcommentId: number;\n\t\tcommentWebUrl: string;\n\t};\n\tresponses?: CommentType[];\n\tmetaData?: {\n\t\tcommentCount: number;\n\t\tstaffCommenterCount: number;\n\t\teditorsPickCount: number;\n\t\tblockedCount: number;\n\t\tresponseCount: number;\n\t};\n};\n\nexport const useDiscussion = (url: string) => {\n\tconst { data } = useApi<DiscussionResponse>(url, {\n\t\t// The default for dedupingInterval is 2 seconds but we want to wait longer here because the cache time\n\t\t// for a discussion is at least 15 seconds\n\t\tdedupingInterval: 8000,\n\t});\n\n\treturn {\n\t\tcommentCount: data?.discussion.commentCount,\n\t\tisClosedForComments: data?.discussion.isClosedForComments,\n\t};\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useDocumentHidden.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useHover.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[230,233],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[230,233],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-assignment","severity":1,"message":"Unsafe assignment of an `any` value.","line":13,"column":9,"nodeType":"VariableDeclarator","messageId":"anyAssignment","endLine":13,"endColumn":52},{"ruleId":"@typescript-eslint/no-unsafe-return","severity":1,"message":"Unsafe return of type `[MutableRefObject<any>, boolean]` from function with return type `[MutableRefObject<T>, boolean]`.","line":26,"column":2,"nodeType":"ReturnStatement","messageId":"unsafeReturnAssignment","endLine":26,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { MutableRefObject } from 'react';\nimport { useEffect, useRef, useState } from 'react';\n\nexport function useHover<T>(): [MutableRefObject<T>, boolean] {\n\tconst [value, setValue] = useState(false);\n\n\tconst ref = useRef<any>(null);\n\n\tconst handleMouseOver = () => setValue(true);\n\tconst handleMouseOut = () => setValue(false);\n\n\tuseEffect(() => {\n\t\tconst node: HTMLElement | undefined = ref.current;\n\t\tif (node) {\n\t\t\tnode.addEventListener('mouseover', handleMouseOver);\n\t\t\tnode.addEventListener('mouseout', handleMouseOut);\n\n\t\t\treturn () => {\n\t\t\t\tnode.removeEventListener('mouseover', handleMouseOver);\n\t\t\t\tnode.removeEventListener('mouseout', handleMouseOut);\n\t\t\t};\n\t\t}\n\t\treturn () => {};\n\t}, []);\n\n\treturn [ref, value];\n}\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useIsInView.ts","messages":[{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":45,"column":7,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":45,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import libDebounce from 'lodash-es/debounce';\nimport { useEffect, useRef, useState } from 'react';\n\n/**\n * Custom hook around the `IntersectionObserver`.\n *\n * @param options\n * @param {boolean} [options.debouce] If `true`, debounce triggers by 200ms.\n * By default, trigger instantaneously. Enabling debouncing ensures the target\n * element intersects for at least 200ms before the callback is executed\n * @param {boolean} [options.repeat] If `true`, trigger the hook on\n * all intersections. By default, only trigger on the first intersection.\n * @param {boolean} [options.node] Set the initial node, if known.\n * @returns a tuple containing [isInView, setNode];\n */\nconst useIsInView = (\n\toptions: IntersectionObserverInit & {\n\t\tdebounce?: true;\n\t\trepeat?: true;\n\t\tnode?: HTMLElement;\n\t},\n): [boolean, React.Dispatch<React.SetStateAction<HTMLElement | null>>] => {\n\tconst [isInView, setIsInView] = useState<boolean>(false);\n\tconst [node, setNode] = useState<HTMLElement | null>(options.node ?? null);\n\n\tconst observer = useRef<IntersectionObserver | null>(null);\n\n\tconst intersectionFn: IntersectionObserverCallback = ([entry]) => {\n\t\tif (entry.isIntersecting) {\n\t\t\tsetIsInView(true);\n\t\t} else if (options.repeat) {\n\t\t\tsetIsInView(false);\n\t\t}\n\t};\n\tconst intersectionCallback = options.debounce\n\t\t? libDebounce(intersectionFn, 200)\n\t\t: intersectionFn;\n\n\tuseEffect(() => {\n\t\t// TODO: can we remove this? It’s now always cleaned up\n\t\tif (observer.current) {\n\t\t\tobserver.current.disconnect();\n\t\t}\n\n\t\tif (window.IntersectionObserver) {\n\t\t\tobserver.current = new window.IntersectionObserver(\n\t\t\t\tintersectionCallback,\n\t\t\t\toptions,\n\t\t\t);\n\n\t\t\tif (node) {\n\t\t\t\tobserver.current.observe(node);\n\t\t\t}\n\t\t}\n\n\t\treturn () => observer.current?.disconnect();\n\t}, [node, options, intersectionCallback]);\n\n\treturn [isInView, setNode];\n};\n\nexport { useIsInView };\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useOnce.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useSignInGateSelector.ts","messages":[{"ruleId":"@typescript-eslint/prefer-nullish-coalescing","severity":1,"message":"Prefer using nullish coalescing operator (`??`) instead of a logical or (`||`), as it is a safer operator.","line":30,"column":28,"nodeType":"Punctuator","messageId":"preferNullish","endLine":30,"endColumn":30,"suggestions":[{"messageId":"suggestNullish","fix":{"range":[803,805],"text":"??"},"desc":"Fix to nullish coalescing operator (`??`)."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always falsy.","line":37,"column":7,"nodeType":"Identifier","messageId":"alwaysFalsy","endLine":37,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Runnable } from '@guardian/ab-core';\nimport {\n\tsignInGateTests,\n\tsignInGateTestVariantToGateMapping,\n} from '../components/SignInGate/signInGate';\nimport type {\n\tCurrentSignInGateABTest,\n\tSignInGateComponent,\n} from '../components/SignInGate/types';\nimport { useAB } from './useAB';\n\n/**\n * @description\n * A custom hook to make which selects the sign in gate (component and ab test)\n * to be displayed on the current page\n * */\nexport const useSignInGateSelector = ():\n\t| undefined\n\t| [SignInGateComponent | null, CurrentSignInGateABTest | null] => {\n\tconst ab = useAB();\n\tif (!ab) return undefined;\n\n\tconst test: Runnable | null = ab.firstRunnableTest(signInGateTests);\n\n\tif (!test) {\n\t\treturn [null, null];\n\t}\n\n\tconst currentTest: CurrentSignInGateABTest = {\n\t\tname: test.dataLinkNames || test.id,\n\t\tvariant: test.variantToRun.id,\n\t\tid: test.id,\n\t};\n\n\tconst gateVariant = signInGateTestVariantToGateMapping[currentTest.variant];\n\n\tif (!gateVariant) {\n\t\treturn [null, null];\n\t}\n\n\treturn [gateVariant, currentTest];\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/useSignInGateWillShow.ts","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":50,"column":0,"nodeType":null,"endLine":50,"endColumn":71}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-floating-promises","severity":2,"message":"Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","line":51,"column":4,"nodeType":"ExpressionStatement","messageId":"floatingVoid","endLine":61,"endColumn":27,"suggestions":[{"messageId":"floatingFixVoid","fix":{"range":[1428,1620],"text":"void gateVariant\n\t\t\t\t.canShow({\n\t\t\t\t\tisSignedIn: !!isSignedIn,\n\t\t\t\t\tcurrentTest,\n\t\t\t\t\tcontentType,\n\t\t\t\t\tsectionName,\n\t\t\t\t\ttags,\n\t\t\t\t\tisPaidContent,\n\t\t\t\t\tisPreview,\n\t\t\t\t})\n\t\t\t\t.then(setCanShowGate);"},"desc":"Add void operator to ignore."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useEffect, useState } from 'react';\nimport type {\n\tCurrentSignInGateABTest,\n\tSignInGateComponent,\n} from '../components/SignInGate/types';\nimport { useOnce } from './useOnce';\nimport { useSignInGateSelector } from './useSignInGateSelector';\n\ntype Props = {\n\tisSignedIn?: boolean;\n\tcontentType: string;\n\tsectionName?: string;\n\ttags: TagType[];\n\tisPaidContent: boolean;\n\tisPreview: boolean;\n};\n/**\n * @description\n * A custom hook to determine if a sign in gate will show on the current page\n * @param {Boolean} isSignedIn - Is the user signed in to the guardian\n * */\nexport const useSignInGateWillShow = ({\n\tisSignedIn,\n\tcontentType,\n\tsectionName,\n\ttags,\n\tisPaidContent,\n\tisPreview,\n}: Props): boolean | undefined => {\n\tconst [gateVariant, setGateVariant] = useState<\n\t\tSignInGateComponent | null | undefined\n\t>(undefined);\n\tconst [currentTest, setCurrentTest] = useState<\n\t\tCurrentSignInGateABTest | null | undefined\n\t>(undefined);\n\tconst [canShowGate, setCanShowGate] = useState(false);\n\tconst gateSelector = useSignInGateSelector();\n\n\tuseOnce(() => {\n\t\tconst [gateSelectorVariant, gateSelectorTest] = gateSelector as [\n\t\t\tSignInGateComponent | null,\n\t\t\tCurrentSignInGateABTest | null,\n\t\t];\n\t\tsetGateVariant(gateSelectorVariant);\n\t\tsetCurrentTest(gateSelectorTest);\n\t}, [gateSelector]);\n\n\tuseEffect(() => {\n\t\tif (gateVariant && currentTest) {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-floating-promises\n\t\t\tgateVariant\n\t\t\t\t.canShow({\n\t\t\t\t\tisSignedIn: !!isSignedIn,\n\t\t\t\t\tcurrentTest,\n\t\t\t\t\tcontentType,\n\t\t\t\t\tsectionName,\n\t\t\t\t\ttags,\n\t\t\t\t\tisPaidContent,\n\t\t\t\t\tisPreview,\n\t\t\t\t})\n\t\t\t\t.then(setCanShowGate);\n\t\t}\n\t}, [\n\t\tcurrentTest,\n\t\tgateVariant,\n\t\tisSignedIn,\n\t\tcontentType,\n\t\tsectionName,\n\t\ttags,\n\t\tisPaidContent,\n\t\tisPreview,\n\t]);\n\n\treturn canShowGate && !!gateVariant && !!gateVariant.gate;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/verticalDivider.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/lib/withSignInGateSlot.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/server/articleTemplate.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[520,523],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[520,523],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":53,"column":7,"nodeType":"Identifier","messageId":"alwaysTruthy","endLine":53,"endColumn":17},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":275,"column":8,"nodeType":"Identifier","messageId":"invalidType","endLine":275,"endColumn":19},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":285,"column":42,"nodeType":"CallExpression","messageId":"invalidType","endLine":285,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { brandBackground, resets } from '@guardian/source-foundations';\nimport he from 'he';\nimport { ASSET_ORIGIN } from '../../lib/assets';\nimport { getFontsCss } from '../../lib/fonts-css';\n\nexport const articleTemplate = ({\n\ttitle = 'The Guardian',\n\tdescription,\n\tlinkedData,\n\tpriorityScriptTags,\n\tlowPriorityScriptTags,\n\tcss,\n\thtml,\n\twindowGuardian,\n\tgaPath,\n\tfontFiles = [],\n\tampLink,\n\topenGraphData,\n\ttwitterData,\n\tkeywords,\n\tinitTwitter,\n}: {\n\ttitle?: string;\n\tdescription: string;\n\tlinkedData: { [key: string]: any };\n\tpriorityScriptTags: string[];\n\tlowPriorityScriptTags: string[];\n\tcss: string;\n\thtml: string;\n\tfontFiles?: string[];\n\twindowGuardian: string;\n\tgaPath: { modern: string; legacy: string };\n\tampLink?: string;\n\topenGraphData: { [key: string]: string };\n\ttwitterData: { [key: string]: string };\n\tkeywords: string;\n\tinitTwitter?: string;\n}): string => {\n\tconst favicon =\n\t\tprocess.env.NODE_ENV === 'production'\n\t\t\t? 'favicon-32x32.ico'\n\t\t\t: 'favicon-32x32-dev-yellow.ico';\n\n\tconst fontPreloadTags = fontFiles.map(\n\t\t(fontFile) =>\n\t\t\t`<link rel=\"preload\" href=\"${fontFile}\" as=\"font\" crossorigin>`,\n\t);\n\n\tconst generateMetaTags = (\n\t\tdataObject: { [key: string]: string },\n\t\tattributeName: 'name' | 'property',\n\t) => {\n\t\tif (dataObject) {\n\t\t\treturn Object.entries(dataObject)\n\t\t\t\t.map(\n\t\t\t\t\t([id, value]) =>\n\t\t\t\t\t\t`<meta ${attributeName}=\"${id}\" content=\"${value}\"/>`,\n\t\t\t\t)\n\t\t\t\t.join('\\n');\n\t\t}\n\t\treturn '';\n\t};\n\n\tconst openGraphMetaTags = generateMetaTags(openGraphData, 'property');\n\n\t// Opt out of having information from our website used for personalization of content and suggestions for Twitter users, including ads\n\t// See https://developer.twitter.com/en/docs/twitter-for-websites/webpage-properties/overview\n\tconst twitterSecAndPrivacyMetaTags = `<meta name=\"twitter:dnt\" content=\"on\">`;\n\n\tconst twitterMetaTags = generateMetaTags(twitterData, 'name');\n\n\t// Duplicated prefetch and preconnect tags from DCP:\n\t// Documented here: https://github.com/guardian/frontend/pull/12935\n\t// Preconnect should be used for the most crucial third party domains\n\t// \"use preconnect when you know for sure that you’re going to be accessing a resource\"\n\t// - https://www.smashingmagazine.com/2019/04/optimization-performance-resource-hints/\n\t// DNS-prefetch should be used for other third party domains that we are likely to connect to but not sure (ads)\n\t// Preconnecting to too many URLs can reduce page performance\n\t// DNS-prefetch can also be used as a fallback for IE11\n\t// More information on preconnecting:\n\t// https://css-tricks.com/using-relpreconnect-to-establish-network-connections-early-and-increase-performance/\n\t// More information on prefetching:\n\t// https://developer.mozilla.org/en-US/docs/Web/Performance/dns-prefetch\n\tconst staticPreconnectUrls = [\n\t\t`${ASSET_ORIGIN}`,\n\t\t`https://i.guim.co.uk`,\n\t\t`https://j.ophan.co.uk`,\n\t\t`https://ophan.theguardian.com`,\n\t];\n\n\tconst staticPrefetchUrls = [\n\t\t...staticPreconnectUrls,\n\t\t`https://api.nextgen.guardianapps.co.uk`,\n\t\t`https://hits-secure.theguardian.com`,\n\t\t`https://interactive.guim.co.uk`,\n\t\t`https://phar.gu-web.net`,\n\t\t`https://static.theguardian.com`,\n\t\t`https://support.theguardian.com`,\n\t];\n\n\tconst allStaticPreconnectUrls =\n\t\tprocess.env.NODE_ENV === 'production'\n\t\t\t? [...staticPreconnectUrls, 'https://sourcepoint.theguardian.com']\n\t\t\t: staticPreconnectUrls;\n\n\tconst preconnectTags = allStaticPreconnectUrls.map(\n\t\t(src) => `<link rel=\"preconnect\" href=\"${src}\">`,\n\t);\n\n\tconst prefetchTags = staticPrefetchUrls.map(\n\t\t(src) => `<link rel=\"dns-prefetch\" href=\"${src}\">`,\n\t);\n\n\tconst weAreHiringMessage = `\n<!--\n\nWe are hiring, ever thought about joining us?\nhttps://workforus.theguardian.com/careers/product-engineering/\n\n\n                                    GGGGGGGGG\n                           GGGGGGGGGGGGGGGGGGGGGGGGGG\n                       GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n                    GGGGGGGGGGGGGGGGG      GG   GGGGGGGGGGGGG\n                  GGGGGGGGGGGG        GGGGGGGGG      GGGGGGGGGG\n                GGGGGGGGGGG         GGGGGGGGGGGGG       GGGGGGGGG\n              GGGGGGGGGG          GGGGGGGGGGGGGGGGG     GGGGGGGGGGG\n             GGGGGGGGG           GGGGGGGGGGGGGGGGGGG    GGGGGGGGGGGG\n            GGGGGGGGG           GGGGGGGGGGGGGGGGGGGGGG  GGGGGGGGGGGGG\n           GGGGGGGGG            GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n           GGGGGGGG             GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n          GGGGGGGG              GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n          GGGGGGGG              GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n          GGGGGGGG              GGGGGGGGGGGG              GGGGGGGGGGGGG\n           GGGGGGG              GGGGGGGGGGGGG           GGGGGGGGGGGGGG\n           GGGGGGGG             GGGGGGGGGGGGG           GGGGGGGGGGGGGG\n            GGGGGGGG            GGGGGGGGGGGGG           GGGGGGGGGGGGG\n             GGGGGGGG            GGGGGGGGGGGG           GGGGGGGGGGGG\n              GGGGGGGGG           GGGGGGGGGGG           GGGGGGGGGGG\n                GGGGGGGGGG         GGGGGGGGGG           GGGGGGGGG\n                  GGGGGGGGGGG        GGGGGGGG        GGGGGGGGGG\n                    GGGGGGGGGGGGGG      GGGGG  GGGGGGGGGGGGGG\n                       GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n                            GGGGGGGGGGGGGGGGGGGGGGGGG\n                                    GGGGGGGGG\n\n\n         GGGGG    GGG     GGG\n        G     G  G   G   G   G     G   G  GGGGGG    GG    GGGGG    GGGG\n              G G     G G     G     G G   G        G  G   G    G  G\n         GGGGG  G     G G     G      G    GGGGG   G    G  G    G   GGGG\n        G       G     G G     G      G    G       GGGGGG  GGGGG        G\n        G        G   G   G   G       G    G       G    G  G   G   G    G\n        GGGGGGG   GGG     GGG        G    GGGGGG  G    G  G    G   GGGG\n\n--->`;\n\n\treturn `<!doctype html>\n        <html lang=\"en\">\n            <head>\n\t\t\t    ${weAreHiringMessage}\n                <title>${title}</title>\n                <meta name=\"description\" content=\"${he.encode(description)}\" />\n                <meta charset=\"utf-8\">\n\n                <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n                <meta name=\"theme-color\" content=\"${brandBackground.primary}\" />\n                <link rel=\"icon\" href=\"https://static.guim.co.uk/images/${favicon}\">\n\n                ${preconnectTags.join('\\n')}\n                ${prefetchTags.join('\\n')}\n\n                <script type=\"application/ld+json\">\n                    ${JSON.stringify(linkedData)}\n                </script>\n\n                <!-- TODO make this conditional when we support more content types -->\n                ${ampLink ? `<link rel=\"amphtml\" href=\"${ampLink}\">` : ''}\n\n                ${fontPreloadTags.join('\\n')}\n\n                ${openGraphMetaTags}\n\n                ${twitterSecAndPrivacyMetaTags}\n\n                ${twitterMetaTags}\n\n                <!--  This tag enables pages to be featured in Google Discover as large previews\n                    See: https://developers.google.com/search/docs/advanced/mobile/google-discover?hl=en&visit_id=637424198370039526-3805703503&rd=1 -->\n                <meta name=\"robots\" content=\"max-image-preview:large\">\n\n                <script>\n                    window.guardian = ${windowGuardian};\n                    window.guardian.queue = []; // Queue for functions to be fired by polyfill.io callback\n                </script>\n\n                <script type=\"module\">\n                    window.guardian.mustardCut = true;\n                    window.guardian.gaPath = \"${gaPath.modern}\";\n                </script>\n\n                <script nomodule>\n                    // Browser fails mustard check\n                    window.guardian.mustardCut = false;\n                    window.guardian.gaPath = \"${gaPath.legacy}\";\n                </script>\n\n                <script>\n                    // Noop monkey patch perf.mark and perf.measure if not supported\n                    if(window.performance !== undefined && window.performance.mark === undefined) {\n                        window.performance.mark = function(){};\n                        window.performance.measure = function(){};\n                    }\n                </script>\n\n                <script>\n                    // this is a global that's called at the bottom of the pf.io response,\n                    // once the polyfills have run. This may be useful for debugging.\n                    // mainly to support browsers that don't support async=false or defer\n                    function guardianPolyfilled() {\n                        window.guardian.polyfilled = true;\n                        if (window.guardian.mustardCut === false) {\n                            window.guardian.queue.forEach(function(startup) { startup() })\n                        }\n                    }\n\n                    // We've got contracts to abide by with the Ophan tracker\n                    // Setting pageViewId here ensures we're not getting race-conditions at all\n                    window.guardian.config.ophan = {\n                        // This is duplicated from\n                        // https://github.com/guardian/ophan/blob/master/tracker-js/assets/coffee/ophan/transmit.coffee\n                        // Please do not change this without talking to the Ophan project first.\n                        pageViewId:\n                            new Date().getTime().toString(36) +\n                            'xxxxxxxxxxxx'.replace(/x/g, function() {\n                                return Math.floor(Math.random() * 36).toString(36);\n                            }),\n                    };\n                </script>\n\n                <script>\n                    // Set the browserId from the bwid cookie on the ophan object created above\n                    // This will need to be replaced later with an async request to an endpoint\n                    (function (window, document) {\n\n                        function getCookieValue(name) {\n                            var nameEq = name + \"=\",\n                                cookies = document.cookie.split(';'),\n                                value = null;\n                            cookies.forEach(function (cookie) {\n                                while (cookie.charAt(0) === ' ') {\n                                    cookie = cookie.substring(1, cookie.length);\n                                }\n                                if (cookie.indexOf(nameEq) === 0) {\n                                    value = cookie.substring(nameEq.length, cookie.length);\n                                }\n                            });\n                            return value;\n                        }\n\n                        window.guardian.config.ophan.browserId = getCookieValue(\"bwid\");\n\n                    })(window, document);\n                </script>\n\n\t\t\t\t<script>\n\t\t\t\t\twindow.curlConfig = {\n\t\t\t\t\t\tbaseUrl: '${ASSET_ORIGIN}assets',\n\t\t\t\t\t\tapiName: 'require'\n\t\t\t\t\t};\n\t\t\t\t\twindow.curl = window.curlConfig;\n\t\t\t\t</script>\n\n\t\t\t\t<script>\n\t\t\t\t\t${initTwitter}\n\t\t\t\t</script>\n\n\n                <noscript>\n                    <img src=\"https://sb.scorecardresearch.com/p?c1=2&c2=6035250&cv=2.0&cj=1&cs_ucfr=0&comscorekw=${encodeURIComponent(\n\t\t\t\t\t\tkeywords,\n\t\t\t\t\t).replace(/%20/g, '+')}\" />\n                </noscript>\n                ${priorityScriptTags.join('\\n')}\n                <style class=\"webfont\">${getFontsCss()}</style>\n                <style>${resets.resetCSS}</style>\n\t\t\t\t${css}\n\t\t\t\t<link rel=\"stylesheet\" media=\"print\" href=\"${ASSET_ORIGIN}static/frontend/css/print.css\">\n\t\t\t</head>\n\n\t\t\t<body>\n                ${html}\n                ${[...lowPriorityScriptTags].join('\\n')}\n            </body>\n        </html>`;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/server/articleToHtml.tsx","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":59,"column":0,"nodeType":null,"endLine":59,"endColumn":63},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":126,"column":3,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":126,"endColumn":21}],"suppressedMessages":[{"ruleId":"@typescript-eslint/unbound-method","severity":2,"message":"Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.","line":60,"column":8,"nodeType":"VariableDeclarator","messageId":"unboundWithoutThisAnnotation","endLine":61,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/unbound-method","severity":2,"message":"Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.","line":60,"column":8,"nodeType":"VariableDeclarator","messageId":"unboundWithoutThisAnnotation","endLine":61,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import createCache from '@emotion/cache';\nimport { CacheProvider } from '@emotion/react';\nimport createEmotionServer from '@emotion/server/create-instance';\nimport { ArticleDesign, ArticlePillar } from '@guardian/libs';\nimport { renderToString } from 'react-dom/server';\nimport { ASSET_ORIGIN, getScriptArrayFromFile } from '../../lib/assets';\nimport { escapeData } from '../../lib/escapeData';\nimport { makeWindowGuardian } from '../../model/window-guardian';\nimport { Article } from '../components/Article';\nimport { decideFormat } from '../lib/decideFormat';\nimport { decideTheme } from '../lib/decideTheme';\nimport { articleTemplate } from './articleTemplate';\n\ninterface Props {\n\tdata: DCRServerDocumentData;\n}\n\nconst generateScriptTags = (\n\tscripts: Array<{ src: string; legacy?: boolean } | false>,\n) =>\n\tscripts.reduce<string[]>((scriptTags, script) => {\n\t\tif (script === false) return scriptTags;\n\n\t\tlet attrs: string;\n\t\tswitch (script.legacy) {\n\t\t\tcase true:\n\t\t\t\tattrs = 'defer nomodule';\n\t\t\t\tbreak;\n\t\t\tcase false:\n\t\t\t\tattrs = 'type=\"module\"';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tattrs = 'defer';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn [\n\t\t\t...scriptTags,\n\t\t\t`<script ${attrs} src=\"${script.src}\"></script>`,\n\t\t];\n\t}, []);\n\nconst decideTitle = (CAPIArticle: CAPIArticleType): string => {\n\tif (\n\t\tdecideTheme(CAPIArticle.format) === ArticlePillar.Opinion &&\n\t\tCAPIArticle.author.byline\n\t) {\n\t\treturn `${CAPIArticle.headline} | ${CAPIArticle.author.byline} | The Guardian`;\n\t}\n\treturn `${CAPIArticle.headline} | ${CAPIArticle.sectionLabel} | The Guardian`;\n};\n\nexport const articleToHtml = ({ data }: Props): string => {\n\tconst { CAPIArticle, NAV, linkedData } = data;\n\tconst title = decideTitle(CAPIArticle);\n\tconst key = 'dcr';\n\tconst cache = createCache({ key });\n\n\t// eslint-disable-next-line @typescript-eslint/unbound-method\n\tconst { extractCriticalToChunks, constructStyleTagsFromChunks } =\n\t\tcreateEmotionServer(cache);\n\n\tconst format: ArticleFormat = decideFormat(CAPIArticle.format);\n\n\tconst html = renderToString(\n\t\t<CacheProvider value={cache}>\n\t\t\t<Article format={format} CAPIArticle={CAPIArticle} NAV={NAV} />\n\t\t</CacheProvider>,\n\t);\n\n\tconst chunks = extractCriticalToChunks(html);\n\tconst extractedCss = constructStyleTagsFromChunks(chunks);\n\n\t// We want to only insert script tags for the elements or main media elements on this page view\n\t// so we need to check what elements we have and use the mapping to the the chunk name\n\tconst CAPIElements: CAPIElement[] = CAPIArticle.blocks\n\t\t.map((block) => block.elements)\n\t\t.flat();\n\n\t/**\n\t * Preload the following woff2 font files\n\t * TODO: Identify critical fonts to preload\n\t */\n\tconst fontFiles = [\n\t\t// 'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Light.woff2',\n\t\t// 'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-LightItalic.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Medium.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-MediumItalic.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Bold.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Regular.woff2',\n\t\t// 'https://assets.guim.co.uk/static/frontend/fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-RegularItalic.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Bold.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Regular.woff2',\n\t\t// 'http://assets.guim.co.uk/static/frontend/fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-RegularItalic.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Bold.woff2',\n\t];\n\n\tconst polyfillIO =\n\t\t'https://assets.guim.co.uk/polyfill.io/v3/polyfill.min.js?rum=0&features=es6,es7,es2017,es2018,es2019,default-3.6,HTMLPictureElement,IntersectionObserver,IntersectionObserverEntry,URLSearchParams,fetch,NodeList.prototype.forEach,navigator.sendBeacon,performance.now,Promise.allSettled&flags=gated&callback=guardianPolyfilled&unknown=polyfill&cacheClear=1';\n\n\tconst pageHasNonBootInteractiveElements = CAPIElements.some(\n\t\t(element) =>\n\t\t\telement._type ===\n\t\t\t\t'model.dotcomrendering.pageElements.InteractiveBlockElement' &&\n\t\t\telement.scriptUrl !==\n\t\t\t\t'https://interactive.guim.co.uk/embed/iframe-wrapper/0.1/boot.js', // We have rewritten this standard behaviour into Dotcom Rendering\n\t);\n\n\tconst pageHasTweetElements = CAPIElements.some(\n\t\t(element) =>\n\t\t\telement._type ===\n\t\t\t'model.dotcomrendering.pageElements.TweetBlockElement',\n\t);\n\n\t/**\n\t * The highest priority scripts.\n\t * These scripts have a considerable impact on site performance.\n\t * Only scripts critical to application execution may go in here.\n\t * Please talk to the dotcom platform team before adding more.\n\t * Scripts will be executed in the order they appear in this array\n\t */\n\tconst priorityScriptTags = generateScriptTags([\n\t\t{ src: polyfillIO },\n\t\t...getScriptArrayFromFile('bootCmp.js'),\n\t\t...getScriptArrayFromFile('ophan.js'),\n\t\tCAPIArticle.config && { src: CAPIArticle.config.commercialBundleUrl },\n\t\t...getScriptArrayFromFile('sentryLoader.js'),\n\t\t...getScriptArrayFromFile('dynamicImport.js'),\n\t\tpageHasNonBootInteractiveElements && {\n\t\t\tsrc: `${ASSET_ORIGIN}static/frontend/js/curl-with-js-and-domReady.js`,\n\t\t},\n\t\t...getScriptArrayFromFile('islands.js'),\n\t]);\n\n\t/**\n\t * Low priority scripts. These scripts will be requested\n\t * asynchronously after the main HTML has been parsed. Execution\n\t * order is not guaranteed. It is even possible that these execute\n\t * *before* the high priority scripts, although this is very\n\t * unlikely.\n\t */\n\tconst lowPriorityScriptTags = generateScriptTags([\n\t\t...getScriptArrayFromFile('atomIframe.js'),\n\t\t...getScriptArrayFromFile('embedIframe.js'),\n\t\t...getScriptArrayFromFile('newsletterEmbedIframe.js'),\n\t\t...getScriptArrayFromFile('relativeTime.js'),\n\t\t...getScriptArrayFromFile('initDiscussion.js'),\n\t]);\n\n\tconst gaChunk = getScriptArrayFromFile('ga.js');\n\tconst modernScript = gaChunk.find((script) => script.legacy === false);\n\tconst legacyScript = gaChunk.find((script) => script.legacy === true);\n\tconst gaPath = {\n\t\tmodern: modernScript?.src as string,\n\t\tlegacy: legacyScript?.src as string,\n\t};\n\n\t/**\n\t * We escape windowGuardian here to prevent errors when the data\n\t * is placed in a script tag on the page\n\t */\n\tconst windowGuardian = escapeData(JSON.stringify(makeWindowGuardian(data)));\n\n\tconst hasAmpInteractiveTag = CAPIArticle.tags.some(\n\t\t(tag) => tag.id === 'tracking/platformfunctional/ampinteractive',\n\t);\n\n\t// Only include AMP link for interactives which have the 'ampinteractive' tag\n\tconst ampLink =\n\t\tCAPIArticle.format.design !== 'InteractiveDesign' ||\n\t\thasAmpInteractiveTag\n\t\t\t? `https://amp.theguardian.com/${data.CAPIArticle.pageId}`\n\t\t\t: undefined;\n\n\tconst { openGraphData } = CAPIArticle;\n\tconst { twitterData } = CAPIArticle;\n\tconst keywords =\n\t\ttypeof CAPIArticle.config.keywords === 'undefined' ||\n\t\tCAPIArticle.config.keywords === 'Network Front'\n\t\t\t? ''\n\t\t\t: CAPIArticle.config.keywords;\n\n\tconst initTwitter = `\n\t\t// https://developer.twitter.com/en/docs/twitter-for-websites/javascript-api/guides/set-up-twitter-for-websites\n\t\twindow.twttr = (function(d, s, id) {\n\t\t\tvar js, fjs = d.getElementsByTagName(s)[0],\n\t\t\tt = window.twttr || {};\n\t\t\tif (d.getElementById(id)) return t;\n\t\t\tjs = d.createElement(s);\n\t\t\tjs.id = id;\n\t\t\tjs.src = \"https://platform.twitter.com/widgets.js\";\n\t\t\tfjs.parentNode.insertBefore(js, fjs);\n\n\t\t\tt._e = [];\n\t\t\tt.ready = function(f) {\n\t\t\tt._e.push(f);\n\t\t\t};\n\n\t\t\treturn t;\n\t\t}(document, \"script\", \"twitter-wjs\"));\n\t`;\n\n\treturn articleTemplate({\n\t\tlinkedData,\n\t\tpriorityScriptTags,\n\t\tlowPriorityScriptTags,\n\t\tcss: extractedCss,\n\t\thtml,\n\t\tfontFiles,\n\t\ttitle,\n\t\tdescription: CAPIArticle.trailText,\n\t\twindowGuardian,\n\t\tgaPath,\n\t\tampLink,\n\t\topenGraphData,\n\t\ttwitterData,\n\t\tkeywords,\n\t\tinitTwitter:\n\t\t\tpageHasTweetElements || format.design === ArticleDesign.LiveBlog\n\t\t\t\t? initTwitter\n\t\t\t\t: undefined,\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/server/blocksToHtml.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/server/frontTemplate.ts","messages":[{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"URLSearchParams\" of template literal expression.","line":234,"column":68,"nodeType":"NewExpression","messageId":"invalidType","endLine":243,"endColumn":7},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"any\" of template literal expression.","line":246,"column":42,"nodeType":"CallExpression","messageId":"invalidType","endLine":246,"endColumn":55}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { brandBackground, resets } from '@guardian/source-foundations';\nimport { ASSET_ORIGIN } from '../../lib/assets';\nimport { getFontsCss } from '../../lib/fonts-css';\n\nexport const frontTemplate = ({\n\ttitle = 'The Guardian',\n\tpriorityScriptTags,\n\tlowPriorityScriptTags,\n\tcss,\n\thtml,\n\twindowGuardian,\n\tgaPath,\n\tfontFiles = [],\n\tkeywords,\n}: {\n\ttitle?: string;\n\tpriorityScriptTags: string[];\n\tlowPriorityScriptTags: string[];\n\tcss: string;\n\thtml: string;\n\twindowGuardian: string;\n\tfontFiles?: string[];\n\tgaPath: { modern: string; legacy: string };\n\tkeywords: string;\n}): string => {\n\tconst favicon =\n\t\tprocess.env.NODE_ENV === 'production'\n\t\t\t? 'favicon-32x32.ico'\n\t\t\t: 'favicon-32x32-dev-yellow.ico';\n\n\tconst fontPreloadTags = fontFiles.map(\n\t\t(fontFile) =>\n\t\t\t`<link rel=\"preload\" href=\"${fontFile}\" as=\"font\" crossorigin>`,\n\t);\n\n\t// Opt out of having information from our website used for personalization of content and suggestions for Twitter users, including ads\n\t// See https://developer.twitter.com/en/docs/twitter-for-websites/webpage-properties/overview\n\tconst twitterSecAndPrivacyMetaTags = `<meta name=\"twitter:dnt\" content=\"on\">`;\n\n\t/**\n\t * Duplicated prefetch and preconnect tags from DCP:\n\t * Documented here: https://github.com/guardian/frontend/pull/12935\n\t * Preconnect should be used for the most crucial third party domains\n\t * \"use preconnect when you know for sure that you’re going to be accessing a resource\"\n\t * - https://www.smashingmagazine.com/2019/04/optimization-performance-resource-hints/\n\t * DNS-prefetch should be used for other third party domains that we are likely to connect to but not sure (ads)\n\t * Preconnecting to too many URLs can reduce page performance\n\t * DNS-prefetch can also be used as a fallback for IE11\n\t * More information on preconnecting:\n\t * https://css-tricks.com/using-relpreconnect-to-establish-network-connections-early-and-increase-performance/\n\t * More information on prefetching:\n\t * https://developer.mozilla.org/en-US/docs/Web/Performance/dns-prefetch\n\t */\n\tconst staticPreconnectUrls = [\n\t\t`${ASSET_ORIGIN}`,\n\t\t`https://i.guim.co.uk`,\n\t\t`https://j.ophan.co.uk`,\n\t\t`https://ophan.theguardian.com`,\n\t];\n\n\tconst staticPrefetchUrls = [\n\t\t...staticPreconnectUrls,\n\t\t`https://api.nextgen.guardianapps.co.uk`,\n\t\t`https://hits-secure.theguardian.com`,\n\t\t`https://interactive.guim.co.uk`,\n\t\t`https://phar.gu-web.net`,\n\t\t`https://static.theguardian.com`,\n\t\t`https://support.theguardian.com`,\n\t];\n\n\tconst allStaticPreconnectUrls =\n\t\tprocess.env.NODE_ENV === 'production'\n\t\t\t? [...staticPreconnectUrls, 'https://sourcepoint.theguardian.com']\n\t\t\t: staticPreconnectUrls;\n\n\tconst preconnectTags = allStaticPreconnectUrls.map(\n\t\t(src) => `<link rel=\"preconnect\" href=\"${src}\">`,\n\t);\n\n\tconst prefetchTags = staticPrefetchUrls.map(\n\t\t(src) => `<link rel=\"dns-prefetch\" href=\"${src}\">`,\n\t);\n\n\tconst weAreHiringMessage = `\n<!--\n\nWe are hiring, ever thought about joining us?\nhttps://workforus.theguardian.com/careers/product-engineering/\n\n\n                                    GGGGGGGGG\n                           GGGGGGGGGGGGGGGGGGGGGGGGGG\n                       GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n                    GGGGGGGGGGGGGGGGG      GG   GGGGGGGGGGGGG\n                  GGGGGGGGGGGG        GGGGGGGGG      GGGGGGGGGG\n                GGGGGGGGGGG         GGGGGGGGGGGGG       GGGGGGGGG\n              GGGGGGGGGG          GGGGGGGGGGGGGGGGG     GGGGGGGGGGG\n             GGGGGGGGG           GGGGGGGGGGGGGGGGGGG    GGGGGGGGGGGG\n            GGGGGGGGG           GGGGGGGGGGGGGGGGGGGGGG  GGGGGGGGGGGGG\n           GGGGGGGGG            GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n           GGGGGGGG             GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n          GGGGGGGG              GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n          GGGGGGGG              GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n          GGGGGGGG              GGGGGGGGGGGG              GGGGGGGGGGGGG\n           GGGGGGG              GGGGGGGGGGGGG           GGGGGGGGGGGGGG\n           GGGGGGGG             GGGGGGGGGGGGG           GGGGGGGGGGGGGG\n            GGGGGGGG            GGGGGGGGGGGGG           GGGGGGGGGGGGG\n             GGGGGGGG            GGGGGGGGGGGG           GGGGGGGGGGGG\n              GGGGGGGGG           GGGGGGGGGGG           GGGGGGGGGGG\n                GGGGGGGGGG         GGGGGGGGGG           GGGGGGGGG\n                  GGGGGGGGGGG        GGGGGGGG        GGGGGGGGGG\n                    GGGGGGGGGGGGGG      GGGGG  GGGGGGGGGGGGGG\n                       GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG\n                            GGGGGGGGGGGGGGGGGGGGGGGGG\n                                    GGGGGGGGG\n\n\n         GGGGG    GGG     GGG\n        G     G  G   G   G   G     G   G  GGGGGG    GG    GGGGG    GGGG\n              G G     G G     G     G G   G        G  G   G    G  G\n         GGGGG  G     G G     G      G    GGGGG   G    G  G    G   GGGG\n        G       G     G G     G      G    G       GGGGGG  GGGGG        G\n        G        G   G   G   G       G    G       G    G  G   G   G    G\n        GGGGGGG   GGG     GGG        G    GGGGGG  G    G  G    G   GGGG\n\n--->`;\n\n\treturn `<!doctype html>\n        <html lang=\"en\">\n            <head>\n\t\t\t    ${weAreHiringMessage}\n                <title>${title}</title>\n                <meta name=\"description\" content=\"Latest news, sport, business, comment, analysis and reviews from the Guardian, the world&#x27;s leading liberal voice\" />\n                <meta charset=\"utf-8\">\n\n                <meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,initial-scale=1\">\n                <meta name=\"theme-color\" content=\"${brandBackground.primary}\" />\n                <link rel=\"icon\" href=\"https://static.guim.co.uk/images/${favicon}\">\n\n                ${preconnectTags.join('\\n')}\n                ${prefetchTags.join('\\n')}\n                ${fontPreloadTags.join('\\n')}\n\n                ${twitterSecAndPrivacyMetaTags}\n\n                <!--  This tag enables pages to be featured in Google Discover as large previews\n                    See: https://developers.google.com/search/docs/advanced/mobile/google-discover?hl=en&visit_id=637424198370039526-3805703503&rd=1 -->\n                <meta name=\"robots\" content=\"max-image-preview:large\">\n\n                <script>\n\t\t\t\t\twindow.guardian = ${windowGuardian};\n                    window.guardian.queue = []; // Queue for functions to be fired by polyfill.io callback\n                </script>\n\n                <script type=\"module\">\n                    window.guardian.mustardCut = true;\n                    window.guardian.gaPath = \"${gaPath.modern}\";\n                </script>\n\n                <script nomodule>\n                    // Browser fails mustard check\n                    window.guardian.mustardCut = false;\n                    window.guardian.gaPath = \"${gaPath.legacy}\";\n                </script>\n\n                <script>\n                    // Noop monkey patch perf.mark and perf.measure if not supported\n                    if(window.performance !== undefined && window.performance.mark === undefined) {\n                        window.performance.mark = function(){};\n                        window.performance.measure = function(){};\n                    }\n                </script>\n\n                <script>\n                    // this is a global that's called at the bottom of the pf.io response,\n                    // once the polyfills have run. This may be useful for debugging.\n                    // mainly to support browsers that don't support async=false or defer\n                    function guardianPolyfilled() {\n                        window.guardian.polyfilled = true;\n                        if (window.guardian.mustardCut === false) {\n                            window.guardian.queue.forEach(function(startup) { startup() })\n                        }\n                    }\n\n                    // We've got contracts to abide by with the Ophan tracker\n                    // Setting pageViewId here ensures we're not getting race-conditions at all\n                    window.guardian.config.ophan = {\n                        // This is duplicated from\n                        // https://github.com/guardian/ophan/blob/master/tracker-js/assets/coffee/ophan/transmit.coffee\n                        // Please do not change this without talking to the Ophan project first.\n                        pageViewId:\n                            new Date().getTime().toString(36) +\n                            'xxxxxxxxxxxx'.replace(/x/g, function() {\n                                return Math.floor(Math.random() * 36).toString(36);\n                            }),\n                    };\n                </script>\n\n                <script>\n                    // Set the browserId from the bwid cookie on the ophan object created above\n                    // This will need to be replaced later with an async request to an endpoint\n                    (function (window, document) {\n\n                        function getCookieValue(name) {\n                            var nameEq = name + \"=\",\n                                cookies = document.cookie.split(';'),\n                                value = null;\n                            cookies.forEach(function (cookie) {\n                                while (cookie.charAt(0) === ' ') {\n                                    cookie = cookie.substring(1, cookie.length);\n                                }\n                                if (cookie.indexOf(nameEq) === 0) {\n                                    value = cookie.substring(nameEq.length, cookie.length);\n                                }\n                            });\n                            return value;\n                        }\n\n                        window.guardian.config.ophan.browserId = getCookieValue(\"bwid\");\n\n                    })(window, document);\n                </script>\n\n\t\t\t\t<script>\n\t\t\t\t\twindow.curlConfig = {\n\t\t\t\t\t\tbaseUrl: '${ASSET_ORIGIN}assets',\n\t\t\t\t\t\tapiName: 'require'\n\t\t\t\t\t};\n\t\t\t\t\twindow.curl = window.curlConfig;\n\t\t\t\t</script>\n\n\n                <noscript>\n                    <img src=\"https://sb.scorecardresearch.com/p?${new URLSearchParams(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tc1: '2',\n\t\t\t\t\t\t\tc2: '6035250',\n\t\t\t\t\t\t\tcv: '2.0',\n\t\t\t\t\t\t\tcj: '1',\n\t\t\t\t\t\t\tcs_ucfr: '0',\n\t\t\t\t\t\t\tcomscorekw: keywords,\n\t\t\t\t\t\t},\n\t\t\t\t\t)}\" />\n                </noscript>\n                ${priorityScriptTags.join('\\n')}\n                <style class=\"webfont\">${getFontsCss()}</style>\n                <style>${resets.resetCSS}</style>\n\t\t\t\t${css}\n\t\t\t\t<link rel=\"stylesheet\" media=\"print\" href=\"${ASSET_ORIGIN}static/frontend/css/print.css\">\n\t\t\t</head>\n\n\t\t\t<body>\n                ${html}\n                ${[...lowPriorityScriptTags].join('\\n')}\n            </body>\n        </html>`;\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/server/frontToHtml.tsx","messages":[{"ruleId":"eslint-comments/require-description","severity":1,"message":"Unexpected undescribed directive comment. Include descriptions to explain why the comment is necessary.","line":46,"column":0,"nodeType":null,"endLine":46,"endColumn":63},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, value is always truthy.","line":91,"column":3,"nodeType":"MemberExpression","messageId":"alwaysTruthy","endLine":91,"endColumn":15},{"ruleId":"@typescript-eslint/no-unnecessary-condition","severity":1,"message":"Unnecessary conditional, expected left-hand side of `??` operator to be possibly null or undefined.","line":127,"column":19,"nodeType":"MemberExpression","messageId":"neverNullish","endLine":127,"endColumn":40}],"suppressedMessages":[{"ruleId":"@typescript-eslint/unbound-method","severity":2,"message":"Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.","line":47,"column":8,"nodeType":"VariableDeclarator","messageId":"unboundWithoutThisAnnotation","endLine":48,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/unbound-method","severity":2,"message":"Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.","line":47,"column":8,"nodeType":"VariableDeclarator","messageId":"unboundWithoutThisAnnotation","endLine":48,"endColumn":29,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import createCache from '@emotion/cache';\nimport { CacheProvider } from '@emotion/react';\nimport createEmotionServer from '@emotion/server/create-instance';\nimport { renderToString } from 'react-dom/server';\nimport { getScriptArrayFromFile } from '../../lib/assets';\nimport { escapeData } from '../../lib/escapeData';\nimport { makeFrontWindowGuardian } from '../../model/window-guardian';\nimport { FrontPage } from '../components/FrontPage';\nimport { frontTemplate } from './frontTemplate';\n\ninterface Props {\n\tfront: DCRFrontType;\n\tNAV: NavType;\n}\n\nconst generateScriptTags = (\n\tscripts: Array<{ src: string; legacy?: boolean } | false>,\n) =>\n\tscripts.reduce<string[]>((scriptTags, script) => {\n\t\tif (script === false) return scriptTags;\n\n\t\tlet attrs: string;\n\t\tswitch (script.legacy) {\n\t\t\tcase true:\n\t\t\t\tattrs = 'defer nomodule';\n\t\t\t\tbreak;\n\t\t\tcase false:\n\t\t\t\tattrs = 'type=\"module\"';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tattrs = 'defer';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn [\n\t\t\t...scriptTags,\n\t\t\t`<script ${attrs} src=\"${script.src}\"></script>`,\n\t\t];\n\t}, []);\n\nexport const frontToHtml = ({ front, NAV }: Props): string => {\n\tconst title = front.webTitle;\n\tconst key = 'dcr';\n\tconst cache = createCache({ key });\n\n\t// eslint-disable-next-line @typescript-eslint/unbound-method\n\tconst { extractCriticalToChunks, constructStyleTagsFromChunks } =\n\t\tcreateEmotionServer(cache);\n\n\tconst html = renderToString(\n\t\t<CacheProvider value={cache}>\n\t\t\t<FrontPage front={front} NAV={NAV} />\n\t\t</CacheProvider>,\n\t);\n\n\tconst chunks = extractCriticalToChunks(html);\n\tconst extractedCss = constructStyleTagsFromChunks(chunks);\n\n\t/**\n\t * Preload the following woff2 font files\n\t * TODO: Identify critical fonts to preload\n\t */\n\tconst fontFiles = [\n\t\t// 'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Light.woff2',\n\t\t// 'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-LightItalic.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Medium.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-MediumItalic.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-headline/noalts-not-hinted/GHGuardianHeadline-Bold.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Regular.woff2',\n\t\t// 'https://assets.guim.co.uk/static/frontend/fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-RegularItalic.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-textegyptian/noalts-not-hinted/GuardianTextEgyptian-Bold.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Regular.woff2',\n\t\t// 'http://assets.guim.co.uk/static/frontend/fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-RegularItalic.woff2',\n\t\t'https://assets.guim.co.uk/static/frontend/fonts/guardian-textsans/noalts-not-hinted/GuardianTextSans-Bold.woff2',\n\t];\n\n\tconst polyfillIO =\n\t\t'https://assets.guim.co.uk/polyfill.io/v3/polyfill.min.js?rum=0&features=es6,es7,es2017,es2018,es2019,default-3.6,HTMLPictureElement,IntersectionObserver,IntersectionObserverEntry,URLSearchParams,fetch,NodeList.prototype.forEach,navigator.sendBeacon,performance.now,Promise.allSettled&flags=gated&callback=guardianPolyfilled&unknown=polyfill&cacheClear=1';\n\n\t/**\n\t * The highest priority scripts.\n\t * These scripts have a considerable impact on site performance.\n\t * Only scripts critical to application execution may go in here.\n\t * Please talk to the dotcom platform team before adding more.\n\t * Scripts will be executed in the order they appear in this array\n\t */\n\tconst priorityScriptTags = generateScriptTags([\n\t\t{ src: polyfillIO },\n\t\t...getScriptArrayFromFile('bootCmp.js'),\n\t\t...getScriptArrayFromFile('ophan.js'),\n\t\tfront.config && { src: front.config.commercialBundleUrl },\n\t\t...getScriptArrayFromFile('sentryLoader.js'),\n\t\t...getScriptArrayFromFile('dynamicImport.js'),\n\t\t...getScriptArrayFromFile('islands.js'),\n\t]);\n\n\t/**\n\t * Low priority scripts. These scripts will be requested\n\t * asynchronously after the main HTML has been parsed. Execution\n\t * order is not guaranteed. It is even possible that these execute\n\t * *before* the high priority scripts, although this is very\n\t * unlikely.\n\t */\n\tconst lowPriorityScriptTags = generateScriptTags([\n\t\t...getScriptArrayFromFile('atomIframe.js'),\n\t\t...getScriptArrayFromFile('embedIframe.js'),\n\t\t...getScriptArrayFromFile('newsletterEmbedIframe.js'),\n\t\t...getScriptArrayFromFile('relativeTime.js'),\n\t]);\n\n\tconst gaChunk = getScriptArrayFromFile('ga.js');\n\tconst modernScript = gaChunk.find((script) => script.legacy === false);\n\tconst legacyScript = gaChunk.find((script) => script.legacy === true);\n\tconst gaPath = {\n\t\tmodern: modernScript?.src as string,\n\t\tlegacy: legacyScript?.src as string,\n\t};\n\n\t/**\n\t * We escape windowGuardian here to prevent errors when the data\n\t * is placed in a script tag on the page\n\t */\n\tconst windowGuardian = escapeData(\n\t\tJSON.stringify(makeFrontWindowGuardian(front)),\n\t);\n\n\tconst keywords = front.config.keywords ?? '';\n\n\treturn frontTemplate({\n\t\tpriorityScriptTags,\n\t\tlowPriorityScriptTags,\n\t\tcss: extractedCss,\n\t\thtml,\n\t\tfontFiles,\n\t\ttitle,\n\t\twindowGuardian,\n\t\tgaPath,\n\t\tkeywords,\n\t});\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/server/index.ts","messages":[{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Record<string, unknown>`.","line":45,"column":39,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":45,"endColumn":43},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":60,"column":32,"nodeType":"Identifier","messageId":"invalidType","endLine":60,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Record<string, unknown>`.","line":69,"column":39,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":69,"endColumn":43},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":84,"column":32,"nodeType":"Identifier","messageId":"invalidType","endLine":84,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Record<string, unknown>`.","line":101,"column":39,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":101,"endColumn":43},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":116,"column":32,"nodeType":"Identifier","messageId":"invalidType","endLine":116,"endColumn":39},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":163,"column":32,"nodeType":"Identifier","messageId":"invalidType","endLine":163,"endColumn":39},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":183,"column":32,"nodeType":"Identifier","messageId":"invalidType","endLine":183,"endColumn":39},{"ruleId":"@typescript-eslint/no-unsafe-argument","severity":1,"message":"Unsafe argument of type `any` assigned to a parameter of type `Record<string, unknown>`.","line":192,"column":30,"nodeType":"Identifier","messageId":"unsafeArgument","endLine":192,"endColumn":34},{"ruleId":"@typescript-eslint/restrict-template-expressions","severity":1,"message":"Invalid type \"string | undefined\" of template literal expression.","line":200,"column":32,"nodeType":"Identifier","messageId":"invalidType","endLine":200,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type express from 'express';\nimport { Article as ExampleArticle } from '../../../fixtures/generated/articles/Article';\nimport { enhanceBlocks } from '../../model/enhanceBlocks';\nimport { enhanceCollections } from '../../model/enhanceCollections';\nimport { enhanceStandfirst } from '../../model/enhanceStandfirst';\nimport { extract as extractGA } from '../../model/extract-ga';\nimport { extractNAV } from '../../model/extract-nav';\nimport { validateAsCAPIType, validateAsFrontType } from '../../model/validate';\nimport { articleToHtml } from './articleToHtml';\nimport { blocksToHtml } from './blocksToHtml';\nimport { frontToHtml } from './frontToHtml';\nimport { keyEventsToHtml } from './keyEventsToHtml';\n\nfunction enhancePinnedPost(format: CAPIFormat, block?: Block) {\n\treturn block ? enhanceBlocks([block], format)[0] : block;\n}\n\nconst enhanceCAPIType = (body: Record<string, unknown>): CAPIArticleType => {\n\tconst data = validateAsCAPIType(body);\n\tconst CAPIArticle: CAPIArticleType = {\n\t\t...data,\n\t\tblocks: enhanceBlocks(data.blocks, data.format),\n\t\tpinnedPost: enhancePinnedPost(data.format, data.pinnedPost),\n\t\tstandfirst: enhanceStandfirst(data.standfirst),\n\t};\n\treturn CAPIArticle;\n};\n\nconst enhanceFront = (body: Record<string, unknown>): DCRFrontType => {\n\tconst data: FEFrontType = validateAsFrontType(body);\n\treturn {\n\t\t...data,\n\t\tpressedPage: {\n\t\t\t...data.pressedPage,\n\t\t\tcollections: enhanceCollections(data.pressedPage.collections),\n\t\t},\n\t};\n};\n\nexport const renderArticle = (\n\t{ body }: express.Request,\n\tres: express.Response,\n): void => {\n\ttry {\n\t\tconst CAPIArticle = enhanceCAPIType(body);\n\t\tconst resp = articleToHtml({\n\t\t\tdata: {\n\t\t\t\tCAPIArticle,\n\t\t\t\tsite: 'frontend',\n\t\t\t\tpage: 'Article',\n\t\t\t\tNAV: extractNAV(CAPIArticle.nav),\n\t\t\t\tGA: extractGA(CAPIArticle),\n\t\t\t\tlinkedData: CAPIArticle.linkedData,\n\t\t\t},\n\t\t});\n\n\t\tres.status(200).send(resp);\n\t} catch (e) {\n\t\tconst message = e instanceof Error ? e.stack : 'Unknown Error';\n\t\tres.status(500).send(`<pre>${message}</pre>`);\n\t}\n};\n\nexport const renderArticleJson = (\n\t{ body }: express.Request,\n\tres: express.Response,\n): void => {\n\ttry {\n\t\tconst CAPIArticle = enhanceCAPIType(body);\n\t\tconst resp = {\n\t\t\tdata: {\n\t\t\t\tCAPIArticle,\n\t\t\t\tsite: 'frontend',\n\t\t\t\tpage: 'Article',\n\t\t\t\tNAV: extractNAV(CAPIArticle.nav),\n\t\t\t\tGA: extractGA(CAPIArticle),\n\t\t\t\tlinkedData: CAPIArticle.linkedData,\n\t\t\t},\n\t\t};\n\n\t\tres.status(200).send(resp);\n\t} catch (e) {\n\t\tconst message = e instanceof Error ? e.stack : 'Unknown Error';\n\t\tres.status(500).send(`<pre>${message}</pre>`);\n\t}\n};\n\nexport const renderPerfTest = (\n\treq: express.Request,\n\tres: express.Response,\n): void => {\n\treq.body = ExampleArticle;\n\trenderArticle(req, res);\n};\n\nexport const renderInteractive = (\n\t{ body }: express.Request,\n\tres: express.Response,\n): void => {\n\ttry {\n\t\tconst CAPIArticle = enhanceCAPIType(body);\n\t\tconst resp = articleToHtml({\n\t\t\tdata: {\n\t\t\t\tCAPIArticle,\n\t\t\t\tsite: 'frontend',\n\t\t\t\tpage: 'Interactive',\n\t\t\t\tNAV: extractNAV(CAPIArticle.nav),\n\t\t\t\tGA: extractGA(CAPIArticle),\n\t\t\t\tlinkedData: CAPIArticle.linkedData,\n\t\t\t},\n\t\t});\n\n\t\tres.status(200).send(resp);\n\t} catch (e) {\n\t\tconst message = e instanceof Error ? e.stack : 'Unknown Error';\n\t\tres.status(500).send(`<pre>${message}</pre>`);\n\t}\n};\n\nexport const renderBlocks = (\n\t{ body }: { body: BlocksRequest },\n\tres: express.Response,\n): void => {\n\ttry {\n\t\tconst {\n\t\t\tblocks,\n\t\t\tformat,\n\t\t\thost,\n\t\t\tpageId,\n\t\t\twebTitle,\n\t\t\tajaxUrl,\n\t\t\tisAdFreeUser,\n\t\t\tisSensitive,\n\t\t\tvideoDuration,\n\t\t\tedition,\n\t\t\tsection,\n\t\t\tsharedAdTargeting,\n\t\t\tadUnit,\n\t\t\tswitches,\n\t\t} = body;\n\n\t\tconst enhancedBlocks = enhanceBlocks(blocks, format);\n\t\tconst html = blocksToHtml({\n\t\t\tblocks: enhancedBlocks,\n\t\t\tformat,\n\t\t\thost,\n\t\t\tpageId,\n\t\t\twebTitle,\n\t\t\tajaxUrl,\n\t\t\tisAdFreeUser,\n\t\t\tisSensitive,\n\t\t\tvideoDuration,\n\t\t\tedition,\n\t\t\tsection,\n\t\t\tsharedAdTargeting,\n\t\t\tadUnit,\n\t\t\tswitches,\n\t\t});\n\n\t\tres.status(200).send(html);\n\t} catch (e) {\n\t\tconst message = e instanceof Error ? e.stack : 'Unknown Error';\n\t\tres.status(500).send(`<pre>${message}</pre>`);\n\t}\n};\n\nexport const renderKeyEvents = (\n\t{ body }: { body: KeyEventsRequest },\n\tres: express.Response,\n): void => {\n\ttry {\n\t\tconst { keyEvents, format, filterKeyEvents } = body;\n\n\t\tconst html = keyEventsToHtml({\n\t\t\tkeyEvents,\n\t\t\tformat,\n\t\t\tfilterKeyEvents,\n\t\t});\n\n\t\tres.status(200).send(html);\n\t} catch (e) {\n\t\tconst message = e instanceof Error ? e.stack : 'Unknown Error';\n\t\tres.status(500).send(`<pre>${message}</pre>`);\n\t}\n};\n\nexport const renderFront = (\n\t{ body }: express.Request,\n\tres: express.Response,\n): void => {\n\ttry {\n\t\tconst front = enhanceFront(body);\n\t\tconst html = frontToHtml({\n\t\t\tfront,\n\t\t\tNAV: extractNAV(front.nav),\n\t\t});\n\t\tres.status(200).send(html);\n\t} catch (e) {\n\t\tconst message = e instanceof Error ? e.stack : 'Unknown Error';\n\t\tres.status(500).send(`<pre>${message}</pre>`);\n\t}\n};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/src/web/server/keyEventsToHtml.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]},{"filePath":"/Users/max_duval/code/dotcom-rendering/dotcom-rendering/window.guardian.d.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1351,1354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1351,1354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1374,1377],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1374,1377],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1407,1410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1407,1410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2030,2033],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2030,2033],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2083,2086],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2083,2086],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type {\n\tCallback,\n\tCMP,\n\tConsentState,\n\tVendorName,\n} from '@guardian/consent-management-platform/dist/types';\nimport type { WeeklyArticleHistory } from '@guardian/support-dotcom-components/dist/dotcom/src/types';\nimport type { WindowGuardianConfig } from './src/model/window-guardian';\nimport type { OphanRecordFunction } from './src/web/browser/ophan/ophan';\nimport type { DailyArticleHistory } from './src/web/lib/dailyArticleCount';\nimport type { ReaderRevenueDevUtils } from './src/web/lib/readerRevenueDevUtils';\n\ndeclare global {\n\t/* ~ Here, declare things that go in the global namespace, or augment\n\t *~ existing declarations in the global namespace\n\t */\n\tinterface Window {\n\t\tguardian: {\n\t\t\tmustardCut: boolean;\n\t\t\tpolyfilled: boolean;\n\t\t\tonPolyfilled: () => void;\n\t\t\tqueue: Array<() => void>;\n\t\t\tconfig: WindowGuardianConfig;\n\t\t\tophan?: {\n\t\t\t\tsetEventEmitter: () => void; // We don't currently have a custom eventEmitter on DCR - like 'mediator' in Frontend.\n\t\t\t\ttrackComponentAttention: (\n\t\t\t\t\tname: string,\n\t\t\t\t\tel: Element,\n\t\t\t\t\tvisiblityThreshold: number,\n\t\t\t\t) => void;\n\t\t\t\trecord: OphanRecordFunction;\n\t\t\t\tviewId: string;\n\t\t\t\tpageViewId: string;\n\t\t\t};\n\t\t\tmodules: {\n\t\t\t\tsentry: {\n\t\t\t\t\treportError: (error: Error, feature: string) => void;\n\t\t\t\t};\n\t\t\t};\n\t\t\t// TODO expose as type from Automat client lib\n\t\t\tautomat: {\n\t\t\t\treact: any;\n\t\t\t\temotionReact: any;\n\t\t\t\temotionReactJsxRuntime: any;\n\t\t\t};\n\t\t\treaderRevenue: ReaderRevenueDevUtils;\n\t\t\tgaPath: string;\n\t\t\tweeklyArticleCount: WeeklyArticleHistory | undefined;\n\t\t\tdailyArticleCount: DailyArticleHistory | undefined;\n\t\t\tGAData: GADataType;\n\t\t};\n\t\tGoogleAnalyticsObject: string;\n\t\tga: UniversalAnalytics.ga | null;\n\t\t/**\n\t\t * ES6 module import, possibly polyfilled depending on the current\n\t\t * browser. There are three categories:\n\t\t *\n\t\t * 1. Full support out of the box\n\t\t * 2. ES6 module support but not dynamic modules\n\t\t * 3. No module support\n\t\t *\n\t\t * This gives support across all 3 cases.\n\t\t */\n\t\tguardianPolyfilledImport: (url: string) => Promise<any>; // can't be nested beyond top level\n\t\tCypress: any; // for checking if running within cypress\n\t\tguCmpHotFix: {\n\t\t\tinitialised?: boolean;\n\t\t\tcmp: CMP;\n\t\t\tonConsentChange: (fn: Callback) => void;\n\t\t\tgetConsentFor: (\n\t\t\t\tvendor: VendorName,\n\t\t\t\tconsent: ConsentState,\n\t\t\t) => boolean;\n\t\t};\n\t\tmockLiveUpdate: (data: LiveUpdateType) => void;\n\t}\n}\n/* ~ this line is required as per TypeScript's global-modifying-module.d.ts instructions */\nexport {};\n","usedDeprecatedRules":[{"ruleId":"global-require","replacedBy":[]}]}]